"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3949],{3949:(e,t,i)=>{i.r(t),i.d(t,{AgChart:()=>o.AgChart,AgCharts:()=>o.AgCharts,AgErrorBarSupportedSeriesTypes:()=>o.AgErrorBarSupportedSeriesTypes,AgTooltipPositionType:()=>o.AgTooltipPositionType,Marker:()=>o.Marker,VERSION:()=>o.VERSION,_ModuleSupport:()=>o._ModuleSupport,_Scale:()=>o._Scale,_Scene:()=>o._Scene,_Theme:()=>o._Theme,_Util:()=>o._Util,__FORCE_MODULE_DETECTION:()=>o.__FORCE_MODULE_DETECTION,time:()=>o.time});var o=i(9985),a=Object.defineProperty,n=Object.defineProperties,s=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,h=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=Reflect.get,p=Math.pow,y=(e,t,i)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,g=(e,t)=>{for(var i in t||(t={}))d.call(t,i)&&y(e,i,t[i]);if(l)for(var i of l(t))c.call(t,i)&&y(e,i,t[i]);return e},m=(e,t)=>n(e,r(t)),x=(e,t)=>{var i={};for(var o in e)d.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&c.call(e,o)&&(i[o]=e[o]);return i},f=(e,t,i,o)=>{for(var n,r=o>1?void 0:o?s(t,i):t,l=e.length-1;l>=0;l--)(n=e[l])&&(r=(o?n(t,i,r):n(r))||r);return o&&r&&a(t,i,r),r},v=(e,t,i)=>u(h(e),i,t),S=(e,t,i)=>new Promise(((o,a)=>{var n=e=>{try{r(i.next(e))}catch(t){a(t)}},s=e=>{try{r(i.throw(e))}catch(t){a(t)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,s);r((i=i.apply(e,t)).next())})),M={__extends__:o._Theme.EXTENDS_AXES_DEFAULTS,gridLine:{enabled:!1,__extends__:o._Theme.EXTENDS_AXES_GRID_LINE_DEFAULTS}};function D(e,t,i){const o=(t,i,o,a)=>{let n=e[0];for(let s=t;o>0?s<=i:s>i;s+=o){const t=e[s];if(a(n,t))return!0;n=t}return!1},a=Math.floor(e.length/2);return!!o(t,a,t,i)||o(e.length-t,a,-t,i)}var{ChartAxisDirection:b,Layers:N,ARRAY:I,BOOLEAN:k,COLOR_STRING:T,FONT_STYLE:A,FONT_WEIGHT:O,LINE_DASH:L,NUMBER:E,POSITIVE_NUMBER:_,RATIO:R,STRING:C,UNION:w,AND:P,Validate:z,MATCHING_CROSSLINE_TYPE:K}=o._ModuleSupport,{Group:V}=o._Scene,{createId:B}=o._Util,F=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.parallel=void 0}};f([z(k,{optional:!0})],F.prototype,"enabled",2),f([z(C,{optional:!0})],F.prototype,"text",2),f([z(A,{optional:!0})],F.prototype,"fontStyle",2),f([z(O,{optional:!0})],F.prototype,"fontWeight",2),f([z(_)],F.prototype,"fontSize",2),f([z(C)],F.prototype,"fontFamily",2),f([z(E)],F.prototype,"padding",2),f([z(T,{optional:!0})],F.prototype,"color",2),f([z(k,{optional:!0})],F.prototype,"parallel",2);var U=class e{constructor(){this.id=B(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.shape="polygon",this.label=new F,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=b.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.group=new V({name:"".concat(this.id),layer:!0,zIndex:e.LINE_LAYER_ZINDEX}),this.labelGroup=new V({name:"".concat(this.id),layer:!0,zIndex:e.LABEL_LAYER_ZINDEX})}setSectorNodeProps(e){var t,i,o;e.fill=this.fill,e.fillOpacity=null!=(t=this.fillOpacity)?t:1,e.stroke=this.stroke,e.strokeOpacity=null!=(i=this.strokeOpacity)?i:1,e.strokeWidth=null!=(o=this.strokeWidth)?o:1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,o,a){const{label:n}=this;e.x=t,e.y=i,e.text=n.text,e.textAlign="center",e.textBaseline=o,e.rotation=a,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=n.color,e.fontFamily=n.fontFamily,e.fontSize=n.fontSize,e.fontStyle=n.fontStyle,e.visible=!0}calculateLayout(e){}};U.LINE_LAYER_ZINDEX=N.SERIES_CROSSLINE_LINE_ZINDEX,U.RANGE_LAYER_ZINDEX=N.SERIES_CROSSLINE_RANGE_ZINDEX,U.LABEL_LAYER_ZINDEX=N.SERIES_LABEL_ZINDEX,f([z(k,{optional:!0})],U.prototype,"enabled",2),f([z(w(["range","line"],"a crossLine type"),{optional:!0})],U.prototype,"type",2),f([z(P(K("range"),I.restrict({length:2})),{optional:!0})],U.prototype,"range",2),f([z(K("value"),{optional:!0})],U.prototype,"value",2),f([z(T,{optional:!0})],U.prototype,"fill",2),f([z(R,{optional:!0})],U.prototype,"fillOpacity",2),f([z(T,{optional:!0})],U.prototype,"stroke",2),f([z(E,{optional:!0})],U.prototype,"strokeWidth",2),f([z(R,{optional:!0})],U.prototype,"strokeOpacity",2),f([z(L,{optional:!0})],U.prototype,"lineDash",2);var j=U,{ChartAxisDirection:W,validateCrossLineValues:Y}=o._ModuleSupport,{Path:G,Sector:H,Text:X}=o._Scene,{normalizeAngle360:Q,isNumberEqual:Z}=o._Util,q=class e extends j{constructor(){super(),this.direction=W.X,this.polygonNode=new G,this.sectorNode=new H,this.lineNode=new G,this.labelNode=new X,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.group.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t,shape:i,type:a,value:n,range:s}=this;if(!t||!a||!Y(a,n,s,t))return this.group.visible=!1,void(this.labelGroup.visible=!1);this.group.visible=e,this.labelGroup.visible=e,"line"===a&&"circle"===i&&t instanceof o._Scale.BandScale&&(this.type="range",this.range=[n,n]),this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(t){var i,o;const{scale:a,type:n,value:s,lineNode:r}=this;let l;if(!t||"line"!==n||!a||isNaN(l=a.convert(s)))return void(r.visible=!1);const{axisInnerRadius:h,axisOuterRadius:d}=this;r.visible=!0,r.stroke=this.stroke,r.strokeOpacity=null!=(i=this.strokeOpacity)?i:1,r.strokeWidth=null!=(o=this.strokeWidth)?o:1,r.fill=void 0,r.lineDash=this.lineDash;const c=d*Math.cos(l),u=d*Math.sin(l),p=h*Math.cos(l),y=h*Math.sin(l);r.path.clear(!0),r.path.moveTo(p,y),r.path.lineTo(c,u),this.group.zIndex=e.LINE_LAYER_ZINDEX}updatePolygonNode(t){var i;const{polygonNode:o,range:a,scale:n,shape:s,type:r}=this;let l;if(!t||"range"!==r||"polygon"!==s||!n||!a||!(l=null==(i=n.ticks)?void 0:i.call(n)))return void(o.visible=!1);const{axisInnerRadius:h,axisOuterRadius:d}=this,c=l.indexOf(a[0]),u=l.indexOf(a[1]),p=(c<=u?l.slice(c,u+1):l.slice(c).concat(l.slice(0,u+1))).map((e=>n.convert(e)));o.visible=!0,this.setSectorNodeProps(o);const{path:y}=o;y.clear(!0),p.forEach(((e,t)=>{const i=d*Math.cos(e),o=d*Math.sin(e);0===t?y.moveTo(i,o):y.lineTo(i,o)})),0===h?y.lineTo(0,0):p.slice().reverse().forEach((e=>{const t=h*Math.cos(e),i=h*Math.sin(e);y.lineTo(t,i)})),o.path.closePath(),this.group.zIndex=e.RANGE_LAYER_ZINDEX}updateSectorNode(t){var i;const{sectorNode:a,range:n,scale:s,shape:r,type:l}=this;if(!t||"range"!==l||"circle"!==r||!s||!n)return void(a.visible=!1);const{axisInnerRadius:h,axisOuterRadius:d}=this,c=n.map((e=>s.convert(e))),u=null!=(i=s.step)?i:0,p=s instanceof o._Scale.BandScale?u/2:0;a.visible=!0,this.setSectorNodeProps(a),a.centerX=0,a.centerY=0,a.innerRadius=h,a.outerRadius=d,a.startAngle=c[0]-p,a.endAngle=c[1]+p,this.group.zIndex=e.RANGE_LAYER_ZINDEX}updateLabelNode(e){var t,i;const{label:o,labelNode:a,range:n,scale:s,type:r}=this;if(!e||!1===o.enabled||!o.text||!s||"range"===r&&!n)return void(a.visible=!0);const{axisInnerRadius:l,axisOuterRadius:h}=this;let d,c,u,p;if("line"===r){const e=Q(s.convert(this.value)),t=1.5*Math.PI,i=Z(e,t)||e>t||e<Math.PI/2,a=(l+h)/2*Math.cos(e),n=(l+h)/2*Math.sin(e);d=a+o.padding*Math.cos(e+Math.PI/2),c=n+o.padding*Math.sin(e+Math.PI/2),p=i?"top":"bottom",u=i?e:e-Math.PI}else{const[e,a]=n.map((e=>Q(s.convert(e))));let r=(e+a)/2;e>a&&(r-=Math.PI),r=Q(r);const l=(Z(r,0)||r>0)&&r<Math.PI;let y;const g=null!=(i=null==(t=s.ticks)?void 0:t.call(s))?i:[];y="circle"===this.shape||g.length<3?h-o.padding:h*Math.cos(Math.PI/g.length)-o.padding,d=y*Math.cos(r),c=y*Math.sin(r),p=l?"bottom":"top",u=l?r-Math.PI/2:r+Math.PI/2}this.setLabelNodeProps(a,d,c,p,u)}};q.className="AngleCrossLine";var J=q,{AND:$,assignJsonApplyConstructedArray:ee,ChartAxisDirection:te,GREATER_THAN:ie,NUMBER:oe,UNION:ae,ProxyOnWrite:ne,Validate:se}=o._ModuleSupport,{Path:re,Text:le}=o._Scene,{angleBetween:he,isNumberEqual:de,toRadians:ce,normalizeAngle360:ue}=o._Util,pe=class extends o._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};f([se(ae(["fixed","parallel","perpendicular"],"a label orientation"))],pe.prototype,"orientation",2);var ye=class extends o._ModuleSupport.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new re),this.computeRange=()=>{const e=ue(-Math.PI/2+ce(this.startAngle));let t=null==this.endAngle?e+2*Math.PI:-Math.PI/2+ce(this.endAngle);t<e&&(t+=2*Math.PI),this.range=[e,t]},this.includeInvisibleDomains=!0}get direction(){return te.X}assignCrossLineArrayConstructor(e){ee(e,J)}createLabel(){return new pe}update(){return this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines(),this.tickData.length}calculateAvailableRange(){const{range:e,gridLength:t}=this;return he(e[0],e[1])*t}updatePosition(){const{translation:e,axisGroup:t,gridGroup:i,crossLineGroup:o}=this,a=Math.floor(e.x),n=Math.floor(e.y);t.translationX=a,t.translationY=n,i.translationX=a,i.translationY=n,o.translationX=a,o.translationY=n}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear(!0);const{points:i,closePath:o}=this.getAxisLinePoints();i.forEach((e=>{let{x:i,y:o,moveTo:a,arc:n,radius:s=0,startAngle:r=0,endAngle:l=0}=e;n?t.arc(i,o,s,r,l):a?t.moveTo(i,o):t.lineTo(i,o)})),o&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.color,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){var e,t;const{scale:i,shape:o,gridLength:a}=this,[n,s]=this.range,r=de(s-n,2*Math.PI),l=[];if("circle"===o)r?(l.push({x:a,y:0,moveTo:!0}),l.push({x:0,y:0,radius:a,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1})):(l.push({x:a*Math.cos(n),y:a*Math.sin(n),moveTo:!0}),l.push({x:0,y:0,radius:a,startAngle:ue(n),endAngle:ue(s),arc:!0,moveTo:!1}));else if("polygon"===o){const o=(null!=(t=null==(e=i.ticks)?void 0:e.call(i))?t:[]).map((e=>i.convert(e)));o.length>2&&o.forEach(((e,t)=>{const i=a*Math.cos(e),o=a*Math.sin(e),n=0===t;l.push({x:i,y:o,moveTo:n})}))}return{points:l,closePath:r}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{enabled:i,style:o,width:a},innerRadiusRatio:n}=this;if(!(o&&t>0))return;const s=this.tickData,r=t*n,l=o.length;this.gridLineGroupSelection.update(i?s:[],void 0,(e=>e.value)).each(((i,n,s)=>{const{value:h}=n,{stroke:d,lineDash:c}=o[s%l],u=e.convert(h);i.x1=r*Math.cos(u),i.y1=r*Math.sin(u),i.x2=t*Math.cos(u),i.y2=t*Math.sin(u),i.stroke=d,i.strokeWidth=a,i.lineDash=c,i.fill=void 0})),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this,i=this.tickData;t.update(e.enabled?i:[]).each(((t,i,o)=>{const a=this.labelData[o];a&&!a.hidden?(t.text=a.text,t.setFont(e),t.fill=e.color,t.x=a.x,t.y=a.y,t.textAlign=a.textAlign,t.textBaseline=a.textBaseline,t.visible=!0,a.rotation?(t.rotation=a.rotation,t.rotationCenterX=a.x,t.rotationCenterY=a.y):t.rotation=0):t.visible=!1}))}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:o}=this,a=this.tickData;o.update(i.enabled?a:[]).each(((o,a)=>{const{value:n}=a,s=e.convert(n),r=Math.cos(s),l=Math.sin(s);o.x1=t*r,o.y1=t*l,o.x2=(t+i.size)*r,o.y2=(t+i.size)*l,o.stroke=i.color,o.strokeWidth=i.width}))}createLabelNodeData(e,t,i){const{label:o,gridLength:a,scale:n,tick:s}=this;if(!o.enabled)return[];const r=new le,l=i.x-this.translation.x,h=i.x+i.width-this.translation.x,d=e.map(((i,d)=>{var c;const{value:u}=i,p=a+o.padding+s.size,y=n.convert(u),g=p*Math.cos(y),m=p*Math.sin(y),{textAlign:x,textBaseline:f}=this.getLabelAlign(y),v=d===e.length-1&&u!==e[0]&&de(ue(y),ue(n.convert(e[0]))),S=this.getLabelRotation(y);let M=String(u);if(o.formatter){const{callbackCache:e}=this.moduleCtx;M=null!=(c=e.call(o.formatter,{value:u,index:d}))?c:""}r.text=M,r.x=g,r.y=m,r.setFont(o),r.textAlign=x,r.textBaseline=f,r.rotation=S,S&&(r.rotationCenterX=g,r.rotationCenterY=m);let D=S?r.computeTransformedBBox():r.computeBBox();if(D&&t.hideWhenNecessary&&!S){const e=l-D.x,t=D.x+D.width-h,i=1;if(e>i||t>i){const i=D.width-Math.max(e,t);({text:M}=le.wrap(M,i,1/0,o,"never")),"\u2026"===M&&(M="",D=void 0),r.text=M,D=r.computeBBox()}}return{text:M,x:g,y:m,textAlign:x,textBaseline:f,hidden:""===M||i.hidden||v,rotation:S,box:D}}));return o.avoidCollisions&&this.avoidLabelCollisions(d),d}computeLabelsBBox(e,t){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map((e=>{let{box:t}=e;return t})).filter((e=>null!=e));return this.label.enabled&&0!==i.length?o._Scene.BBox.merge(i):null}getLabelOrientation(){const{label:e}=this;return e instanceof pe?e.orientation:"fixed"}getLabelRotation(e){var t;let i=ce(null!=(t=this.label.rotation)?t:0);e=ue(e);const o=this.getLabelOrientation();return"parallel"===o?(i+=e,e>=0&&e<Math.PI?i-=Math.PI/2:i+=Math.PI/2):"perpendicular"===o&&(i+=e,e>=Math.PI/2&&e<1.5*Math.PI&&(i+=Math.PI)),i}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let o,a;const n=this.getLabelOrientation(),s=de(t,0),r=de(i,0),l=de(t,1),h=de(i,-1),d=t>0&&!s,c=i>0&&!r;return"parallel"===n?(o="center",a=l&&r||c?"top":"bottom"):"perpendicular"===n?(o=h||d?"left":"right",a="middle"):(o="right",s?o="center":d&&(o="left"),a="bottom",r?a="middle":c&&(a="top")),{textAlign:o,textBaseline:a}}updateCrossLines(){var e;null==(e=this.crossLines)||e.forEach((e=>{if(e instanceof J){const{shape:t,gridLength:i,innerRadiusRatio:o}=this;e.shape=t,e.axisOuterRadius=i,e.axisInnerRadius=i*o}})),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}};f([ne("rotation"),se(oe.restrict({min:0,max:360}))],ye.prototype,"startAngle",2),f([se($(oe.restrict({min:0,max:720}),ie("startAngle")),{optional:!0})],ye.prototype,"endAngle",2);var{RATIO:ge,OR:me,POSITIVE_NUMBER:xe,NAN:fe,Validate:ve}=o._ModuleSupport,{BandScale:Se}=o._Scale,{isNumberEqual:Me}=o._Util,De=class extends o._ModuleSupport.AxisTick{constructor(){super(...arguments),this.minSpacing=NaN}};f([ve(me(xe,fe))],De.prototype,"minSpacing",2);var be=class extends ye{constructor(e){super(e,new Se),this.groupPaddingInner=0,this.paddingInner=0}createTick(){return new De}generateAngleTicks(){var e,t;const{scale:i,tick:o,gridLength:a}=this,n=null!=(t=null!=(e=o.values)?e:i.ticks())?t:[];if(n.length<2||isNaN(o.minSpacing))return n.map((e=>({value:e,visible:!0})));const s=n[0],r=i.convert(s),l=a*Math.cos(r),h=a*Math.sin(r);for(let d=1;d<n.length-1;d++){const e=n[d],t=i.convert(e);if(t-r>Math.PI)break;const c=a*Math.cos(t),u=a*Math.sin(t);if(Math.sqrt(p(c-l,2)+p(u-h,2))>o.minSpacing){const e=new Set([s]);return D(n,d,((t,i)=>{e.add(i)})),n.map((t=>({value:t,visible:e.has(t)})))}}return[{value:s,visible:!0}]}avoidLabelCollisions(e){let{minSpacing:t}=this.label;if(Number.isFinite(t)||(t=0),e.length<3)return;const i=(e,i)=>{if(e.hidden||i.hidden)return!1;const o=e.box.clone().grow(t/2),a=i.box.clone().grow(t/2);return o.collidesBBox(a)},o=e[0],a=e.at(-1),n=new Set([o]),s=Me(o.x,a.x)&&Me(o.y,a.y),r=Math.floor(e.length/2);for(let l=1;l<=r;l++){const t=s?e.slice(0,-1):e;if(!D(t,l,i)){D(t,l,((e,t)=>{n.add(t)}));break}}e.forEach((e=>{n.has(e)||(e.hidden=!0,e.box=void 0)}))}};be.className="AngleCategoryAxis",be.type="angle-category",f([ve(ge)],be.prototype,"groupPaddingInner",2),f([ve(ge)],be.prototype,"paddingInner",2);var Ne={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",instanceConstructor:be,themeTemplate:M},{LinearScale:Ie,Invalidating:ke}=o._Scale,{isNumberEqual:Te,range:Ae,isDenseInterval:Oe}=o._Util,Le=class extends Ie{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some((e=>!isFinite(e)))||this.arcLength<=0)return[];this.refresh();const[e,t]=this.getDomain(),{interval:i}=this;if(i){const o=Math.abs(i),a=this.getPixelRange();if(!Oe({start:e,stop:t,interval:o,availableRange:a}))return Ae(e,t,o)}const o=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(e,t);return Ae(e,t,o)}hasNiceRange(){const e=this.range.slice().sort(((e,t)=>e-t));return[Math.PI,2*Math.PI].some((t=>Te(t,e[1]-e[0])))}getNiceStepAndTickCount(){const[e,t]=this.niceDomain;let i=this.getTickStep(e,t);const o=isNaN(this.maxTickCount)?1/0:this.maxTickCount,a=Math.abs(t-e)/i;let n=Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)));return n>o&&(n/=2,i*=2),{count:n,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const e=this.niceDomain[0]>this.niceDomain[1],t=e?this.niceDomain[1]:this.niceDomain[0],{step:i,count:o}=this.getNiceStepAndTickCount(),a=1/i,n=i>=1?Math.ceil(t/i+o)*i:Math.ceil((t+o*i)*a)/a;this.niceDomain=e?[n,t]:[t,n],this.niceTickStep=i}getPixelRange(){return this.arcLength}};f([ke],Le.prototype,"arcLength",2);var{AND:Ee,Default:_e,GREATER_THAN:Re,LESS_THAN:Ce,OR:we,POSITIVE_NUMBER:Pe,NAN:ze,NUMBER_OR_NAN:Ke,MIN_SPACING:Ve,Validate:Be}=o._ModuleSupport,{angleBetween:Fe,isNumberEqual:Ue,normalisedExtentWithMetadata:je}=o._Util,We=class extends o._ModuleSupport.AxisTick{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};f([Be(we(Pe,ze))],We.prototype,"minSpacing",2),f([Be(Ve),_e(NaN)],We.prototype,"maxSpacing",2);var Ye=class extends ye{constructor(e){super(e,new Le),this.shape="circle",this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:o,clipped:a}=je(e,t,i);return{domain:o,clipped:a}}createTick(){return new We}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e);return(Fe(t,i)||2*Math.PI)*this.gridLength}generateAngleTicks(){var e;const t=this.getRangeArcLength(),{scale:i,tick:o,range:a}=this,{minSpacing:n=NaN,maxSpacing:s=NaN}=o,r=s?Math.floor(t/s):1,l=n?Math.floor(t/n):1/0,h=Math.floor(4/Math.PI*Math.abs(a[0]-a[1]));i.tickCount=Math.max(r,Math.min(l,h)),i.minTickCount=r,i.maxTickCount=l,i.arcLength=t;return(null!=(e=o.values)?e:i.ticks()).map((e=>({value:e,visible:!0})))}avoidLabelCollisions(e){let{minSpacing:t}=this.label;Number.isFinite(t)||(t=0);const i=(e,i)=>{if(e.hidden||i.hidden)return!1;const o=e.box.clone().grow(t/2),a=i.box.clone().grow(t/2);return o.collidesBBox(a)},o=e[0],a=e.at(-1);o!==a&&Ue(o.x,a.x)&&Ue(o.y,a.y)&&(a.hidden=!0);for(let n=1;n<e.length;n*=2){let t=!1;for(let o=n;o<e.length;o+=n){const a=e[o];if(i(e[o-n],a)){t=!0;break}}if(!t)return void e.forEach(((e,t)=>{t%n>0&&(e.hidden=!0,e.box=void 0)}))}e.forEach(((e,t)=>{t>0&&(e.hidden=!0,e.box=void 0)}))}};Ye.className="AngleNumberAxis",Ye.type="angle-number",f([Be(Ee(Ke,Ce("max"))),_e(NaN)],Ye.prototype,"min",2),f([Be(Ee(Ke,Re("min"))),_e(NaN)],Ye.prototype,"max",2);var Ge={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",instanceConstructor:Ye,themeTemplate:M},{OrdinalTimeScale:He}=o._Scale,{dateToNumber:Xe,Validate:Qe,Default:Ze,MAX_SPACING:qe,MIN_SPACING:Je}=o._ModuleSupport,$e=class extends o._ModuleSupport.AxisTick{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};f([Qe(Je)],$e.prototype,"minSpacing",2),f([Qe(qe),Ze(NaN)],$e.prototype,"maxSpacing",2);var et=class extends o._ModuleSupport.CategoryAxis{constructor(e){super(e,new He)}createTick(){return new $e}normaliseDataDomain(e){const t=[],i=new Set;for(let o of e){"number"===typeof o&&(o=new Date(o));const e=Xe(o);i.has(e)||(i.add(e),t.push(o))}return t.sort(((e,t)=>Xe(e)-Xe(t))),{domain:t,clipped:!1}}onLabelFormatChange(e,t,i){i?super.onLabelFormatChange(e,t,i):this.labelFormatter=this.scale.tickFormat({ticks:e,domain:t})}};et.className="OrdinalTimeAxis",et.type="ordinal-time";var tt={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",instanceConstructor:et,themeTemplate:{__extends__:o._Theme.EXTENDS_AXES_DEFAULTS,groupPaddingInner:0,label:{autoRotate:!1},gridLine:{__extends__:o._Theme.EXTENDS_AXES_GRID_LINE_DEFAULTS,enabled:!1},crosshair:{enabled:!0,snap:!0,stroke:o._Theme.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}},it={__extends__:o._Theme.EXTENDS_AXES_DEFAULTS,line:{enabled:!1,__extends__:o._Theme.EXTENDS_AXES_LINE_DEFAULTS},tick:{enabled:!1,__extends__:o._Theme.EXTENDS_AXES_TICK_DEFAULTS}},{ChartAxisDirection:ot,Validate:at,DEGREE:nt,validateCrossLineValues:st}=o._ModuleSupport,{Path:rt,Sector:lt,Text:ht}=o._Scene,{normalizeAngle360:dt,toRadians:ct,isNumberEqual:ut}=o._Util,pt=class extends F{constructor(){super(...arguments),this.positionAngle=void 0}};f([at(nt,{optional:!0})],pt.prototype,"positionAngle",2);var yt=class e extends j{constructor(){super(),this.direction=ot.Y,this.label=new pt,this.polygonNode=new rt,this.sectorNode=new lt,this.labelNode=new ht,this.outerRadius=0,this.innerRadius=0,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:i,type:a,value:n,range:s}=this;if(!i||!a||!st(a,n,s,i))return this.group.visible=!1,void(this.labelGroup.visible=!1);"line"===a&&i instanceof o._Scale.BandScale&&(this.type="range",this.range=[n,n]),this.updateRadii();const{innerRadius:r,outerRadius:l}=this;t&&(t=r>=this.axisInnerRadius&&l<=this.axisOuterRadius),this.group.visible=t,this.labelGroup.visible=t,this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t),this.group.zIndex="line"===this.type?e.LINE_LAYER_ZINDEX:e.RANGE_LAYER_ZINDEX}updateRadii(){var e;const{range:t,scale:i,type:o,axisInnerRadius:a,axisOuterRadius:n}=this;if(!i)return{innerRadius:0,outerRadius:0};const s=e=>n+a-e;let r=0,l=0;if("line"===o)r=s(i.convert(this.value)),l=r;else{const o=Math.abs(null!=(e=null==i?void 0:i.bandwidth)?e:0),a=t.map((e=>i.convert(e)));r=s(Math.max(...a)),l=s(Math.min(...a))+o}this.outerRadius=r,this.innerRadius=l}drawPolygon(e,t,i){t.forEach(((t,o)=>{const a=e*Math.cos(t),n=e*Math.sin(t);0===o?i.path.moveTo(a,n):i.path.lineTo(a,n)})),i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:o,shape:a,type:n,innerRadius:s,outerRadius:r}=this;if(!e||"polygon"!==a||!o||!t)return void(i.visible=!1);i.visible=!0;const l=this.getPadding();i.path.clear(!0),this.drawPolygon(r-l,t,i);const h=t.slice().reverse(),d="line"===n?r-l:s+l;this.drawPolygon(d,h,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:a,sectorNode:n,shape:s,innerRadius:r,outerRadius:l}=this;if(!e||"circle"!==s||!a)return void(n.visible=!1);n.visible=!0,n.startAngle=0,n.endAngle=2*Math.PI;const h=this.getPadding();n.innerRadius=o._Util.clamp(t,r+h,i),n.outerRadius=o._Util.clamp(t,l-h,i),this.setSectorNodeProps(n)}updateLabelNode(e){var t,i;const{innerRadius:o,label:a,labelNode:n,scale:s,shape:r,type:l}=this;if(!e||!1===a.enabled||!a.text||!s)return void(n.visible=!1);const h=dt(ct((null!=(t=a.positionAngle)?t:0)-90)),d=(ut(h,0)||h>0)&&h<Math.PI,c=d?h-Math.PI/2:h+Math.PI/2;let u=0;const p=null!=(i=this.gridAngles)?i:[];u="line"===l?o+a.padding:"circle"===r||p.length<3?o-a.padding:o*Math.cos(Math.PI/p.length)-a.padding;const y=u*Math.cos(h),g=u*Math.sin(h);let m;m="line"===l?d?"top":"bottom":d?"bottom":"top",this.setLabelNodeProps(n,y,g,m,c)}getPadding(){var e,t;const{scale:i}=this;if(!i)return 0;const a=Math.abs(null!=(e=i.bandwidth)?e:0),n=Math.abs(null!=(t=i.step)?t:0);return i instanceof o._Scale.BandScale?(n-a)/2:0}};yt.className="RadiusCrossLine";var gt=yt,{assignJsonApplyConstructedArray:mt,ChartAxisDirection:xt,Default:ft,Layers:vt,DEGREE:St,MIN_SPACING:Mt,MAX_SPACING:Dt,BOOLEAN:bt,Validate:Nt}=o._ModuleSupport,{Caption:It,Group:kt,Path:Tt,Selection:At}=o._Scene,{isNumberEqual:Ot,normalizeAngle360:Lt,toRadians:Et}=o._Util,_t=class extends o._ModuleSupport.AxisTick{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};f([Nt(Mt),ft(NaN)],_t.prototype,"minSpacing",2),f([Nt(Dt),ft(NaN)],_t.prototype,"maxSpacing",2);var Rt=class extends o._ModuleSupport.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};f([Nt(bt,{optional:!0})],Rt.prototype,"autoRotate",2),f([Nt(St)],Rt.prototype,"autoRotateAngle",2);var Ct=class extends o._ModuleSupport.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new kt({name:"".concat(this.id,"-gridPaths"),zIndex:vt.AXIS_GRID_ZINDEX})),this.gridPathSelection=At.select(this.gridPathGroup,Tt)}get direction(){return xt.Y}assignCrossLineArrayConstructor(e){mt(e,gt)}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:o}=this,a=e*o,n=Et(i);return{translationX:t.x,translationY:t.y-e-a,rotation:n,rotationCenterX:0,rotationCenterY:e+a}}updateSelections(e,t,i){var o;super.updateSelections(e,t,i);const{gridLine:{enabled:a,style:n,width:s},shape:r}=this;if(!n)return;const l=this.prepareTickData(t),h=n.length,[d,c]=null!=(o=this.gridRange)?o:[0,2*Math.PI],u=Ot(c-d,2*Math.PI),p=(e,t)=>{const{path:i}=e;i.clear(!0);const o=this.getTickRadius(t);u?(i.moveTo(o,0),i.arc(0,0,o,0,2*Math.PI)):(i.moveTo(o*Math.cos(d),o*Math.sin(d)),i.arc(0,0,o,Lt(d),Lt(c))),u&&i.closePath()},y=(e,t)=>{const{path:i}=e,o=this.gridAngles;if(i.clear(!0),!o||o.length<3)return;const a=this.getTickRadius(t);o.forEach(((e,t)=>{const n=a*Math.cos(e),s=a*Math.sin(e);0===t?i.moveTo(n,s):i.lineTo(n,s),o.forEach(((e,t)=>{const o=a*Math.cos(e),n=a*Math.sin(e);0===t?i.moveTo(o,n):i.lineTo(o,n)})),i.closePath()})),i.closePath()};this.gridPathSelection.update(a?l:[]).each(((e,t,i)=>{((e,t)=>{const{stroke:i,lineDash:o}=n[t%h];e.stroke=i,e.strokeWidth=s,e.lineDash=o,e.fill=void 0})(e,i),"circle"===r?p(e,t):y(e,t)}))}updateTitle(){var e;const t=e=>e.defaultValue,{title:i,_titleCaption:o,range:a,moduleCtx:{callbackCache:n}}=this,{formatter:s=t}=null!=(e=this.title)?e:{};if(!i)return void(o.enabled=!1);o.enabled=i.enabled,o.fontFamily=i.fontFamily,o.fontSize=i.fontSize,o.fontStyle=i.fontStyle,o.fontWeight=i.fontWeight,o.color=i.color,o.wrapping=i.wrapping;let r=!1;const l=o.node;i.enabled&&(r=!0,l.rotation=Math.PI/2,l.x=Math.floor((a[0]+a[1])/2),l.y=-It.SMALL_PADDING,l.textAlign="center",l.textBaseline="bottom",l.text=n.call(s,this.getTitleFormatterParams())),l.visible=r}createTick(){return new _t}updateCrossLines(){var e;null==(e=this.crossLines)||e.forEach((e=>{if(e instanceof gt){const{shape:t,gridAngles:i,range:o,innerRadiusRatio:a}=this,n=o[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=n,e.axisInnerRadius=n*a}})),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}createLabel(){return new Rt}};f([Nt(St),ft(0)],Ct.prototype,"positionAngle",2);var{RATIO:wt,ProxyPropertyOnWrite:Pt,Validate:zt}=o._ModuleSupport,{BandScale:Kt}=o._Scale,Vt=class extends Ct{constructor(e){super(e,new Kt),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t}=this,i=t.range[0],o=i*this.innerRadiusRatio,a=(i-o)/t.domain.length;return i-e.translationY+o-a/2}};Vt.className="RadiusCategoryAxis",Vt.type="radius-category",f([zt(wt)],Vt.prototype,"groupPaddingInner",2),f([Pt("scale","paddingInner"),zt(wt)],Vt.prototype,"paddingInner",2),f([Pt("scale","paddingOuter"),zt(wt)],Vt.prototype,"paddingOuter",2);var Bt={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",instanceConstructor:Vt,themeTemplate:it},{AND:Ft,Default:Ut,GREATER_THAN:jt,LESS_THAN:Wt,NUMBER_OR_NAN:Yt,Validate:Gt}=o._ModuleSupport,{LinearScale:Ht}=o._Scale,{normalisedExtentWithMetadata:Xt}=o._Util,Qt=class extends Ct{constructor(e){super(e,new Ht),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(e){var t;const{scale:i}=this,o=null==(t=i.getDomain)?void 0:t.call(i)[1];return e.filter((e=>{let{tick:t}=e;return t!==o})).sort(((e,t)=>t.tick-e.tick))}getTickRadius(e){const{scale:t}=this,i=t.range[0],o=i*this.innerRadiusRatio;return i-e.translationY+o}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:o,clipped:a}=Xt(e,t,i);return{domain:o,clipped:a}}};Qt.className="RadiusNumberAxis",Qt.type="radius-number",f([Gt(Ft(Yt,Wt("max"))),Ut(NaN)],Qt.prototype,"min",2),f([Gt(Ft(Yt,jt("min"))),Ut(NaN)],Qt.prototype,"max",2);var Zt={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",instanceConstructor:Qt,themeTemplate:it},{BOOLEAN:qt,POSITIVE_NUMBER:Jt,ObserveChanges:$t,Validate:ei}=o._ModuleSupport,ti=class extends o._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,e.animationManager.skip(!1)}};f([$t(((e,t)=>{e.ctx.animationManager.skip(!t)})),ei(qt)],ti.prototype,"enabled",2),f([$t(((e,t)=>{e.ctx.animationManager.defaultDuration=t})),ei(Jt,{optional:!0})],ti.prototype,"duration",2);var ii={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:ti,themeTemplate:{animation:{enabled:!0}}},{BOOLEAN:oi,COLOR_STRING:ai,DATE:ni,LINE_DASH:si,NUMBER:ri,RATIO:li,STRING:hi,OBJECT:di,OR:ci,UNION:ui,BaseProperties:pi,Validate:yi}=o._ModuleSupport,gi=class extends pi{};f([yi(ai,{optional:!0})],gi.prototype,"stroke",2),f([yi(li,{optional:!0})],gi.prototype,"strokeOpacity",2),f([yi(ri,{optional:!0})],gi.prototype,"strokeWidth",2),f([yi(si,{optional:!0})],gi.prototype,"lineDash",2),f([yi(ri,{optional:!0})],gi.prototype,"lineDashOffset",2);var mi=class extends gi{constructor(){super(...arguments),this.middle=new gi,this.background=new Mi}};f([yi(di,{optional:!0})],mi.prototype,"middle",2),f([yi(di,{optional:!0})],mi.prototype,"background",2);var xi=class extends gi{constructor(){super(...arguments),this.type="line",this.handle=new vi,this.start=new Si,this.end=new Si,this.top=new fi,this.bottom=new fi,this.middle=new gi,this.background=new Mi}};f([yi(ui(["line","parallel-channel"]))],xi.prototype,"type",2),f([yi(oi,{optional:!0})],xi.prototype,"locked",2),f([yi(oi,{optional:!0})],xi.prototype,"visible",2),f([yi(di,{optional:!0})],xi.prototype,"handle",2),f([yi(di,{optional:!0})],xi.prototype,"start",2),f([yi(di,{optional:!0})],xi.prototype,"end",2),f([yi(di,{optional:!0})],xi.prototype,"top",2),f([yi(di,{optional:!0})],xi.prototype,"bottom",2),f([yi(di,{optional:!0})],xi.prototype,"middle",2),f([yi(di,{optional:!0})],xi.prototype,"background",2);var fi=class extends pi{constructor(){super(...arguments),this.start=new Si,this.end=new Si}};f([yi(di,{optional:!0})],fi.prototype,"start",2),f([yi(di,{optional:!0})],fi.prototype,"end",2);var vi=class extends pi{};f([yi(ai,{optional:!0})],vi.prototype,"fill",2),f([yi(ai,{optional:!0})],vi.prototype,"stroke",2),f([yi(li,{optional:!0})],vi.prototype,"strokeOpacity",2),f([yi(si,{optional:!0})],vi.prototype,"lineDash",2),f([yi(ri,{optional:!0})],vi.prototype,"lineDashOffset",2);var Si=class extends pi{};f([yi(ci(hi,ri,ni))],Si.prototype,"x",2),f([yi(ci(hi,ri,ni))],Si.prototype,"y",2);var Mi=class extends pi{};f([yi(ai,{optional:!0})],Mi.prototype,"fill",2),f([yi(li,{optional:!0})],Mi.prototype,"fillOpacity",2);var Di=(e=>(e.Line="line",e.ParallelChannel="parallel-channel",e))(Di||{}),bi=class extends o._Scene.Group{constructor(){super(...arguments),this.locked=!1}},Ni=class extends o._Scene.Group{constructor(){super(...arguments),this.visible=!1}drag(e){return{point:e,offset:{x:e.x-this.handle.x,y:e.y-this.handle.y}}}toggleActive(e){this.handle.strokeWidth=e?1.5:1,this.handle.dirtyPath=!0}toggleHovered(e){this.glow.visible=e,this.glow.dirtyPath=!0}toggleDragging(e){this.handle.visible=!e,this.glow.visible=this.glow.visible&&!e,this.handle.dirtyPath=!0,this.glow.dirtyPath=!0}getCursor(){return"default"}containsPoint(e,t){return this.handle.containsPoint(e,t)}},Ii=class extends Ni{constructor(){super(),this.handle=new o._Scene.Rect,this.glow=new o._Scene.Rect,this.gradient="horizontal",this.append([this.glow,this.handle]),this.handle.cornerRadius=4,this.handle.width=12,this.handle.height=12,this.handle.strokeWidth=1,this.handle.zIndex=2,this.glow.cornerRadius=4,this.glow.width=16,this.glow.height=16,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}update(e){var t,i,o;this.handle.setProperties(e),this.glow.setProperties(m(g({},e),{x:(null!=(t=e.x)?t:this.glow.x)-2,y:(null!=(i=e.y)?i:this.glow.y)-2,fill:null!=(o=e.stroke)?o:e.fill}))}drag(e){return"vertical"===this.gradient?{point:{x:e.x,y:this.handle.y},offset:{x:e.x-this.handle.x,y:0}}:{point:{x:this.handle.x,y:e.y},offset:{x:0,y:e.y-this.handle.y}}}getCursor(){return"vertical"===this.gradient?"col-resize":"row-resize"}},ki=class extends Ni{constructor(){super(),this.handle=new o._Scene.Circle,this.glow=new o._Scene.Circle,this.append([this.glow,this.handle]),this.handle.size=11,this.handle.strokeWidth=1,this.handle.zIndex=2,this.glow.size=17,this.glow.strokeWidth=0,this.glow.fillOpacity=.2,this.glow.zIndex=1,this.glow.visible=!1}update(e){this.handle.setProperties(e),this.glow.setProperties(m(g({},e),{fill:e.stroke}))}},Ti=(e,t)=>Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),Ai=class extends o._Scene.Line{constructor(){super(...arguments),this.growCollisionBox=2}updateCollisionBBox(){const e=this.x1,t=this.strokeWidth+this.growCollisionBox,i=this.y1-Math.floor(t/2),a=Ti(this.x2-e,this.y2-i);this.collisionBBox=new o._Scene.BBox(e,i,a,t)}isPointInPath(e,t){var i,o;const{collisionBBox:a,x1:n,y1:s,x2:r,y2:l}=this;if(!a)return!1;e-=n,t-=s;const h=r-n,d=l-s,c=Math.atan2(t,e)-Math.atan2(d,h),u=Ti(e,t),p=n+u*Math.cos(c),y=s+u*Math.sin(c);return null!=(o=null==(i=this.collisionBBox)?void 0:i.containsPoint(p,y))&&o}},Oi=class extends bi{constructor(){super(),this.type="channel",this.topLine=new Ai,this.middleLine=new o._Scene.Line,this.bottomLine=new Ai,this.background=new o._Scene.Path,this.handles={topLeft:new ki,topMiddle:new Ii,topRight:new ki,bottomLeft:new ki,bottomMiddle:new Ii,bottomRight:new ki},this.append([this.background,this.topLine,this.middleLine,this.bottomLine,...Object.values(this.handles)])}update(e,t,i,o){const{locked:a,visible:n}=e;this.locked=null!=a&&a,this.seriesRect=t,null!=i&&null!=o?(this.visible=null==n||n,this.updateLines(e,i,o),this.updateHandles(e,i,o),this.updateBackground(e,i,o)):this.visible=!1}toggleHandles(e){var t;"boolean"===typeof e&&(e={topLeft:e,topMiddle:e,topRight:e,bottomLeft:e,bottomMiddle:e,bottomRight:e});for(const[i,o]of Object.entries(this.handles))o.visible=null==(t=e[i])||t,o.toggleHovered(this.activeHandle===i)}toggleActive(e){this.toggleHandles(e);for(const t of Object.values(this.handles))t.toggleActive(e)}dragHandle(e,t,i){const{activeHandle:o,handles:a}=this;if(null==o)return;const{offset:n}=a[o].drag(t);a[o].toggleDragging(!0);let s=[];switch(o){case"topLeft":case"bottomLeft":s=["topLeft","bottomLeft"];break;case"topMiddle":s=["topLeft","topRight"],n.y-=6;break;case"topRight":case"bottomRight":s=["topRight","bottomRight"];break;case"bottomMiddle":s=["bottomLeft","bottomRight"],n.y-=6}const r=s.map((e=>i({x:a[e].handle.x+n.x,y:a[e].handle.y+n.y})));if(!r.some((e=>void 0===e)))for(const[l,h]of r.entries()){const t=this.getHandleDatumPoint(s[l],e);t.x=h.x,t.y=h.y}}stopDragging(){const{activeHandle:e,handles:t}=this;null!=e&&t[e].toggleDragging(!1)}getCursor(){return null==this.activeHandle?"pointer":this.handles[this.activeHandle].getCursor()}containsPoint(e,t){var i,o;const{handles:a,seriesRect:n,topLine:s,bottomLine:r}=this;this.activeHandle=void 0;for(const[l,h]of Object.entries(a))if(h.containsPoint(e,t))return this.activeHandle=l,!0;return e-=null!=(i=null==n?void 0:n.x)?i:0,t-=null!=(o=null==n?void 0:n.y)?o:0,s.containsPoint(e,t)||r.containsPoint(e,t)}updateLines(e,t,i){var o,a,n,s,r;const{topLine:l,middleLine:h,bottomLine:d}=this,{lineDash:c,lineDashOffset:u,stroke:p,strokeOpacity:y,strokeWidth:m}=e,x={lineDash:c,lineDashOffset:u,stroke:p,strokeOpacity:y,strokeWidth:m};l.setProperties(g({x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},x)),d.setProperties(g({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},x)),l.updateCollisionBBox(),d.updateCollisionBBox(),"parallel-channel"===e.type?h.setProperties({x1:t.x1,y1:i.y1+(t.y1-i.y1)/2,x2:t.x2,y2:i.y2+(t.y2-i.y2)/2,lineDash:null!=(o=e.middle.lineDash)?o:c,lineDashOffset:null!=(a=e.middle.lineDashOffset)?a:u,stroke:null!=(n=e.middle.stroke)?n:p,strokeOpacity:null!=(s=e.middle.strokeOpacity)?s:y,strokeWidth:null!=(r=e.middle.strokeWidth)?r:m}):h.visible=!1}updateHandles(e,t,i){var o,a;const{handles:{topLeft:n,topMiddle:s,topRight:r,bottomLeft:l,bottomMiddle:h,bottomRight:d}}=this,c={fill:e.handle.fill,stroke:null!=(o=e.handle.stroke)?o:e.stroke,strokeOpacity:null!=(a=e.handle.strokeOpacity)?a:e.strokeOpacity};n.update(m(g({},c),{x:t.x1,y:t.y1})),r.update(m(g({},c),{x:t.x2,y:t.y2})),l.update(m(g({},c),{x:i.x1,y:i.y1})),d.update(m(g({},c),{x:i.x2,y:i.y2})),s.update(m(g({},c),{x:t.x1+(t.x2-t.x1)/2-s.handle.width/2,y:t.y1+(t.y2-t.y1)/2-s.handle.height/2})),h.update(m(g({},c),{x:i.x1+(i.x2-i.x1)/2-h.handle.width/2,y:i.y1+(i.y2-i.y1)/2-h.handle.height/2}))}updateBackground(e,t,i){const{background:o}=this;o.path.clear(),o.path.moveTo(t.x1,t.y1),o.path.lineTo(t.x2,t.y2),o.path.lineTo(i.x2,i.y2),o.path.lineTo(i.x1,i.y1),o.path.closePath(),o.checkPathDirty(),o.setProperties({fill:e.background.fill,fillOpacity:e.background.fillOpacity})}getHandleDatumPoint(e,t){switch(e){case"topLeft":return t.top.start;case"topRight":return t.top.end;case"bottomLeft":return t.bottom.start;default:return t.bottom.end}}},Li=class extends bi{constructor(){super(),this.type="line",this.line=new Ai,this.start=new ki,this.end=new ki,this.append([this.line,this.start,this.end])}update(e,t,i){var o,a;const{line:n,start:s,end:r}=this,{locked:l,visible:h,lineDash:d,lineDashOffset:c,stroke:u,strokeWidth:p,strokeOpacity:y}=e;if(this.locked=null!=l&&l,this.seriesRect=t,null==i)return void(this.visible=!1);this.visible=null==h||h;const{x1:x,y1:f,x2:v,y2:S}=i;n.setProperties({x1:x,y1:f,x2:v,y2:S,lineDash:d,lineDashOffset:c,stroke:u,strokeWidth:p,strokeOpacity:y,fillOpacity:0}),n.updateCollisionBBox();const M={fill:e.handle.fill,stroke:null!=(o=e.handle.stroke)?o:u,strokeOpacity:null!=(a=e.handle.strokeOpacity)?a:y};s.update(m(g({},M),{x:x,y:f})),r.update(m(g({},M),{x:v,y:S}))}toggleHandles(e){var t,i;"boolean"===typeof e&&(e={start:e,end:e}),this.start.visible=null==(t=e.start)||t,this.end.visible=null==(i=e.end)||i,this.start.toggleHovered("start"===this.activeHandle),this.end.toggleHovered("end"===this.activeHandle)}toggleActive(e){this.toggleHandles(e),this.start.toggleActive(e),this.end.toggleActive(e)}dragHandle(e,t,i){const{activeHandle:o}=this;if(!o||null==e.start||null==e.end)return;this[o].toggleDragging(!0);const a=i(this[o].drag(t).point);a&&(e[o].x=a.x,e[o].y=a.y)}stopDragging(){this.start.toggleDragging(!1),this.end.toggleDragging(!1)}getCursor(){return null==this.activeHandle?"pointer":"default"}containsPoint(e,t){var i,o;const{start:a,end:n,seriesRect:s,line:r}=this;return this.activeHandle=void 0,a.containsPoint(e,t)?(this.activeHandle="start",!0):n.containsPoint(e,t)?(this.activeHandle="end",!0):(e-=null!=(i=null==s?void 0:s.x)?i:0,t-=null!=(o=null==s?void 0:s.y)?o:0,r.isPointInPath(e,t))}},{BOOLEAN:Ei,OBJECT_ARRAY:_i,InteractionState:Ri,PropertiesArray:Ci,Validate:wi}=o._ModuleSupport,Pi=class extends o._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.initial=new Ci(xi),this.container=new o._Scene.Group({name:"static-annotations"}),this.annotations=new o._Scene.Selection(this.container,this.createAnnotation.bind(this)),this.hoverAddingFns={line:{end:(e,t,i)=>{e.set({end:i}),t.toggleHandles({end:!1})}},"parallel-channel":{end:(e,t,i)=>{e.set({top:{end:i},bottom:{end:i}}),t.toggleHandles(!1)},height:(e,t,i,o)=>{const a=this.convertPoint(e.bottom.start),n=this.convertPoint(e.bottom.end);if(!a||!n)return;const s=o.y-n.y,r=this.invertY(a.y+s),l=i.y;this.validateDatumPoint({x:a.x,y:r})&&this.validateDatumPoint({x:n.x,y:l})&&(t.toggleHandles({topMiddle:!1,bottomMiddle:!1}),e.set({bottom:{start:{y:r},end:{y:l}}}))}}},this.clickAddingFns={line:{start:(e,t)=>{var i;const o=this.createDatum("line",t);null==(i=this.annotationData)||i.push(o),this.addingStep="end"},end:(e,t)=>{var i,o;null==(o=null==(i=this.annotationData)?void 0:i.at(-1))||o.set({end:t}),null==e||e.toggleHandles(!0),this.addingStep=void 0,this.ctx.cursorManager.updateCursor("annotations"),this.ctx.interactionManager.popState(Ri.Annotations)}},"parallel-channel":{start:(e,t)=>{var i;const o=this.createDatum("parallel-channel",t);null==(i=this.annotationData)||i.push(o),this.addingStep="end"},end:(e,t)=>{var i,o;null==(o=null==(i=this.annotationData)?void 0:i.at(-1))||o.set({top:{end:t},bottom:{end:t}}),null==e||e.toggleHandles({topMiddle:!1,bottomMiddle:!1}),this.addingStep="height"},height:(e,t,i)=>{var o;const a=null==(o=this.annotationData)?void 0:o.at(-1),n=this.convertPoint(a.bottom.start),s=this.convertPoint(a.bottom.end);if(!n||!s)return;const r=i.y-s.y,l=this.invertY(n.y+r),h=t.y;a&&this.validateDatumPoint({x:n.x,y:l})&&this.validateDatumPoint({x:s.x,y:h})&&a.set({bottom:{start:{y:l},end:{y:h}}}),null==e||e.toggleHandles(!0),this.addingStep=void 0,this.ctx.cursorManager.updateCursor("annotations"),this.ctx.interactionManager.popState(Ri.Annotations)}}};const{All:t,Default:i,Annotations:a,ZoomDrag:n}=Ri,s=e.regionManager.getRegion("series");this.destroyFns.push(e.annotationManager.attachNode(this.container),s.addListener("hover",this.onHover.bind(this),t),s.addListener("click",this.onClick.bind(this),t),s.addListener("drag",this.onDrag.bind(this),i|n|a),s.addListener("drag-end",this.onDragEnd.bind(this),t),e.toolbarManager.addListener("button-pressed",(e=>this.onToolbarButtonPress(e))),e.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)))}onToolbarButtonPress(e){null!=this.active&&(this.annotations.nodes()[this.active].toggleActive(!1),this.active=void 0),"annotations"===e.group&&Object.values(Di).includes(e.value)&&(this.ctx.interactionManager.pushState(Ri.Annotations),this.addingStep="start",this.addingType=e.value)}createAnnotation(e){return"parallel-channel"===e.type?new Oi:new Li}createDatum(e,t){const i=new xi;switch(i.set(o._ModuleSupport.mergeDefaults({type:e},this.ctx.annotationManager.getAnnotationTypeStyles(e))),e){case"line":i.set({start:t,end:t});break;case"parallel-channel":i.set({top:{start:t,end:t},bottom:{start:t,end:t}})}return i}onLayoutComplete(e){var t;const{annotationData:i,annotations:a}=this;this.seriesRect=e.series.rect;for(const n of null!=(t=e.axes)?t:[])n.direction===o._ModuleSupport.ChartAxisDirection.X?(null!=this.scaleX||(this.scaleX=n.scale),null!=this.domainX||(this.domainX=n.domain)):(null!=this.scaleY||(this.scaleY=n.scale),null!=this.domainY||(this.domainY=n.domain));a.update(null!=i?i:[]).each(((t,i)=>{if(this.validateDatum(i))switch(i.type){case"line":t.update(i,e.series.rect,this.convertLine(i));break;case"parallel-channel":t.update(i,e.series.rect,this.convertLine(i.top),this.convertLine(i.bottom))}}))}validateDatum(e){let t=!0;switch(e.type){case"line":t=this.validateDatumLine(e,"Annotation [".concat(e.type,"]"));break;case"parallel-channel":t=this.validateDatumLine(e.top,"Annotation [".concat(e.type,"] [top]")),t&&(t=this.validateDatumLine(e.bottom,"Annotation [".concat(e.type,"] [bottom]")))}return t}validateDatumLine(e,t){let i=!0;return null==e.start||null==e.end?(o._Util.Logger.warnOnce("".concat(t," requires both a [start] and [end] property, ignoring.")),i=!1):(i&&(i=this.validateDatumPoint(e.start,"".concat(t," [start]"))),i&&(i=this.validateDatumPoint(e.end,"".concat(t," [end]")))),i}validateDatumPoint(e,t){const{domainX:i,domainY:a,scaleX:n,scaleY:s}=this;if(null==e.x||null==e.y)return t&&o._Util.Logger.warnOnce("".concat(t," requires both an [x] and [y] property, ignoring.")),!1;if(!i||!a||!n||!s)return!0;const r=this.validateDatumPointDirection(i,n,e.x),l=this.validateDatumPointDirection(a,s,e.y);if(!r||!l){let i="x & y domains";return r&&(i="y domain"),l&&(i="x domain"),t&&o._Util.Logger.warnOnce("".concat(t," is outside the ").concat(i,", ignoring. - x: [").concat(e.x,"], y: ").concat(e.y,"]")),!1}return!0}validateDatumPointDirection(e,t,i){return!o._Scene.ContinuousScale.is(t)||i>=e[0]&&i<=e[1]}onHover(e){const{addingStep:t}=this;null==t?this.onHoverSelecting(e):this.onHoverEditing(e)}onHoverSelecting(e){const{active:t,annotations:i,ctx:{cursorManager:o}}=this;this.hovered=void 0,i.each(((i,o,a)=>{if(i.locked)return;const n=i.containsPoint(e.offsetX,e.offsetY);n&&(null!=this.hovered||(this.hovered=a)),i.toggleHandles(n||t===a)})),o.updateCursor("annotations",null==this.hovered?void 0:i.nodes()[this.hovered].getCursor())}onHoverEditing(e){var t,i,o,a,n;const{annotationData:s,annotations:r,addingStep:l,addingType:h,ctx:{cursorManager:d,updateService:c}}=this;if(!s||!h||!l)return;const u={x:e.offsetX-(null!=(i=null==(t=this.seriesRect)?void 0:t.x)?i:0),y:e.offsetY-(null!=(a=null==(o=this.seriesRect)?void 0:o.y)?a:0)},p=this.invertPoint(u),y=this.validateDatumPoint(p);if(d.updateCursor("annotations",y?void 0:"not-allowed"),!y||"start"===l)return;const g=s.at(-1);this.active=s.length-1;const m=r.nodes()[this.active];if(!g||!m)return;m.toggleActive(!0);const x=null==(n=this.hoverAddingFns[h])?void 0:n[l];x&&x(g,m,p,u),c.update()}onClick(e){null==this.addingStep?this.onClickSelecting():this.onClickAdding(e)}onClickSelecting(){null!=this.active&&this.annotations.nodes()[this.active].toggleActive(!1),this.active=this.hovered,null!=this.active&&this.annotations.nodes()[this.active].toggleActive(!0)}onClickAdding(e){var t,i,a,n,s;const{active:r,annotationData:l,annotations:h,addingStep:d,addingType:c,ctx:{updateService:u}}=this;if(!l||!d||!c)return;const p={x:e.offsetX-(null!=(i=null==(t=this.seriesRect)?void 0:t.x)?i:0),y:e.offsetY-(null!=(n=null==(a=this.seriesRect)?void 0:a.y)?n:0)},y=this.invertPoint(p),g=r?h.nodes()[r]:void 0;if(!this.validateDatumPoint(y))return;const m=null==(s=this.clickAddingFns[c])?void 0:s[d];m&&m(g,y,p),u.update(o._ModuleSupport.ChartUpdateType.PERFORM_LAYOUT,{skipAnimations:!0})}onDrag(e){var t,i;const{active:a,annotationData:n,annotations:s,addingStep:r,seriesRect:l,ctx:{cursorManager:h,interactionManager:d,updateService:c}}=this;if(null==a||null==n||null!=r)return;d.pushState(Ri.Annotations);const{offsetX:u,offsetY:p}=e,y=n[a],g=s.nodes()[a],m={x:u-(null!=(t=null==l?void 0:l.x)?t:0),y:p-(null!=(i=null==l?void 0:l.y)?i:0)};h.updateCursor("annotations"),g.dragHandle(y,m,this.onDragNodeHandle.bind(this)),c.update(o._ModuleSupport.ChartUpdateType.PERFORM_LAYOUT,{skipAnimations:!0})}onDragNodeHandle(e){const t=this.invertPoint(e);if(this.validateDatumPoint(t))return t;this.ctx.cursorManager.updateCursor("annotations","not-allowed")}onDragEnd(e){const{active:t,annotations:i,addingStep:a,ctx:{cursorManager:n,interactionManager:s,updateService:r}}=this;null==a&&(s.popState(Ri.Annotations),n.updateCursor("annotations"),null!=t&&(i.nodes()[t].stopDragging(),r.update(o._ModuleSupport.ChartUpdateType.PERFORM_LAYOUT,{skipAnimations:!0})))}convertLine(e){if(null==e.start||null==e.end)return;const t=this.convertPoint(e.start),i=this.convertPoint(e.end);return null!=t&&null!=i?{x1:t.x,y1:t.y,x2:i.x,y2:i.y}:void 0}convertPoint(e){const{scaleX:t,scaleY:i}=this;let o=0,a=0;return t&&i&&null!=e.x&&null!=e.y?(o=t.convert(e.x),a=i.convert(e.y),{x:o,y:a}):{x:o,y:a}}invertPoint(e){return{x:this.invertX(e.x),y:this.invertY(e.y)}}invertX(e){const{scaleX:t}=this;return o._Scene.ContinuousScale.is(t)?e=t.invert(e):o._Scene.BandScale.is(t)&&(e=t.invertNearest(e)),e}invertY(e){const{scaleY:t}=this;return o._Scene.ContinuousScale.is(t)?e=t.invert(e):o._Scene.BandScale.is(t)&&(e=t.invertNearest(e)),e}};f([o._ModuleSupport.ObserveChanges(((e,t)=>{e.ctx.toolbarManager.toggleGroup("annotations",Boolean(t))})),wi(Ei)],Pi.prototype,"enabled",2),f([o._ModuleSupport.ObserveChanges(((e,t)=>{null!=e.annotationData||(e.annotationData=t)})),wi(_i,{optional:!0})],Pi.prototype,"initial",2);var zi={type:"root",optionsKey:"annotations",packageType:"enterprise",chartTypes:["cartesian"],dependencies:["toolbar"],instanceConstructor:Pi,themeTemplate:{annotations:{line:{stroke:o._Theme.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,handle:{fill:o._Theme.DEFAULT_ANNOTATION_HANDLE_FILL}},"parallel-channel":{stroke:o._Theme.DEFAULT_ANNOTATION_STROKE,strokeWidth:2,strokeOpacity:1,middle:{lineDash:[6,5],strokeWidth:1},background:{fill:o._Theme.DEFAULT_ANNOTATION_BACKGROUND_FILL,fillOpacity:.2},handle:{fill:o._Theme.DEFAULT_ANNOTATION_HANDLE_FILL}}}}},{Image:Ki}=o._Scene,{BaseProperties:Vi,ObserveChanges:Bi,ProxyProperty:Fi,Validate:Ui,NUMBER:ji,POSITIVE_NUMBER:Wi,RATIO:Yi,createElement:Gi,calculatePlacement:Hi}=o._ModuleSupport,Xi=class extends Vi{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var e;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),null==(e=this.onLoad)||e.call(this))},this.imageElement=Gi("img"),this.imageElement.onload=this.onImageLoad,this.node=new Ki(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(e,t){this.containerWidth=e,this.containerHeight=t,this.node.setProperties(this.complete?g({visible:!0,opacity:this.opacity},Hi(this.imageElement.width,this.imageElement.height,this.containerWidth,this.containerHeight,this)):{visible:!1})}};f([Ui(ji,{optional:!0})],Xi.prototype,"top",2),f([Ui(ji,{optional:!0})],Xi.prototype,"right",2),f([Ui(ji,{optional:!0})],Xi.prototype,"bottom",2),f([Ui(ji,{optional:!0})],Xi.prototype,"left",2),f([Ui(Wi,{optional:!0})],Xi.prototype,"width",2),f([Ui(Wi,{optional:!0})],Xi.prototype,"height",2),f([Ui(Yi)],Xi.prototype,"opacity",2),f([Fi("imageElement.src"),Bi((e=>e.loadedSynchronously=e.complete))],Xi.prototype,"url",2);var{ActionOnSet:Qi,OBJECT:Zi,Validate:qi}=o._ModuleSupport,Ji=class extends o._ModuleSupport.Background{constructor(e){super(e),this.ctx=e,this.image=new Xi}onLayoutComplete(e){if(super.onLayoutComplete(e),this.image){const{width:t,height:i}=e.chart;this.image.performLayout(t,i)}}onImageLoad(){this.ctx.updateService.update(o._ModuleSupport.ChartUpdateType.SCENE_RENDER)}};f([qi(Zi,{optional:!0}),Qi({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){this.node.removeChild(e.node),e.onLoad=void 0}})],Ji.prototype,"image",2);var $i={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:Ji},eo="ag-chart-context-menu",to="ag-charts-dark-context-menu",io="\n.".concat(eo," {\n    background: rgb(248, 248, 248);\n    border: 1px solid #babfc7;\n    border-radius: 5px;\n    box-shadow: 0 1px 4px 1px rgba(186, 191, 199, 0.4);\n    color: rgb(24, 29, 31);\n    font: 13px Verdana, sans-serif;\n    position: fixed;\n    transition: transform 0.1s ease;\n    white-space: nowrap;\n    z-index: 99999;\n}\n\n.").concat(eo,".").concat(to," {\n    color: white;\n    background: #15181c;\n}\n\n.").concat(eo,"__cover {\n    position: fixed;\n    left: 0px;\n    top: 0px;\n}\n\n.").concat(eo,"__menu {\n    display: flex;\n    flex-direction: column;\n    padding: 0.5em 0;\n}\n\n.").concat(eo,"__item {\n    background: none;\n    border: none;\n    box-sizing: border-box;\n    font: inherit;\n    padding: 0.5em 1em;\n    text-align: left;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n}\n\n.").concat(eo,"__item.").concat(to," {\n    color: white;\n}\n\n.").concat(eo,"__item:hover {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.").concat(eo,"__item:hover.").concat(to," {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.").concat(eo,"__item:active {\n    background: rgb(33, 150, 243, 0.2);\n}\n\n.").concat(eo,"__item:active.").concat(to," {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.").concat(eo,"__item[disabled] {\n    border: none;\n    opacity: 0.5;\n    text-align: left;\n}\n\n.").concat(eo,"__item[disabled]:hover {\n    background: inherit;\n    cursor: inherit;\n}\n\n.").concat(eo,"__divider {\n    margin: 5px 0;\n    background: #babfc7;\n    height: 1px;\n}\n\n.").concat(eo,"__divider.").concat(to," {\n    background: rgb(33, 150, 243, 0.1);\n}\n"),{BOOLEAN:oo,Validate:ao,createElement:no,getDocument:so,getWindow:ro,injectStyle:lo}=o._ModuleSupport,ho=class extends o._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.x=0,this.y=0,this.highlightManager=e.highlightManager,this.interactionManager=e.interactionManager,this.registry=e.contextMenuRegistry,this.scene=e.scene;const{Default:t,ContextMenu:i,All:a}=o._ModuleSupport.InteractionState,n=t|i;if(this.destroyFns.push(e.interactionManager.addListener("contextmenu",(e=>this.onContextMenu(e)),n),e.interactionManager.addListener("click",(()=>this.onClick()),a)),this.groups={default:[],node:[],extra:[],extraNode:[]},this.canvasElement=e.scene.canvas.element,this.container=so("body"),this.element=this.container.appendChild(no("div")),this.element.classList.add(eo),this.element.addEventListener("contextmenu",(e=>e.preventDefault())),this.destroyFns.push((()=>{var e;return null==(e=this.element.parentNode)?void 0:e.removeChild(this.element)})),this.hide(),"undefined"!==typeof IntersectionObserver){const e=new IntersectionObserver((e=>{for(const t of e)t.target===this.canvasElement&&0===t.intersectionRatio&&this.hide()}),{root:this.container});e.observe(this.canvasElement),this.intersectionObserver=e}if("undefined"!==typeof MutationObserver){const e=new MutationObserver((()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()}));e.observe(this.element,{childList:!0}),this.mutationObserver=e}lo(io,"contextMenu"),this.registry.registerDefaultAction({id:"download",label:"Download",action:()=>{const t=e.chartService.title;let i="image";(null==t?void 0:t.enabled)&&void 0!==(null==t?void 0:t.text)&&(i=t.text),this.scene.download(i)}})}isShown(){return void 0!==this.menuElement}onClick(){this.isShown()&&this.hide()}onContextMenu(e){if(!this.enabled)return;this.showEvent=e.sourceEvent,this.x=e.pageX,this.y=e.pageY,this.groups.default=this.registry.copyDefaultActions(),this.pickedNode=this.highlightManager.getActivePicked(),this.extraActions.length>0&&(this.groups.extra=[...this.extraActions]),this.extraNodeActions.length>0&&this.pickedNode&&(this.groups.extraNode=[...this.extraNodeActions]);const{default:t,node:i,extra:o,extraNode:a}=this.groups;0!==t.length+i.length+o.length+a.length&&(e.consume(),e.sourceEvent.preventDefault(),this.show())}show(){this.interactionManager.pushState(o._ModuleSupport.InteractionState.ContextMenu),this.element.classList.toggle(to,this.darkTheme);const e=this.renderMenu();this.menuElement?this.element.replaceChild(e,this.menuElement):this.element.appendChild(e),this.menuElement=e,this.element.style.display="block"}hide(){this.interactionManager.popState(o._ModuleSupport.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0),this.element.style.display="none"}renderMenu(){const e=no("div");return e.classList.add("".concat(eo,"__menu")),e.classList.toggle(to,this.darkTheme),this.appendMenuGroup(e,this.groups.default,!1),this.pickedNode&&this.appendMenuGroup(e,this.groups.node),this.appendMenuGroup(e,this.groups.extra),this.pickedNode&&this.appendMenuGroup(e,this.groups.extraNode),e}appendMenuGroup(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];0!==t.length&&(i&&e.appendChild(this.createDividerElement()),t.forEach((t=>{const i=this.renderItem(t);i&&e.appendChild(i)})))}renderItem(e){if(e&&"object"===typeof e&&e.constructor===Object)return this.createActionElement(e)}createDividerElement(){const e=no("div");return e.classList.add("".concat(eo,"__divider")),e.classList.toggle(to,this.darkTheme),e}createActionElement(e){let{id:t,label:i,action:o}=e;return t&&this.registry.isDisabled(t)?this.createDisabledElement(i):this.createButtonElement(i,o)}createButtonElement(e,t){const i=no("button");return i.classList.add("".concat(eo,"__item")),i.classList.toggle(to,this.darkTheme),i.innerHTML=e,i.onclick=()=>{var e;const i=null==(e=this.pickedNode)?void 0:e.series.createNodeContextMenuActionEvent(this.showEvent,this.pickedNode);i?(Object.defineProperty(i,"itemId",{enumerable:!1,get:()=>{var e;return o._Util.Logger.warnOnce("Property [AgNodeContextMenuActionEvent.itemId] is deprecated. Use [yKey], [angleKey] and others instead."),null==(e=this.pickedNode)?void 0:e.itemId}}),t(i)):t({event:this.showEvent}),this.hide()},i}createDisabledElement(e){const t=no("button");return t.classList.add("".concat(eo,"__item")),t.classList.toggle(to,this.darkTheme),t.disabled=!0,t.innerHTML=e,t}reposition(){const{x:e,y:t}=this;this.element.style.top="unset",this.element.style.bottom="unset",this.element.style.left="unset",this.element.style.right="unset",e+this.element.offsetWidth>ro("innerWidth")?this.element.style.right="calc(100% - ".concat(e-1,"px)"):this.element.style.left="".concat(e+1,"px"),t+this.element.offsetHeight>ro("innerHeight")?this.element.style.bottom="calc(100% - ".concat(t,"px - 0.5em)"):this.element.style.top="calc(".concat(t,"px - 0.5em)")}destroy(){var e,t;super.destroy(),null==(e=this.intersectionObserver)||e.unobserve(this.canvasElement),null==(t=this.mutationObserver)||t.disconnect()}};f([ao(oo)],ho.prototype,"enabled",2),f([ao(oo)],ho.prototype,"darkTheme",2);var co={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],optionsKey:"contextMenu",instanceConstructor:ho,themeTemplate:{contextMenu:{enabled:!0,darkTheme:o._Theme.IS_DARK_THEME}}},{ActionOnSet:uo,BaseProperties:po,BOOLEAN:yo,FUNCTION:go,NUMBER:mo,STRING:xo,Validate:fo,createElement:vo,injectStyle:So}=o._ModuleSupport,{setAttribute:Mo}=o._Util,{BBox:Do}=o._Scene,bo="ag-crosshair-label",No="\n.".concat(bo," {\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    user-select: none;\n    pointer-events: none;\n    font: 12px Verdana, sans-serif;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    box-sizing: border-box;\n}\n\n.").concat(bo,"-content {\n    padding: 0 7px;\n    border-radius: 2px;\n    line-height: 1.7em;\n    background-color: rgb(71,71,71);\n    color: rgb(255, 255, 255);\n}\n\n.").concat(bo,"-hidden {\n    top: -10000px !important;\n}\n"),Io=class extends o._Scene.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};f([fo(yo)],Io.prototype,"enabled",2),f([fo(xo,{optional:!0})],Io.prototype,"className",2),f([fo(mo)],Io.prototype,"xOffset",2),f([fo(mo)],Io.prototype,"yOffset",2),f([fo(xo,{optional:!0})],Io.prototype,"format",2),f([fo(go,{optional:!0})],Io.prototype,"renderer",2);var ko=class extends po{constructor(e){super(),this.labelRoot=e,this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=vo("div"),this.element.classList.add(bo),Mo(this.element,"aria-hidden",!0),e.appendChild(this.element),So(No,"crosshairLabel")}show(e){const{element:t}=this;let i=e.x+this.xOffset,o=e.y+this.yOffset;const a=(e,t,i)=>Math.max(Math.min(t,i),e),n=this.getContainerBoundingBox(),s=n.x+n.width-t.clientWidth-1,r=n.y+n.height-t.clientHeight;i=a(n.x+1,i,s),o=a(n.y,o,r),t.style.top="".concat(Math.round(o),"px"),t.style.left="".concat(Math.round(i),"px"),this.toggle(!0)}setLabelHtml(e){void 0!==e&&(this.element.innerHTML=e)}computeBBox(){const{element:e}=this;return new o._Scene.BBox(e.clientLeft,e.clientTop,e.clientWidth,e.clientHeight)}getContainerBoundingBox(){const{width:e,height:t}=this.labelRoot.getBoundingClientRect();return new Do(0,0,e,t)}toggle(e){this.element.classList.toggle("".concat(bo,"-hidden"),!e)}destroy(){const{parentNode:e}=this.element;e&&e.removeChild(this.element)}toLabelHtml(e,t){var i,o;if("string"===typeof e)return e;t=null!=t?t:{};const{text:a=(null!=(i=t.text)?i:""),color:n=t.color,backgroundColor:s=t.backgroundColor,opacity:r=(null!=(o=t.opacity)?o:1)}=e,l="opacity: ".concat(r,"; background-color: ").concat(null==s?void 0:s.toLowerCase(),"; color: ").concat(n);return'<div class="'.concat(bo,'-content" style="').concat(l,'">\n                    <span>').concat(a,"</span>\n                </div>")}};f([fo(yo)],ko.prototype,"enabled",2),f([fo(xo,{optional:!0}),uo({changeValue(e,t){e!==t&&(t&&this.element.classList.remove(t),e&&this.element.classList.add(e))}})],ko.prototype,"className",2),f([fo(mo)],ko.prototype,"xOffset",2),f([fo(mo)],ko.prototype,"yOffset",2),f([fo(xo,{optional:!0})],ko.prototype,"format",2),f([fo(go,{optional:!0})],ko.prototype,"renderer",2);var{Group:To,Line:Ao,BBox:Oo}=o._Scene,{createId:Lo}=o._Util,{POSITIVE_NUMBER:Eo,RATIO:_o,BOOLEAN:Ro,COLOR_STRING:Co,LINE_DASH:wo,OBJECT:Po,Validate:zo,Layers:Ko,getDocument:Vo}=o._ModuleSupport,Bo=class extends o._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.id=Lo(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new Io,this.seriesRect=new Oo(0,0,0,0),this.hoverRect=new Oo(0,0,0,0),this.bounds=new Oo(0,0,0,0),this.visible=!1,this.crosshairGroup=new To({layer:!0,zIndex:Ko.SERIES_CROSSHAIR_ZINDEX}),this.lineGroup=this.crosshairGroup.appendChild(new To({name:"".concat(this.id,"-crosshair-lines"),zIndex:Ko.SERIES_CROSSHAIR_ZINDEX})),this.lineGroupSelection=o._Scene.Selection.select(this.lineGroup,Ao,!1),this.activeHighlight=void 0,this.axisCtx=e.parent,this.crosshairGroup.visible=!1,this.labels={};const t=e.regionManager.getRegion("series");this.destroyFns.push(e.scene.attachNode(this.crosshairGroup),t.addListener("hover",(e=>this.onMouseMove(e))),t.addListener("leave",(()=>this.onMouseOut())),e.highlightManager.addListener("highlight-change",(e=>this.onHighlightChange(e))),e.layoutService.addListener("layout-complete",(e=>this.layout(e))),(()=>Object.entries(this.labels).forEach((e=>{let[t,i]=e;return i.destroy()}))))}layout(e){let{series:{rect:t,paddedRect:i,visible:o},axes:a}=e;if(this.hideCrosshairs(),!(o&&a&&this.enabled))return void(this.visible=!1);this.visible=!0,this.seriesRect=t,this.hoverRect=i;const{position:n="left",axisId:s}=this.axisCtx,r=a.find((e=>e.id===s));if(!r)return;this.axisLayout=r;const l=r.gridPadding+r.seriesAreaPadding;this.bounds=this.buildBounds(t,n,l);const{crosshairGroup:h,bounds:d}=this;h.translationX=Math.round(d.x),h.translationY=Math.round(d.y);const c=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(c),this.updateLines(),this.updateLabels(c)}buildBounds(e,t,i){const o=e.clone();return o.x+="left"===t?-i:0,o.y+="top"===t?-i:0,o.width+="left"===t||"right"===t?i:0,o.height+="top"===t||"bottom"===t?i:0,o}updateSelections(e){this.lineGroupSelection.update(e,(e=>e.append(new Ao)),(e=>e))}updateLabels(e){var t;const{labels:i,ctx:o,axisLayout:a}=this;e.forEach((e=>{var t;null!=i[e]||(i[e]=new ko(null!=(t=o.scene.canvas.container)?t:Vo("body"))),this.updateLabel(i[e])}));const n=null!=(t=this.label.format)?t:null==a?void 0:a.label.format;this.labelFormatter=n?this.axisCtx.scaleValueFormatter(n):void 0}updateLabel(e){const{enabled:t,className:i,xOffset:o,yOffset:a,format:n,renderer:s}=this.label;e.enabled=t,e.className=i,e.xOffset=o,e.yOffset=a,e.format=n,e.renderer=s}updateLines(){const{lineGroupSelection:e,bounds:t,stroke:i,strokeWidth:o,strokeOpacity:a,lineDash:n,lineDashOffset:s,axisLayout:r}=this;if(!r)return;const l=this.isVertical();e.each((e=>{e.stroke=i,e.strokeWidth=o,e.strokeOpacity=a,e.lineDash=n,e.lineDashOffset=s,e.y1=0,e.y2=l?t.height:0,e.x1=0,e.x2=l?0:t.width}))}isVertical(){return"x"===this.axisCtx.direction}formatValue(e){var t;const{labelFormatter:i,axisLayout:o,ctx:{callbackCache:a}}=this;if(i){const t=a.call(i,e);if(void 0!==t)return t}const n=e%1===0,s=(null!=(t=null==o?void 0:o.label.fractionDigits)?t:0)+(n?0:1);return"number"===typeof e?e.toFixed(s):String(e)}onMouseMove(e){if(!this.enabled||this.snap)return;const{crosshairGroup:t,hoverRect:i}=this,{offsetX:o,offsetY:a}=e;if(this.visible&&i.containsPoint(o,a)){t.visible=!0;const i=this.getData(e);this.updatePositions(i)}else this.hideCrosshairs()}onMouseOut(){this.hideCrosshairs()}onHighlightChange(e){var t,i,o;if(!this.enabled)return;const{crosshairGroup:a,axisCtx:n}=this,{datum:s,series:r}=null!=(t=e.currentHighlight)?t:{},l=s&&((null==(i=null==r?void 0:r.axes.x)?void 0:i.id)===n.axisId||(null==(o=null==r?void 0:r.axes.y)?void 0:o.id)===n.axisId);if(this.activeHighlight=l?e.currentHighlight:void 0,this.snap){if(!this.visible||!this.activeHighlight)return void this.hideCrosshairs();const e=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(e),a.visible=!0}}updatePositions(e){const{seriesRect:t,lineGroupSelection:i}=this;i.each(((i,o)=>{const a=e[o];if(!a)return void(i.visible=!1);i.visible=!0;const{value:n,position:s}=a;let r=0,l=0;this.isVertical()?(r=s,i.translationX=Math.round(r)):(l=s,i.translationY=Math.round(l)),this.label.enabled?this.showLabel(r+t.x,l+t.y,n,o):this.hideLabel(o)}))}getData(e){var t,i;const{seriesRect:o,axisCtx:a}=this,n="pointer",{datum:s,xKey:r="",yKey:l=""}=null!=(t=this.activeHighlight)?t:{},{offsetX:h,offsetY:d}=e,c=h-o.x,u=d-o.y,p=this.isVertical();return{[n]:{position:p?c:u,value:a.continuous?a.scaleInvert(p?c:u):null!=(i=null==s?void 0:s[p?r:l])?i:""}}}getActiveHighlightData(e){var t,i;const{axisCtx:o}=this,{datum:a,series:n,xKey:s="",aggregatedValue:r,cumulativeValue:l,midPoint:h}=e,d=n.getKeyProperties(o.direction),c=o.scaleBandwidth()/2,u=(null==(t=n.axes[o.direction])?void 0:t.id)===o.axisId,p=d.indexOf("yKey")>-1&&u,y=d.indexOf("xKey")>-1&&u;if(p&&void 0!==r)return{yKey:{value:r,position:o.scaleConvert(r)+c}};if(p&&void 0!==l)return{yKey:{value:l,position:o.scaleConvert(l)+c}};if(y){const e=null!=(i=this.isVertical()?null==h?void 0:h.x:null==h?void 0:h.y)?i:0;return{xKey:{value:o.continuous?o.scaleInvert(e):a[s],position:e}}}const g={};return d.forEach((e=>{const t=n.properties[e],i=a[t],s=o.scaleConvert(i)+c;g[e]={value:i,position:s}})),g}getLabelHtml(e,t){const{label:{renderer:i},axisLayout:{label:{fractionDigits:o=0}={}}={}}=this,a={text:this.formatValue(e)};if(i){const n={value:e,fractionDigits:o};return t.toLabelHtml(i(n),a)}return t.toLabelHtml(a)}showLabel(e,t,i,o){const{axisCtx:a,bounds:n,axisLayout:s}=this;if(!s)return;const{label:{padding:r},tickSize:l}=s,h=r+l,d=this.labels[o],c=this.getLabelHtml(i,d);d.setLabelHtml(c);const u=d.computeBBox();let p;if(this.isVertical()){const t=-u.width/2,i="bottom"===a.position?0:-u.height;p={x:e+t,y:("bottom"===a.position?n.y+n.height+h:n.y-h)+i}}else{const e=-u.height/2,i="right"===a.position?0:-u.width;p={x:("right"===a.position?n.x+n.width+h:n.x-h)+i,y:t+e}}d.show(p)}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const e in this.labels)this.hideLabel(e)}hideLabel(e){this.labels[e].toggle(!1)}};f([zo(Ro)],Bo.prototype,"enabled",2),f([zo(Co,{optional:!0})],Bo.prototype,"stroke",2),f([zo(wo,{optional:!0})],Bo.prototype,"lineDash",2),f([zo(Eo)],Bo.prototype,"lineDashOffset",2),f([zo(Eo)],Bo.prototype,"strokeWidth",2),f([zo(_o)],Bo.prototype,"strokeOpacity",2),f([zo(Ro)],Bo.prototype,"snap",2),f([zo(Po)],Bo.prototype,"label",2);var Fo={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],instanceConstructor:Bo,themeTemplate:{crosshair:{enabled:!0,snap:!0,stroke:o._Theme.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}},category:{crosshair:{enabled:!1,snap:!0,stroke:o._Theme.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}}},{BOOLEAN:Uo,FUNCTION:jo,ActionOnSet:Wo,Validate:Yo}=o._ModuleSupport,Go=class extends o._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=e.dataService}updateCallback(e,t){this.dataService&&(e&&null!=t?this.dataService.updateCallback(t):this.dataService.clearCallback())}};f([Wo({newValue(e){this.updateCallback(e,this.getData)}}),Yo(Uo)],Go.prototype,"enabled",2),f([Wo({newValue(e){this.updateCallback(this.enabled,e)}}),Yo(jo)],Go.prototype,"getData",2),f([Wo({newValue(e){this.dataService.requestThrottle=e}})],Go.prototype,"requestThrottle",2),f([Wo({newValue(e){this.dataService.dispatchThrottle=e}})],Go.prototype,"updateThrottle",2),f([Wo({newValue(e){this.dataService.dispatchOnlyLatest=!e}})],Go.prototype,"updateDuringInteraction",2);var Ho={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology"],instanceConstructor:Go,themeTemplate:{dataSource:{enabled:!1}}},{partialAssign:Xo,mergeDefaults:Qo}=o._ModuleSupport,{BBox:Zo}=o._Scene,qo=class{constructor(e){this.components=e,this.union=Zo.merge(e)}containsPoint(e,t){if(!this.union.containsPoint(e,t))return!1;for(const i of this.components)if(i.containsPoint(e,t))return!0;return!1}},Jo=class extends o._Scene.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new o._Scene.Path,this.capsPath=new o._Scene.Path,this.bboxes=new qo([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(e){this._datum=e}calculateCapLength(e,t){const{lengthRatio:i=1,length:o}=e,{lengthRatioMultiplier:a,lengthMax:n}=t,s=null!=o?o:i*a;return Math.min(s,n)}getFormatterParams(e,t){const{datum:i}=this;if(void 0===i||void 0===e.formatter&&void 0===e.cap.formatter)return;const{xLowerKey:o,xLowerName:a,xUpperKey:n,xUpperName:s,yLowerKey:r,yLowerName:l,yUpperKey:h,yUpperName:d}=e;return{datum:i.datum,seriesId:i.datum.seriesId,xKey:i.xKey,yKey:i.yKey,xLowerKey:o,xLowerName:a,xUpperKey:n,xUpperName:s,yLowerKey:r,yLowerName:l,yUpperKey:h,yUpperName:d,highlighted:t}}formatStyles(e,t,i){let o=e,{cap:a}=o,n=x(o,["cap"]);const s=this.getFormatterParams(t,i);if(void 0!==s){if(void 0!==t.formatter){const e=t.formatter(s);n=Qo(e,n),a=Qo(e,a),a=Qo(null==e?void 0:e.cap,a)}if(void 0!==t.cap.formatter){const e=t.cap.formatter(s);a=Qo(e,a)}}return{whiskerStyle:n,capsStyle:a}}applyStyling(e,t){Xo(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],e,t)}update(e,t,i){if(void 0===this.datum)return;const{whiskerStyle:o,capsStyle:a}=this.formatStyles(e,t,i),{xBar:n,yBar:s,capDefaults:r}=this.datum,l=this.whiskerPath;this.applyStyling(l,o),l.path.clear(),void 0!==s&&(l.path.moveTo(s.lowerPoint.x,s.lowerPoint.y),l.path.lineTo(s.upperPoint.x,s.upperPoint.y)),void 0!==n&&(l.path.moveTo(n.lowerPoint.x,n.lowerPoint.y),l.path.lineTo(n.upperPoint.x,n.upperPoint.y)),l.path.closePath(),l.markDirtyTransform(),this.capLength=this.calculateCapLength(null!=a?a:{},r);const h=this.capLength/2,d=this.capsPath;this.applyStyling(d,a),d.path.clear(),void 0!==s&&(d.path.moveTo(s.lowerPoint.x-h,s.lowerPoint.y),d.path.lineTo(s.lowerPoint.x+h,s.lowerPoint.y),d.path.moveTo(s.upperPoint.x-h,s.upperPoint.y),d.path.lineTo(s.upperPoint.x+h,s.upperPoint.y)),void 0!==n&&(d.path.moveTo(n.lowerPoint.x,n.lowerPoint.y-h),d.path.lineTo(n.lowerPoint.x,n.lowerPoint.y+h),d.path.moveTo(n.upperPoint.x,n.upperPoint.y-h),d.path.lineTo(n.upperPoint.x,n.upperPoint.y+h)),d.path.closePath(),d.markDirtyTransform()}updateBBoxes(){var e;const{capLength:t,whiskerPath:i,capsPath:o}=this,{yBar:a,xBar:n}=null!=(e=this.datum)?e:{},s=t/2,r=[];if(void 0!==a){const e=a.lowerPoint.y-a.upperPoint.y;r.push(new Zo(a.lowerPoint.x,a.upperPoint.y,i.strokeWidth,e),new Zo(a.lowerPoint.x-s,a.lowerPoint.y,t,o.strokeWidth),new Zo(a.upperPoint.x-s,a.upperPoint.y,t,o.strokeWidth))}if(void 0!==n){const e=n.upperPoint.x-n.lowerPoint.x;r.push(new Zo(n.lowerPoint.x,n.upperPoint.y,e,i.strokeWidth),new Zo(n.lowerPoint.x,n.lowerPoint.y-s,o.strokeWidth,t),new Zo(n.upperPoint.x,n.upperPoint.y-s,o.strokeWidth,t))}this.bboxes.components=r,this.bboxes.union=Zo.merge(r)}containsPoint(e,t){return this.bboxes.containsPoint(e,t)}pickNode(e,t){return this.containsPoint(e,t)?this:void 0}nearestSquared(e,t,i){const{bboxes:o}=this;if(o.union.distanceSquared(e,t)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:a}=Zo.nearestBox(e,t,o.components);return{nearest:this,distanceSquared:a}}},$o=class extends o._Scene.Group{get children(){return super.children}nearestSquared(e,t){const{nearest:i,distanceSquared:a}=o._Scene.nearestSquaredInContainer(e,t,this);if(void 0!==i&&!isNaN(a))return{datum:i.datum,distanceSquared:a}}},{BaseProperties:ea,Validate:ta,BOOLEAN:ia,COLOR_STRING:oa,FUNCTION:aa,LINE_DASH:na,NUMBER:sa,OBJECT:ra,POSITIVE_NUMBER:la,RATIO:ha,STRING:da}=o._ModuleSupport,ca=class extends ea{};f([ta(ia,{optional:!0})],ca.prototype,"visible",2),f([ta(oa,{optional:!0})],ca.prototype,"stroke",2),f([ta(la,{optional:!0})],ca.prototype,"strokeWidth",2),f([ta(ha,{optional:!0})],ca.prototype,"strokeOpacity",2),f([ta(na,{optional:!0})],ca.prototype,"lineDash",2),f([ta(la,{optional:!0})],ca.prototype,"lineDashOffset",2),f([ta(sa,{optional:!0})],ca.prototype,"length",2),f([ta(ha,{optional:!0})],ca.prototype,"lengthRatio",2),f([ta(aa,{optional:!0})],ca.prototype,"formatter",2);var ua=class extends ea{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new ca}};f([ta(da,{optional:!0})],ua.prototype,"yLowerKey",2),f([ta(da,{optional:!0})],ua.prototype,"yLowerName",2),f([ta(da,{optional:!0})],ua.prototype,"yUpperKey",2),f([ta(da,{optional:!0})],ua.prototype,"yUpperName",2),f([ta(da,{optional:!0})],ua.prototype,"xLowerKey",2),f([ta(da,{optional:!0})],ua.prototype,"xLowerName",2),f([ta(da,{optional:!0})],ua.prototype,"xUpperKey",2),f([ta(da,{optional:!0})],ua.prototype,"xUpperName",2),f([ta(ia,{optional:!0})],ua.prototype,"visible",2),f([ta(oa,{optional:!0})],ua.prototype,"stroke",2),f([ta(la,{optional:!0})],ua.prototype,"strokeWidth",2),f([ta(ha,{optional:!0})],ua.prototype,"strokeOpacity",2),f([ta(na,{optional:!0})],ua.prototype,"lineDash",2),f([ta(la,{optional:!0})],ua.prototype,"lineDashOffset",2),f([ta(aa,{optional:!0})],ua.prototype,"formatter",2),f([ta(ra)],ua.prototype,"cap",2);var{fixNumericExtent:pa,groupAccumulativeValueProperty:ya,isDefined:ga,mergeDefaults:ma,valueProperty:xa,ChartAxisDirection:fa}=o._ModuleSupport;var va=class e extends o._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.properties=new ua;const t=function(e){for(const t of o.AgErrorBarSupportedSeriesTypes)if(t===e.series.type)return e.series;throw new Error("AG Charts - unsupported series type '".concat(e.series.type,"', error bars supported series types: ").concat(o.AgErrorBarSupportedSeriesTypes.join(", ")))}(e),{annotationGroup:i,annotationSelections:a}=t;this.cartesianSeries=t,this.groupNode=new $o({name:"".concat(i.id,"-errorBars"),zIndex:o._ModuleSupport.Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}),i.appendChild(this.groupNode),this.selection=o._Scene.Selection.select(this.groupNode,(()=>this.errorBarFactory())),a.add(this.selection),this.destroyFns.push(t.addListener("data-processed",(e=>this.onDataProcessed(e))),t.addListener("data-update",(e=>this.onDataUpdate(e))),t.addListener("visibility-changed",(e=>this.onToggleSeriesItem(e))),e.highlightManager.addListener("highlight-change",(e=>this.onHighlightChange(e))),(()=>i.removeChild(this.groupNode)),(()=>a.delete(this.selection)))}hasErrorBars(){const{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:o}=this.properties;return ga(e)&&ga(t)||ga(i)&&ga(o)}isStacked(){var e;const t=null==(e=this.cartesianSeries.seriesGrouping)?void 0:e.stackCount;return null!=t&&t>0}getUnstackPropertyDefinition(e){const t=[],{xLowerKey:i,xUpperKey:o,yLowerKey:a,yUpperKey:n,xErrorsID:s,yErrorsID:r}=this.getMaybeFlippedKeys(),{xScaleType:l,yScaleType:h}=e;return null!=a&&null!=n&&t.push(xa(a,h,{id:"".concat(r,"-lower")}),xa(n,h,{id:"".concat(r,"-upper")})),null!=i&&null!=o&&t.push(xa(i,l,{id:"".concat(s,"-lower")}),xa(o,l,{id:"".concat(s,"-upper")})),t}getStackPropertyDefinition(e){var t,i;const o=[],{cartesianSeries:a}=this,{xLowerKey:n,xUpperKey:s,yLowerKey:r,yUpperKey:l,xErrorsID:h,yErrorsID:d}=this.getMaybeFlippedKeys(),{xScaleType:c,yScaleType:u}=e,p=null!=(i=null==(t=a.seriesGrouping)?void 0:t.groupIndex)?i:a.id,y=g({invalidValue:null,missingValue:0,separateNegative:!0},a.visible?{}:{forceValue:0}),m=(e,t,i,o)=>ya(e,"normal","current",g({id:"".concat(t,"-").concat(i),groupId:"errorGroup-".concat(p,"-").concat(i)},y),o),x=(e,t,i,a)=>{o.push(...m(e,i,"lower",a),...m(t,i,"upper",a))};return null!=r&&null!=l&&x(r,l,d,u),null!=n&&null!=s&&x(n,s,h,c),o}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:t,xUpperKey:i,xErrorsID:o,yLowerKey:a,yUpperKey:n,yErrorsID:s}=this.getMaybeFlippedKeys();if(e===fa.X?ga(t)&&ga(i):ga(a)&&ga(n)){const{dataModel:t,processedData:i,cartesianSeries:a}=this;if(null!=t&&null!=i){const n=a.axes[e],r={x:o,y:s}[e],l=t.getDomain(a,"".concat(r,"-lower"),"value",i),h=t.getDomain(a,"".concat(r,"-upper"),"value",i),d=[Math.min(...l,...h),Math.max(...l,...h)];return pa(d,n)}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,ga(e.dataModel)&&ga(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){var e;return null==(e=this.cartesianSeries.contextNodeData)?void 0:e.nodeData}createNodeData(){var e,t;const i=this.getNodeData(),o=null==(e=this.cartesianSeries.axes[fa.X])?void 0:e.scale,a=null==(t=this.cartesianSeries.axes[fa.Y])?void 0:t.scale;if(this.hasErrorBars()&&o&&a&&i)for(let n=0;n<i.length;n++){const{midPoint:e,xLower:t,xUpper:s,yLower:r,yUpper:l}=this.getDatum(i,n);if(null!=e){let h,d;ga(t)&&ga(s)&&(h={lowerPoint:{x:this.convert(o,t),y:e.y},upperPoint:{x:this.convert(o,s),y:e.y}}),ga(r)&&ga(l)&&(d={lowerPoint:{x:e.x,y:this.convert(a,r)},upperPoint:{x:e.x,y:this.convert(a,l)}}),i[n].xBar=h,i[n].yBar=d}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:o}=this.properties,[a,n]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,i]=[i,e],[t,o]=[o,t],[a,n]=[n,a]),{xLowerKey:e,xUpperKey:t,xErrorsID:a,yLowerKey:i,yUpperKey:o,yErrorsID:n}}static getDatumKey(e,t,i){if(null==t)return;const a=e.datum[t];if(null!=a){if("number"===typeof a)return a+i;o._Util.Logger.warnOnce("Found [".concat(t,"] error value of type ").concat(typeof a,". Expected number type"))}}getDatum(t,i){const{xLowerKey:o,xUpperKey:a,yLowerKey:n,yUpperKey:s}=this.getMaybeFlippedKeys(),r=t[i],l=null!=r.cumulativeValue&&this.isStacked()?r.cumulativeValue-r.yValue:0,[h,d]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:e.getDatumKey(r,o,h),xUpper:e.getDatumKey(r,a,h),yLower:e.getDatumKey(r,n,d),yUpper:e.getDatumKey(r,s,d)}}convert(e,t){var i;const o=(null!=(i=e.bandwidth)?i:0)/2;return e.convert(t)+o}update(){const e=this.getNodeData();null!=e&&(this.selection.update(e),this.selection.each(((e,t,i)=>this.updateNode(e,t,i))))}updateNode(e,t,i){e.datum=t,e.update(this.getDefaultStyle(),this.properties,!1),e.updateBBoxes()}pickNodeExact(e){const{x:t,y:i}=this.groupNode.transformPoint(e.x,e.y),o=this.groupNode.pickNode(t,i);if(null!=o)return{datum:o.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:o,xLowerName:a=e,xUpperName:n=t,yLowerName:s=i,yUpperName:r=o}=this.properties;return{xLowerKey:e,xLowerName:a,xUpperKey:t,xUpperName:n,yLowerKey:i,yLowerName:s,yUpperKey:o,yUpperName:r}}onToggleSeriesItem(e){this.groupNode.visible=e.enabled}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:ma(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,t,i){const o=this.getNodeData();if(null!=o)for(let a=0;a<o.length;a++)if(e===o[a]){this.selection.nodes()[a].update(t,this.properties,i);break}}onHighlightChange(e){const{previousHighlight:t,currentHighlight:i}=e;(null==i?void 0:i.series)===this.cartesianSeries&&this.restyleHighlightChange(i,this.getHighlightStyle(),!0),(null==t?void 0:t.series)===this.cartesianSeries&&this.restyleHighlightChange(t,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new Jo}getWhiskerProperties(){const{stroke:e,strokeWidth:t,visible:i,strokeOpacity:o,lineDash:a,lineDashOffset:n}=this.properties;return{stroke:e,strokeWidth:t,visible:i,strokeOpacity:o,lineDash:a,lineDashOffset:n}}},Sa={series:{errorBar:{visible:!0,stroke:o._Theme.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},Ma={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:o.AgErrorBarSupportedSeriesTypes,instanceConstructor:va,themeTemplate:Sa},{Validate:Da,BOOLEAN:ba,POSITIVE_NUMBER:Na,Layers:Ia,ActionOnSet:ka,CategoryAxis:Ta,GroupedCategoryAxis:Aa}=o._ModuleSupport,{toRadians:Oa,Padding:La,Logger:Ea}=o._Util,{Text:_a,Group:Ra,BBox:Ca}=o._Scene,wa=class{constructor(){this.top=0,this.bottom=0}};f([Da(Na)],wa.prototype,"top",2),f([Da(Na)],wa.prototype,"bottom",2);var Pa=class extends o._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.padding=new wa,this.root=new Ra({name:"root"}),this.seriesRoot=this.root.appendChild(new Ra({name:"Series-root",layer:!0,zIndex:Ia.SERIES_LAYER_ZINDEX})),this.axisGridGroup=this.root.appendChild(new Ra({name:"Axes-Grids",layer:!0,zIndex:Ia.AXIS_GRID_ZINDEX})),this.axisGroup=this.root.appendChild(new Ra({name:"Axes-Grids",layer:!0,zIndex:Ia.AXIS_GRID_ZINDEX})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach((e=>e.destroy())),this.axes=[],this._destroyed=!0)}onSeriesChange(e,t){var i;const o=null!=(i=null==t?void 0:t.filter((t=>!e.includes(t))))?i:[];this.destroySeries(o);for(const a of e){if(null==t?void 0:t.includes(a))continue;null==a.rootGroup.parent&&this.seriesRoot.appendChild(a.rootGroup);const e=this;a.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return e.seriesRect},placeLabels:()=>new Map},a.resetAnimation("initial"===this.miniChartAnimationPhase?"initial":"disabled")}}destroySeries(e){null==e||e.forEach((e=>{e.destroy(),null!=e.rootGroup&&this.seriesRoot.removeChild(e.rootGroup),e.chart=void 0}))}assignSeriesToAxes(){this.axes.forEach((e=>{e.boundSeries=this.series.filter((t=>t.axes[e.direction]===e))}))}assignAxesToSeries(){const e={};this.axes.forEach((t=>{var i;const o=t.direction;(null!=(i=e[o])?i:e[o]=[]).push(t)})),this.series.forEach((t=>{t.directions.forEach((i=>{const o=e[i];if(!o)return void Ea.warnOnce("no available axis for direction [".concat(i,"]; check series and axes configuration."));const a=t.getKeys(i),n=this.findMatchingAxis(o,a);n?t.axes[i]=n:Ea.warnOnce("no matching axis for direction [".concat(i,"] and keys [").concat(a,"]; check series and axes configuration."))}))}))}findMatchingAxis(e,t){for(const i of e){if(!i.keys.length)return i;if(t)for(const e of t)if(i.keys.includes(e))return i}}updateData(e){return S(this,null,(function*(){this.series.forEach((t=>t.setChartData(e.data))),"initial"===this.miniChartAnimationPhase&&this.ctx.animationManager.onBatchStop((()=>{this.miniChartAnimationPhase="ready",this.series.forEach((e=>e.resetAnimation("disabled")))}))}))}processData(e){return S(this,null,(function*(){this.series.some((e=>e.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=this.series.map((t=>t.processData(e.dataController)));yield Promise.all(t)}))}computeAxisPadding(){const e=new La;return this.enabled?(this.axes.forEach((t=>{var i;const{position:o,thickness:a=0,line:n,label:s}=t;if(null==o)return;let r;r=a>0?a:(n.enabled?n.width:0)+(s.enabled?(null!=(i=s.fontSize)?i:0)*_a.defaultLineHeightRatio+s.padding:0),e[o]=Math.ceil(r)})),e):e}layout(e,t){return S(this,null,(function*(){const{padding:i}=this,o=null!=this.seriesRect,a=new Ca(0,0,e,t-(i.top+i.bottom));this.seriesRect=a,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectInGroupCoordinateSpace(this.seriesRoot.inverseTransformBBox(new Ca(0,-i.top,e,t)));this.axes.forEach((i=>{const{position:n="left"}=i;switch(n){case"top":case"bottom":i.range=[0,a.width],i.gridLength=a.height;break;case"right":case"left":i.range=(e=>e instanceof Ta||e instanceof Aa?[0,a.height]:[a.height,0])(i),i.gridLength=a.width}switch(n){case"top":case"left":i.translation.x=0,i.translation.y=0;break;case"bottom":i.translation.x=0,i.translation.y=t;break;case"right":i.translation.x=e,i.translation.y=0}i.gridPadding=0,i.calculateLayout(),i.updatePosition({rotation:Oa(i.rotation),sideFlag:i.label.getSideFlag()}),i.update(void 0,o)})),yield Promise.all(this.series.map((e=>e.update({seriesRect:a}))))}))}};f([Da(ba)],Pa.prototype,"enabled",2),f([ka({changeValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const i of t)e.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of e)(null==t?void 0:t.includes(i))||i.attachAxis(this.axisGroup,this.axisGridGroup)}})],Pa.prototype,"axes",2),f([ka({changeValue(e,t){this.onSeriesChange(e,t)}})],Pa.prototype,"series",2);var{ObserveChanges:za}=o._ModuleSupport,Ka=class e extends o._ModuleSupport.Navigator{constructor(e){super(e),this.miniChart=new Pa(e)}updateData(e){return S(this,null,(function*(){yield this.miniChart.updateData(e)}))}processData(e){return S(this,null,(function*(){yield this.miniChart.processData(e)}))}performLayout(t){return S(this,null,(function*(){const{shrinkRect:i}=yield v(e.prototype,this,"performLayout").call(this,t);if(this.enabled){const{top:e,bottom:t}=this.miniChart.computeAxisPadding();i.shrink(e+t,"bottom"),this.y-=t}return{shrinkRect:i}}))}performCartesianLayout(t){return S(this,null,(function*(){yield v(e.prototype,this,"performCartesianLayout").call(this,t),yield this.miniChart.layout(this.width,this.height)}))}};f([za(((e,t,i)=>{e.updateBackground(null==i?void 0:i.root,null==t?void 0:t.root)}))],Ka.prototype,"miniChart",2);var Va,Ba={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Ka,themeTemplate:m(g({},o._ModuleSupport.NavigatorModule.themeTemplate),{navigator:m(g({},null==(Va=o._ModuleSupport.NavigatorModule.themeTemplate)?void 0:Va.navigator),{miniChart:{enabled:!1,label:{color:o._Theme.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,formatter:void 0,padding:0},padding:{top:0,bottom:0}}})})},{BOOLEAN:Fa,STRING:Ua,UNION:ja,BaseProperties:Wa,CartesianAxis:Ya,ChartUpdateType:Ga,arraysEqual:Ha,isDate:Xa,isDefined:Qa,isFiniteNumber:Za,ObserveChanges:qa,TooltipManager:Ja,Validate:$a}=o._ModuleSupport,{Logger:en}=o._Util,tn=class extends Wa{constructor(e){super(),this.moduleContext=e,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateChart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ga.UPDATE_DATA;e.ctx.updateService.update(t,{skipSync:!0})}updateSiblings(e){const{syncManager:t}=this.moduleContext;(()=>S(this,null,(function*(){for(const i of t.getGroupSiblings(e))yield i.waitForDataProcess(120),this.updateChart(i)})))().catch((e=>{en.warnOnce("Error updating sibling chart",e)}))}enabledZoomSync(){const{syncManager:e,zoomManager:t}=this.moduleContext;this.disableZoomSync=t.addListener("zoom-change",(()=>{var t;for(const i of e.getGroupSiblings(this.groupId))(null==(t=i.modulesManager.getModule("sync"))?void 0:t.zoom)&&i.ctx.zoomManager.updateZoom("sync",this.mergeZoom(i))}))}enabledNodeInteractionSync(){const{highlightManager:e,syncManager:t}=this.moduleContext;this.disableNodeInteractionSync=e.addListener("highlight-change",(e=>{var i,o,a,n,s,r,l,h,d,c,u,p;for(const y of t.getGroupSiblings(this.groupId))if(null==(i=y.modulesManager.getModule("sync"))?void 0:i.nodeInteraction)if(null==(o=e.currentHighlight)?void 0:o.datum)for(const t of y.axes){const i="xy"===this.axes?"x":this.axes;if(!Ya.is(t)||t.direction!==i)continue;const o=y.series.map((i=>{const o=i.getKeys(t.direction);if(t.keys.length&&!t.keys.some((e=>o.includes(e))))return;const{nodeData:a}=i.contextNodeData;if(!(null==a?void 0:a.length))return;const n=a[0]["".concat(t.direction,"Key")];let s=e.currentHighlight.datum[n];const r=Xa(s);r&&(s=s.getTime());const l=a.find((e=>{const t=e.datum[n];return r?t.getTime()===s:t===s}));return l?{series:i,nodeDatum:l}:null})).filter(Qa);if(o.length<2&&(null==(a=o[0])?void 0:a.nodeDatum)!==y.ctx.highlightManager.getActiveHighlight()){const{series:e,nodeDatum:t}=null!=(n=o[0])?n:{};if(y.ctx.highlightManager.updateHighlight(y.id,t),t){const i=null!=(h=null!=(l=null==(s=t.midPoint)?void 0:s.x)?l:null==(r=t.point)?void 0:r.x)?h:0,o=null!=(p=null!=(u=null==(d=t.midPoint)?void 0:d.y)?u:null==(c=t.point)?void 0:c.y)?p:0,a=Ja.makeTooltipMeta({type:"hover",offsetX:i,offsetY:o},t);delete a.lastPointerEvent,y.ctx.tooltipManager.updateTooltip(y.id,a,e.getTooltipHtml(t))}else y.ctx.tooltipManager.removeTooltip(y.id);this.updateChart(y,Ga.SERIES_UPDATE)}}else y.ctx.highlightManager.updateHighlight(y.id),y.ctx.tooltipManager.removeTooltip(y.id)}))}syncAxes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{syncManager:t}=this.moduleContext,i=t.getChart(),o=t.getGroup(this.groupId),a=o.flatMap((e=>e.series)),n=o[0].axes;let s=!1;i.axes.forEach((e=>{if(!Ya.is(e)||"xy"!==this.axes&&this.axes!==e.direction)return void(e.boundSeries=i.series.filter((t=>t.axes[e.direction]===e)));const{direction:t,min:o,max:r,nice:l,reverse:h}=e;for(const a of n)if(t===a.direction&&(l!==a.nice||h!==a.reverse||o!==a.min&&(Za(o)||Za(a.min))||r!==a.max&&(Za(r)||Za(a.max))))return en.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),e.boundSeries=i.series.filter((t=>t.axes[e.direction]===e)),void(this.enabled=!1);const d=a.filter((t=>{if(t.visible){const i=t.getKeys(e.direction);return!e.keys.length||e.keys.some((e=>i.includes(e)))}}));Ha(e.boundSeries,d)||(e.boundSeries=d,s=!0)})),s&&!e&&this.updateSiblings(this.groupId)}mergeZoom(e){var t,i;const{zoomManager:o}=this.moduleContext;if("xy"===this.axes)return o.getZoom();const a=null!=(t=e.zoomManager.getZoom())?t:{};return a[this.axes]=null==(i=o.getZoom())?void 0:i[this.axes],a}onEnabledChange(){const{syncManager:e}=this.moduleContext;this.enabled?e.subscribe(this.groupId):e.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(e,t){if(!this.enabled||e===t)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(t),i.subscribe(e),this.updateSiblings(t),this.updateSiblings(e)}onAxesChange(){if(!this.enabled)return;const{syncManager:e}=this.moduleContext;this.updateChart(e.getChart())}onNodeInteractionChange(){var e;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():null==(e=this.disableNodeInteractionSync)||e.call(this)}onZoomChange(){var e;this.enabled&&this.zoom?this.enabledZoomSync():null==(e=this.disableZoomSync)||e.call(this)}destroy(){var e;const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),null==(e=this.disableZoomSync)||e.call(this)}};tn.className="Sync",f([$a(Fa),qa((e=>e.onEnabledChange()))],tn.prototype,"enabled",2),f([$a(Ua,{optional:!0}),qa(((e,t,i)=>e.onGroupIdChange(t,i)))],tn.prototype,"groupId",2),f([$a(ja(["x","y","xy"],"an axis")),qa((e=>e.onAxesChange()))],tn.prototype,"axes",2),f([$a(Fa),qa((e=>e.onNodeInteractionChange()))],tn.prototype,"nodeInteraction",2),f([$a(Fa),qa((e=>e.onZoomChange()))],tn.prototype,"zoom",2);var on={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:tn,themeTemplate:{sync:{enabled:!1}}},{COLOR_STRING:an,RATIO:nn,Validate:sn}=o._ModuleSupport,rn=class extends o._Scene.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};rn.className="ZoomRect",f([sn(an)],rn.prototype,"fill",2),f([sn(nn)],rn.prototype,"fillOpacity",2);var{clamp:ln,isEqual:hn,round:dn}=o._ModuleSupport,cn={min:0,max:1},un="middle",pn=function(e){return ln(arguments.length>1&&void 0!==arguments[1]?arguments[1]:cn.min,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:cn.max)};function yn(){return{x:g({},cn),y:g({},cn)}}function gn(e){return e.x.max-e.x.min}function mn(e){return e.y.max-e.y.min}function xn(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return hn(e.x.min,t.x.min,i)&&hn(e.x.max,t.x.max,i)&&hn(e.y.min,t.y.min,i)&&hn(e.y.max,t.y.max,i)}function fn(e,t,i){const o=dn(gn(e),10)<=t,a=dn(mn(e),10)<=i;return o||a}function vn(e){var t,i,o,a,n,s,r,l;return{x:{min:null!=(i=null==(t=null==e?void 0:e.x)?void 0:t.min)?i:cn.min,max:null!=(a=null==(o=null==e?void 0:e.x)?void 0:o.max)?a:cn.max},y:{min:null!=(s=null==(n=null==e?void 0:e.y)?void 0:n.min)?s:cn.min,max:null!=(l=null==(r=null==e?void 0:e.y)?void 0:r.max)?l:cn.max}}}function Sn(e,t,i){if(!e)return{x:0,y:0};const o=pn(t-e.x,0,e.x+e.width),a=pn(i-e.y,0,e.y+e.height),n=1/e.width*o,s=1-1/e.height*a;return{x:pn(n),y:pn(s)}}function Mn(e,t,i){return{x:{min:e.x.min+t,max:e.x.max+t},y:{min:e.y.min+i,max:e.y.max+i}}}function Dn(e,t,i){return{x:{min:e.x.min,max:e.x.min+gn(e)*t},y:{min:e.y.min,max:e.y.min+mn(e)*i}}}function bn(e,t,i){const o=gn(e),a=mn(e),n=e.x.min+o/2,s=e.y.min+a/2;return{x:{min:n-o*t/2,max:n+o*t/2},y:{min:s-a*i/2,max:s+a*i/2}}}function Nn(e,t,i,o){const{min:a,max:n}=t,s=a+(n-a)/2,r=e.max-e.min;switch(i){case"start":return{min:a,max:t.min+r};case"end":return{min:t.max-r,max:n};case"middle":return{min:s-r/2,max:s+r/2};case"pointer":return In(e,t,null!=o?o:s);default:return{min:a,max:n}}}function In(e,t,i){const o=i-i*(1-(t.max-t.min-(e.max-e.min)));return{min:e.min+o,max:e.max+o}}function kn(e){const t=yn();return t.x=Tn(e.x),t.y=Tn(e.y),t}function Tn(e){const t=e.max-e.min;let i=e.max>cn.max?cn.max-t:e.min,o=e.min<cn.min?t:e.max;return i=Math.max(cn.min,i),o=Math.min(cn.max,o),{min:i,max:o}}function An(e,t,i){let{min:o,max:a}=e;if(a===t.max)o=a-i;else if(o===t.min)a=o+i;else{const e=t.min+(t.max-t.min)/2;o=e-i/2,a=e+i/2}return{min:o,max:a}}var On=class{update(e,t,i,a,n,s){return null!=this.oldZoom||(this.oldZoom=vn(t===o._ModuleSupport.ChartAxisDirection.X?m(g({},n),{x:s}):m(g({},n),{y:s}))),this.updateCoords(e.offsetX,e.offsetY),this.updateZoom(t,i,a)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(e,t){this.coords?(this.coords.x2=e,this.coords.y2=t):this.coords={x1:e,y1:t,x2:e,y2:t}}updateZoom(e,t,i){const{coords:a,oldZoom:n}=this;let s=vn(n);if(!a||!n)return e===o._ModuleSupport.ChartAxisDirection.X?s.x:s.y;const r=Sn(i,a.x1,a.y1),l=Sn(i,a.x2,a.y2);if(e===o._ModuleSupport.ChartAxisDirection.X){const e=(l.x-r.x)*gn(n);return s.x.max+=e,s.x=Nn(s.x,n.x,t,r.x),s=kn(s),s.x}const h=(l.y-r.y)*mn(n);return s.y.max-=h,s.y=Nn(s.y,n.y,t,r.y),s=kn(s),s.y}},Ln="zoom-action",En="pan-action",_n=class{constructor(e,t,i){this.contextMenuRegistry=e,this.zoomManager=t,this.updateZoom=i}registerActions(e,t,i){if(!e)return;const{contextMenuRegistry:o}=this;o.registerDefaultAction({id:Ln,label:"Zoom to here",action:e=>this.onZoomToHere(e,i)}),o.registerDefaultAction({id:En,label:"Pan to here",action:e=>this.onPanToHere(e,i)}),this.toggleActions(t,i)}toggleActions(e,t){const{contextMenuRegistry:i}=this;fn(e,t.minRatioX,t.minRatioY)?i.disableAction(Ln):i.enableAction(Ln),xn(e,yn())?i.disableAction(En):i.enableAction(En)}onZoomToHere(e,t){let{event:i}=e;const{rect:o}=this,{enabled:a,isScalingX:n,isScalingY:s,minRatioX:r,minRatioY:l}=t;if(!a||!o||!i||!i.target)return;const h=vn(this.zoomManager.getZoom()),d=Sn(o,i.clientX,i.clientY),c=d.x*gn(h),u=d.y*mn(h),p=cn.max-cn.min,y=p/2;let g={x:{min:d.x-y,max:d.x+y},y:{min:d.y-y,max:d.y+y}};g=bn(g,n?r:p,s?l:p),g=Mn(g,h.x.min-d.x+c,h.y.min-d.y+u),this.updateZoom(kn(g))}onPanToHere(e,t){let{event:i}=e;const{rect:o}=this,{enabled:a}=t;if(!a||!o||!i||!i.target)return;const n=vn(this.zoomManager.getZoom()),s=Sn(o,i.clientX,i.clientY),r=gn(n),l=mn(n),h=s.x*r,d=s.y*l,c=(cn.max-cn.min)/2;let u={x:{min:s.x-c,max:s.x+c},y:{min:s.y-c,max:s.y+c}};u=bn(u,r,l),u=Mn(u,n.x.min-s.x+h,n.y.min-s.y+d),this.updateZoom(kn(u))}},Rn=class{constructor(){this.deceleration=1,this.zoomCoordsHistoryIndex=0,this.coordsHistory=[]}addListener(e,t){return this.onUpdate=t,()=>{this.onUpdate=void 0}}stopInteractions(){null!=this.inertiaHandle&&(cancelAnimationFrame(this.inertiaHandle),this.inertiaHandle=void 0)}update(e){var t,i;this.updateCoords(e.offsetX,e.offsetY);const{x1:o=0,y1:a=0,x2:n=0,y2:s=0}=null!=(t=this.coords)?t:{};null==(i=this.onUpdate)||i.call(this,{type:"update",deltaX:o-n,deltaY:a-s})}start(){this.coordsMonitorTimeout=setInterval(this.recordCurrentZoomCoords.bind(this),16)}stop(){const{coordsHistory:e}=this;let t=0,i=0,o=0;if(e.length>0){const a=this.zoomCoordsHistoryIndex%16;let n=a-1;n<0&&(n=e.length-1);let s=a;s>=e.length&&(s=0);const r=e[n],l=e[s];t=r.x-l.x,i=r.y-l.y,o=r.t-l.t}if(this.coords=void 0,clearInterval(this.coordsMonitorTimeout),this.coordsMonitorTimeout=void 0,this.zoomCoordsHistoryIndex=0,this.coordsHistory.length=0,o>0&&this.deceleration<1){const e=t/o,a=i/o,n=Math.hypot(e,a),s=Math.atan2(a,e),r=performance.now();this.inertiaHandle=requestAnimationFrame((e=>{this.animateInertia(e,e,r,n,s)}))}}recordCurrentZoomCoords(){const{coords:e,coordsHistory:t,zoomCoordsHistoryIndex:i}=this;if(!e)return;const{x2:o,y2:a}=e,n=Date.now();t[i%16]={x:o,y:a,t:n},this.zoomCoordsHistoryIndex+=1}animateInertia(e,t,i,o,a){var n;const s=1-this.deceleration,r=-o/Math.log(s),l=o*(p(s,t-i)-1)/Math.log(s),h=o*(p(s,e-i)-1)/Math.log(s);null==(n=this.onUpdate)||n.call(this,{type:"update",deltaX:-Math.cos(a)*(h-l),deltaY:-Math.sin(a)*(h-l)}),h>=r-1||(this.inertiaHandle=requestAnimationFrame((t=>{this.animateInertia(t,e,i,o,a)})))}updateCoords(e,t){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:e,y2:t}:this.coords={x1:e,y1:t,x2:e,y2:t}}translateZooms(e,t,i,a){const n=Sn(e,e.x+Math.abs(i),e.y+e.height-Math.abs(a)),s=Math.sign(i)*n.x,r=-Math.sign(a)*n.y,l={};for(const[h,{direction:d,zoom:c}]of Object.entries(t)){let e;e=d===o._ModuleSupport.ChartAxisDirection.X?vn({x:c}):vn({y:c}),e=kn(Mn(e,s*gn(e),r*mn(e))),d===o._ModuleSupport.ChartAxisDirection.X?l[h]={direction:d,zoom:e.x}:l[h]={direction:d,zoom:e.y}}return l}},{AND:Cn,DATE:wn,NUMBER:Pn,OR:zn,ActionOnSet:Kn,isFiniteNumber:Vn,isValidDate:Bn,Validate:Fn}=o._ModuleSupport,Un=class{constructor(e){this.onChange=e}getRange(){return this.getRangeWithValues(this.start,this.end)}getInitialRange(){return this.getRangeWithValues(this.initialStart,this.initialEnd)}extendToEnd(e){return this.extendWith((t=>Number(t)-e))}extendWith(e){var t;if(!this.domain)return;const[,i]=this.domain;if(null==i)return;const o=e(i),a=this.start!==o||this.end!==i;this.end=i,this.start=o,a||null==(t=this.onChange)||t.call(this,this.getRange())}updateWith(e){var t;if(!this.domain)return;let[i,o]=this.domain;[i,o]=e(i,o);const a=this.start!==i||this.end!==o;this.end=o,this.start=i,a||null==(t=this.onChange)||t.call(this,this.getRange())}extendAll(){var e;if(!this.domain)return;const[t,i]=this.domain,o=this.start!==t||this.end!==i;this.start=t,this.end=i,o||null==(e=this.onChange)||e.call(this,this.getRange())}updateAxis(e){const t=e.find((e=>{let{domain:t}=e;const i=!Vn(t[0])||!Vn(t.at(-1)),o=!Bn(t[0])||!Bn(t.at(-1));return i||o}));if(!t)return null!=this.domain;let i=t.domain;null!=i&&(i=[i[0],i.at(-1)],i[0]instanceof Date&&i[1]instanceof Date&&(i=[i[0].getTime(),i[1].getTime()]));const a=null==this.domain||!o._Util.areArrayItemsStrictlyEqual(this.domain,i);return a&&(this.domain=i),a}getRangeWithValues(e,t){var i;let[o,a]=null!=(i=this.domain)?i:[];if(null==e&&null==t||null==o||null==a)return;o=Number(o),a=Number(a);let n=0,s=1;return null!=e&&(n=(Number(e)-o)/(a-o)),null!=t&&(s=(Number(t)-o)/(a-o)),{min:n,max:s}}};f([Kn({changeValue(e){var t;null!=this.initialStart||(this.initialStart=e),null==(t=this.onChange)||t.call(this,this.getRangeWithValues(e,this.end))}}),Fn(Cn(zn(wn,Pn)),{optional:!0})],Un.prototype,"start",2),f([Kn({changeValue(e){var t;null!=this.initialEnd||(this.initialEnd=e),null==(t=this.onChange)||t.call(this,this.getRangeWithValues(this.start,e))}}),Fn(Cn(zn(wn,Pn)),{optional:!0})],Un.prototype,"end",2);var{AND:jn,GREATER_THAN:Wn,LESS_THAN:Yn,RATIO:Gn,ActionOnSet:Hn,Validate:Xn}=o._ModuleSupport,Qn=class{constructor(e){this.onChange=e}getRatio(){return this.getRatioWithValues(this.start,this.end)}getInitialRatio(){return this.getRatioWithValues(this.initialStart,this.initialEnd)}getRatioWithValues(e,t){if(null!=e||null!=t)return{min:null!=e?e:cn.min,max:null!=t?t:cn.max}}};f([Hn({changeValue(e){var t;null!=this.initialStart||(this.initialStart=e),null==(t=this.onChange)||t.call(this,this.getRatioWithValues(e,this.end))}}),Xn(jn(Gn,Yn("end")),{optional:!0})],Qn.prototype,"start",2),f([Hn({changeValue(e){var t;null!=this.initialEnd||(this.initialEnd=e),null==(t=this.onChange)||t.call(this,this.getRatioWithValues(this.start,e))}}),Xn(jn(Gn,Wn("start")),{optional:!0})],Qn.prototype,"end",2);var Zn=class{update(e,t,i,o){const a=e.deltaX*t*200;return this.translateZooms(i,o,a)}translateZooms(e,t,i){const a={},n=Sn(e,e.x+Math.abs(i),0),s=i<0?-n.x:n.x;for(const[r,{direction:l,zoom:h}]of Object.entries(t)){if(l!==o._ModuleSupport.ChartAxisDirection.X)continue;let e=vn({x:h});e=kn(Mn(e,s*gn(e),0)),a[r]={direction:l,zoom:e.x}}return a}},qn=class{update(e,t,i,o){const a=e.sourceEvent,{anchorPointX:n,anchorPointY:s,isScalingX:r,isScalingY:l,scrollingStep:h}=t,d=e.deltaY;let c=vn(o);return c.x.max+=r?h*d*gn(o):0,c.y.max+=l?h*d*mn(o):0,"pointer"===n&&r||"pointer"===s&&l?c=this.scaleZoomToPointer(a,r,l,i,o,c):(r&&(c.x=Nn(c.x,o.x,n)),l&&(c.y=Nn(c.y,o.y,s))),c=kn(c),c}scaleZoomToPointer(e,t,i,o,a,n){var s,r;const l=Sn(o,null!=(s=e.offsetX)?s:e.clientX,null!=(r=e.offsetY)?r:e.clientY);return n.x=t?In(n.x,a.x,l.x):n.x,n.y=i?In(n.y,a.y,l.y):n.y,n}},Jn=class{constructor(e){this.rect=e,this.rect.visible=!1}update(e,t,i,o){this.rect.visible=!0,this.updateCoords(e.offsetX,e.offsetY,t,i,o),this.updateRect(i)}stop(e,t,i){let o=vn();if(!e||!t)return o;this.coords&&(o=this.createZoomFromCoords(t,i));return o=kn(function(e,t,i){return{x:{min:e.x.min*t,max:e.x.max*t},y:{min:e.y.min*i,max:e.y.max*i}}}(o,t.width/e.width,t.height/e.height)),this.reset(),o}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible}updateCoords(e,t,i,o,a){if(!this.coords)return void(this.coords={x1:e,y1:t,x2:e,y2:t});if(this.coords.x2=e,this.coords.y2=t,!o)return;const{isScalingX:n,isScalingY:s,minRatioX:r,minRatioY:l}=i,h=vn(a),d=this.getNormalisedDimensions(),c=o.width/o.height,u=r/(h.x.max-h.x.min),p=l/(h.y.max-h.y.min);d.width/o.width<u&&(this.coords.x2<this.coords.x1?this.coords.x2=this.coords.x1-o.width*u:this.coords.x2=this.coords.x1+o.width*u),s&&!n?d.height/o.height<p&&(this.coords.y2<this.coords.y1?this.coords.y2=this.coords.y1-o.width*u:this.coords.y2=this.coords.y1+o.height*p):this.coords.y2<this.coords.y1?this.coords.y2=Math.min(this.coords.y1-d.width/c,this.coords.y1-o.height*p):this.coords.y2=Math.max(this.coords.y1+d.width/c,this.coords.y1+o.height*p),n||(this.coords.x1=o.x,this.coords.x2=o.x+o.width),s||(this.coords.y1=o.y,this.coords.y2=o.y+o.height)}updateRect(e){if(!e)return;const{rect:t}=this,i=this.getNormalisedDimensions(),{width:o,height:a}=i;let{x:n,y:s}=i;n=Math.max(n,e.x),n-=Math.max(0,n+o-(e.x+e.width)),s=Math.max(s,e.y),s-=Math.max(0,s+a-(e.y+e.height)),t.x=n,t.y=s,t.width=o,t.height=a}createZoomFromCoords(e,t){const i=vn(t),o=this.getNormalisedDimensions(),a=Sn(e,o.x,o.y+o.height);let n=Dn(i,o.width/e.width,o.height/e.height);return n=Mn(n,a.x*(i.x.max-i.x.min),a.y*(i.y.max-i.y.min)),n=kn(n),n}getNormalisedDimensions(){var e;const{x1:t=0,y1:i=0,x2:o=0,y2:a=0}=null!=(e=this.coords)?e:{};return{x:t<=o?t:o,y:i<=a?i:a,width:t<=o?o-t:t-o,height:i<=a?a-i:i-a}}},{ToolbarManager:$n}=o._ModuleSupport,es=class{constructor(e,t,i,o){this.toolbarManager=e,this.zoomManager=t,this.getResetZoom=i,this.updateZoom=o}toggle(e,t,i){this.toggleGroups(e),e&&this.toggleButtons(t,i)}toggleButtons(e,t){const{toolbarManager:i}=this,o=xn(e,yn()),a=fn(e,t.minRatioX,t.minRatioY),n=xn(e,this.getResetZoom());i.toggleButton("zoom","pan-start",e.x.min>cn.min),i.toggleButton("zoom","pan-end",e.x.max<cn.max),i.toggleButton("zoom","pan-left",e.x.min>cn.min),i.toggleButton("zoom","pan-right",e.x.max<cn.max),i.toggleButton("zoom","zoom-out",!o),i.toggleButton("zoom","zoom-in",!a),i.toggleButton("zoom","reset",!n)}onButtonPress(e,t){this.onButtonPressRanges(e,t),this.onButtonPressZoom(e,t)}toggleGroups(e){var t,i;null==(t=this.toolbarManager)||t.toggleGroup("ranges",Boolean(e)),null==(i=this.toolbarManager)||i.toggleGroup("zoom",Boolean(e))}onButtonPressRanges(e,t){if(!$n.isGroup("ranges",e))return;const{rangeX:i}=t,o=e.value;"number"===typeof o?i.extendToEnd(o):Array.isArray(o)?i.updateWith((()=>o)):"function"===typeof o&&i.updateWith(o)}onButtonPressZoom(e,t){if(!$n.isGroup("zoom",e))return;const{anchorPointX:i,anchorPointY:o,isScalingX:a,isScalingY:n,scrollingStep:s}=t,r=vn(this.zoomManager.getZoom());let l=vn(r);switch(e.value){case"reset":l=this.getResetZoom();break;case"pan-start":l.x.max=gn(l),l.x.min=0;break;case"pan-end":l.x.min=cn.max-gn(l),l.x.max=cn.max;break;case"pan-left":case"pan-right":l=Mn(l,"pan-left"===e.value?-gn(l):gn(l),0);break;case"zoom-in":case"zoom-out":const t="zoom-in"===e.value?1-s:1+s,h="pointer"===i?"end":i,d="pointer"===o?un:o;l=Dn(l,a?t:1,n?t:1),l.x=Nn(l.x,r.x,h),l.y=Nn(l.y,r.y,d)}this.updateZoom(kn(l))}},{ARRAY:ts,BOOLEAN:is,NUMBER:os,RATIO:as,STRING:ns,UNION:ss,ActionOnSet:rs,ChartAxisDirection:ls,ChartUpdateType:hs,Validate:ds,ProxyProperty:cs,round:us}=o._ModuleSupport,ps=e=>us(e,10),ys=ss(["pointer","start","middle","end"],"an anchor cord"),gs="zoom-cursor",ms="zoom-tooltip",xs=class extends o._ModuleSupport.BaseProperties{constructor(e){super(),this.onChange=e,this.enabled=!1,this.position="floating-bottom",this.align="center"}};f([o._ModuleSupport.ObserveChanges((e=>{e.onChange()})),ds(is)],xs.prototype,"enabled",2),f([o._ModuleSupport.ObserveChanges((e=>{e.onChange()})),ds(ts,{optional:!0})],xs.prototype,"buttons",2),f([ds(ns)],xs.prototype,"position",2),f([ds(ns)],xs.prototype,"align",2);var fs=class extends o._ModuleSupport.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.enableAxisDragging=!0,this.buttons=new xs((()=>this.onZoomButtonsChange(this.enabled))),this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(cn.max-cn.min)/10,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX="end",this.anchorPointY=un,this.rangeX=new Un(this.onRangeChange.bind(this,ls.X)),this.rangeY=new Un(this.onRangeChange.bind(this,ls.Y)),this.ratioX=new Qn(this.onRatioChange.bind(this,ls.X)),this.ratioY=new Qn(this.onRatioChange.bind(this,ls.Y)),this.axisDragger=new On,this.contextMenu=new _n(this.ctx.contextMenuRegistry,this.ctx.zoomManager,this.updateZoom.bind(this)),this.panner=new Rn,this.scroller=new qn,this.scrollPanner=new Zn,this.toolbar=new es(this.ctx.toolbarManager,this.ctx.zoomManager,this.getResetZoom.bind(this),this.updateZoom.bind(this)),this.deceleration=1,this.dragState=0,this.minRatioX=0,this.minRatioY=0;const t=new rn;this.selector=new Jn(t);const{Default:i,ZoomDrag:a,Animation:n}=o._ModuleSupport.InteractionState,s=i|n|a,r=i|n,l=e.regionManager.getRegion("series");this.destroyFns.push(e.scene.attachNode(t),l.addListener("dblclick",(e=>this.onDoubleClick(e)),r),l.addListener("drag",(e=>this.onDrag(e)),s),l.addListener("drag-start",(e=>this.onDragStart(e)),s),l.addListener("drag-end",(()=>this.onDragEnd()),s),l.addListener("wheel",(e=>this.onWheel(e)),r),l.addListener("hover",(()=>this.onAxisLeave()),r),l.addListener("leave",(()=>this.onAxisLeave()),r),e.chartEventManager.addListener("axis-hover",(e=>this.onAxisHover(e))),e.gestureDetector.addListener("pinch-move",(e=>this.onPinchMove(e))),e.toolbarManager.addListener("button-pressed",(e=>this.toolbar.onButtonPress(e,this.getModuleProperties()))),e.layoutService.addListener("layout-complete",(e=>this.onLayoutComplete(e))),e.updateService.addListener("update-complete",(e=>this.onUpdateComplete(e))),e.zoomManager.addListener("zoom-change",(e=>this.onZoomChange(e))),e.zoomManager.addListener("zoom-pan-start",(e=>this.onZoomPanStart(e))),this.panner.addListener("update",(e=>this.onPanUpdate(e))))}onEnabledChange(e){if(!this.contextMenu||!this.toolbar)return;const t=this.getZoom(),i=this.getModuleProperties({enabled:e});this.contextMenu.registerActions(e,t,i),this.onZoomButtonsChange(e),this.toolbar.toggle(e,t,i)}onZoomButtonsChange(e){if(!this.buttons)return;const t=this.buttons.toJson();t.enabled&&(t.enabled=e),this.ctx.toolbarManager.proxyGroupOptions("zoom",t)}onRangeChange(e,t){if(!t)return;const i=this.getZoom();i[e]=t,this.updateZoom(kn(i))}onRatioChange(e,t){if(!t)return;let i=this.ratioX.getRatio(),o=this.ratioY.getRatio();e===ls.X?i=t:o=t;const a=kn(vn({x:i,y:o}));this.updateZoom(a)}onDoubleClick(e){const{enabled:t,enableDoubleClickToReset:i,hoveredAxis:o,paddedRect:a,ctx:{highlightManager:n}}=this;if(!t||!i)return;const{x:s,y:r}=this.getResetZoom();if(o){const{direction:e}=o,t=e===ls.X?s:r;this.updateAxisZoom(e,t)}else(null==a?void 0:a.containsPoint(e.offsetX,e.offsetY))&&null==n.getActivePicked()&&this.updateZoom({x:s,y:r})}onDragStart(e){const{enabled:t,enableAxisDragging:i,enablePanning:o,enableSelecting:a,hoveredAxis:n,paddedRect:s,ctx:{cursorManager:r,zoomManager:l}}=this;if(!t||!s)return;this.panner.stopInteractions();let h=0;if(i&&n)h=1;else if(s.containsPoint(e.offsetX,e.offsetY)){const t=this.isPanningKeyPressed(e.sourceEvent);if(!o||a&&!t){if(a){this.isMinZoom(this.getZoom())||t||(h=3)}}else r.updateCursor(gs,"grabbing"),h=2,this.panner.start()}0!==(this.dragState=h)&&l.fireZoomPanStartEvent("zoom")}onDrag(e){const{anchorPointX:t,anchorPointY:i,axisDragger:a,dragState:n,enabled:s,paddedRect:r,panner:l,selector:h,seriesRect:d,hoveredAxis:c,ctx:{interactionManager:u,tooltipManager:p,updateService:y,zoomManager:g}}=this;if(!s||!r||!d)return;u.pushState(o._ModuleSupport.InteractionState.ZoomDrag);const m=this.getZoom();switch(n){case 1:if(!c)break;const{id:n,direction:s}=c,u=s===o._ModuleSupport.ChartAxisDirection.X?t:i,p=g.getAxisZoom(n),y=a.update(e,s,u,d,m,p);this.updateAxisZoom(s,y);break;case 2:l.update(e);break;case 3:h.update(e,this.getModuleProperties(),r,m);break;case 0:return}p.updateTooltip(ms),y.update(hs.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(){const{axisDragger:e,dragState:t,enabled:i,panner:a,selector:n,ctx:{cursorManager:s,interactionManager:r,tooltipManager:l}}=this;if(r.popState(o._ModuleSupport.InteractionState.ZoomDrag),i&&0!==t){switch(t){case 1:e.stop();break;case 2:a.stop();break;case 3:if(!n.didUpdate())break;const t=this.getZoom();if(this.isMinZoom(t))break;const i=n.stop(this.seriesRect,this.paddedRect,t);this.updateZoom(i)}this.dragState=0,s.updateCursor(gs),l.removeTooltip(ms)}}onWheel(e){const{enabled:t,enableAxisDragging:i,enablePanning:a,enableScrolling:n,hoveredAxis:s,paddedRect:r,scroller:l,scrollingStep:h,scrollPanner:d,seriesRect:c,ctx:{zoomManager:u}}=this;if(!t||!n||!r||!c)return;const p=r.containsPoint(e.offsetX,e.offsetY),y=i&&null!=s;let g=this.isScalingX(),m=this.isScalingY();y&&(g=s.direction===o._ModuleSupport.ChartAxisDirection.X,m=!g);const x=e.sourceEvent,{deltaX:f,deltaY:v}=x,S=null!=f&&null!=v&&Math.abs(f)>Math.abs(v);if(a&&S){e.consume(),e.sourceEvent.preventDefault();const t=d.update(e,h,c,u.getAxisZooms());for(const{direction:e,zoom:i}of Object.values(t))this.updateAxisZoom(e,i);return}if(!p&&!y)return;e.consume(),e.sourceEvent.preventDefault();const M=l.update(e,this.getModuleProperties({isScalingX:g,isScalingY:m}),c,this.getZoom());this.updateZoom(M)}onAxisLeave(){const{enabled:e,ctx:{cursorManager:t}}=this;e&&(this.hoveredAxis=void 0,t.updateCursor(gs))}onAxisHover(e){const{enabled:t,enableAxisDragging:i,ctx:{cursorManager:o}}=this;t&&(this.hoveredAxis={id:e.axisId,direction:e.direction},i&&o.updateCursor(gs,e.direction===ls.X?"ew-resize":"ns-resize"))}onPinchMove(e){const{enabled:t,enableScrolling:i,paddedRect:o,seriesRect:a}=this;if(!t||!i||!o||!a)return;const n=this.getZoom(),s=this.getZoom(),r=-.01*e.deltaDistance,l=Sn(a,e.origin.x,e.origin.y);this.isScalingX()&&(s.x.max+=r*gn(n),s.x=In(s.x,n.x,l.x)),this.isScalingY()&&(s.y.max+=r*(n.y.max-n.y.min),s.y=In(s.y,n.y,l.y)),this.updateZoom(kn(s))}onLayoutComplete(e){const{enabled:t,rangeX:i,rangeY:a}=this;if(!t)return;const{series:{rect:n,paddedRect:s,shouldFlipXY:r},axes:l}=e;if(this.seriesRect=n,this.paddedRect=s,this.contextMenu.rect=s,this.shouldFlipXY=r,!l)return;const[h,d]=o._Util.bifurcate((e=>e.direction===ls.X),l),c=i.updateAxis(h),u=a.updateAxis(d);if(!c&&!u)return;const p={};p.x=i.getRange(),p.y=a.getRange(),null==p.x&&null==p.y||this.updateZoom(kn(vn(p)))}onUpdateComplete(e){let{minRect:t,minVisibleRect:i}=e;const{enabled:o,minVisibleItemsX:a,minVisibleItemsY:n,paddedRect:s,shouldFlipXY:r}=this;if(!o||!s||!t||!i)return;const l=this.getZoom(),h=r?n:a,d=r?a:n,c=i.width*h/s.width,u=i.height*d/s.height,p=ps(c*gn(l)),y=ps(u*mn(l));this.isScalingX()&&(this.minRatioX=Math.min(1,p)),this.isScalingY()&&(this.minRatioY=Math.min(1,y)),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onZoomChange(e){"zoom"!==e.callerId&&this.panner.stopInteractions();const t=this.getZoom(),i=this.getModuleProperties();this.contextMenu.toggleActions(t,i),this.toolbar.toggleButtons(t,i)}onZoomPanStart(e){"zoom"===e.callerId&&this.panner.stopInteractions()}onPanUpdate(e){const{panner:t,seriesRect:i,ctx:{tooltipManager:o,updateService:a,zoomManager:n}}=this;if(!i)return;const s=t.translateZooms(i,n.getAxisZooms(),e.deltaX,e.deltaY);for(const{direction:r,zoom:l}of Object.values(s))this.updateAxisZoom(r,l);o.updateTooltip(ms),a.update(hs.PERFORM_LAYOUT,{skipAnimations:!0})}isPanningKeyPressed(e){switch(this.panKey){case"alt":return e.altKey;case"ctrl":return e.ctrlKey;case"shift":return e.shiftKey;case"meta":return e.metaKey}}isScalingX(){return"xy"===this.axes||(this.shouldFlipXY?"y"===this.axes:"x"===this.axes)}isScalingY(){return"xy"===this.axes||(this.shouldFlipXY?"x"===this.axes:"y"===this.axes)}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(e){return fn(e,this.minRatioX,this.minRatioY)}updateZoom(e){const{minRatioX:t,minRatioY:i,ctx:{zoomManager:o}}=this,a=gn(e),n=mn(e),s=this.getZoom(),r=a<=gn(s)&&a<t,l=n<=mn(s)&&n<i;r&&(e.x=An(e.x,s.x,t)),l&&(e.y=An(e.y,s.y,i)),o.updateZoom("zoom",e)}updateAxisZoom(e,t){if(!t)return;const i=this.getZoom();i[e]=t,this.updateZoom(i)}getZoom(){return vn(this.ctx.zoomManager.getZoom())}getResetZoom(){var e,t,i,o;return{x:null!=(t=null!=(e=this.rangeX.getInitialRange())?e:this.ratioX.getInitialRatio())?t:cn,y:null!=(o=null!=(i=this.rangeY.getInitialRange())?i:this.ratioY.getInitialRatio())?o:cn}}getModuleProperties(e){var t,i,o,a,n,s,r,l,h;return{anchorPointX:null!=(t=null==e?void 0:e.anchorPointX)?t:this.getAnchorPointX(),anchorPointY:null!=(i=null==e?void 0:e.anchorPointY)?i:this.getAnchorPointY(),enabled:null!=(o=null==e?void 0:e.enabled)?o:this.enabled,isScalingX:null!=(a=null==e?void 0:e.isScalingX)?a:this.isScalingX(),isScalingY:null!=(n=null==e?void 0:e.isScalingY)?n:this.isScalingY(),minRatioX:null!=(s=null==e?void 0:e.minRatioX)?s:this.minRatioX,minRatioY:null!=(r=null==e?void 0:e.minRatioY)?r:this.minRatioY,rangeX:null!=(l=null==e?void 0:e.rangeX)?l:this.rangeX,scrollingStep:null!=(h=null==e?void 0:e.scrollingStep)?h:this.scrollingStep}}};f([rs({newValue(e){this.onEnabledChange(e)}}),ds(is)],fs.prototype,"enabled",2),f([ds(is)],fs.prototype,"enableAxisDragging",2),f([ds(is)],fs.prototype,"enableDoubleClickToReset",2),f([ds(is)],fs.prototype,"enablePanning",2),f([ds(is)],fs.prototype,"enableScrolling",2),f([ds(is)],fs.prototype,"enableSelecting",2),f([ds(ss(["alt","ctrl","meta","shift"],"a pan key"))],fs.prototype,"panKey",2),f([ds(ss(["x","y","xy"],"an axis"))],fs.prototype,"axes",2),f([ds(as)],fs.prototype,"scrollingStep",2),f([ds(os.restrict({min:1}))],fs.prototype,"minVisibleItemsX",2),f([ds(os.restrict({min:1}))],fs.prototype,"minVisibleItemsY",2),f([ds(ys)],fs.prototype,"anchorPointX",2),f([ds(ys)],fs.prototype,"anchorPointY",2),f([cs("panner.deceleration"),ds(os.restrict({min:1e-4,max:1}))],fs.prototype,"deceleration",2);var vs={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian"],dependencies:["toolbar"],instanceConstructor:fs,themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",buttons:{enabled:!0,buttons:[{icon:"zoom-out",tooltip:"Zoom out",value:"zoom-out"},{icon:"zoom-in",tooltip:"Zoom in",value:"zoom-in"},{icon:"pan-left",tooltip:"Pan left",value:"pan-left"},{icon:"pan-right",tooltip:"Pan right",value:"pan-right"},{icon:"reset",tooltip:"Reset the zoom",value:"reset"}]},enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,minVisibleItemsX:2,minVisibleItemsY:2,panKey:"alt",scrollingStep:.1}}},{BOOLEAN:Ss,Layers:Ms,POSITION:Ds,Validate:bs,Default:Ns,MIN_SPACING:Is,MAX_SPACING:ks,POSITIVE_NUMBER:Ts,ProxyProperty:As,DeprecatedAndRenamedTo:Os}=o._ModuleSupport,{BBox:Ls,Group:Es,Rect:_s,LinearGradientFill:Rs,Triangle:Cs}=o._Scene,{createId:ws}=o._Util,Ps=class{constructor(){this.thickness=16,this.preferredLength=100}};f([bs(Ts)],Ps.prototype,"thickness",2),f([bs(Ts)],Ps.prototype,"preferredLength",2);var zs=class extends o._ModuleSupport.AxisTick{constructor(){super(...arguments),this.enabled=!1,this.size=0,this.minSpacing=NaN,this.maxSpacing=NaN}};f([bs(Is),Ns(NaN)],zs.prototype,"minSpacing",2),f([bs(ks),Ns(NaN)],zs.prototype,"maxSpacing",2);var Ks=class extends o._ModuleSupport.CartesianAxis{constructor(e){super(e,new o._Scale.LinearScale,{respondsToZoom:!1}),this.colorDomain=[],this.nice=!1,this.line.enabled=!1}calculateDomain(){this.setDomain(this.colorDomain)}createTick(){return new zs}},Vs=class{constructor(e){this.label=e}};f([As("label.fontStyle")],Vs.prototype,"fontStyle",2),f([As("label.fontWeight")],Vs.prototype,"fontWeight",2),f([As("label.fontSize")],Vs.prototype,"fontSize",2),f([As("label.fontFamily")],Vs.prototype,"fontFamily",2),f([As("label.color")],Vs.prototype,"color",2),f([As("label.format")],Vs.prototype,"format",2),f([As("label.formatter")],Vs.prototype,"formatter",2);var Bs=class{constructor(e){this.tick=e}};f([As("tick.values")],Bs.prototype,"values",2),f([As("tick.minSpacing")],Bs.prototype,"minSpacing",2),f([As("tick.maxSpacing")],Bs.prototype,"maxSpacing",2),f([As("tick.interval")],Bs.prototype,"step",2);var Fs=class{constructor(e){this.axis=e,this.label=new Vs(e.label),this.interval=new Bs(e.tick)}};f([As("axis.seriesAreaPadding")],Fs.prototype,"padding",2);var Us=class{constructor(e){this.ctx=e,this.id=ws(this),this.group=new Es({name:"legend",layer:!0,zIndex:Ms.LEGEND_ZINDEX}),this.gradient=new Ps,this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=void 0,this.pagination=void 0,this.spacing=20,this.data=[],this.listeners={},this.latestGradientBox=void 0,this.layoutService=e.layoutService,this.destroyFns.push(this.layoutService.addListener("start-layout",(e=>this.update(e.shrinkRect)))),this.highlightManager=e.highlightManager,this.destroyFns.push(this.highlightManager.addListener("highlight-change",(()=>this.onChartHoverChange()))),this.gradientRect=new _s,this.gradientFill=new Rs,this.gradientFill.mask=this.gradientRect,this.group.append(this.gradientFill),this.arrow=new Cs,this.group.append(this.arrow),this.axisGridGroup=new Es({name:"legend-axis-grid-group"}),this.group.append(this.axisGridGroup),this.axisGroup=new Es({name:"legend-axis-group"}),this.group.append(this.axisGroup),this.axis=new Ks(e),this.axis.attachAxis(this.axisGroup,this.axisGridGroup),this.scale=new Fs(this.axis),this.stop=this.scale,this.destroyFns.push((()=>this.detachLegend()))}getOrientation(){switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach((e=>e()))}attachLegend(e){e.appendChild(this.group)}detachLegend(){var e;null==(e=this.group.parent)||e.removeChild(this.group)}update(e){const t=this.data[0];if(!this.enabled||!t||!t.enabled)return this.group.visible=!1,{shrinkRect:e.clone()};const{colorRange:i}=this.normalizeColorArrays(t),o=this.updateGradientRect(e,i),a=this.updateAxis(t,o),{newShrinkRect:n,translateX:s,translateY:r}=this.getMeasurements(e,o,a);return this.updateArrow(o),this.group.visible=!0,this.group.translationX=s,this.group.translationY=r,this.latestGradientBox=o,{shrinkRect:n}}normalizeColorArrays(e){let t=e.colorDomain.slice();const i=e.colorRange.slice();if(t.length===i.length)return{colorDomain:t,colorRange:i};t.length>i.length&&i.splice(t.length);const o=i.length;return t=i.map(((e,i)=>{const[a,n]=t;return 0===i?a:i===o-1?n:a+(n-a)*i/(o-1)})),{colorDomain:t,colorRange:i}}updateGradientRect(e,t){const{preferredLength:i,thickness:o}=this.gradient,a=new Ls(0,0,0,0),n="vertical"===this.getOrientation();if(n){const t=e.height,n=i;a.x=0,a.y=0,a.width=o,a.height=Math.min(t,n)}else{const t=e.width,n=i;a.x=0,a.y=0,a.width=Math.min(t,n),a.height=o}return this.reverseOrder&&(t=t.slice().reverse()),this.gradientFill.stops=t,this.gradientFill.direction=n?"to-bottom":"to-right",this.gradientRect.x=a.x,this.gradientRect.y=a.y,this.gradientRect.width=a.width,this.gradientRect.height=a.height,a}updateAxis(e,t){const{reverseOrder:i,axis:o}=this,a="vertical"===this.getOrientation();o.position=a?"right":"bottom",o.colorDomain=i?e.colorDomain.slice().reverse():e.colorDomain,o.calculateDomain(),o.range=a?[0,t.height]:[0,t.width],o.gridLength=0,o.translation.x=t.x+(a?t.width:0),o.translation.y=t.y+(a?0:t.height);const n=o.calculateLayout().bbox;return o.update(),n}updateArrow(e){var t;const{arrow:i,axis:{label:o,scale:a}}=this,n=this.highlightManager.getActiveHighlight(),s=null==n?void 0:n.colorValue;if(null==n||null==s)return void(i.visible=!1);const r="vertical"===this.getOrientation(),l=null!=(t=o.fontSize)?t:0,h=a.convert(s);let d,c,u;r?(d=e.x-l/2,c=e.y+h,u=Math.PI/2):(d=e.x+h,c=e.y-l/2,u=Math.PI),i.fill=o.color,i.size=l,i.translationX=d,i.translationY=c,i.rotation=u,i.visible=!0}getMeasurements(e,t,i){let o,a;"vertical"===this.getOrientation()?(o=t.width+i.width,a=t.height):(o=t.width,a=t.height+i.height);const{spacing:n}=this,s=e.clone();let r,l;return"left"===this.position?(r=e.x,l=e.y+e.height/2-a/2,s.shrink(o+n,"left")):"right"===this.position?(r=e.x+e.width-o,l=e.y+e.height/2-a/2,s.shrink(o+n,"right")):"top"===this.position?(r=e.x+e.width/2-o/2,l=e.y,s.shrink(a+n,"top")):(r=e.x+e.width/2-o/2,l=e.y+e.height-a,s.shrink(a+n,"bottom")),{translateX:r,translateY:l,gradientBox:t,newShrinkRect:s}}computeBBox(){return this.group.computeBBox()}onChartHoverChange(){this.enabled&&null!=this.latestGradientBox&&this.updateArrow(this.latestGradientBox)}};Us.className="GradientLegend",f([bs(Ss)],Us.prototype,"enabled",2),f([bs(Ds)],Us.prototype,"position",2),f([bs(Ss,{optional:!0})],Us.prototype,"reverseOrder",2),f([bs(Ts)],Us.prototype,"spacing",2),f([Os("scale")],Us.prototype,"stop",2);var js={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],identifier:"gradient",instanceConstructor:Us,themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:8,label:{color:o._Theme.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,formatter:void 0},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1}},Ws=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],o=e[1],a=e[2],n=e[3];i=this.ff(i,o,a,n,t[0],7,-680876936),n=this.ff(n,i,o,a,t[1],12,-389564586),a=this.ff(a,n,i,o,t[2],17,606105819),o=this.ff(o,a,n,i,t[3],22,-1044525330),i=this.ff(i,o,a,n,t[4],7,-176418897),n=this.ff(n,i,o,a,t[5],12,1200080426),a=this.ff(a,n,i,o,t[6],17,-1473231341),o=this.ff(o,a,n,i,t[7],22,-45705983),i=this.ff(i,o,a,n,t[8],7,1770035416),n=this.ff(n,i,o,a,t[9],12,-1958414417),a=this.ff(a,n,i,o,t[10],17,-42063),o=this.ff(o,a,n,i,t[11],22,-1990404162),i=this.ff(i,o,a,n,t[12],7,1804603682),n=this.ff(n,i,o,a,t[13],12,-40341101),a=this.ff(a,n,i,o,t[14],17,-1502002290),o=this.ff(o,a,n,i,t[15],22,1236535329),i=this.gg(i,o,a,n,t[1],5,-165796510),n=this.gg(n,i,o,a,t[6],9,-1069501632),a=this.gg(a,n,i,o,t[11],14,643717713),o=this.gg(o,a,n,i,t[0],20,-373897302),i=this.gg(i,o,a,n,t[5],5,-701558691),n=this.gg(n,i,o,a,t[10],9,38016083),a=this.gg(a,n,i,o,t[15],14,-660478335),o=this.gg(o,a,n,i,t[4],20,-405537848),i=this.gg(i,o,a,n,t[9],5,568446438),n=this.gg(n,i,o,a,t[14],9,-1019803690),a=this.gg(a,n,i,o,t[3],14,-187363961),o=this.gg(o,a,n,i,t[8],20,1163531501),i=this.gg(i,o,a,n,t[13],5,-1444681467),n=this.gg(n,i,o,a,t[2],9,-51403784),a=this.gg(a,n,i,o,t[7],14,1735328473),o=this.gg(o,a,n,i,t[12],20,-1926607734),i=this.hh(i,o,a,n,t[5],4,-378558),n=this.hh(n,i,o,a,t[8],11,-2022574463),a=this.hh(a,n,i,o,t[11],16,1839030562),o=this.hh(o,a,n,i,t[14],23,-35309556),i=this.hh(i,o,a,n,t[1],4,-1530992060),n=this.hh(n,i,o,a,t[4],11,1272893353),a=this.hh(a,n,i,o,t[7],16,-155497632),o=this.hh(o,a,n,i,t[10],23,-1094730640),i=this.hh(i,o,a,n,t[13],4,681279174),n=this.hh(n,i,o,a,t[0],11,-358537222),a=this.hh(a,n,i,o,t[3],16,-722521979),o=this.hh(o,a,n,i,t[6],23,76029189),i=this.hh(i,o,a,n,t[9],4,-640364487),n=this.hh(n,i,o,a,t[12],11,-421815835),a=this.hh(a,n,i,o,t[15],16,530742520),o=this.hh(o,a,n,i,t[2],23,-995338651),i=this.ii(i,o,a,n,t[0],6,-198630844),n=this.ii(n,i,o,a,t[7],10,1126891415),a=this.ii(a,n,i,o,t[14],15,-1416354905),o=this.ii(o,a,n,i,t[5],21,-57434055),i=this.ii(i,o,a,n,t[12],6,1700485571),n=this.ii(n,i,o,a,t[3],10,-1894986606),a=this.ii(a,n,i,o,t[10],15,-1051523),o=this.ii(o,a,n,i,t[1],21,-2054922799),i=this.ii(i,o,a,n,t[8],6,1873313359),n=this.ii(n,i,o,a,t[15],10,-30611744),a=this.ii(a,n,i,o,t[6],15,-1560198380),o=this.ii(o,a,n,i,t[13],21,1309151649),i=this.ii(i,o,a,n,t[4],6,-145523070),n=this.ii(n,i,o,a,t[11],10,-1120210379),a=this.ii(a,n,i,o,t[2],15,718787259),o=this.ii(o,a,n,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(o,e[1]),e[2]=this.add32(a,e[2]),e[3]=this.add32(n,e[3])}cmn(e,t,i,o,a,n){return t=this.add32(this.add32(t,e),this.add32(o,n)),this.add32(t<<a|t>>>32-a,i)}ff(e,t,i,o,a,n,s){return this.cmn(t&i|~t&o,e,t,a,n,s)}gg(e,t,i,o,a,n,s){return this.cmn(t&o|i&~o,e,t,a,n,s)}hh(e,t,i,o,a,n,s){return this.cmn(t^i^o,e,t,a,n,s)}ii(e,t,i,o,a,n,s){return this.cmn(i^(t|~o),e,t,a,n,s)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let o;for(o=64;o<=e.length;o+=64)this.md5cycle(i,this.md5blk(e.substring(o-64,o)));e=e.substring(o-64);const a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<e.length;o++)a[o>>2]|=e.charCodeAt(o)<<(o%4<<3);if(a[o>>2]|=128<<(o%4<<3),o>55)for(this.md5cycle(i,a),o=0;o<16;o++)a[o]=0;return a[14]=8*t,this.md5cycle(i,a),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",o=0;for(;o<4;o++)i+=t[e>>8*o+4&15]+t[e>>8*o&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}};function Ys(e){return null==e||0===e.length}var Gs={"01":"GRID","02":"CHARTS","0102":"BOTH"},Hs=class e{constructor(e){this.gridContext=!1,this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new Ws,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(this.licenseKey,this.gridContext),i="AG ".concat("BOTH"===t.currentLicenseType?"Grid and ":"","Charts Enterprise"),o=void 0===t.suppliedLicenseType?"":"AG ".concat("BOTH"===t.suppliedLicenseType?"Grid and AG Charts":"GRID"===t.suppliedLicenseType?"Grid":"Charts"," Enterprise");if(t.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey(i);else if(t.expired){const i=e.getChartsReleaseDate(),a=e.formatDate(i);this.outputExpiredKey(t.expiry,a,o)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,o):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,o)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(e.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const o=i.length-32,a=i.substring(o),n=i.substring(0,o),[s,r,l]=e.extractBracketedInformation(i);return{md5:a,license:n,version:s,isTrial:r,type:l}}getLicenseDetails(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o="CHARTS";if(Ys(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:o};const a=e.getChartsReleaseDate(),{md5:n,license:s,version:r,isTrial:l,type:h}=e.extractLicenseComponents(t);let d,c,u,p=n===this.md5.md5(s)&&-1===t.indexOf("For_Trialing_ag-Grid_Only"),y=null,g=!1;if(p&&(y=e.extractExpiry(s),p=!isNaN(y.getTime()),p))switch(c=a>y,r){case"legacy":case"2":p=!1;break;case"3":Ys(h)?p=!1:(u=h,h!==Gs["02"]&&h!==Gs["0102"]?(p=!1,g=!0):l&&(d=y<new Date,c=void 0))}return p?{licenseKey:t,valid:p,expiry:e.formatDate(y),expired:c,version:r,isTrial:l,trialExpired:d,invalidLicenseTypeForCombo:i?"BOTH"!==u:void 0,incorrectLicenseType:g,currentLicenseType:o,suppliedLicenseType:u}:{licenseKey:t,valid:p,incorrectLicenseType:g,currentLicenseType:o,suppliedLicenseType:u}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!Ys(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView||window;if(!e)return"localhost";const t=e.location,{hostname:i=""}=t;return i}isForceWatermark(){var e,t;if(!this.document)return!1;const i=(null!=(t=null==(e=this.document)?void 0:e.defaultView)?t:"undefined"!=typeof window)?window:void 0;if(!i)return!1;const{pathname:o}=i.location;return!!o&&-1!==o.indexOf("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),o=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+o}static getChartsReleaseDate(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o,a,n,s,r,l,h,d="",c=0;const u=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;c<u.length;)s=i.indexOf(u.charAt(c++)),r=i.indexOf(u.charAt(c++)),l=i.indexOf(u.charAt(c++)),h=i.indexOf(u.charAt(c++)),o=s<<2|r>>4,a=(15&r)<<4|l>>2,n=(3&l)<<6|h,d+=String.fromCharCode(o),64!=l&&(d+=String.fromCharCode(a)),64!=h&&(d+=String.fromCharCode(n));return d=e.utf8_decode(d),d}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const o=e.charCodeAt(i);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}setLicenseKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.gridContext=t,this.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map((e=>e.replace("[","").replace("]","")));if(!t||0===t.length)return["legacy",!1,void 0];const i=1===t.filter((e=>"TRIAL"===e)).length,o=t.filter((e=>0===e.indexOf("v")))[0];return[o?o.replace("v",""):"legacy",i,Gs[t.filter((e=>Gs[e]))[0]]]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(e,t,i){this.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput("* Your license key is for ".concat(i," only and does not cover you for ").concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,t,i){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput("* Your trial only license for ".concat(i," expired on ").concat(e,".")," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(e," License ")),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput("* All ".concat(e," features are unlocked for trial.")," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,t,i){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput("* Your license key works with versions of ".concat(i," released before ").concat(e,".")," ","*"),this.padAndOutput("* The version you are trying to use was released on ".concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};Hs.RELEASE_INFORMATION="MTcyMTExNTk3ODAyNA==";var Xs=Hs,{createElement:Qs,injectStyle:Zs}=o._ModuleSupport;function qs(e,t){Zs("\n.ag-watermark {\n    position: absolute;\n    bottom: 20px;\n    right: 25px;\n    font-weight: bold;\n    font-family: Impact, sans-serif;\n    font-size: 19px;\n    opacity: 0.7;\n    animation: 1s ease-out 3s ag-watermark-fadeout;\n    color: #9B9B9B;\n    pointer-events: none;\n\n    &::before {\n        content: '';\n        display: block;\n        height: 40px;\n        width: 170px;\n        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);\n        background-repeat: no-repeat;\n        background-size: 170px 40px;\n    }\n\n    > span {\n        padding-left: 0.7rem;\n    }\n}\n\n@keyframes ag-watermark-fadeout {\n    from { opacity: 0.5; }\n    to { opacity: 0; }\n}\n","watermark");const i=Qs("div"),o=Qs("span");o.innerText=t,i.addEventListener("animationend",(()=>e.removeChild(i))),i.classList.add("ag-watermark"),i.appendChild(o),e.appendChild(i)}var{Group:Js,Rect:$s,Line:er,BBox:tr,Selection:ir}=o._Scene,{Logger:or}=o._Util,ar=class extends Js{constructor(){super(),this.append([new $s({tag:0}),new $s({tag:0}),new $s({tag:2}),new $s({tag:1}),new er({tag:3}),new er({tag:3}),new er({tag:4}),new er({tag:4})])}updateDatumStyles(e,t,i,o,a){const{bandwidth:n,scaledValues:{xValue:s,medianValue:r}}=e;let{minValue:l,q1Value:h,q3Value:d,maxValue:c}=e.scaledValues;(i&&!o||!i&&o)&&([c,d,h,l]=[l,h,d,c]);const u=(e,t,o,a)=>i?{y:e,x:t,width:a,height:o}:{x:e,y:t,width:o,height:a},p=(e,t,o)=>i?{y1:e,y2:t,x:o}:{x1:e,x2:t,y:o},y=(e,t,o)=>i?{x1:t,x2:o,y:e}:{x:e,y1:t,y2:o},g=(e,t,i,o)=>(({x:e,y:t,width:i,height:o}=u(e,t,i,o)),new tr(e,t,i,o)),{fill:m,fillOpacity:x,stroke:f,strokeWidth:v,strokeOpacity:S,lineDash:M,lineDashOffset:D,cap:b,whisker:N}=t,I=ir.select(this,$s),k=I.selectByTag(0),[T]=I.selectByTag(2),[A]=I.selectByTag(1),O=I.selectByTag(3),L=I.selectByTag(4);N.strokeWidth>n&&(N.strokeWidth=n);const E=u(h,s,d-h,n);T.setProperties(E),k[0].setProperties(E),k[0].setProperties({cornerRadius:a,clipBBox:g(h,s,Math.round(r-h+v/2),n)}),k[1].setProperties(E),k[1].setProperties({cornerRadius:a,clipBBox:g(Math.round(r-v/2),s,Math.floor(d-r+v/2),n)});const _=Math.max(Math.round(r-v/2),h+v),R=Math.min(Math.round(r+v/2),d-v);A.setProperties(E),A.setProperties({visible:_<R,cornerRadius:a,clipBBox:g(_,s+v,R-_,Math.max(0,n-2*v))});const C=Math.floor(s+n*(1-b.lengthRatio)/2),w=Math.ceil(s+n*(1+b.lengthRatio)/2);L[0].setProperties(y(l,C,w)),L[1].setProperties(y(c,C,w)),O[0].setProperties(p(Math.round(l+N.strokeWidth/2),h,Math.floor(s+n/2))),O[1].setProperties(p(d,Math.round(c-N.strokeWidth/2),Math.floor(s+n/2)));for(const P of k)P.setProperties({fill:m,fillOpacity:x,strokeWidth:2*v,strokeOpacity:0});A.setProperties({fill:f,fillOpacity:S,strokeWidth:0});for(const P of[...O,...L])P.setProperties(N);T.setProperties({stroke:f,strokeWidth:v,strokeOpacity:S,lineDash:M,lineDashOffset:D,cornerRadius:a,fillOpacity:0})}distanceSquared(e,t){const i=ir.selectByClass(this,$s,er);return o._Scene.nearestSquared(e,t,i).distanceSquared}get midPoint(){const e=this.datum;return void 0===e.midPoint?(or.error("BoxPlotGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):e.midPoint}},{BaseProperties:nr,AbstractBarSeriesProperties:sr,SeriesTooltip:rr,Validate:lr,COLOR_STRING:hr,FUNCTION:dr,LINE_DASH:cr,OBJECT:ur,POSITIVE_NUMBER:pr,RATIO:yr,STRING:gr,mergeDefaults:mr}=o._ModuleSupport,xr=class extends nr{constructor(){super(...arguments),this.lengthRatio=.5}};f([lr(yr)],xr.prototype,"lengthRatio",2);var fr=class extends nr{};f([lr(hr,{optional:!0})],fr.prototype,"stroke",2),f([lr(pr)],fr.prototype,"strokeWidth",2),f([lr(yr)],fr.prototype,"strokeOpacity",2),f([lr(cr,{optional:!0})],fr.prototype,"lineDash",2),f([lr(pr)],fr.prototype,"lineDashOffset",2);var vr=class extends sr{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new xr,this.whisker=new fr,this.tooltip=new rr}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:o,lineDashOffset:a}=this,n=super.toJson();return n.whisker=mr(n.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:o,lineDashOffset:a}),n}};f([lr(gr)],vr.prototype,"xKey",2),f([lr(gr)],vr.prototype,"minKey",2),f([lr(gr)],vr.prototype,"q1Key",2),f([lr(gr)],vr.prototype,"medianKey",2),f([lr(gr)],vr.prototype,"q3Key",2),f([lr(gr)],vr.prototype,"maxKey",2),f([lr(gr,{optional:!0})],vr.prototype,"xName",2),f([lr(gr,{optional:!0})],vr.prototype,"yName",2),f([lr(gr,{optional:!0})],vr.prototype,"minName",2),f([lr(gr,{optional:!0})],vr.prototype,"q1Name",2),f([lr(gr,{optional:!0})],vr.prototype,"medianName",2),f([lr(gr,{optional:!0})],vr.prototype,"q3Name",2),f([lr(gr,{optional:!0})],vr.prototype,"maxName",2),f([lr(hr,{optional:!0})],vr.prototype,"fill",2),f([lr(yr)],vr.prototype,"fillOpacity",2),f([lr(hr)],vr.prototype,"stroke",2),f([lr(pr)],vr.prototype,"strokeWidth",2),f([lr(yr)],vr.prototype,"strokeOpacity",2),f([lr(cr)],vr.prototype,"lineDash",2),f([lr(pr)],vr.prototype,"lineDashOffset",2),f([lr(pr)],vr.prototype,"cornerRadius",2),f([lr(dr,{optional:!0})],vr.prototype,"formatter",2),f([lr(ur)],vr.prototype,"cap",2),f([lr(ur)],vr.prototype,"whisker",2),f([lr(ur)],vr.prototype,"tooltip",2);var{extent:Sr,extractDecoratedProperties:Mr,fixNumericExtent:Dr,keyProperty:br,mergeDefaults:Nr,SeriesNodePickMode:Ir,SMALLEST_KEY_INTERVAL:kr,valueProperty:Tr,diff:Ar,animationValidation:Or,convertValuesToScaleByDefs:Lr,isFiniteNumber:Er,computeBarFocusBounds:_r}=o._ModuleSupport,{motion:Rr}=o._Scene,{ContinuousScale:Cr}=o._Scale,wr=class extends o._ModuleSupport.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.minKey=o.properties.minKey,this.q1Key=o.properties.q1Key,this.medianKey=o.properties.medianKey,this.q3Key=o.properties.q3Key,this.maxKey=o.properties.maxKey}},Pr=class extends o._ModuleSupport.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Ir.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},pathsPerSeries:1,hasHighlightedLabels:!0}),this.properties=new vr,this.NodeEvent=wr}processData(e){return S(this,null,(function*(){var t,i,o;if(!this.properties.isValid()||!this.visible)return;const{xKey:a,minKey:n,q1Key:s,medianKey:r,q3Key:l,maxKey:h}=this.properties,d=!this.ctx.animationManager.isSkipped(),c=null==(t=this.getCategoryAxis())?void 0:t.scale,u=null==(i=this.getValueAxis())?void 0:i.scale,{isContinuousX:p,xScaleType:y,yScaleType:g}=this.getScaleInformation({xScale:c,yScale:u}),m=[];d&&this.processedData&&m.push(Ar(this.processedData)),d&&m.push(Or());const{processedData:x}=yield this.requestDataModel(e,this.data,{props:[br(a,y,{id:"xValue"}),Tr(n,g,{id:"minValue"}),Tr(s,g,{id:"q1Value"}),Tr(r,g,{id:"medianValue"}),Tr(l,g,{id:"q3Value"}),Tr(h,g,{id:"maxValue"}),...p?[kr]:[],...m]});this.smallestDataInterval=null==(o=x.reduced)?void 0:o.smallestKeyInterval,this.animationState.transition("updateData")}))}getSeriesDomain(e){var t;const{processedData:i,dataModel:o,smallestDataInterval:a}=this;if(!i||!o)return[];if(e===this.getBarDirection()){const e=o.getDomain(this,"minValue","value",i),t=o.getDomain(this,"maxValue","value",i);return Dr([Math.min(...e),Math.max(...t)],this.getValueAxis())}const{index:n,def:s}=o.resolveProcessedDataDefById(this,"xValue"),r=i.domain.keys[n];if("key"===s.type&&"category"===s.valueType)return r;const l=this.getCategoryAxis(),h=null!=(t=Sr(r))?t:[NaN,NaN],d=Er(a)?.5*a:0,c=h[0]+-d,u=h[1]+d;return Dr([c,u],l)}createNodeData(){return S(this,null,(function*(){const{visible:e,dataModel:t}=this,i=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&i&&o))return;const{xKey:a,fill:n,fillOpacity:s,stroke:r,strokeWidth:l,strokeOpacity:h,lineDash:d,lineDashOffset:c,cap:u,whisker:p}=this.properties,y=[],g=t.resolveProcessedDataDefsByIds(this,["xValue","minValue","q1Value","medianValue","q3Value","maxValue"]),{barWidth:m,groupIndex:x}=this.updateGroupScale(i),f=Cr.is(i.scale)?-.5*m:0,{groupScale:v,processedData:S}=this,M=this.isVertical(),D={itemId:a,nodeData:y,labelData:[],scales:this.calculateScaling(),visible:this.visible};return e?(null==S||S.data.forEach((e=>{let{datum:S,keys:D,values:b}=e;const{xValue:N,minValue:I,q1Value:k,medianValue:T,q3Value:A,maxValue:O}=t.resolveProcessedDataDefsValues(g,{keys:D,values:b});if([I,k,T,A,O].some((e=>"number"!==typeof e))||I>k||k>T||T>A||A>O)return;const L=Lr({defs:g,values:{xValue:N,minValue:I,q1Value:k,medianValue:T,q3Value:A,maxValue:O},xAxis:i,yAxis:o});L.xValue+=Math.round(v.convert(String(x)))+f;const E=Math.round(m),_=Math.abs(L.q3Value-L.q1Value),R=L.xValue+E/2,C=Math.min(L.q3Value,L.q1Value)+_/2,w={x:M?R:C,y:M?C:R},P=M?E:_,z=M?_:E;y.push({series:this,itemId:N,datum:S,xKey:a,bandwidth:E,scaledValues:L,cap:u,whisker:p,fill:n,fillOpacity:s,stroke:r,strokeWidth:l,strokeOpacity:h,lineDash:d,lineDashOffset:c,midPoint:w,focusRect:{x:w.x-P/2,y:w.y-z/2,width:P,height:z}})})),D):D}))}getLegendData(e){var t;const{id:i,data:o}=this,{xKey:a,yName:n,fill:s,fillOpacity:r,stroke:l,strokeWidth:h,strokeOpacity:d,showInLegend:c,legendItemName:u,visible:p}=this.properties;return c&&(null==o?void 0:o.length)&&a&&"category"===e?[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:p,label:{text:null!=(t=null!=u?u:n)?t:i},marker:{fill:s,fillOpacity:r,stroke:l,strokeOpacity:d,strokeWidth:h},legendItemName:u}]:[]}getTooltipHtml(e){const{xKey:t,minKey:i,q1Key:a,medianKey:n,q3Key:s,maxKey:r,xName:l,yName:h,minName:d,q1Name:c,medianName:u,q3Name:p,maxName:y,tooltip:g,fill:m}=this.properties,{datum:x,itemId:f}=e,v=this.getCategoryAxis(),S=this.getValueAxis();if(!v||!S||!this.properties.isValid())return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const M=o._Util.sanitizeHtml(h),D=[[t,l,v],[i,d,S],[a,c,S],[n,u,S],[s,p,S],[r,y,S]].map((e=>{let[t,i,a]=e;return o._Util.sanitizeHtml("".concat(null!=i?i:t,": ").concat(a.formatDatum(x[t])))})).join(M?"<br/>":", "),{fill:b}=this.getFormattedStyles(e);return g.toTooltipHtml({title:M,content:D,backgroundColor:m},{seriesId:this.id,itemId:f,datum:x,fill:m,xKey:t,minKey:i,q1Key:a,medianKey:n,q3Key:s,maxKey:r,xName:l,minName:d,q1Name:c,medianName:u,q3Name:p,maxName:y,yName:h,title:M,color:null!=m?m:b})}animateEmptyUpdateReady(e){let{datumSelection:t}=e;const i=this.isVertical(),{from:o,to:a}=function(e){return{from:e?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}}}(i);Rr.resetMotion([t],function(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}(i)),Rr.staticFromToMotion(this.id,"datums",this.ctx.animationManager,[t],o,a,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){return S(this,null,(function*(){var t;const i=null!=(t=e.nodeData)?t:[];return e.datumSelection.update(i)}))}updateDatumNodes(e){return S(this,arguments,(function(e){var t=this;let{datumSelection:i,isHighlight:o}=e;return function*(){var e;const a=t.isVertical(),n=null==(e=t.getValueAxis())?void 0:e.isReversed(),{cornerRadius:s}=t.properties;i.each(((e,i)=>{let r=t.getFormattedStyles(i,o);o&&(r=Nr(t.properties.highlightStyle.item,r));const{stroke:l,strokeWidth:h,strokeOpacity:d,lineDash:c,lineDashOffset:u}=r;r.whisker=Nr(r.whisker,{stroke:l,strokeWidth:h,strokeOpacity:d,lineDash:c,lineDashOffset:u}),e.updateDatumStyles(i,r,a,n,s)}))}()}))}updateLabelNodes(e){return S(this,null,(function*(){}))}updateLabelSelection(e){return S(this,null,(function*(){const{labelData:t,labelSelection:i}=e;return i.update(t)}))}nodeFactory(){return new ar}getFormattedStyles(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{id:i,ctx:{callbackCache:o}}=this,{xKey:a,minKey:n,q1Key:s,medianKey:r,q3Key:l,maxKey:h,formatter:d}=this.properties,{datum:c,fill:u,fillOpacity:p,stroke:y,strokeWidth:x,strokeOpacity:f,lineDash:v,lineDashOffset:S,cap:M,whisker:D}=e,b={fill:u,fillOpacity:p,stroke:y,strokeWidth:x,strokeOpacity:f,lineDash:v,lineDashOffset:S,cap:Mr(M),whisker:Mr(D)};if(d){const e=o.call(d,m(g({datum:c,seriesId:i,highlighted:t},b),{xKey:a,minKey:n,q1Key:s,medianKey:r,q3Key:l,maxKey:h}));if(e)return Nr(e,b)}return b}computeFocusBounds(e){let{datumIndex:t,seriesRect:i}=e;var o;return _r(null==(o=this.contextNodeData)?void 0:o.nodeData[t].focusRect,this.contentGroup,i)}};Pr.className="BoxPlotSeries",Pr.type="box-plot";var zr={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:2},axes:{[o._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[o._Theme.CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},Kr={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",instanceConstructor:Pr,defaultAxes:[{type:o._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:o._Theme.POSITION.LEFT},{type:o._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:o._Theme.POSITION.BOTTOM}],themeTemplate:zr,groupable:!0,paletteFactory:e=>{let{takeColors:t,userPalette:i,themeTemplateParameters:a}=e;var n;const s=a.properties.get(o._Theme.DEFAULT_BACKGROUND_COLOUR),r=null!=(n=Array.isArray(s)?s[0]:s)?n:"white",{fills:[l],strokes:[h]}=t(1);return{fill:i?l:o._Util.Color.interpolate(l,r)(.7),stroke:h}},swapDefaultAxesCondition:e=>{let{direction:t}=e;return"horizontal"===t}},{AbstractBarSeriesProperties:Vr,BaseProperties:Br,PropertiesArray:Fr,SeriesTooltip:Ur,Validate:jr,ARRAY:Wr,COLOR_STRING:Yr,LINE_DASH:Gr,OBJECT:Hr,POSITIVE_NUMBER:Xr,RATIO:Qr,STRING:Zr}=o._ModuleSupport,qr=class extends Br{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.lengthRatio=.75}};f([jr(Yr)],qr.prototype,"fill",2),f([jr(Qr)],qr.prototype,"fillOpacity",2),f([jr(Yr)],qr.prototype,"stroke",2),f([jr(Xr)],qr.prototype,"strokeWidth",2),f([jr(Qr)],qr.prototype,"strokeOpacity",2),f([jr(Gr)],qr.prototype,"lineDash",2),f([jr(Xr)],qr.prototype,"lineDashOffset",2),f([jr(Qr)],qr.prototype,"lengthRatio",2);var Jr=class extends Br{};f([jr(Xr,{optional:!0})],Jr.prototype,"max",2);var $r=class extends Br{constructor(){super(...arguments),this.color="lightgrey"}};f([jr(Yr)],$r.prototype,"color",2),f([jr(Xr,{optional:!0})],$r.prototype,"stop",2);var el=class extends Vr{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.widthRatio=.5,this.colorRanges=new Fr($r),this.target=new qr,this.scale=new Jr,this.tooltip=new Ur,this.backgroundFill="white"}};f([jr(Zr)],el.prototype,"valueKey",2),f([jr(Zr,{optional:!0})],el.prototype,"valueName",2),f([jr(Zr,{optional:!0})],el.prototype,"targetKey",2),f([jr(Zr,{optional:!0})],el.prototype,"targetName",2),f([jr(Yr)],el.prototype,"fill",2),f([jr(Qr)],el.prototype,"fillOpacity",2),f([jr(Yr)],el.prototype,"stroke",2),f([jr(Xr)],el.prototype,"strokeWidth",2),f([jr(Qr)],el.prototype,"strokeOpacity",2),f([jr(Gr)],el.prototype,"lineDash",2),f([jr(Xr)],el.prototype,"lineDashOffset",2),f([jr(Qr)],el.prototype,"widthRatio",2),f([jr(Wr.restrict({minLength:0}))],el.prototype,"colorRanges",2),f([jr(Hr)],el.prototype,"target",2),f([jr(Hr)],el.prototype,"scale",2),f([jr(Hr)],el.prototype,"tooltip",2),f([jr(Yr)],el.prototype,"backgroundFill",2);var{animationValidation:tl,collapsedStartingBarPosition:il,diff:ol,keyProperty:al,partialAssign:nl,prepareBarAnimationFunctions:sl,resetBarSelectionsFn:rl,seriesLabelFadeInAnimation:ll,valueProperty:hl,createDatumId:dl,computeBarFocusBounds:cl}=o._ModuleSupport,{fromToMotion:ul}=o._Scene.motion,{sanitizeHtml:pl}=o._Util,yl=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],gl=class e extends o._ModuleSupport.AbstractBarSeries{constructor(e){super({moduleCtx:e,directionKeys:{y:["targetKey","valueKey"]},directionNames:{y:["targetName","valueName"]},pickModes:[o._ModuleSupport.SeriesNodePickMode.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,animationResetFns:{datum:rl}}),this.properties=new el,this.normalizedColorRanges=[],this.colorRangesGroup=new o._Scene.Group({name:"".concat(this.id,"-colorRanges")}),this.colorRangesSelection=o._Scene.Selection.select(this.colorRangesGroup,o._Scene.Rect,!1),this.rootGroup.append(this.colorRangesGroup),this.targetLinesSelection=o._Scene.Selection.select(this.annotationGroup,o._Scene.Line,!1)}destroy(){this.rootGroup.removeChild(this.colorRangesGroup),super.destroy()}processData(e){return S(this,null,(function*(){var t,i;if(!this.properties.isValid()||!this.data||!this.visible)return;const{valueKey:o,targetKey:a}=this.properties,n=null==(t=this.getCategoryAxis())?void 0:t.scale,s=null==(i=this.getValueAxis())?void 0:i.scale,{xScaleType:r,yScaleType:l}=this.getScaleInformation({xScale:n,yScale:s}),h=[];void 0!==a&&h.push(hl(a,l,{id:"target"})),this.ctx.animationManager.isSkipped()||(void 0!==this.processedData&&h.push(ol(this.processedData)),h.push(tl())),yield this.requestDataModel(e,this.data.slice(0,1),{props:[al(o,r,{id:"xValue"}),hl(o,l,{id:"value"}),...h],groupByKeys:!0}),this.animationState.transition("updateData")}))}getBandScalePadding(){return{inner:0,outer:0}}getMaxValue(){var e,t;return Math.max(...null!=(t=null==(e=this.getValueAxis())?void 0:e.dataDomain.domain)?t:[0])}getSeriesDomain(e){var t,i;const{dataModel:o,processedData:a}=this;if(!o||!a)return[];const{valueKey:n,targetKey:s,valueName:r,scale:l}=this.properties;if(e===this.getCategoryDirection())return[null!=r?r:n];if(e==(null==(t=this.getValueAxis())?void 0:t.direction)){const e=o.getDomain(this,"value","value",a),t=void 0===s?[]:o.getDomain(this,"target","value",a);return[0,null!=(i=l.max)?i:Math.max(...e,...t)]}throw new Error("unknown direction ".concat(e))}getKeys(e){return e===this.getBarDirection()?[this.properties.valueKey]:super.getKeys(e)}createNodeData(){return S(this,null,(function*(){var e,t,i,a;const{dataModel:n,processedData:s}=this,{valueKey:r,targetKey:l,widthRatio:h,target:{lengthRatio:d}}=this.properties,c=null==(e=this.getCategoryAxis())?void 0:e.scale,u=null==(t=this.getValueAxis())?void 0:t.scale;if(!r||!n||!s||!c||!u)return;if(void 0===h||void 0===d)return;const p=null!=(i=c.bandwidth)?i:NaN,y=this.getMaxValue(),x=n.resolveProcessedDataIndexById(this,"value"),f=void 0===l?NaN:n.resolveProcessedDataIndexById(this,"target"),v={itemId:r,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return v;for(const{datum:D,values:b}of s.data){if(!Array.isArray(D)||D.length<1)continue;b[0][x]<0&&o._Util.Logger.warnOnce("negative values are not supported, clipping to 0.");const e=null!=(a=this.properties.valueName)?a:this.properties.valueKey,t=Math.min(y,Math.max(0,b[0][x])),i=u.convert(t),n=h*p,s=u.convert(0),l=this.getBarDirection()===o._ModuleSupport.ChartAxisDirection.X,c={x:p*(1-h)/2,y:Math.min(i,s),width:n,height:Math.abs(s-i)};let S;if(l&&([c.x,c.y,c.width,c.height]=[c.y,c.x,c.height,c.width]),b[0][f]<0&&o._Util.Logger.warnOnce("negative targets are not supported, ignoring."),this.properties.targetKey&&b[0][f]>=0){const e=d*p,t=Math.min(y,b[0][f]);if(!isNaN(t)&&void 0!==t){const i=u.convert(t);let o=p*(1-d)/2,a=o+e,[n,s]=[i,i];l&&([o,a,n,s]=[n,s,o,a]),S={value:t,x1:o,x2:a,y1:n,y2:s}}}const M=m(g({series:this,datum:D[0],xKey:r,xValue:e,yKey:r,yValue:t,cumulativeValue:t,target:S},c),{midPoint:{x:c.x+c.width/2,y:c.y+c.height/2},opacity:1});v.nodeData.push(M)}const S=[...this.getColorRanges()].sort(((e,t)=>{var i,o;return(null!=(i=e.stop)?i:y)-(null!=(o=t.stop)?o:y)}));let M=0;return this.normalizedColorRanges=S.map((e=>{var t;const i=Math.min(y,null!=(t=e.stop)?t:1/0),o={color:e.color,start:M,stop:i};return M=i,o})),v}))}getColorRanges(){const{colorRanges:e,fill:t,backgroundFill:i}=this.properties;if(void 0!==e&&e.length>0)return e;const a=new $r;return a.color=o._Util.Color.interpolate(t,i)(.7),[a]}getLegendData(e){return[]}getTooltipHtml(e){const{valueKey:t,valueName:i,targetKey:a,targetName:n}=this.properties,s=this.getValueAxis(),{yValue:r,target:{value:l}={value:void 0},datum:h,itemId:d}=e;if(void 0===t||void 0===r||void 0===s)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const c=(e,t,i)=>{const o=pl(null!=t?t:e),a=pl(s.formatDatum(i));return"<b>".concat(o,"</b>: ").concat(a)},u=void 0,p=void 0===a||void 0===l?c(t,i,r):"".concat(c(t,i,r),"<br/>").concat(c(a,n,l));return this.properties.tooltip.toTooltipHtml({title:u,content:p,backgroundColor:this.properties.fill},{datum:h,itemId:d,title:u,seriesId:this.id,valueKey:t,valueName:i,targetKey:a,targetName:n,color:void 0})}isLabelEnabled(){return!1}nodeFactory(){return new o._Scene.Rect}updateDatumSelection(e){return S(this,null,(function*(){return this.targetLinesSelection.update(e.nodeData,void 0,void 0),e.datumSelection.update(e.nodeData,void 0,void 0)}))}updateDatumNodes(e){return S(this,null,(function*(){for(const{node:t}of e.datumSelection){const e=this.properties;nl(yl,t,e)}for(const{node:e,datum:t}of this.targetLinesSelection)if(void 0===t.target)e.visible=!1;else{const i=this.properties.target;nl(["x1","x2","y1","y2"],e,t.target),nl(yl,e,i)}}))}updateColorRanges(){return S(this,null,(function*(){const e=this.getValueAxis(),t=this.getCategoryAxis();if(!e||!t)return;const[i,a]=[0,Math.max(...t.scale.range)],n=this.getBarDirection()===o._ModuleSupport.ChartAxisDirection.Y?(t,o)=>{t.x=i,t.y=e.scale.convert(o.stop),t.height=e.scale.convert(o.start)-t.y,t.width=a}:(t,o)=>{t.x=e.scale.convert(o.start),t.y=i,t.height=a,t.width=e.scale.convert(o.stop)-t.x};this.colorRangesSelection.update(this.normalizedColorRanges);for(const{node:o,datum:s}of this.colorRangesSelection)n(o,s),o.fill=s.color}))}updateNodes(t,i,o){return S(this,null,(function*(){yield v(e.prototype,this,"updateNodes").call(this,t,i,o),yield this.updateColorRanges()}))}updateLabelSelection(e){return S(this,null,(function*(){return e.labelSelection}))}updateLabelNodes(e){return S(this,null,(function*(){}))}animateEmptyUpdateReady(e){const{datumSelection:t,annotationSelections:i}=e,o=sl(il(this.isVertical(),this.axes,"normal"));ul(this.id,"nodes",this.ctx.animationManager,[t],o),ll(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(e){var t,i,o;const{datumSelection:a,annotationSelections:n}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const s=null==(i=null==(t=this.processedData)?void 0:t.reduced)?void 0:i.diff,r=sl(il(this.isVertical(),this.axes,"normal"));ul(this.id,"nodes",this.ctx.animationManager,[a],r,((e,t)=>dl(t.xValue)),s);(null==(o=null==s?void 0:s.changed)||o)&&ll(this,"annotations",this.ctx.animationManager,...n)}computeFocusBounds(e){let{datumIndex:t,seriesRect:i}=e;var o;return cl(null==(o=this.contextNodeData)?void 0:o.nodeData[t],this.contentGroup,i)}},ml={series:{direction:"vertical",strokeWidth:0,strokeOpacity:1,fillOpacity:1,widthRatio:.5,target:{strokeWidth:3,strokeOpacity:1,lengthRatio:.75}},axes:{[o._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{nice:!1,crosshair:{enabled:!1}}}},xl={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bullet",solo:!0,instanceConstructor:gl,defaultAxes:[{type:o._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:o._Theme.POSITION.LEFT},{type:o._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:o._Theme.POSITION.BOTTOM}],themeTemplate:ml,swapDefaultAxesCondition:e=>"horizontal"===(null==e?void 0:e.direction),paletteFactory:e=>{let{takeColors:t,colorsCount:i,themeTemplateParameters:a}=e;var n;const{properties:s}=a,{fills:[r],strokes:[l]}=t(i),h=a.properties.get(o._Theme.DEFAULT_BACKGROUND_COLOUR),d=null!=(n=Array.isArray(h)?h[0]:h)?n:"white";return{fill:r,stroke:l,target:{stroke:s.get(o._Theme.DEFAULT_CROSS_LINES_COLOUR)},backgroundFill:d}}},{SceneChangeDetection:fl,BBox:vl,RedrawType:Sl}=o._Scene,Ml=class extends o._Scene.Group{constructor(){super(...arguments),this.x=0,this.y=0,this.yBottom=0,this.yHigh=0,this.yLow=0,this.width=0,this.height=0}distanceSquared(e,t){const i=o._Scene.Selection.selectByClass(this,o._Scene.Rect,o._Scene.Line);return o._Scene.nearestSquared(e,t,i).distanceSquared}get midPoint(){const e=this.datum;return void 0===e.midPoint?(o._Util.Logger.error("CandlestickBaseGroup.datum.midPoint is undefined"),{x:NaN,y:NaN}):e.midPoint}render(e){this.updateCoordinates(),super.render(e)}};f([fl({redraw:Sl.MAJOR})],Ml.prototype,"x",2),f([fl({redraw:Sl.MAJOR})],Ml.prototype,"y",2),f([fl({redraw:Sl.MAJOR})],Ml.prototype,"yBottom",2),f([fl({redraw:Sl.MAJOR})],Ml.prototype,"yHigh",2),f([fl({redraw:Sl.MAJOR})],Ml.prototype,"yLow",2),f([fl({redraw:Sl.MAJOR})],Ml.prototype,"width",2),f([fl({redraw:Sl.MAJOR})],Ml.prototype,"height",2);var Dl=class extends Ml{constructor(){super(),this.append([new o._Scene.Rect({tag:0}),new o._Scene.Line({tag:1}),new o._Scene.Line({tag:2})])}updateCoordinates(){const{x:e,y:t,yBottom:i,yHigh:a,yLow:n,width:s,height:r}=this,l=o._Scene.Selection.select(this,o._Scene.Rect),[h]=l.selectByTag(0),[d]=l.selectByTag(1),[c]=l.selectByTag(2);if(0===s||0===r)return h.visible=!1,d.visible=!1,void(c.visible=!1);h.visible=!0,d.visible=!0,c.visible=!0,h.setProperties({x:e,y:t,width:s,height:r,crisp:!0,clipBBox:new vl(e,t,s,r)});const u=s/2;d.setProperties({y1:Math.round(n+d.strokeWidth/2),y2:i,x:e+u}),c.setProperties({y1:Math.round(a+c.strokeWidth/2),y2:t,x:e+u})}updateDatumStyles(e,t){const{bandwidth:i}=e,{fill:a,fillOpacity:n,stroke:s,strokeWidth:r,strokeOpacity:l,lineDash:h,lineDashOffset:d,wick:c={},cornerRadius:u}=t;null!=c.strokeWidth||(c.strokeWidth=1);const p=o._Scene.Selection.select(this,o._Scene.Rect),[y]=p.selectByTag(0),[g]=p.selectByTag(1),[m]=p.selectByTag(2);c.strokeWidth>i&&(c.strokeWidth=i),y.setProperties({fill:a,fillOpacity:n,strokeWidth:r,strokeOpacity:l,stroke:s,lineDash:h,lineDashOffset:d,cornerRadius:u}),g.setProperties(c),m.setProperties(c)}},{computeBarFocusBounds:bl,NODE_UPDATE_STATE_TO_PHASE_MAPPING:Nl}=o._ModuleSupport;function Il(e,t){return Tl(t)}function kl(e){return{toFn:(e,t,i)=>{if("removed"===i){const{x:e,yLow:i,yHigh:o,width:a}=Tl(t),n="up"===t.itemId?i:o;return{x:e,y:n,yBottom:n,yHigh:n,yLow:n,width:a,height:0}}return Tl(t)},fromFn:(t,i,o)=>{const a=e?"initial":Nl[o];if("unknown"===o||"added"===o&&null!=i){const{x:e,y:t,yLow:n,yHigh:s,width:r,height:l}=Tl(i);let h="up"===i.itemId?n:s;return"unknown"===o&&(h=t+l/2),{x:e,y:h,yBottom:h,yHigh:h,yLow:h,width:r,height:0,phase:a}}return{x:t.x,y:t.y,yBottom:t.yBottom,yHigh:t.yHigh,yLow:t.yLow,width:t.width,height:t.height,phase:a}}}}function Tl(e){const{bandwidth:t,scaledValues:{xValue:i,openValue:o,closeValue:a,highValue:n,lowValue:s}}=e,r=Math.min(o,a),l=isNaN(o)?a:Math.max(o,a);return{x:i,y:r,yBottom:l,yHigh:Math.min(n,s),yLow:Math.max(n,s),width:t,height:Math.max(l-r,.001)}}function Al(e,t){var i;const o=null==(i=e.getNodeData())?void 0:i.at(t.datumIndex),a=o?{x:o.scaledValues.xValue,y:o.scaledValues.highValue,width:o.bandwidth,height:o.scaledValues.lowValue-o.scaledValues.highValue}:void 0;return bl(a,e.contentGroup,t.seriesRect)}var{motion:Ol}=o._Scene,{extent:Ll,fixNumericExtent:El,keyProperty:_l,SeriesNodePickMode:Rl,SMALLEST_KEY_INTERVAL:Cl,valueProperty:wl,diff:Pl,animationValidation:zl,convertValuesToScaleByDefs:Kl,mergeDefaults:Vl,isFiniteNumber:Bl}=o._ModuleSupport,{sanitizeHtml:Fl,Logger:Ul}=o._Util,{ContinuousScale:jl}=o._Scale,Wl=class extends o._ModuleSupport.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.openKey=o.properties.openKey,this.closeKey=o.properties.closeKey,this.highKey=o.properties.highKey,this.lowKey=o.properties.lowKey}},Yl=class extends o._ModuleSupport.AbstractBarSeries{constructor(e,t){super({moduleCtx:e,pickModes:[Rl.NEAREST_BY_MAIN_AXIS_FIRST,Rl.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},pathsPerSeries:1,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:t}}),this.NodeEvent=Wl}animateEmptyUpdateReady(e){let{datumSelection:t}=e;const i=kl(!0);Ol.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],i)}animateWaitingUpdateReady(e){let{datumSelection:t}=e;var i;const{processedData:o}=this,a=null==(i=null==o?void 0:o.reduced)?void 0:i.diff,n=kl(!1);Ol.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n,((e,t)=>String(t.xValue)),a)}processData(e){return S(this,null,(function*(){var t,i,o;if(!this.properties.isValid()||!this.visible)return;const{xKey:a,openKey:n,closeKey:s,highKey:r,lowKey:l}=this.properties,h=!this.ctx.animationManager.isSkipped(),d=null==(t=this.getCategoryAxis())?void 0:t.scale,c=null==(i=this.getValueAxis())?void 0:i.scale,{isContinuousX:u,xScaleType:p,yScaleType:y}=this.getScaleInformation({xScale:d,yScale:c}),g=[];h&&(this.processedData&&g.push(Pl(this.processedData)),g.push(zl())),n&&g.push(wl(n,y,{id:"openValue",invalidValue:void 0,missingValue:void 0}));const{processedData:m}=yield this.requestDataModel(e,this.data,{props:[_l(a,p,{id:"xValue"}),wl(s,y,{id:"closeValue"}),wl(r,y,{id:"highValue"}),wl(l,y,{id:"lowValue"}),...u?[Cl]:[],...g]});this.smallestDataInterval=null==(o=m.reduced)?void 0:o.smallestKeyInterval,this.animationState.transition("updateData")}))}getSeriesDomain(e){var t;const{processedData:i,dataModel:o,smallestDataInterval:a}=this;if(!i||!o)return[];const{openKey:n}=this.properties;if(e===this.getBarDirection()){const e=o.getDomain(this,"lowValue","value",i),t=o.getDomain(this,"highValue","value",i),a=n?o.getDomain(this,"openValue","value",i):[],s=o.getDomain(this,"closeValue","value",i);return El([Math.min(...e,...t,...a,...s),Math.max(...t,...e,...a,...s)],this.getValueAxis())}const{index:s,def:r}=o.resolveProcessedDataDefById(this,"xValue"),l=i.domain.keys[s];if("key"===r.type&&"category"===r.valueType)return l;const h=this.getCategoryAxis(),d=null!=(t=Ll(l))?t:[NaN,NaN],c=Bl(a)?a:0,u=d[0]+-c,p=d[1]+c;return El([u,p],h)}createBaseNodeData(){const{visible:e,dataModel:t}=this,i=this.getCategoryAxis(),o=this.getValueAxis();if(!(t&&i&&o))return;const{xKey:a,openKey:n,closeKey:s,highKey:r,lowKey:l}=this.properties,h=[],d=["xValue","closeValue","highValue","lowValue"];n&&d.push("openValue");const c=t.resolveProcessedDataDefsByIds(this,d),{barWidth:u,groupIndex:p}=this.updateGroupScale(i),y=jl.is(i.scale)?-.5*u:0,{groupScale:g,processedData:m}=this,x={itemId:a,nodeData:h,labelData:[],scales:this.calculateScaling(),visible:this.visible};return e?(null==m||m.data.forEach((e=>{let{datum:d,keys:m,values:x}=e;const{xValue:f,openValue:v,closeValue:S,highValue:M,lowValue:D}=t.resolveProcessedDataDefsValues(c,{keys:m,values:x}),b=void 0!==v,N=void 0!==M&&(!b||M>=v)&&M>=S;if(!(void 0!==D&&(!b||D<=v)&&D<=S))return void Ul.warnOnce("invalid low value for key [".concat(l,"] in data element, low value cannot be higher than datum open or close values"));if(!N)return void Ul.warnOnce("invalid high value for key [".concat(r,"] in data element, high value cannot be lower than datum open or close values."));const I=Kl({defs:c,values:{xValue:f,openValue:v,closeValue:S,highValue:M,lowValue:D},xAxis:i,yAxis:o});I.xValue+=Math.round(g.convert(String(p)))+y;const k=!b||S>v,T=this.getSeriesItemType(k),[A,O]=b?[I.openValue,I.closeValue]:[I.lowValue,I.highValue],L=Math.min(A,O),E=Math.max(A,O)-L,_={x:I.xValue+Math.round(u)/2,y:L+E/2};h.push({series:this,itemId:T,datum:d,xKey:a,xValue:f,openKey:n,closeKey:s,highKey:r,lowKey:l,openValue:v,closeValue:S,highValue:M,lowValue:D,bandwidth:Math.round(u),scaledValues:I,midPoint:_,aggregatedValue:S})})),x):x}getSeriesItemType(e){return e?"up":"down"}getItemConfig(e){return this.properties.item[e]}getLegendData(e){return[]}getTooltipHtml(e){const{xKey:t,openKey:i,closeKey:a,highKey:n,lowKey:s,xName:r,yName:l,openName:h,closeName:d,highName:c,lowName:u,tooltip:p}=this.properties,{datum:y,itemId:x}=e,f=this.getCategoryAxis(),v=this.getValueAxis();if(!f||!v||!this.properties.isValid())return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const S=Fl(l),M=[[t,r,f],[n,c,v],[s,u,v],[a,d,v]];i&&M.splice(1,0,[i,h,v]);const D=M.map((e=>{let[t,i,o]=e;return Fl("".concat(null!=i?i:(a=t,a.charAt(0).toUpperCase()+a.substring(1)),": ").concat(o.formatDatum(y[t])));var a})).join("<br/>"),b=this.getFormattedStyles(e);return p.toTooltipHtml({title:S,content:D,backgroundColor:b.stroke},m(g({seriesId:this.id,datum:y},b),{xKey:t,openKey:null!=i?i:"",closeKey:a,highKey:n,lowKey:s,xName:r,yName:l,openName:h,closeName:d,highName:c,lowName:u,title:S,color:b.fill,fill:b.fill,itemId:x}))}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(e){return S(this,null,(function*(){var t;const i=null!=(t=e.nodeData)?t:[];return e.datumSelection.update(i)}))}updateDatumNodes(e){return S(this,arguments,(function(e){var t=this;let{datumSelection:i,isHighlight:o}=e;return function*(){i.each(((e,i)=>{const a=t.getActiveStyles(i,o);e.updateDatumStyles(i,a)}))}()}))}updateLabelNodes(e){return S(this,null,(function*(){}))}updateLabelSelection(e){return S(this,null,(function*(){const{labelData:t,labelSelection:i}=e;return i.update(t)}))}getFormattedStyles(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{id:i,ctx:{callbackCache:o}}=this,{xKey:a,openKey:n="",closeKey:s,highKey:r,lowKey:l,formatter:h}=this.properties;if(h){const d=o.call(h,this.getFormatterParams(m(g({},e),{seriesId:i,highlighted:t,xKey:a,openKey:n,closeKey:s,highKey:r,lowKey:l})));if(d)return Vl(d,this.getSeriesStyles(e))}return this.getSeriesStyles(e)}},{BaseProperties:Gl,AbstractBarSeriesProperties:Hl,SeriesTooltip:Xl,Validate:Ql,COLOR_STRING:Zl,FUNCTION:ql,LINE_DASH:Jl,OBJECT:$l,POSITIVE_NUMBER:eh,RATIO:th,STRING:ih}=o._ModuleSupport,oh=class extends Gl{};f([Ql(Zl,{optional:!0})],oh.prototype,"stroke",2),f([Ql(eh)],oh.prototype,"strokeWidth",2),f([Ql(th)],oh.prototype,"strokeOpacity",2),f([Ql(Jl,{optional:!0})],oh.prototype,"lineDash",2),f([Ql(eh)],oh.prototype,"lineDashOffset",2);var ah=class extends Gl{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new oh}};f([Ql(Zl,{optional:!0})],ah.prototype,"fill",2),f([Ql(th)],ah.prototype,"fillOpacity",2),f([Ql(Zl)],ah.prototype,"stroke",2),f([Ql(eh)],ah.prototype,"strokeWidth",2),f([Ql(th)],ah.prototype,"strokeOpacity",2),f([Ql(Jl)],ah.prototype,"lineDash",2),f([Ql(eh)],ah.prototype,"lineDashOffset",2),f([Ql(eh)],ah.prototype,"cornerRadius",2),f([Ql(ql,{optional:!0})],ah.prototype,"formatter",2),f([Ql($l)],ah.prototype,"wick",2);var nh=class extends Gl{constructor(){super(...arguments),this.up=new ah,this.down=new ah}};f([Ql($l)],nh.prototype,"up",2),f([Ql($l)],nh.prototype,"down",2);var sh=class extends Hl{constructor(e,t){super(),this.tooltip=new Xl,this.item=e,this.formatter=t}};f([Ql(ih)],sh.prototype,"xKey",2),f([Ql(ih)],sh.prototype,"openKey",2),f([Ql(ih)],sh.prototype,"closeKey",2),f([Ql(ih)],sh.prototype,"highKey",2),f([Ql(ih)],sh.prototype,"lowKey",2),f([Ql(ih,{optional:!0})],sh.prototype,"xName",2),f([Ql(ih,{optional:!0})],sh.prototype,"yName",2),f([Ql(ih,{optional:!0})],sh.prototype,"openName",2),f([Ql(ih,{optional:!0})],sh.prototype,"closeName",2),f([Ql(ih,{optional:!0})],sh.prototype,"highName",2),f([Ql(ih,{optional:!0})],sh.prototype,"lowName",2),f([Ql($l)],sh.prototype,"tooltip",2),f([Ql($l)],sh.prototype,"item",2),f([Ql(ql,{optional:!0})],sh.prototype,"formatter",2);var rh=class extends sh{constructor(){super(new nh)}};f([Ql(ih)],rh.prototype,"openKey",2);var{extractDecoratedProperties:lh,mergeDefaults:hh}=o._ModuleSupport,dh=class extends Yl{constructor(e){super(e,Il),this.properties=new rh}createNodeData(){return S(this,null,(function*(){const e=this.createBaseNodeData();if(!e)return;const t=e.nodeData.map((e=>{const{fill:t,fillOpacity:i,stroke:o,strokeWidth:a,strokeOpacity:n,lineDash:s,lineDashOffset:r,wick:l,cornerRadius:h}=this.getItemConfig(e.itemId);return m(g({},e),{fill:t,fillOpacity:i,stroke:o,strokeWidth:a,strokeOpacity:n,lineDash:s,lineDashOffset:r,wick:l,cornerRadius:h})}));return m(g({},e),{nodeData:t})}))}nodeFactory(){return new Dl}getSeriesStyles(e){const{fill:t,fillOpacity:i,stroke:o,strokeWidth:a,strokeOpacity:n,lineDash:s,lineDashOffset:r,wick:l,cornerRadius:h}=e;return{fill:t,fillOpacity:i,stroke:o,strokeWidth:a,strokeOpacity:n,lineDash:s,lineDashOffset:r,wick:lh(l),cornerRadius:h}}getActiveStyles(e,t){let i=this.getFormattedStyles(e,t);t&&(i=hh(this.properties.highlightStyle.item,i));const{stroke:o,strokeWidth:a,strokeOpacity:n,lineDash:s,lineDashOffset:r}=i;return i.wick=hh(i.wick,{stroke:o,strokeWidth:a,strokeOpacity:n,lineDash:s,lineDashOffset:r}),i}getFormatterParams(e){return e}computeFocusBounds(e){return Al(this,e)}};dh.className="CandleStickSeries",dh.type="candlestick";var ch={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,highlightStyle:{item:{strokeWidth:3}},direction:"vertical"},animation:{enabled:!1},axes:{[o._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[o._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},uh={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",instanceConstructor:dh,defaultAxes:[{type:o._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:o._Theme.POSITION.LEFT},{type:o._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:o._Theme.POSITION.BOTTOM}],themeTemplate:ch,groupable:!1,paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:a,themeTemplateParameters:n}=e;const{properties:s}=n,{fills:r,strokes:l}=t(i),{fills:h,strokes:d}=s.get(o._Theme.DEFAULT_COLOURS);return{item:{up:{fill:a?"transparent":h.GREEN,stroke:a?l[0]:d.GREEN},down:{fill:a?r[0]:h.RED,stroke:a?l[0]:d.RED}}}}},{Validate:ph,NUMBER:yh,TEXT_WRAP:gh,OVERFLOW_STRATEGY:mh}=o._ModuleSupport,{Logger:xh}=o._Util,{Text:fh,Label:vh}=o._Scene,Sh=class extends vh{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}static lineHeight(e){return Math.ceil(e*fh.defaultLineHeightRatio)}};f([ph(gh)],Sh.prototype,"wrapping",2),f([ph(mh)],Sh.prototype,"overflowStrategy",2),f([ph(yh,{optional:!0})],Sh.prototype,"minimumFontSize",2);var Mh=class extends Sh{constructor(){super(...arguments),this.spacing=0}};f([ph(yh)],Mh.prototype,"spacing",2);var Dh=class extends Sh{};function bh(e,t,i){if(e>t)return;let o,a=e,n=t;for(;n>=a;){const e=(n+a)/2|0,t=i(e);null==t?n=e-1:(o=t,a=e+1)}return o}function Nh(e,t,i,o){let{padding:a}=i;var n;const s=2*a,r=Math.min(null!=(n=t.minimumFontSize)?n:t.fontSize,t.fontSize),l=new fh;l.setFont(t);const h={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return bh(r,t.fontSize,(i=>{const a=Mh.lineHeight(i),n=i===r,d=o(a+s,n),c=d.width-s,u=d.height-s;if(a>u)return;h.fontSize=i;const{lines:p}=fh.wrapLines(e,c,u,h,t.wrapping,n?t.overflowStrategy:"hide");if(null==p)return;const y=p.join("\n");l.text=y,l.fontSize=i,l.lineHeight=a;const g=l.computeBBox(),m=l.computeBBox().width,x=a*p.length;return g.width>c||x>u?void 0:[{text:y,fontSize:i,lineHeight:a,width:m,height:x},d.meta]}))}function Ih(e){return null!=(null==e?void 0:e.minimumFontSize)&&(null==e?void 0:e.fontSize)&&(null==e?void 0:e.minimumFontSize)>(null==e?void 0:e.fontSize)}function kh(e,t,i,o,a,n){const s=t.enabled?e:void 0,r=o.enabled?i:void 0;let l,h,d;if((Ih(t)||Ih(o))&&xh.warnOnce("minimumFontSize should be set to a value less than or equal to the font size"),null!=s&&null!=r&&(l=function(e,t,i,o,a,n){let{padding:s}=a;var r,l;const{spacing:h}=t,d=2*s,c=2*s+h,u=(null!=(r=t.minimumFontSize)?r:t.fontSize)+(null!=(l=o.minimumFontSize)?l:o.fontSize);if(u>n(u+c,!1).height-c)return;const p=function(e,t){const{fontSize:i,minimumFontSize:o=i}=e,{fontSize:a,minimumFontSize:n=a}=t,s=i-o,r=a-n;let l=e.fontSize,h=t.fontSize;const d=[{labelFontSize:i,secondaryLabelFontSize:a}];for(;l>o||h>n;)(s>0?(l-o)/s:-1)>(r>0?(h-n)/r:-1)?l--:h--,d.push({labelFontSize:l,secondaryLabelFontSize:h});return d.reverse(),d}(t,o),y=new fh;y.setFont(t);const g={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},m=new fh;m.setFont(o);const x={fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight};let f,v;return bh(0,p.length-1,(a=>{const{labelFontSize:s,secondaryLabelFontSize:r}=p[a],l=0===a,u=Mh.lineHeight(s),S=Dh.lineHeight(r),M=n(u+S+c,l),D=M.width-d,b=M.height-c;if(u+S>b)return;if(null==f||f.fontSize!==s){g.fontSize=s;const{lines:i}=fh.wrapLines(e,D,b,g,t.wrapping,l?t.overflowStrategy:"hide");if(null==i)f=void 0;else{const e=i.join("\n");y.text=e,y.fontSize=s,y.lineHeight=s;const t=y.computeBBox().width,o=i.length*u;f={text:e,fontSize:s,lineHeight:u,width:t,height:o}}}if(null==f||f.width>D||f.height>b)return;if(null==v||v.fontSize!==r){x.fontSize=r;const{lines:e}=fh.wrapLines(i,D,b,x,o.wrapping,l?o.overflowStrategy:"hide");if(null==e)v=void 0;else{const t=e.join("\n");m.text=t,m.fontSize=r,m.lineHeight=S;const i=m.computeBBox().width,o=e.length*S;v={text:t,fontSize:r,lineHeight:S,width:i,height:o}}}if(null==v)return;const N=f.height+v.height;return v.width>D||N>b?void 0:{width:Math.max(f.width,v.width),height:N+h,meta:M.meta,label:f,secondaryLabel:v}}))}(s,t,r,o,a,n)),null==l&&null!=s&&(h=Nh(s,t,a,n)),null!=h){const[e,t]=h;l={width:e.width,height:e.height,meta:t,label:e,secondaryLabel:void 0}}if(null==l&&null==s&&null!=r&&(d=Nh(r,o,a,n)),null!=d){const[e,t]=d;l={width:e.width,height:e.height,meta:t,label:void 0,secondaryLabel:e}}return l}var{CartesianSeriesProperties:Th,SeriesTooltip:Ah,Validate:Oh,AND:Lh,ARRAY:Eh,COLOR_STRING:_h,COLOR_STRING_ARRAY:Rh,FUNCTION:Ch,OBJECT:wh,POSITIVE_NUMBER:Ph,RATIO:zh,STRING:Kh,TEXT_ALIGN:Vh,VERTICAL_ALIGN:Bh}=o._ModuleSupport,Fh=class extends Th{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new Mh,this.tooltip=new Ah}};f([Oh(Kh,{optional:!0})],Fh.prototype,"title",2),f([Oh(Kh)],Fh.prototype,"xKey",2),f([Oh(Kh)],Fh.prototype,"yKey",2),f([Oh(Kh,{optional:!0})],Fh.prototype,"colorKey",2),f([Oh(Kh,{optional:!0})],Fh.prototype,"xName",2),f([Oh(Kh,{optional:!0})],Fh.prototype,"yName",2),f([Oh(Kh,{optional:!0})],Fh.prototype,"colorName",2),f([Oh(Lh(Rh,Eh.restrict({minLength:1})))],Fh.prototype,"colorRange",2),f([Oh(_h,{optional:!0})],Fh.prototype,"stroke",2),f([Oh(zh,{optional:!0})],Fh.prototype,"strokeOpacity",2),f([Oh(Ph,{optional:!0})],Fh.prototype,"strokeWidth",2),f([Oh(Vh)],Fh.prototype,"textAlign",2),f([Oh(Bh)],Fh.prototype,"verticalAlign",2),f([Oh(Ph)],Fh.prototype,"itemPadding",2),f([Oh(Ch,{optional:!0})],Fh.prototype,"formatter",2),f([Oh(wh)],Fh.prototype,"label",2),f([Oh(wh)],Fh.prototype,"tooltip",2);var{SeriesNodePickMode:Uh,computeBarFocusBounds:jh,getMissCount:Wh,valueProperty:Yh,ChartAxisDirection:Gh,DEFAULT_CARTESIAN_DIRECTION_KEYS:Hh,DEFAULT_CARTESIAN_DIRECTION_NAMES:Xh}=o._ModuleSupport,{Rect:Qh,PointerEvents:Zh}=o._Scene,{ColorScale:qh}=o._Scale,{sanitizeHtml:Jh,Color:$h,Logger:ed}=o._Util,td=class extends o._ModuleSupport.CartesianSeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.colorKey=o.properties.colorKey}},id={left:-.5,center:0,right:-.5},od={top:-.5,middle:0,bottom:-.5},ad=class extends o._ModuleSupport.CartesianSeries{constructor(e){super({moduleCtx:e,directionKeys:Hh,directionNames:Xh,pickModes:[Uh.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new Fh,this.NodeEvent=td,this.colorScale=new qh,this.seriesItemEnabled=[]}processData(e){return S(this,null,(function*(){var t,i,o;const a=this.axes[Gh.X],n=this.axes[Gh.Y];if(!a||!n||!this.properties.isValid()||!(null==(t=this.data)?void 0:t.length))return;const{xKey:s,yKey:r,colorRange:l,colorKey:h}=this.properties,d=null==(i=this.axes[Gh.X])?void 0:i.scale,c=null==(o=this.axes[Gh.Y])?void 0:o.scale,{xScaleType:u,yScaleType:p}=this.getScaleInformation({xScale:d,yScale:c}),y=this.colorScale.type,{dataModel:g,processedData:m}=yield this.requestDataModel(e,this.data,{props:[Yh(s,u,{id:"xValue"}),Yh(r,p,{id:"yValue"}),...h?[Yh(h,y,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const e=g.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=m.domain.values[e],this.colorScale.range=l,this.colorScale.update()}}))}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue"),a=i.data.length,n=Wh(this,i.defs.values[o].missing);return!(0===a||a===n)}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;return t&&i?e===Gh.X?t.getDomain(this,"xValue","value",i):t.getDomain(this,"yValue","value",i):[]}createNodeData(){return S(this,null,(function*(){var e,t,i,o,a,n,s;const{data:r,visible:l,axes:h,dataModel:d}=this,c=h[Gh.X],u=h[Gh.Y];if(!(r&&d&&l&&c&&u))return;if("category"!==c.type||"category"!==u.type)return void ed.warnOnce('Heatmap series expected axes to have "category" type, but received "'.concat(c.type,'" and "').concat(u.type,'" instead.'));const{xKey:p,xName:y,yKey:g,yName:m,colorKey:x,colorName:f,textAlign:v,verticalAlign:S,itemPadding:M,colorRange:D,label:b}=this.properties,N=d.resolveProcessedDataIndexById(this,"xValue"),I=d.resolveProcessedDataIndexById(this,"yValue"),k=x?d.resolveProcessedDataIndexById(this,"colorValue"):void 0,T=c.scale,A=u.scale,O=(null!=(e=T.bandwidth)?e:0)/2,L=(null!=(t=A.bandwidth)?t:0)/2,E=this.isColorScaleValid(),_=[],R=[],C=null!=(i=T.bandwidth)?i:10,w=null!=(o=A.bandwidth)?o:10,P=(C-2*M)*id[v],z=(w-2*M)*od[S],K=()=>({width:C,height:w,meta:null}),{seriesItemEnabled:V}=this;V.length=0;for(const{values:B,datum:F}of null!=(n=null==(a=this.processedData)?void 0:a.data)?n:[]){const e=B[N],t=B[I],i=T.convert(e)+O,o=A.convert(t)+L,a=B[null!=k?k:-1],n=E&&null!=a?this.colorScale.convert(a):D[0];V.push(null!=a);const s=kh(null==a?void 0:this.getLabelText(b,{value:a,datum:F,colorKey:x,colorName:f,xKey:p,yKey:g,xName:y,yName:m}),this.properties.label,void 0,this.properties.label,{padding:M},K),r={x:i,y:o,size:0};if(_.push({series:this,itemId:g,yKey:g,xKey:p,xValue:e,yValue:t,colorValue:a,datum:F,point:r,width:C,height:w,fill:n,midPoint:{x:i,y:o}}),null!=(null==s?void 0:s.label)){const{text:e,fontSize:t,lineHeight:i,height:o}=s.label,{fontStyle:a,fontFamily:n,fontWeight:l,color:h}=this.properties.label,d=r.x+P*(C-2*M),c=r.y+z*(w-2*M)-.5*(s.height-o);R.push({series:this,itemId:g,datum:F,text:e,fontSize:t,lineHeight:i,fontStyle:a,fontFamily:n,fontWeight:l,color:h,textAlign:v,verticalAlign:S,x:d,y:c})}}return{itemId:null!=(s=this.properties.yKey)?s:this.id,nodeData:_,labelData:R,scales:this.calculateScaling(),visible:this.visible}}))}nodeFactory(){return new Qh}updateDatumSelection(e){return S(this,null,(function*(){const{nodeData:t,datumSelection:i}=e,o=null!=t?t:[];return i.update(o)}))}updateDatumNodes(e){return S(this,null,(function*(){var t;const{isHighlight:i}=e,{id:o,ctx:{callbackCache:a}}=this,{xKey:n,yKey:s,colorKey:r,formatter:l,highlightStyle:{item:{fill:h,stroke:d,strokeWidth:c,strokeOpacity:u,fillOpacity:p}}}=this.properties,y=this.axes[Gh.X],[g,m]=null!=(t=null==y?void 0:y.visibleRange)?t:[],x=!(0!==g||1!==m);e.datumSelection.each(((e,t)=>{var y,g,m,f,v;const{point:S,width:M,height:D}=t,b=i&&void 0!==h?$h.interpolate(t.fill,h)(null!=p?p:1):t.fill,N=i&&void 0!==d?d:this.properties.stroke,I=i&&void 0!==u?u:this.properties.strokeOpacity,k=i&&void 0!==c?c:this.properties.strokeWidth;let T;l&&(T=a.call(l,{datum:t.datum,fill:b,stroke:N,strokeOpacity:I,strokeWidth:k,highlighted:i,xKey:n,yKey:s,colorKey:r,seriesId:o})),e.crisp=x,e.x=Math.floor(S.x-M/2),e.y=Math.floor(S.y-D/2),e.width=Math.ceil(M),e.height=Math.ceil(D),e.fill=null!=(y=null==T?void 0:T.fill)?y:b,e.stroke=null!=(g=null==T?void 0:T.stroke)?g:N,e.strokeOpacity=null!=(f=null!=(m=null==T?void 0:T.strokeOpacity)?m:I)?f:1,e.strokeWidth=null!=(v=null==T?void 0:T.strokeWidth)?v:k}))}))}updateLabelSelection(e){return S(this,null,(function*(){const{labelData:t,labelSelection:i}=e,{enabled:o}=this.properties.label,a=o?t:[];return i.update(a)}))}updateLabelNodes(e){return S(this,null,(function*(){e.labelSelection.each(((e,t)=>{e.text=t.text,e.fontSize=t.fontSize,e.lineHeight=t.lineHeight,e.fontStyle=t.fontStyle,e.fontFamily=t.fontFamily,e.fontWeight=t.fontWeight,e.fill=t.color,e.textAlign=t.textAlign,e.textBaseline=t.verticalAlign,e.x=t.x,e.y=t.y,e.pointerEvents=Zh.None}))}))}getTooltipHtml(e){var t,i,a;const n=this.axes[Gh.X],s=this.axes[Gh.Y];if(!this.properties.isValid()||!n||!s)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{xKey:r,yKey:l,colorKey:h,xName:d,yName:c,colorName:u,stroke:p,strokeWidth:y,colorRange:g,formatter:m,tooltip:x}=this.properties,{colorScale:f,id:v,ctx:{callbackCache:S}}=this,{datum:M,xValue:D,yValue:b,colorValue:N,itemId:I}=e,k=this.isColorScaleValid()?f.convert(N):g[0];let T;m&&(T=S.call(m,{datum:e,xKey:r,yKey:l,colorKey:h,fill:k,stroke:p,strokeWidth:y,highlighted:!1,seriesId:v}));const A=null!=(i=null!=(t=null==T?void 0:T.fill)?t:k)?i:"gray",O=null!=(a=this.properties.title)?a:c,L=Jh(n.formatDatum(D)),E=Jh(s.formatDatum(b));let _="<b>".concat(Jh(null!=d?d:r),"</b>: ").concat(L,"<br><b>").concat(Jh(null!=c?c:l),"</b>: ").concat(E);return h&&(_="<b>".concat(Jh(null!=u?u:h),"</b>: ").concat(Jh(N),"<br>")+_),x.toTooltipHtml({title:O,content:_,backgroundColor:A},{seriesId:v,datum:M,xKey:r,yKey:l,xName:d,yName:c,title:O,color:A,colorKey:h,colorName:u,itemId:I})}getLegendData(e){var t;return"gradient"===e&&(null==(t=this.data)?void 0:t.length)&&this.properties.isValid()&&this.isColorScaleValid()&&this.dataModel?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue")],colorRange:this.properties.colorRange}]:[]}isLabelEnabled(){return this.properties.label.enabled&&Boolean(this.properties.colorKey)}getBandScalePadding(){return{inner:0,outer:0}}computeFocusBounds(e){let{datumIndex:t,seriesRect:i}=e;var o;const a=null==(o=this.contextNodeData)?void 0:o.nodeData[t];if(void 0===a)return;const{width:n,height:s,midPoint:r}=a,l={x:r.x-n/2,y:r.y-s/2,width:n,height:s};return jh(l,this.contentGroup,i)}};ad.className="HeatmapSeries",ad.type="heatmap";var nd={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,label:{enabled:!1,color:o._Theme.DEFAULT_LABEL_COLOUR,fontSize:o._Theme.FONT_SIZE.SMALL,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},sd={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",instanceConstructor:ad,defaultAxes:[{type:o._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:o._Theme.POSITION.LEFT},{type:o._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:o._Theme.POSITION.BOTTOM}],themeTemplate:nd,paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:a,themeTemplateParameters:n}=e;var s;const{properties:r}=n,l=r.get(o._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),h=r.get(o._Theme.DEFAULT_BACKGROUND_COLOUR),d=null!=(s=Array.isArray(h)?h[0]:h)?s:"white",{fills:c,strokes:u}=t(i);return{stroke:a?u[0]:d,colorRange:a?[c[0],c[1]]:l}}},rd={legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}};function ld(e,t,i,o){const[a,n]=e,[s,r]=t,l=s-a,h=r-n,d=l*l+h*h;let c,u;if(Math.abs(d)<1e-9)c=a,u=n;else{let e=((i-a)*l+(o-n)*h)/d;e=Math.max(0,Math.min(1,e)),c=a+e*(s-a),u=n+e*(r-n)}const p=i-c,y=o-u;return p*p+y*y}function hd(e,t,i){let o=1/0,a=e[e.length-1];for(const n of e)o=Math.min(o,ld(a,n,t,i)),a=n;return Math.sqrt(o)}function dd(e){let[t,i]=e[0],o=0;for(let a=1;a<e.length;a+=1){const[n,s]=e[a];o+=Math.hypot(n-t,s-i),t=n,i=s}return o}function cd(e){if(0===e.length)return;const t=dd(e)/2;let[i,o]=e[0],a=0;for(let n=1;n<e.length;n+=1){const[s,r]=e[n],l=Math.hypot(s-i,r-o),h=a+l;if(h>t){const e=(t-a)/l;return{point:[i+(s-i)*e,o+(r-o)*e],angle:Math.atan2(r-o,s-i)}}a=h,i=s,o=r}}var{LonLatBBox:ud}=o._ModuleSupport;function pd(e,t,i,o,a){return null==e?e=new ud(t,i,o,a):(e.lon0=Math.min(e.lon0,t),e.lat0=Math.min(e.lat0,i),e.lon1=Math.max(e.lon1,o),e.lat1=Math.max(e.lat1,a)),e}var yd=(e,t,i)=>{let o=e,a=o;for(const n of t)if(null==o||i(o.value,n)>0)o={value:n,next:o},a=o;else{for(;null!=a.next&&i(a.next.value,n)<=0;)a=a.next;a.next={value:n,next:a.next}}return o};function gd(e,t){return e.forEach((e=>{const[i,o]=e;t=pd(t,i,o,i,o)})),t}function md(e,t,i){let o=!1,a=1/0;for(const n of e){let e=n[n.length-1],[s,r]=e;for(const l of n){const[n,h]=l;h>i!==r>i&&t<(s-n)*(i-h)/(r-h)+n&&(o=!o),a=Math.min(a,ld(e,l,t,i)),e=l,s=n,r=h}}return(o?-1:1)*Math.sqrt(a)}var{Path:xd,ExtendedPath2D:fd,BBox:vd,ScenePathChangeDetection:Sd}=o._Scene,Md=class extends xd{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new fd}computeBBox(){var e;return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),null==(e=this.bbox)?void 0:e.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=null!=e?this.drawGeometry(e,void 0):void 0}drawPath(e){super.drawPath(e),this.renderStroke(e,this.strokePath.getPath2D())}containsPoint(e,t){const{projectedGeometry:i}=this;return null!=i&&(({x:e,y:t}=this.transformPoint(e,t)),!!this.getCachedBBox().containsPoint(e,t)&&this.geometryDistance(i,e,t)<=0)}distanceToPoint(e,t){const{projectedGeometry:i}=this;return({x:e,y:t}=this.transformPoint(e,t)),null!=i?this.geometryDistance(i,e,t):1/0}geometryDistance(e,t,i){const{renderMode:o,strokeWidth:a}=this,n=0!==(1&o),s=0!==(2&o),r=Math.max(a/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce(((e,o)=>Math.min(e,this.geometryDistance(o,t,i))),1/0);case"MultiPolygon":return n?e.coordinates.reduce(((e,o)=>Math.min(e,Math.max(md(o,t,i),0))),1/0):1/0;case"Polygon":return n?Math.max(md(e.coordinates,t,i),0):1/0;case"MultiLineString":return s?e.coordinates.reduce(((e,o)=>Math.min(e,Math.max(hd(o,t,i)-r,0))),1/0):1/0;case"LineString":return s?Math.max(hd(e.coordinates,t,i)-r,0):1/0;default:return 1/0}}drawGeometry(e,t){const{renderMode:i,path:o,strokePath:a}=this,n=0!==(1&i),s=0!==(2&i);switch(e.type){case"GeometryCollection":e.geometries.forEach((e=>{t=this.drawGeometry(e,t)}));break;case"MultiPolygon":n&&e.coordinates.forEach((e=>{t=this.drawPolygon(o,e,t)}));break;case"Polygon":n&&(t=this.drawPolygon(o,e.coordinates,t));break;case"LineString":s&&(t=this.drawLineString(a,e.coordinates,t,!1));break;case"MultiLineString":s&&e.coordinates.forEach((e=>{t=this.drawLineString(a,e,t,!1)}))}return t}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let o=1;o<t.length;o+=1){const i=t[o];this.drawLineString(e,i,void 0,!0)}return i}drawLineString(e,t,i,o){if(t.length<2)return i;const a=o?t.length-1:t.length;for(let n=0;n<a;n+=1){const[o,a]=t[n];if(0===n?e.moveTo(o,a):e.lineTo(o,a),null==i)i=new vd(o,a,0,0);else{const{x:e,y:t}=i,n=e+i.width,s=t+i.height;i.x=Math.min(e,o),i.y=Math.min(t,a),i.width=Math.max(n,o)-i.x,i.height=Math.max(s,a)-i.y}}return o&&e.closePath(),i}};function Dd(e,t){if(null!=e.bbox){const[i,o,a,n]=e.bbox;return t=pd(t,i,o,a,n)}switch(e.type){case"GeometryCollection":e.geometries.forEach((e=>{t=Dd(e,t)}));break;case"MultiPolygon":e.coordinates.forEach((e=>{e.length>0&&(t=gd(e[0],t))}));break;case"Polygon":e.coordinates.length>0&&(t=gd(e.coordinates[0],t));break;case"MultiLineString":e.coordinates.forEach((e=>{t=gd(e,t)}));break;case"LineString":t=gd(e.coordinates,t);break;case"MultiPoint":e.coordinates.forEach((e=>{const[i,o]=e;t=pd(t,i,o,i,o)}));break;case"Point":{const[i,o]=e.coordinates;t=pd(t,i,o,i,o);break}}return t}function bd(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.map((e=>{const o=bd(e);if(null==o)return;const a=gd(o[0],void 0);if(null==a)return;const n=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(null==t||n>t)&&(t=n,i=o)})),i}case"MultiPolygon":{let t,i;return e.coordinates.forEach((e=>{const o=gd(e[0],void 0);if(null==o)return;const a=Math.abs(o.lat1-o.lat0)*Math.abs(o.lon1-o.lon0);(null==t||a>t)&&(t=a,i=e)})),i}case"Polygon":return e.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function Nd(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.map((e=>{const o=Nd(e);if(null==o)return;const a=dd(o);null!=a&&(null==t||a>t)&&(t=a,i=o)})),i}case"MultiLineString":{let t,i=0;return e.coordinates.forEach((e=>{const o=dd(e);o>i&&(i=o,t=e)})),t}case"LineString":return e.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function Id(e,t){if(null==e)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some((e=>Id(e,t)));case"MultiPolygon":case"Polygon":return 0!==(1&t);case"MultiLineString":case"LineString":return 0!==(2&t);case"MultiPoint":case"Point":return 0!==(4&t)}}function kd(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map((e=>kd(e,t)))};case"Polygon":return{type:"Polygon",coordinates:Ad(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:Td(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:Ad(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:Od(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:Od(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function Td(e,t){return e.map((e=>Ad(e,t)))}function Ad(e,t){return e.map((e=>Od(e,t)))}function Od(e,t){return e.map((e=>t.convert(e)))}function Ld(e){return Array.isArray(e)&&e.length>=2&&e.every(o._ModuleSupport.isFiniteNumber)}function Ed(e){return Array.isArray(e)&&e.length>=2&&e.every(Ld)}f([Sd()],Md.prototype,"projectedGeometry",2),f([Sd()],Md.prototype,"renderMode",2);function _d(e){return Math.abs(e[0][0]-e[e.length-1][0])<.001&&Math.abs(e[0][1]-e[e.length-1][1])<.001}function Rd(e){return Array.isArray(e)&&e.every(Ed)&&e.every(_d)}function Cd(e){if(null===e)return!0;if("object"!==typeof e||null==e.type)return!1;const{type:t,coordinates:i}=e;switch(t){case"GeometryCollection":return Array.isArray(e.geometries)&&e.geometries.every(Cd);case"MultiPolygon":return Array.isArray(i)&&i.every(Rd);case"Polygon":return Rd(i);case"MultiLineString":return Array.isArray(i)&&i.every(Ed);case"LineString":case"MultiPoint":return Ed(i);case"Point":return Ld(i)}}function wd(e){return null!==e&&"object"===typeof e&&"Feature"===e.type&&Cd(e.geometry)}var Pd=o._ModuleSupport.predicateWithMessage((function(e){return null!==e&&"object"===typeof e&&"FeatureCollection"===e.type&&Array.isArray(e.features)&&e.features.every(wd)}),"a GeoJSON object"),{COLOR_STRING:zd,LINE_DASH:Kd,OBJECT:Vd,POSITIVE_NUMBER:Bd,RATIO:Fd,Validate:Ud,SeriesProperties:jd,SeriesTooltip:Wd}=o._ModuleSupport,Yd=class extends jd{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new Wd}};f([Ud(Pd,{optional:!0})],Yd.prototype,"topology",2),f([Ud(zd)],Yd.prototype,"stroke",2),f([Ud(Fd)],Yd.prototype,"strokeOpacity",2),f([Ud(Bd)],Yd.prototype,"strokeWidth",2),f([Ud(Kd)],Yd.prototype,"lineDash",2),f([Ud(Bd)],Yd.prototype,"lineDashOffset",2),f([Ud(Vd)],Yd.prototype,"tooltip",2);var{createDatumId:Gd,DataModelSeries:Hd,SeriesNodePickMode:Xd,Validate:Qd}=o._ModuleSupport,{Group:Zd,Selection:qd,PointerEvents:Jd}=o._Scene,{Logger:$d}=o._Util,ec=class extends Hd{constructor(e){super({moduleCtx:e,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[Xd.EXACT_SHAPE_MATCH]}),this.properties=new Yd,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Zd({name:"itemGroup"})),this.datumSelection=qd.select(this.itemGroup,(()=>this.nodeFactory()))}getNodeData(){var e;return null==(e=this.contextNodeData)?void 0:e.nodeData}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}nodeFactory(){const e=new Md;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=Jd.None,e}processData(){return S(this,null,(function*(){const{topology:e}=this;this.topologyBounds=null==e?void 0:e.features.reduce(((e,t)=>{const i=t.geometry;return null==i?e:Dd(i,e)}),void 0),null==e&&$d.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}))}createNodeData(){return S(this,null,(function*(){const{id:e,topology:t,scale:i}=this;if(null==t)return;const o=[];return t.features.forEach(((e,t)=>{const{geometry:a}=e,n=null!=a&&null!=i?kd(a,i):void 0;null!=n&&o.push({series:this,itemId:t,datum:e,index:t,projectedGeometry:n})})),{itemId:e,nodeData:o,labelData:[]}}))}updateSelections(){return S(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(){return S(this,null,(function*(){var e;const{datumSelection:t}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:i=[]}=null!=(e=this.contextNodeData)?e:{};this.datumSelection=yield this.updateDatumSelection({nodeData:i,datumSelection:t}),yield this.updateDatumNodes({datumSelection:t})}))}updateDatumSelection(e){return S(this,null,(function*(){return e.datumSelection.update(e.nodeData,void 0,(e=>Gd(e.index)))}))}updateDatumNodes(e){return S(this,null,(function*(){const{properties:t}=this,{datumSelection:i}=e,{stroke:o,strokeOpacity:a,lineDash:n,lineDashOffset:s}=t,r=this.getStrokeWidth(t.strokeWidth);i.each(((e,t)=>{const{projectedGeometry:i}=t;if(null==i)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=i,e.stroke=o,e.strokeWidth=r,e.strokeOpacity=a,e.lineDash=n,e.lineDashOffset=s}))}))}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT}computeFocusBounds(e){}};ec.className="MapLineBackgroundSeries",ec.type="map-line-background",f([Qd(Pd,{optional:!0,property:"topology"})],ec.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:tc,DEFAULT_HIERARCHY_STROKES:ic}=o._Theme,oc={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",instanceConstructor:ec,themeTemplate:m(g({},rd),{series:{__extends__:tc,strokeWidth:1,lineDash:[0],lineDashOffset:0}}),paletteFactory:e=>{let{themeTemplateParameters:t}=e;var i;const{properties:o}=t;return{stroke:null==(i=o.get(ic))?void 0:i[1]}}};function ac(e,t){var i;const o=null==(i=e.contextNodeData)?void 0:i.nodeData[t.datumIndex];if(void 0!==o)for(const a of e.datumSelection.nodes())if(a.datum===o)return a.computeTransformedBBox()}var{AND:nc,ARRAY:sc,COLOR_STRING:rc,COLOR_STRING_ARRAY:lc,FUNCTION:hc,LINE_DASH:dc,NUMBER_ARRAY:cc,OBJECT:uc,POSITIVE_NUMBER:pc,RATIO:yc,STRING:gc,Validate:mc,SeriesProperties:xc,SeriesTooltip:fc}=o._ModuleSupport,{Label:vc}=o._Scene,Sc=class extends xc{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new vc,this.tooltip=new fc}};f([mc(Pd,{optional:!0})],Sc.prototype,"topology",2),f([mc(gc,{optional:!0})],Sc.prototype,"title",2),f([mc(gc,{optional:!0})],Sc.prototype,"legendItemName",2),f([mc(gc)],Sc.prototype,"idKey",2),f([mc(gc)],Sc.prototype,"topologyIdKey",2),f([mc(gc,{optional:!0})],Sc.prototype,"idName",2),f([mc(gc,{optional:!0})],Sc.prototype,"labelKey",2),f([mc(gc,{optional:!0})],Sc.prototype,"labelName",2),f([mc(gc,{optional:!0})],Sc.prototype,"sizeKey",2),f([mc(gc,{optional:!0})],Sc.prototype,"sizeName",2),f([mc(gc,{optional:!0})],Sc.prototype,"colorKey",2),f([mc(gc,{optional:!0})],Sc.prototype,"colorName",2),f([mc(cc,{optional:!0})],Sc.prototype,"sizeDomain",2),f([mc(nc(lc,sc.restrict({minLength:1})),{optional:!0})],Sc.prototype,"colorRange",2),f([mc(pc,{optional:!0})],Sc.prototype,"maxStrokeWidth",2),f([mc(rc)],Sc.prototype,"stroke",2),f([mc(yc)],Sc.prototype,"strokeOpacity",2),f([mc(pc)],Sc.prototype,"strokeWidth",2),f([mc(dc)],Sc.prototype,"lineDash",2),f([mc(pc)],Sc.prototype,"lineDashOffset",2),f([mc(hc,{optional:!0})],Sc.prototype,"formatter",2),f([mc(uc)],Sc.prototype,"label",2),f([mc(uc)],Sc.prototype,"tooltip",2);var{getMissCount:Mc,createDatumId:Dc,DataModelSeries:bc,SeriesNodePickMode:Nc,valueProperty:Ic,Validate:kc}=o._ModuleSupport,{ColorScale:Tc,LinearScale:Ac}=o._Scale,{Selection:Oc,Text:Lc}=o._Scene,{sanitizeHtml:Ec,Logger:_c}=o._Util,Rc=class extends bc{constructor(e){super({moduleCtx:e,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[Nc.EXACT_SHAPE_MATCH,Nc.NEAREST_NODE]}),this.properties=new Sc,this._chartTopology=void 0,this.colorScale=new Tc,this.sizeScale=new Ac,this.datumSelection=Oc.select(this.contentGroup,(()=>this.nodeFactory())),this.labelSelection=Oc.select(this.labelGroup,Lc),this.highlightDatumSelection=Oc.select(this.highlightNode,(()=>this.nodeFactory())),this._previousDatumMidPoint=void 0}getNodeData(){var e;return null==(e=this.contextNodeData)?void 0:e.nodeData}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}get hasData(){return super.hasData&&null!=this.topology}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>{this.onLegendItemClick(e)})),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>{this.onLegendItemDoubleClick(e)})))}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}nodeFactory(){const e=new Md;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}processData(e){return S(this,null,(function*(){var t,i;if(null==this.data||!this.properties.isValid())return;const{data:o,topology:a,sizeScale:n,colorScale:s}=this,{topologyIdKey:r,idKey:l,sizeKey:h,colorKey:d,labelKey:c,sizeDomain:u,colorRange:p}=this.properties,y=new Map;null==a||a.features.forEach((e=>{var t;const i=null==(t=e.properties)?void 0:t[r];null!=i&&Id(e.geometry,2)&&y.set(i,e)}));const g=this.sizeScale.type,m=this.colorScale.type,x=null==(t=this.scale)?void 0:t.type,{dataModel:f,processedData:v}=yield this.requestDataModel(e,o,{props:[Ic(l,x,{id:"idValue",includeProperty:!1}),Ic(l,x,{id:"featureValue",includeProperty:!1,processor:()=>e=>y.get(e)}),...null!=c?[Ic(c,"band",{id:"labelValue"})]:[],...null!=h?[Ic(h,g,{id:"sizeValue"})]:[],...null!=d?[Ic(d,m,{id:"colorValue"})]:[]]}),S=f.resolveProcessedDataIndexById(this,"featureValue");if(this.topologyBounds=v.data.reduce(((e,t)=>{let{values:i}=t;const o=i[S],a=null==o?void 0:o.geometry;return null==a?e:Dd(a,e)}),void 0),null!=h){const e=f.resolveProcessedDataIndexById(this,"sizeValue"),t=null!=(i=v.domain.values[e])?i:[];n.domain=null!=u?u:t}if(null!=p&&this.isColorScaleValid()){const e=f.resolveProcessedDataIndexById(this,"colorValue");s.domain=v.domain.values[e],s.range=p,s.update()}null==a&&_c.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}))}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue"),a=i.data.length,n=Mc(this,i.defs.values[o].missing);return!(0===a||a===n)}getLabelDatum(e,t,i,o){if(null==t||null==i)return;const a=Nd(i);if(null==a)return;const{idKey:n,idName:s,sizeKey:r,sizeName:l,colorKey:h,colorName:d,labelKey:c,labelName:u,label:p}=this.properties,y=this.getLabelText(p,{value:t,datum:e,idKey:n,idName:s,sizeKey:r,sizeName:l,colorKey:h,colorName:d,labelKey:c,labelName:u});if(null==y)return;const g=Lc.getTextSize(String(y),o),m=cd(a);if(null==m)return;const[x,f]=m.point,{width:v,height:S}=g;return{point:{x:x,y:f,size:0},label:{width:v,height:S,text:y},marker:void 0,placement:void 0}}createNodeData(){return S(this,null,(function*(){var e;const{id:t,dataModel:i,processedData:o,sizeScale:a,colorScale:n,properties:s,scale:r}=this,{idKey:l,sizeKey:h,colorKey:d,labelKey:c,label:u}=s;if(null==i||null==o)return;const p=this.isColorScaleValid(),y=i.resolveProcessedDataIndexById(this,"idValue"),g=i.resolveProcessedDataIndexById(this,"featureValue"),m=null!=c?i.resolveProcessedDataIndexById(this,"labelValue"):void 0,x=null!=h?i.resolveProcessedDataIndexById(this,"sizeValue"):void 0,f=null!=d?i.resolveProcessedDataIndexById(this,"colorValue"):void 0,v=null!=(e=s.maxStrokeWidth)?e:s.strokeWidth;a.range=[Math.min(s.strokeWidth,v),v];const S=u.getFont(),M=new Map;o.data.forEach((e=>{let{values:t}=e;var i;const o=t[y],a=null==(i=t[g])?void 0:i.geometry,n=null!=a&&null!=r?kd(a,r):void 0;null!=o&&null!=n&&M.set(o,n)}));const D=[],b=[],N=[];o.data.forEach((e=>{let{datum:t,values:i}=e;const o=i[y],s=null!=f?i[f]:void 0,r=null!=x?i[x]:void 0,h=null!=m?i[m]:void 0,d=p&&null!=s?n.convert(s):void 0,c=null!=r?a.convert(r,{clampMode:"clamped"}):void 0,u=M.get(o);null==u&&N.push(o);const g=this.getLabelDatum(t,h,u,S);null!=g&&b.push(g),D.push({series:this,itemId:l,datum:t,stroke:d,strokeWidth:c,idValue:o,labelValue:h,colorValue:s,sizeValue:r,projectedGeometry:u})}));if(N.length>10){const e=N.length-10;N.length=10,N.push("(+".concat(e," more)"))}return N.length>0&&_c.warnOnce("some data items do not have matches in the provided topology",N),{itemId:t,nodeData:D,labelData:b}}))}updateSelections(){return S(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(){return S(this,null,(function*(){var e,t,i;const{datumSelection:o,labelSelection:a,highlightDatumSelection:n}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let s=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight();null==s||s.series===this&&null!=s.datum||(s=void 0);const r=null!=(i=null==(t=this.contextNodeData)?void 0:t.nodeData)?i:[];this.datumSelection=yield this.updateDatumSelection({nodeData:r,datumSelection:o}),yield this.updateDatumNodes({datumSelection:o,isHighlight:!1}),this.labelSelection=yield this.updateLabelSelection({labelSelection:a}),yield this.updateLabelNodes({labelSelection:a}),this.highlightDatumSelection=yield this.updateDatumSelection({nodeData:null!=s?[s]:[],datumSelection:n}),yield this.updateDatumNodes({datumSelection:n,isHighlight:!0})}))}updateDatumSelection(e){return S(this,null,(function*(){return e.datumSelection.update(e.nodeData,void 0,(e=>Dc(e.idValue)))}))}updateDatumNodes(e){return S(this,null,(function*(){const{id:t,properties:i,ctx:{callbackCache:o}}=this,{datumSelection:a,isHighlight:n}=e,{idKey:s,labelKey:r,sizeKey:l,colorKey:h,stroke:d,strokeOpacity:c,lineDash:u,lineDashOffset:p,formatter:y}=i,g=n?i.highlightStyle.item:void 0,m=this.getStrokeWidth(i.strokeWidth);a.each(((e,i)=>{var a,x,f,v,S,M,D,b,N,I,k,T;const{projectedGeometry:A}=i;if(null==A)return e.visible=!1,void(e.projectedGeometry=void 0);let O;if(null!=y){const e={seriesId:t,datum:i.datum,itemId:i.itemId,idKey:s,labelKey:r,sizeKey:l,colorKey:h,strokeOpacity:c,stroke:d,strokeWidth:m,lineDash:u,lineDashOffset:p,highlighted:n};O=o.call(y,e)}e.visible=!0,e.projectedGeometry=A,e.stroke=null!=(f=null!=(x=null!=(a=null==g?void 0:g.stroke)?a:null==O?void 0:O.stroke)?x:i.stroke)?f:d,e.strokeWidth=Math.max(null!=(v=null==g?void 0:g.strokeWidth)?v:0,null!=(M=null!=(S=null==O?void 0:O.strokeWidth)?S:i.strokeWidth)?M:m),e.strokeOpacity=null!=(b=null!=(D=null==g?void 0:g.strokeOpacity)?D:null==O?void 0:O.strokeOpacity)?b:c,e.lineDash=null!=(I=null!=(N=null==g?void 0:g.lineDash)?N:null==O?void 0:O.lineDash)?I:u,e.lineDashOffset=null!=(T=null!=(k=null==g?void 0:g.lineDashOffset)?k:null==O?void 0:O.lineDashOffset)?T:p}))}))}updateLabelSelection(e){return S(this,null,(function*(){var t,i;const o=null!=(i=this.isLabelEnabled()?null==(t=this.chart)?void 0:t.placeLabels().get(this):void 0)?i:[];return e.labelSelection.update(o)}))}updateLabelNodes(e){return S(this,null,(function*(){const{labelSelection:t}=e,{color:i,fontStyle:o,fontWeight:a,fontSize:n,fontFamily:s}=this.properties.label;t.each(((e,t)=>{let{x:r,y:l,width:h,height:d,text:c}=t;e.visible=!0,e.x=r+h/2,e.y=l+d/2,e.text=c,e.fill=i,e.fontStyle=o,e.fontWeight=a,e.fontSize=n,e.fontFamily=s,e.textAlign="center",e.textBaseline="middle"}))}))}onLegendItemClick(e){const{legendItemName:t}=this.properties,{enabled:i,itemId:o,series:a}=e,n=null!=t&&t===e.legendItemName;(a.id===this.id||n)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,{legendItemName:n}=this.properties,s=null!=n&&n===e.legendItemName;o.id===this.id||s||t&&1===a?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){var e,t;return null!=(t=null==(e=this.contextNodeData)?void 0:e.labelData)?t:[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(e){let t,{x:i,y:o}=e,a=1/0;return this.datumSelection.each(((e,n)=>{const s=e.distanceToPoint(i,o);s<a&&(a=s,t=n)})),null!=t?{datum:t,distance:a}:void 0}datumMidPoint(e){var t;const{_previousDatumMidPoint:i}=this;if((null==i?void 0:i.datum)===e)return i.point;const o=e.projectedGeometry,a=null!=o?Nd(o):void 0,n=null!=a?null==(t=cd(a))?void 0:t.point:void 0,s=null!=n?{x:n[0],y:n[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:s},s}getLegendData(e){var t,i,o,a;const{processedData:n,dataModel:s}=this;if(null==n||null==s)return[];const{title:r,legendItemName:l,idKey:h,idName:d,colorKey:c,colorName:u,colorRange:p,stroke:y,strokeWidth:g,strokeOpacity:m,lineDash:x,visible:f}=this.properties;if("gradient"===e&&null!=c&&null!=p){const e=n.domain.values[s.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:f,seriesId:this.id,colorName:u,colorRange:p,colorDomain:e}]}if("category"===e){return[{legendType:"category",id:this.id,itemId:null!=(i=null!=(t=null!=l?l:r)?t:d)?i:h,seriesId:this.id,enabled:f,label:{text:null!=(a=null!=(o=null!=l?l:r)?o:d)?a:h},marker:{fill:y,fillOpacity:m,stroke:void 0,strokeWidth:0,strokeOpacity:0,enabled:!1},line:{stroke:y,strokeOpacity:m,strokeWidth:g,lineDash:x},legendItemName:l}]}return[]}getTooltipHtml(e){var t,i,a,n,s;const{id:r,processedData:l,properties:h,ctx:{callbackCache:d}}=this;if(!l||!h.isValid())return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:c,idKey:u,idName:p,colorKey:y,colorName:m,sizeKey:x,sizeName:f,labelKey:v,labelName:S,formatter:M,tooltip:D}=h,{datum:b,stroke:N,idValue:I,colorValue:k,sizeValue:T,labelValue:A,itemId:O}=e,L=null!=(i=Ec(null!=(t=h.title)?t:c))?i:"",E=[];E.push(Ec((null!=p?"".concat(p,": "):"")+I)),null!=k&&E.push(Ec((null!=m?m:y)+": "+k)),null!=T&&E.push(Ec((null!=f?f:x)+": "+T)),null!=A&&v!==u&&E.push(Ec((null!=S?S:v)+": "+A));const _=E.join("<br>");let R;M&&(R=d.call(M,{seriesId:r,datum:b,idKey:u,stroke:N,strokeWidth:this.getStrokeWidth(null!=(a=e.strokeWidth)?a:h.strokeWidth),highlighted:!1}));const C=null!=(s=null!=(n=null==R?void 0:R.stroke)?n:N)?s:h.stroke;return D.toTooltipHtml({title:L,content:_,backgroundColor:C},g({seriesId:r,datum:b,idKey:u,title:L,color:C,itemId:O,sizeKey:x,colorKey:y,colorName:m,idName:p,labelKey:v,labelName:S,sizeName:f},this.getModuleTooltipParams()))}computeFocusBounds(e){return ac(this,e)}};Rc.className="MapLineSeries",Rc.type="map-line",f([kc(Pd,{optional:!0,property:"topology"})],Rc.prototype,"_chartTopology",2);var{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Cc,EXTENDS_SERIES_DEFAULTS:wc,DEFAULT_FONT_FAMILY:Pc,DEFAULT_LABEL_COLOUR:zc,singleSeriesPaletteFactory:Kc}=o._Theme,Vc={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",instanceConstructor:Rc,themeTemplate:m(g({},rd),{series:{__extends__:wc,strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Pc,color:zc}}}),paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:o,themeTemplateParameters:a}=e,{fill:n}=Kc(e),{properties:s}=a,r=s.get(Cc),{fills:l}=t(i);return{colorRange:o?[l[0],l[1]]:r,stroke:n}}};function Bc(e,t,i){const o=gd(e[0],void 0);if(null==o)return;const a=(o.lon0+o.lon1)/2,n=(o.lat0+o.lat1)/2,s=Math.abs(o.lon1-o.lon0),r=Math.abs(o.lat1-o.lat0),l=function(e){if(0===e.length)return;let t=0,i=0,o=0,[a,n]=e[e.length-1];for(const[s,r]of e){const e=a*r-s*n;o+=e,t+=(a+s)*e,i+=(n+r)*e,a=s,n=r}return o*=3,[t/o,i/o]}(e[0]),[h,d]=l,c=-md(e,h,d);let u;const p=(e,t)=>e-.5*Math.max(t-c,0),y=(t,o,a)=>{const{distance:n,maxDistance:s}=i(e,t,o,a),r=Math.hypot(h-t,d-o),l=Math.min(Math.max(h,t-a/2),t+a/2),c=Math.min(Math.max(d,o-a/2),o+a/2),u=Math.hypot(h-l,d-c);return{distance:n,maxDistance:s,value:p(n,r),maxValue:p(s,u),x:t,y:o,stride:a}},g=(e,t,i,o)=>{const a=y(t,i,o);a.maxDistance>=0&&e.push(a)},m=Math.min(s,r)/2;let x={value:y(a,n,m),next:null};for(;null!=x;){const e=x.value,{distance:i,value:o,maxValue:a,x:n,y:s,stride:r}=e;if(x=x.next,i>0&&(null==u||o>u.value)&&(u=e),null!=u&&a-u.value<=t)continue;const l=r/2,h=[];g(h,n-l,s-l,l),g(h,n+l,s-l,l),g(h,n-l,s+l,l),g(h,n+l,s+l,l),h.sort(Fc),x=yd(x,h,Fc)}if(null==u)return;const{distance:f,x:v,y:S}=u;return{x:v,y:S,distance:f}}var Fc=(e,t)=>t.maxValue-e.maxValue;function Uc(e,t){const i=Bc(e,t,((e,t,i,o)=>{const a=-md(e,t,i);return{distance:a,maxDistance:a+o*Math.SQRT2}}));if(null==i)return;const{x:o,y:a}=i;return[o,a]}function jc(e,t){var i,o;let a;switch(e.type){case"GeometryCollection":return e.geometries.flatMap((e=>jc(e,t)));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const i=bd(e);a=null!=i?Uc(i,t):void 0;break}case"Polygon":{const i=e.coordinates;a=null!=i?Uc(i,t):void 0;break}case"MultiLineString":{const t=Nd(e);a=null!=t?null==(i=cd(t))?void 0:i.point:void 0;break}case"LineString":a=null==(o=cd(e.coordinates))?void 0:o.point;break}return null!=a?[a]:[]}var{AND:Wc,ARRAY:Yc,COLOR_STRING:Gc,COLOR_STRING_ARRAY:Hc,FUNCTION:Xc,NUMBER_ARRAY:Qc,OBJECT:Zc,POSITIVE_NUMBER:qc,RATIO:Jc,STRING:$c,MARKER_SHAPE:eu,Validate:tu,SeriesProperties:iu,SeriesTooltip:ou}=o._ModuleSupport,{Label:au,Circle:nu}=o._Scene,{Logger:su}=o._Util,ru=class extends au{constructor(){super(...arguments),this.placement="bottom"}};f([tu($c)],ru.prototype,"placement",2);var lu=class extends iu{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape=nu,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.label=new ru,this.tooltip=new ou}isValid(){const e=super.isValid(),t=null!=this.idKey,i=null!=this.latitudeKey&&null!=this.longitudeKey;return t||i?e:(su.warnOnce("Either both [topology] and [idKey] or both [latitudeKey] and [longitudeKey] must be set to render a map marker series."),!1)}};f([tu(Pd,{optional:!0})],lu.prototype,"topology",2),f([tu($c,{optional:!0})],lu.prototype,"title",2),f([tu($c,{optional:!0})],lu.prototype,"legendItemName",2),f([tu($c,{optional:!0})],lu.prototype,"idKey",2),f([tu($c)],lu.prototype,"topologyIdKey",2),f([tu($c,{optional:!0})],lu.prototype,"idName",2),f([tu($c,{optional:!0})],lu.prototype,"latitudeKey",2),f([tu($c,{optional:!0})],lu.prototype,"latitudeName",2),f([tu($c,{optional:!0})],lu.prototype,"longitudeKey",2),f([tu($c,{optional:!0})],lu.prototype,"longitudeName",2),f([tu($c,{optional:!0})],lu.prototype,"labelKey",2),f([tu($c,{optional:!0})],lu.prototype,"labelName",2),f([tu($c,{optional:!0})],lu.prototype,"sizeKey",2),f([tu($c,{optional:!0})],lu.prototype,"sizeName",2),f([tu($c,{optional:!0})],lu.prototype,"colorKey",2),f([tu($c,{optional:!0})],lu.prototype,"colorName",2),f([tu(Wc(Hc,Yc.restrict({minLength:1})),{optional:!0})],lu.prototype,"colorRange",2),f([tu(eu)],lu.prototype,"shape",2),f([tu(qc)],lu.prototype,"size",2),f([tu(qc,{optional:!0})],lu.prototype,"maxSize",2),f([tu(Qc,{optional:!0})],lu.prototype,"sizeDomain",2),f([tu(Gc,{optional:!0})],lu.prototype,"fill",2),f([tu(Jc)],lu.prototype,"fillOpacity",2),f([tu(Gc,{optional:!0})],lu.prototype,"stroke",2),f([tu(qc)],lu.prototype,"strokeWidth",2),f([tu(Jc)],lu.prototype,"strokeOpacity",2),f([tu(Xc,{optional:!0})],lu.prototype,"formatter",2),f([tu(Zc)],lu.prototype,"label",2),f([tu(Zc)],lu.prototype,"tooltip",2);var{Validate:hu,fromToMotion:du,StateMachine:cu,getMissCount:uu,createDatumId:pu,DataModelSeries:yu,SeriesNodePickMode:gu,Layers:mu,valueProperty:xu,computeMarkerFocusBounds:fu}=o._ModuleSupport,{ColorScale:vu,LinearScale:Su}=o._Scale,{Group:Mu,Selection:Du,Text:bu,getMarker:Nu}=o._Scene,{sanitizeHtml:Iu,Logger:ku}=o._Util,Tu=class extends yu{constructor(e){super({moduleCtx:e,contentGroupVirtual:!0,useLabelLayer:!0,pickModes:[gu.EXACT_SHAPE_MATCH,gu.NEAREST_NODE]}),this.properties=new lu,this._chartTopology=void 0,this.colorScale=new vu,this.sizeScale=new Su,this.markerGroup=this.contentGroup.appendChild(new Mu({name:"markerGroup",layer:!0,isVirtual:!1,zIndex:mu.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelSelection=Du.select(this.labelGroup,bu,!1),this.markerSelection=Du.select(this.markerGroup,(()=>this.markerFactory()),!1),this.highlightMarkerSelection=Du.select(this.highlightNode,(()=>this.markerFactory())),this.animationState=new cu("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}getNodeData(){var e;return null==(e=this.contextNodeData)?void 0:e.nodeData}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}get hasData(){const e=null!=this.properties.latitudeKey&&null!=this.properties.longitudeKey;return super.hasData&&(null!=this.topology||e)}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>{this.onLegendItemClick(e)})),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>{this.onLegendItemDoubleClick(e)})))}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}markerFactory(){const{shape:e}=this.properties;return new(Nu(e))}processData(e){return S(this,null,(function*(){var t,i;if(null==this.data||!this.properties.isValid())return;const{data:o,topology:a,sizeScale:n,colorScale:s}=this,{topologyIdKey:r,idKey:l,latitudeKey:h,longitudeKey:d,sizeKey:c,colorKey:u,labelKey:p,sizeDomain:y,colorRange:g}=this.properties,m=new Map;null==a||a.features.forEach((e=>{var t;const i=null==(t=e.properties)?void 0:t[r];null!=i&&m.set(i,e)}));const x=this.sizeScale.type,f=this.colorScale.type,v=null==(t=this.scale)?void 0:t.type,S=null!=h&&null!=d,{dataModel:M,processedData:D}=yield this.requestDataModel(e,o,{props:[...null!=l?[xu(l,v,{id:"idValue",includeProperty:!1}),xu(l,v,{id:"featureValue",includeProperty:!1,processor:()=>e=>m.get(e)})]:[],...S?[xu(h,v,{id:"latValue"}),xu(d,v,{id:"lonValue"})]:[],...p?[xu(p,"band",{id:"labelValue"})]:[],...c?[xu(c,x,{id:"sizeValue"})]:[],...u?[xu(u,f,{id:"colorValue"})]:[]]}),b=null!=l?M.resolveProcessedDataIndexById(this,"featureValue"):void 0,N=S?M.resolveProcessedDataIndexById(this,"latValue"):void 0,I=S?M.resolveProcessedDataIndexById(this,"lonValue"):void 0;if(this.topologyBounds=D.data.reduce(((e,t)=>{let{values:i}=t;const o=null!=b?i[b]:void 0,a=null==o?void 0:o.geometry;if(null!=a&&(e=Dd(a,e)),null!=N&&null!=I){const t=i[I],o=i[N];e=pd(e,t,o,t,o)}return e}),void 0),null!=c){const e=M.resolveProcessedDataIndexById(this,"sizeValue"),t=null!=(i=D.domain.values[e])?i:[];n.domain=null!=y?y:t}if(null!=g&&this.isColorScaleValid()){const e=M.resolveProcessedDataIndexById(this,"colorValue");s.domain=D.domain.values[e],s.range=g,s.update()}this.animationState.transition("updateData")}))}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue"),a=i.data.length,n=uu(this,i.defs.values[o].missing);return!(0===a||a===n)}getLabelDatum(e,t,i,o,a,n){if(null==t)return;const{idKey:s,idName:r,latitudeKey:l,latitudeName:h,longitudeKey:d,longitudeName:c,sizeKey:u,sizeName:p,colorKey:y,colorName:g,labelKey:m,labelName:x,label:f}=this.properties,{placement:v}=f,S=this.getLabelText(f,{value:t,datum:e,idKey:s,idName:r,latitudeKey:l,latitudeName:h,longitudeKey:d,longitudeName:c,sizeKey:u,sizeName:p,colorKey:y,colorName:g,labelKey:m,labelName:x});if(null==S)return;const{width:M,height:D}=bu.getTextSize(String(S),n);return{point:{x:i,y:o,size:a},label:{width:M,height:D,text:S},marker:Nu(this.properties.shape),placement:v}}createNodeData(){return S(this,null,(function*(){var e;const{id:t,dataModel:i,processedData:o,colorScale:a,sizeScale:n,properties:s,scale:r}=this,{idKey:l,latitudeKey:h,longitudeKey:d,sizeKey:c,colorKey:u,labelKey:p,label:y}=s;if(null==i||null==o||null==r)return;const g=this.isColorScaleValid(),m=null!=h&&null!=d,x=null!=l?i.resolveProcessedDataIndexById(this,"idValue"):void 0,f=null!=l?i.resolveProcessedDataIndexById(this,"featureValue"):void 0,v=m?i.resolveProcessedDataIndexById(this,"latValue"):void 0,S=m?i.resolveProcessedDataIndexById(this,"lonValue"):void 0,M=null!=p?i.resolveProcessedDataIndexById(this,"labelValue"):void 0,D=null!=c?i.resolveProcessedDataIndexById(this,"sizeValue"):void 0,b=null!=u?i.resolveProcessedDataIndexById(this,"colorValue"):void 0,N=null!=(e=s.maxSize)?e:s.size;n.range=[Math.min(s.size,N),N];const I=y.getFont();let k;null!=x&&null!=f&&(k=new Map,o.data.forEach((e=>{let{values:t}=e;var i;const o=t[x],a=null==(i=t[f])?void 0:i.geometry,n=null!=a&&null!=r?kd(a,r):void 0;null!=o&&null!=n&&k.set(o,n)})));const T=[],A=[],O=[];o.data.forEach((e=>{let{datum:t,values:i}=e;const o=null!=x?i[x]:void 0,l=null!=S?i[S]:void 0,d=null!=v?i[v]:void 0,c=null!=b?i[b]:void 0,u=null!=D?i[D]:void 0,p=null!=M?i[M]:void 0,y=g&&null!=c?a.convert(c):void 0,m=null!=u?n.convert(u,{clampMode:"clamped"}):s.size,f=null!=o?null==k?void 0:k.get(o):void 0;if(null!=o&&null==kd&&O.push(o),null!=l&&null!=d){const[e,i]=r.convert([l,d]),a=this.getLabelDatum(t,p,e,i,m,I);a&&A.push(a),T.push({series:this,itemId:h,datum:t,index:-1,fill:y,idValue:o,lonValue:l,latValue:d,labelValue:p,sizeValue:u,colorValue:c,point:{x:e,y:i,size:m},midPoint:{x:e,y:i}})}else null!=f&&jc(f,1).forEach(((e,i)=>{let[a,n]=e;const s=this.getLabelDatum(t,p,a,n,m,I);s&&A.push(s),T.push({series:this,itemId:h,datum:t,index:i,fill:y,idValue:o,lonValue:l,latValue:d,labelValue:p,sizeValue:u,colorValue:c,point:{x:a,y:n,size:m},midPoint:{x:a,y:n}})}))}));if(O.length>10){const e=O.length-10;O.length=10,O.push("(+".concat(e," more)"))}return O.length>0&&ku.warnOnce("some data items do not have matches in the provided topology",O),{itemId:t,nodeData:T,labelData:A}}))}updateSelections(){return S(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(e){return S(this,arguments,(function(e){var t=this;let{seriesRect:i}=e;return function*(){var e,o,a;const{labelSelection:n,markerSelection:s,highlightMarkerSelection:r}=t;yield t.updateSelections(),t.contentGroup.visible=t.visible,t.contentGroup.opacity=t.getOpacity();let l=null==(e=t.ctx.highlightManager)?void 0:e.getActiveHighlight();null==l||l.series===t&&null!=l.datum||(l=void 0);const h=null!=(a=null==(o=t.contextNodeData)?void 0:o.nodeData)?a:[];t.labelSelection=yield t.updateLabelSelection({labelSelection:n}),yield t.updateLabelNodes({labelSelection:n}),t.markerSelection=yield t.updateMarkerSelection({markerData:h,markerSelection:s}),yield t.updateMarkerNodes({markerSelection:s,isHighlight:!1,highlightedDatum:l}),t.highlightMarkerSelection=yield t.updateMarkerSelection({markerData:null!=l?[l]:[],markerSelection:r}),yield t.updateMarkerNodes({markerSelection:r,isHighlight:!0,highlightedDatum:l});t.checkResize(i)&&t.animationState.transition("resize"),t.animationState.transition("update")}()}))}updateLabelSelection(e){return S(this,null,(function*(){var t,i;const o=null!=(i=this.isLabelEnabled()?null==(t=this.chart)?void 0:t.placeLabels().get(this):void 0)?i:[];return e.labelSelection.update(o)}))}updateLabelNodes(e){return S(this,null,(function*(){const{labelSelection:t}=e,{color:i,fontStyle:o,fontWeight:a,fontSize:n,fontFamily:s}=this.properties.label;t.each(((e,t)=>{let{x:r,y:l,width:h,height:d,text:c}=t;e.visible=!0,e.x=r+h/2,e.y=l+d/2,e.text=c,e.fill=i,e.fontStyle=o,e.fontWeight=a,e.fontSize=n,e.fontFamily=s,e.textAlign="center",e.textBaseline="middle"}))}))}updateMarkerSelection(e){return S(this,null,(function*(){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,(e=>pu([e.index,e.idValue,e.lonValue,e.latValue])))}))}updateMarkerNodes(e){return S(this,null,(function*(){const{id:t,properties:i,ctx:{callbackCache:o}}=this,{markerSelection:a,isHighlight:n,highlightedDatum:s}=e,{idKey:r,latitudeKey:l,longitudeKey:h,labelKey:d,sizeKey:c,colorKey:u,fill:p,fillOpacity:y,stroke:g,strokeOpacity:m,formatter:x}=i,f=n?i.highlightStyle.item:void 0,v=this.getStrokeWidth(i.strokeWidth);a.each(((e,i)=>{var a,S,M,D,b,N,I,k,T,A,O;const{datum:L,point:E}=i;let _;if(null!=x){const e={seriesId:t,datum:i.datum,itemId:i.itemId,size:E.size,idKey:r,latitudeKey:l,longitudeKey:h,labelKey:d,sizeKey:c,colorKey:u,fill:p,fillOpacity:y,stroke:g,strokeWidth:v,strokeOpacity:m,highlighted:n};_=o.call(x,e)}e.size=E.size,e.fill=null!=(M=null!=(S=null!=(a=null==f?void 0:f.fill)?a:null==_?void 0:_.fill)?S:i.fill)?M:p,e.fillOpacity=null!=(b=null!=(D=null==f?void 0:f.fillOpacity)?D:null==_?void 0:_.fillOpacity)?b:y,e.stroke=null!=(I=null!=(N=null==f?void 0:f.stroke)?N:null==_?void 0:_.stroke)?I:g,e.strokeWidth=null!=(T=null!=(k=null==f?void 0:f.strokeWidth)?k:null==_?void 0:_.strokeWidth)?T:v,e.strokeOpacity=null!=(O=null!=(A=null==f?void 0:f.strokeOpacity)?A:null==_?void 0:_.strokeOpacity)?O:m,e.translationX=E.x,e.translationY=E.y,e.zIndex=n||null==s||L!==s.datum?0:1}))}))}onLegendItemClick(e){const{legendItemName:t}=this.properties,{enabled:i,itemId:o,series:a}=e,n=null!=t&&t===e.legendItemName;(a.id===this.id||n)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,{legendItemName:n}=this.properties,s=null!=n&&n===e.legendItemName;o.id===this.id||s||t&&1===a?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isProcessedDataAnimatable(){return!0}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:e}=this.ctx,t={fromFn:(e,t,i)=>"removed"===i?{scalingX:1,scalingY:1}:null==e.previousDatum?{scalingX:0,scalingY:0}:{scalingX:e.scalingX,scalingY:e.scalingY},toFn:(e,t,i)=>"removed"===i?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}};du(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){var e,t;return null!=(t=null==(e=this.contextNodeData)?void 0:e.labelData)?t:[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(e){var t;const{x:i,y:o}=this.rootGroup.transformPoint(e.x,e.y);let a,n=1/0;return null==(t=this.contextNodeData)||t.nodeData.forEach((e=>{const{x:t,y:s,size:r}=e.point,l=Math.max(Math.abs(t-i)-r,0),h=Math.max(Math.abs(s-o)-r,0),d=l*l+h*h;d<n&&(n=d,a=e)})),null!=a?{datum:a,distance:Math.sqrt(n)}:void 0}getLegendData(e){var t,i,o,a,n,s;const{processedData:r,dataModel:l}=this;if(null==r||null==l)return[];const{title:h,legendItemName:d,idName:c,idKey:u,colorKey:p,colorName:y,colorRange:g,visible:m,shape:x,fill:f,stroke:v,fillOpacity:S,strokeOpacity:M,strokeWidth:D}=this.properties;if("gradient"===e&&null!=p&&null!=g){const e=r.domain.values[l.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:m,seriesId:this.id,colorName:y,colorRange:g,colorDomain:e}]}if("category"===e){return[{legendType:"category",id:this.id,itemId:null!=(o=null!=(i=null!=(t=null!=d?d:h)?t:c)?i:u)?o:this.id,seriesId:this.id,enabled:m,label:{text:null!=(s=null!=(n=null!=(a=null!=d?d:h)?a:c)?n:u)?s:this.id},marker:{shape:x,fill:f,fillOpacity:S,stroke:v,strokeWidth:D,strokeOpacity:M},legendItemName:d}]}return[]}getTooltipHtml(e){var t,i,a,n;const{id:s,processedData:r,ctx:{callbackCache:l},properties:h}=this;if(!r||!this.properties.isValid())return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:d,idKey:c,idName:u,latitudeKey:p,longitudeKey:y,sizeKey:m,sizeName:x,colorKey:f,colorName:v,labelKey:S,labelName:M,formatter:D,tooltip:b,latitudeName:N,longitudeName:I}=h,{datum:k,fill:T,idValue:A,latValue:O,lonValue:L,sizeValue:E,colorValue:_,labelValue:R,itemId:C}=e,w=null!=(i=Iu(null!=(t=h.title)?t:d))?i:"",P=[];null!=A&&P.push(Iu((null!=u?"".concat(u,": "):"")+A)),null!=_&&P.push(Iu((null!=v?v:f)+": "+_)),null!=E&&P.push(Iu((null!=x?x:m)+": "+E)),null==R||null!=c&&c===S||P.push(Iu((null!=M?M:S)+": "+R)),null!=O&&null!=L&&P.push(Iu("".concat(Math.abs(O).toFixed(4),"\xb0 ").concat(O>=0?"N":"S",", ").concat(Math.abs(L).toFixed(4),"\xb0 ").concat(O>=0?"W":"E")));const z=P.join("<br>");let K;D&&(K=l.call(D,{seriesId:s,datum:k,latitudeKey:p,longitudeKey:y,fill:T,highlighted:!1}));const V=null!=(n=null!=(a=null==K?void 0:K.fill)?a:T)?n:h.fill;return b.toTooltipHtml({title:w,content:z,backgroundColor:V},g({seriesId:s,datum:k,idKey:c,latitudeKey:p,longitudeKey:y,title:w,color:V,colorKey:f,colorName:v,idName:u,itemId:C,labelKey:S,labelName:M,latitudeName:N,longitudeName:I,sizeKey:m,sizeName:x},this.getModuleTooltipParams()))}getFormattedMarkerStyle(e){const{id:t,properties:i,ctx:{callbackCache:o}}=this,{datum:a,point:n}=e,{idKey:s,latitudeKey:r,longitudeKey:l,labelKey:h,sizeKey:d,colorKey:c,fill:u,fillOpacity:p,stroke:y,strokeOpacity:g,formatter:m}=i,x=this.getStrokeWidth(i.strokeWidth),f={seriesId:t,datum:a.datum,itemId:a.itemId,size:n.size,idKey:s,latitudeKey:r,longitudeKey:l,labelKey:h,sizeKey:d,colorKey:c,fill:u,fillOpacity:p,stroke:y,strokeWidth:x,strokeOpacity:g,highlighted:!0};if(void 0!==m){const e=o.call(m,f);if(void 0!==(null==e?void 0:e.size))return{size:e.size}}return{size:e.point.size}}computeFocusBounds(e){return fu(this,e)}};Tu.className="MapMarkerSeries",Tu.type="map-marker",f([hu(Pd,{optional:!0,property:"topology"})],Tu.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:Au,DEFAULT_LABEL_COLOUR:Ou,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Lu,singleSeriesPaletteFactory:Eu}=o._Theme,_u={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",instanceConstructor:Tu,themeTemplate:m(g({},rd),{series:{__extends__:Au,maxSize:30,fillOpacity:.5,label:{color:Ou}}}),paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:o,themeTemplateParameters:a}=e,{fill:n,stroke:s}=Eu(e),{properties:r}=a,l=r.get(Lu),{fills:h}=t(i);return{fill:n,stroke:s,colorRange:o?[h[0],h[1]]:l}}},{COLOR_STRING:Ru,LINE_DASH:Cu,OBJECT:wu,POSITIVE_NUMBER:Pu,RATIO:zu,Validate:Ku,SeriesProperties:Vu,SeriesTooltip:Bu}=o._ModuleSupport,Fu=class extends Vu{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new Bu}};f([Ku(Pd,{optional:!0})],Fu.prototype,"topology",2),f([Ku(Ru)],Fu.prototype,"fill",2),f([Ku(zu)],Fu.prototype,"fillOpacity",2),f([Ku(Ru)],Fu.prototype,"stroke",2),f([Ku(zu)],Fu.prototype,"strokeOpacity",2),f([Ku(Pu)],Fu.prototype,"strokeWidth",2),f([Ku(Cu)],Fu.prototype,"lineDash",2),f([Ku(Pu)],Fu.prototype,"lineDashOffset",2),f([Ku(wu)],Fu.prototype,"tooltip",2);var{createDatumId:Uu,Series:ju,SeriesNodePickMode:Wu,Validate:Yu}=o._ModuleSupport,{Selection:Gu,Group:Hu,PointerEvents:Xu}=o._Scene,{Logger:Qu}=o._Util,Zu=class extends ju{constructor(e){super({moduleCtx:e,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[Wu.EXACT_SHAPE_MATCH]}),this.properties=new Fu,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Hu({name:"itemGroup"})),this.datumSelection=Gu.select(this.itemGroup,(()=>this.nodeFactory()))}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}nodeFactory(){const e=new Md;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=Xu.None,e}processData(){return S(this,null,(function*(){const{topology:e}=this;this.topologyBounds=null==e?void 0:e.features.reduce(((e,t)=>{const i=t.geometry;return null==i?e:Dd(i,e)}),void 0),null==e&&Qu.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}))}createNodeData(){return S(this,null,(function*(){const{id:e,topology:t,scale:i}=this;if(null==t)return;const o=[];return t.features.forEach(((e,t)=>{const{geometry:a}=e,n=null!=a&&null!=i?kd(a,i):void 0;null!=n&&o.push({series:this,itemId:t,datum:e,index:t,projectedGeometry:n})})),{itemId:e,nodeData:o,labelData:[]}}))}updateSelections(){return S(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(){return S(this,null,(function*(){var e;const{datumSelection:t}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:i=[]}=null!=(e=this.contextNodeData)?e:{};this.datumSelection=yield this.updateDatumSelection({nodeData:i,datumSelection:t}),yield this.updateDatumNodes({datumSelection:t})}))}updateDatumSelection(e){return S(this,null,(function*(){return e.datumSelection.update(e.nodeData,void 0,(e=>Uu(e.index)))}))}updateDatumNodes(e){return S(this,null,(function*(){const{properties:t}=this,{datumSelection:i}=e,{fill:o,fillOpacity:a,stroke:n,strokeOpacity:s,lineDash:r,lineDashOffset:l}=t,h=this.getStrokeWidth(t.strokeWidth);i.each(((e,t)=>{const{projectedGeometry:i}=t;if(null==i)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=i,e.fill=o,e.fillOpacity=a,e.stroke=n,e.strokeWidth=h,e.strokeOpacity=s,e.lineDash=r,e.lineDashOffset=l}))}))}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT}pickFocus(e){}};Zu.className="MapShapeBackgroundSeries",Zu.type="map-shape-background",f([Yu(Pd,{optional:!0,property:"topology"})],Zu.prototype,"_chartTopology",2);var{DEFAULT_BACKGROUND_COLOUR:qu,DEFAULT_HIERARCHY_FILLS:Ju}=o._Theme,$u={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",instanceConstructor:Zu,themeTemplate:m(g({},rd),{series:{stroke:qu,strokeWidth:1}}),paletteFactory:e=>{let{themeTemplateParameters:t}=e;var i;const{properties:o}=t;return{fill:null==(i=o.get(Ju))?void 0:i[1]}}};function ep(e,t){let{aspectRatio:i,precision:o}=t;const a=Bc(e,o,((e,t,o,a)=>{const n=function(e,t,i,o){let a=!1,n=1/0;for(const s of e){let e=s[s.length-1],[r,l]=e;for(const h of s){const[s,d]=h;d>i!==l>i&&t<(r-s)*(i-d)/(l-d)+s&&(a=!a);const c=tp(e,h,t,i,o);n=Math.min(n,c),e=h,r=s,l=d}}return(a?1:-1)*n}(e,t,o,i),s=n+2*a*i;return{distance:n*Math.SQRT2,maxDistance:s*Math.SQRT2}}));if(null==a)return;const{x:n,y:s,distance:r}=a;return{x:n,y:s,maxWidth:r/Math.SQRT2}}function tp(e,t,i,o,a){const[n,s]=e,[r,l]=t,h=1/a,d=r-n,c=l-s,[u,p]=s<=l?e:t,[y,g]=n<=r?e:t,[m,x]=s<=l?t:e,[f,v]=n<=r?t:e;let S=1/0;if(0!==d){const e=c/d;for(let t=0;t<=1;t+=1){const a=0===t?h:-h,r=(e*n-s-a*i+o)/(e-a);if(r>=y&&r<=f){const e=2*Math.abs(i-r);S=Math.min(S,e)}}}else for(let k=0;k<=1;k+=1){const e=(0===k?h:-h)*(n-i)+o;if(e>=p&&e<=x){const t=2*Math.abs(o-e)*a;S=Math.min(S,t)}}const M=a,D=Math.abs((u-i)/(p-o)),b=Math.abs((m-i)/(x-o));if(x<o&&b<M){const e=2*Math.abs(o-x)*a;S=Math.min(S,e)}else if(p>o&&D<M){const e=2*Math.abs(o-p)*a;S=Math.min(S,e)}const N=Math.abs((g-o)/(y-i)),I=Math.abs((v-o)/(f-i));if(f<i&&I<h){const e=2*Math.abs(i-f);S=Math.min(S,e)}else if(y>i&&N<h){const e=2*Math.abs(i-y);S=Math.min(S,e)}return S}function ip(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function op(e,t,i,o,a,n){const s=a-n/2,r=a+n/2,[l,h]=t,[d,c]=i,u=d-l,p=c-h,[y,g]=l<=d?t:i,[m,x]=l<=d?i:t;if(0!==u){const t=p/u;for(let i=0;i<=1;i+=1){const a=((0===i?s:r)-h)/t+l;a>=y&&a<=m&&ip(e,o,a)}}else Math.max(s,Math.min(h,c))<=Math.min(r,Math.max(h,c))&&ip(e,o,l);return m<o&&x>=s&&x<=r?ip(e,o,m):y>o&&g>=s&&g<=r&&ip(e,o,y),e}var{AND:ap,ARRAY:np,COLOR_STRING:sp,COLOR_STRING_ARRAY:rp,FUNCTION:lp,LINE_DASH:hp,OBJECT:dp,POSITIVE_NUMBER:cp,RATIO:up,STRING:pp,Validate:yp,SeriesProperties:gp,SeriesTooltip:mp}=o._ModuleSupport,xp=class extends gp{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new Dh,this.tooltip=new mp}};f([yp(Pd,{optional:!0})],xp.prototype,"topology",2),f([yp(pp,{optional:!0})],xp.prototype,"title",2),f([yp(pp,{optional:!0})],xp.prototype,"legendItemName",2),f([yp(pp)],xp.prototype,"idKey",2),f([yp(pp,{optional:!0})],xp.prototype,"idName",2),f([yp(pp)],xp.prototype,"topologyIdKey",2),f([yp(pp,{optional:!0})],xp.prototype,"labelKey",2),f([yp(pp,{optional:!0})],xp.prototype,"labelName",2),f([yp(pp,{optional:!0})],xp.prototype,"colorKey",2),f([yp(pp,{optional:!0})],xp.prototype,"colorName",2),f([yp(ap(rp,np.restrict({minLength:1})),{optional:!0})],xp.prototype,"colorRange",2),f([yp(sp)],xp.prototype,"fill",2),f([yp(up)],xp.prototype,"fillOpacity",2),f([yp(sp)],xp.prototype,"stroke",2),f([yp(up)],xp.prototype,"strokeOpacity",2),f([yp(cp)],xp.prototype,"strokeWidth",2),f([yp(hp)],xp.prototype,"lineDash",2),f([yp(cp)],xp.prototype,"lineDashOffset",2),f([yp(cp)],xp.prototype,"padding",2),f([yp(lp,{optional:!0})],xp.prototype,"formatter",2),f([yp(dp)],xp.prototype,"label",2),f([yp(dp)],xp.prototype,"tooltip",2);var{getMissCount:fp,createDatumId:vp,DataModelSeries:Sp,SeriesNodePickMode:Mp,valueProperty:Dp,Validate:bp}=o._ModuleSupport,{ColorScale:Np}=o._Scale,{Group:Ip,Selection:kp,Text:Tp,PointerEvents:Ap}=o._Scene,{sanitizeHtml:Op,Logger:Lp}=o._Util,Ep=o._ModuleSupport.MercatorScale.fixedScale(),_p=class extends Sp{constructor(e){super({moduleCtx:e,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[Mp.EXACT_SHAPE_MATCH,Mp.NEAREST_NODE]}),this.properties=new xp,this._chartTopology=void 0,this.colorScale=new Np,this.itemGroup=this.contentGroup.appendChild(new Ip({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new Ip({name:"itemLabelGroup"})),this.datumSelection=kp.select(this.itemGroup,(()=>this.nodeFactory())),this.labelSelection=kp.select(this.itemLabelGroup,Tp),this.highlightDatumSelection=kp.select(this.highlightNode,(()=>this.nodeFactory())),this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=Ap.None,this.showFocusBox=!1}getNodeData(){var e;return null==(e=this.contextNodeData)?void 0:e.nodeData}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}get hasData(){return super.hasData&&null!=this.topology}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>{this.onLegendItemClick(e)})),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>{this.onLegendItemDoubleClick(e)})))}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}nodeFactory(){const e=new Md;return e.renderMode=1,e.lineJoin="round",e}processData(e){return S(this,null,(function*(){var t;if(null==this.data||!this.properties.isValid())return;const{data:i,topology:o,colorScale:a}=this,{topologyIdKey:n,idKey:s,colorKey:r,labelKey:l,colorRange:h}=this.properties,d=new Map;null==o||o.features.forEach((e=>{var t;const i=null==(t=e.properties)?void 0:t[n];null!=i&&Id(e.geometry,1)&&d.set(i,e)}));const c=this.colorScale.type,u=null==(t=this.scale)?void 0:t.type,{dataModel:p,processedData:y}=yield this.requestDataModel(e,i,{props:[Dp(s,u,{id:"idValue",includeProperty:!1}),Dp(s,u,{id:"featureValue",includeProperty:!1,processor:()=>e=>d.get(e)}),...l?[Dp(l,"band",{id:"labelValue"})]:[],...r?[Dp(r,c,{id:"colorValue"})]:[]]}),g=p.resolveProcessedDataIndexById(this,"featureValue");if(this.topologyBounds=y.data.reduce(((e,t)=>{let{values:i}=t;const o=i[g],a=null==o?void 0:o.geometry;return null==a?e:Dd(a,e)}),void 0),null!=h&&this.isColorScaleValid()){const e=p.resolveProcessedDataIndexById(this,"colorValue");a.domain=y.domain.values[e],a.range=h,a.update()}null==o&&Lp.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}))}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue"),a=i.data.length,n=fp(this,i.defs.values[o].missing);return!(0===a||a===n)}getLabelLayout(e,t,i,o,a){if(null==t||null==o)return;const{idKey:n,idName:s,colorKey:r,colorName:l,labelKey:h,labelName:d,padding:c,label:u}=this.properties,p=this.getLabelText(u,{value:t,datum:e,idKey:n,idName:s,colorKey:r,colorName:l,labelKey:h,labelName:d});if(null==p)return;const y=Tp.getTextSize(String(p),i),g=p.split("\n").length,m=(y.width+2*c)/(g*Mh.lineHeight(u.fontSize)+2*c);if((null==a?void 0:a.geometry)===o&&(null==a?void 0:a.labelText)===p&&(null==a?void 0:a.aspectRatio)===m)return a;const x=bd(kd(o,Ep));if(null==x)return;const f=ep(x,{aspectRatio:m,precision:.001});if(null==f)return;const{x:v,y:S,maxWidth:M}=f;return{geometry:o,labelText:p,aspectRatio:m,x:v,y:S,maxWidth:M,fixedPolygon:x}}getLabelDatum(e,t){const{scale:i}=this;if(null==i)return;const{padding:o,label:a}=this.properties,{labelText:n,aspectRatio:s,x:r,y:l,maxWidth:h,fixedPolygon:d}=e,c={width:Math.ceil(h*t),height:Math.ceil(h*t/s),meta:r},u=Nh(n,a,{padding:o},((e,i)=>{if(!i)return c;const o=function(e,t,i,o){const a={minX:-1/0,maxX:1/0};for(const r of e){let e=r[r.length-1];for(const n of r)op(a,e,n,t,i,o),e=n}const{minX:n,maxX:s}=a;return Number.isFinite(n)&&Number.isFinite(s)?{x:t+(n+s)/2,width:s-n}:{x:t,width:0}}(d,r,l,e/t);return{width:o.width*t,height:e,meta:o.x}}));if(null==u)return;const[{text:p,fontSize:y,lineHeight:g,width:m},x]=u;if(p===Tp.ellipsis)return;const f=m<c.width?r:x,v=this.scale.convert(Ep.invert([f,l]));return{x:v[0],y:v[1],text:p,fontSize:y,lineHeight:g}}createNodeData(){return S(this,null,(function*(){const{id:e,dataModel:t,processedData:i,colorScale:o,properties:a,scale:n,previousLabelLayouts:s}=this,{idKey:r,colorKey:l,labelKey:h,label:d,fill:c}=a;if(null==t||null==i)return;const u=null!=n?(n.range[1][0]-n.range[0][0])/n.bounds.width:NaN,p=this.isColorScaleValid(),y=t.resolveProcessedDataIndexById(this,"idValue"),g=t.resolveProcessedDataIndexById(this,"featureValue"),m=null!=h?t.resolveProcessedDataIndexById(this,"labelValue"):void 0,x=null!=l?t.resolveProcessedDataIndexById(this,"colorValue"):void 0,f=d.getFont(),v=new Map;this.previousLabelLayouts=v;const S=[],M=[],D=[];i.data.forEach((e=>{let{datum:t,values:i}=e;var a;const l=i[y],h=null!=x?i[x]:void 0,d=null!=m?i[m]:void 0,b=null==(a=i[g])?void 0:a.geometry;null==b&&D.push(l);const N=p&&null!=h?o.convert(h):void 0,I=this.getLabelLayout(t,d,f,b,null==s?void 0:s.get(l));null!=I&&v.set(l,I);const k=null!=I&&null!=n?this.getLabelDatum(I,u):void 0;null!=k&&M.push(k);const T=null!=b&&null!=n?kd(b,n):void 0;S.push({series:this,itemId:r,datum:t,idValue:l,colorValue:h,labelValue:d,fill:null!=N?N:c,projectedGeometry:T})}));if(D.length>10){const e=D.length-10;D.length=10,D.push("(+".concat(e," more)"))}return D.length>0&&Lp.warnOnce("some data items do not have matches in the provided topology",D),{itemId:e,nodeData:S,labelData:M}}))}updateSelections(){return S(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(){return S(this,null,(function*(){var e,t,i,o,a;const{datumSelection:n,labelSelection:s,highlightDatumSelection:r}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let l=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight();null==l||l.series===this&&null!=l.datum||(l=void 0);const h=null!=(i=null==(t=this.contextNodeData)?void 0:t.nodeData)?i:[],d=null!=(a=null==(o=this.contextNodeData)?void 0:o.labelData)?a:[];this.datumSelection=yield this.updateDatumSelection({nodeData:h,datumSelection:n}),yield this.updateDatumNodes({datumSelection:n,isHighlight:!1}),this.labelSelection=yield this.updateLabelSelection({labelData:d,labelSelection:s}),yield this.updateLabelNodes({labelSelection:s}),this.highlightDatumSelection=yield this.updateDatumSelection({nodeData:null!=l?[l]:[],datumSelection:r}),yield this.updateDatumNodes({datumSelection:r,isHighlight:!0})}))}updateDatumSelection(e){return S(this,null,(function*(){return e.datumSelection.update(e.nodeData,void 0,(e=>vp(e.idValue)))}))}updateDatumNodes(e){return S(this,null,(function*(){const{id:t,properties:i,ctx:{callbackCache:o}}=this,{datumSelection:a,isHighlight:n}=e,{idKey:s,colorKey:r,labelKey:l,fillOpacity:h,stroke:d,strokeOpacity:c,lineDash:u,lineDashOffset:p,formatter:y}=i,g=n?i.highlightStyle.item:void 0,m=this.getStrokeWidth(i.strokeWidth);a.each(((e,i)=>{var a,x,f,v,S,M,D,b,N,I,k,T,A,O;const{projectedGeometry:L}=i;if(null==L)return e.visible=!1,void(e.projectedGeometry=void 0);let E;if(null!=y){const e={seriesId:t,datum:i.datum,itemId:i.itemId,idKey:s,colorKey:r,labelKey:l,fill:i.fill,fillOpacity:h,strokeOpacity:c,stroke:d,strokeWidth:m,lineDash:u,lineDashOffset:p,highlighted:n};E=o.call(y,e)}e.visible=!0,e.projectedGeometry=L,e.fill=null!=(x=null!=(a=null==g?void 0:g.fill)?a:null==E?void 0:E.fill)?x:i.fill,e.fillOpacity=null!=(v=null!=(f=null==g?void 0:g.fillOpacity)?f:null==E?void 0:E.fillOpacity)?v:h,e.stroke=null!=(M=null!=(S=null==g?void 0:g.stroke)?S:null==E?void 0:E.stroke)?M:d,e.strokeWidth=null!=(b=null!=(D=null==g?void 0:g.strokeWidth)?D:null==E?void 0:E.strokeWidth)?b:m,e.strokeOpacity=null!=(I=null!=(N=null==g?void 0:g.strokeOpacity)?N:null==E?void 0:E.strokeOpacity)?I:c,e.lineDash=null!=(T=null!=(k=null==g?void 0:g.lineDash)?k:null==E?void 0:E.lineDash)?T:u,e.lineDashOffset=null!=(O=null!=(A=null==g?void 0:g.lineDashOffset)?A:null==E?void 0:E.lineDashOffset)?O:p}))}))}updateLabelSelection(e){return S(this,null,(function*(){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}))}updateLabelNodes(e){return S(this,null,(function*(){const{labelSelection:t}=e,{color:i,fontStyle:o,fontWeight:a,fontFamily:n}=this.properties.label;t.each(((e,t)=>{let{x:s,y:r,text:l,fontSize:h,lineHeight:d}=t;e.visible=!0,e.x=s,e.y=r,e.text=l,e.fill=i,e.fontStyle=o,e.fontWeight=a,e.fontSize=h,e.lineHeight=d,e.fontFamily=n,e.textAlign="center",e.textBaseline="middle"}))}))}onLegendItemClick(e){const{legendItemName:t}=this.properties,{enabled:i,itemId:o,series:a}=e,n=null!=t&&t===e.legendItemName;(a.id===this.id||n)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,{legendItemName:n}=this.properties,s=null!=n&&n===e.legendItemName;o.id===this.id||s||t&&1===a?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(e){let t,{x:i,y:o}=e,a=1/0;return this.datumSelection.each(((e,n)=>{const s=e.distanceToPoint(i,o);s<a&&(a=s,t=n)})),null!=t?{datum:t,distance:a}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if((null==t?void 0:t.datum)===e)return t.point;const i=e.projectedGeometry,o=null!=i?bd(i):void 0,a=null!=o?Uc(o,2):void 0,n=null!=a?{x:a[0],y:a[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:n},n}getLegendData(e){var t,i,o,a;const{processedData:n,dataModel:s}=this;if(null==n||null==s)return[];const{title:r,legendItemName:l,idKey:h,idName:d,fill:c,fillOpacity:u,stroke:p,strokeWidth:y,strokeOpacity:g,colorKey:m,colorName:x,colorRange:f,visible:v}=this.properties;if("gradient"===e&&null!=m&&null!=f){const e=n.domain.values[s.resolveProcessedDataIndexById(this,"colorValue")];return[{legendType:"gradient",enabled:v,seriesId:this.id,colorName:x,colorRange:f,colorDomain:e}]}if("category"===e){return[{legendType:"category",id:this.id,itemId:null!=(i=null!=(t=null!=l?l:r)?t:d)?i:h,seriesId:this.id,enabled:v,label:{text:null!=(a=null!=(o=null!=l?l:r)?o:d)?a:h},marker:{fill:c,fillOpacity:u,stroke:p,strokeWidth:y,strokeOpacity:g},legendItemName:l}]}return[]}getTooltipHtml(e){var t,i,a;const{id:n,processedData:s,ctx:{callbackCache:r},properties:l}=this;if(!s||!l.isValid())return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{legendItemName:h,idKey:d,idName:c,colorKey:u,colorName:p,labelKey:y,labelName:m,stroke:x,strokeWidth:f,formatter:v,tooltip:S}=l,{datum:M,fill:D,idValue:b,colorValue:N,labelValue:I,itemId:k}=e,T=null!=(i=Op(null!=(t=l.title)?t:h))?i:"",A=[];A.push(Op((null!=c?"".concat(c,": "):"")+b)),null!=N&&A.push(Op((null!=p?p:u)+": "+N)),null!=I&&y!==d&&A.push(Op((null!=m?m:y)+": "+I));const O=A.join("<br>");let L;v&&(L=r.call(v,{seriesId:n,datum:M,idKey:d,fill:D,stroke:x,strokeWidth:this.getStrokeWidth(f),highlighted:!1}));const E=null!=(a=null==L?void 0:L.fill)?a:D;return S.toTooltipHtml({title:T,content:O,backgroundColor:E},g({seriesId:n,datum:M,idKey:d,title:T,color:E,colorKey:u,colorName:p,idName:c,itemId:k,labelKey:y,labelName:m},this.getModuleTooltipParams()))}computeFocusBounds(e){return ac(this,e)}};_p.className="MapShapeSeries",_p.type="map-shape",f([bp(Pd,{optional:!0,property:"topology"})],_p.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:Rp,DEFAULT_INVERTED_LABEL_COLOUR:Cp,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:wp,DEFAULT_BACKGROUND_COLOUR:Pp,singleSeriesPaletteFactory:zp}=o._Theme,Kp={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",instanceConstructor:_p,themeTemplate:m(g({},rd),{series:{__extends__:Rp,fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:Cp,fontWeight:"bold",overflowStrategy:"hide"}}}),paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:o,themeTemplateParameters:a}=e,{fill:n}=zp(e),{properties:s}=a,r=s.get(wp),{fills:l}=t(i);return{fill:n,stroke:s.get(Pp),colorRange:o?[l[0],l[1]]:r}}},{isDefined:Vp,ChartAxisDirection:Bp,PolarAxis:Fp,diff:Up,fixNumericExtent:jp,groupAccumulativeValueProperty:Wp,keyProperty:Yp,normaliseGroupTo:Gp,resetLabelFn:Hp,seriesLabelFadeInAnimation:Xp,seriesLabelFadeOutAnimation:Qp,valueProperty:Zp,animationValidation:qp,isFiniteNumber:Jp,SeriesNodePickMode:$p,computeSectorFocusBounds:ey}=o._ModuleSupport,{BandScale:ty}=o._Scale,{motion:iy}=o._Scene,{isNumber:oy,normalizeAngle360:ay,sanitizeHtml:ny}=o._Util,sy=class extends o._ModuleSupport.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},ry=class extends o._ModuleSupport.PolarSeries{constructor(e,t){let{animationResetFns:i}=t;super({moduleCtx:e,useLabelLayer:!0,canHaveAxes:!0,pickModes:[$p.EXACT_SHAPE_MATCH],animationResetFns:m(g({},i),{label:Hp})}),this.NodeEvent=sy,this.groupScale=new ty,this.circleCache={r:0,cx:0,cy:0}}addChartEventListeners(){var e,t;this.destroyFns.push(null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-click",(e=>this.onLegendItemClick(e))),null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-double-click",(e=>this.onLegendItemDoubleClick(e))))}getSeriesDomain(e){const{axes:t,dataModel:i,processedData:o}=this;if(!o||!i)return[];if(e===Bp.X)return i.getDomain(this,"angleValue","key",o);{const e=t[Bp.Y],a=i.getDomain(this,"radiusValue-end","value",o),n=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return jp(n,e)}}processData(e){return S(this,null,(function*(){var t,i;const{angleKey:o,radiusKey:a,normalizedTo:n,visible:s}=this.properties,r=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid()||!s&&!r)return;const l=this.getStackId(),h="".concat(l,"-trailing"),d=[];Vp(n)&&d.push(Gp([l,h],Math.abs(n),"range")),r&&this.processedData&&d.push(Up(this.processedData)),r&&d.push(qp());const c=s||!r?{}:{forceValue:0},u=null==(t=this.axes[Bp.Y])?void 0:t.scale.type,p=null==(i=this.axes[Bp.X])?void 0:i.scale.type;yield this.requestDataModel(e,this.data,{props:[Yp(o,p,{id:"angleValue"}),Zp(a,u,g({id:"radiusValue-raw",invalidValue:null},c)),...Wp(a,"normal","current",g({id:"radiusValue-end",rangeId:"radiusValue-range",invalidValue:null,groupId:l,separateNegative:!0},c),u),...Wp(a,"trailing","current",g({id:"radiusValue-start",invalidValue:null,groupId:h,separateNegative:!0},c),u),...d]}),this.animationState.transition("updateData")}))}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return(e!==o.r||t!==o.cx||i!==o.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}isRadiusAxisReversed(){var e;return null==(e=this.axes[Bp.Y])?void 0:e.isReversed()}maybeRefreshNodeData(){return S(this,null,(function*(){var e;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=null!=(e=yield this.createNodeData())?e:{};this.nodeData=t,this.nodeDataRefresh=!1}))}getAxisInnerRadius(){const e=this.axes[Bp.Y];return e instanceof Fp?this.radius*e.innerRadiusRatio:0}createNodeData(){return S(this,null,(function*(){var e;const{processedData:t,dataModel:i,groupScale:o}=this;if(!t||!i||!this.properties.isValid())return;const a=this.axes[Bp.X],n=this.axes[Bp.Y],s=null==a?void 0:a.scale,r=null==n?void 0:n.scale;if(!s||!r)return;const l=i.resolveProcessedDataIndexById(this,"radiusValue-start"),h=i.resolveProcessedDataIndexById(this,"radiusValue-end"),d=i.resolveProcessedDataIndexById(this,"radiusValue-range"),c=i.resolveProcessedDataIndexById(this,"radiusValue-raw");let u=0,p=0;a instanceof be&&(u=a.groupPaddingInner,p=a.paddingInner);const y=(null!=(e=s.bandwidth)?e:0)*(1-p),{index:g,visibleGroupCount:m}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);o.domain=Array.from({length:m}).map(((e,t)=>String(t))),o.range=[-y/2,y/2],o.paddingInner=m>1?u:0;const x=this.isRadiusAxisReversed(),f=x?this.radius:this.getAxisInnerRadius(),v=x?this.getAxisInnerRadius():this.radius,S=v+f,{angleKey:M,radiusKey:D,angleName:b,radiusName:N,label:I}=this.properties,k=(e,t,i,o)=>{const a=this.getLabelText(I,{value:t,datum:e,angleKey:M,radiusKey:D,angleName:b,radiusName:N},(e=>Jp(e)?e.toFixed(2):String(e)));if(a)return{x:i,y:o,text:a,textAlign:"center",textBaseline:"middle"}},T=[],A={itemId:D,nodeData:T,labelData:T};return this.visible?(t.data.forEach(((e,t,i)=>{var a;const{datum:n,keys:u,values:p,aggValues:y}=e,m=u[0],M=p[c],D=M>=0&&!Object.is(M,-0),b=p[l],N=p[h],I=null!=(a=null==y?void 0:y[d][D?1:0])?a:0,A=D===x;if(void 0===b||void 0===N)return;let O,L;if(1===i.length)O=-.5*Math.PI,L=1.5*Math.PI;else{const e=s.convert(m);O=ay(e+o.convert(String(g))),L=ay(O+o.bandwidth)}const E=O+o.bandwidth/2,_=S-r.convert(b),R=S-r.convert(N),C=(_+R)/2,w=S-r.convert(0),P=S-r.convert(I),z=Math.cos(E)*C,K=Math.sin(E)*C,V=this.properties.label.enabled?k(n,M,z,K):void 0,B=this.getColumnWidth(O,L);T.push({series:this,datum:n,point:{x:z,y:K,size:0},midPoint:{x:z,y:K},label:V,angleValue:m,radiusValue:M,negative:A,innerRadius:_,outerRadius:R,stackInnerRadius:w,stackOuterRadius:P,startAngle:O,endAngle:L,axisInnerRadius:f,axisOuterRadius:v,columnWidth:B,index:t})})),{itemId:D,nodeData:T,labelData:T}):A}))}getColumnWidth(e,t){return NaN}update(e){return S(this,arguments,(function(e){var t=this;let{seriesRect:i}=e;return function*(){const e=t.checkResize(i);yield t.maybeRefreshNodeData(),t.contentGroup.translationX=t.centerX,t.contentGroup.translationY=t.centerY,t.highlightGroup.translationX=t.centerX,t.highlightGroup.translationY=t.centerY,t.labelGroup&&(t.labelGroup.translationX=t.centerX,t.labelGroup.translationY=t.centerY),t.updateSectorSelection(t.itemSelection,!1),t.updateSectorSelection(t.highlightSelection,!0),t.updateLabels(),e&&t.animationState.transition("resize"),t.animationState.transition("update")}()}))}updateSectorSelection(e,t){var i,o,a,n,s;let r=[];if(t){const e=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();(null==e?void 0:e.datum)&&e.series===this&&(r=[e])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0,h=null!=(o=null==l?void 0:l.fill)?o:this.properties.fill,d=null!=(a=null==l?void 0:l.fillOpacity)?a:this.properties.fillOpacity,c=null!=(n=null==l?void 0:l.stroke)?n:this.properties.stroke,u=this.properties.strokeOpacity,p=null!=(s=null==l?void 0:l.strokeWidth)?s:this.properties.strokeWidth;e.update(r,void 0,(e=>e.angleValue)).each(((e,i)=>{var o,a,n,s;const r=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:i,fill:h,stroke:c,strokeWidth:p,highlighted:t,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;this.updateItemPath(e,i,t,r),e.fill=null!=(o=null==r?void 0:r.fill)?o:h,e.fillOpacity=null!=(a=null==r?void 0:r.fillOpacity)?a:d,e.stroke=null!=(n=null==r?void 0:r.stroke)?n:c,e.strokeOpacity=u,e.strokeWidth=null!=(s=null==r?void 0:r.strokeWidth)?s:p,e.lineDash=this.properties.lineDash,e.lineJoin="round"}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();iy.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),Xp(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();iy.fromToMotion(this.id,"datums",t,[e],i),Qp(this,"labels",t,this.labelSelection)}getTooltipHtml(e){var t;const{id:i,axes:a,dataModel:n}=this,{angleKey:s,radiusKey:r,angleName:l,radiusName:h,fill:d,stroke:c,strokeWidth:u,formatter:p,tooltip:y}=this.properties,{angleValue:g,radiusValue:m,datum:x,itemId:f}=e,v=a[Bp.X],S=a[Bp.Y];if(!this.properties.isValid()||!(v&&S&&oy(m))||!n)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const M=v.formatDatum(g),D=S.formatDatum(m),b=ny(h),N=ny("".concat(M,": ").concat(D)),{fill:I}=null!=(t=p&&this.ctx.callbackCache.call(p,{seriesId:i,datum:x,fill:d,stroke:c,strokeWidth:u,highlighted:!1,angleKey:s,radiusKey:r}))?t:{fill:d};return y.toTooltipHtml({title:b,backgroundColor:d,content:N},{seriesId:i,datum:x,color:I,title:b,angleKey:s,radiusKey:r,angleName:l,radiusName:h,angleValue:g,itemId:f,radiusValue:m})}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.itemSelection.nodes())}getLegendData(e){var t;if(!(null==(t=this.data)?void 0:t.length)||!this.properties.isValid()||"category"!==e)return[];const{radiusKey:i,radiusName:o,fill:a,stroke:n,fillOpacity:s,strokeOpacity:r,strokeWidth:l,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:h,label:{text:null!=o?o:i},marker:{fill:null!=a?a:"rgba(0, 0, 0, 0)",stroke:null!=n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!=s?s:1,strokeOpacity:null!=r?r:1,strokeWidth:l}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:o}=e;o.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,n=o.id===this.id||t&&1===a;this.toggleSeriesItem(i,n)}computeLabelsBBox(){return null}computeFocusBounds(e){return ey(this,e)}},{Label:ly}=o._Scene,{SeriesProperties:hy,SeriesTooltip:dy,Validate:cy,COLOR_STRING:uy,DEGREE:py,FUNCTION:yy,LINE_DASH:gy,NUMBER:my,OBJECT:xy,POSITIVE_NUMBER:fy,RATIO:vy,STRING:Sy}=o._ModuleSupport,My=class extends hy{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new ly,this.tooltip=new dy}};f([cy(Sy)],My.prototype,"angleKey",2),f([cy(Sy,{optional:!0})],My.prototype,"angleName",2),f([cy(Sy)],My.prototype,"radiusKey",2),f([cy(Sy,{optional:!0})],My.prototype,"radiusName",2),f([cy(uy)],My.prototype,"fill",2),f([cy(vy)],My.prototype,"fillOpacity",2),f([cy(uy)],My.prototype,"stroke",2),f([cy(fy)],My.prototype,"strokeWidth",2),f([cy(vy)],My.prototype,"strokeOpacity",2),f([cy(gy)],My.prototype,"lineDash",2),f([cy(fy)],My.prototype,"lineDashOffset",2),f([cy(yy,{optional:!0})],My.prototype,"formatter",2),f([cy(py)],My.prototype,"rotation",2),f([cy(Sy,{optional:!0})],My.prototype,"stackGroup",2),f([cy(my,{optional:!0})],My.prototype,"normalizedTo",2),f([cy(xy)],My.prototype,"label",2),f([cy(xy)],My.prototype,"tooltip",2);var{Validate:Dy,POSITIVE_NUMBER:by}=o._ModuleSupport,Ny=class extends My{constructor(){super(...arguments),this.cornerRadius=0}};f([Dy(by)],Ny.prototype,"cornerRadius",2);var{motion:Iy}=o._Scene;function ky(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(t,i)=>({startAngle:e.startAngle.get(t)[i],endAngle:e.endAngle.get(t)[i]});return{calculate:(i,o,a)=>{t.forEach((t=>{var n,s;const r=e[t];let l=("removed"===a||"updated"===a?i:o)[t],h=("removed"===a?i:o)[t];isNaN(h)&&(h=null!=(s=null==(n=i.previousDatum)?void 0:n[t])?s:NaN);const d=l-h;Math.abs(d)>Math.PI&&(l-=2*Math.sign(d)*Math.PI),r.set(o,{from:l,to:h})}))},from:e=>i(e,"from"),to:e=>i(e,"to")}}function Ty(e,t,i){if("updated"===i){if(null==e.previousDatum||isNaN(e.previousDatum.startAngle)||isNaN(e.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return"added"===i&&null!=e.previousDatum?"updated":i}function Ay(e,t){let{innerRadius:i,outerRadius:o,columnWidth:a,axisInnerRadius:n,axisOuterRadius:s,startAngle:r,endAngle:l}=t;return{innerRadius:i,outerRadius:o,columnWidth:a,axisInnerRadius:n,axisOuterRadius:s,startAngle:r,endAngle:l}}var{SectorBox:Oy,motion:Ly}=o._Scene;function Ey(e){const{negative:t,innerRadius:i,outerRadius:o,stackInnerRadius:a,stackOuterRadius:n}=e;return{innerRadius:t?n:a,outerRadius:t?a:n,clipInnerRadius:t?o:i,clipOuterRadius:t?i:o}}function _y(e,t){const{startAngle:i,endAngle:o}=t,{innerRadius:a,outerRadius:n,clipInnerRadius:s,clipOuterRadius:r}=Ey(t);return{innerRadius:a,outerRadius:n,startAngle:i,endAngle:o,clipSector:new Oy(i,o,s,r)}}var{Sector:Ry,SectorBox:Cy}=o._Scene,wy=class extends ry{constructor(e){super(e,{animationResetFns:{item:_y}}),this.properties=new Ny}getStackId(){var e,t;const i=null!=(t=null==(e=this.seriesGrouping)?void 0:e.groupIndex)?t:this.id;return"nightingale-stack-".concat(i,"-yValues")}nodeFactory(){return new Ry}updateItemPath(e,t,i,o){const{negative:a}=t;if(e.centerX=0,e.centerY=0,e.startOuterCornerRadius=a?0:this.properties.cornerRadius,e.endOuterCornerRadius=a?0:this.properties.cornerRadius,e.startInnerCornerRadius=a?this.properties.cornerRadius:0,e.endInnerCornerRadius=a?this.properties.cornerRadius:0,i){const{startAngle:i,endAngle:o}=t,{innerRadius:a,outerRadius:n,clipInnerRadius:s,clipOuterRadius:r}=Ey(t);e.innerRadius=a,e.outerRadius=n,e.startAngle=i,e.endAngle=o,e.clipSector=new Cy(i,o,s,r)}}getColumnTransitionFunctions(){return function(e){const t=ky();return{toFn:(i,o,a)=>{const{startAngle:n,endAngle:s}=t.to(o);let r,l,h;if("removed"===a)r=e,l=e,h=new Oy(n,s,r,l);else{let t,i;({innerRadius:r,outerRadius:l,clipInnerRadius:t,clipOuterRadius:i}=Ey(o)),isNaN(r)&&(r=e),isNaN(l)&&(l=e),isNaN(t)&&(t=e),isNaN(i)&&(i=e),h=new Oy(n,s,t,i)}return{innerRadius:r,outerRadius:l,startAngle:n,endAngle:s,clipSector:h}},fromFn:(i,o,a)=>{a=Ty(i,o,a),t.calculate(i,o,a);const{startAngle:n,endAngle:s}=t.from(o);let r,l,h;return"removed"===a||"updated"===a?(r=i.innerRadius,l=i.outerRadius,h=i.clipSector):(r=e,l=e),null!=h||(h=new Oy(n,s,r,l)),{innerRadius:r,outerRadius:l,startAngle:n,endAngle:s,clipSector:h,phase:Ly.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}};wy.className="NightingaleSeries",wy.type="nightingale";var Py={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,color:o._Theme.DEFAULT_LABEL_COLOUR}},axes:{[o._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:o._Theme.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[o._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:o._Theme.POLAR_AXIS_SHAPE.CIRCLE}}},zy={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",instanceConstructor:wy,defaultAxes:[{type:o._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:o._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:Py,paletteFactory(e){let{takeColors:t,userPalette:i}=e;const{fills:[a],strokes:[n]}=t(1);return{fill:a,stroke:i?n:o._Theme.DEFAULT_POLAR_SERIES_STROKE}},stackable:!0,groupable:!0,stackedByDefault:!0},Ky=class extends Ml{constructor(){super(),this.append([new o._Scene.Line({tag:0}),new o._Scene.Line({tag:1}),new o._Scene.Line({tag:2})])}updateCoordinates(){const{x:e,y:t,yBottom:i,yHigh:a,yLow:n,width:s,height:r,datum:{itemId:l}}=this,h=o._Scene.Selection.select(this,o._Scene.Rect),[d]=h.selectByTag(0),[c]=h.selectByTag(1),[u]=h.selectByTag(2);if(0===s||0===r)return d.visible=!1,c.visible=!1,void(u.visible=!1);d.visible=!0,c.visible=!0,u.visible=!0;const p=s/2;d.setProperties({x1:Math.floor(e+p),x2:Math.floor(e+p),y1:a,y2:n});const y="up"===l,g=y?i:t,m=y?t:i;c.setProperties({x1:Math.floor(e),x2:Math.floor(e+p),y:Math.round(g)}),u.setProperties({x1:Math.floor(e+p),x2:Math.floor(e+s),y:Math.round(m)})}updateDatumStyles(e,t){const i=o._Scene.Selection.select(this,o._Scene.Rect),[a]=i.selectByTag(0),[n]=i.selectByTag(1),[s]=i.selectByTag(2);a.setProperties(t),n.setProperties(t),s.setProperties(t)}},{BaseProperties:Vy,Validate:By,COLOR_STRING:Fy,FUNCTION:Uy,LINE_DASH:jy,OBJECT:Wy,POSITIVE_NUMBER:Yy,RATIO:Gy}=o._ModuleSupport,Hy=class extends Vy{constructor(){super(...arguments),this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0}};f([By(Fy)],Hy.prototype,"stroke",2),f([By(Yy)],Hy.prototype,"strokeWidth",2),f([By(Gy)],Hy.prototype,"strokeOpacity",2),f([By(jy)],Hy.prototype,"lineDash",2),f([By(Yy)],Hy.prototype,"lineDashOffset",2),f([By(Uy,{optional:!0})],Hy.prototype,"formatter",2);var Xy=class extends Vy{constructor(){super(...arguments),this.up=new Hy,this.down=new Hy}};f([By(Wy)],Xy.prototype,"up",2),f([By(Wy)],Xy.prototype,"down",2);var Qy=class extends sh{constructor(){super(new Xy)}},{mergeDefaults:Zy}=o._ModuleSupport,qy=class extends Yl{constructor(e){super(e,Il),this.properties=new Qy}createNodeData(){return S(this,null,(function*(){const e=this.createBaseNodeData();if(!e)return;const t=e.nodeData.map((e=>{const{stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:a,lineDashOffset:n}=this.getItemConfig(e.itemId);return m(g({},e),{stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:a,lineDashOffset:n})}));return m(g({},e),{nodeData:t})}))}nodeFactory(){return new Ky}getFormatterParams(e){return e}getSeriesStyles(e){const{stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:a,lineDashOffset:n}=e;return{stroke:t,strokeWidth:i,strokeOpacity:o,lineDash:a,lineDashOffset:n}}getActiveStyles(e,t){const i=this.getFormattedStyles(e,t);return t?Zy(this.properties.highlightStyle.item,i):i}computeFocusBounds(e){return Al(this,e)}};qy.className="ohlc",qy.type="ohlc";var Jy={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,direction:"vertical"},animation:{enabled:!1},axes:{[o._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[o._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},$y={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"ohlc",instanceConstructor:qy,defaultAxes:[{type:o._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:o._Theme.POSITION.LEFT},{type:o._Theme.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:o._Theme.POSITION.BOTTOM}],themeTemplate:Jy,groupable:!1,paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:a,themeTemplateParameters:n}=e;const{strokes:[s]}=t(i),{strokes:r}=n.properties.get(o._Theme.DEFAULT_COLOURS);return{item:{up:{stroke:a?s:r.GREEN},down:{stroke:a?s:r.RED}}}}},eg={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,label:{enabled:!1,fontSize:12,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,color:o._Theme.DEFAULT_LABEL_COLOUR},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[o._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{label:{padding:10}}}},tg=o._ModuleSupport.mergeDefaults({series:{strokeWidth:2}},eg),ig=o._ModuleSupport.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},eg),{Label:og}=o._Scene,{SeriesMarker:ag,SeriesProperties:ng,SeriesTooltip:sg,Validate:rg,BOOLEAN:lg,COLOR_STRING:hg,DEGREE:dg,FUNCTION:cg,LINE_DASH:ug,OBJECT:pg,POSITIVE_NUMBER:yg,RATIO:gg,STRING:mg}=o._ModuleSupport,xg=class extends ng{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new ag,this.label=new og,this.tooltip=new sg,this.connectMissingData=!1}};f([rg(mg)],xg.prototype,"angleKey",2),f([rg(mg)],xg.prototype,"radiusKey",2),f([rg(mg,{optional:!0})],xg.prototype,"angleName",2),f([rg(mg,{optional:!0})],xg.prototype,"radiusName",2),f([rg(hg)],xg.prototype,"stroke",2),f([rg(yg)],xg.prototype,"strokeWidth",2),f([rg(gg)],xg.prototype,"strokeOpacity",2),f([rg(ug)],xg.prototype,"lineDash",2),f([rg(yg)],xg.prototype,"lineDashOffset",2),f([rg(cg,{optional:!0})],xg.prototype,"formatter",2),f([rg(dg)],xg.prototype,"rotation",2),f([rg(pg)],xg.prototype,"marker",2),f([rg(pg)],xg.prototype,"label",2),f([rg(pg)],xg.prototype,"tooltip",2),f([rg(lg)],xg.prototype,"connectMissingData",2);var{ChartAxisDirection:fg,PolarAxis:vg,SeriesNodePickMode:Sg,valueProperty:Mg,fixNumericExtent:Dg,seriesLabelFadeInAnimation:bg,markerFadeInAnimation:Ng,resetMarkerFn:Ig,animationValidation:kg,isFiniteNumber:Tg,computeMarkerFocusBounds:Ag}=o._ModuleSupport,{BBox:Og,Group:Lg,Path:Eg,PointerEvents:_g,Selection:Rg,Text:Cg,getMarker:wg}=o._Scene,{extent:Pg,isNumberEqual:zg,sanitizeHtml:Kg,toFixed:Vg}=o._Util,Bg=class extends o._ModuleSupport.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},Fg=class extends o._ModuleSupport.PolarSeries{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[Sg.NEAREST_NODE,Sg.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:Ig}}),this.properties=new xg,this.NodeEvent=Bg,this.resetInvalidToZero=!1,this.seriesItemEnabled=[],this.circleCache={r:0,cx:0,cy:0};const t=new Lg;this.contentGroup.append(t),this.lineSelection=Rg.select(t,Eg),t.zIndexSubOrder=[()=>this._declarationOrder,1]}nodeFactory(){const{shape:e}=this.properties.marker;return new(wg(e))}addChartEventListeners(){var e,t;this.destroyFns.push(null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-click",(e=>this.onLegendItemClick(e))),null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-double-click",(e=>this.onLegendItemDoubleClick(e))))}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===fg.X)return t.getDomain(this,"angleValue","value",i);{const e=t.getDomain(this,"radiusValue","value",i),o=Pg(0===e.length?e:[0].concat(e));return Dg(o)}}processData(e){return S(this,null,(function*(){var t,i;if(!this.properties.isValid())return;const{angleKey:o,radiusKey:a}=this.properties,n=[];this.ctx.animationManager.isSkipped()||n.push(kg());const s=null==(t=this.axes[fg.Y])?void 0:t.scale.type,r=null==(i=this.axes[fg.X])?void 0:i.scale.type;yield this.requestDataModel(e,this.data,{props:[Mg(o,r,{id:"angleValue"}),Mg(a,s,{id:"radiusValue",invalidValue:void 0}),...n]}),this.animationState.transition("updateData")}))}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return(e!==o.r||t!==o.cx||i!==o.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[fg.Y];return e instanceof vg?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){return S(this,null,(function*(){var e;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=null!=(e=yield this.createNodeData())?e:{};this.nodeData=t,this.nodeDataRefresh=!1}))}createNodeData(){return S(this,null,(function*(){var e,t;const{processedData:i,dataModel:a}=this;if(!i||!a||!this.properties.isValid())return;const{angleKey:n,radiusKey:s,angleName:r,radiusName:l,marker:h,label:d}=this.properties,c=null==(e=this.axes[fg.X])?void 0:e.scale,u=null==(t=this.axes[fg.Y])?void 0:t.scale;if(!c||!u)return;const p=a.resolveProcessedDataIndexById(this,"angleValue"),y=a.resolveProcessedDataIndexById(this,"radiusValue"),g=this.getAxisInnerRadius(),{seriesItemEnabled:m}=this;m.length=0;const x=i.data.map((e=>{const{datum:t,values:i}=e,a=i[p],x=i[y],f=c.convert(a),v=this.radius+g-u.convert(x);o._Util.isNumber(f)&&o._Util.isNumber(v)?m.push(!0):m.push(!1);const S=Math.cos(f),M=Math.sin(f),D=S*v,b=M*v;let N;if(d.enabled){const e=this.getLabelText(d,{value:x,datum:t,angleKey:n,radiusKey:s,angleName:r,radiusName:l},(e=>Tg(e)?e.toFixed(2):String(e)));if(e){let t="right";zg(S,0)?t="center":S>0&&(t="left");let i="bottom";zg(M,0)?i="middle":M>0&&(i="top"),N={x:D+S*h.size,y:b+M*h.size,text:e,textAlign:t,textBaseline:i}}}return{series:this,datum:t,point:{x:D,y:b,size:h.size},midPoint:{x:D,y:b},label:N,angleValue:a,radiusValue:x}}));return{itemId:s,nodeData:x,labelData:x}}))}update(e){return S(this,arguments,(function(e){var t=this;let{seriesRect:i}=e;return function*(){var e,o;const a=t.checkResize(i),n=!t.ctx.animationManager.isSkipped(),{series:s}=null!=(o=null==(e=t.ctx.highlightManager)?void 0:e.getActiveHighlight())?o:{};t.highlightGroup.visible=(n||t.visible)&&!(s!==t),yield t.maybeRefreshNodeData(),t.contentGroup.translationX=t.centerX,t.contentGroup.translationY=t.centerY,t.highlightGroup.translationX=t.centerX,t.highlightGroup.translationY=t.centerY,t.labelGroup&&(t.labelGroup.translationX=t.centerX,t.labelGroup.translationY=t.centerY),t.updatePathSelections(),t.updateMarkerSelection(),t.updateMarkers(t.itemSelection,!1),t.updateMarkers(t.highlightSelection,!0),t.updateLabels(),a&&t.animationState.transition("resize"),t.animationState.transition("update")}()}))}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Rg.select(this.itemGroup,(()=>this.nodeFactory()),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(e){var t;return null!=(t=null==e?void 0:e.fill)?t:this.properties.marker.fill}updateMarkers(e,t){var i;const{angleKey:o,radiusKey:a,marker:n,visible:s}=this.properties;let r=[];if(s&&n.shape&&n.enabled)if(t){const e=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();(null==e?void 0:e.datum)&&(r=[e])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0;e.update(r).each(((e,i)=>{var r,h,d,c,u,p,y,g,m,x,f,v,S;const M=this.getMarkerFill(l),D=null!=(h=null!=(r=null==l?void 0:l.stroke)?r:n.stroke)?h:this.properties.stroke,b=null!=(u=null!=(c=null!=(d=null==l?void 0:l.strokeWidth)?d:n.strokeWidth)?c:this.properties.strokeWidth)?u:1,N=n.formatter?this.ctx.callbackCache.call(n.formatter,{datum:i.datum,angleKey:o,radiusKey:a,fill:M,stroke:D,strokeWidth:b,size:n.size,highlighted:t,seriesId:this.id}):void 0;e.fill=null!=(p=null==N?void 0:N.fill)?p:M,e.stroke=null!=(y=null==N?void 0:N.stroke)?y:D,e.strokeWidth=null!=(g=null==N?void 0:N.strokeWidth)?g:b,e.fillOpacity=null!=(x=null!=(m=null==l?void 0:l.fillOpacity)?m:n.fillOpacity)?x:1,e.strokeOpacity=null!=(v=null!=(f=n.strokeOpacity)?f:this.properties.strokeOpacity)?v:1,e.size=null!=(S=null==N?void 0:N.size)?S:n.size;const{x:I,y:k}=i.point;e.translationX=I,e.translationY=k,e.visible=s&&e.size>0&&!isNaN(I)&&!isNaN(k)}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}getTooltipHtml(e){var t;if(!this.properties.isValid())return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:i}=this,{angleKey:a,radiusKey:n,angleName:s,radiusName:r,marker:l,tooltip:h}=this.properties,{datum:d,angleValue:c,radiusValue:u,itemId:p}=e,y="number"===typeof c?Vg(c):String(c),g="number"===typeof u?Vg(u):String(u),m=Kg(r),x=Kg("".concat(y,": ").concat(g)),{formatter:f,fill:v,stroke:S,strokeWidth:M,size:D}=l,b=null!=M?M:this.properties.strokeWidth,{fill:N}=null!=(t=f&&this.ctx.callbackCache.call(f,{datum:d,angleKey:a,radiusKey:n,fill:v,stroke:S,strokeWidth:b,size:D,highlighted:!1,seriesId:i}))?t:{fill:v};return h.toTooltipHtml({title:m,content:x,backgroundColor:N},{datum:d,angleKey:a,angleName:s,radiusKey:n,radiusName:r,title:m,color:N,seriesId:i,itemId:p})}getLegendData(e){var t,i,o,a,n,s,r,l,h,d;if(!(null==(t=this.data)?void 0:t.length)||!this.properties.isValid()||"category"!==e)return[];const{radiusKey:c,radiusName:u,stroke:p,strokeWidth:y,strokeOpacity:g,lineDash:m,visible:x,marker:f}=this.properties;return[{legendType:"category",id:this.id,itemId:c,seriesId:this.id,enabled:x,label:{text:null!=u?u:c},marker:{shape:f.shape,fill:null!=(a=null!=(o=null!=(i=this.getMarkerFill())?i:f.stroke)?o:p)?a:"rgba(0, 0, 0, 0)",stroke:null!=(s=null!=(n=f.stroke)?n:p)?s:"rgba(0, 0, 0, 0)",fillOpacity:null!=(r=f.fillOpacity)?r:1,strokeOpacity:null!=(h=null!=(l=f.strokeOpacity)?l:g)?h:1,strokeWidth:null!=(d=f.strokeWidth)?d:0,enabled:f.enabled||y<=0},line:{stroke:p,strokeOpacity:g,strokeWidth:y,lineDash:m}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:o}=e;o.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,n=o.id===this.id||t&&1===a;this.toggleSeriesItem(i,n)}pickNodeClosestDatum(e){var t,i;const{x:o,y:a}=e,{rootGroup:n,nodeData:s,centerX:r,centerY:l}=this,h=n.transformPoint(o,a),d=this.radius;if(Math.sqrt(p(o-r,2)+p(a-l,2))>d+this.properties.marker.size)return;let c,u=1/0;for(const y of s){const{point:{x:e=NaN,y:t=NaN}={}}=y;if(isNaN(e)||isNaN(t))continue;const i=Math.sqrt(p(h.x-e-r,2)+p(h.y-t-l,2));i<u&&(u=i,c=y)}if(c){return{datum:c,distance:Math.max(u-(null!=(i=null==(t=c.point)?void 0:t.size)?i:0),0)}}}computeLabelsBBox(){return S(this,null,(function*(){const{label:e}=this.properties;yield this.maybeRefreshNodeData();const t=[],i=new Cg;return this.nodeData.forEach((o=>{if(!e.enabled||!o.label)return;i.text=o.label.text,i.x=o.label.x,i.y=o.label.y,i.setFont(e),i.setAlign(o.label);const a=i.computeBBox();t.push(a)})),0===t.length?null:Og.merge(t)}))}getLineNode(){return this.lineSelection.nodes()[0]}beforePathAnimation(){const e=this.getLineNode();e.fill=void 0,e.lineJoin="round",e.lineCap="round",e.pointerEvents=_g.None,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(0===e.length)return[];const o=this.axes[fg.Y],a=this.axes[fg.X],n=null==a?void 0:a.isReversed(),s=(null==o?void 0:o.isReversed())&&!n?[...e].reverse():e,r=[];let l,h=!1;return s.forEach(((e,o)=>{let{x:a,y:n}=e.point;const s=isNaN(a)||isNaN(n);s||null!=l||(l=e),s&&!i&&(a=0,n=0);const d=0===o||!t&&!i&&(s||h);r.push({x:a,y:n,moveTo:d}),h=s})),void 0!==l&&r.push({x:l.point.x,y:l.point.y,moveTo:!1}),r}animateSinglePath(e,t,i){const{path:o}=e;o.clear(!0);const a=this.getAxisInnerRadius(),n=this.axes[fg.Y],s=(null==n?void 0:n.isReversed())?this.radius+a-(null==n?void 0:n.scale.convert(0)):a;t.forEach((e=>{const{x:t,y:a,arc:n,radius:r=0,startAngle:l=0,endAngle:h=0,moveTo:d}=e,c=Math.atan2(a,t),u=s*Math.cos(c),p=s*Math.sin(c),y=u*(1-i)+t*i,g=p*(1-i)+a*i;n?o.arc(t,a,r,l,h):d?o.moveTo(y,g):o.lineTo(y,g)})),e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints();this.animateSinglePath(this.getLineNode(),t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:"".concat(this.id,"_'path"),groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:e=>this.animatePaths(e),onStop:()=>this.animatePaths(1)}),Ng(this,i,"added",e),bg(this,"labels",i,t)}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints();e.fill=void 0,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,t.clear(!0),i.forEach((e=>{let{x:i,y:o,moveTo:a}=e;a?t.moveTo(i,o):t.lineTo(i,o)})),e.checkPathDirty()}}getFormattedMarkerStyle(e){const{angleKey:t,radiusKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,angleKey:t,radiusKey:i,highlighted:!0})}computeFocusBounds(e){return Ag(this,e)}};Fg.className="RadarSeries";var{RATIO:Ug,COLOR_STRING:jg,Validate:Wg}=o._ModuleSupport,Yg=class extends xg{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};f([Wg(jg)],Yg.prototype,"fill",2),f([Wg(Ug)],Yg.prototype,"fillOpacity",2);var{Group:Gg,Path:Hg,PointerEvents:Xg,Selection:Qg}=o._Scene,{ChartAxisDirection:Zg}=o._ModuleSupport,qg=class extends Fg{constructor(e){super(e),this.properties=new Yg,this.resetInvalidToZero=!0;const t=new Gg;t.zIndexSubOrder=[()=>this._declarationOrder,0],this.contentGroup.append(t),this.areaSelection=Qg.select(t,Hg)}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.nodes()[0]}getMarkerFill(e){var t,i;return null!=(i=null!=(t=null==e?void 0:e.fill)?t:this.properties.marker.fill)?i:this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const e=this.getAreaNode();e.fill=this.properties.fill,e.fillOpacity=this.properties.fillOpacity,e.pointerEvents=Xg.None,e.stroke=void 0}animatePaths(e){super.animatePaths(e),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),e)}getAreaPoints(){var e,t;const i=this.getLinePoints(),a=e=>{const t=this.axes[e];return t instanceof o._ModuleSupport.PolarAxis?t:void 0},n=a(Zg.Y),s=a(Zg.X);if(!(null==n?void 0:n.isReversed()))return i;const{points:r=[]}=null!=(t=null==(e=null==s?void 0:s.getAxisLinePoints)?void 0:e.call(s))?t:{};return i.concat(...r)}resetPaths(){super.resetPaths();const e=this.getAreaNode();if(e){const{path:t}=e,i=this.getAreaPoints();e.fill=this.properties.fill,e.fillOpacity=this.properties.fillOpacity,e.stroke=void 0,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,e.lineJoin=e.lineCap="round",t.clear(!0),i.forEach((e=>{let{x:i,y:o,moveTo:a,arc:n,radius:s=0,startAngle:r=0,endAngle:l=0}=e;n?t.arc(i,o,s,r,l):a?t.moveTo(i,o):t.lineTo(i,o)})),t.closePath(),e.checkPathDirty()}}};qg.className="RadarAreaSeries",qg.type="radar-area";var{markerPaletteFactory:Jg}=o._ModuleSupport,$g={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",instanceConstructor:qg,defaultAxes:[{type:o._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:o._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:ig,paletteFactory:e=>{const{marker:t}=Jg(e);return{stroke:t.stroke,fill:t.fill,marker:t}}},em=class extends Fg{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};em.className="RadarLineSeries",em.type="radar-line";var tm={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",instanceConstructor:em,defaultAxes:[{type:o._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:o._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:tg,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[o]}=t(1);return{stroke:i,marker:{fill:i,stroke:o}}}},{Label:im}=o._Scene,{SeriesProperties:om,SeriesTooltip:am,Validate:nm,COLOR_STRING:sm,DEGREE:rm,FUNCTION:lm,LINE_DASH:hm,NUMBER:dm,OBJECT:cm,POSITIVE_NUMBER:um,RATIO:pm,STRING:ym}=o._ModuleSupport,gm=class extends om{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.label=new im,this.tooltip=new am}};f([nm(ym)],gm.prototype,"angleKey",2),f([nm(ym)],gm.prototype,"radiusKey",2),f([nm(ym,{optional:!0})],gm.prototype,"angleName",2),f([nm(ym,{optional:!0})],gm.prototype,"radiusName",2),f([nm(sm)],gm.prototype,"fill",2),f([nm(pm)],gm.prototype,"fillOpacity",2),f([nm(sm)],gm.prototype,"stroke",2),f([nm(um)],gm.prototype,"strokeWidth",2),f([nm(pm)],gm.prototype,"strokeOpacity",2),f([nm(hm)],gm.prototype,"lineDash",2),f([nm(um)],gm.prototype,"lineDashOffset",2),f([nm(um)],gm.prototype,"cornerRadius",2),f([nm(lm,{optional:!0})],gm.prototype,"formatter",2),f([nm(rm)],gm.prototype,"rotation",2),f([nm(ym,{optional:!0})],gm.prototype,"stackGroup",2),f([nm(dm,{optional:!0})],gm.prototype,"normalizedTo",2),f([nm(cm)],gm.prototype,"label",2),f([nm(cm)],gm.prototype,"tooltip",2);var{SectorBox:mm,motion:xm}=o._Scene;function fm(e){return{toFn:(t,i,o)=>{let a,n,s,r,l;return"removed"===o?(a=e,n=e,s=i.innerRadius,r=i.outerRadius,l=new mm(a,n,s,r)):(a=i.startAngle,n=i.endAngle,s=isNaN(i.innerRadius)?t.innerRadius:i.innerRadius,r=isNaN(i.outerRadius)?t.outerRadius:i.outerRadius,l=i.clipSector),{startAngle:a,endAngle:n,innerRadius:s,outerRadius:r,clipSector:l}},fromFn:(t,i,o)=>{let a,n,s,r,l;o=function(e,t,i){if("updated"===i){if(null==e.previousDatum||isNaN(e.previousDatum.innerRadius)||isNaN(e.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return"added"===i&&null!=e.previousDatum?"updated":i}(t,i,o),"removed"===o||"updated"===o?(a=t.startAngle,n=t.endAngle,s=t.innerRadius,r=t.outerRadius,l=t.clipSector):(a=e,n=e,s=i.innerRadius,r=i.outerRadius),null!=l||(l=new mm(a,n,s,r));return{startAngle:a,endAngle:n,innerRadius:s,outerRadius:r,clipSector:l,phase:xm.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o]}}}}function vm(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle,clipSector:t.clipSector}}var{ChartAxisDirection:Sm,PolarAxis:Mm,diff:Dm,isDefined:bm,groupAccumulativeValueProperty:Nm,keyProperty:Im,normaliseGroupTo:km,valueProperty:Tm,fixNumericExtent:Am,resetLabelFn:Om,seriesLabelFadeInAnimation:Lm,seriesLabelFadeOutAnimation:Em,animationValidation:_m,isFiniteNumber:Rm,computeSectorFocusBounds:Cm}=o._ModuleSupport,{BandScale:wm}=o._Scale,{Sector:Pm,SectorBox:zm,motion:Km}=o._Scene,{angleBetween:Vm,isNumber:Bm,sanitizeHtml:Fm}=o._Util,Um=class extends o._ModuleSupport.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},jm=class extends o._ModuleSupport.PolarSeries{constructor(e){super({moduleCtx:e,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:vm,label:Om}}),this.properties=new gm,this.NodeEvent=Um,this.groupScale=new wm,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new Pm}addChartEventListeners(){var e,t;this.destroyFns.push(null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-click",(e=>this.onLegendItemClick(e))),null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-double-click",(e=>this.onLegendItemDoubleClick(e))))}getSeriesDomain(e){const{axes:t,dataModel:i,processedData:o}=this;if(!o||!i)return[];if(e===Sm.X){const e=t[Sm.X],a=i.getDomain(this,"angleValue-end","value",o),n=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return Am(n,e)}return i.getDomain(this,"radiusValue","key",o)}processData(e){return S(this,null,(function*(){var t,i;const{angleKey:o,radiusKey:a,normalizedTo:n,visible:s}=this.properties,r=!this.ctx.animationManager.isSkipped();if(!this.properties.isValid()||!s&&!r)return;const l=this.getStackId(),h="".concat(l,"-trailing"),d=[];bm(n)&&d.push(km([l,h],Math.abs(n),"range")),r&&(this.processedData&&d.push(Dm(this.processedData)),d.push(_m()));const c=this.visible||!r?{}:{forceValue:0},u=null==(t=this.axes[Sm.Y])?void 0:t.scale.type,p=null==(i=this.axes[Sm.X])?void 0:i.scale.type;yield this.requestDataModel(e,this.data,{props:[Im(a,u,{id:"radiusValue"}),Tm(o,p,g({id:"angleValue-raw",invalidValue:null},c)),...Nm(o,"normal","current",g({id:"angleValue-end",rangeId:"angleValue-range",invalidValue:null,groupId:l,separateNegative:!0},c),p),...Nm(o,"trailing","current",g({id:"angleValue-start",invalidValue:null,groupId:h,separateNegative:!0},c),p),...d]}),this.animationState.transition("updateData")}))}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return(e!==o.r||t!==o.cx||i!==o.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){return S(this,null,(function*(){var e;if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const{nodeData:t=[]}=null!=(e=yield this.createNodeData())?e:{};this.nodeData=t,this.nodeDataRefresh=!1}))}getAxisInnerRadius(){const e=this.axes[Sm.Y];return e instanceof Mm?this.radius*e.innerRadiusRatio:0}createNodeData(){return S(this,null,(function*(){var e;const{processedData:t,dataModel:i}=this;if(!t||!i||!this.properties.isValid())return;const o=this.axes[Sm.X],a=this.axes[Sm.Y],n=null==o?void 0:o.scale,s=null==a?void 0:a.scale;if(!n||!s)return;const r=i.resolveProcessedDataIndexById(this,"angleValue-start"),l=i.resolveProcessedDataIndexById(this,"angleValue-end"),h=i.resolveProcessedDataIndexById(this,"angleValue-range"),d=i.resolveProcessedDataIndexById(this,"angleValue-raw");let c=0;a instanceof Vt&&(c=a.groupPaddingInner);const{groupScale:u}=this,{index:p,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);u.domain=Array.from({length:y}).map(((e,t)=>String(t))),u.range=[0,Math.abs(null!=(e=s.bandwidth)?e:0)],u.paddingInner=y>1?c:0;const g=u.bandwidth>=1?u.bandwidth:u.rawBandwidth,m=o.isReversed(),x=a.isReversed(),f=x?this.radius:this.getAxisInnerRadius(),v=(x?this.getAxisInnerRadius():this.radius)+f,{angleKey:S,radiusKey:M,angleName:D,radiusName:b,label:N}=this.properties,I=(e,t,i,o)=>{const a=this.getLabelText(N,{value:t,datum:e,angleKey:S,radiusKey:M,angleName:D,radiusName:b},(e=>Rm(e)?e.toFixed(2):String(e)));if(a)return{x:i,y:o,text:a,textAlign:"center",textBaseline:"middle"}},k=[],T={itemId:M,nodeData:k,labelData:k};return this.visible?(t.data.forEach(((e,t)=>{var i;const{datum:o,keys:a,values:c,aggValues:y}=e,x=a[0],f=c[d],S=f>=0&&!Object.is(f,-0),M=c[r],D=c[l],b=null!=(i=null==y?void 0:y[h][S?1:0])?i:0,N=S===m;let T=n.convert(M,{clampMode:"clamped"}),A=n.convert(D,{clampMode:"clamped"}),O=n.convert(0,{clampMode:"clamped"}),L=n.convert(b,{clampMode:"clamped"});N&&([O,L]=[L,O],[T,A]=[A,T]);const E=v-s.convert(x)+u.convert(String(p)),_=E+g,R=(E+_)/2,C=T+Vm(T,A)/2,w=Math.cos(C)*R,P=Math.sin(C)*R,z=this.properties.label.enabled?I(o,f,w,P):void 0,K=new zm(T,A,E,_);k.push({series:this,datum:o,point:{x:w,y:P,size:0},midPoint:{x:w,y:P},label:z,angleValue:f,radiusValue:x,innerRadius:E,outerRadius:_,startAngle:O,endAngle:L,clipSector:K,reversed:N,index:t})})),T):T}))}update(e){return S(this,arguments,(function(e){var t=this;let{seriesRect:i}=e;return function*(){const e=t.checkResize(i);yield t.maybeRefreshNodeData(),t.contentGroup.translationX=t.centerX,t.contentGroup.translationY=t.centerY,t.highlightGroup.translationX=t.centerX,t.highlightGroup.translationY=t.centerY,t.labelGroup&&(t.labelGroup.translationX=t.centerX,t.labelGroup.translationY=t.centerY),t.updateSectorSelection(t.itemSelection,!1),t.updateSectorSelection(t.highlightSelection,!0),t.updateLabels(),e&&t.animationState.transition("resize"),t.animationState.transition("update")}()}))}updateSectorSelection(e,t){var i,o,a,n,s;let r=[];if(t){const e=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();(null==e?void 0:e.datum)&&e.series===this&&(r=[e])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0,h=null!=(o=null==l?void 0:l.fill)?o:this.properties.fill,d=null!=(a=null==l?void 0:l.fillOpacity)?a:this.properties.fillOpacity,c=null!=(n=null==l?void 0:l.stroke)?n:this.properties.stroke,u=this.properties.strokeOpacity,p=null!=(s=null==l?void 0:l.strokeWidth)?s:this.properties.strokeWidth,y=this.properties.cornerRadius;e.update(r,void 0,(e=>e.radiusValue)).each(((e,i)=>{var o,a,n,s,r;const l=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:i,fill:h,stroke:c,strokeWidth:p,highlighted:t,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;e.fill=null!=(o=null==l?void 0:l.fill)?o:h,e.fillOpacity=null!=(a=null==l?void 0:l.fillOpacity)?a:d,e.stroke=null!=(n=null==l?void 0:l.stroke)?n:c,e.strokeOpacity=u,e.strokeWidth=null!=(s=null==l?void 0:l.strokeWidth)?s:p,e.lineDash=this.properties.lineDash,e.lineJoin="round",e.inset=null!=c?(null!=(r=null==l?void 0:l.strokeWidth)?r:p)/2:0,e.startInnerCornerRadius=i.reversed?y:0,e.startOuterCornerRadius=i.reversed?y:0,e.endInnerCornerRadius=i.reversed?0:y,e.endOuterCornerRadius=i.reversed?0:y,t&&(e.startAngle=i.startAngle,e.endAngle=i.endAngle,e.clipSector=i.clipSector,e.innerRadius=i.innerRadius,e.outerRadius=i.outerRadius)}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}getBarTransitionFunctions(){var e;const t=null==(e=this.axes[Sm.X])?void 0:e.scale;let i=0;if(!t)return fm(i);const o=Math.min(t.domain[0],t.domain[1]),a=Math.max(t.domain[0],t.domain[1]);return o<=0&&a>=0&&(i=t.convert(0)),fm(i)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();Km.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),Lm(this,"labels",this.ctx.animationManager,e)}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();Km.fromToMotion(this.id,"datums",t,[e],i),Em(this,"labels",t,this.labelSelection)}getTooltipHtml(e){var t;const{id:i,axes:a,dataModel:n}=this,{angleKey:s,angleName:r,radiusKey:l,radiusName:h,fill:d,stroke:c,strokeWidth:u,formatter:p,tooltip:y}=this.properties,{angleValue:g,radiusValue:m,datum:x,itemId:f}=e,v=a[Sm.X],S=a[Sm.Y];if(!this.properties.isValid()||!(v&&S&&Bm(g))||!n)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const M=v.formatDatum(g),D=S.formatDatum(m),b=Fm(r),N=Fm("".concat(D,": ").concat(M)),{fill:I}=null!=(t=p&&this.ctx.callbackCache.call(p,{datum:x,fill:d,stroke:c,strokeWidth:u,highlighted:!1,angleKey:s,radiusKey:l,seriesId:i}))?t:{fill:d};return y.toTooltipHtml({title:b,backgroundColor:d,content:N},{seriesId:i,datum:x,color:I,title:b,angleKey:s,radiusKey:l,angleName:r,radiusName:h,angleValue:g,itemId:f,radiusValue:m})}getLegendData(e){var t;if(!(null==(t=this.data)?void 0:t.length)||!this.properties.isValid()||"category"!==e)return[];const{angleKey:i,angleName:o,fill:a,stroke:n,fillOpacity:s,strokeOpacity:r,strokeWidth:l,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:h,label:{text:null!=o?o:i},marker:{fill:null!=a?a:"rgba(0, 0, 0, 0)",stroke:null!=n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!=s?s:1,strokeOpacity:null!=r?r:1,strokeWidth:l}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:o}=e;o.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,n=o.id===this.id||t&&1===a;this.toggleSeriesItem(i,n)}computeLabelsBBox(){return null}getStackId(){var e,t;const i=null!=(t=null==(e=this.seriesGrouping)?void 0:e.groupIndex)?t:this.id;return"radialBar-stack-".concat(i,"-xValues")}computeFocusBounds(e){return Cm(this,e)}};jm.className="RadialBarSeries",jm.type="radial-bar";var Wm={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,color:o._Theme.DEFAULT_INVERTED_LABEL_COLOUR}},axes:{[o._Theme.POLAR_AXIS_TYPE.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},Ym={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",instanceConstructor:jm,defaultAxes:[{type:o._Theme.POLAR_AXIS_TYPE.ANGLE_NUMBER},{type:o._Theme.POLAR_AXIS_TYPE.RADIUS_CATEGORY}],themeTemplate:Wm,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[o]}=t(1);return{fill:i,stroke:o}},stackable:!0,groupable:!0},{Validate:Gm,RATIO:Hm}=o._ModuleSupport,Xm=class extends My{};f([Gm(Hm,{optional:!0})],Xm.prototype,"columnWidthRatio",2),f([Gm(Hm,{optional:!0})],Xm.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:Qm,PolarAxis:Zm}=o._ModuleSupport,{RadialColumnShape:qm,getRadialColumnWidth:Jm}=o._Scene,$m=class extends ry{constructor(e){super(e,{animationResetFns:{item:Ay}}),this.properties=new Xm}getStackId(){var e,t;const i=null!=(t=null==(e=this.seriesGrouping)?void 0:e.groupIndex)?t:this.id;return"radarColumn-stack-".concat(i,"-yValues")}nodeFactory(){return new qm}getColumnTransitionFunctions(){return function(e){const t=ky();return{toFn:(i,o,a)=>{const{startAngle:n,endAngle:s}=t.to(o);let r,l,h,d,c;return"removed"===a?(r=i.innerRadius,l=i.innerRadius,h=i.columnWidth,d=i.axisInnerRadius,c=i.axisOuterRadius):(r=isNaN(o.innerRadius)?e:o.innerRadius,l=isNaN(o.outerRadius)?e:o.outerRadius,h=isNaN(o.columnWidth)?i.columnWidth:o.columnWidth,d=o.axisInnerRadius,c=o.axisOuterRadius),{innerRadius:r,outerRadius:l,columnWidth:h,axisInnerRadius:d,axisOuterRadius:c,startAngle:n,endAngle:s}},fromFn:(i,o,a)=>{a=Ty(i,o,a),t.calculate(i,o,a);const{startAngle:n,endAngle:s}=t.from(o);let r,l,h,d,c;return"removed"===a||"updated"===a?(r=i.innerRadius,l=i.outerRadius,h=i.columnWidth,d=i.axisInnerRadius,c=i.axisOuterRadius):(r=e,l=e,h=o.columnWidth,d=o.axisInnerRadius,c=o.axisOuterRadius),{innerRadius:r,outerRadius:l,columnWidth:h,axisInnerRadius:d,axisOuterRadius:c,startAngle:n,endAngle:s,phase:Iy.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}isRadiusAxisCircle(){const e=this.axes[Qm.Y];return e instanceof Zm&&"circle"===e.shape}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:o=.5}=this.properties;return Jm(e,t,this.radius,i,o)}};$m.className="RadialColumnSeries",$m.type="radial-column";var ex={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,color:o._Theme.DEFAULT_LABEL_COLOUR}},axes:{[o._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:o._Theme.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[o._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:o._Theme.POLAR_AXIS_SHAPE.CIRCLE,innerRadiusRatio:.5}}},tx={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",instanceConstructor:$m,defaultAxes:[{type:o._Theme.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:o._Theme.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:ex,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[o]}=t(1);return{fill:i,stroke:o}},stackable:!0,groupable:!0},{DropShadow:ix,Label:ox}=o._Scene,{CartesianSeriesProperties:ax,SeriesMarker:nx,SeriesTooltip:sx,Validate:rx,BOOLEAN:lx,COLOR_STRING:hx,LINE_DASH:dx,OBJECT:cx,PLACEMENT:ux,POSITIVE_NUMBER:px,RATIO:yx,STRING:gx}=o._ModuleSupport,mx=class extends ox{constructor(){super(...arguments),this.placement="outside",this.padding=6}};f([rx(ux)],mx.prototype,"placement",2),f([rx(px)],mx.prototype,"padding",2);var xx=class extends ax{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=(new ix).set({enabled:!1}),this.marker=new nx,this.label=new mx,this.tooltip=new sx,this.connectMissingData=!1}};f([rx(gx)],xx.prototype,"xKey",2),f([rx(gx)],xx.prototype,"yLowKey",2),f([rx(gx)],xx.prototype,"yHighKey",2),f([rx(gx,{optional:!0})],xx.prototype,"xName",2),f([rx(gx,{optional:!0})],xx.prototype,"yName",2),f([rx(gx,{optional:!0})],xx.prototype,"yLowName",2),f([rx(gx,{optional:!0})],xx.prototype,"yHighName",2),f([rx(hx)],xx.prototype,"fill",2),f([rx(yx)],xx.prototype,"fillOpacity",2),f([rx(hx)],xx.prototype,"stroke",2),f([rx(px)],xx.prototype,"strokeWidth",2),f([rx(yx)],xx.prototype,"strokeOpacity",2),f([rx(dx)],xx.prototype,"lineDash",2),f([rx(px)],xx.prototype,"lineDashOffset",2),f([rx(cx)],xx.prototype,"shadow",2),f([rx(cx)],xx.prototype,"marker",2),f([rx(cx)],xx.prototype,"label",2),f([rx(cx)],xx.prototype,"tooltip",2),f([rx(lx)],xx.prototype,"connectMissingData",2);var{valueProperty:fx,keyProperty:vx,ChartAxisDirection:Sx,mergeDefaults:Mx,updateLabelNode:Dx,fixNumericExtent:bx,AreaSeriesTag:Nx,buildResetPathFn:Ix,resetLabelFn:kx,resetMarkerFn:Tx,resetMarkerPositionFn:Ax,pathSwipeInAnimation:Ox,resetMotion:Lx,markerSwipeScaleInAnimation:Ex,seriesLabelFadeInAnimation:_x,animationValidation:Rx,diff:Cx,updateClipPath:wx,isFiniteNumber:Px,computeMarkerFocusBounds:zx}=o._ModuleSupport,{getMarker:Kx,PointerEvents:Vx}=o._Scene,{sanitizeHtml:Bx,extent:Fx}=o._Util,Ux=class extends o._ModuleSupport.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},jx=class extends o._ModuleSupport.CartesianSeries{constructor(e){super({moduleCtx:e,hasMarkers:!0,pathsPerSeries:2,directionKeys:{[Sx.X]:["xKey"],[Sx.Y]:["yLowKey","yHighKey"]},directionNames:{[Sx.X]:["xName"],[Sx.Y]:["yLowName","yHighName","yName"]},animationResetFns:{path:Ix({getOpacity:()=>this.getOpacity()}),label:kx,marker:(e,t)=>g(g({},Tx(e)),Ax(e,t))}}),this.properties=new xx,this.NodeEvent=Ux}processData(e){return S(this,null,(function*(){var t,i;if(!this.properties.isValid()||!this.visible)return;const{xKey:o,yLowKey:a,yHighKey:n}=this.properties,s=null==(t=this.axes[Sx.X])?void 0:t.scale,r=null==(i=this.axes[Sx.Y])?void 0:i.scale,{xScaleType:l,yScaleType:h}=this.getScaleInformation({xScale:s,yScale:r}),d=[],c=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&d.push(Cx(this.processedData)),c&&d.push(Rx()),yield this.requestDataModel(e,this.data,{props:[vx(o,l,{id:"xValue"}),fx(a,h,{id:"yLowValue",invalidValue:void 0}),fx(n,h,{id:"yHighValue",invalidValue:void 0}),...d]}),this.animationState.transition("updateData")}))}getSeriesDomain(e){const{processedData:t,dataModel:i,axes:o}=this;if(!t||!i)return[];const{domain:{keys:[a],values:n}}=t;if(e===Sx.X){const e=i.resolveProcessedDataDefById(this,"xValue"),t=o[Sx.X];return"key"===(null==e?void 0:e.def.type)&&"category"===e.def.valueType?a:bx(Fx(a),t)}{const e=n[i.resolveProcessedDataIndexById(this,"yLowValue")],t=n[i.resolveProcessedDataIndexById(this,"yHighValue")],o=[e[0]>t[0]?t[0]:e[0],t[1]<e[1]?e[1]:t[1]];return bx(o)}}createNodeData(){return S(this,null,(function*(){var e,t;const{data:i,dataModel:o,axes:a,visible:n}=this,s=a[Sx.X],r=a[Sx.Y];if(!(i&&n&&s&&r&&o))return;const l=s.scale,h=r.scale,{xKey:d,yLowKey:c,yHighKey:u,connectMissingData:p,marker:y}=this.properties,f="".concat(c,"-").concat(u),v=(null!=(e=l.bandwidth)?e:0)/2,S=o.resolveProcessedDataDefsByIds(this,["xValue","yHighValue","yLowValue"]),M=(e,t,i)=>{const o=l.convert(e)+v,a=h.convert(t),n=h.convert(i);return[{point:{x:o,y:a},size:y.size,itemId:"high",yValue:t,xValue:e},{point:{x:o,y:n},size:y.size,itemId:"low",yValue:i,xValue:e}]},D=e=>{const t=e,{point:i}=t,o=x(t,["point"]);return m(g({},o),{point:m(g({},i),{moveTo:!0})})},b=[],N=[],I={itemId:f,points:[]},k={itemId:f,points:[]},T={itemId:f,labelData:b,nodeData:N,fillData:k,strokeData:I,scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return T;const A=k.points,O=[],L=I.points,E=[];let _,R=-1/0,C=-1/0;return null==(t=this.processedData)||t.data.forEach(((e,t)=>{let{keys:i,datum:a,values:n}=e;const s=o.resolveProcessedDataDefsValues(S,{keys:i,values:n}),{xValue:r,yHighValue:l,yLowValue:h}=s,y=null==l||null==h?[]:M(r,l,h),g=h>l;y.forEach((e=>{let{point:{x:i,y:o},size:n,itemId:s="",yValue:p}=e;N.push({index:t,series:this,itemId:s,datum:a,midPoint:{x:i,y:o},yHighValue:l,yLowValue:h,xValue:r,xKey:d,yLowKey:c,yHighKey:u,point:{x:i,y:o,size:n}});const y=this.createLabelData({point:{x:i,y:o},value:p,yLowValue:h,yHighValue:l,itemId:s,inverted:g,datum:a,series:this});b.push(y)}));const m=null!=R&&null!=C,x=null!=_&&m,f=null!=r,v=null!=l&&null!=h;let[I,k]=M(r,null!=l?l:0,null!=h?h:0);if(!p)if(v){if(!m){const[e,t]=M(r,0,0);A.push(e),O.push(t)}}else{const[e,t]=M(_,0,0);A.push(e),O.push(t)}f&&v&&(A.push(I),O.push(k));f&&v&&!x&&!p&&t>0&&(I=D(I),k=D(k)),f&&v&&(L.push(I),E.push(k)),_=r,R=l,C=h})),A.length>0&&(A[0]=D(A[0])),A.push(...O.reverse()),E.length>0&&(E[0]=D(E[0])),L.push(...E),T}))}createLabelData(e){let{point:t,value:i,itemId:o,inverted:a,datum:n,series:s}=e;const{xKey:r,yLowKey:l,yHighKey:h,xName:d,yName:c,yLowName:u,yHighName:p,label:y}=this.properties,{placement:g,padding:m=10}=y;let x=o;a&&(x="low"===o?"high":"low");const f="outside"===g&&"high"===x||"inside"===g&&"low"===x?-1:1;return{x:t.x,y:t.y+m*f,series:s,itemId:o,datum:n,text:this.getLabelText(y,{value:i,datum:n,itemId:o,xKey:r,yLowKey:l,yHighKey:h,xName:d,yLowName:u,yHighName:p,yName:c},(e=>Px(e)?e.toFixed(2):String(e))),textAlign:"center",textBaseline:-1===f?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(Kx(e))}updatePathNodes(e){return S(this,null,(function*(){const{opacity:t,visible:i}=e,[o,a]=e.paths,n=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({tag:Nx.Stroke,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:Vx.None,stroke:this.properties.stroke,strokeWidth:n,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i}),o.setProperties({tag:Nx.Fill,stroke:void 0,lineJoin:"round",pointerEvents:Vx.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:n,opacity:t,visible:i}),wx(this,a),wx(this,o)}))}updatePaths(e){return S(this,null,(function*(){this.updateAreaPaths(e.paths,e.contextData)}))}updateAreaPaths(e,t){this.updateFillPath(e,t),this.updateStrokePath(e,t)}updateFillPath(e,t){const{fillData:i}=t,[o]=e,{path:a}=o;a.clear(!0);for(const{point:n}of i.points)n.moveTo?a.moveTo(n.x,n.y):a.lineTo(n.x,n.y);a.closePath(),o.checkPathDirty()}updateStrokePath(e,t){const{strokeData:i}=t,[,o]=e,{path:a}=o;a.clear(!0);for(const{point:n}of i.points)n.moveTo?a.moveTo(n.x,n.y):a.lineTo(n.x,n.y);o.checkPathDirty()}updateMarkerSelection(e){return S(this,null,(function*(){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}))}updateMarkerNodes(e){return S(this,null,(function*(){const{markerSelection:t,isHighlight:i}=e,{xKey:o,yLowKey:a,yHighKey:n,marker:s,fill:r,stroke:l,strokeWidth:h,fillOpacity:d,strokeOpacity:c}=this.properties,u=Mx(i&&this.properties.highlightStyle.item,s.getStyle(),{fill:r,fillOpacity:d,stroke:l,strokeWidth:h,strokeOpacity:c});t.each(((e,t)=>{this.updateMarkerStyle(e,s,{datum:t,highlighted:i,xKey:o,yHighKey:n,yLowKey:a},u)})),i||this.properties.marker.markClean()}))}updateLabelSelection(e){return S(this,null,(function*(){const{labelData:t,labelSelection:i}=e;return i.update(t,(e=>{e.tag=Nx.Label,e.pointerEvents=Vx.None}))}))}updateLabelNodes(e){return S(this,null,(function*(){e.labelSelection.each(((e,t)=>{Dx(e,this.properties.label,t)}))}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}getHighlightData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}getTooltipHtml(e){const t=this.axes[Sx.X],i=this.axes[Sx.Y];if(!this.properties.isValid()||!t||!i)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:a}=this,{xKey:n,yLowKey:s,yHighKey:r,xName:l,yName:h,yLowName:d,yHighName:c,fill:u,tooltip:p}=this.properties,{datum:y,itemId:g,xValue:m,yLowValue:x,yHighValue:f}=e,v=null!=u?u:"gray",S=Bx(t.formatDatum(m)),M=Bx(i.formatDatum(x)),D=Bx(i.formatDatum(f)),b=null!=l?l:n,N=null!=d?d:s,I=null!=c?c:r,k=Bx(h),T=h?"<b>".concat(Bx(b),"</b>: ").concat(S,"<br><b>").concat(Bx(N),"</b>: ").concat(M,"<br><b>").concat(Bx(I),"</b>: ").concat(D,"<br>"):"".concat(S,": ").concat(M," - ").concat(D);return p.toTooltipHtml({title:k,content:T,backgroundColor:v},{seriesId:a,itemId:g,datum:y,xKey:n,yLowKey:s,yHighKey:r,xName:l,yLowName:d,yHighName:c,yName:h,color:v,title:k,yHighValue:f,yLowValue:x})}getLegendData(e){var t,i;if("category"!==e)return[];const{yLowKey:o,yHighKey:a,yName:n,yLowName:s,yHighName:r,fill:l,stroke:h,strokeWidth:d,strokeOpacity:c,lineDash:u,visible:p,marker:y}=this.properties,g=null!=n?n:"".concat(null!=s?s:o," - ").concat(null!=r?r:a);return[{legendType:"category",id:this.id,itemId:"".concat(o,"-").concat(a),seriesId:this.id,enabled:p,label:{text:"".concat(g)},marker:{shape:y.shape,fill:null!=(t=y.fill)?t:l,stroke:null!=(i=y.stroke)?i:h,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,strokeWidth:y.strokeWidth},line:{stroke:h,strokeOpacity:c,strokeWidth:d,lineDash:u}}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new o._Scene.Group}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,contextData:o,paths:a}=e,{animationManager:n}=this.ctx;this.updateAreaPaths(a,o),Ox(this,n,...a),Lx([t],Ax),Ex(this,n,t),_x(this,"labels",n,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{contextData:t,paths:i}=e;super.animateWaitingUpdateReady(e),this.updateAreaPaths(i,t)}getFormattedMarkerStyle(e){const{xKey:t,yLowKey:i,yHighKey:o}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yLowKey:i,yHighKey:o,highlighted:!0})}computeFocusBounds(e){return zx(this,e)}};jx.className="RangeAreaSeries",jx.type="range-area";var Wx={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,fillOpacity:.7,nodeClickRange:"nearest",marker:{__extends__:o._Theme.EXTENDS_CARTESIAN_MARKER_DEFAULTS,enabled:!1,fillOpacity:1,strokeWidth:2,size:6},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,color:o._Theme.DEFAULT_LABEL_COLOUR}},axes:{[o._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},{markerPaletteFactory:Yx}=o._ModuleSupport,Gx={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",instanceConstructor:jx,defaultAxes:[{type:o._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:o._Theme.POSITION.LEFT},{type:o._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:o._Theme.POSITION.BOTTOM}],themeTemplate:Wx,paletteFactory:e=>{const{marker:t}=Yx(e);return{fill:t.fill,stroke:t.stroke,marker:t}}},{DropShadow:Hx,Label:Xx}=o._Scene,{AbstractBarSeriesProperties:Qx,SeriesTooltip:Zx,Validate:qx,COLOR_STRING:Jx,FUNCTION:$x,LINE_DASH:ef,OBJECT:tf,PLACEMENT:of,POSITIVE_NUMBER:af,RATIO:nf,STRING:sf}=o._ModuleSupport,rf=class extends Xx{constructor(){super(...arguments),this.placement="inside",this.padding=6}};f([qx(of)],rf.prototype,"placement",2),f([qx(af)],rf.prototype,"padding",2);var lf=class extends Qx{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=(new Hx).set({enabled:!1}),this.label=new rf,this.tooltip=new Zx}};f([qx(sf)],lf.prototype,"xKey",2),f([qx(sf)],lf.prototype,"yLowKey",2),f([qx(sf)],lf.prototype,"yHighKey",2),f([qx(sf,{optional:!0})],lf.prototype,"xName",2),f([qx(sf,{optional:!0})],lf.prototype,"yName",2),f([qx(sf,{optional:!0})],lf.prototype,"yLowName",2),f([qx(sf,{optional:!0})],lf.prototype,"yHighName",2),f([qx(Jx)],lf.prototype,"fill",2),f([qx(nf)],lf.prototype,"fillOpacity",2),f([qx(Jx)],lf.prototype,"stroke",2),f([qx(af)],lf.prototype,"strokeWidth",2),f([qx(nf)],lf.prototype,"strokeOpacity",2),f([qx(ef)],lf.prototype,"lineDash",2),f([qx(af)],lf.prototype,"lineDashOffset",2),f([qx(af)],lf.prototype,"cornerRadius",2),f([qx($x,{optional:!0})],lf.prototype,"formatter",2),f([qx(tf)],lf.prototype,"shadow",2),f([qx(tf)],lf.prototype,"label",2),f([qx(tf)],lf.prototype,"tooltip",2);var{SeriesNodePickMode:hf,valueProperty:df,keyProperty:cf,ChartAxisDirection:uf,getRectConfig:pf,updateRect:yf,checkCrisp:gf,updateLabelNode:mf,SMALLEST_KEY_INTERVAL:xf,diff:ff,prepareBarAnimationFunctions:vf,midpointStartingBarPosition:Sf,resetBarSelectionsFn:Mf,fixNumericExtent:Df,seriesLabelFadeInAnimation:bf,resetLabelFn:Nf,animationValidation:If,createDatumId:kf,isFiniteNumber:Tf,computeBarFocusBounds:Af}=o._ModuleSupport,{Rect:Of,PointerEvents:Lf,motion:Ef}=o._Scene,{sanitizeHtml:_f,isNumber:Rf,extent:Cf}=o._Util,{ContinuousScale:wf}=o._Scale,Pf=class extends o._ModuleSupport.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},zf=class extends o._ModuleSupport.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[hf.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:Mf,label:Nf}}),this.properties=new lf,this.NodeEvent=Pf}processData(e){return S(this,null,(function*(){var t,i,o;if(!this.properties.isValid())return;const{xKey:a,yLowKey:n,yHighKey:s}=this.properties,r=null==(t=this.getCategoryAxis())?void 0:t.scale,l=null==(i=this.getValueAxis())?void 0:i.scale,{isContinuousX:h,xScaleType:d,yScaleType:c}=this.getScaleInformation({xScale:r,yScale:l}),u=[];this.ctx.animationManager.isSkipped()||(this.processedData&&u.push(ff(this.processedData)),u.push(If()));const p=this.visible?{}:{forceValue:0},{processedData:y}=yield this.requestDataModel(e,this.data,{props:[cf(a,d,{id:"xValue"}),df(n,c,g({id:"yLowValue"},p)),df(s,c,g({id:"yHighValue"},p)),...h?[xf]:[],...u],groupByKeys:!0});this.smallestDataInterval=null==(o=y.reduced)?void 0:o.smallestKeyInterval,this.animationState.transition("updateData")}))}getSeriesDomain(e){var t;const{processedData:i,dataModel:o,smallestDataInterval:a}=this;if(!i||!o)return[];const{domain:{keys:[n],values:s}}=i;if(e===this.getCategoryDirection()){const e=o.resolveProcessedDataDefById(this,"xValue");if("key"===(null==e?void 0:e.def.type)&&"category"===(null==e?void 0:e.def.valueType))return n;const i=Tf(a)?a:0,s=null!=(t=Cf(n))?t:[NaN,NaN],r=this.getCategoryAxis(),l=s[0]+-i,h=s[1]+i;return Df([l,h],r)}{const e=s[o.resolveProcessedDataIndexById(this,"yLowValue")],t=s[o.resolveProcessedDataIndexById(this,"yHighValue")],i=[e[0]>t[0]?t[0]:e[0],t[1]<e[1]?e[1]:t[1]];return Df(i)}}createNodeData(){return S(this,null,(function*(){const{data:e,dataModel:t,groupScale:i,processedData:a,properties:{visible:n}}=this,s=this.getCategoryAxis(),r=this.getValueAxis();if(!(e&&s&&r&&t))return;const l=s.scale,h=r.scale,d=this.getBarDirection()===uf.X,{xKey:c,yLowKey:u,yHighKey:p,fill:y,stroke:g,strokeWidth:m}=this.properties,x="".concat(u,"-").concat(p),f={itemId:x,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible};if(!n)return f;const v=t.resolveProcessedDataIndexById(this,"yLowValue"),S=t.resolveProcessedDataIndexById(this,"yHighValue"),M=t.resolveProcessedDataIndexById(this,"xValue"),{barWidth:D,groupIndex:b}=this.updateGroupScale(s),N=wf.is(l)?-.5*D:0;return null==a||a.data.forEach(((e,t)=>{let{keys:a,datum:n,values:s}=e;s.forEach(((e,s)=>{const r=a[M],I=Math.round(l.convert(r))+i.convert(String(b))+N,k=e[v],T=e[S];if(!o._Util.isNumber(T)||!o._Util.isNumber(k))return;const A=Math.min(k,T),O=Math.max(k,T),L=Math.round(h.convert(A)),E=Math.round(h.convert(O)),_=L,R=Math.max(m,Math.abs(_-E)),C={x:d?Math.min(E,_):I,y:d?I:Math.min(E,_),width:d?R:D,height:d?D:R},w={x:C.x+C.width/2,y:C.y+C.height/2},P=this.createLabelData({rect:C,barAlongX:d,yLowValue:A,yHighValue:O,datum:n[s],series:this}),z={index:t,valueIndex:s,series:this,itemId:x,datum:n[s],xValue:r,yLowValue:k,yHighValue:T,yLowKey:u,yHighKey:p,xKey:c,x:C.x,y:C.y,width:C.width,height:C.height,midPoint:w,fill:y,stroke:g,strokeWidth:m,opacity:1,labels:P};f.nodeData.push(z),f.labelData.push(...P)}))})),f}))}createLabelData(e){let{rect:t,barAlongX:i,yLowValue:o,yHighValue:a,datum:n,series:s}=e;const{xKey:r,yLowKey:l,yHighKey:h,xName:d,yLowName:c,yHighName:u,yName:p,label:y}=this.properties,m={datum:n,xKey:r,yLowKey:l,yHighKey:h,xName:d,yLowName:c,yHighName:u,yName:p},{placement:x,padding:f}=y,v=f*("outside"===x?1:-1),S={x:t.x+(i?-v:t.width/2),y:t.y+(i?t.height/2:t.height+v),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(y,g({itemId:"low",value:o},m),(e=>Tf(e)?e.toFixed(2):String(e))),itemId:"low",datum:n,series:s},M={x:t.x+(i?t.width+v:t.width/2),y:t.y+(i?t.height/2:-v),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(y,g({itemId:"high",value:a},m),(e=>Rf(e)?e.toFixed(2):"")),itemId:"high",datum:n,series:s};return"outside"===x&&(S.textAlign=i?"right":"center",S.textBaseline=i?"middle":"top",M.textAlign=i?"left":"center",M.textBaseline=i?"middle":"bottom"),[S,M]}nodeFactory(){return new Of}updateDatumSelection(e){return S(this,null,(function*(){const{nodeData:t,datumSelection:i}=e,o=null!=t?t:[];return i.update(o,void 0,(e=>this.getDatumId(e)))}))}updateDatumNodes(e){return S(this,null,(function*(){const{datumSelection:t,isHighlight:i}=e,{id:o,ctx:a}=this,{yLowKey:n,yHighKey:s,highlightStyle:{item:r}}=this.properties,l=this.axes[uf.X],h=gf(null==l?void 0:l.visibleRange),d=this.getCategoryDirection()===uf.X;t.each(((e,t)=>{const{fillOpacity:l,strokeOpacity:c,strokeWidth:u,lineDash:p,lineDashOffset:y,formatter:g,shadow:m}=this.properties,x={fill:t.fill,stroke:t.stroke,fillOpacity:l,strokeOpacity:c,lineDash:p,lineDashOffset:y,fillShadow:m,strokeWidth:this.getStrokeWidth(u),cornerRadius:this.properties.cornerRadius},f=d?t.width>0:t.height>0,v=pf({datum:t,lowValue:t.yLowValue,highValue:t.yHighValue,isHighlighted:i,style:x,highlightStyle:r,formatter:g,seriesId:o,itemId:t.itemId,ctx:a,yLowKey:n,yHighKey:s});v.crisp=h,v.visible=f,yf({rect:e,config:v})}))}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}updateLabelSelection(e){return S(this,null,(function*(){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,(e=>{e.pointerEvents=Lf.None}))}))}updateLabelNodes(e){return S(this,null,(function*(){e.labelSelection.each(((e,t)=>{mf(e,this.properties.label,t)}))}))}getTooltipHtml(e){var t,i;const{id:a,ctx:{callbackCache:n}}=this,s=this.getCategoryAxis(),r=this.getValueAxis();if(!this.properties.isValid()||!s||!r)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{xKey:l,yLowKey:h,yHighKey:d,xName:c,yLowName:u,yHighName:p,yName:y,fill:g,strokeWidth:m,formatter:x,tooltip:f}=this.properties,{datum:v,itemId:S,xValue:M,yLowValue:D,yHighValue:b}=e;let N;x&&(N=n.call(x,{datum:v,xKey:l,yLowKey:h,yHighKey:d,fill:g,strokeWidth:m,highlighted:!1,seriesId:a,itemId:S}));const I=null!=(i=null!=(t=null==N?void 0:N.fill)?t:g)?i:"gray",k=_f(s.formatDatum(M)),T=_f(r.formatDatum(D)),A=_f(r.formatDatum(b)),O=null!=c?c:l,L=null!=u?u:h,E=null!=p?p:d,_=_f(y),R={title:_,content:y?"<b>".concat(_f(O),"</b>: ").concat(k,"<br><b>").concat(_f(L),"</b>: ").concat(T,"<br><b>").concat(_f(E),"</b>: ").concat(A,"<br>"):"".concat(k,": ").concat(T," - ").concat(A),backgroundColor:I};return f.toTooltipHtml(R,{datum:v,xKey:l,xName:c,yLowKey:h,yLowName:u,yHighKey:d,yHighName:p,yName:y,color:I,seriesId:a,itemId:S,title:_,yHighValue:b,yLowValue:D})}getLegendData(e){const{id:t,visible:i}=this;if("category"!==e)return[];const{fill:o,stroke:a,strokeWidth:n,fillOpacity:s,strokeOpacity:r,yName:l,yLowName:h,yHighName:d,yLowKey:c,yHighKey:u}=this.properties,p=null!=l?l:"".concat(null!=h?h:c," - ").concat(null!=d?d:u);return[{legendType:"category",id:t,itemId:"".concat(c,"-").concat(u),seriesId:t,enabled:i,label:{text:"".concat(p)},marker:{fill:o,stroke:a,fillOpacity:s,strokeOpacity:r,strokeWidth:n}}]}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i}=e;const o=vf(Sf(this.isVertical(),"normal"));Ef.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],o),bf(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){var t;const{datumSelection:i,labelSelection:o}=e,{processedData:a}=this,n=null==(t=null==a?void 0:a.reduced)?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const s=vf(Sf(this.isVertical(),"fade"));Ef.fromToMotion(this.id,"datums",this.ctx.animationManager,[i],s,((e,t)=>kf(t.xValue,t.valueIndex)),n),bf(this,"labels",this.ctx.animationManager,o)}getDatumId(e){return"".concat(e.xValue,"-").concat(e.valueIndex)}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}computeFocusBounds(e){let{datumIndex:t,seriesRect:i}=e;var o;return Af(null==(o=this.contextNodeData)?void 0:o.nodeData[t],this.contentGroup,i)}};zf.className="RangeBarSeries",zf.type="range-bar";var Kf={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,color:o._Theme.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside"}},axes:{[o._Theme.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},Vf={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",instanceConstructor:zf,defaultAxes:[{type:o._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:o._Theme.POSITION.BOTTOM},{type:o._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:o._Theme.POSITION.LEFT}],themeTemplate:Kf,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[o]}=t(1);return{fill:i,stroke:o}},groupable:!0,swapDefaultAxesCondition:e=>{let{direction:t}=e;return"horizontal"===t}},{HierarchySeriesProperties:Bf,HighlightStyle:Ff,SeriesTooltip:Uf,Validate:jf,COLOR_STRING:Wf,FUNCTION:Yf,NUMBER:Gf,OBJECT:Hf,POSITIVE_NUMBER:Xf,RATIO:Qf,STRING:Zf}=o._ModuleSupport,qf=class extends Ff{constructor(){super(...arguments),this.label=new Mh,this.secondaryLabel=new Mh}};f([jf(Zf,{optional:!0})],qf.prototype,"fill",2),f([jf(Qf,{optional:!0})],qf.prototype,"fillOpacity",2),f([jf(Wf,{optional:!0})],qf.prototype,"stroke",2),f([jf(Xf,{optional:!0})],qf.prototype,"strokeWidth",2),f([jf(Qf,{optional:!0})],qf.prototype,"strokeOpacity",2),f([jf(Hf)],qf.prototype,"label",2),f([jf(Hf)],qf.prototype,"secondaryLabel",2);var Jf=class extends Bf{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.cornerRadius=0,this.highlightStyle=new qf,this.label=new Mh,this.secondaryLabel=new Dh,this.tooltip=new Uf}};f([jf(Zf,{optional:!0})],Jf.prototype,"sizeName",2),f([jf(Zf,{optional:!0})],Jf.prototype,"labelKey",2),f([jf(Zf,{optional:!0})],Jf.prototype,"secondaryLabelKey",2),f([jf(Qf)],Jf.prototype,"fillOpacity",2),f([jf(Xf)],Jf.prototype,"strokeWidth",2),f([jf(Qf)],Jf.prototype,"strokeOpacity",2),f([jf(Xf)],Jf.prototype,"cornerRadius",2),f([jf(Gf,{optional:!0})],Jf.prototype,"sectorSpacing",2),f([jf(Gf,{optional:!0})],Jf.prototype,"padding",2),f([jf(Yf,{optional:!0})],Jf.prototype,"formatter",2),f([jf(Hf)],Jf.prototype,"highlightStyle",2),f([jf(Hf)],Jf.prototype,"label",2),f([jf(Hf)],Jf.prototype,"secondaryLabel",2),f([jf(Hf)],Jf.prototype,"tooltip",2);var{fromToMotion:$f}=o._ModuleSupport,{Sector:ev,Group:tv,Selection:iv,Text:ov}=o._Scene,{sanitizeHtml:av}=o._Util,nv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*Math.PI/e.sumSize,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Array.from(e,(()=>{})),a=t;for(const n of e.children){const e=a,t=a+n.sumSize*i;o[n.index]={start:e,end:t},nv(n,e,i,o),a=t}return o},sv=class e extends o._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new Jf,this.groupSelection=iv.select(this.contentGroup,tv),this.highlightSelection=iv.select(this.highlightGroup,tv),this.angleData=[]}processData(){return S(this,null,(function*(){const{childrenKey:t,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:s,sizeName:r}=this.properties;yield v(e.prototype,this,"processData").call(this),this.angleData=nv(this.rootNode);const l=e=>"number"===typeof e?e.toFixed(2):"string"===typeof e?e:"";this.labelData=Array.from(this.rootNode,(e=>{let h,d,{datum:c,depth:u}=e;if(null!=c&&null!=u&&null!=a){const e=c[a];h=this.getLabelText(this.properties.label,{depth:u,datum:c,childrenKey:t,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:s,sizeName:r,value:e},l)}if(""===h&&(h=void 0),null!=c&&null!=u&&null!=n){const e=c[n];d=this.getLabelText(this.properties.secondaryLabel,{depth:u,datum:c,childrenKey:t,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:n,sizeKey:s,sizeName:r,value:e},l)}return""===d&&(d=void 0),null!=h||null!=d?{label:h,secondaryLabel:d}:void 0}))}))}updateSelections(){return S(this,null,(function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e}=this;if(null==e)return;if(null==e.seriesRect)return;const t=Array.from(this.rootNode),i=e=>{e.append([new ev,new ov({tag:0}),new ov({tag:1})])};this.groupSelection.update(t,i,(e=>this.getDatumId(e))),this.highlightSelection.update(t,i,(e=>this.getDatumId(e)))}))}updateNodes(){return S(this,null,(function*(){var e;const{chart:t,data:i,maxDepth:o,labelData:a}=this;if(null==t||null==i||null==a)return;const{width:n,height:s}=t.seriesRect,{sectorSpacing:r=0,padding:l=0,cornerRadius:h,highlightStyle:d}=this.properties;this.contentGroup.translationX=n/2,this.contentGroup.translationY=s/2,this.highlightGroup.translationX=n/2,this.highlightGroup.translationY=s/2;const c=.5*r,u=Math.min(n,s)/2/(o+1),y=-Math.PI/2,g=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight();(new ov).setFont(this.properties.label),this.rootNode.walk((e=>{const t=this.angleData[e.index];if(null!=e.depth&&null!=t){const i=t.end-t.start,o=(e.depth+.5)*u;e.midPoint.x=Math.cos(i)*o,e.midPoint.y=Math.sin(i)*o}}));const m=(e,t,i)=>{var o,a,n,s,r,l,p,g,m,x;const{depth:f}=e,v=this.angleData[e.index];if(null==f||null==v)return void(t.visible=!1);let S,M,D,b,N;t.visible=!0,i&&(S=d.fill,M=d.fillOpacity,D=d.stroke,b=d.strokeWidth,N=d.strokeOpacity);const I=this.getSectorFormat(e,i),k=null!=(a=null!=(o=null==I?void 0:I.fill)?o:S)?a:e.fill,T=null!=(s=null!=(n=null==I?void 0:I.fillOpacity)?n:M)?s:this.properties.fillOpacity,A=null!=(l=null!=(r=null==I?void 0:I.stroke)?r:D)?l:e.stroke,O=null!=(g=null!=(p=null==I?void 0:I.strokeWidth)?p:b)?g:this.properties.strokeWidth,L=null!=(x=null!=(m=null==I?void 0:I.strokeOpacity)?m:N)?x:this.properties.strokeOpacity;t.fill=k,t.fillOpacity=T,t.stroke=A,t.strokeWidth=O,t.strokeOpacity=L,t.centerX=0,t.centerY=0,t.innerRadius=f*u,t.outerRadius=(f+1)*u,t.startAngle=v.start+y,t.endAngle=v.end+y,t.inset=c+.5*O,t.cornerRadius=h};this.groupSelection.selectByClass(ev).forEach((e=>{m(e.datum,e,!1)})),this.highlightSelection.selectByClass(ev).forEach((e=>{const t=e.datum,i=g===t;e.visible=i,e.visible&&m(e.datum,e,i)}));const x=Array.from(this.rootNode,((e,t)=>{const{depth:i}=e,o=a[t],n=this.angleData[t];if(null==i||null==n)return;const s=i*u+c,r=(i+1)*u-c,h=s>c?c/s:c,d=r>c?c/r:c,g=n.start+h,m=n.end+h-g,x=n.start+d,f=n.end+d-x,v=kh(null==o?void 0:o.label,this.properties.label,null==o?void 0:o.secondaryLabel,this.properties.secondaryLabel,{padding:l},(t=>{var o;if(0===i&&(null==(o=e.parent)?void 0:o.sumSize)===e.sumSize){return{width:2*Math.sqrt(p(r,2)-p(.5*t,2)),height:t,meta:0}}const a=t,n=2*Math.sqrt(p(r,2)-p(s+a,2)),l=m<Math.PI?2*s*Math.tan(.5*m):1/0,h=Math.min(n,l);let d,c;return 0===i?(d=t,c=Math.sqrt(p(r,2)-p(d/2,2))-t/(2*Math.tan(.5*f))):(d=2*s*Math.tan(.5*m),c=Math.sqrt(p(r,2)-p(d/2,2))-s),h>=c?{width:h,height:a,meta:1}:{width:c,height:d,meta:2}}));if(null==v)return;const{width:S,height:M,meta:D,label:b,secondaryLabel:N}=v,I=y+(n.start+n.end)/2,k=(Math.sin(I)>=0?3:12)&(Math.cos(I)>=0?6:9);let T;switch(D){case 0:T=0;break;case 1:{const e=r-(u-M)*.58,t=Math.sqrt(p(r-l,2)-p(S/2,2));T=Math.min(e,t);break}case 2:if(0===i){T=.5*(M/(2*Math.tan(.5*m))+.5*S+(Math.sqrt(p(r,2)-p(.5*M,2))-.5*S))}else T=.5*(s+r)}return{width:S,height:M,labelPlacement:D,circleQuarter:k,radius:T,theta:I,label:b,secondaryLabel:N}})),f=(e,t,i,o)=>{const{index:a,depth:n}=e,s=null==x?void 0:x[a],r=0===i?this.properties.label:this.properties.secondaryLabel,l=0===i?null==s?void 0:s.label:null==s?void 0:s.secondaryLabel;if(null==n||null==s||null==l)return void(t.visible=!1);const{height:h,labelPlacement:d,circleQuarter:c,radius:u,theta:p}=s;let y;if(o){y=(0===i?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color}switch(t.text=l.text,t.fontSize=l.fontSize,t.lineHeight=l.lineHeight,t.fontStyle=r.fontStyle,t.fontFamily=r.fontFamily,t.fontWeight=r.fontWeight,t.fill=null!=y?y:r.color,d){case 0:t.textAlign="center",t.textBaseline="top",t.translationX=0,t.translationY=(0===i?0:h-l.height)-.5*h,t.rotation=0;break;case 1:{const e=0!==(3&c),o=0===i===!e?u:u-(h-l.height);t.textAlign="center",t.textBaseline=e?"bottom":"top",t.translationX=Math.cos(p)*o,t.translationY=Math.sin(p)*o,t.rotation=e?p-.5*Math.PI:p+.5*Math.PI;break}case 2:{const e=0!==(6&c),o=0===i===!e?.5*(h-l.height):.5*(l.height-h);t.textAlign="center",t.textBaseline="middle",t.translationX=Math.cos(p)*u+Math.cos(p+Math.PI/2)*o,t.translationY=Math.sin(p)*u+Math.sin(p+Math.PI/2)*o,t.rotation=e?p:p+Math.PI;break}}t.visible=!0};this.groupSelection.selectByClass(ov).forEach((e=>{f(e.datum,e,e.tag,!1)})),this.highlightSelection.selectByClass(ov).forEach((e=>{const t=e.datum,i=g===t;e.visible=i,e.visible&&f(e.datum,e,e.tag,i)}))}))}getSectorFormat(e,t){const{datum:i,fill:o,stroke:a,depth:n}=e,{ctx:{callbackCache:s},properties:{formatter:r}}=this;if(!r||null==i||null==n)return{};const{colorKey:l,labelKey:h,sizeKey:d,strokeWidth:c}=this.properties,u=s.call(r,{seriesId:this.id,depth:n,datum:i,colorKey:l,labelKey:h,sizeKey:d,fill:o,stroke:a,strokeWidth:c,highlighted:t});return null!=u?u:{}}getTooltipHtml(e){var t;const{id:i}=this,{tooltip:a,colorKey:n,colorName:s=n,labelKey:r,secondaryLabelKey:l,sizeKey:h,sizeName:d=h,childrenKey:c}=this.properties,{datum:u,depth:p}=e;if(null==u||null==p)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const y=null!=r?u[r]:void 0,g=this.getSectorFormat(e,!1),m=null!=(t=null==g?void 0:g.fill)?t:e.fill;if(!a.renderer&&!y)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const x=[],f=null!=l?u[l]:void 0;null!=f&&l!==n&&l!==h&&x.push(av(f));const v=null!=h?u[h]:void 0;null!=v&&x.push("".concat(d,": ").concat(av(v)));const S=null!=n?u[n]:void 0;null!=S&&x.push("".concat(s,": ").concat(av(S)));const M=x.join("<br>"),D={title:y,color:this.properties.label.color,backgroundColor:m,content:M};return a.toTooltipHtml(D,{depth:p,datum:u,colorKey:n,labelKey:r,secondaryLabelKey:l,sizeKey:h,title:y,color:m,seriesId:i,childrenKey:c,colorName:s,itemId:void 0,sizeName:d})}createNodeData(){return S(this,null,(function*(){}))}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.groupSelection.selectByClass(ev))}animateEmptyUpdateReady(e){let{datumSelections:t}=e;$f(this.id,"nodes",this.ctx.animationManager,t,{toFn:(e,t,i)=>({scalingX:1,scalingY:1}),fromFn:(e,t,i)=>"unknown"===i&&null!=t&&null==e.previousDatum?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}})}};sv.className="SunburstSeries",sv.type="sunburst";var rv=sv,{EXTENDS_SERIES_DEFAULTS:lv,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:hv}=o._Theme,dv={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",instanceConstructor:rv,solo:!0,themeTemplate:{series:{__extends__:lv,label:{fontSize:14,minimumFontSize:9,color:hv,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:hv,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:hv},secondaryLabel:{color:hv},stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:e=>{let{takeColors:t,colorsCount:i,themeTemplateParameters:a}=e;const{properties:n}=a,{fills:s,strokes:r}=t(i);return{fills:s,strokes:r,colorRange:n.get(o._Theme.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE)}}},{Label:cv}=o._Scene,{BaseProperties:uv,HierarchySeriesProperties:pv,HighlightStyle:yv,SeriesTooltip:gv,Validate:mv,BOOLEAN:xv,COLOR_STRING:fv,FUNCTION:vv,NUMBER:Sv,OBJECT:Mv,POSITIVE_NUMBER:Dv,RATIO:bv,STRING:Nv,STRING_ARRAY:Iv,TEXT_ALIGN:kv,VERTICAL_ALIGN:Tv}=o._ModuleSupport,Av=class extends cv{constructor(){super(...arguments),this.spacing=0}};f([mv(Sv)],Av.prototype,"spacing",2);var Ov=class extends uv{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new Av}};f([mv(Nv,{optional:!0})],Ov.prototype,"fill",2),f([mv(bv)],Ov.prototype,"fillOpacity",2),f([mv(fv,{optional:!0})],Ov.prototype,"stroke",2),f([mv(Dv)],Ov.prototype,"strokeWidth",2),f([mv(bv)],Ov.prototype,"strokeOpacity",2),f([mv(Dv)],Ov.prototype,"cornerRadius",2),f([mv(kv)],Ov.prototype,"textAlign",2),f([mv(Dv)],Ov.prototype,"gap",2),f([mv(Dv)],Ov.prototype,"padding",2),f([mv(xv)],Ov.prototype,"interactive",2),f([mv(Mv)],Ov.prototype,"label",2);var Lv=class extends uv{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.cornerRadius=0,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new Mh,this.secondaryLabel=new Dh}};f([mv(Nv,{optional:!0})],Lv.prototype,"fill",2),f([mv(bv)],Lv.prototype,"fillOpacity",2),f([mv(fv,{optional:!0})],Lv.prototype,"stroke",2),f([mv(Dv,{optional:!0})],Lv.prototype,"strokeWidth",2),f([mv(bv)],Lv.prototype,"strokeOpacity",2),f([mv(Dv)],Lv.prototype,"cornerRadius",2),f([mv(kv)],Lv.prototype,"textAlign",2),f([mv(Tv)],Lv.prototype,"verticalAlign",2),f([mv(Dv)],Lv.prototype,"gap",2),f([mv(Dv)],Lv.prototype,"padding",2),f([mv(Mv)],Lv.prototype,"label",2),f([mv(Mv)],Lv.prototype,"secondaryLabel",2);var Ev=class extends uv{constructor(){super(...arguments),this.label=new Mh}};f([mv(Nv,{optional:!0})],Ev.prototype,"fill",2),f([mv(bv,{optional:!0})],Ev.prototype,"fillOpacity",2),f([mv(fv,{optional:!0})],Ev.prototype,"stroke",2),f([mv(Dv,{optional:!0})],Ev.prototype,"strokeWidth",2),f([mv(bv,{optional:!0})],Ev.prototype,"strokeOpacity",2),f([mv(Mv)],Ev.prototype,"label",2);var _v=class extends uv{constructor(){super(...arguments),this.label=new Mh,this.secondaryLabel=new Dh}};f([mv(Nv,{optional:!0})],_v.prototype,"fill",2),f([mv(bv,{optional:!0})],_v.prototype,"fillOpacity",2),f([mv(fv,{optional:!0})],_v.prototype,"stroke",2),f([mv(Dv,{optional:!0})],_v.prototype,"strokeWidth",2),f([mv(bv,{optional:!0})],_v.prototype,"strokeOpacity",2),f([mv(Mv)],_v.prototype,"label",2),f([mv(Mv)],_v.prototype,"secondaryLabel",2);var Rv=class extends yv{constructor(){super(...arguments),this.group=new Ev,this.tile=new _v}};f([mv(Mv)],Rv.prototype,"group",2),f([mv(Mv)],Rv.prototype,"tile",2);var Cv=class extends pv{constructor(){super(...arguments),this.highlightStyle=new Rv,this.tooltip=new gv,this.group=new Ov,this.tile=new Lv,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};f([mv(Nv,{optional:!0})],Cv.prototype,"sizeName",2),f([mv(Nv,{optional:!0})],Cv.prototype,"labelKey",2),f([mv(Nv,{optional:!0})],Cv.prototype,"secondaryLabelKey",2),f([mv(vv,{optional:!0})],Cv.prototype,"formatter",2),f([mv(Mv)],Cv.prototype,"highlightStyle",2),f([mv(Mv)],Cv.prototype,"tooltip",2),f([mv(Mv)],Cv.prototype,"group",2),f([mv(Mv)],Cv.prototype,"tile",2),f([mv(Iv)],Cv.prototype,"undocumentedGroupFills",2),f([mv(Iv)],Cv.prototype,"undocumentedGroupStrokes",2);var{Rect:wv,Group:Pv,BBox:zv,Selection:Kv,Text:Vv}=o._Scene,{Color:Bv,Logger:Fv,isEqual:Uv,sanitizeHtml:jv}=o._Util,Wv=new Vv;function Yv(e){if("string"===typeof e&&!Bv.validColorString(e)){const t="black";return Fv.warnOnce('invalid Treemap tile colour string "'.concat(e,'". Affected treemap tiles will be coloured ').concat(t,".")),t}return e}function Gv(e){return e.children.length>0?e.sumSize-e.size:e.size}var Hv={left:0,center:.5,right:1},Xv={top:0,middle:.5,bottom:1},Qv=class extends o._Scene.Group{distanceSquared(e,t){return this.computeBBox().distanceSquared(e,t)}},Zv=class e extends o._ModuleSupport.HierarchySeries{constructor(){super(...arguments),this.properties=new Cv,this.groupSelection=Kv.select(this.contentGroup,Qv),this.highlightSelection=Kv.select(this.highlightGroup,Pv)}groupTitleHeight(e,t){var i,o;const a=null==(o=null==(i=this.labelData)?void 0:i[e.index])?void 0:o.label,{label:n}=this.properties.group;if(null!=a&&!(n.fontSize>t.width/3||n.fontSize>t.height/3)){const{height:e}=function(e,t){const{fontStyle:i,fontWeight:o,fontSize:a,fontFamily:n}=t;Wv.setProperties({text:e,fontStyle:i,fontWeight:o,fontSize:a,fontFamily:n,textAlign:"left",textBaseline:"top"});const{width:s,height:r}=Wv.computeBBox();return{width:s,height:r}}(a,n);return Math.max(e,n.fontSize)}}getNodePadding(e,t){if(0===e.index)return{top:0,right:0,bottom:0,left:0};if(0===e.children.length){const{padding:e}=this.properties.tile;return{top:e,right:e,bottom:e,left:e}}const{label:{spacing:i},padding:o}=this.properties.group,a=this.groupTitleHeight(e,t);return{top:o+(null!=a?a+i:0),right:o,bottom:o,left:o}}processData(){return S(this,null,(function*(){var t;yield v(e.prototype,this,"processData").call(this);const{childrenKey:i,colorKey:o,colorName:a,labelKey:n,secondaryLabelKey:s,sizeKey:r,sizeName:l,tile:h,group:d}=this.properties;if(!(null==(t=this.data)?void 0:t.length))return void(this.labelData=void 0);const c=e=>"number"===typeof e?e.toFixed(2):"string"===typeof e?e:"";this.labelData=Array.from(this.rootNode,(e=>{let{datum:t,depth:u,children:p}=e;const y=0===p.length,g=y?h.label:d.label;let m,x;if(null!=t&&null!=u&&null!=n){const e=t[n];m=this.getLabelText(g,{depth:u,datum:t,childrenKey:i,colorKey:o,colorName:a,labelKey:n,secondaryLabelKey:s,sizeKey:r,sizeName:l,value:e},c)}if(""===m&&(m=void 0),y&&null!=t&&null!=u&&null!=s){const e=t[s];x=this.getLabelText(h.secondaryLabel,{depth:u,datum:t,childrenKey:i,colorKey:o,colorName:a,labelKey:n,secondaryLabelKey:s,sizeKey:r,sizeName:l,value:e},c)}return""===x&&(x=void 0),null!=m||null!=x?{label:m,secondaryLabel:x}:void 0}))}))}squarify(e,t,i,o){const{index:a,datum:n,children:s}=e;if(t.width<=0||t.height<=0)return i[a]=void 0,void(o[a]=void 0);const r=null!=n?this.getNodePadding(e,t):{top:0,right:0,bottom:0,left:0};i[a]=0===a?void 0:t,o[a]=0===a?void 0:r;const l=Array.from(s,((e,t)=>t)).filter((e=>Gv(s[e])>0)).sort(((e,t)=>Gv(s[t])-Gv(s[e]))),h=e=>{const t=l[e];return s[t]},d=l.every((e=>0===s[e].children.length)),c=t.width-r.left-r.right,u=t.height-r.top-r.bottom;if(c<=0||u<=0)return;const p=l.length;let y=0,g=0,m=1/0,x=l.reduce(((e,t)=>e+Gv(s[t])),0);const f=new zv(t.x+r.left,t.y+r.top,c,u),v=f.clone();let S=0;for(;S<p;){const e=Gv(h(S)),t=Gv(h(g)),a=v.width<v.height;y+=e;const n=a?v.height:v.width,s=a?v.width:v.height,r=s*t/y;let l=n*y/x;const c=Math.max(r,l)/Math.min(r,l),u=Math.abs(1-c);if(u<m){m=u,S++;continue}y-=e,l=n*y/x;let p=a?v.x:v.y;for(let m=g;m<S;m++){const e=h(m),t=Gv(e),n=a?p:v.x,r=a?v.y:p,c=s*t/y,u=new zv(n,r,a?c:l,a?l:c);this.applyGap(f,u,d),this.squarify(e,u,i,o),x-=t,p+=c}a?(v.y+=l,v.height-=l):(v.x+=l,v.width-=l),g=S,y=0,m=1/0}const M=v.width<v.height;let D=M?v.x:v.y;for(let b=g;b<p;b++){const e=h(b),t=M?D:v.x,a=M?v.y:D,n=Gv(e)/x,s=v.width*(M?n:1),r=v.height*(M?1:n),l=new zv(t,a,s,r);this.applyGap(f,l,d),this.squarify(e,l,i,o),D+=M?s:r}}applyGap(e,t,i){const o=i?.5*this.properties.tile.gap:.5*this.properties.group.gap,a=e=>({left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height}),n=a(e),s=a(t);["top","right","bottom","left"].forEach((e=>{Uv(n[e],s[e])||t.shrink(o,e)}))}createNodeData(){return S(this,null,(function*(){}))}updateSelections(){return S(this,null,(function*(){var e;if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:t}=null!=(e=this.chart)?e:{};if(!t)return;const i=Array.from(this.rootNode),o=e=>{e.append([new wv,new Vv({tag:0}),new Vv({tag:1})])};this.groupSelection.update(i,o,(e=>this.getDatumId(e))),this.highlightSelection.update(i,o,(e=>this.getDatumId(e)))}))}getTileFormat(e,t){const{datum:i,depth:o,children:a}=e,{colorKey:n,labelKey:s,secondaryLabelKey:r,sizeKey:l,tile:h,group:d,formatter:c}=this.properties;if(!c||null==i||null==o)return{};const u=0===a.length,p=this.getNodeFill(e),y=this.getNodeStroke(e),g=u?h.strokeWidth:d.strokeWidth,m=this.ctx.callbackCache.call(c,{seriesId:this.id,depth:o,datum:i,colorKey:n,labelKey:s,secondaryLabelKey:r,sizeKey:l,fill:p,stroke:y,strokeWidth:g,highlighted:t});return null!=m?m:{}}getNodeFill(e){var t,i,o;if(0===e.children.length)return null!=(t=this.properties.tile.fill)?t:e.fill;const{undocumentedGroupFills:a}=this.properties,n=a[Math.min(null!=(i=e.depth)?i:0,a.length)];return null!=(o=this.properties.group.fill)?o:n}getNodeStroke(e){var t,i,o;if(0===e.children.length)return null!=(t=this.properties.tile.stroke)?t:e.stroke;const{undocumentedGroupStrokes:a}=this.properties,n=a[Math.min(null!=(i=e.depth)?i:0,a.length)];return null!=(o=this.properties.group.stroke)?o:n}updateNodes(){return S(this,null,(function*(){var e,t;const{rootNode:i,data:o}=this,{highlightStyle:a,tile:n,group:s}=this.properties,{seriesRect:r}=null!=(e=this.chart)?e:{};if(!r||!o)return;const{width:l,height:h}=r,d=Array.from(this.rootNode,(()=>{})),c=Array.from(this.rootNode,(()=>{}));this.squarify(i,new zv(0,0,l,h),d,c);let u=null==(t=this.ctx.highlightManager)?void 0:t.getActiveHighlight();null==u||this.properties.group.interactive||0===u.children.length||(u=void 0),this.updateNodeMidPoint(d);const p=(e,t,i)=>{var o,r,l,h,u,p,y,g,m,x,f;const v=d[e.index];if(null==v)return void(t.visible=!1);const S=0===e.children.length;let M,D,b,N,I;if(i){const{tile:e,group:t}=a;M=S?e.fill:t.fill,D=S?e.fillOpacity:t.fillOpacity,b=S?e.stroke:t.stroke,N=S?e.strokeWidth:t.strokeWidth,I=S?e.strokeOpacity:t.strokeOpacity}const k=this.getTileFormat(e,i),T=null!=(r=null!=(o=null==k?void 0:k.fill)?o:M)?r:this.getNodeFill(e),A=null!=(h=null!=(l=null==k?void 0:k.fillOpacity)?l:D)?h:S?n.fillOpacity:s.fillOpacity,O=null!=(p=null!=(u=null==k?void 0:k.stroke)?u:b)?p:this.getNodeStroke(e),L=null!=(g=null!=(y=null==k?void 0:k.strokeWidth)?y:N)?g:S?n.strokeWidth:s.strokeWidth,E=null!=(x=null!=(m=null==k?void 0:k.strokeOpacity)?m:I)?x:S?n.strokeOpacity:s.strokeOpacity;t.crisp=!0,t.fill=Yv(T),t.fillOpacity=A,t.stroke=Yv(O),t.strokeWidth=L,t.strokeOpacity=E,t.cornerRadius=S?n.cornerRadius:s.cornerRadius;const _=null==(f=e.parent)?void 0:f.children.every((e=>0===e.children.length)),R=null!=e.parent?d[e.parent.index]:void 0,C=null!=e.parent?c[e.parent.index]:void 0;!0===_&&null!=R&&null!=C?(t.clipBBox=v,t.x=R.x+C.left,t.y=R.y+C.top,t.width=R.width-(C.left+C.right),t.height=R.height-(C.top+C.bottom)):(t.clipBBox=void 0,t.x=v.x,t.y=v.y,t.width=v.width,t.height=v.height),t.visible=!0};this.groupSelection.selectByClass(wv).forEach((e=>p(e.datum,e,!1))),this.highlightSelection.selectByClass(wv).forEach((e=>{var t;const i=e.datum===u;e.visible=i||null!=(t=null==u?void 0:u.contains(e.datum))&&t,e.visible&&p(e.datum,e,i)}));const y=Array.from(this.rootNode,(e=>{var t,i,o,a;const{index:r,children:l}=e,h=d[r],c=null==(t=this.labelData)?void 0:t[r];if(null!=h&&null!=c){if(0===l.length){const e={width:h.width,height:h.height,meta:null},t=kh(c.label,this.properties.tile.label,c.secondaryLabel,this.properties.tile.secondaryLabel,{padding:n.padding},(()=>e));if(null==t)return;const{height:a,label:s,secondaryLabel:r}=t,{textAlign:l,verticalAlign:d,padding:u}=n,p=null!=(i=Hv[l])?i:.5,y=h.x+u+(h.width-2*u)*p,g=null!=(o=Xv[d])?o:.5,m=h.y+u+.5*a+(h.height-2*u-a)*g;return{label:null!=s?{text:s.text,fontSize:s.fontSize,lineHeight:s.lineHeight,style:this.properties.tile.label,x:y,y:m-.5*(a-s.height)}:void 0,secondaryLabel:null!=r?{text:r.text,fontSize:r.fontSize,lineHeight:r.fontSize,style:this.properties.tile.secondaryLabel,x:y,y:m+.5*(a-r.height)}:void 0,verticalAlign:"middle",textAlign:l}}if(null!=(null==c?void 0:c.label)){const{padding:t,textAlign:i}=s,o=this.groupTitleHeight(e,h);if(null==o)return;const n=h.width-2*t,{text:r}=Vv.wrap(c.label,h.width-2*t,1/0,s.label,"never"),l=null!=(a=Hv[i])?a:.5;return{label:{text:r,fontSize:s.label.fontSize,lineHeight:Mh.lineHeight(s.label.fontSize),style:this.properties.group.label,x:h.x+t+n*l,y:h.y+t+.5*o},secondaryLabel:void 0,verticalAlign:"middle",textAlign:i}}}})),g=(e,t,i,o)=>{const n=0===e.children.length,s=y[e.index],r=0===i?null==s?void 0:s.label:null==s?void 0:s.secondaryLabel;if(null==s||null==r)return void(t.visible=!1);let l;if(o){const{tile:e,group:t}=a;l=e.secondaryLabel.color,n?0===i&&(l=e.label.color):l=t.label.color}t.text=r.text,t.fontSize=r.fontSize,t.lineHeight=r.lineHeight,t.fontStyle=r.style.fontStyle,t.fontFamily=r.style.fontFamily,t.fontWeight=r.style.fontWeight,t.fill=null!=l?l:r.style.color,t.textAlign=s.textAlign,t.textBaseline=s.verticalAlign,t.x=r.x,t.y=r.y,t.visible=!0};this.groupSelection.selectByClass(Vv).forEach((e=>{g(e.datum,e,e.tag,!1)})),this.highlightSelection.selectByClass(Vv).forEach((e=>{var t;const i=e.datum===u;e.visible=i||null!=(t=null==u?void 0:u.contains(e.datum))&&t,e.visible&&g(e.datum,e,e.tag,i)}))}))}updateNodeMidPoint(e){this.rootNode.walk((t=>{const i=e[t.index];null!=i&&(t.midPoint.x=i.x+i.width/2,t.midPoint.y=i.y)}))}pickNodeClosestDatum(e){return this.pickNodeNearestDistantObject(e,this.groupSelection.nodes())}getTooltipHtml(e){var t;const{datum:i,depth:a}=e,{id:n}=this,{tooltip:s,colorKey:r,colorName:l=r,labelKey:h,secondaryLabelKey:d,sizeKey:c,sizeName:u=c,childrenKey:p}=this.properties,y=0===e.children.length,g=y||this.properties.group.interactive;if(null==i||null==a||!g)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const m=null!=h?i[h]:void 0,x=this.getTileFormat(e,!1),f=null!=(t=null==x?void 0:x.fill)?t:this.getNodeFill(e);if(!s.renderer&&!m)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const v=[],S=null!=d?i[d]:void 0;null!=S&&d!==r&&d!==c&&v.push(jv(S));const M=null!=c?i[c]:void 0;null!=M&&v.push("".concat(u,": ").concat(jv(M)));const D=null!=r?i[r]:void 0;null!=D&&v.push("".concat(l,": ").concat(jv(D)));const b=v.join("<br>"),N={title:m,color:y?this.properties.tile.label.color:this.properties.group.label.color,backgroundColor:f,content:b};return s.toTooltipHtml(N,{depth:a,datum:i,colorKey:r,labelKey:h,secondaryLabelKey:d,sizeKey:c,title:m,color:f,seriesId:n,childrenKey:p,colorName:l,itemId:void 0,sizeName:u})}};Zv.className="TreemapSeries",Zv.type="treemap";var qv=Zv,{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Jv,DEFAULT_FONT_FAMILY:$v,DEFAULT_HIERARCHY_FILLS:eS,DEFAULT_HIERARCHY_STROKES:tS,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:iS,EXTENDS_SERIES_DEFAULTS:oS,DEFAULT_LABEL_COLOUR:aS,FONT_WEIGHT:nS}=o._Theme,sS={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",instanceConstructor:qv,solo:!0,themeTemplate:{series:{__extends__:oS,group:{label:{enabled:!0,color:aS,fontStyle:void 0,fontWeight:nS.NORMAL,fontSize:12,fontFamily:$v,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:iS,fontStyle:void 0,fontWeight:nS.NORMAL,fontSize:18,minimumFontSize:10,fontFamily:$v,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:iS,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:$v,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:aS},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:iS},secondaryLabel:{color:iS},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:e=>{let{takeColors:t,colorsCount:i,themeTemplateParameters:o}=e;const{properties:a}=o,{fills:n,strokes:s}=t(i);return{fills:n,strokes:s,colorRange:a.get(Jv),undocumentedGroupFills:a.get(eS),undocumentedGroupStrokes:a.get(tS)}}},{DropShadow:rS,Label:lS}=o._Scene,{AbstractBarSeriesProperties:hS,BaseProperties:dS,PropertiesArray:cS,SeriesTooltip:uS,Validate:pS,BOOLEAN:yS,COLOR_STRING:gS,FUNCTION:mS,LINE_DASH:xS,NUMBER:fS,OBJECT:vS,OBJECT_ARRAY:SS,POSITIVE_NUMBER:MS,RATIO:DS,STRING:bS,UNION:NS}=o._ModuleSupport,IS=class extends dS{};f([pS(NS(["subtotal","total"],"a total type"))],IS.prototype,"totalType",2),f([pS(fS)],IS.prototype,"index",2),f([pS(bS)],IS.prototype,"axisLabel",2);var kS=class extends dS{};f([pS(mS,{optional:!0})],kS.prototype,"renderer",2);var TS=class extends lS{constructor(){super(...arguments),this.placement="end",this.padding=6}};f([pS(NS(["start","end","inside"],"a placement"))],TS.prototype,"placement",2),f([pS(MS)],TS.prototype,"padding",2);var AS=class extends dS{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=(new rS).set({enabled:!1}),this.label=new TS,this.tooltip=new kS}};f([pS(bS,{optional:!0})],AS.prototype,"name",2),f([pS(gS)],AS.prototype,"fill",2),f([pS(gS)],AS.prototype,"stroke",2),f([pS(DS)],AS.prototype,"fillOpacity",2),f([pS(DS)],AS.prototype,"strokeOpacity",2),f([pS(xS)],AS.prototype,"lineDash",2),f([pS(MS)],AS.prototype,"lineDashOffset",2),f([pS(MS)],AS.prototype,"strokeWidth",2),f([pS(MS)],AS.prototype,"cornerRadius",2),f([pS(mS,{optional:!0})],AS.prototype,"formatter",2),f([pS(vS)],AS.prototype,"shadow",2),f([pS(vS)],AS.prototype,"label",2),f([pS(vS)],AS.prototype,"tooltip",2);var OS=class extends dS{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};f([pS(yS)],OS.prototype,"enabled",2),f([pS(gS)],OS.prototype,"stroke",2),f([pS(DS)],OS.prototype,"strokeOpacity",2),f([pS(xS)],OS.prototype,"lineDash",2),f([pS(MS)],OS.prototype,"lineDashOffset",2),f([pS(MS)],OS.prototype,"strokeWidth",2);var LS=class extends dS{constructor(){super(...arguments),this.positive=new AS,this.negative=new AS,this.total=new AS}};f([pS(vS)],LS.prototype,"positive",2),f([pS(vS)],LS.prototype,"negative",2),f([pS(vS)],LS.prototype,"total",2);var ES=class extends hS{constructor(){super(...arguments),this.item=new LS,this.totals=new cS(IS),this.line=new OS,this.tooltip=new uS}};f([pS(bS)],ES.prototype,"xKey",2),f([pS(bS)],ES.prototype,"yKey",2),f([pS(bS,{optional:!0})],ES.prototype,"xName",2),f([pS(bS,{optional:!0})],ES.prototype,"yName",2),f([pS(vS)],ES.prototype,"item",2),f([pS(SS)],ES.prototype,"totals",2),f([pS(vS)],ES.prototype,"line",2),f([pS(vS)],ES.prototype,"tooltip",2);var{adjustLabelPlacement:_S,SeriesNodePickMode:RS,fixNumericExtent:CS,valueProperty:wS,keyProperty:PS,accumulativeValueProperty:zS,trailingAccumulatedValueProperty:KS,ChartAxisDirection:VS,getRectConfig:BS,updateRect:FS,checkCrisp:US,updateLabelNode:jS,prepareBarAnimationFunctions:WS,collapsedStartingBarPosition:YS,resetBarSelectionsFn:GS,seriesLabelFadeInAnimation:HS,resetLabelFn:XS,animationValidation:QS,DEFAULT_CARTESIAN_DIRECTION_KEYS:ZS,DEFAULT_CARTESIAN_DIRECTION_NAMES:qS,isFiniteNumber:JS,computeBarFocusBounds:$S}=o._ModuleSupport,{Rect:eM,motion:tM}=o._Scene,{sanitizeHtml:iM,isContinuous:oM}=o._Util,{ContinuousScale:aM}=o._Scale,nM=class extends o._ModuleSupport.AbstractBarSeries{constructor(e){super({moduleCtx:e,directionKeys:ZS,directionNames:qS,pickModes:[RS.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:GS,label:XS}}),this.properties=new ES,this.seriesItemTypes=new Set(["positive","negative","total"])}processData(e){return S(this,null,(function*(){var t,i,a;const{xKey:n,yKey:s,totals:r}=this.properties,{data:l=[]}=this;if(!this.properties.isValid()||!this.visible)return;const h={missingValue:void 0,invalidValue:void 0},d=[],c=r.reduce(((e,t)=>{const i=e.get(t.index);return i?i.push(t):e.set(t.index,[t]),e}),new Map);l.forEach(((e,t)=>{var i;d.push(e),null==(i=c.get(t))||i.forEach((e=>d.push(m(g({},e.toJson()),{[n]:e.axisLabel}))))}));const u=[];this.ctx.animationManager.isSkipped()||u.push(QS());const p=null==(t=this.getCategoryAxis())?void 0:t.scale,y=null==(i=this.getValueAxis())?void 0:i.scale,{isContinuousX:x,xScaleType:f,yScaleType:v}=this.getScaleInformation({xScale:p,yScale:y}),{processedData:S}=yield this.requestDataModel(e,d,{props:[PS(n,f,{id:"xValue"}),zS(s,v,m(g({},h),{id:"yCurrent"})),zS(s,v,m(g({},h),{missingValue:0,id:"yCurrentTotal"})),zS(s,v,m(g({},h),{id:"yCurrentPositive",validation:e=>oM(e)&&Number(e)>=0})),zS(s,v,m(g({},h),{id:"yCurrentNegative",validation:e=>oM(e)&&Number(e)<0})),KS(s,v,m(g({},h),{id:"yPrevious"})),wS(s,v,{id:"yRaw"}),wS("totalType","band",{id:"totalTypeValue",missingValue:void 0,validation:e=>"total"===e||"subtotal"===e}),...x?[o._ModuleSupport.SMALLEST_KEY_INTERVAL]:[],...u]});this.smallestDataInterval=null==(a=S.reduced)?void 0:a.smallestKeyInterval,this.updateSeriesItemTypes(),this.animationState.transition("updateData")}))}getSeriesDomain(e){var t;const{processedData:i,dataModel:a,smallestDataInterval:n}=this;if(!i||!a)return[];const{keys:[s],values:r}=i.domain,l=a.resolveProcessedDataDefById(this,"xValue");if(e===this.getCategoryDirection()){if("key"===(null==l?void 0:l.def.type)&&"category"===(null==l?void 0:l.def.valueType))return s;const i=JS(n)?n:0,a=null!=(t=o._ModuleSupport.extent(s))?t:[NaN,NaN],r=this.getCategoryAxis(),h=Boolean(null==r?void 0:r.isReversed()),d=e===VS.Y,c=h===d?0:-i,u=h===d?i:0,p=a[0]+c,y=a[1]+u;return CS([p,y],r)}{const e=r[a.resolveProcessedDataIndexById(this,"yCurrent")],t=[Math.min(0,e[0]),Math.max(0,e[1])];return CS(t)}}createNodeData(){return S(this,null,(function*(){var e,t,i;const{data:o,dataModel:a,smallestDataInterval:n}=this,{line:s}=this.properties,r=this.getCategoryAxis(),l=this.getValueAxis();if(!(o&&r&&l&&a))return;const h=r.scale,d=l.scale,c=r.isReversed(),u=this.getBarDirection()===VS.X,p=null!=(e=aM.is(h)?h.calcBandwidth(n):h.bandwidth)?e:10;if("ungrouped"!==(null==(t=this.processedData)?void 0:t.type))return;const y={itemId:this.properties.yKey,nodeData:[],labelData:[],pointData:[],scales:this.calculateScaling(),visible:this.visible};if(!this.visible)return y;const m=a.resolveProcessedDataIndexById(this,"yRaw"),x=a.resolveProcessedDataIndexById(this,"xValue"),f=a.resolveProcessedDataIndexById(this,"totalTypeValue"),v=[],S=a.resolveProcessedDataIndexById(this,"yCurrent"),M=a.resolveProcessedDataIndexById(this,"yPrevious"),D=a.resolveProcessedDataIndexById(this,"yCurrentTotal");let b=0;const{xKey:N,yKey:I,xName:k,yName:T}=this.properties;null==(i=this.processedData)||i.data.forEach(((e,t)=>{let{keys:i,datum:o,values:a}=e;const n=a[f],r=this.isSubtotal(n),l=this.isTotal(n),A=l||r,O=i[x],L=Math.round(h.convert(O)),E=a[m],{cumulativeValue:_,trailingValue:R}=function(e,t,i){return e||t?{cumulativeValue:i[D],trailingValue:t?b:0}:{cumulativeValue:i[S],trailingValue:i[M]}}(l,r,a);A&&(b=null!=_?_:0);const C=Math.round(d.convert(_)),w=Math.round(d.convert(R)),P=function(e,t,i,o,a){return e?o:t?(null!=o?o:0)-(null!=a?a:0):i}(l,r,E,_,R),z=(null!=P?P:0)>=0,K=this.getSeriesItemType(z,n),{fill:V,stroke:B,strokeWidth:F,label:U}=this.getItemConfig(K),j=z?C:w,W=z?w:C,Y=Math.max(F,Math.abs(W-j)),G={x:u?Math.min(j,W):L,y:u?L:Math.min(j,W),width:u?Y:p,height:u?p:Y},H={x:G.x+G.width/2,y:G.y+G.height/2},X=A?C:w,Q=Math.floor(s.strokeWidth)%2/2,Z=c?C:X,q=c?X:C;let J,$;u?(J={x:Z+Q,y:G.y},$={x:q+Q,y:G.y+G.height}):(J={x:G.x,y:Z+Q},$={x:G.x+G.width,y:q+Q});const ee={x:c?$.x:J.x,y:c?$.y:J.y,x2:c?J.x:$.x,y2:c?J.y:$.y,size:0};v.push(ee);const te=this.getLabelText(U,{itemId:"subtotal"===K?"total":K,value:P,datum:o,xKey:N,yKey:I,xName:k,yName:T},(e=>JS(e)?e.toFixed(2):String(e))),ie={index:t,series:this,itemId:K,datum:o,cumulativeValue:null!=_?_:0,xValue:O,yValue:P,yKey:I,xKey:N,x:G.x,y:G.y,width:G.width,height:G.height,midPoint:H,fill:V,stroke:B,strokeWidth:F,opacity:1,label:g({text:te},_S({isPositive:(null!=P?P:-1)>=0,isVertical:!u,placement:U.placement,padding:U.padding,rect:G}))};y.nodeData.push(ie),y.labelData.push(ie)}));const A=this.properties.line.enabled;return void 0!==S&&A&&(y.pointData=v),y}))}updateSeriesItemTypes(){var e,t;const{dataModel:i,seriesItemTypes:o,processedData:a}=this;if(!i||!a)return;o.clear();const n=i.resolveProcessedDataIndexById(this,"yCurrentPositive"),s=i.resolveProcessedDataIndexById(this,"yCurrentNegative"),r=i.resolveProcessedDataIndexById(this,"totalTypeValue"),l=null!=(e=a.domain.values[n])?e:[],h=null!=(t=a.domain.values[s])?t:[];l.length>0&&o.add("positive"),h.length>0&&o.add("negative");const d=null==a?void 0:a.domain.values[r];d&&d.forEach((e=>{"total"!==e&&"subtotal"!==e||o.add("total")}))}isSubtotal(e){return"subtotal"===e}isTotal(e){return"total"===e}nodeFactory(){return new eM}getSeriesItemType(e,t){return null!=t?t:e?"positive":"negative"}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){return S(this,null,(function*(){const{nodeData:t,datumSelection:i}=e,o=null!=t?t:[];return i.update(o)}))}updateDatumNodes(e){return S(this,null,(function*(){const{datumSelection:t,isHighlight:i}=e,{id:o,ctx:a}=this,{yKey:n,highlightStyle:{item:s}}=this.properties,r=this.getCategoryAxis(),l=US(null==r?void 0:r.visibleRange),h=this.getCategoryDirection()===VS.X;t.each(((e,t)=>{const r=t.itemId,{fillOpacity:d,strokeOpacity:c,strokeWidth:u,lineDash:p,lineDashOffset:y,cornerRadius:g,formatter:m,shadow:x}=this.getItemConfig(r),f={fill:t.fill,stroke:t.stroke,fillOpacity:d,strokeOpacity:c,lineDash:p,lineDashOffset:y,fillShadow:x,strokeWidth:this.getStrokeWidth(u),cornerRadius:g},v=h?t.width>0:t.height>0,S=BS({datum:t,isHighlighted:i,style:f,highlightStyle:s,formatter:m,seriesId:o,itemId:t.itemId,ctx:a,value:t.yValue,yKey:n});S.crisp=l,S.visible=v,FS({rect:e,config:S})}))}))}updateLabelSelection(e){return S(this,null,(function*(){const{labelData:t,labelSelection:i}=e;if(0===t.length)return i.update([]);const o=t[0].itemId,{label:a}=this.getItemConfig(o),n=a.enabled?t:[];return i.update(n)}))}updateLabelNodes(e){return S(this,null,(function*(){e.labelSelection.each(((e,t)=>{jS(e,this.getItemConfig(t.itemId).label,t.label)}))}))}getTooltipHtml(e){var t,i,a;const n=this.getCategoryAxis(),s=this.getValueAxis();if(!this.properties.isValid()||!n||!s)return o._ModuleSupport.EMPTY_TOOLTIP_CONTENT;const{id:r}=this,{xKey:l,yKey:h,xName:d,yName:c,tooltip:u}=this.properties,{datum:p,itemId:y,xValue:g,yValue:m}=e,{fill:x,strokeWidth:f,name:v,formatter:S}=this.getItemConfig(y);let M;S&&(M=this.ctx.callbackCache.call(S,{datum:p,value:m,xKey:l,yKey:h,fill:x,strokeWidth:f,highlighted:!1,seriesId:r,itemId:e.itemId}));const D=null!=(i=null!=(t=null==M?void 0:M.fill)?t:x)?i:"gray",b=iM(n.formatDatum(g)),N=iM(s.formatDatum(m)),I=this.isTotal(y),k=this.isSubtotal(y);let T;T=I?"Total":k?"Subtotal":null!=(a=null!=v?v:c)?a:h;const A=iM(c),O="<b>".concat(iM(null!=d?d:l),"</b>: ").concat(b,"<br/><b>").concat(iM(T),"</b>: ").concat(N);return u.toTooltipHtml({title:A,content:O,backgroundColor:D},{seriesId:r,itemId:y,datum:p,xKey:l,yKey:h,xName:d,yName:c,color:D,title:A})}getLegendData(e){if("category"!==e)return[];const{id:t,seriesItemTypes:i}=this,o=[];return i.forEach((e=>{const{fill:i,stroke:a,fillOpacity:n,strokeOpacity:s,strokeWidth:r,name:l}=this.getItemConfig(e);var h;o.push({legendType:"category",id:t,itemId:e,seriesId:t,enabled:!0,label:{text:null!=l?l:(h=e,h.charAt(0).toUpperCase()+h.substring(1))},marker:{fill:i,stroke:a,fillOpacity:n,strokeOpacity:s,strokeWidth:r}})})),o}toggleSeriesItem(){}animateEmptyUpdateReady(e){let{datumSelection:t,labelSelection:i,contextData:o,paths:a}=e;const n=WS(YS(this.isVertical(),this.axes,"normal"));tM.fromToMotion(this.id,"datums",this.ctx.animationManager,[t],n),HS(this,"labels",this.ctx.animationManager,i);const{pointData:s}=o;if(!s)return;const[r]=a;this.isVertical()?this.animateConnectorLinesVertical(r,s):this.animateConnectorLinesHorizontal(r,s)}animateConnectorLinesHorizontal(e,t){const{path:i}=e;this.updateLineNode(e);const a=this.getValueAxis(),n=null==a?void 0:a.isReversed(),s=n?(e,t)=>e<t:(e,t)=>e>t,r=null==a?void 0:a.scale.convert(0),l=t.reduce(((e,t)=>(s(t.x,e)&&(e=t.x),e)),n?1/0:0),h=(e,t,i,o,a)=>(e-t)/(i-t)*(a-o)+o;this.ctx.animationManager.animate({id:"".concat(this.id,"_connectors"),groupId:this.id,phase:"initial",from:r,to:l,ease:o._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(o){i.clear(!0),t.forEach(((e,t)=>{const a=h(o,r,l,r,e.x),n=h(o,r,l,r,e.x2);0!==t&&i.lineTo(a,e.y),i.moveTo(n,e.y2)})),e.checkPathDirty()}})}animateConnectorLinesVertical(e,t){const{path:i}=e;this.updateLineNode(e);const a=this.getValueAxis(),n=null==a?void 0:a.isReversed(),s=n?(e,t)=>e>t:(e,t)=>e<t,r=null==a?void 0:a.scale.convert(0),l=t.reduce(((e,t)=>(s(t.y,e)&&(e=t.y),e)),n?0:1/0),h=(e,t,i,o,a)=>(e-t)/(i-t)*(a-o)+o;this.ctx.animationManager.animate({id:"".concat(this.id,"_connectors"),groupId:this.id,phase:"initial",from:r,to:l,ease:o._ModuleSupport.Motion.easeOut,collapsable:!1,onUpdate(o){i.clear(!0),t.forEach(((e,t)=>{const a=h(o,r,l,r,e.y),n=h(o,r,l,r,e.y2);0!==t&&i.lineTo(e.x,a),i.moveTo(e.x2,n)})),e.checkPathDirty()}})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){return S(this,null,(function*(){this.resetConnectorLinesPath({contextData:e.contextData,paths:e.paths})}))}resetConnectorLinesPath(e){let{contextData:t,paths:i}=e;if(0===i.length)return;const[o]=i;this.updateLineNode(o);const{path:a}=o;a.clear(!0);const{pointData:n}=t;n&&(n.forEach(((e,t)=>{0!==t&&a.lineTo(e.x,e.y),a.moveTo(e.x2,e.y2)})),o.checkPathDirty())}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:a,lineDash:n,lineDashOffset:s}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:this.getStrokeWidth(i),strokeOpacity:a,lineDash:n,lineDashOffset:s,lineJoin:"round",pointerEvents:o._Scene.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}onDataChange(){}computeFocusBounds(e){let{datumIndex:t,seriesRect:i}=e;var o;return $S(null==(o=this.contextNodeData)?void 0:o.nodeData[t],this.contentGroup,i)}};nM.className="WaterfallSeries",nM.type="waterfall";var sM={strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:o._Theme.FONT_WEIGHT.NORMAL,fontSize:12,fontFamily:o._Theme.DEFAULT_FONT_FAMILY,color:o._Theme.DEFAULT_LABEL_COLOUR,formatter:void 0,placement:"end"}},rM={series:{__extends__:o._Theme.EXTENDS_SERIES_DEFAULTS,item:{positive:sM,negative:sM,total:sM},line:{stroke:o._Theme.DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,item:{toggleSeriesVisible:!1}}},lM={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,instanceConstructor:nM,defaultAxes:[{type:o._Theme.CARTESIAN_AXIS_TYPE.CATEGORY,position:o._Theme.POSITION.BOTTOM},{type:o._Theme.CARTESIAN_AXIS_TYPE.NUMBER,position:o._Theme.POSITION.LEFT}],themeTemplate:rM,swapDefaultAxesCondition:e=>{let{direction:t}=e;return"horizontal"===t},paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:a,themeTemplateParameters:n}=e;const{properties:s}=n,{fills:r,strokes:l}=t(i);return a?{item:{positive:{fill:r[0],stroke:l[0]},negative:{fill:r[1],stroke:l[1]},total:{fill:r[2],stroke:l[2]}}}:{item:{positive:s.get(o._Theme.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS),negative:s.get(o._Theme.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS),total:s.get(o._Theme.DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS)}}}};o._ModuleSupport.moduleRegistry.register(Ne,Ge,ii,zi,$i,Kr,uh,$y,xl,co,Fo,Ho,Ma,Vc,oc,_u,Kp,$u,Ba,js,sd,zy,tt,$g,tm,Ym,tx,Bt,Zt,Vf,Gx,dv,on,sS,lM,vs),o._ModuleSupport.enterpriseModule.isEnterprise=!0,o._ModuleSupport.enterpriseModule.licenseManager=e=>{var t,i;return new Xs(null!=(i=null==(t=e.container)?void 0:t.ownerDocument)?i:"undefined"===typeof document?void 0:document)},o._ModuleSupport.enterpriseModule.injectWatermark=qs}}]);