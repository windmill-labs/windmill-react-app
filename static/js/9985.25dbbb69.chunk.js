"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[9985],{9985:(t,e,i)=>{i.r(e),i.d(e,{AgChart:()=>Tm,AgCharts:()=>Am,AgErrorBarSupportedSeriesTypes:()=>M,AgTooltipPositionType:()=>D,Marker:()=>xd,VERSION:()=>Om,_ModuleSupport:()=>jm,_Scale:()=>Hm,_Scene:()=>Pm,_Theme:()=>Km,_Util:()=>Um,__FORCE_MODULE_DETECTION:()=>C,time:()=>L});var n=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,l=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=Reflect.get,u=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),p=Math.pow,g=(t,e,i)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,m=(t,e)=>{for(var i in e||(e={}))h.call(e,i)&&g(t,i,e[i]);if(r)for(var i of r(e))c.call(e,i)&&g(t,i,e[i]);return t},f=(t,e)=>s(t,o(e)),y=(t,e)=>{var i={};for(var n in t)h.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&r)for(var n of r(t))e.indexOf(n)<0&&c.call(t,n)&&(i[n]=t[n]);return i},v=(t,e)=>{for(var i in e)n(t,i,{get:e[i],enumerable:!0})},x=(t,e,i,s)=>{for(var o,r=s>1?void 0:s?a(e,i):e,l=t.length-1;l>=0;l--)(o=t[l])&&(r=(s?o(e,i,r):o(r))||r);return s&&r&&n(e,i,r),r},b=(t,e,i)=>d(l(t),i,e),S=(t,e,i)=>new Promise(((n,s)=>{var a=t=>{try{r(i.next(t))}catch(e){s(e)}},o=t=>{try{r(i.throw(t))}catch(e){s(e)}},r=t=>t.done?n(t.value):Promise.resolve(t.value).then(a,o);r((i=i.apply(t,e)).next())})),k=function(t,e){this[0]=t,this[1]=e},w=t=>{var e,i=t[u("asyncIterator")],n=!1,s={};return null==i?(i=t[u("iterator")](),e=t=>s[t]=e=>i[t](e)):(i=i.call(t),e=t=>s[t]=e=>{if(n){if(n=!1,"throw"===t)throw e;return e}return n=!0,{done:!1,value:new k(new Promise((n=>{var s=i[t](e);if(!(s instanceof Object))throw TypeError("Object expected");n(s)})),1)}}),s[u("iterator")]=()=>s,e("next"),"throw"in i?e("throw"):s.throw=t=>{throw t},"return"in i&&e("return"),s},M=["bar","line","scatter"];var D=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(D||{});var C=0,L={};v(L,{day:()=>tt,friday:()=>lt,hour:()=>Q,millisecond:()=>B,minute:()=>Z,monday:()=>st,month:()=>dt,saturday:()=>ht,second:()=>U,sunday:()=>nt,thursday:()=>rt,tuesday:()=>at,utcDay:()=>yt,utcHour:()=>ft,utcMinute:()=>mt,utcMonth:()=>vt,utcYear:()=>xt,wednesday:()=>ot,year:()=>pt});var R=new Map;function I(t,e){R.has(e)||(R.set(e,!0),t())}function A(t){return t}function*T(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const n of e)yield*w(n)}function N(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const{leading:n=!0,trailing:s=!0}=null!=i?i:{};let a,o,r=!1;function l(){s&&o?(a=setTimeout(l,e),t(...o)):r=!1,o=null}return Object.assign((function(){for(var i=arguments.length,s=new Array(i),h=0;h<i;h++)s[h]=arguments[h];r?o=s:(r=!0,a=setTimeout(l,e),n?t(...s):o=s)}),{cancel(){clearTimeout(a),r=!1,o=null}})}I.clear=()=>R.clear();var E={log(){console.log(...arguments)},warn(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];console.warn("AG Charts - ".concat(t),...i)},error(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];"object"===typeof t?console.error("AG Charts error",t,...i):console.error("AG Charts - ".concat(t),...i)},table(){console.table(...arguments)},warnOnce(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];I((()=>E.warn(t,...i)),"Logger.warn: ".concat(t))},errorOnce(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];I((()=>E.error(t,...i)),"Logger.error: ".concat(t))}},O=class{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var n;const s=null==(n=this._rangeCallback)?void 0:n.call(this,t,e),a=this._encode(i?this.floor(t):this.ceil(t)),o=this._encode(i?this.ceil(e):this.floor(e));if(o<a)return[];const r=[];for(let l=a;l<=o;l++){const t=this._decode(l);r.push(t)}return null==s||s(),r}},P=class extends O{getOffset(t,e){const i="number"===typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,n=0;const s=t;s!==(t=Math.max(1,Math.round(t)))&&E.warnOnce("interval step of [".concat(s,"] rounded to [").concat(t,"]."));const{snapTo:a="start"}=null!=e?e:{};if("string"===typeof a){const e=n;i=(i,s)=>{const o="start"===a?i:s;return n=this.getOffset(o,t),()=>n=e}}else"number"===typeof a?n=this.getOffset(new Date(a),t):a instanceof Date&&(n=this.getOffset(a,t));return new O((e=>{const i=this._encode(e);return Math.floor((i-n)/t)}),(e=>this._decode(e*t+n)),i)}};var B=new P((function(t){return t.getTime()}),(function(t){return new Date(t)})),F=B,_=(new Date(0).getFullYear(),1e3),G=6e4,z=36e5,W=864e5,V=6048e5,K=2592e6,Y=31536e6,H=(new Date).getTimezoneOffset()*G;var U=new P((function(t){return Math.floor((t.getTime()-H)/_)}),(function(t){return new Date(H+t*_)})),X=U,j=(new Date).getTimezoneOffset()*G;var Z=new P((function(t){return Math.floor((t.getTime()-j)/G)}),(function(t){return new Date(j+t*G)})),q=Z,J=(new Date).getTimezoneOffset()*G;var Q=new P((function(t){return Math.floor((t.getTime()-J)/z)}),(function(t){return new Date(J+t*z)})),$=Q;var tt=new P((function(t){const e=t.getTimezoneOffset()*G;return Math.floor((t.getTime()-e)/W)}),(function(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e})),et=tt;function it(t){const e=(7+t-4)%7;return new P((function(t){const i=t.getTimezoneOffset()*G;return Math.floor((t.getTime()-i)/V-e/7)}),(function(t){const i=new Date(1970,0,1);return i.setDate(i.getDate()+7*t+e),i}))}var nt=it(0),st=it(1),at=it(2),ot=it(3),rt=it(4),lt=it(5),ht=it(6),ct=nt;var dt=new P((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)})),ut=dt;var pt=new P((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e})),gt=pt;var mt=new P((function(t){return Math.floor(t.getTime()/G)}),(function(t){return new Date(t*G)}));var ft=new P((function(t){return Math.floor(t.getTime()/z)}),(function(t){return new Date(t*z)}));var yt=new P((function(t){return Math.floor(t.getTime()/W)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));var vt=new P((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))}));var xt=new P((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e})),bt={isEnterprise:!1},St=class{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}},kt=new class{constructor(){this.modules=[],this.dependencies=new Set,this.dependents=new Set}register(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const n of e){this.registerDependencies(n);const t=this.modules.find((t=>n.type===t.type&&n.optionsKey===t.optionsKey&&n.identifier===t.identifier));if(t){if("enterprise"===n.packageType&&"community"===t.packageType){const e=this.modules.indexOf(t);this.modules.splice(e,1,n)}}else this.modules.push(n)}}hasEnterpriseModules(){return this.modules.some((t=>"enterprise"===t.packageType))}*byType(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const n of this.modules)e.includes(n.type)&&this.dependencies.has(n.optionsKey)&&(yield n);for(const n of this.modules)!e.includes(n.type)||this.dependencies.has(n.optionsKey)||this.dependents.has(n.optionsKey)||(yield n);for(const n of this.modules)e.includes(n.type)&&this.dependents.has(n.optionsKey)&&(yield n)}registerDependencies(t){if(null!=t.dependencies&&0!==t.dependencies.length){if(this.dependencies.has(t.optionsKey))throw new Error("Module [".concat(t.optionsKey,"] can not both be depended upon by any module and have dependencies of [").concat(t.dependencies,"]."));for(const e of t.dependencies){if(this.dependents.has(e))throw new Error("Module [".concat(e,"] can not both be depended upon by any module and have dependencies of [").concat(t.optionsKey,"]."));this.dependencies.add(e)}this.dependents.add(t.optionsKey)}}},wt=new class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.instanceConstructor),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate),e.hidden&&this.hidden.add(t)}create(t,e){const i=this.axesMap.get(t);if(i)return new i(e);throw new Error("AG Charts - unknown axis type: ".concat(t))}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter((t=>!this.hidden.has(t)))}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},Mt=Symbol("BREAK"),Dt="__decorator_config";function Ct(t,e){null==Object.getOwnPropertyDescriptor(t,Dt)&&Object.defineProperty(t,Dt,{value:{}});const i=t[Dt],n=e.toString();if("undefined"!==typeof i[n])return i[n];const s=new WeakMap;i[n]={setters:[],getters:[],observers:[],valuesMap:s};const a=Object.getOwnPropertyDescriptor(t,e),o=null==a?void 0:a.set,r=null==a?void 0:a.get;return Object.defineProperty(t,e,{set:function(t){const{setters:a,observers:l}=i[n];let h;a.some((t=>t.length>2))&&(h=r?r.call(this):s.get(this));for(const i of a)if((t=i(this,e,t,h))===Mt)return;o?o.call(this,t):s.set(this,t);for(const e of l)e(this,t,h)},get:function(){let t=r?r.call(this):s.get(this);for(const s of i[n].getters)if(t=s(this,e,t),t===Mt)return;return t},enumerable:!0,configurable:!1}),i[n]}function Lt(t,e,i){return(n,s)=>{const a=Ct(n,s);a.setters.push(t),e&&a.getters.unshift(e),i&&Object.assign(a,i)}}function Rt(t){return"undefined"!==typeof t&&Dt in t}function It(t){const e=new Set;for(;Rt(t);)e.add(null==t?void 0:t[Dt]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap((t=>Object.keys(t)))}function At(t){return It(t).reduce(((e,i)=>{var n;return e[i]=null!=(n=t[i])?n:null,e}),{})}function Tt(t){return null!=t}function Nt(t){return Array.isArray(t)}function Et(t){return"boolean"===typeof t}function Ot(t){return t instanceof Date}function Pt(t){return Ot(t)&&!isNaN(Number(t))}function Bt(t){return t instanceof RegExp}function Ft(t){return"function"===typeof t}function _t(t){return"object"===typeof t&&null!==t&&!Nt(t)}function Gt(t){return Nt(t)||zt(t)}function zt(t){return"object"===typeof t&&null!==t&&t.constructor===Object}function Wt(t){return"string"===typeof t}function Vt(t){return"number"===typeof t}function Kt(t){return Vt(t)&&Number.isFinite(t)}function Yt(t){return"undefined"!==typeof window&&t instanceof HTMLElement}function Ht(t,e){return Wt(e)&&Object.keys(t).includes(e)}function Ut(t,e){return Object.values(t).includes(e)}function Xt(t){return"symbol"===typeof t}function jt(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Zt(...e.reverse())}function Zt(){const t={};for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];for(const s of i){if(!_t(s))continue;const e=Rt(s)?It(s):Object.keys(s);for(const i of e)zt(t[i])&&zt(s[i])?t[i]=Zt(t[i],s[i]):null!=t[i]||(t[i]=s[i])}return t}function qt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return i&&Nt(t)?t.map((t=>Zt(t,...i))):t}function Jt(t,e){return Object.entries(t).reduce(((i,n)=>{let[s,a]=n;return i[s]=e(a,s,t),i}),{})}function Qt(t,e){const i=m({},t);for(const n of e)delete i[n];return i}function $t(t,e){return(Nt(e)?e:e.split(".")).reduce(((t,e)=>t[e]),t)}var te=new Set(["__proto__","constructor","prototype"]);function ee(t,e,i){const n=Nt(e)?e.slice():e.split("."),s=n.pop();if(n.some((t=>te.has(t))))return;n.reduce(((t,e)=>t[e]),t)[s]=i}function ie(t,e,i){if(void 0===i)return e;for(const n of t){const t=i[n];void 0!==t&&(e[n]=t)}return e}var ne=class extends Map{get(t){var e;return null!=(e=super.get(t))?e:"unknown"}isCartesian(t){return"cartesian"===this.get(t)}isPolar(t){return"polar"===this.get(t)}isHierarchy(t){return"hierarchy"===this.get(t)}isTopology(t){return"topology"===this.get(t)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter((t=>this.isCartesian(t)))}get polarTypes(){return this.seriesTypes.filter((t=>this.isPolar(t)))}get hierarchyTypes(){return this.seriesTypes.filter((t=>this.isHierarchy(t)))}get topologyTypes(){return this.seriesTypes.filter((t=>this.isTopology(t)))}},se=class extends Map{set(t,e){return super.set(t,Zt(e,this.get(t)))}},ae=new ne,oe=new ne,re=new se,le=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function he(t){var e;return null==(e=le.find((e=>"series"===e.type&&e.identifier===t)))?void 0:e.chartTypes}function ce(t){if(!function(t){return"enterprise"===t.packageType}(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const e=le.find((e=>e.type===t.type&&e.optionsKey===t.optionsKey&&e.identifier===t.identifier&&t.chartTypes.every((t=>e.chartTypes.includes(t)))));return e&&(null!=e.useCount||(e.useCount=0),e.useCount++),null!=e}function de(t){var e,i,n;return null!=(n=null==(i=null==(e=t.series)?void 0:e[0])?void 0:i.type)?n:"line"}function ue(t){const e=de(t);return null==e||("cartesian"===e?(E.warnOnce("type '".concat(e,"' is deprecated, use a series type instead")),!0):ae.isCartesian(e)||function(t){var e;return"cartesian"===(null==(e=he(t))?void 0:e.find((t=>"cartesian"===t)))}(e))}function pe(t){const e=de(t);return null!=e&&("polar"===e?(E.warnOnce("type '".concat(e,"' is deprecated, use a series type instead")),!0):ae.isPolar(e)||function(t){var e;return"polar"===(null==(e=he(t))?void 0:e.find((t=>"polar"===t)))}(e))}function ge(t){const e=de(t);return null!=e&&("hierarchy"===e?(E.warnOnce("type '".concat(e,"' is deprecated, use a series type instead")),!0):ae.isHierarchy(e)||function(t){var e;return"hierarchy"===(null==(e=he(t))?void 0:e.find((t=>"hierarchy"===t)))}(e))}function me(t){const e=de(t);return null!=e&&("topology"===e?(E.warnOnce("type '".concat(e,"' is deprecated, use a series type instead")),!0):ae.isTopology(e)||function(t){var e;return"topology"===(null==(e=he(t))?void 0:e.find((t=>"topology"===t)))}(e))}var fe=class{set(t){const{className:e=this.constructor.name}=this.constructor;if("object"!==typeof t)return E.warn("unable to set ".concat(e," - expecting a properties object")),this;const i=new Set(Object.keys(t));for(const n of It(this))if(i.has(n)){const e=t[n],s=this;ve(s[n])?s[n]=s[n]instanceof ye?s[n].reset(e):s[n].set(e):s[n]=e,i.delete(n)}for(const n of i)E.warn("unable to set [".concat(n,"] in ").concat(e," - property is unknown"));return this}isValid(){return It(this).every((t=>{const{optional:e}=function(t,e){const i=e.toString();for(;Rt(t);){const e=t[Dt];if(Object.hasOwn(e,i))return e[i];t=Object.getPrototypeOf(t)}}(this,t),i=e||"undefined"!==typeof this[t];return i||E.warnOnce("[".concat(t,"] is required.")),i}))}toJson(){return It(this).reduce(((t,e)=>{const i=this[e];return t[e]=ve(i)?i.toJson():i,t}),{})}},ye=class t extends Array{constructor(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];super(i.length),Object.defineProperty(this,"itemFactory",{value:t,enumerable:!1,configurable:!1}),this.set(i)}set(t){if(Nt(t)){this.length=t.length;for(let e=0;e<t.length;e++)this[e]=(new this.itemFactory).set(t[e])}return this}reset(e){return new t(this.itemFactory,...e)}toJson(){return this.map((t=>{var e,i;return null!=(i=null==(e=null==t?void 0:t.toJson)?void 0:e.call(t))?i:t}))}};function ve(t){return t instanceof fe||t instanceof ye}var xe="class-instance";function be(t,e,i){if(Nt(e)){if(!Nt(t)||t.length!==e.length||e.some(((e,i)=>null!=be(t[i],e))))return e}else{if(zt(e)){if(!zt(t))return e;const n={},s=new Set([...Object.keys(t),...Object.keys(e)]);for(const a of s)if(t[a]!==e[a]&&!(null==i?void 0:i.includes(a)))if(typeof t[a]===typeof e[a]){const i=be(t[a],e[a]);null!==i&&(n[a]=i)}else n[a]=e[a];return Object.keys(n).length?n:null}if(t!==e)return e}return null}function Se(t,e){return Nt(t)?t.map((t=>Se(t,e))):zt(t)?Jt(t,((t,i)=>{var n;return(null==(n=null==e?void 0:e.shallow)?void 0:n.includes(i))?ke(t):Se(t,e)})):ke(t)}function ke(t){return Nt(t)?[...t]:zt(t)?m({},t):Ot(t)?new Date(t):Bt(t)?new RegExp(t.source,t.flags):t}function we(t,e,i){for(var n=arguments.length,s=new Array(n>3?n-3:0),a=3;a<n;a++)s[a-3]=arguments[a];var o;if(Nt(t))e(t,...s),t.forEach(((t,n)=>{we(t,e,i,...De(s,n))}));else if(zt(t)){e(t,...s);for(const n of Object.keys(t)){if(null==(o=null==i?void 0:i.skip)?void 0:o.includes(n))continue;const a=t[n];(Nt(a)||zt(a))&&we(a,e,i,...De(s,n))}}}function Me(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{path:n,constructedArrays:s,matcherPath:a=(null==n?void 0:n.replace(/(\[[0-9+]+])/i,"[]")),skip:o=[]}=i;if(null==t)throw new Error("AG Charts - target is uninitialised: ".concat(null!=n?n:"<root>"));if(null==e)return t;if(ve(t))return t.set(e);const r=t,l=Ce(t);for(const c in e){if(te.has(c))continue;const d="".concat(a?a+".":"").concat(c);if(o.includes(d))continue;const u=e[c],p="".concat(n?n+".":"").concat(c),g=r.constructor,y=r[c];let v;try{const e=Ce(y),n=Ce(u);if(l===xe&&!(c in t)){E.warn("unable to set [".concat(p,"] in ").concat(null==g?void 0:g.name," - property is unknown"));continue}if(null!=e&&null!=n&&n!==e&&(e!==xe||"object"!==n)){E.warn("unable to set [".concat(p,"] in ").concat(null==g?void 0:g.name," - can't apply type of [").concat(n,"], allowed types are: [").concat(e,"]"));continue}if(ve(y))r[c].set(u);else if("array"===n)if(null!=v||(v=null==s?void 0:s.get(y)),null==v)r[c]=u;else{const t=u;r[c]=t.map((t=>Me(new v,t,f(m({},i),{path:p,matcherPath:d+"[]"}))))}else n===xe?r[c]=u:"object"===n?null!=y?Me(y,u,f(m({},i),{path:p,matcherPath:d})):null==v?(r[c]={},Me(r[c],u,f(m({},i),{path:p,matcherPath:d}))):r[c]=Me(new v,u,f(m({},i),{path:p,matcherPath:d})):r[c]=u}catch(h){E.warn("unable to set [".concat(p,"] in [").concat(null==g?void 0:g.name,"]; nested error is: ").concat(h.message))}}return t}function De(t,e){return t.map((t=>null==t?void 0:t[e]))}function Ce(t){return null==t?null:Yt(t)||Ot(t)?"primitive":Nt(t)?"array":_t(t)?zt(t)?"object":xe:Ft(t)?"function":"primitive"}var Le=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,e){let{chartTypes:[i],instanceConstructor:n,defaultAxes:s,themeTemplate:a,enterpriseThemeTemplate:o,paletteFactory:r,solo:l,stackable:h,groupable:c,stackedByDefault:d,swapDefaultAxesCondition:u,hidden:p}=e;this.setThemeTemplate(t,a,o),this.seriesMap.set(t,{instanceConstructor:n,defaultAxes:s,paletteFactory:r,solo:l,stackable:h,groupable:c,stackedByDefault:d,swapDefaultAxesCondition:u}),ae.set(t,i),p||oe.set(t,i)}create(t,e){var i;const n=null==(i=this.seriesMap.get(t))?void 0:i.instanceConstructor;if(n)return new n(e);throw new Error("AG Charts - unknown series type: ".concat(t))}cloneDefaultAxes(t){var e;const i=null==(e=this.seriesMap.get(t))?void 0:e.defaultAxes;return i?{axes:Se(i)}:null}setThemeTemplate(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.themeTemplates.get(t);this.themeTemplates.set(t,{community:Zt(e,null==n?void 0:n.community),enterprise:Zt(i,e,null==n?void 0:n.community)})}getThemeTemplate(t){const e=this.themeTemplates.get(t);return bt.isEnterprise?null==e?void 0:e.enterprise:null==e?void 0:e.community}getPaletteFactory(t){var e;return null==(e=this.seriesMap.get(t))?void 0:e.paletteFactory}isSolo(t){var e,i;return null!=(i=null==(e=this.seriesMap.get(t))?void 0:e.solo)&&i}isGroupable(t){var e,i;return null!=(i=null==(e=this.seriesMap.get(t))?void 0:e.groupable)&&i}isStackable(t){var e,i;return null!=(i=null==(e=this.seriesMap.get(t))?void 0:e.stackable)&&i}isStackedByDefault(t){var e,i;return null!=(i=null==(e=this.seriesMap.get(t))?void 0:e.stackedByDefault)&&i}isDefaultAxisSwapNeeded(t){var e,i,n;let s;for(const a of null!=(e=t.series)?e:[]){const{type:t="line"}=a,e=null==(n=null==(i=this.seriesMap.get(t))?void 0:i.swapDefaultAxesCondition)?void 0:n.call(i,a);if(null!=e){if(null!=s&&s!=e)throw new Error("AG Charts - The provided series have incompatible directions");s=e}}return s}},Re=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,e){let{optionsKey:i,instanceConstructor:n,themeTemplate:s}=e;this.legendMap.set(t,{optionsKey:i,instanceConstructor:n}),this.themeTemplates.set(i,s)}create(t,e){var i;const n=null==(i=this.legendMap.get(t))?void 0:i.instanceConstructor;if(n)return new n(e);throw new Error("AG Charts - unknown legend type: ".concat(t))}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce(((t,e)=>{let[i,n]=e;return t[i]=n.optionsKey,t}),{})}},Ie=(t=>(t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=17]="LARGE",t))(Ie||{}),Ae=(t=>(t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.LIGHTER="lighter",t))(Ae||{}),Te=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(Te||{}),Ne=(t=>(t.CATEGORY="category",t.ORDINAL_TIME="ordinal-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(Ne||{}),Ee=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(Ee||{}),Oe=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(Oe||{}),Pe={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Be={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},Fe=Symbol("is-dark-theme"),_e=Symbol("extends-axes-defaults"),Ge=Symbol("extends-axes-line-defaults"),ze=Symbol("extends-axes-tick-defaults"),We=Symbol("extends-axes-grid-line-defaults"),Ve=Symbol("extends-series-defaults"),Ke=Symbol("extends-cartesian-marker-defaults"),Ye=Symbol("default-font"),He=Symbol("default-label-colour"),Ue=Symbol("default-inverted-label-colour"),Xe=Symbol("default-inside-series-label-colour"),je=Symbol("default-muted-label-colour"),Ze=Symbol("default-axis-grid-colour"),qe=Symbol("default-axis-line-colour"),Je=Symbol("default-cross-lines-colour"),Qe=Symbol("default-background-colour"),$e=Symbol("default-shadow-colour"),ti=Symbol("default-colours"),ei=Symbol("default-waterfall-series-positive-colors"),ii=Symbol("default-waterfall-series-negative-colors"),ni=Symbol("default-waterfall-series-total-colors"),si=Symbol("default-waterfall-series-connector-line-stroke"),ai=Symbol("default-polar-series-stroke"),oi=Symbol("default-diverging-series-colour-range"),ri=Symbol("default-hierarchy-fills"),li=Symbol("default-hierarchy-strokes"),hi=Symbol("default-annotation-stroke"),ci=Symbol("default-annotation-background-fill"),di=Symbol("default-annotation-handle-fill"),ui="white",pi={fills:Object.values(Pe),strokes:Object.values(Be)},gi={get cartesian(){return{seriesTypes:ae.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:ae.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:ae.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:ae.topologyTypes,commonOptions:[]}}},mi=Object.values(gi).reduce(((t,e)=>{let{commonOptions:i}=e;return t.concat(i)}),[]),fi=class t{getPalette(){return pi}static getAxisDefaults(t){return Zt(t,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:Ye,color:He},label:{fontSize:12,fontFamily:Ye,padding:5,color:He,avoidCollisions:!0},line:{enabled:!0,width:1,color:qe},tick:{enabled:!1,width:1,color:qe},gridLine:{enabled:!0,style:[{stroke:Ze,lineDash:[]}]},crossLines:{enabled:!1,fill:Je,stroke:Je,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:Ye,padding:5,color:He}}})}static getSeriesDefaults(){return{visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"#ffffff54",stroke:"#0006",strokeWidth:2},series:{dimOpacity:1}},nodeClickRange:"exact",tooltip:{enabled:!0}}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1}}static getChartDefaults(){return{background:{visible:!0,fill:Qe},padding:{top:20,right:20,bottom:20,left:20},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:Ye,color:He,wrapping:"hyphenate"},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:Ye,color:je,wrapping:"hyphenate"},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:Ye,color:"rgb(140, 140, 140)",wrapping:"hyphenate"},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},toggleSeriesVisible:!0,label:{color:He,fontSize:12,fontFamily:Ye}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:He},inactiveStyle:{fill:je},highlightStyle:{fill:He},label:{color:He}}},tooltip:{enabled:!0,darkTheme:Fe,range:"nearest",delay:0},overlays:{loading:{darkTheme:Fe},noData:{darkTheme:Fe},noVisibleSeries:{darkTheme:Fe}},listeners:{}}}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{overrides:e,palette:i}=Se(t),n=this.createChartConfigPerChartType(this.getDefaults());e&&this.mergeOverrides(n,e),this.config=Object.freeze(this.templateTheme(n)),this.palette=Zt(i,this.getPalette())}mergeOverrides(t,e){for(const{seriesTypes:i,commonOptions:n}of Object.values(gi)){const s=m({},e.common);for(const t of mi)n.includes(t)||delete s[t];if(s)for(const e of i){const i=e;t[i]=Zt(s,t[i])}}ae.seriesTypes.forEach((i=>{const n=i;e[n]&&(t[n]=Zt(e[n],t[n]))}))}createChartConfigPerChartType(t){for(const[e,{seriesTypes:i}]of Object.entries(gi)){const n=re.get(e);for(const e of i)t[e]||(t[e]=Se(n))}return t}getDefaults(){const e=(e,i)=>{var n;const s={},a=m(m(m({axes:{}},Re.getThemeTemplates()),t.getChartDefaults()),re.get(e));for(const o of i){s[o]=Zt(Le.getThemeTemplate(o),null!=(n=s[o])?n:Se(a));const{axes:i}=s[o];for(const n of wt.keys())i[n]=Zt(i[n],wt.getThemeTemplate(n),"cartesian"===e&&t.cartesianAxisDefault[n])}return s};return Zt(e("cartesian",ae.cartesianTypes),e("polar",ae.polarTypes),e("hierarchy",ae.hierarchyTypes),e("topology",ae.topologyTypes))}templateTheme(t){const e=Se(t),{extensions:i,properties:n}=this.getTemplateParameters();return we(e,(t=>{if(t.__extends__){const e=t.__extends__,n=i.get(e);if(null==n)throw new Error("AG Charts - no template variable provided for: ".concat(e));Object.keys(n).forEach((e=>{e in t?_t(t[e])&&(t[e]=Zt(t[e],n[e])):t[e]=n[e]})),delete t.__extends__}if(Nt(t))for(let e=0;e<t.length;e++){const i=t[e];n.has(i)&&(t[e]=n.get(i))}else for(const[e,i]of Object.entries(t))n.has(i)&&(t[e]=n.get(i))})),Se(e)}static getDefaultColors(){return{fills:Pe,strokes:Be}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Pe.BLUE,stroke:Be.BLUE,label:{color:He}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Pe.ORANGE,stroke:Be.ORANGE,label:{color:He}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Pe.GRAY,stroke:Be.GRAY,label:{color:He}}}getTemplateParameters(){const e=new Map;e.set(_e,t.getAxisDefaults()),e.set(Ge,t.getAxisDefaults().line),e.set(ze,t.getAxisDefaults().tick),e.set(We,t.getAxisDefaults().gridLine),e.set(Ve,t.getSeriesDefaults()),e.set(Ke,t.getCartesianSeriesMarkerDefaults());const i=new Map;return i.set(Fe,!1),i.set(Ye,"Verdana, sans-serif"),i.set(He,"rgb(70, 70, 70)"),i.set(Ue,"white"),i.set(je,"rgb(140, 140, 140)"),i.set(Ze,"rgb(224,234,241)"),i.set(qe,"rgb(195, 195, 195)"),i.set(Je,"rgb(70, 70, 70)"),i.set(Xe,ui),i.set(Qe,ui),i.set($e,"rgba(0, 0, 0, 0.5)"),i.set(oi,[Pe.ORANGE,Pe.YELLOW,Pe.GREEN]),i.set(ri,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),i.set(li,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),i.set(ai,ui),i.set(ti,t.getDefaultColors()),i.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),i.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),i.set(ni,t.getWaterfallSeriesDefaultTotalColors()),i.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),i.set(hi,Be.BLUE),i.set(ci,Pe.BLUE),i.set(di,ui),{extensions:e,properties:i}}};fi.cartesianAxisDefault={number:fi.getAxisDefaults({line:{enabled:!1}}),log:fi.getAxisDefaults({base:10,line:{enabled:!1}}),category:fi.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:!1}}),time:fi.getAxisDefaults({gridLine:{enabled:!1}}),"grouped-category":fi.getAxisDefaults()};var yi=fi,vi="#192232",xi={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},bi={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},Si={fills:Object.values(xi),strokes:Object.values(bi)},ki=class t extends yi{static getDefaultColors(){return{fills:xi,strokes:bi}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:xi.BLUE,stroke:bi.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:xi.ORANGE,stroke:bi.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:xi.GRAY,stroke:bi.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Fe,!0),e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(ai,vi),e.properties.set(He,"white"),e.properties.set(je,"#7D91A0"),e.properties.set(Ze,"#545A6E"),e.properties.set(Je,"white"),e.properties.set(oi,[xi.ORANGE,xi.YELLOW,xi.GREEN]),e.properties.set(ri,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.properties.set(li,["#192834","#3b5164","#496275","#577287","#668399"]),e.properties.set(Qe,vi),e.properties.set(Xe,vi),e.properties.set(hi,bi.BLUE),e.properties.set(ci,xi.BLUE),e.properties.set(di,vi),e}getPalette(){return Si}constructor(t){super(t)}},wi={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Mi={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Di={fills:Object.values(wi),strokes:Object.values(Mi)},Ci=class t extends ki{static getDefaultColors(){return{fills:wi,strokes:Mi}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:wi.BLUE,stroke:Mi.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:wi.RED,stroke:Mi.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:wi.GRAY,stroke:Mi.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oi,[wi.ORANGE,wi.YELLOW,wi.GREEN]),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(hi,Mi.BLUE),e.properties.set(ci,wi.BLUE),e}getPalette(){return Di}},Li={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Ri={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Ii={fills:Object.values(Li),strokes:Object.values(Ri)},Ai=class t extends yi{static getDefaultColors(){return{fills:Li,strokes:Ri}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Li.BLUE,stroke:Ri.BLUE,label:{color:He}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Li.RED,stroke:Ri.RED,label:{color:He}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Li.GRAY,stroke:Ri.GRAY,label:{color:He}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oi,[Li.ORANGE,Li.YELLOW,Li.GREEN]),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(hi,Ri.BLUE),e.properties.set(ci,Li.BLUE),e}getPalette(){return Ii}},Ti={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Ni={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},Ei={fills:Object.values(Ti),strokes:Object.values(Ni)},Oi=class t extends ki{static getDefaultColors(){return{fills:Ti,strokes:Ni}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ti.BLUE,stroke:Ni.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ti.RED,stroke:Ni.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee",label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oi,[Ti.BLUE,Ti.RED]),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(hi,Ni.BLUE),e.properties.set(ci,Ti.BLUE),e}getPalette(){return Ei}},Pi={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Bi={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},Fi={fills:Object.values(Pi),strokes:Object.values(Bi)},_i=class t extends yi{static getDefaultColors(){return{fills:Pi,strokes:Bi}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Pi.BLUE,stroke:Bi.BLUE,label:{color:He}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Pi.RED,stroke:Bi.RED,label:{color:He}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888",label:{color:He}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oi,[Pi.BLUE,Pi.RED]),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(hi,Bi.BLUE),e.properties.set(ci,Pi.BLUE),e}getPalette(){return Fi}},Gi={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},zi={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Wi={fills:Object.values(Gi),strokes:Object.values(zi)},Vi=class t extends ki{static getDefaultColors(){return{fills:f(m({},Gi),{RED:Gi.ORANGE}),strokes:f(m({},zi),{RED:zi.ORANGE})}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Gi.BLUE,stroke:zi.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Gi.ORANGE,stroke:zi.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Gi.GRAY,stroke:zi.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oi,[Gi.ORANGE,Gi.YELLOW,Gi.GREEN]),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(hi,zi.BLUE),e.properties.set(ci,Gi.BLUE),e}getPalette(){return Wi}},Ki={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Yi={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Hi={fills:Object.values(Ki),strokes:Object.values(Yi)},Ui=class t extends yi{static getDefaultColors(){return{fills:f(m({},Ki),{RED:Ki.ORANGE}),strokes:f(m({},Yi),{RED:Yi.ORANGE})}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ki.BLUE,stroke:Yi.BLUE,label:{color:He}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ki.ORANGE,stroke:Yi.ORANGE,label:{color:He}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ki.GRAY,stroke:Yi.GRAY,label:{color:He}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oi,[Ki.ORANGE,Ki.YELLOW,Ki.GREEN]),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(hi,Yi.BLUE),e.properties.set(ci,Ki.BLUE),e}getPalette(){return Hi}},Xi={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},ji={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Zi={fills:Object.values(Xi),strokes:Object.values(ji)},qi=class t extends ki{static getDefaultColors(){return{fills:Xi,strokes:ji}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Xi.BLUE,stroke:ji.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Xi.ORANGE,stroke:ji.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Xi.GRAY,stroke:ji.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oi,[Xi.ORANGE,Xi.YELLOW,Xi.GREEN]),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(hi,ji.BLUE),e.properties.set(ci,Xi.BLUE),e}getPalette(){return Zi}},Ji={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Qi={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},$i={fills:Object.values(Ji),strokes:Object.values(Qi)},tn=class t extends yi{static getDefaultColors(){return{fills:Ji,strokes:Qi}}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ji.BLUE,stroke:Qi.BLUE,label:{color:He}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ji.ORANGE,stroke:Qi.ORANGE,label:{color:He}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ji.GRAY,stroke:Qi.GRAY,label:{color:He}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ti,t.getDefaultColors()),e.properties.set(ei,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(ii,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(ni,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(oi,[Ji.ORANGE,Ji.YELLOW,Ji.GREEN]),e.properties.set(si,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(hi,Qi.BLUE),e.properties.set(ci,Ji.BLUE),e}getPalette(){return $i}},en=()=>new yi,nn=()=>new ki,sn={undefined:en,null:en,"ag-default":en,"ag-sheets":()=>new Ui,"ag-polychroma":()=>new _i,"ag-vivid":()=>new tn,"ag-material":()=>new Ai},an=m(m({},{undefined:nn,null:nn,"ag-default-dark":nn,"ag-sheets-dark":()=>new Vi,"ag-polychroma-dark":()=>new Oi,"ag-vivid-dark":()=>new qi,"ag-material-dark":()=>new Ci}),sn);function on(t){return void 0===t||"string"===typeof t||t instanceof yi?t:"object"===typeof t?function(t){if(null===t)return;let e=!0;const{baseTheme:i,palette:n,overrides:s}=t;if(void 0!==i&&"string"!==typeof i&&"object"!==typeof i&&(E.warn("invalid theme.baseTheme type ".concat(typeof i,", expected (string | object).")),e=!1),void 0!==s&&"object"!==typeof s&&(E.warn("invalid theme.overrides type ".concat(typeof s,", expected object.")),e=!1),"object"===typeof n){if(null!==n){const{fills:t,strokes:i}=n;void 0===t||Array.isArray(t)||(E.warn("theme.overrides.fills must be undefined or an array"),e=!1),void 0===i||Array.isArray(i)||(E.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else void 0!==n&&(E.warn("invalid theme.palette type ".concat(typeof n,", expected object.")),e=!1);return e?t:void 0}(t):void E.warn("invalid theme value type ".concat(typeof t,", expected object or string."))}function rn(t){let e=on(t);if(e instanceof yi)return e;if(null==e||"string"===typeof e){const t=an[e];return t?t():(E.warnOnce("the theme [".concat(e,"] is invalid, using [ag-default] instead.")),en())}const i=[];let n;for(;"object"===typeof e;)i.push(e.overrides),null!=n||(n=e.palette),e=e.baseTheme;const s={baseTheme:e,overrides:Zt(...i),palette:n};return new((s.baseTheme?rn(s.baseTheme):en()).constructor)(s)}function ln(t){if(0===t.length)return;let e=1/0,i=-1/0;for(let s of t)s instanceof Date&&(s=s.getTime()),"number"===typeof s&&(s<e&&(e=s),s>i&&(i=s));const n=[e,i];return n.every(isFinite)?n:void 0}function hn(t,e,i){return cn(t,e,i).extent}function cn(t,e,i){var n;let s=!1;return t.length>2&&(t=null!=(n=ln(t))?n:[NaN,NaN]),isNaN(e)||(s||(s=e>t[0]),t=[e,t[1]]),isNaN(i)||(s||(s=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:s}}function dn(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!dn(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function un(t){return"undefined"===typeof t?[]:Array.isArray(t)?t:[t]}function pn(t){return Array.from(new Set(t))}function gn(t,e){return t.reduce(((t,i)=>{const n=e(i);return null!=t[n]||(t[n]=[]),t[n].push(i),t}),{})}function mn(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t.length)return[];const n=[];for(let s=0;s<e;s++)n.push(t.at((s+i)%t.length));return n}function fn(t,e){return e.reduce(((e,i)=>{let[n,s]=e;return t(i)?[[...n,i],s]:[n,[...s,i]]}),[[],[]])}function*yn(t,e){for(const i of t)yield e(i)}function vn(t,e){return!e.some((e=>!function(t,e){return function(t,e){return t.includes(e)}(t,e)}(t,e)))}var xn={},bn=new WeakMap;function Sn(t){var e;return t?null==(e=xn.document)?void 0:e[t]:xn.document}function kn(t){var e;return t?null==(e=xn.window)?void 0:e[t]:xn.window}function wn(t,e,i){const n=Sn().createElement(t);return"object"===typeof e&&(i=e,e=void 0),e&&n.classList.add(e),i&&Object.assign(n.style,i),n}function Mn(t,e){const{body:i}=Sn(),n=wn("a",{display:"none"});n.href=t,n.download=e,i.appendChild(n),n.click(),setTimeout((()=>i.removeChild(n)))}function Dn(t,e){var i,n;const s=Sn();if(e&&(null==(i=bn.get(s))?void 0:i.has(e)))return;const a=wn("style");a.innerHTML=t,s.head.insertBefore(a,s.head.querySelector("style")),e&&!bn.has(s)?bn.set(s,new Set([e])):e&&(null==(n=bn.get(s))||n.add(e))}function Cn(t){xn.document=t}function Ln(t){xn.window=t}"undefined"!==typeof window?xn.window=window:"undefined"!==typeof global&&(xn.window=global.window),"undefined"!==typeof document?xn.document=document:"undefined"!==typeof global&&(xn.document=global.document);var Rn=Date.now(),In={create(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.assign((function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];In.check(...e)&&("function"===typeof i[0]&&(i=un(i[0]())),(()=>{const t=Date.now()-Rn;if(t>2e3){const e=(Math.floor(t/100)/10).toFixed(1);E.log("**** ".concat(e,"s since last log message ****"))}Rn=Date.now()})(),E.log(...i))}),{check:()=>In.check(...e)})},check(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];0===e.length&&e.push(!0);return un(kn("agChartsDebug")).some((t=>e.includes(t)))}},An=new Set(["map-shape-background","map-line-background"]),Tn=class{constructor(t,e){var i,n;const s={shallow:["data"]},a=Se(t,s),o=this.optionsType(a);this.sanityCheckAndCleanup(a),this.userOptions=a,this.activeTheme=rn(a.theme),this.defaultAxes=this.getDefaultAxes(a),this.specialOverrides=this.specialOverridesDefaults(m({},e));const r=this.getSeriesThemeConfig(o),{axes:l={},annotations:h={},series:c}=r,d=y(r,["axes","annotations","series"]);this.processedOptions=Se(Zt(this.userOptions,d,this.defaultAxes),s),this.processAxesOptions(this.processedOptions,l),this.processSeriesOptions(this.processedOptions),this.processMiniChartSeriesOptions(this.processedOptions),this.processAnnotationsOptions(this.processedOptions,h),(ue(this.processedOptions)||function(t){const e=de(t);return pe(t)&&"pie"!==e&&"donut"!==e}(this.processedOptions))&&null==(null==(i=this.processedOptions.legend)?void 0:i.enabled)&&(null!=(n=this.processedOptions).legend||(n.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),bt.isEnterprise||function(t){var e,i,n,s;const a=[],o=ae.get(de(t));for(const{type:r,chartTypes:l,optionsKey:h,optionsInnerKey:c,identifier:d}of le)if("unknown"===o||l.includes(o))if("root"===r||"legend"===r){const e=t[h];if(null==e)continue;c?e[c]&&(a.push("".concat(h,".").concat(c)),delete e[c]):(a.push(h),delete t[h])}else if("axis"===r){if(!("axes"in t)||!(null==(e=t.axes)?void 0:e.some((t=>t.type===d))))continue;a.push("axis[type=".concat(d,"]")),t.axes=t.axes.filter((t=>t.type!==d))}else if("axis-option"===r){if(!("axes"in t)||!(null==(i=t.axes)?void 0:i.some((t=>t[h]))))continue;a.push("axis.".concat(h)),t.axes.forEach((t=>{t[h]&&delete t[h]}))}else if("series"===r){if(!(null==(n=t.series)?void 0:n.some((t=>t.type===d))))continue;a.push("series[type=".concat(d,"]")),t.series=t.series.filter((t=>t.type!==d))}else if("series-option"===r){if(!(null==(s=t.series)?void 0:s.some((t=>t[h]))))continue;a.push("series.".concat(h)),t.series.forEach((t=>{t[h]&&delete t[h]}))}if(a.length){let e="ag-charts-enterprise",i="https://charts.ag-grid.com/javascript/installation/";"integrated"===t.mode&&(e="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",i="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),E.warnOnce(["unable to use these enterprise features as '".concat(e,"' has not been loaded:"),"",...a,"","See: ".concat(i)].join("\n"))}}(this.processedOptions)}getOptions(){var t;return null!=(t=this.processedOptions)?t:{}}diffOptions(t){return be(t,this.processedOptions)}getSeriesThemeConfig(t){var e,i;return Se(null!=(i=null==(e=this.activeTheme)?void 0:e.config[t])?i:{})}getDefaultAxes(t){const e=this.optionsType(t),i=Le.cloneDefaultAxes(e);return Le.isDefaultAxisSwapNeeded(t)&&this.swapAxesPosition(i),i}optionsType(t){var e,i,n;return null!=(n=null==(i=null==(e=t.series)?void 0:e[0])?void 0:i.type)?n:"line"}sanityCheckAndCleanup(t){var e;this.deprecationWarnings(t),this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t),this.removeDisabledOptions(t),this.removeLeftoverSymbols(t),(null==(e=t.series)?void 0:e.some((t=>"bullet"===t.type)))&&null!=t.sync&&!1!==t.sync.enabled&&(E.warnOnce("bullet series cannot be synced, disabling synchronization."),delete t.sync)}swapAxesPosition(t){var e;if(ue(t)){const[i,n]=null!=(e=t.axes)?e:[];t.axes=[f(m({},i),{position:n.position}),f(m({},n),{position:i.position})]}}processAxesOptions(t,e){"axes"in t&&(t.axes=t.axes.map((t=>{var i,n,s;const a=Zt(null==(i=e[t.type])?void 0:i[t.position],e[t.type]),{crossLines:o}=a,r=y(a,["crossLines"]);t.crossLines&&(t.crossLines=qt(t.crossLines,o));const l=null==(n=r.gridLine)?void 0:n.style;(null==(s=t.gridLine)?void 0:s.style)&&(null==l?void 0:l.length)&&(t.gridLine.style=t.gridLine.style.map(((t,e)=>null!=t.stroke||null!=t.lineDash?Zt(t,l.at(e%l.length)):t)));const h=Zt(t,r),{top:c,right:d,bottom:u,left:p}=h;return y(h,["top","right","bottom","left"])})))}processSeriesOptions(t){const e=this.getDefaultSeriesType(t),i=this.getTooltipPositionDefaults(t),n=Boolean(_t(t.theme)&&t.theme.palette),s={colourIndex:0,userPalette:n},a=t.series.map((t=>{var a;null!=t.type||(t.type=e);const o=null!=(a=this.getSeriesThemeConfig(t.type).series)?a:{},{innerLabels:r}=o,l=y(o,["innerLabels"]),h=An.has(t.type)?{colourIndex:0,userPalette:n}:s,c=this.getSeriesPalette(t.type,h),d=Zt(this.getSeriesGroupingOptions(t),t,i,l,c);return d.innerLabels&&(d.innerLabels=qt(d.innerLabels,r)),this.activeTheme.templateTheme(d)}));t.series=this.setSeriesGroupingOptions(a)}processMiniChartSeriesOptions(t){var e,i;let n=null==(i=null==(e=t.navigator)?void 0:e.miniChart)?void 0:i.series;if(null==n)return;const s={colourIndex:0,userPalette:Boolean(_t(t.theme)&&t.theme.palette)};n=n.map((t=>{var e;null!=t.type||(t.type="line");const i=null!=(e=this.getSeriesThemeConfig(t.type).series)?e:{},{innerLabels:n}=i,a=y(i,["innerLabels"]),o=Zt(this.getSeriesGroupingOptions(t),t,a,this.getSeriesPalette(t.type,s));return this.activeTheme.templateTheme(o)})),t.navigator.miniChart.series=this.setSeriesGroupingOptions(n)}processAnnotationsOptions(t,e){ue(t)}getSeriesPalette(t,e){const i=Le.getPaletteFactory(t),{colourIndex:n,userPalette:s}=e,{fills:a=[],strokes:o=[]}=this.activeTheme.palette;return null==i?void 0:i({userPalette:s,colorsCount:Math.max(a.length,o.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),takeColors:t=>(e.colourIndex+=t,{fills:mn(a,t,n),strokes:mn(o,t,n)})})}getSeriesGroupingOptions(t){const e=Le.isGroupable(t.type),i=Le.isStackable(t.type),n=Le.isStackedByDefault(t.type);t.grouped&&!e&&E.warnOnce('unsupported grouping of series type "'.concat(t.type,'".')),!t.stacked&&!t.stackGroup||i||E.warnOnce('unsupported stacking of series type "'.concat(t.type,'".'));let{grouped:s,stacked:a}=t;return null!=a||(a=(n||null!=t.stackGroup)&&!(e&&s)),null!=s||(s=!0),{stacked:i&&a,grouped:e&&s&&!(i&&a)}}setSeriesGroupingOptions(t){const e=this.getSeriesGrouping(t);In.create(!0,"opts")("setSeriesGroupingOptions() - series grouping: ",e);const i={},n=e.reduce(((t,e)=>{var i;return"default"===e.groupType||(null!=t[i=e.seriesType]||(t[i]=0),t[e.seriesType]+="stack"===e.groupType?1:e.series.length),t}),{});return e.flatMap((t=>{var e;switch(null!=i[e=t.seriesType]||(i[e]=0),t.groupType){case"stack":const e=i[t.seriesType]++;return t.series.map(((i,s)=>Object.assign(i,{seriesGrouping:{groupIndex:e,groupCount:n[t.seriesType],stackIndex:s,stackCount:t.series.length}})));case"group":return t.series.map((e=>Object.assign(e,{seriesGrouping:{groupIndex:i[t.seriesType]++,groupCount:n[t.seriesType],stackIndex:0,stackCount:0}})))}return t.series})).map((t=>{var e=t,{stacked:i,grouped:n}=e;return y(e,["stacked","grouped"])}))}getSeriesGroupId(t){var e;return[t.type,t.xKey,t.stacked?null!=(e=t.stackGroup)?e:"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){const e=new Map;return t.reduce(((t,i)=>{const n=i.type;if(i.stacked||i.grouped){const s=this.getSeriesGroupId(i);if(!e.has(s)){const a={groupType:i.stacked?"stack":"group",seriesType:n,series:[]};e.set(s,a),t.push(a)}e.get(s).series.push(i)}else t.push({groupType:"default",seriesType:n,series:[i]});return t}),[])}getDefaultSeriesType(t){if(ue(t))return"line";if(pe(t))return"pie";if(ge(t))return"treemap";if(me(t))return"map-shape";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(t){var e;const i=null==(e=t.tooltip)?void 0:e.position;if(!zt(i))return;const{type:n,xOffset:s,yOffset:a}=i,o={};return Wt(n)&&Ut(D,n)&&(o.type=n),Kt(s)&&(o.xOffset=s),Kt(a)&&(o.yOffset=a),{tooltip:{position:o}}}deprecationWarnings(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach((e=>{let[i,n]=e;var s;(null==(s=t.series)?void 0:s.some((t=>null!=t[i])))&&E.warnOnce("Property [series.".concat(i,"] is deprecated, please use [series.").concat(n,"] and multiple series instead."))}))}axesTypeIntegrity(t){var e,i;if("axes"in t){const n=null!=(e=t.axes)?e:[];for(const{type:e}of n)if(null==(i=e)||!wt.has(i)){delete t.axes;const i=Array.from(wt.publicKeys()).join(", ");E.warnOnce("unknown axis type: ".concat(e,"; expected one of: ").concat(i))}}}seriesTypeIntegrity(t){var e;const i=null!=(e=t.series)?e:[];t.series=i.filter((t=>{let{type:e}=t;if(null==e||null!=(i=e)&&ae.has(i)||function(t){return le.some((e=>"series"===e.type&&e.identifier===t))}(e))return!0;var i;E.warnOnce("unknown series type: ".concat(e,"; expected one of: ").concat(oe.seriesTypes.join(", ")))}))}soloSeriesIntegrity(t){const e=t.series;if(e&&e.length>1&&e.some((t=>Le.isSolo(t.type)))){const i=this.optionsType(t);if(Le.isSolo(i))E.warn("series[0] of type '".concat(i,"' is incompatible with other series types. Only processing series[0]")),t.series=e.slice(0,1);else{const{solo:i,nonSolo:n}=gn(e,(t=>Le.isSolo(t.type)?"solo":"nonSolo")),s=pn(i.map((t=>t.type))).join(", ");E.warn("Unable to mix these series types with the lead series type: ".concat(s)),t.series=n}}}enableConfiguredOptions(t){we(this.userOptions,((t,e)=>{e&&"enabled"in e&&!e._enabledFromTheme&&null==t.enabled&&(e.enabled=!0)}),{skip:["data","theme"]},t),we(t,(t=>{null!=t._enabledFromTheme&&delete t._enabledFromTheme}),{skip:["data","theme"]})}removeDisabledOptions(t){we(t,(t=>{"enabled"in t&&!1===t.enabled&&Object.keys(t).forEach((e=>{"enabled"!==e&&delete t[e]}))}),{skip:["data","theme"]})}removeLeftoverSymbols(t){we(t,(t=>{if(t&&_t(t))for(const[e,i]of Object.entries(t))Xt(i)&&delete t[e]}),{skip:["data"]})}specialOverridesDefaults(t){if(null!=t.window?Ln(t.window):"undefined"!==typeof window?t.window=window:"undefined"!==typeof global&&(t.window=global.window),null!=t.document?Cn(t.document):"undefined"!==typeof document?t.document=document:"undefined"!==typeof global&&(t.document=global.document),null==t.window)throw new Error("AG Charts - unable to resolve global window");if(null==t.document)throw new Error("AG Charts - unable to resolve global document");return t}};function Nn(){return(t,e)=>{const i=["Property [".concat(t,"] is deprecated."),e].filter(Boolean).join(" ");E.warnOnce(i)}}function En(t,e){const i=Nn(),n=null==e?void 0:e.default;return Lt(((e,s,a)=>(a!==n&&i(s.toString(),t),a)))}function On(t,e){const i=Nn();return Lt(((n,s,a)=>(a!==n[t]&&(i(s.toString(),"Use [".concat(t,"] instead.")),ee(n,t,e?e(a):a)),Mt)),((e,n)=>(i(n.toString(),"Use [".concat(t,"] instead.")),$t(e,t))))}var Pn={};v(Pn,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>As,fromToMotion:()=>Ts,staticFromToMotion:()=>Ns});var Bn=new Map;function Fn(){Bn.clear()}function _n(t){var e;const i=t.constructor,n=Object.hasOwn(i,"className")?i.className:i.name;if(!n)throw new Error("The ".concat(i," is missing the 'className' property."));const s=(null!=(e=Bn.get(n))?e:0)+1;return Bn.set(n,s),"".concat(n,"-").concat(s)}var Gn="$interpolate",zn=t=>null!=t[Gn];function Wn(t,e,i){return Math.min(i,Math.max(t,e))}function Vn(t,e){const[i,n]=Kn(e);return Wn(i,t,n)}function Kn(t){return t.length?[Math.min(...t),Math.max(...t)]:[]}function Yn(t){const[e,i]=Kn(t);return i-e}function Hn(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return Math.abs(t-e)<i}function Un(t){return-1===Math.sign(t)||Object.is(t,-0)}function Xn(t){const e=p(10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:2);return Math.round(t*e)/e}function jn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function Zn(t,e){return Math.floor(t%e+(t<0?e:0))}function qn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[,i=""]=(Math.abs(t)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:e}).split(".");return i.length}function Jn(t,e,i){const n={nearest:void 0,distanceSquared:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0};for(const s of i){const i=s.distanceSquared(t,e);if(0===i)return{nearest:s,distanceSquared:0};i<n.distanceSquared&&(n.nearest=s,n.distanceSquared=i)}return n}function Qn(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const{x:s,y:a}=i.transformPoint(t,e),o={nearest:void 0,distanceSquared:n};for(const r of i.children){const{nearest:t,distanceSquared:e}=r.nearestSquared(s,a,o.distanceSquared);if(0===e)return{nearest:t,distanceSquared:e};e<o.distanceSquared&&(o.nearest=t,o.distanceSquared=e)}return o}var $n=class t{constructor(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n}clone(){const{x:e,y:i,width:n,height:s}=this;return new t(e,i,n,s)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,e){if(this.containsPoint(t,e))return 0;const i=t-Wn(this.x,t,this.x+this.width),n=e-Wn(this.y,e,this.y+this.height);return i*i+n*n}static nearestBox(t,e,i){return Jn(t,e,i)}clip(t){if(void 0===t)return this;const e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),n=Math.min(this.x+this.width,t.x+t.width),s=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.y=i,this.width=Math.max(0,n-e),this.height=Math.max(0,s-i),this}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"===typeof t?i(e,t):"object"===typeof t&&Object.entries(t).forEach((t=>{let[e,n]=t;return i(e,n)})),this}grow(t,e){if("number"===typeof t)this.shrink(-t,e);else{const e=m({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}combine(t){const{x:e,y:i,width:n,height:s}=this;this.x=Math.min(e,t.x),this.y=Math.min(i,t.y),this.width=Math.max(e+n,t.x+t.width)-this.x,this.height=Math.max(i+s,t.y+t.height)-this.y}static merge(e){let i=1/0,n=1/0,s=-1/0,a=-1/0;for(const t of e)t.x<i&&(i=t.x),t.y<n&&(n=t.y),t.x+t.width>s&&(s=t.x+t.width),t.y+t.height>a&&(a=t.y+t.height);return new t(i,n,s-i,a-n)}[Gn](e,i){return new t(this.x*(1-i)+e.x*i,this.y*(1-i)+e.y*i,this.width*(1-i)+e.width*i,this.height*(1-i)+e.height*i)}};$n.zero=new $n(0,0,0,0),$n.NaN=new $n(NaN,NaN,NaN,NaN);var ts=$n,es=(t=>(t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR",t))(es||{});var is=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function ns(t){const{changeCb:e,convertor:i}=null!=t?t:{};return function(n,s){const a="__".concat(s);n[s]||(is&&null==e&&null==i?function(t,e,i,n){const{redraw:s=1,type:a="normal",checkDirtyOnAssignment:o=!1}=null!=n?n:{},r=new Function("value","\n        const oldValue = this.".concat(i,";\n        if (value !== oldValue) {\n            this.").concat(i," = value;\n            ").concat("normal"===a?"this.markDirty(this, ".concat(s,");"):"","\n            ").concat("transform"===a?"this.markDirtyTransform(".concat(s,");"):"","\n            ").concat("path"===a?"if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ".concat(s,"); }"):"","\n            ").concat("font"===a?"if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ".concat(s,"); }"):"","\n        }\n        ").concat(o?"if (value != null && value._dirty > ".concat(0,") { this.markDirty(value, value._dirty); }"):"","\n")),l=new Function("return this.".concat(i,";"));Object.defineProperty(t,e,{set:r,get:l,enumerable:!0,configurable:!0})}(n,s,a,t):function(t,e,i,n){const{redraw:s=1,type:a="normal",changeCb:o,convertor:r,checkDirtyOnAssignment:l=!1}=null!=n?n:{},h=function(t){const e=this[i];(t=r?r(t):t)!==e&&(this[i]=t,"normal"===a&&this.markDirty(this,s),"transform"===a&&this.markDirtyTransform(s),"path"!==a||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,s)),"font"!==a||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,s)),null==o||o(this)),l&&null!=t&&t._dirty>0&&this.markDirty(t,t._dirty)},c=function(){return this[i]};Object.defineProperty(t,e,{set:h,get:c,enumerable:!0,configurable:!0})}(n,s,a,t))}}var ss=class{constructor(){this._dirty=3}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},as=class t{get e(){return[...this.elements]}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,1,0,0];this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const n=t[0]*e[0]+t[2]*e[1],s=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],o=t[1]*e[2]+t[3]*e[3],r=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!=i?i:t)[0]=n,i[1]=s,i[2]=a,i[3]=o,i[4]=r,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(e){const i=new Array(6);return this.AxB(this.elements,e.elements,i),new t(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let i=e[0],n=e[1],s=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-n*s);return i*=l,n*=l,s*=l,a*=l,new t([a,-n,-s,i,s*r-a*o,n*o-i*r])}inverseTo(t){const e=this.elements;let i=e[0],n=e[1],s=e[2],a=e[3];const o=e[4],r=e[5],l=1/(i*a-n*s);return i*=l,n*=l,s*=l,a*=l,t.setElements([a,-n,-s,i,s*r-a*o,n*o-i*r]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],n=t[2],s=t[3];const a=t[4],o=t[5],r=1/(e*s-i*n);return e*=r,i*=r,n*=r,s*=r,t[0]=s,t[1]=-i,t[2]=-n,t[3]=e,t[4]=n*o-s*a,t[5]=i*a-e*o,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,n=i[0],s=i[1],a=i[2],o=i[3],r=.5*t.width,l=.5*t.height,h=t.x+r,c=t.y+l,d=Math.abs(r*n)+Math.abs(l*a),u=Math.abs(r*s)+Math.abs(l*o);return e||(e=new ts(0,0,0,0)),e.x=h*n+c*a+i[4]-d,e.y=h*s+c*o+i[5]-u,e.width=d+d,e.height=u+u,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(e){return t.instance.setElements(e.elements)}static updateTransformMatrix(t,e,i,n,s,a,o){const[r,l]=[0,0],h=e,c=i;let d,u;1===h&&1===c?(d=0,u=0):(d=null==(null==o?void 0:o.scalingCenterX)?r:null==o?void 0:o.scalingCenterX,u=null==(null==o?void 0:o.scalingCenterY)?l:null==o?void 0:o.scalingCenterY);const p=n,g=Math.cos(p),m=Math.sin(p);let f,y;0===p?(f=0,y=0):(f=null==(null==o?void 0:o.rotationCenterX)?r:null==o?void 0:o.rotationCenterX,y=null==(null==o?void 0:o.rotationCenterY)?l:null==o?void 0:o.rotationCenterY);const v=s,x=a,b=d*(1-h)-f,S=u*(1-c)-y;return t.setElements([g*h,m*h,-m*c,g*c,g*b-m*S+f+v,m*b+g*S+y+x]),t}static fromContext(e){const i=e.getTransform();return new t([i.a,i.b,i.c,i.d,i.e,i.f])}};as.instance=new as;var os=as,rs=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(rs||{}),ls=class t extends ss{constructor(){let{isVirtual:e,tag:i,zIndex:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.serialNumber=t._nextSerialNumber++,this.id=_n(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new os,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this._childNodeCounts={groups:0,nonGroups:0},this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=null!=e&&e,this.tag=null!=i?i:NaN,this.zIndex=null!=n?n:0}get datum(){var t,e;return null!=(e=this._datum)?e:null==(t=this._parent)?void 0:t.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}*ancestors(){let t=this;for(;t=t.parent;)yield t}*traverseUp(){yield this,yield*w(this.ancestors())}get parent(){return this._parent}get children(){return this._virtualChildren.length?this._children.concat(this._virtualChildren.flatMap((t=>t.children))):this._children}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=null!=e?e:Object.keys(t);for(const n of i)this[n]=t[n];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error("".concat(e," already belongs to another parent: ").concat(e.parent,"."));if(e.layerManager)throw new Error("".concat(e," already belongs to a scene: ").concat(e.layerManager,"."));if(this.childSet[e.id])throw new Error("Duplicate ".concat(e.constructor.name," node: ").concat(e));e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,3),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=os.flyweight(this.matrix);for(const e of this.ancestors())e.computeTransformMatrix(),t.preMultiplySelf(e.matrix);return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||1===this.pointerEvents||!this.containsPoint(t,e))return;const{children:n}=this;if(n.length>1e3)for(let s=n.length-1;s>=0;s--){const a=n[s],o=(null==(i=a.computeTransformedBBox())?void 0:i.containsPoint(t,e))?a.pickNode(t,e):void 0;if(o)return o}else if(n.length)for(let s=n.length-1;s>=0;s--){const i=n[s].pickNode(t,e);if(i)return i}else if(!this.isContainerNode)return this}getCachedBBox(){var t;return null!=(t=this.cachedBBox)?t:ts.zero}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=os.flyweight(this.matrix);for(const i of this.ancestors())i.computeTransformMatrix(),e.preMultiplySelf(i.matrix);return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:n,translationX:s,translationY:a,scalingCenterX:o,scalingCenterY:r,rotationCenterX:l,rotationCenterY:h}=this;os.updateTransformMatrix(t,e,i,n,s,a,{scalingCenterX:o,scalingCenterY:r,rotationCenterX:l,rotationCenterY:h}),this.dirtyTransform=!1}preRender(){this._childNodeCounts.groups=0,this._childNodeCounts.nonGroups=1;for(const t of this.children){const e=t.preRender();this._childNodeCounts.groups+=e.groups,this._childNodeCounts.nonGroups+=e.nonGroups}return this._childNodeCounts}render(t){const{stats:e}=t;this._dirty=0,this.cachedBBox=this.computeBBox(),e&&e.nodesRendered++}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!=t?t:{};if(0!==this._dirty||e){if(this._dirty=0,!1!==i)for(const t of this._virtualChildren)t.markClean({force:e});if(!0===i)for(const t of this._children)t.markClean({force:e})}}onVisibleChange(){}get nodeCount(){let t=1,e=this._dirty>=0||this.dirtyTransform?1:0,i=this.visible?1:0;const n=n=>{const{count:s,visibleCount:a,dirtyCount:o}=n.nodeCount;t+=s,i+=a,e+=o};for(const s of this._children)n(s);for(const s of this._virtualChildren)n(s);return{count:t,visibleCount:i,dirtyCount:e}}onZIndexChange(){this.parent&&(this.parent.dirtyZIndex=!0)}};ls._nextSerialNumber=0,x([ns({type:"transform"})],ls.prototype,"scalingX",2),x([ns({type:"transform"})],ls.prototype,"scalingY",2),x([ns({type:"transform"})],ls.prototype,"scalingCenterX",2),x([ns({type:"transform"})],ls.prototype,"scalingCenterY",2),x([ns({type:"transform"})],ls.prototype,"rotationCenterX",2),x([ns({type:"transform"})],ls.prototype,"rotationCenterY",2),x([ns({type:"transform"})],ls.prototype,"rotation",2),x([ns({type:"transform"})],ls.prototype,"translationX",2),x([ns({type:"transform"})],ls.prototype,"translationY",2),x([ns({redraw:3,changeCb:t=>t.onVisibleChange()})],ls.prototype,"visible",2),x([ns({redraw:1,changeCb:t=>t.onZIndexChange()})],ls.prototype,"zIndex",2),x([ns({redraw:1,changeCb:t=>t.onZIndexChange()})],ls.prototype,"zIndexSubOrder",2);var hs=ls,cs=t=>{const e=t<0?-1:1,i=Math.abs(t);return i<=.04045?t/12.92:e*p((i+.055)/1.055,2.4)},ds=t=>{const e=t<0?-1:1,i=Math.abs(t);return i>.0031308?e*(1.055*p(i,1/2.4)-.055):12.92*t},us=class t{constructor(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=Wn(0,t||0,1),this.g=Wn(0,e||0,1),this.b=Wn(0,i||0,1),this.a=Wn(0,n||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!t.parseHex(e):e.indexOf("rgb")>=0?!!t.stringToRgba(e):!!t.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return t.fromHexString(e);const i=t.nameToHex[e.toLowerCase()];if(i)return t.fromHexString(i);if(e.indexOf("rgb")>=0)return t.fromRgbaString(e);throw new Error("Invalid color string: '".concat(e,"'"))}static tryParseFromString(e){try{return t.fromString(e)}catch(i){return E.warnOnce("invalid color string: '".concat(e,"'.")),t.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt("".concat(t[i]).concat(t[i+1]),16));break;case 3:case 4:e=t.split("").map((t=>parseInt(t,16))).map((t=>t+16*t))}if((null==e?void 0:e.length)>=3&&e.every((t=>t>=0)))return 3===e.length&&e.push(255),e}static fromHexString(e){const i=t.parseHex(e);if(i){const[e,n,s,a]=i;return new t(e/255,n/255,s/255,a/255)}throw new Error("Malformed hexadecimal color string: '".concat(e,"'"))}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let o=0;o<t.length;o++){const n=t[o];if(e||"("!==n){if(")"===n){i=o;break}}else e=o}const n=e&&i&&t.substring(e+1,i);if(!n)return;const s=n.split(","),a=[];for(let o=0;o<s.length;o++){const t=s[o];let e=parseFloat(t);if(isNaN(e))return;t.indexOf("%")>=0?(e=Wn(0,e,100),e/=100):3===o?e=Wn(0,e,1):(e=Wn(0,e,255),e/=255),a.push(e)}return a}static fromRgbaString(e){const i=t.stringToRgba(e);if(i){if(3===i.length)return new t(i[0],i[1],i[2]);if(4===i.length)return new t(i[0],i[1],i[2],i[3])}throw new Error("Malformed rgb/rgba color string: '".concat(e,"'"))}static fromArray(e){if(4===e.length)return new t(e[0],e[1],e[2],e[3]);if(3===e.length)return new t(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=t.HSBtoRGB(e,i,n);return new t(a[0],a[1],a[2],s)}static fromHSL(e,i,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=t.HSLtoRGB(e,i,n);return new t(a[0],a[1],a[2],s)}static fromOKLCH(e,i,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=t.OKLCHtoRGB(e,i,n);return new t(a[0],a[1],a[2],s)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let e="#"+t.padHex(Math.round(255*this.r).toString(16))+t.padHex(Math.round(255*this.g).toString(16))+t.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=t.padHex(Math.round(255*this.a).toString(16))),e}toRgbaString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),"rgba(".concat(e.join(", "),")")):"rgb(".concat(e.join(", "),")")}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return t.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,e,i){const n=cs(t),s=cs(e),a=cs(i),o=Math.cbrt(.4122214708*n+.5363325363*s+.0514459929*a),r=Math.cbrt(.2119034982*n+.6806995451*s+.1073969566*a),l=Math.cbrt(.0883024619*n+.2817188376*s+.6299787005*a),h=.2104542553*o+.793617785*r-.0040720468*l,c=1.9779984951*o-2.428592205*r+.4505937099*l,d=.0259040371*o+.7827717662*r-.808675766*l,u=180*Math.atan2(d,c)/Math.PI;return[h,Math.hypot(c,d),u>=0?u:u+360]}static OKLCHtoRGB(t,e,i){const n=t,s=e*Math.cos(i*Math.PI/180),a=e*Math.sin(i*Math.PI/180),o=p(n+.3963377774*s+.2158037573*a,3),r=p(n-.1055613458*s-.0638541728*a,3),l=p(n-.0894841775*s-1.291485548*a,3),h=-1.2684380046*o+2.6097574011*r-.3413193965*l,c=-.0041960863*o-.7034186147*r+1.707614701*l;return[ds(4.0767416621*o-3.3077115913*r+.2309699292*l),ds(h),ds(c)]}static RGBtoHSL(t,e,i){const n=Math.min(t,e,i),s=Math.max(t,e,i),a=(s+n)/2;let o,r;if(s===n)o=NaN,r=0;else{const l=s-n;r=a>.5?l/(2-s-n):l/(s+n),o=s===t?(e-i)/l+(e<i?6:0):s===e?(i-t)/l+2:(t-e)/l+4,o*=60}return[o,r,a]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const n=i<.5?i*(1+e):i+e-i*e,s=2*i-n;function a(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?s+6*(n-s)*t:t<.5?n:t<2/3?s+(n-s)*(2/3-t)*6:s}return[a(t/360+1/3),a(t/360),a(t/360-1/3)]}static RGBtoHSB(t,e,i){const n=Math.min(t,e,i),s=Math.max(t,e,i);let a=NaN;if(n!==s){const o=s-n,r=(s-t)/o,l=(s-e)/o,h=(s-i)/o;a=t===s?h-l:e===s?2+r-h:4+l-r,a/=6,a<0&&(a+=1)}return[360*a,0===s?0:(s-n)/s,s]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let n=0,s=0,a=0;if(0===e)n=s=a=i;else{const o=6*(t-Math.floor(t)),r=o-Math.floor(o),l=i*(1-e),h=i*(1-e*r),c=i*(1-e*(1-r));switch(o|0){case 0:n=i,s=c,a=l;break;case 1:n=h,s=i,a=l;break;case 2:n=l,s=i,a=c;break;case 3:n=l,s=h,a=i;break;case 4:n=c,s=l,a=i;break;case 5:n=i,s=l,a=h}}return[n,s,a]}derive(e,i,n,s){const a=t.RGBtoHSB(this.r,this.g,this.b);let o=a[2];0==o&&n>1&&(o=.05);const r=((a[0]+e)%360+360)%360,l=Wn(0,a[1]*i,1);o=Wn(0,o*n,1);const h=Wn(0,this.a*s,1),c=t.HSBtoRGB(r,l,o);return c.push(h),t.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,i){const n=t.tryParseFromString(e),s=t.tryParseFromString(i);return e=>{const i=(t,i)=>t*(1-e)+i*e;return new t(i(n.r,s.r),i(n.g,s.g),i(n.b,s.b),i(n.a,s.a)).toString()}}};us.didDebug=!1,us.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});var ps=us;function gs(t,e){return i=>Number(t)*(1-i)+Number(e)*i}var ms={};v(ms,{easeIn:()=>ys,easeInOut:()=>xs,easeInOutQuad:()=>ks,easeInQuad:()=>bs,easeOut:()=>vs,easeOutQuad:()=>Ss,inverseEaseOut:()=>ws,linear:()=>fs});var fs=t=>t,ys=t=>1-Math.cos(t*Math.PI/2),vs=t=>Math.sin(t*Math.PI/2),xs=t=>-(Math.cos(t*Math.PI)-1)/2,bs=t=>t*t,Ss=t=>1-p(1-t,2),ks=t=>t<.5?2*t*t:1-p(-2*t+2,2)/2,ws=t=>2*Math.asin(t)/Math.PI,Ms=.2,Ds=["initial","remove","update","add","trailing","end","none"],Cs={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:Ms,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},Ls=(t=>(t.Loop="loop",t.Reverse="reverse",t))(Ls||{});function Rs(t){return t.every((t=>t instanceof hs))?{nodes:t,selections:[]}:{nodes:[],selections:t}}var Is=class{constructor(t){var e,i,n,s,a,o,r;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null==(e=t.autoplay)||e,this.ease=null!=(i=t.ease)?i:fs,this.phase=t.phase;const l=null!=(n=t.duration)?n:Cs[this.phase].animationDuration;this.duration=l*t.defaultDuration,this.delay=(null!=(s=t.delay)?s:0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,!0===t.skip&&(null==(a=this.onUpdate)||a.call(this,t.to,!1,this),null==(o=this.onStop)||o.call(this,this),null==(r=this.onComplete)||r.call(this,this),this.isComplete=!0),!1!==t.collapsable&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){if(t.from===t.to)return 0;return("object"===typeof t.from?be(t.from,t.to):null)?e:0}play(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e,i;this.isPlaying||this.isComplete||(this.isPlaying=!0,null==(e=this.onPlay)||e.call(this,this),this.autoplay&&(this.autoplay=!1,t&&(null==(i=this.onUpdate)||i.call(this,this.from,!0,this))))}pause(){this.isPlaying=!1}stop(){var t;this.isPlaying=!1,this.isComplete||(this.isComplete=!0,null==(t=this.onStop)||t.call(this,this))}update(t){var e,i;if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);const n=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const s=this.interpolate(this.isReverse?1-this.delta:this.delta);null==(e=this.onUpdate)||e.call(this,s,!1,this);const a=this.delay+this.duration;return this.elapsed>=a?(this.stop(),this.isComplete=!0,null==(i=this.onComplete)||i.call(this,this),t-(a-n)):0}get delta(){return this.ease(Wn(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!==typeof e||zn(e))return this.interpolateValue(t,e);const i=[];for(const n in e){const s=this.interpolateValue(t[n],e[n]);null!=s&&i.push([n,s])}return t=>{const e={};for(const[n,s]of i)e[n]=s(t);return e}}interpolateValue(t,e){if(void 0!==t&&void 0!==e){if(zn(t))return i=>t[Gn](e,i);try{switch(typeof t){case"number":return gs(t,e);case"string":return function(t,e){if("string"===typeof t)try{t=ps.fromString(t)}catch(o){t=ps.fromArray([0,0,0])}if("string"===typeof e)try{e=ps.fromString(e)}catch(o){e=ps.fromArray([0,0,0])}const i=gs(t.r,e.r),n=gs(t.g,e.g),s=gs(t.b,e.b),a=gs(t.a,e.a);return t=>ps.fromArray([i(t),n(t),s(t),a(t)]).toRgbaString()}(t,e);case"boolean":if(t===e)return()=>t}}catch(i){}throw new Error("Unable to interpolate values: ".concat(t,", ").concat(e))}}},As={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function Ts(t,e,i,n,s,a,o){const{fromFn:r,toFn:l,intermediateFn:h}=s,{nodes:c,selections:d}=Rs(n),u=(n,s)=>{var c;let d,u=0,p=0;for(const g of s){const f=n[u]===g,v={last:p>=s.length-1,lastLive:u>=n.length-1,prev:s[p-1],prevFromProps:d,prevLive:n[u-1],next:s[p+1],nextLive:n[u+(f?1:0)]},x="".concat(t,"_").concat(e,"_").concat(g.id);i.stopByAnimationId(x);let b="unknown";f?a&&o&&(b=Es(g,g.datum,a,o)):b="removed";const S=r(g,g.datum,b,v),{phase:k,start:w,finish:M,delay:D,duration:C}=S,L=y(S,["phase","start","finish","delay","duration"]),R=l(g,g.datum,b,v),{phase:I,start:A,finish:T,delay:N,duration:E}=R,O=y(R,["phase","start","finish","delay","duration"]),P=null==M&&null==T;i.animate({id:x,groupId:t,phase:null!=(c=null!=k?k:I)?c:"update",duration:null!=C?C:E,delay:null!=D?D:N,from:L,to:O,ease:vs,collapsable:P,onPlay:()=>{g.setProperties(m(m({},w),A))},onUpdate(t){g.setProperties(t),h&&g.setProperties(h(g,g.datum,b,v))},onStop:()=>{g.setProperties(m(m(m(m(m(m({},w),A),L),O),M),T))}}),f&&u++,p++,d=L}};let p=0;for(const g of d){const n=g.nodes();u(n.filter((t=>!g.isGarbage(t))),n),i.animate({id:"".concat(t,"_").concat(e,"_selection_").concat(p),groupId:t,phase:"end",from:0,to:1,ease:vs,onStop(){g.cleanup()}}),p++}u(c,c)}function Ns(t,e,i,n,s,a,o){const{nodes:r,selections:l}=Rs(n),{start:h,finish:c,phase:d}=o,u=null==c;i.animate({id:"".concat(t,"_").concat(e),groupId:t,phase:null!=d?d:"update",from:s,to:a,ease:vs,collapsable:u,onPlay:()=>{if(h){for(const t of r)t.setProperties(h);for(const t of l)for(const e of t.nodes())e.setProperties(h)}},onUpdate(t){for(const e of r)e.setProperties(t);for(const e of l)for(const i of e.nodes())i.setProperties(t)},onStop:()=>{for(const t of r)t.setProperties(m(m({},a),c));for(const t of l)for(const e of t.nodes())e.setProperties(m(m({},a),c))}})}function Es(t,e,i,n){const s=i(t,e);return n.added.has(s)?"added":n.removed.has(s)?"removed":"updated"}var Os=2*Math.PI;function Ps(t){return t%=Os,t+=Os,t%=Os}function Bs(t){return t%=Os,(t+=Os)!==Os&&(t%=Os),t}function Fs(t){return(t%=Os)<-Math.PI?t+=Os:t>=Math.PI&&(t-=Os),t}function _s(t,e,i){const n=Ps(t),s=Ps(e),a=Bs(i);return s<=a?s<=n&&n<=a:s<=n||n<=a}function Gs(t){return t/180*Math.PI}function zs(t){return t/Math.PI*180}function Ws(t,e){return t=Ps(t),(e=Ps(e))-t+(t>e?2*Math.PI:0)}function Vs(t,e,i,n){return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}}var Ks=(t,e)=>{const i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(t){this[i]!==t&&(this[i]=t,this.invalid=!0)},enumerable:!0,configurable:!1})},Ys=class t{constructor(){this.type="band",this.invalid=!0,this.interval=void 0,this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._step=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}static is(e){return e instanceof t}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&E.warnOnce("Expected update to not invalidate scale"))}set domain(t){this.invalid=!0;const e=[];this.index=new Map;const i=this.index;t.forEach((t=>{void 0===this.getIndex(t)&&i.set(t,e.push(t)-1)})),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();let{interval:t=1}=this;"number"!==typeof t&&(t=Number(t));const e=Math.abs(Math.round(t));return this._domain.filter(((t,i)=>i%e===0))}convert(t){this.refresh();const e=this.getIndex(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex((e=>e===t));return this.domain[e]}invertNearest(t){var e;this.refresh();let i=-1,n=1/0;const s=this.ordinalRange.findIndex(((e,s)=>{if(e===t)return!0;const a=Math.abs(t-e);return a<n&&(n=a,i=s),!1}));return null!=(e=this.domain[s])?e:this.domain[i]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=Wn(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=Wn(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=Wn(0,t,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,n=this._paddingOuter,[s,a]=this.range,o=a-s,r=o/Math.max(1,t+2*n-i),l=e?Math.floor(r):r,h=s+(o-l*(t-i))/2,c=e?Math.round(h):h,d=l*(1-i),u=e?Math.round(d):d,p=r*(1-i),g=[];for(let m=0;m<t;m++)g.push(c+l*m);this._bandwidth=u,this._rawBandwidth=p,this._step=l,this.ordinalRange=g}getIndex(t){if(!(t instanceof Date))return this.index.get(t);const e=t.valueOf();let i=0;for(const n of this.index.keys()){if(n instanceof Date&&n.valueOf()===e)return i;i++}}};x([Ks],Ys.prototype,"interval",2),x([Ks],Ys.prototype,"range",2),x([Ks],Ys.prototype,"round",2);var Hs=Ys;function Us(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[void 0];return Lt(((i,n,s)=>e.includes(s)?Ft(t)?t(s):t:s))}function Xs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{optional:i=!1,property:n}=e;return Lt(((s,a,o)=>{var r;const l=f(m({},e),{target:s,property:a});if(i&&"undefined"===typeof o||t(o,l))return ve(s[a])&&!ve(o)?(s[a].set(o),s[a]):o;const h=null!=n?n:String(a).replace(/^_*/,""),c=null!=(r=s.constructor.className)?r:s.constructor.name.replace(/Properties$/,"");let d=Ka(o);if(null!=d&&d.length>50){const t=d.length-50;d=d.slice(0,50)+"... (+".concat(t," characters)")}return E.warn("Property [".concat(h,"] of [").concat(c,"] cannot be set to [").concat(d,"]").concat(t.message?"; expecting ".concat(Wa(t,l)):"",", ignoring.")),Mt}),void 0,{optional:i})}var js,Zs=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const n=[];return za(((t,i)=>(n.length=0,e.every((e=>{const s=e(t,i);return s||n.push(Wa(e,i)),s})))),(()=>n.filter(Boolean).join(" AND ")))},qs=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return za(((t,i)=>e.some((e=>e(t,i)))),(t=>e.map(function(t){return e=>Wa(e,t)}(t)).filter(Boolean).join(" OR ")))},Js=Va(za(((t,e)=>ve(t)||_t(t)&&ve(e.target[e.property])),"a properties object")),Qs=Va(za((t=>_t(t)),"an object")),$s=za(Et,"a boolean"),ta=za(Ft,"a function"),ea=za(Wt,"a string"),ia=(js=za(Kt,"a number"),Object.assign(js,{restrict(){let{min:t,max:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=["a number"],n=Vt(t),s=Vt(e);return n&&s?i.push("between ".concat(t," and ").concat(e," inclusive")):n?i.push("greater than or equal to ".concat(t)):s&&i.push("less than or equal to ".concat(e)),za((i=>Kt(i)&&(!n||i>=t)&&(!s||i<=e)),i.join(" "))}})),na=za((t=>Vt(t)&&isNaN(t)),"NaN"),sa=ia.restrict({min:0}),aa=ia.restrict({min:0,max:1}),oa=ia.restrict({min:-360,max:360}),ra=qs(ia,na),la=function(t){return Object.assign(t,{restrict(){let{length:t,minLength:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i="an array";return Vt(e)&&e>0?i="a non-empty array":Vt(t)&&(i="an array of length ".concat(t)),za((i=>Nt(i)&&(!Vt(t)||i.length===t)&&(!Vt(e)||i.length>=e)),i)}})}(za(Nt,"an array")),ha=(t,e)=>za(((e,i)=>Nt(e)&&e.every((e=>t(e,i)))),(t=>{var i;const n=null!=(i=Wa(la,t))?i:"";return e?"".concat(n," of ").concat(e):n})),ca=t=>Kt(t)||Pt(t),da=t=>za(((e,i)=>!ca(e)||!ca(i.target[t])||e<i.target[t]),"to be less than ".concat(t)),ua=t=>za(((e,i)=>!ca(e)||!ca(i.target[t])||e>i.target[t]),"to be greater than ".concat(t)),pa=za(Pt,"Date object"),ga=qs(pa,sa),ma="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",fa=za((t=>Wt(t)&&ps.validColorString(t)),"color String. ".concat(ma)),ya=za(ha(fa),"color strings. ".concat(ma)),va=ha($s,"boolean values"),xa=ha(ia,"numbers"),ba=ha(ea,"strings"),Sa=za(ha(pa),"Date objects"),ka=za(ha(Js),"objects"),wa=Fa(["butt","round","square"],"a line cap"),Ma=Fa(["round","bevel","miter"],"a line join"),Da=za(ha(sa),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Ca=Fa(["top","right","bottom","left"],"a position"),La=Fa(["normal","italic","oblique"],"a font style"),Ra=qs(Fa(["normal","bold","bolder","lighter"],"a font weight"),ia.restrict({min:1,max:1e3})),Ia=Fa(["never","always","hyphenate","on-space"],"a text wrap strategy"),Aa=Fa(["left","center","right"],"a text align"),Ta=Fa(["top","middle","bottom"],"a vertical align"),Na=Fa(["ellipsis","hide"],"an overflow strategy"),Ea=Fa(["horizontal","vertical"],"a direction"),Oa=Fa(["inside","outside"],"a placement"),Pa=qs(Fa(["exact","nearest"],"interaction range"),ia),Ba=Fa(["top","bottom","left","right"]);function Fa(t){return za((e=>t.includes(e)),"".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a"," keyword such as ").concat(function(t){const e=t.map((t=>"'".concat(t,"'")));if(1===e.length)return e[0];const i=e.pop();return"".concat(e.join(", ")," or ").concat(i)}(t)))}var _a=qs(Zs(ia.restrict({min:1}),da("maxSpacing")),na),Ga=qs(Zs(ia.restrict({min:1}),ua("minSpacing")),na);function za(t,e){return t.message=e,t}function Wa(t,e){return Ft(t.message)?t.message(e):t.message}function Va(t){return Object.assign(t,{restrict:e=>za((t=>t instanceof e),(i=>{var n;return null!=(n=Wa(t,i))?n:"an instance of ".concat(e.name)}))})}function Ka(t){if("number"===typeof t){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}return JSON.stringify(t)}var Ya=za((t=>Kt(t)&&t>0||t instanceof O),"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),Ha=class extends fe{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0}};x([Xs($s)],Ha.prototype,"enabled",2),x([Xs(sa)],Ha.prototype,"width",2),x([Xs(sa)],Ha.prototype,"size",2),x([Xs(fa,{optional:!0})],Ha.prototype,"color",2),x([Xs(Ya,{optional:!0})],Ha.prototype,"interval",2),x([Xs(la,{optional:!0})],Ha.prototype,"values",2);var Ua=(t=>(t.X="x",t.Y="y",t))(Ua||{}),Xa={constructedArrays:new WeakMap};function ja(t,e){var i;null==(i=Xa.constructedArrays)||i.set(t,e)}var Za=class t{constructor(e,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=t.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=e,this.range=i}static is(e){return e instanceof t}transform(t){return t}transformInvert(t){return t}calcBandwidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const{range:e}=this,i=this.getDomain(),n=Math.abs(e[1]-e[0]),s=Math.abs(i[1]-i[0])/t+1,a=Math.floor(n),o=Math.min(s,a);return n/Math.max(1,o)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,e){var i;const n=null!=(i=null==e?void 0:e.clampMode)?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const s=this.getDomain().map((t=>this.transform(t))),[a,o]=s,{range:r}=this,[l,h]=r;if(t=this.transform(t),"clamped"===n){const[e,i]=Kn(s.map(Number));if(Number(t)<e)return l;if(Number(t)>i)return h}return a===o?(l+h)/2:t===a?l:t===o?h:l+(Number(t)-Number(a))/(Number(o)-Number(a))*(h-l)}invert(t){this.refresh();const e=this.getDomain().map((t=>this.transform(t))),[i,n]=e,{range:s}=this,[a,o]=s,r=a>o;let l;return t<(r?o:a)?r?n:i:t>(r?a:o)?r?i:n:(l=a===o?this.toDomain((Number(i)+Number(n))/2):this.toDomain(Number(i)+(t-a)/(o-a)*(Number(n)-Number(i))),this.transformInvert(l))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&E.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const[t,e]=this.range;return Math.abs(e-t)}};Za.defaultTickCount=5,Za.defaultMaxTickCount=6,x([Ks],Za.prototype,"domain",2),x([Ks],Za.prototype,"range",2),x([Ks],Za.prototype,"nice",2),x([Ks],Za.prototype,"interval",2),x([Ks],Za.prototype,"tickCount",2),x([Ks],Za.prototype,"minTickCount",2),x([Ks],Za.prototype,"maxTickCount",2);var qa=Za,Ja={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Qa(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(t.getFullYear(),0,1);const i=t.getTimezoneOffset()-e.getTimezoneOffset(),n=t.getTime()-e.getTime()+6e4*i;return Math.floor(n/864e5)}function $a(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,n=new Date(t.getFullYear(),0,i+1);return n<=t?Math.floor(Qa(t,n)/7)+1:0}function to(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getFullYear();const i=new Date(e,0,1).getDay(),n=new Date(e,0,(4-i+7)%7-3+1);return n<=t?Math.floor(Qa(t,n)/7)+1:to(t,e-1)}var eo={a:t=>Ja.shortDays[t.getDay()],A:t=>Ja.days[t.getDay()],b:t=>Ja.shortMonths[t.getMonth()],B:t=>Ja.months[t.getMonth()],c:"%x, %X",d:(t,e)=>no(t.getDate(),2,null!=e?e:"0"),e:"%_d",f:(t,e)=>no(1e3*t.getMilliseconds(),6,null!=e?e:"0"),H:(t,e)=>no(t.getHours(),2,null!=e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":no(i,2,null!=e?e:"0")},j:(t,e)=>no(Qa(t)+1,3,null!=e?e:"0"),m:(t,e)=>no(t.getMonth()+1,2,null!=e?e:"0"),M:(t,e)=>no(t.getMinutes(),2,null!=e?e:"0"),L:(t,e)=>no(t.getMilliseconds(),3,null!=e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>no(t.getSeconds(),2,null!=e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>no($a(t,0),2,null!=e?e:"0"),V:(t,e)=>no(to(t),2,null!=e?e:"0"),w:(t,e)=>no(t.getDay(),2,null!=e?e:"0"),W:(t,e)=>no($a(t,1),2,null!=e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>no(t.getFullYear()%100,2,null!=e?e:"0"),Y:(t,e)=>no(t.getFullYear(),4,null!=e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return"".concat(e>0?"-":"+").concat(no(Math.floor(i/60),2,"0")).concat(no(Math.floor(i%60),2,"0"))}(t),"%":()=>"%"},io={_:" ",0:"0","-":""};function no(t,e,i){const n=String(Math.floor(t));return n.length>=e?n:"".concat(i.repeat(e-n.length)).concat(n)}function so(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const n=i>0?t.substring(0,i):t;e.push(n)}if(i<0)break;const n=t[i+1],s=io[n];null!=s&&i++;const a=t[i+1],o=eo[a];if("function"===typeof o)e.push([o,s]);else if("string"===typeof o){const t=so(o);e.push([t,s])}else e.push("".concat(null!=s?s:"").concat(a));t=t.substring(i+2)}return t=>{const i="number"===typeof t?new Date(t):t;return e.map((t=>"string"===typeof t?t:t[0](i,t[1]))).join("")}}function ao(t){return t instanceof Date?t.getTime():t}function oo(t,e){const i=ro(t,e);return t=>so(i)(t)}function ro(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=8;const n=t=>{t<i&&(i=t)};for(const l of t){n(lo(l))}const s=ao(e[0]),a=ao(e.at(-1)),o=new Date(s).getFullYear(),r=new Date(a).getFullYear();return function(t,e,i){const n=ao(i[0]),s=ao(i.at(-1)),a=Math.abs(s-n),o=e||8===t,r=[["hour",216e5,12096e5,3,"%I %p"],["hour",G,216e5,3,"%I:%M"],["second",1e3,216e5,1,":%S"],["ms",0,216e5,0,".%L"],["am/pm",G,216e5,3,"%p"]," ",["day",W,6048e5,4,"%a"],["month",0===a?0:V,314496e5,5,"%b %d"],["month",3024e6,31536e7,6,"%B"]," ",["year",o?0:Y,1/0,8,"%Y"]].filter((e=>{if("string"===typeof e)return!0;const[i,n,s,o]=e;return o>=t&&n<=a&&a<s})).reduce(((t,e)=>("string"===typeof e?t.result.push(e):t.used.has(e[0])||(t.result.push(e),t.used.add(e[0])),t)),{result:[],used:new Set}).result,l=r.findIndex((t=>"string"!==typeof t)),h=r.length-[...r].reverse().findIndex((t=>"string"!==typeof t));return r.slice(l,h).map((t=>"string"===typeof t?t:t[4])).join("").replaceAll(/\s+/g," ").trim()}(i,r-o>0,t)}function lo(t){return X.floor(t)<t?0:q.floor(t)<t?1:$.floor(t)<t?2:et.floor(t)<t?3:ut.floor(t)<t?ct.floor(t)<t?4:5:gt.floor(t)<t?6:8}var ho=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.assign(e,{fractionDigits:t})};function co(t,e,i,n,s){if(i<2)return go(t,e,e-t);const a=po(t,e,i,n,s);return isNaN(a)?ho(0):go(t=Math.ceil(t/a)*a,e=Math.floor(e/a)*a,a)}var uo=[1,2,5,10];function po(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const a=Math.abs(e-t),o=a/i,r=Math.floor(Math.log10(o)),l=Math.pow(10,r),h=uo.map((t=>{const e=t*l,o=Math.ceil(a/e);return{multiplier:t,isWithinBounds:o>=n&&o<=s,diffCount:Math.abs(o-i)}})).sort(((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount))[0].multiplier;return!h||isNaN(h)?NaN:h*l}function go(t,e,i){const n=Math.min(t,e),s=Math.max(t,e),a=qn(i),o=Math.pow(10,a),r=Math.ceil((s-n)/i),l=ho(a);for(let h=0;h<=r;h++){const t=n+i*h;l.push(Math.round(t*o)/o)}return l}function mo(t){let{start:e,stop:i,interval:n,count:s,availableRange:a}=t;return null!=s||(s=(i-e)/("number"===typeof n?n:1)),s>=a&&(E.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}var fo=class t extends qa{constructor(){super([],[0,1]),this.type="time"}toDomain(t){return new Date(t)}static getTickInterval(e){let i,n,{start:s,stop:a,count:o,minCount:r,maxCount:l,target:h}=e;const c=null!=o?o:qa.defaultTickCount,d=null!=h?h:Math.abs(a-s)/Math.max(c,1),u=t.getIntervalIndex(d);if(0===u)n=Math.max(po(s,a,c,r,l),1),i=F;else if(u===t.tickIntervals.length){n=void 0===h?po(s/Y,a/Y,c,r,l):1,i=gt}else{const e=d-t.tickIntervals[u-1][2]<t.tickIntervals[u][2]-d?u-1:u;[i,n]=t.tickIntervals[e]}return i.every(n)}static getIntervalIndex(e){let i=0;for(;i<t.tickIntervals.length&&e>t.tickIntervals[i][2];)i++;return i}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[e,i]=this.getDomain().map(ao),n=Math.min(e,i),s=Math.max(e,i),{interval:a,nice:o,tickCount:r,minTickCount:l,maxTickCount:h}=this;if(void 0!==a){const e=this.getPixelRange(),i=t.getTicksForInterval({start:n,stop:s,interval:a,availableRange:e});return null!=i?i:t.getDefaultTicks({start:n,stop:s,tickCount:r,minTickCount:l,maxTickCount:h})}if(o){if(2===r)return this.niceDomain;if(1===r)return this.niceDomain.slice(0,1)}return t.getDefaultTicks({start:n,stop:s,tickCount:r,minTickCount:l,maxTickCount:h})}static getDefaultTicks(e){let{start:i,stop:n,tickCount:s,minTickCount:a,maxTickCount:o}=e;const r=t.getTickInterval({start:i,stop:n,count:s,minCount:a,maxCount:o});return r?r.range(new Date(i),new Date(n)):[]}static getTicksForInterval(e){let{start:i,stop:n,interval:s,availableRange:a}=e;if(!s)return[];if(s instanceof O){const t=s.range(new Date(i),new Date(n));if(mo({start:i,stop:n,interval:s,count:t.length,availableRange:a}))return;return t}const o=Math.abs(s);if(mo({start:i,stop:n,interval:o,availableRange:a}))return;const r=[...t.tickIntervals];r.reverse();const l=r.find((t=>o%t[2]===0));if(l){return l[0].every(o/(l[2]/l[1])).range(new Date(i),new Date(n))}let h=new Date(i);const c=new Date(n),d=[];for(;h<=c;)d.push(h),h=new Date(h),h.setMilliseconds(h.getMilliseconds()+o);return d}tickFormat(t){let{ticks:e,domain:i,specifier:n}=t;return null==n?oo(e,i):so(n)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,n]=this.niceDomain;if(ao(t)===ao(i)&&ao(e)===ao(n))break;t=i,e=n}}updateNiceDomainIteration(e,i){const n=Math.min(ao(e),ao(i)),s=Math.max(ao(e),ao(i)),a=e>i,{interval:o}=this;let r;if(o instanceof O)r=o;else{const e="number"===typeof o?(s-n)/Math.max(o,1):this.tickCount;r=t.getTickInterval({start:n,stop:s,count:e,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const t=r.range(new Date(n),new Date(s),!0),e=a?[...t].reverse():t,i=e[0],o=e.at(-1);this.niceDomain=[i,o]}}};fo.tickIntervals=[[X,1,_],[X,5,5e3],[X,15,15e3],[X,30,3e4],[q,1,G],[q,5,3e5],[q,15,9e5],[q,30,18e5],[$,1,z],[$,3,108e5],[$,6,216e5],[$,12,432e5],[et,1,W],[et,2,1728e5],[ct,1,V],[ct,2,12096e5],[ct,3,18144e5],[ut,1,K],[ut,2,5184e6],[ut,3,7776e6],[ut,4,10368e6],[ut,6,15552e6],[gt,1,Y]];var yo=fo,vo=class t extends Hs{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=qa.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this.index=new Map,this._domain=[]}static is(e){return e instanceof t}toDomain(t){return new Date(t)}set domain(t){if(this.invalid=!0,0===t.length)return void(this._domain=[]);const e=this.updateIndex(t);this._domain=e}get domain(){return this._domain}updateIndex(t){this.index=new Map;const{index:e}=this,i=[],n=[],s=t[0]>t.at(-1),a=s?0:1;t.forEach(((o,r)=>{const l=t[r+1],h=s?o:this.toDomain(ao(o)+1),c=s?this.toDomain(ao(l)+1):l,d=s?[c,h]:[h,c];i.push(o),void 0!==l&&void 0===e.get(d)&&(n.push(Math.abs(ao(c)-ao(h))),e.set(d,r+a))})),n.sort(((t,e)=>t-e));const o=n.length,r=Math.floor(o/2);this.medianInterval=o>2&&o%2===0?(n[r-1]+n[r+1])/2:n[r];const l=Math.max(0,yo.getIntervalIndex(this.medianInterval)-1),[h,c]=yo.tickIntervals[l],d=h.every(c),u=s?t.length-1:0,p=t[u],g=[d.floor(t[u]),p];return e.set(g,u),i}ticks(){if(!this.domain)return[];this.refresh();const[t,e]=[ao(this.domain[0]),ao(this.domain.at(-1))],i=Math.min(t,e),n=Math.max(t,e),s=t>e;let a;void 0!==this.interval&&(a=this.getTicksForInterval({start:i,stop:n,interval:this.interval}));const o=this.domain.length,{maxTickCount:r,tickCount:l}=this;let h,{minTickCount:c}=this;isFinite(r)&&o<=r&&(c=Math.max(1,o),h=this.medianInterval),null!=a||(a=this.getDefaultTicks({start:i,stop:n,tickCount:l,minTickCount:c,maxTickCount:r,isReversed:s,interval:h}));const d=new Set;return a.filter((t=>{const e=this.convert(t);return!isNaN(e)&&!d.has(e)&&(d.add(e),!0)}))}getDefaultTicks(t){let{start:e,stop:i,tickCount:n,minTickCount:s,maxTickCount:a,isReversed:o,interval:r}=t;const l=yo.getTickInterval({start:e,stop:i,count:n,minCount:s,maxCount:a,target:r});if(!l)return[];const h=Math.ceil(this.domain.length/a),c=[];for(const[d,u]of this.index.entries()){if(u%h>0)continue;const t=o?l.ceil(d[0]):l.floor(d[1]);c.splice(u,0,t)}return c}getTicksForInterval(t){let{start:e,stop:i,interval:n}=t;var s;const[a,o]=this.range,r=Math.abs(o-a);return null!=(s=yo.getTicksForInterval({start:e,stop:i,interval:n,availableRange:r}))?s:[]}convert(t){if("number"===typeof t&&(t=new Date(t)),!(t instanceof Date))return NaN;let e;this.refresh();for(const[n,s]of this.index.entries())if(t>=n[0]&&t<=n[1]){e=s;break}if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}tickFormat(t){let{ticks:e,domain:i,specifier:n}=t;return null==n?oo(e,i):so(n)}invert(t){return new Date(super.invert(t))}invertNearest(t){return new Date(super.invertNearest(t))}};x([Ks],vo.prototype,"tickCount",2),x([Ks],vo.prototype,"minTickCount",2),x([Ks],vo.prototype,"maxTickCount",2),x([Ks],vo.prototype,"interval",2);var xo=vo;function bo(t,e){return"number"===typeof t&&"number"===typeof e?t-e:"string"===typeof t&&"string"===typeof e?t.localeCompare(e):null==t&&null==e?0:null==t?-1:null==e?1:String(t).localeCompare(String(e))}function So(t){return"function"===typeof t?t():t}function ko(t,e,i){for(const n in t){const s=i(So(t[n]),So(e[n]));if(0!==s)return s}return 0}var wo=class t extends hs{constructor(t){var e;super({isVirtual:null==t?void 0:t.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=null!=t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null==(e=this.opts)?void 0:e.name}static is(e){return e instanceof t}onZIndexChange(){var t;super.onZIndexChange(),this.layer&&(null==(t=this._layerManager)||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(t){if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");super._setLayerManager(t)}initialiseLayer(){var t;this.layer||this._layerManager&&!0===(null==(t=this.opts)?void 0:t.layer)&&(this.layer=this._layerManager.addLayer({name:this.name,zIndex:this.zIndex,zIndexSubOrder:this.zIndexSubOrder,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()}))}getComputedOpacity(){let e=1;for(const i of this.traverseUp())i instanceof t&&(e*=i.opacity);return e}getVisibility(){for(const t of this.traverseUp())if(!t.visible)return!1;return!0}onVisibleChange(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<2||null!=this.layer)&&(i=1),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),t.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}preRender(){var t,e;const i=super.preRender();return i.groups+=1,i.nonGroups-=1,!0!==(null==(t=this.opts)?void 0:t.layer)||null!=this.layer||(i.nonGroups>0&&this.initialiseLayer(),(null==(e=this.opts)?void 0:e.nonEmptyChildDerivedZIndex)&&i.nonGroups>0&&this.deriveZIndexFromChildren()),i}deriveZIndexFromChildren(){var t;const e=this.children.filter((t=>t._childNodeCounts.nonGroups>0));this.sortChildren(e);const i=e.at(-1);this.zIndex=null!=(t=null==i?void 0:i.zIndex)?t:-1/0,this.zIndexSubOrder=null==i?void 0:i.zIndexSubOrder}render(t){var e,i;const{opts:{name:n}={},_debug:s}=this,{dirty:a,dirtyZIndex:o,layer:r,children:l,clipRect:h,dirtyTransform:c}=this;let{ctx:d,forceRender:u,clipBBox:p}=t;const{resized:g,stats:y}=t,v=d.getTransform(),x=a>=2||o||g;let b=x,S=!1;for(const m of l)if(b||(b=null==m.layerManager&&m.dirty>=1),S||(S=null!=m.layerManager&&m.dirty>=1),b)break;if(n&&(null==s||s({name:n,group:this,isDirty:x,isChildDirty:b,dirtyTransform:c,renderCtx:t,forceRender:u})),c)u="dirtyTransform";else if(r){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)||(u="dirtyTransform",this.lastBBox=t)}if(!x&&!b&&!S&&!u)return n&&y&&(null==s||s({name:n,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this})),r&&y&&(y.layersSkipped++,y.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const k=this.visible;if(r){if(d=r.context,d.save(),d.setTransform(r.pixelRatio,0,0,r.pixelRatio,0,0),"dirtyTransform"!==u&&(u=b||o),u&&r.clear(),p){const{width:e,height:i,x:a,y:o}=p;null==s||s((()=>({name:n,clipBBox:p,ctxTransform:d.getTransform(),renderCtx:t,group:this}))),d.beginPath(),d.rect(a,o,e,i),d.clip()}d.setTransform(v)}else d.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(d),h){const{x:e,y:i,width:a,height:o}=h;d.save(),null==s||s((()=>({name:n,clipRect:h,ctxTransform:d.getTransform(),renderCtx:t,group:this}))),d.beginPath(),d.rect(e,i,a,o),d.clip(),p=this.matrix.transformBBox(h)}const w=this.hasVirtualChildren();o?(this.sortChildren(l),"dirtyTransform"!==u&&(u=!0)):w&&this.sortChildren(l);const M=u!==t.forceRender||p!==t.clipBBox||d!==t.ctx?f(m({},t),{ctx:d,forceRender:u,clipBBox:p}):t;let D=0;for(const m of l)m.visible&&k?u||0!==m.dirty?(d.save(),m.render(M),d.restore()):y&&(D+=m.nodeCount.count):(m.markClean(),y&&(D+=m.nodeCount.count));if(y&&(y.nodesSkipped+=D),super.render(t),h&&d.restore(),w)for(const m of this.virtualChildren)m.markClean({recursive:"virtual"});r&&(y&&y.layersRendered++,d.restore(),u&&r.snapshot(),null==(i=(e=r.context).verifyDepthZero)||i.call(e)),n&&y&&(null==s||s({name:n,result:"rendered",skipped:D,renderCtx:t,counts:this.nodeCount,group:this}))}sortChildren(t){this.dirtyZIndex=!1,t.sort(((t,e)=>{var i,n;return ko([t.zIndex,...null!=(i=t.zIndexSubOrder)?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!=(n=e.zIndexSubOrder)?n:[void 0,void 0],e.serialNumber],bo)}))}static computeBBox(t){let e=1/0,i=-1/0,n=1/0,s=-1/0;for(const a of t){if(!a.visible)continue;const t=a.computeTransformedBBox();if(!t)continue;const{x:o,y:r,width:l,height:h}=t;o<e&&(e=o),r<n&&(n=r),o+l>i&&(i=o+l),r+h>s&&(s=r+h)}return new ts(e,n,i-e,s-n)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}};wo.className="Group",x([ns({redraw:3,convertor:t=>Wn(0,t,1)})],wo.prototype,"opacity",2);var Mo=wo,Do=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.stops=t}},Co=class extends Do{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t),this.angle=e}createGradient(t,e){const{stops:i,angle:n}=this,s=Ps(Gs(n+90)),a=Math.cos(s),o=Math.sin(s),r=e.width,l=e.height,h=e.x+.5*r,c=e.y+.5*l;if(r>0&&l>0){const e=Math.sqrt(l*l+r*r)/2,n=Math.atan2(l,r);let d;d=s<Math.PI/2?s:s<Math.PI?Math.PI-s:s<1.5*Math.PI?s-Math.PI:2*Math.PI-s;const u=e*Math.abs(Math.cos(d-n)),p=t.createLinearGradient(h+a*u,c+o*u,h-a*u,c-o*u);for(const t of i)p.addColorStop(t.offset,t.color);return p}return"black"}},Lo=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,Ro=class t extends hs{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=t.defaultStyles.fill,this.stroke=t.defaultStyles.stroke,this.strokeWidth=t.defaultStyles.strokeWidth,this.lineDash=t.defaultStyles.lineDash,this.lineDashOffset=t.defaultStyles.lineDashOffset,this.lineCap=t.defaultStyles.lineCap,this.lineJoin=t.defaultStyles.lineJoin,this.opacity=t.defaultStyles.opacity,this.fillShadow=t.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:t}=this.constructor;Object.assign(this,t)}onFillChange(){const{fill:t}=this;let e;if((null==t?void 0:t.startsWith("linear-gradient"))&&(e=Lo.exec(t))){const t=parseFloat(e[1]),i=[],n=e[2],s=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=s.exec(n);)i.push(a[0]);this.gradient=new Co(i.map(((t,e)=>({color:t,offset:e/(i.length-1)}))),t)}else this.gradient=void 0}align(t,e){var i,n,s;const a=null!=(s=null==(n=null==(i=this.layerManager)?void 0:i.canvas)?void 0:n.pixelRatio)?s:1,o=Math.round(t*a)/a;return null==e?o:0===e?0:e<1?Math.ceil(e*a)/a:Math.round((e+t)*a)/a-o}fillStroke(t,e){this.renderFill(t,e),this.renderStroke(t,e)}renderFill(t,e){if(this.fill){const{globalAlpha:i}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),this.executeFill(t,e),t.globalAlpha=i}t.shadowColor="rgba(0, 0, 0, 0)"}executeFill(t,e){e?t.fill(e):t.fill()}applyFill(t){var e,i;t.fillStyle=null!=(i=null==(e=this.gradient)?void 0:e.createGradient(t,this.computeBBox()))?i:this.fill}applyFillAlpha(t){t.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(t){var e,i;const n=null!=(i=null==(e=this.layerManager)?void 0:e.canvas.pixelRatio)?i:1,s=this.fillShadow;(null==s?void 0:s.enabled)&&(t.shadowColor=s.color,t.shadowOffsetX=s.xOffset*n,t.shadowOffsetY=s.yOffset*n,t.shadowBlur=s.blur*n)}renderStroke(t,e){if(this.stroke&&this.strokeWidth){const{globalAlpha:i}=t;t.strokeStyle=this.stroke,t.globalAlpha*=this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),this.executeStroke(t,e),t.globalAlpha=i}}executeStroke(t,e){e?t.stroke(e):t.stroke()}containsPoint(t,e){return this.isPointInPath(t,e)}};Ro.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},x([ns({redraw:2})],Ro.prototype,"fillOpacity",2),x([ns({redraw:2})],Ro.prototype,"strokeOpacity",2),x([ns({redraw:2,changeCb:t=>t.onFillChange()})],Ro.prototype,"fill",2),x([ns({redraw:2})],Ro.prototype,"stroke",2),x([ns({redraw:2})],Ro.prototype,"strokeWidth",2),x([ns({redraw:2})],Ro.prototype,"lineDash",2),x([ns({redraw:2})],Ro.prototype,"lineDashOffset",2),x([ns({redraw:2})],Ro.prototype,"lineCap",2),x([ns({redraw:2})],Ro.prototype,"lineJoin",2),x([ns({redraw:2,convertor:t=>Wn(0,t,1)})],Ro.prototype,"opacity",2),x([ns({redraw:2,checkDirtyOnAssignment:!0})],Ro.prototype,"fillShadow",2);var Io=Ro,Ao=class extends Io{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new ts(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:n,stats:s}=t;if(0===this.dirty&&!n)return void(s&&(s.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:a,y1:o,x2:r,y2:l}=this;a=this.align(a),o=this.align(o),r=this.align(r),l=this.align(l);const{fill:h,opacity:c,isRange:d}=this;if(!(!d||!h)){const{fillOpacity:t}=this;i.fillStyle=h,i.globalAlpha=c*t,i.beginPath(),i.moveTo(a,o),i.lineTo(r,o),i.lineTo(r,l),i.lineTo(a,l),i.closePath(),i.fill()}const{stroke:u,strokeWidth:p,startLine:g,endLine:m}=this;if(!(!g&&!m||!u||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:n,lineCap:s,lineJoin:h}=this;i.strokeStyle=u,i.globalAlpha=c*t,i.lineWidth=p,e&&i.setLineDash(e),n&&(i.lineDashOffset=n),s&&(i.lineCap=s),h&&(i.lineJoin=h),i.beginPath(),g&&(i.moveTo(a,o),i.lineTo(r,o)),m&&(i.moveTo(r,l),i.lineTo(a,l)),i.stroke()}null==(e=this.fillShadow)||e.markClean(),super.render(t)}};Ao.className="Range",Ao.defaultStyles=f(m({},Io.defaultStyles),{strokeWidth:1}),x([ns({redraw:2})],Ao.prototype,"x1",2),x([ns({redraw:2})],Ao.prototype,"y1",2),x([ns({redraw:2})],Ao.prototype,"x2",2),x([ns({redraw:2})],Ao.prototype,"y2",2),x([ns({redraw:2})],Ao.prototype,"startLine",2),x([ns({redraw:2})],Ao.prototype,"endLine",2),x([ns({redraw:2})],Ao.prototype,"isRange",2);var To=new WeakMap,No=new WeakMap;function Eo(t,e){var i,n,s;const a=JSON.stringify(t,null,0);return To.has(e)||To.set(e,new Map),(null==(i=To.get(e))?void 0:i.has(a))||null==(n=To.get(e))||n.set(a,e(t)),null==(s=To.get(e))?void 0:s.get(a)}function Oo(t){return function(e){var i,n,s;const a=JSON.stringify(e,null,0);if(No.has(t)||No.set(t,new Map),!(null==(i=No.get(t))?void 0:i.has(a))){for(var o=arguments.length,r=new Array(o>1?o-1:0),l=1;l<o;l++)r[l-1]=arguments[l];null==(n=No.get(t))||n.set(a,t(e,...r))}return null==(s=No.get(t))?void 0:s.get(a)}}function Po(t){const{redraw:e=3,changeCb:i}=null!=t?t:{};return ns({redraw:e,type:"font",changeCb:i})}var Bo=class t extends Io{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=t.defaultStyles.textAlign,this.textBaseline=t.defaultStyles.textBaseline}onTextChange(){var t,e;this.lines=null!=(e=null==(t=this.text)?void 0:t.split("\n").map((t=>t.trim())))?e:[]}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Go(this)),this._font}computeBBox(){const{x:e,y:i,lines:n,lineHeight:s,textBaseline:a,textAlign:o}=this,{top:r,left:l,width:h,height:c}=t.getTextSizeMultiline(n,Go(this),a,o,s);return new ts(e-l,i-r,h,c)}getLineHeight(e){var i,n;if(this.lineHeight)return this.lineHeight;const s=t.measureText(e,this.font,this.textBaseline,this.textAlign);return(null!=(i=s.fontBoundingBoxAscent)?i:s.emHeightAscent)+(null!=(n=s.fontBoundingBoxDescent)?n:s.emHeightDescent)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(0===this.dirty&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:s,stroke:a,strokeWidth:o}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const r=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(s){e.fillStyle=s,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null==t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*r,e.shadowOffsetY=t.yOffset*r,e.shadowBlur=t.blur*r),this.renderLines(((t,i,n)=>e.fillText(t,i,n)))}if(a&&o){e.strokeStyle=a,e.lineWidth=o,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:n,lineJoin:s}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),n&&(e.lineCap=n),s&&(e.lineJoin=s),this.renderLines(((t,i,n)=>e.strokeText(t,i,n)))}super.render(t)}renderLines(e){const{lines:i,x:n,y:s}=this,a=i.map((t=>this.getLineHeight(t))),o=a.reduce(((t,e)=>t+e),0);let r=(a[0]-o)*t.getVerticalModifier(this.textBaseline);for(let t=0;t<i.length;t++)e(i[t],n,s+r),r+=a[t]}static wrapLines(e,i,n,s,a,o){const r="hide"!==o,l=new _o(s),h=e.split(/\r?\n/g);if(0===h.length)return{lines:void 0,truncated:!1};if("never"===a){const{text:e,truncated:n}=t.truncateLine(h[0],i,l,r?"auto":"never");return{lines:null!=e?[e]:void 0,truncated:n}}const c=[];let d=0,u=!1;for(const p of h){const e=t.wrapLine(p,i,n,l,s,a,d,r);if(null==e)return{lines:void 0,truncated:!1};if(c.push(...e.result),d=e.cumulativeHeight,e.truncated){u=!0;break}}return{lines:c,truncated:u}}static wrap(e,i,n,s,a){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"ellipsis";var r;const{lines:l,truncated:h}=t.wrapLines(e,i,n,s,a,o);return{text:null!=(r=null==l?void 0:l.join("\n").trim())?r:"",truncated:h}}static wrapLine(e,i,n,s,a,o,r,l){if(!(e=e.trim()))return{result:[],truncated:!1,cumulativeHeight:r};const h=s.size(e);if(h.width<=i)return{result:[e],truncated:!1,cumulativeHeight:r+h.height};if(h.height>n||s.width("W")>i)return l?{result:[],truncated:!0,cumulativeHeight:r}:void 0;const c=e.split(/\s+/g),d=t.wrapLineSequentially(c,i,n,s,a,o,r,l);if(null==d)return;r=d.cumulativeHeight;let{lines:u}=d;if(!d.wordsBrokenOrTruncated&&!d.linesTruncated){const e=d.lines.length,n=t.wrapLineBalanced(c,i,s,e);n.length===u.length&&(u=n)}return{result:u.map((t=>t.join(" "))),truncated:d.linesTruncated,cumulativeHeight:r}}static breakWord(e,i,n,s,a){const o=i=>t.punctuationMarks.includes(e[i]),r=s?a.width("-"):0,l=[];let h=0,c=0;for(let t=0;t<e.length;t++){const s=e[t],o=a.width(s);h+o+r>(0===c?i:n)&&(l.push(t),h=0,c++),h+=o}const d=[];let u=0;for(const t of l){let i=e.substring(u,t);s&&i.length>0&&!o(t-1)&&!o(t)&&(i+="-"),d.push(i),u=t}return d.push(e.substring(u)),d}static truncateLine(t,e,i,n){t=t.trimEnd();const s=i.width(t);if(s>e&&"never"===n)return{text:void 0,truncated:!1};if(s<=e&&"force"!==n)return{text:t,truncated:!1};const a=i.width("\u2026");let o=t,r=s;for(;o.length>0&&r+a>e;)o=o.slice(0,-1).trimEnd(),r=i.width(o);return r+a<=e?{text:"".concat(o).concat("\u2026"),truncated:!0}:{text:void 0,truncated:!1}}static wrapLineSequentially(e,i,n,s,a,o,r,l){const{fontSize:h=0,lineHeight:c=h*t.defaultLineHeightRatio}=a,d="always"===o||"hyphenate"===o,u="hyphenate"===o,p=s.width(" ");let g=!1,m=!1;const f=[];let y=[],v=0;const x=()=>({lines:f,linesTruncated:m,wordsBrokenOrTruncated:g,cumulativeHeight:r}),b=()=>{if(!l)return;const e=y.join(" "),{text:n}=t.truncateLine(e,i,s,"force");return null!=n?(y.splice(0,y.length,n),m=!0,x()):void 0},S=()=>{const t=r+c;return!(t>=n)&&(y=[],v=0,r=t,f.push(y),!0)};if(!S())return b();for(let k=0;k<e.length;k++){const n=e[k],a=s.width(n),o=0===y.length?0:p,r=v+o+a;if(r<=i)y.push(n),v=r;else if(a<=i){if(!S())return b();y.push(n),v=a}else{if(g=!0,!d){if(l){if(!S())return b();const{text:a}=t.truncateLine(n,i,s,"force");if(null==a)return;y.push(a),k<e.length-1&&(m=!0);break}return}{const e=i-v-o,a=t.breakWord(n,e,i,u,s);for(let t=0;t<a.length;t++){const e=a[t];if(e&&y.push(e),t===a.length-1)v=s.width(e);else if(!S())return b()}}}}return x()}static wrapLineBalanced(t,e,i,n){const s=t.reduce(((t,e)=>t+i.width(e)),0),a=i.width(" "),o=(s+a*(t.length-n-2))/n,r=[];let l=[],h=i.width(t[0]),c=!0;for(const d of t){const t=i.width(d);if(c){l=[],l.push(d),h=t,c=!1,r.push(l);continue}const n=h+a+t;n<=o?(l.push(d),h=n):n<=e?(l.push(d),c=!0):(l=[d],h=t,r.push(l))}return r}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}static getVerticalModifier(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}static get textContext(){if(!this._textContext){const t=wn("canvas");t.width=0,t.height=0,this._textContext=t.getContext("2d")}return this._textContext}static measureText(t,e,i,n){return this._measureText({text:t,font:e,textBaseline:i,textAlign:n})}static getTextSize(t,e){return this._getTextSize({text:t,font:e})}static getTextSizeMultiline(e,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.defaultStyles.textBaseline,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.defaultStyles.textAlign,a=arguments.length>4?arguments[4]:void 0;var o,r;let l=0,h=0,c=0,d=0,u=0;for(const[t,p]of e.entries()){const a=this._measureText({text:p,font:i,textBaseline:n,textAlign:s});h=Math.max(h,a.actualBoundingBoxLeft),c=Math.max(c,a.width),0==t?(l+=a.actualBoundingBoxAscent,d+=a.actualBoundingBoxAscent):u+=null!=(o=a.fontBoundingBoxAscent)?o:a.emHeightAscent,t==e.length-1?d+=a.actualBoundingBoxDescent:u+=null!=(r=a.fontBoundingBoxDescent)?r:a.emHeightDescent}return null!=a&&(u=(e.length-1)*a),d+=u,l+=u*t.getVerticalModifier(n),{top:l,left:h,width:c,height:d}}};Bo.className="Text",Bo.defaultLineHeightRatio=1.15,Bo.defaultStyles=Object.assign({},Io.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),Bo.ellipsis="\u2026",Bo.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],Bo._measureText=Oo((t=>{let{text:e,font:i,textBaseline:n,textAlign:s}=t;const a=Bo.textContext;return a.font!==i&&(a.font=i),a.textBaseline!==n&&(a.textBaseline=n),a.textAlign!==s&&(a.textAlign=s),a.measureText(e)})),Bo._getTextSize=Oo((t=>{let{text:e,font:i}=t;const n=Bo.textContext;n.font!==i&&(n.font=i);const s=n.measureText(e);return{width:s.width,height:s.actualBoundingBoxAscent+s.actualBoundingBoxDescent}})),x([ns({redraw:3})],Bo.prototype,"x",2),x([ns({redraw:3})],Bo.prototype,"y",2),x([ns({redraw:3,changeCb:t=>t.onTextChange()})],Bo.prototype,"text",2),x([Po()],Bo.prototype,"fontStyle",2),x([Po()],Bo.prototype,"fontWeight",2),x([Po()],Bo.prototype,"fontSize",2),x([Po()],Bo.prototype,"fontFamily",2),x([ns({redraw:3})],Bo.prototype,"textAlign",2),x([ns({redraw:3})],Bo.prototype,"textBaseline",2),x([ns({redraw:3})],Bo.prototype,"lineHeight",2);var Fo=Bo,_o=class{constructor(t){this.font=Wt(t)?t:Go(t)}size(t){return t.includes("\n")?Fo.getTextSizeMultiline(t.split("\n").map((t=>t.trim())),this.font):Fo.getTextSize(t,this.font)}width(t){const{width:e}=this.size(t);return e}};function Go(t){const{fontFamily:e,fontSize:i,fontStyle:n,fontWeight:s}=t;return[null!=n?n:"",null!=s?s:"",i+"px",e].join(" ").trim()}var zo=class extends fe{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Go(this)}};function Wo(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,n=t.rotation?Ps(Gs(t.rotation)):0,s=!n&&e>=0&&e<=Math.PI?-1:1,a=!n&&i>=0&&i<=Math.PI?-1:1;let o=0;return t.parallel?o=s*Math.PI/2:-1===a&&(o=Math.PI),{configuredRotation:n,defaultRotation:o,parallelFlipFlag:s,regularFlipFlag:a}}function Vo(t,e,i,n,s){const a=e>0&&e<=Math.PI,o=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(n*(a||o?-1:1)===-1)return"end"}else if(n*s===-1)return"end";return"start"}function Ko(t,e,i,n,s){const{width:a,height:o}=e,r=new ts(i,n,0,0);s.transformBBox(r,e);const{x:l,y:h}=e;return e.width=a,e.height=o,{point:{x:l,y:h},label:{text:t,width:a,height:o}}}x([Xs($s)],zo.prototype,"enabled",2),x([Xs(fa,{optional:!0})],zo.prototype,"color",2),x([Xs(La,{optional:!0})],zo.prototype,"fontStyle",2),x([Xs(Ra,{optional:!0})],zo.prototype,"fontWeight",2),x([Xs(sa)],zo.prototype,"fontSize",2),x([Xs(ea)],zo.prototype,"fontFamily",2),x([Xs(ta,{optional:!0})],zo.prototype,"formatter",2);var Yo=(t=>(t[t.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=2]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",t[t.SERIES_HIGHLIGHT_ZINDEX=5]="SERIES_HIGHLIGHT_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=6]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=7]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=8]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=9]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.SERIES_ANNOTATION_ZINDEX=10]="SERIES_ANNOTATION_ZINDEX",t[t.LEGEND_ZINDEX=11]="LEGEND_ZINDEX",t[t.NAVIGATOR_ZINDEX=12]="NAVIGATOR_ZINDEX",t))(Yo||{});function Ho(t){return null!=t&&Object.hasOwn(t,"toString")&&Wt(t.toString())}function Uo(t){return null!=t&&Object.hasOwn(t,"valueOf")&&Kt(t.valueOf())}function Xo(t){return Kt(t)||Pt(t)||Uo(t)}function jo(t,e){return null!=t&&(!e||Xo(t))}function Zo(t){return Ho(t)&&Object.hasOwn(t,"id")?t.id:t}var qo=t=>"value"===t?za(((t,e)=>"line"===e.target.type),(t=>"range"===t.target.type?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'")):za(((t,e)=>"range"===e.target.type),(t=>"line"===t.target.type?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'")),Jo=(t,e,i,n)=>{const s="line"===t&&void 0!==e,a="range"===t&&void 0!==i;if(!s&&!a)return!0;const[o,r]=null!=i?i:[e,void 0],l=qa.is(n)||xo.is(n),h=jo(o,l)&&!isNaN(n.convert(o)),c=jo(r,l)&&!isNaN(n.convert(r));if(s&&h||a&&h&&c)return!0;const d=["Expecting crossLine"];return a?(h||d.push("range start ".concat(Ka(o))),c||d.push("".concat(h?"":"and ","range end ").concat(Ka(r)))):d.push("value ".concat(Ka(o))),d.push("to match the axis scale domain."),E.warnOnce(d.join(" ")),!1},Qo={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},$o={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function tr(t){let{yDirection:e,padding:i=0,position:n="top",bbox:s}=t;const a=e?Qo:$o,{xTranslationDirection:o,yTranslationDirection:r}=a[n];return{xTranslation:o*(i+(e?s.width:s.height)/2),yTranslation:r*(i+(e?s.height:s.width)/2)}}var er=t=>{let{yDirection:e,xEnd:i,yStart:n,yEnd:s}=t;return e?{x:i/2,y:n}:{x:i,y:isNaN(s)?n:(n+s)/2}},ir=t=>{let{yDirection:e,xStart:i,xEnd:n,yStart:s,yEnd:a}=t;return e?{x:i,y:isNaN(a)?s:(s+a)/2}:{x:n/2,y:s}},nr=t=>{let{yDirection:e,xEnd:i,yStart:n,yEnd:s}=t;return e?{x:i,y:isNaN(s)?n:(n+s)/2}:{x:i/2,y:isNaN(s)?n:s}},sr=t=>{let{yDirection:e,xStart:i,xEnd:n,yStart:s,yEnd:a}=t;return e?{x:n/2,y:isNaN(a)?s:a}:{x:i,y:isNaN(a)?s:(s+a)/2}},ar=t=>{let{yDirection:e,xStart:i,xEnd:n,yStart:s}=t;return e?{x:i/2,y:s}:{x:n,y:s}},or=t=>{let{yDirection:e,xStart:i,yStart:n,yEnd:s}=t;return e?{x:i,y:isNaN(s)?n:s}:{x:i,y:n}},rr=t=>{let{yDirection:e,xEnd:i,yStart:n,yEnd:s}=t;return e?{x:i,y:n}:{x:i,y:isNaN(s)?n:s}},lr=t=>{let{yDirection:e,xStart:i,xEnd:n,yStart:s,yEnd:a}=t;return e?{x:n,y:isNaN(a)?s:a}:{x:i,y:isNaN(a)?s:a}},hr={top:{c:er},bottom:{c:sr},left:{c:ir},right:{c:nr},topLeft:{c:ar},topRight:{c:rr},bottomLeft:{c:or},bottomRight:{c:lr},inside:{c:t=>{let{xEnd:e,yStart:i,yEnd:n}=t;return{x:e/2,y:isNaN(n)?i:(i+n)/2}}},insideLeft:{c:ir},insideRight:{c:nr},insideTop:{c:er},insideBottom:{c:sr},insideTopLeft:{c:ar},insideBottomLeft:{c:or},insideTopRight:{c:rr},insideBottomRight:{c:lr}},cr=Fa(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),dr=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}};x([Xs($s,{optional:!0})],dr.prototype,"enabled",2),x([Xs(ea,{optional:!0})],dr.prototype,"text",2),x([Xs(La,{optional:!0})],dr.prototype,"fontStyle",2),x([Xs(Ra,{optional:!0})],dr.prototype,"fontWeight",2),x([Xs(sa)],dr.prototype,"fontSize",2),x([Xs(ea)],dr.prototype,"fontFamily",2),x([Xs(ia)],dr.prototype,"padding",2),x([Xs(fa,{optional:!0})],dr.prototype,"color",2),x([Xs(cr,{optional:!0})],dr.prototype,"position",2),x([Xs(oa,{optional:!0})],dr.prototype,"rotation",2),x([Xs($s,{optional:!0})],dr.prototype,"parallel",2);var ur=class t{constructor(){this.id=_n(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new dr,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new Mo({name:"".concat(this.id),layer:!0,zIndex:t.LINE_LAYER_ZINDEX}),this.labelGroup=new Mo({name:"".concat(this.id),layer:!0,zIndex:t.LABEL_LAYER_ZINDEX}),this.crossLineRange=new Ao,this.crossLineLabel=new Fo,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:e,labelGroup:i,crossLineRange:n,crossLineLabel:s}=this;e.append(n),i.append(s),n.pointerEvents=1}update(t){const{enabled:e,data:i,type:n,value:s,range:a,scale:o}=this;if(!n||!o||!e||!t||!Jo(n,s,a,o)||0===i.length)return this.group.visible=!1,void(this.labelGroup.visible=!1);this.group.visible=t,this.labelGroup.visible=t,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(t,e){if(!t)return;if(!this.createNodeData(e))return;const{sideFlag:i,gridLength:n,data:s}=this,a=[],o=i*n,r=s[0],l=s[1],h=new ts(Math.min(0,o),Math.min(r,l),Math.abs(0-o),Math.abs(r-l));a.push(h);const c=this.computeLabelBBox();return c&&a.push(c),ts.merge(a)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(t){var e,i,n;const{scale:s,gridLength:a,sideFlag:o,direction:r,label:{position:l="top"},clippedRange:h,strokeWidth:c=0}=this;if(this.data=[],!s)return!1;const d=null!=(e=s.bandwidth)?e:0,u=null!=(i=s.step)?i:0,p=(t?-1:1)*(s instanceof Hs?(u-d)/2:0),[g,m]=[0,o*a];let[f,y]=this.getRange();const v=void 0===y&&xo.is(s)?d/2+p:0;let[x,b]=[Number(s.convert(f,{clampMode:"clamped"}))-p+v,s.convert(y,{clampMode:"clamped"})+d+p];x=Vn(x,h),b=Vn(b,h),[f,y]=[Number(s.convert(f))+v,s.convert(y)+d];const S=(f===x||y===b||x!==b)&&Math.abs(b-x)>0;if(S&&x>b&&([x,b]=[b,x],[f,y]=[y,f]),f-p>=x&&(f-=p),y+p<=b&&(y+=p),this.isRange=S,this.startLine=c>0&&f>=x&&f<=x+p,this.endLine=c>0&&y>=b-d-p&&y<=b,!S&&!this.startLine&&!this.endLine)return!1;if(this.data=[x,b],this.label.enabled){const t="y"===r,{c:e=er}=null!=(n=hr[l])?n:{},{x:i,y:s}=e({yDirection:t,xStart:g,xEnd:m,yStart:x,yEnd:b});this.labelPoint={x:i,y:s}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:n,data:s,startLine:a,endLine:o,isRange:r,fill:l,fillOpacity:h,stroke:c,strokeWidth:d,lineDash:u}=this;e.x1=0,e.x2=i*n,e.y1=s[0],e.y2=s[1],e.startLine=a,e.endLine=o,e.isRange=r,e.fill=l,e.fillOpacity=null!=h?h:1,e.stroke=c,e.strokeWidth=null!=d?d:1,e.strokeOpacity=null!=(t=this.strokeOpacity)?t:1,e.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:n,rotation:s,position:a="top",padding:o=0},direction:r,parallelFlipRotation:l,regularFlipRotation:h}=this;if(void 0===e||void 0===i)return;const{defaultRotation:c,configuredRotation:d}=Wo({rotation:s,parallel:n,regularFlipRotation:h,parallelFlipRotation:l});t.rotation=c+d,t.textBaseline="middle",t.textAlign="center";const u=t.computeTransformedBBox();if(!u)return;const p="y"===r,{xTranslation:g,yTranslation:m}=tr({yDirection:p,padding:o,position:a,bbox:u});t.translationX=e+g,t.translationY=i+m}getZIndex(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?t.RANGE_LAYER_ZINDEX:t.LINE_LAYER_ZINDEX}getRange(){var t;const{value:e,range:i,scale:n}=this,s=qa.is(n)||xo.is(n),a=null!=(t=null==i?void 0:i[0])?t:e;let o=null==i?void 0:i[1];return s||void 0!==o||(o=a),s&&a===o&&(o=void 0),[a,o]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new Fo;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:n}={},label:{parallel:s,rotation:a,position:o="top",padding:r=0},direction:l,parallelFlipRotation:h,regularFlipRotation:c}=this;if(void 0===i||void 0===n)return;const{configuredRotation:d}=Wo({rotation:a,parallel:s,regularFlipRotation:c,parallelFlipRotation:h});e.rotation=d,e.textBaseline="middle",e.textAlign="center";const u=e.computeTransformedBBox();if(!u)return;const p="y"===l,{xTranslation:g,yTranslation:m}=tr({yDirection:p,padding:r,position:o,bbox:u});return e.translationX=i+g,e.translationY=n+m,e.computeTransformedBBox()}calculatePadding(t){var e,i,n,s,a,o,r,l;const{isRange:h,startLine:c,endLine:d,direction:u,label:{padding:p=0,position:g="top"}}=this;if(!h&&!c&&!d)return;const m=this.computeLabelBBox();if(null==(null==m?void 0:m.x)||null==(null==m?void 0:m.y))return;const f=function(t){let{yDirection:e,bbox:i,padding:n=0,position:s="top"}=t;const a={};return s.startsWith("inside")||("top"!==s||e?"bottom"!==s||e?"left"===s&&e?a.left=n+i.width:"right"===s&&e&&(a.right=n+i.width):a.bottom=n+i.height:a.top=n+i.height),a}({yDirection:"y"===u,padding:p,position:g,bbox:m});t.left=Math.max(null!=(e=t.left)?e:0,null!=(i=f.left)?i:0),t.right=Math.max(null!=(n=t.right)?n:0,null!=(s=f.right)?s:0),t.top=Math.max(null!=(a=t.top)?a:0,null!=(o=f.top)?o:0),t.bottom=Math.max(null!=(r=t.bottom)?r:0,null!=(l=f.bottom)?l:0)}};ur.LINE_LAYER_ZINDEX=9,ur.RANGE_LAYER_ZINDEX=3,ur.LABEL_LAYER_ZINDEX=8,ur.className="CrossLine",x([Xs($s,{optional:!0})],ur.prototype,"enabled",2),x([Xs(Fa(["range","line"],"a crossLine type"),{optional:!0})],ur.prototype,"type",2),x([Xs(Zs(qo("range"),la.restrict({length:2})),{optional:!0})],ur.prototype,"range",2),x([Xs(qo("value"),{optional:!0})],ur.prototype,"value",2),x([Xs(fa,{optional:!0})],ur.prototype,"fill",2),x([Xs(aa,{optional:!0})],ur.prototype,"fillOpacity",2),x([Xs(fa,{optional:!0})],ur.prototype,"stroke",2),x([Xs(ia,{optional:!0})],ur.prototype,"strokeWidth",2),x([Xs(aa,{optional:!0})],ur.prototype,"strokeOpacity",2),x([Xs(Da,{optional:!0})],ur.prototype,"lineDash",2);var pr=ur,gr=class{constructor(){this.moduleMap=new Map}*modules(){for(const t of this.moduleMap.values())yield t.moduleInstance}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error("AG Charts - module already initialised: ".concat(t.optionsKey));this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){var e;const i=Wt(t)?t:t.optionsKey;null==(e=this.moduleMap.get(i))||e.moduleInstance.destroy(),this.moduleMap.delete(i)}getModule(t){var e;return null==(e=this.moduleMap.get(Wt(t)?t:t.optionsKey))?void 0:e.moduleInstance}isEnabled(t){return this.moduleMap.has(Wt(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),((e,i)=>t(e.moduleInstance,i)))}destroy(){var t;for(const e of this.moduleMap.keys())null==(t=this.moduleMap.get(e))||t.moduleInstance.destroy();this.moduleMap.clear()}},mr={};function fr(t,e){const{nodes:i,selections:n}=Rs(t);for(const s of n){for(const t of s.nodes()){const i=e(t,t.datum);t.setProperties(i)}s.cleanup()}for(const s of i){const t=e(s,s.datum);s.setProperties(t)}}v(mr,{resetMotion:()=>fr});var yr=class{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=In.create(!0,"animation"),this.state=t,this.debug("%c".concat(this.constructor.name," | init -> ").concat(t),"color: green")}transition(t,e){var i,n;const s=this.states[this.state],a=null==s?void 0:s[t];if(!a)return void this.debug("%c".concat(this.constructor.name," | ").concat(this.state," -> ").concat(t," -> ").concat(this.state),"color: grey");let o=this.state;return"string"===typeof a?o=a:"object"===typeof a&&(o=a.target),this.debug("%c".concat(this.constructor.name," | ").concat(this.state," -> ").concat(t," -> ").concat(o),"color: green"),null==(i=this.preTransitionCb)||i.call(this,this.state,o),this.state=o,"function"===typeof a?a(e):"object"===typeof a&&(null==(n=a.action)||n.call(a,e)),this.state}},vr=t=>"(".concat(t,")"),xr=t=>"".concat(vr(t),"?"),br=t=>xr("?:".concat(t)),Sr=new RegExp(["^",br("".concat(xr(".")).concat(vr("[<>=^]"))),xr("[+\\-( ]"),xr("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),xr("0"),xr("\\d+"),xr(","),br("\\.".concat(vr("\\d+"))),xr("~"),xr("[%a-z]"),"$"].join(""),"i"),kr=new RegExp(["^",vr(".*?"),"#\\{".concat(vr(".+?"),"\\}"),vr(".*?"),"$"].join(""));function wr(t){let e,i;const n=kr.exec(t);n&&([,e,t,i]=n);const s=Sr.exec(t);if(!s)throw new Error("The number formatter is invalid: ".concat(t));const[,a,o,r,l,h,c,d,u,p,g]=s;return{fill:a,align:o,sign:r,symbol:l,zero:h,width:parseInt(c),comma:d,precision:parseInt(u),trim:Boolean(p),type:g,prefix:e,suffix:i}}function Mr(t){const e="string"===typeof t?wr(t):t,{fill:i,align:n,sign:s="-",symbol:a,zero:o,width:r,comma:l,type:h,prefix:c="",suffix:d="",precision:u}=e;let{trim:p}=e;const g=void 0===u||isNaN(u);let m,f;if(h)if(h in Lr&&h in Cr)m=g?Cr[h]:Lr[h];else if(h in Lr)m=Lr[h];else{if(!(h in Cr))throw new Error("The number formatter type is invalid: ".concat(h));m=Cr[h]}else m=Lr.g,p=!0;return f=null==u||g?h?6:12:u,t=>{let e=m(t,f);return p&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const n=t.substring(0,i).split(""),s=t.substring(i);for(let a=n.length-3;a>0;a-=3)n.splice(a,0,e);return"".concat(n.join("")).concat(s)}(e,l)),e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("("===i)return t>=0?e:"(".concat(e,")");const n="+"===i?"+":"";return"".concat(t>=0?n:Nr).concat(e)}(t,e,s),a&&"#"!==a&&(e="".concat(a).concat(e)),"#"===a&&"x"===h&&(e="0x".concat(e)),"s"===h&&(e="".concat(e).concat(function(t){return Tr[Rr(t)]}(t))),"%"!==h&&"p"!==h||(e="".concat(e,"%")),null==r||isNaN(r)||(e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:">",s=t;if(">"!==n&&n){if("<"===n)s=s.padEnd(e,i);else if("^"===n){const t=Math.max(0,e-s.length),n=Math.ceil(t/2),a=Math.floor(t/2);s=s.padStart(n+s.length,i),s=s.padEnd(a+s.length,i)}}else s=s.padStart(e,i);return s}(e,r,null!=i?i:o,n)),e="".concat(c).concat(e).concat(d),e}}var Dr=t=>Math.floor(Math.abs(t)),Cr={b:t=>Dr(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>Dr(t).toString(8),x:t=>Dr(t).toString(16),X:t=>Cr.x(t).toUpperCase(),n:t=>Cr.d(t),"%":t=>"".concat(Dr(100*t).toFixed(0))},Lr={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>Lr.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>Lr.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i));return n>=-4&&n<e?i.toFixed(e-1-n):i.toExponential(e-1)},G:(t,e)=>Lr.g(t,e).toUpperCase(),n:(t,e)=>Lr.g(t,e),p:(t,e)=>Lr.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),n=Math.floor(Math.log10(i))-(e-1);if(n<=0)return i.toFixed(-n);const s=Math.pow(10,n);return(Math.round(i/s)*s).toFixed()},s:(t,e)=>{const i=Rr(t);return Lr.r(t/Math.pow(10,i),e)},"%":(t,e)=>Lr.f(100*t,e)};function Rr(t){return Wn(Ir,t?3*Math.floor(Math.log10(Math.abs(t))/3):0,Ar)}var Ir=-24,Ar=24,Tr={[Ir]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[Ar]:"Y"},Nr="\u2212";function Er(t,e){const i=wr(null!=e?e:",f"),{precision:n}=i;(null==n||isNaN(n))&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map((t=>{if("number"!==typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),n=i.type?6:12,s=t.toExponential(n-1).replace(/\.?0+e/,"e"),a=s.indexOf(".");if(a<0)return e>=0?0:-e;const o=s.indexOf("e")-a;return Math.max(0,o-e-1)}))):i.type&&!(i.type in Lr)||(i.precision=Math.max(...t.map((t=>{if("number"!==typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length})))));const s=Mr(i);return t=>s(Number(t))}var Or=class t extends qa{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=A,this.basePow=A,this.log=t=>Math.min(...this.domain)>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>Math.min(...this.domain)>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return Math.min(...this.domain)>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return Math.min(...this.domain)>=0?Math.exp(t):-Math.exp(-t)}refresh(){this.base<=0&&(this.base=0,E.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=t.getBaseLogMethod(this.base),this.basePow=t.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[t,e]=this.domain,i=t>e?Math.ceil:Math.floor,n=t>e?Math.floor:Math.ceil,s=this.pow(i(this.log(t))),a=this.pow(n(this.log(e)));this.niceDomain=[s,a]}ticks(){var t;const e=null!=(t=this.tickCount)?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[n,s]=this.getDomain(),a=Math.min(n,s),o=Math.max(n,s);let r=this.log(a),l=this.log(o);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(l-r);let i=go(r,l,Math.min(e,t));i=ho(i.fractionDigits,i.map((t=>this.pow(t))).filter((t=>t>=a&&t<=o)));const n=this.getPixelRange();if(!mo({start:a,stop:o,interval:t,count:i.length,availableRange:n}))return i}if(!(i%1===0)||l-r>=e){let t=co(r,l,Math.min(l-r,e));return t=ho(t.fractionDigits,t.map((t=>this.pow(t)))),t}const h=[],c=a>0;r=Math.floor(r)-1,l=Math.round(l)+1;const d=Yn(this.range)/e;let u=1/0;for(let p=r;p<=l;p++){const t=this.convert(this.pow(p+1));for(let e=1;e<i;e++){const n=c?e:i-e+1,s=this.pow(p)*n,r=this.convert(s),l=Math.abs(u-r),g=Math.abs(r-t);s>=a&&s<=o&&(1===e||l>=d&&g>=d||0===h.length)&&(h.push(s),u=r)}}return h}tickFormat(t){let{count:e,ticks:i,specifier:n}=t;return e!==1/0&&null==i&&this.ticks(),null!=n||(n=10===this.base?".0e":","),Wt(n)?Mr(n):n}static getBaseLogMethod(t){switch(t){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:const e=Math.log(t);return t=>Math.log(t)/e}}static getBasePowerMethod(t){switch(t){case 10:return t=>t>=0?p(10,t):1/p(10,-t);case Math.E:return Math.exp;default:return e=>p(t,e)}}};x([Ks],Or.prototype,"base",2);var Pr=Or,Br=class t{constructor(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=In.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(hs,e)?()=>new e:e}static select(e,i){return new t(e,i,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}static selectAll(t,e){const i=[],n=t=>{e(t)&&i.push(t),t.children.forEach(n)};return n(t),i}static selectByClass(e,i){for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];return t.selectAll(e,(t=>t instanceof i||s.some((e=>t instanceof e))))}static selectByTag(e,i){return t.selectAll(e,(t=>t.tag===i))}createNode(t,e,i){const n=this.nodeFactory(t);return n.datum=t,null==e||e(n),null==i?this._nodes.push(n):this._nodes.splice(i,0,n),this.parentNode.appendChild(n),n}update(t,e,i){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage: ".concat(t)),i){const n=new Map(t.map(((t,e)=>[i(t),[t,e]])));for(const[t,e]of this._nodesMap.entries())if(n.has(e)){const[i]=n.get(e);t.datum=i,this.garbageBin.delete(t),n.delete(e)}else this.garbageBin.add(t);for(const[t,[i,s]]of n.entries())this._nodesMap.set(this.createNode(i,e,s),t)}else{const i=Math.max(t.length,this.data.length);for(let n=0;n<i;n++)n>=t.length?this.garbageBin.add(this._nodes[n]):n>=this._nodes.length?this.createNode(t[n],e):(this._nodes[n].datum=t[n],this.garbageBin.delete(this._nodes[n]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter((t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1)))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){for(const e of this._nodes.entries())t(e[1],e[1].datum,e[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(e){return t.selectAll(this.parentNode,e)}selectByClass(e){return t.selectByClass(this.parentNode,e)}selectByTag(e){return t.selectByTag(this.parentNode,e)}nodes(){return this._nodes}};function Fr(t,e,i,n){const s=t-i,a=e-n;return s*s+a*a}function _r(t,e,i,n,s,a,o){if(i===s&&n===a)return Math.min(o,Fr(t,e,i,n));const r=s-i,l=a-n,h=Math.max(0,Math.min(1,((t-i)*r+(e-n)*l)/(r*r+l*l))),c=i+h*r,d=n+h*l;return Math.min(o,Fr(t,e,c,d))}function Gr(t,e,i,n,s,a,o,r,l){r&&([o,a]=[a,o]);if(!_s(Math.atan2(e-n,t-i),a,o)){const o=i+Math.cos(a)*s,r=n+Math.sin(a)*s,h=i+Math.cos(a)*s,c=n+Math.sin(a)*s;return Math.min(l,Fr(t,e,o,r),Fr(t,e,h,c))}const h=s-Math.sqrt(Fr(t,e,i,n));return Math.min(l,h*h)}var zr=class extends Io{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new ts(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:n}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,n)}return!1}distanceSquared(t,e){const{x1:i,y1:n,x2:s,y2:a}=this;return _r(t,e,i,n,s,a,1/0)}render(t){var e;const{ctx:i,forceRender:n,stats:s,devicePixelRatio:a}=t;if(0===this.dirty&&!n)return void(s&&(s.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:o,y1:r,x2:l,y2:h}=this;if(o===l){const{strokeWidth:t}=this,e=Math.round(o*a)/a+Math.trunc(t*a)%2/(2*a);o=e,l=e}else if(r===h){const{strokeWidth:t}=this,e=Math.round(r*a)/a+Math.trunc(t*a)%2/(2*a);r=e,h=e}i.beginPath(),i.moveTo(o,r),i.lineTo(l,h),this.fillStroke(i),null==(e=this.fillShadow)||e.markClean(),super.render(t)}};function Wr(t,e,i,n,s,a){if(0===t.size)return!1;let o=t.x,r=t.y;null!=e&&(o-=(e.x-.5)*t.size,r-=(e.y-.5)*t.size);let l=o;o<i?l=i:o>i+s&&(l=i+s);let h=r;r<n?h=n:r>n+a&&(h=n+a);const c=o-l,d=r-h;return Math.sqrt(c*c+d*d)<=.5*t.size}function Vr(t,e,i,n,s){const a=t.x+t.width>e&&t.x<e+n,o=t.y+t.height>i&&t.y<i+s;return a&&o}zr.className="Line",zr.defaultStyles=Object.assign({},Io.defaultStyles,{fill:void 0,strokeWidth:1}),x([ns({redraw:3})],zr.prototype,"x1",2),x([ns({redraw:3})],zr.prototype,"y1",2),x([ns({redraw:3})],zr.prototype,"x2",2),x([ns({redraw:3})],zr.prototype,"y2",2);var Kr={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}};function Yr(t,e){return t.length===e.length&&t.every(((t,i)=>{const n=e[i];return Array.isArray(t)&&Array.isArray(n)?Yr(t,n):t===n}))}function Hr(t,e){return t.length===e.length&&t.every(((t,i)=>Number(t)===Number(e[i])))}function Ur(t){const e=Nt(t)?t:t.split(".");if(1===e.length){const[t]=e;return Lt(((e,i,n)=>e[t]=n),(e=>e[t]))}return Lt(((t,i,n)=>ee(t,e,n)),(t=>$t(t,e)))}function Xr(t){return Lt(((e,i,n)=>e[t]=n))}function jr(t,e){return Lt(((i,n,s)=>i[t][null!=e?e:n]=s))}function Zr(t){const{newValue:e,oldValue:i,changeValue:n}=t;return Lt(((t,s,a,o)=>(a!==o&&(void 0!==o&&(null==i||i.call(t,o)),void 0!==a&&(null==e||e.call(t,a)),null==n||n.call(t,a,o)),a)))}function qr(t){return e=t,(t,i)=>{Ct(t,i).observers.push(e)};var e}function Jr(t,e,i){void 0===i||""===i?null==t||t.removeAttribute(e):null==t||t.setAttribute(e,i.toString())}function Qr(t,e,i,n,s){let{top:a,right:o,bottom:r,left:l,width:h,height:c}=s;return null!=l?null!=h?o=i-l+h:null!=o&&(h=i-l-o):null!=o&&null!=h&&(l=i-o-h),null!=a?null!=c?r=n-a-c:null!=r&&(c=n-r-a):null!=r&&null!=c&&(a=n-r-c),null==h?null==c?(h=t,c=e):h=Math.ceil(t*c/e):null==c&&(c=Math.ceil(e*h/t)),null==l&&(l=null==o?Math.floor((i-h)/2):i-o-h),null==a&&(a=null==r?Math.floor((n-c)/2):n-c-r),{x:l,y:a,width:h,height:c}}var $r="ag-chart-tooltip",tl="ag-chart-dark-tooltip",el={html:"",ariaLabel:""};function il(t){const e=(t,e,i)=>0===e||"."!==i[e-1]?". ":" ";return t.replace(/<br\s*\/?>/g,e).replace(/<\/p\s+>/g,e).replace(/<\/li\s*\/>/g,e).replace(/<[^>]+>/g,"")}function nl(t,e){var i,n,s;if("string"===typeof t)return{html:t,ariaLabel:t};const{content:a=(null!=(i=null==e?void 0:e.content)?i:""),title:o=(null==e?void 0:e.title),color:r=(null!=(n=null==e?void 0:e.color)?n:"white"),backgroundColor:l=(null!=(s=null==e?void 0:e.backgroundColor)?s:"#888")}=t,h=o?'<div class="'.concat($r,'-title"\n        style="color: ').concat(r,"; background-color: ").concat(l,'">').concat(o,"</div>"):"",c=o?"".concat(o,": "):"",d=a?'<div class="'.concat($r,'-content">').concat(a,"</div>"):"";return{html:"".concat(h).concat(d),ariaLabel:il("".concat(c).concat(a))}}var sl=class extends fe{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};x([Xs(Fa(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],"a position type"))],sl.prototype,"type",2),x([Xs(ia)],sl.prototype,"xOffset",2),x([Xs(ia)],sl.prototype,"yOffset",2);var al=class extends fe{constructor(){super(),this.enabled=!0,this.delay=0,this.range="nearest",this.wrapping="hyphenate",this.position=new sl,this.darkTheme=!1,this.enableInteraction=!1,this.lastVisibilityChange=Date.now(),this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this.element=wn("div",$r),Jr(this.element,"aria-hidden",!0),this.root=Sn("body"),this.root.appendChild(this.element)}destroy(){this.element.remove()}isVisible(){return!this.element.classList.contains($r+"-hidden")}show(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var s,a,o,r,l,h,c,d,u;const{element:p}=this;if(null!=i)p.innerHTML=i.html;else if(!p.innerHTML)return void this.toggle(!1);const g=null!=(a=null==(s=e.position)?void 0:s.type)?a:this.position.type,m=null!=(r=null==(o=e.position)?void 0:o.xOffset)?r:0,f=null!=(h=null==(l=e.position)?void 0:l.yOffset)?h:0,y=this.getTooltipBounds({positionType:g,meta:e,yOffset:f,xOffset:m,canvasRect:t}),v=this.getWindowSize(),x=Qr(p.clientWidth,p.clientHeight,t.width,t.height,y);x.x+=t.x,x.y+=t.y;const b=Wn(0,x.x,v.width-p.clientWidth-1),S=Wn(0,x.y,v.height-p.clientHeight),k=b!==x.x||S!==x.y,w=("node"===g||"pointer"===g)&&!k&&!m&&!f,M=null!=(d=null!=(c=e.showArrow)?c:this.showArrow)?d:w;this.updateShowArrow(M),p.style.transform="translate(".concat(Math.round(b),"px, ").concat(Math.round(S),"px)"),this.enableInteraction=null!=(u=e.enableInteraction)&&u,this.delay>0&&!n?(this.toggle(!1),this.showTimeout=setTimeout((()=>{this.toggle(!0)}),this.delay)):this.toggle(!0)}getWindowSize(){const{innerWidth:t,innerHeight:e}=kn();return{width:t,height:e}}toggle(t){const{classList:e}=this.element,i=(t,i)=>e.toggle("".concat($r,"-").concat(t),i),n=this.isVisible();let s=1/0;if(t||clearTimeout(this.showTimeout),n!==t){const t=Date.now();s=t-this.lastVisibilityChange,this.lastVisibilityChange=t}s>5&&i("no-animation",!n&&t&&s>100),i("no-interaction",!this.enableInteraction),i("hidden",!t),i("arrow",this._showArrow),e.toggle(tl,this.darkTheme);for(const a of this.wrapTypes)e.toggle("".concat($r,"-wrap-").concat(a),a===this.wrapping)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null==(e=t.sourceEvent.relatedTarget)?void 0:e.classList,n=Boolean(["","-title","-content"].filter((t=>null==i?void 0:i.contains("".concat($r).concat(t)))));return void 0!==i&&n}updateShowArrow(t){this._showArrow=t}getTooltipBounds(t){let{positionType:e,meta:i,yOffset:n,xOffset:s,canvasRect:a}=t;const{clientWidth:o,clientHeight:r}=this.element,l={width:o,height:r};switch(e){case"node":case"pointer":return l.top=i.offsetY+n-r-8,l.left=i.offsetX+s-o/2,l;case"top":return l.top=n,l.left=a.width/2-o/2+s,l;case"right":return l.top=a.height/2-r/2+n,l.left=a.width-o/2+s,l;case"left":return l.top=a.height/2-r/2+n,l.left=s,l;case"bottom":return l.top=a.height-r+n,l.left=a.width/2-o/2+s,l;case"top-left":return l.top=n,l.left=s,l;case"top-right":return l.top=n,l.left=a.width-o+s,l;case"bottom-right":return l.top=a.height-r+n,l.left=a.width-o+s,l;case"bottom-left":return l.top=a.height-r+n,l.left=s,l}}};x([Xs($s)],al.prototype,"enabled",2),x([Xs($s,{optional:!0})],al.prototype,"showArrow",2),x([qr(((t,e,i)=>{e&&t.element.classList.add(e),i&&t.element.classList.remove(i)})),Xs(ea,{optional:!0})],al.prototype,"class",2),x([Xs(sa)],al.prototype,"delay",2),x([Xs(Pa)],al.prototype,"range",2),x([Xs(Ia)],al.prototype,"wrapping",2),x([Xs(Js)],al.prototype,"position",2),x([Xs($s)],al.prototype,"darkTheme",2);var ol=class extends fe{constructor(){super(...arguments),this.id=_n(this),this.node=new Fo({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1}getOrAddRegion(t,e){return"root"===e?t.regionManager.getRegion("root"):t.regionManager.addRegionFromProperties({name:e,bboxproviders:[this.node],canInteraction:()=>this.enabled&&this.node.visible})}registerInteraction(t,e){const i=this.getOrAddRegion(t,e);return function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return()=>{for(const t of e)t()}}(...[i.addListener("hover",(e=>this.handleMouseMove(t,e))),i.addListener("leave",(e=>this.handleMouseLeave(t,e)))])}computeTextWrap(t,e){var i,n;const{text:s,wrapping:a}=this,o=Math.min(null!=(i=this.maxWidth)?i:1/0,t),r=null!=(n=this.maxHeight)?n:e;if(!isFinite(o)&&!isFinite(r))return void(this.node.text=s);const{text:l,truncated:h}=Fo.wrap(null!=s?s:"",o,r,this,a);this.node.text=l,this.truncated=h}updateTooltip(t,e){if(void 0!==e&&this.enabled&&this.node.visible&&this.truncated){const{offsetX:i,offsetY:n}=e;return t.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:n,lastPointerEvent:e,showArrow:!1},nl({content:this.text})),!0}return!1}handleMouseMove(t,e){this.updateTooltip(t,e)&&e.consume()}handleMouseLeave(t,e){t.tooltipManager.removeTooltip(this.id)}};ol.SMALL_PADDING=10,ol.LARGE_PADDING=20,x([Xs($s)],ol.prototype,"enabled",2),x([Xs(ea,{optional:!0}),jr("node")],ol.prototype,"text",2),x([Xs(Aa,{optional:!0}),jr("node")],ol.prototype,"textAlign",2),x([Xs(La,{optional:!0}),jr("node")],ol.prototype,"fontStyle",2),x([Xs(Ra,{optional:!0}),jr("node")],ol.prototype,"fontWeight",2),x([Xs(sa),jr("node")],ol.prototype,"fontSize",2),x([Xs(ea),jr("node")],ol.prototype,"fontFamily",2),x([Xs(fa,{optional:!0}),jr("node","fill")],ol.prototype,"color",2),x([Xs(sa,{optional:!0})],ol.prototype,"spacing",2),x([Xs(sa,{optional:!0})],ol.prototype,"lineHeight",2),x([Xs(sa,{optional:!0})],ol.prototype,"maxWidth",2),x([Xs(sa,{optional:!0})],ol.prototype,"maxHeight",2),x([Xs(Ia)],ol.prototype,"wrapping",2);var rl=["stroke","lineDash"],ll=ha((t=>_t(t)&&Object.keys(t).every((t=>rl.includes(t)))),"objects with gridline style properties such as 'stroke' or 'lineDash'"),hl=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};x([Xs($s)],hl.prototype,"enabled",2),x([Xs(sa)],hl.prototype,"width",2),x([Xs(ll)],hl.prototype,"style",2);var cl=class extends fe{constructor(){super(...arguments),this.enabled=!0,this.autoWrap=!1,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};x([Xs($s)],cl.prototype,"enabled",2),x([Xs($s,{optional:!0})],cl.prototype,"autoWrap",2),x([Xs(sa,{optional:!0})],cl.prototype,"maxWidth",2),x([Xs(sa,{optional:!0})],cl.prototype,"maxHeight",2),x([Xs(La,{optional:!0})],cl.prototype,"fontStyle",2),x([Xs(Ra,{optional:!0})],cl.prototype,"fontWeight",2),x([Xs(ia.restrict({min:1}))],cl.prototype,"fontSize",2),x([Xs(ea)],cl.prototype,"fontFamily",2),x([Xs(sa)],cl.prototype,"padding",2),x([Xs(ra),Us(NaN)],cl.prototype,"minSpacing",2),x([Xs(fa,{optional:!0})],cl.prototype,"color",2),x([Xs(oa,{optional:!0})],cl.prototype,"rotation",2),x([Xs($s)],cl.prototype,"avoidCollisions",2),x([Xs($s)],cl.prototype,"mirrored",2),x([Xs($s)],cl.prototype,"parallel",2),x([Xs(ta,{optional:!0})],cl.prototype,"formatter",2),x([Xs(ea,{optional:!0})],cl.prototype,"format",2);var dl=class{constructor(){this.enabled=!0,this.width=1,this.color=void 0}};x([Xs($s)],dl.prototype,"enabled",2),x([Xs(sa)],dl.prototype,"width",2),x([Xs(fa,{optional:!0})],dl.prototype,"color",2);var ul=class extends fe{constructor(){super(...arguments),this.enabled=!1,this.spacing=ol.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};function pl(t){const[e,i]=Kn(t.range),n=Math.floor(e),s=Math.ceil(i);return{min:n,max:s,visible:n!==s}}x([Xs($s)],ul.prototype,"enabled",2),x([Xs(ea,{optional:!0})],ul.prototype,"text",2),x([Xs(sa,{optional:!0})],ul.prototype,"spacing",2),x([Xs(La,{optional:!0})],ul.prototype,"fontStyle",2),x([Xs(Ra,{optional:!0})],ul.prototype,"fontWeight",2),x([Xs(sa)],ul.prototype,"fontSize",2),x([Xs(ea)],ul.prototype,"fontFamily",2),x([Xs(fa,{optional:!0})],ul.prototype,"color",2),x([Xs(Ia)],ul.prototype,"wrapping",2),x([Xs(ta,{optional:!0})],ul.prototype,"formatter",2);var gl=2*Math.PI,ml=gl/2;function fl(t){const e=(e,i)=>{const[n=t.min,s=t.max]=Kn(null!=i?i:[]);return e<n||e>s},i={fromFn(t,i,n){let s=t.y1+t.translationY,a=t.opacity;return("added"===n||e(t.datum.translationY,t.datum.range))&&(s=i.translationY,a=0),{y:0,translationY:s,opacity:a,phase:As[n]}},toFn(t,e,i){const n=e.translationY;let s=1;return"removed"===i&&(s=0),{y:0,translationY:n,opacity:s,finish:{y:n,translationY:0}}},intermediateFn:(t,i,n)=>({visible:!e(t.y)})},n={fromFn(t,i,n){var s;const a=null!=(s=t.previousDatum)?s:i,o=a.x,r=a.y,l=a.rotationCenterX;let h=Math.round(t.translationY),c=a.rotation,d=t.opacity;return"removed"===n||e(a.y,a.range)?c=i.rotation:("added"===n||e(t.datum.y,t.datum.range))&&(h=Math.round(a.translationY),d=0,c=i.rotation),{x:o,y:r,rotationCenterX:l,translationY:h,rotation:c,opacity:d,phase:As[n]}},toFn(t,e,i){var n,s;const a=e.x,o=e.y,r=e.rotationCenterX,l=Math.round(e.translationY);let h=0,c=1;var d,u;return"added"===i?(c=1,h=e.rotation):"removed"===i?(c=0,h=e.rotation):(d=null!=(s=null==(n=t.previousDatum)?void 0:n.rotation)?s:e.rotation,u=e.rotation,h=Math.abs(u-d)<ml?u:d>u?u+gl:u-gl),{x:a,y:o,rotationCenterX:r,translationY:l,rotation:h,opacity:c,finish:{rotation:e.rotation}}}};return{tick:i,line:{fromFn(t,e){var i;return f(m({},null!=(i=t.previousDatum)?i:e),{phase:As.updated})},toFn:(t,e)=>m({},e)},label:n,group:{fromFn(t,e){const{rotation:i,translationX:n,translationY:s}=t;return{rotation:i,translationX:n,translationY:s,phase:As.updated}},toFn(t,e){const{rotation:i,translationX:n,translationY:s}=e;return{rotation:i,translationX:n,translationY:s}}}}}function yl(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function vl(t){const{visible:e,min:i,max:n}=t;return(t,s)=>{const a=s.translationY;return{y:a,translationY:0,opacity:1,visible:e&&a>=i&&a<=n}}}function xl(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function bl(){return(t,e)=>m({},e)}var Sl=class t{constructor(e,i,n){let s;this.moduleCtx=e,this.scale=i,this.id=_n(this),this.nice=!0,this.reverse=!1,this.keys=[],this.dataDomain={domain:[],clipped:!1},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Mo({name:"".concat(this.id,"-axis"),zIndex:2}),this.lineNode=this.axisGroup.appendChild(new zr),this.tickLineGroup=this.axisGroup.appendChild(new Mo({name:"".concat(this.id,"-Axis-tick-lines"),zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new Mo({name:"".concat(this.id,"-Axis-tick-labels"),zIndex:2})),this.crossLineGroup=new Mo({name:"".concat(this.id,"-CrossLines")}),this.gridGroup=new Mo({name:"".concat(this.id,"-Axis-grid")}),this.gridLineGroup=this.gridGroup.appendChild(new Mo({name:"".concat(this.id,"-gridLines"),zIndex:1})),this.tickLineGroupSelection=Br.select(this.tickLineGroup,zr,!1),this.tickLabelGroupSelection=Br.select(this.tickLabelGroup,Fo,!1),this.gridLineGroupSelection=Br.select(this.gridLineGroup,zr,!1),this.line=new dl,this.tick=this.createTick(),this.gridLine=new hl,this.label=this.createLabel(),this.defaultTickMinSpacing=t.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new ul,this._titleCaption=new ol,this.gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new gr,this.refreshScale(),this.destroyFns.push(this._titleCaption.registerInteraction(this.moduleCtx,"root")),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(e.regionManager.getRegion("series").addListener("hover",(t=>this.checkAxisHover(t)))),this.animationManager=e.animationManager,this.animationState=new yr("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines),this.destroyFns.push(e.layoutService.addListener("layout-complete",(t=>{null!=s&&null!=be(t.chart,s)&&this.animationState.transition("resize"),s=m({},t.chart)}))),!1!==(null==n?void 0:n.respondsToZoom)&&this.destroyFns.push(e.updateService.addListener("update-complete",(t=>{this.minRect=t.minRect})))}get type(){var t;return null!=(t=this.constructor.type)?t:""}set crossLines(t){var e,i;null==(e=this._crossLines)||e.forEach((t=>this.detachCrossLine(t))),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null==(i=this._crossLines)||i.forEach((t=>{this.attachCrossLine(t),this.initCrossLine(t)}))}get crossLines(){return this._crossLines}resetAnimation(t){"initial"===t&&this.animationState.transition("reset")}attachCrossLine(t){this.crossLineGroup.appendChild(t.group),this.crossLineGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group),this.crossLineGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach((t=>t()))}refreshScale(){var t;this.range=this.scale.range.slice(),null==(t=this.crossLines)||t.forEach(this.initCrossLine,this)}updateRange(){var t;const{range:e,visibleRange:i,scale:n}=this,s=(e[1]-e[0])/(i[1]-i[0]),a=s*i[0],o=e[0]-a;n.range=[o,o+s],null==(t=this.crossLines)||t.forEach((t=>{t.clippedRange=[e[0],e[1]]}))}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[n,s]=Kn(this.range);return t+e>=n-i&&t<=s+i}onLabelFormatChange(t,e,i){const{scale:n,fractionDigits:s}=this,a=!(n instanceof Pr)&&s>0?t=>"number"===typeof t?t.toFixed(s):String(t):t=>String(t);if(i&&n&&n.tickFormat)try{this.labelFormatter=n.tickFormat({ticks:t,specifier:i})}catch(o){this.labelFormatter=a,E.warnOnce("the axis label format string ".concat(i," is invalid. No formatting will be applied"))}else this.labelFormatter=a}setTickInterval(t){var e;this.scale.interval=null!=(e=this.tick.interval)?e:t}setTickCount(t,e,i){const{scale:n}=this,s=qa.is(n)||xo.is(n);if(t&&s)return"number"===typeof t?(n.tickCount=t,n.minTickCount=null!=e?e:0,void(n.maxTickCount=null!=i?i:1/0)):void(n instanceof yo&&this.setTickInterval(t))}onGridLengthChange(t,e){var i;(e&&!t||!e&&t)&&this.onGridVisibilityChange(),null==(i=this.crossLines)||i.forEach(this.initCrossLine,this)}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new cl}checkAxisHover(t){if(!this.interactionEnabled)return;this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.tickGenerationResult)return;const{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=this.calculateRotations(),s=this.label.getSideFlag();this.updatePosition();const a=this.getAxisLineCoordinates(),{tickData:o,combinedRotation:r,textBaseline:l,textAlign:h,primaryTickCount:c}=this.tickGenerationResult,d=this.tickLabelGroupSelection.nodes().map((t=>t.datum.tickId));if(this.updateSelections(a,o.ticks,{combinedRotation:r,textAlign:h,textBaseline:l,range:this.scale.range}),!t||this.animationManager.isSkipped())this.resetSelectionNodes();else{const t=this.calculateUpdateDiff(d,o);this.animationState.transition("update",t)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(s),this.updateTickLines(),this.updateTitle({anyTickVisible:o.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:n}),this.updateLayoutState(),c}getAxisLineCoordinates(){const[t,e]=Kn(this.range);return{x:0,y1:t,y2:e}}getTickLineCoordinates(t){const e=this.label.getSideFlag()*this.getTickSize(),i=Math.min(0,e);return{x1:i,x2:i+Math.abs(e),y:t.translationY}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:n,textBaseline:s,textAlign:a,range:o}=e,r=t.tickLabel,l=i.getSideFlag()*(this.getTickSize()+i.padding+this.seriesAreaPadding),h=""!==r&&null!=r;return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:n,rotationCenterX:l,text:r,textAlign:a,textBaseline:s,visible:h,x:l,y:0,range:o}}getTickSize(){return this.tick.enabled?this.tick.size:this.createTick().size}setTitleProps(t,e){var i;const{title:n}=this;if(n.enabled){if(t.color=n.color,t.fontFamily=n.fontFamily,t.fontSize=n.fontSize,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.enabled=n.enabled,t.wrapping=n.wrapping,n.enabled){const s=t.node,a=(null!=(i=n.spacing)?i:0)+e.spacing,o=this.label.getSideFlag(),r=Ps(this.rotation),l=-1===o&&r>Math.PI&&r<2*Math.PI?-1:1,h=l*o*Math.PI/2,c=1===l?"bottom":"top",{range:d}=this,u=Math.floor(l*o*(d[0]+d[1])/2),p=-1===o?Math.floor(l*-a):Math.floor(-a),{callbackCache:g}=this.moduleCtx,{formatter:m=t=>t.defaultValue}=n,f=g.call(m,this.getTitleFormatterParams());s.setProperties({rotation:h,text:f,textBaseline:c,visible:!0,x:u,y:p})}}else t.enabled=!1}calculateLayout(t){var e,i;const{rotation:n,parallelFlipRotation:s,regularFlipRotation:a}=this.calculateRotations(),o=this.label.getSideFlag(),r=o*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:s,regularFlipRotation:a,labelX:r,sideFlag:o}),this.updateLayoutState();const l=this.tickGenerationResult,{tickData:h,combinedRotation:c,textBaseline:d,textAlign:u}=l,p=y(l,["tickData","combinedRotation","textBaseline","textAlign"]),g=[],{x:v,y1:x,y2:b}=this.getAxisLineCoordinates(),S=new ts(v+Math.min(o*this.seriesAreaPadding,0),x,this.seriesAreaPadding,b-x);if(g.push(S),this.tick.enabled&&h.ticks.forEach((t=>{const{x1:e,x2:i,y:n}=this.getTickLineCoordinates(t),s=new ts(e,n,i-e,0);g.push(s)})),this.label.enabled){const t=new Fo;h.ticks.forEach((e=>{const i=this.getTickLabelProps(e,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range});if(!i.visible)return;t.setProperties(f(m({},i),{translationY:Math.round(e.translationY)}));const n=t.computeTransformedBBox();n&&g.push(n)}))}if(null==(e=this.title)?void 0:e.enabled){const t=new ol,e=ts.merge(g).width;this.setTitleProps(t,{spacing:e});const i=t.node.computeTransformedBBox();i&&g.push(i)}const k=(t=>{const e=new os,{rotation:i,translationX:n,translationY:s,rotationCenterX:a,rotationCenterY:o}=this.getAxisTransform();return os.updateTransformMatrix(e,1,1,i,n,s,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:a,rotationCenterY:o}),e.transformBBox(t)})(ts.merge(g)),w=this.isAnySeriesActive();return null==(i=this.crossLines)||i.forEach((t=>{var e;t.sideFlag=-o,t.direction=n===-Math.PI/2?"x":"y",t instanceof pr&&(t.label.parallel=null!=(e=t.label.parallel)?e:this.label.parallel),t.parallelFlipRotation=s,t.regularFlipRotation=a,t.calculateLayout(w,this.reverse)})),{primaryTickCount:t=p.primaryTickCount,bbox:k}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}setDomain(t){this.dataDomain=this.normaliseDataDomain(t),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;qa.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=Gs(this.rotation);return{rotation:t,parallelFlipRotation:Ps(t),regularFlipRotation:Ps(t-Math.PI/2)}}generateTicks(t){let{primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:n,labelX:s,sideFlag:a}=t;var o;const{scale:r,tick:l,label:{parallel:h,rotation:c,fontFamily:d,fontSize:u,fontStyle:p,fontWeight:g}}=this,y=void 0!==e,{defaultRotation:v,configuredRotation:x,parallelFlipFlag:b,regularFlipFlag:S}=Wo({rotation:c,parallel:h,regularFlipRotation:n,parallelFlipRotation:i}),k=x+v,w=new os,{maxTickCount:M}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!=(o=l.maxSpacing)?o:NaN}),D=!(qa.is(r)||xo.is(r))||isNaN(M)?10:M;let C=Vo(h,x,0,a,S);const L=function(t,e,i,n){return t&&!e?i*n===-1?"hanging":"bottom":"middle"}(h,x,a,b),R={fontFamily:d,fontSize:u,fontStyle:p,fontWeight:g,textBaseline:L,textAlign:C};let I={rawTicks:[],ticks:[],labelCount:0},A=0,T=0,N=!0,E=!1;for(;N&&A<=D&&!E;){T=0,C=Vo(h,x,0,a,S);const t=this.getTickStrategies({secondaryAxis:y,index:A});for(const i of t){({tickData:I,index:A,autoRotation:T,terminate:E}=i({index:A,tickData:I,textProps:R,labelOverlap:N,terminate:E,primaryTickCount:e}));const t=0!==x||0!==T,n=k+T;C=Vo(h,x,T,a,S),N=!!this.label.avoidCollisions&&this.checkLabelOverlap(n,t,w,I.ticks,s,f(m({},R),{textAlign:C}))}}const O=v+x+T;return!y&&I.rawTicks.length>0&&(e=I.rawTicks.length),{tickData:I,primaryTickCount:e,combinedRotation:O,textBaseline:L,textAlign:C}}getTickStrategies(t){let{index:e,secondaryAxis:i}=t;const{scale:n,label:s,tick:a}=this,o=qa.is(n)||xo.is(n),r=s.enabled&&s.avoidCollisions,l=!o&&0!==e&&r,h=!0===s.autoRotate&&void 0===s.rotation,c=[];let d;d=this.tick.values?3:i?1:l?2:0;if(c.push((t=>{let{index:e,tickData:i,primaryTickCount:n,terminate:s}=t;return this.createTickData(d,e,i,s,n)})),!o&&!isNaN(a.minSpacing)){const t=t=>{let{index:e,tickData:i,primaryTickCount:n,terminate:s}=t;return this.createTickData(2,e,i,s,n)};c.push(t)}if(!r)return c;if(s.autoWrap){const t=t=>{let{index:e,tickData:i,textProps:n}=t;return this.wrapLabels(i,e,n)};c.push(t)}else if(h){const t=t=>{let{index:e,tickData:i,labelOverlap:n,terminate:s}=t;return{index:e,tickData:i,autoRotation:this.getAutoRotation(n),terminate:s}};c.push(t)}return c}createTickData(t,e,i,n,s){var a;const{scale:o,tick:r}=this,{maxTickCount:l,minTickCount:h,defaultTickCount:c}=this.estimateTickCount({minSpacing:r.minSpacing,maxSpacing:null!=(a=r.maxSpacing)?a:NaN}),d=qa.is(o)||xo.is(o),u=!d||isNaN(l)?10:l;let p=d?Math.max(c-e,h):l;const g=void 0===r.interval&&void 0===r.values&&p>h&&(d||2===t);let m=!0;for(;m&&e<=u;){const n=i.rawTicks;p=d?Math.max(c-e,h):l;const{rawTicks:a,ticks:o,labelCount:r}=this.getTicks({tickGenerationType:t,previousTicks:n,tickCount:p,minTickCount:h,maxTickCount:l,primaryTickCount:s});i.rawTicks=a,i.ticks=o,i.labelCount=r,m=!!g&&Hr(a,n),e++}const f=void 0!==r.interval||void 0!==r.values;return n||(n=f),{tickData:i,index:e,autoRotation:0,terminate:n}}checkLabelOverlap(t,e,i,n,s,a){os.updateTransformMatrix(i,1,1,t,0,0);const o=this.createLabelData(n,s,a,i),r=function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e);return function(t,e){const i=[];for(let n=0;n<t.length;n++){const s=t[n],{point:{x:a,y:o},label:{text:r}}=s;let{label:{width:l,height:h}}=s;if(l+=null!=e?e:0,h+=null!=e?e:0,i.some((t=>Vr(t,a,o,l,h))))return!0;i.push({index:n,text:r,x:a,y:o,width:l,height:h,datum:s})}return!1}(o,r)}createLabelData(t,e,i,n){const s=[],a=new _o(i);for(const{tickLabel:o,translationY:r}of t){if(""===o||null==o)continue;const{width:t,height:i}=a.size(o),l=Ko(o,new ts(e,r,t,i),e,r,n);s.push(l)}return s}getAutoRotation(t){var e;return t?Ps(Gs(null!=(e=this.label.autoRotateAngle)?e:0)):0}getTicks(t){let{tickGenerationType:e,previousTicks:i,tickCount:n,minTickCount:s,maxTickCount:a,primaryTickCount:o}=t;var r;const{range:l,scale:h,visibleRange:c}=this;let d;switch(e){case 3:if(qa.is(h)){const[t,e]=Kn(h.getDomain().map(Number));d=this.tick.values.filter((i=>i>=t&&i<=e)).sort(((t,e)=>t-e))}else d=this.tick.values;break;case 1:d=qa.is(h)?this.updateSecondaryAxisTicks(o):this.createTicks(n,s,a);break;case 2:d=this.filterTicks(i,n);break;default:d=this.createTicks(n,s,a)}this.fractionDigits=d.fractionDigits>=0?d.fractionDigits:0;const u=(null!=(r=h.bandwidth)?r:0)/2,p=[];let g=0;const m=new Map,f=Math.max(0,Math.floor(c[0]*d.length)),y=Math.min(d.length,Math.ceil(c[1]*d.length)),v=d.slice(f,y);this.onLabelFormatChange(v,d,this.label.format);for(let x=0;x<v.length;x++){const t=v[x],e=h.convert(t)+u;if(l.length>0&&!this.inRange(e,0,.001))continue;const i=this.formatTick(t,f+x);let n=i;if(m.has(n)){const t=m.get(n);m.set(n,t+1),n="".concat(n,"_").concat(t)}else m.set(n,1);p.push({tick:t,tickId:n,tickLabel:i,translationY:Math.floor(e)}),""!==i&&null!=i&&g++}return{rawTicks:d,ticks:p,labelCount:g}}filterTicks(t,e){var i;const n=!isNaN(this.tick.minSpacing)||!isNaN(null!=(i=this.tick.maxSpacing)?i:NaN)?Math.ceil(t.length/e):2;return t.filter(((t,e)=>e%n===0))}createTicks(t,e,i){var n,s,a;return this.setTickCount(t,e,i),null!=(a=null==(s=(n=this.scale).ticks)?void 0:s.call(n))?a:[]}estimateTickCount(t){let{minSpacing:e,maxSpacing:i}=t;const{minRect:n,label:{avoidCollisions:s}}=this;if(!s)return{minTickCount:qa.defaultMaxTickCount,maxTickCount:qa.defaultMaxTickCount,defaultTickCount:qa.defaultMaxTickCount};const a=this.calculateRangeWithBleed(),o=Math.max(this.defaultTickMinSpacing,a/qa.defaultMaxTickCount);let r=!isNaN(i);isNaN(e)&&(e=o),isNaN(i)&&(i=a),e>i&&(e===o?e=i:i=e);let l=1;n&&(l="x"===this.direction?n.width:n.height),r&&(r=l<o);const h=Wn(1,Math.floor(a/e),r?Math.min(Math.floor(a/l),100):100),c=Math.min(h,Math.ceil(a/i));return{minTickCount:c,maxTickCount:h,defaultTickCount:Wn(c,qa.defaultTickCount,h)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines(t){let{rotation:e,parallelFlipRotation:i,regularFlipRotation:n}=t;var s;const a=this.label.getSideFlag(),o=this.isAnySeriesActive();null==(s=this.crossLines)||s.forEach((t=>{var s;t.sideFlag=-a,t.direction=e===-Math.PI/2?"x":"y",t instanceof pr&&(t.label.parallel=null!=(s=t.label.parallel)?s:this.label.parallel),t.parallelFlipRotation=i,t.regularFlipRotation=n,t.update(o)}))}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each((e=>{e.strokeWidth=t.width,e.stroke=t.color,e.x1=i*this.getTickSize(),e.x2=0}))}calculateAvailableRange(){return Yn(this.range)}calculateRangeWithBleed(){const t=1/Yn(this.visibleRange);return Xn(this.calculateAvailableRange()*t,2)}calculateDomain(){const t=this.boundSeries.filter((t=>this.includeInvisibleDomains||t.isEnabled())).flatMap((t=>t.getDomain(this.direction)));this.setDomain(t)}getAxisTransform(){return{rotation:Gs(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:n,gridLineGroupSelection:s,gridPadding:a,gridLength:o}=this,{rotation:r}=this.calculateRotations(),l=this.label.getSideFlag(),h=Math.floor(n.x),c=Math.floor(n.y);t.setProperties({rotation:r,translationX:h,translationY:c}),i.setProperties({rotation:r,translationX:h,translationY:c}),e.datum=this.getAxisTransform(),s.each((t=>{t.x1=a,t.x2=-l*o+a}))}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],(t=>t.append(new zr)),(t=>t.tickId)),this.tickLineGroupSelection.update(e,(t=>t.appendChild(new zr)),(t=>t.tickId)),this.tickLabelGroupSelection.update(e.map((t=>this.getTickLabelProps(t,i))),(t=>t.appendChild(new Fo)),(t=>t.tickId))}updateAxisLine(){const{line:t}=this,e=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:e})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:n,gridLength:s}=this;0!==s&&0!==e.length&&this.gridLineGroupSelection.each(((a,o,r)=>{const{stroke:l,lineDash:h}=e[r%e.length];a.setProperties({x1:n,x2:-t*s+n,fill:void 0,stroke:l,strokeWidth:i,lineDash:h})}))}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each(((t,e)=>{t.setProperties(e,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])}))}wrapLabels(t,e,i){const{parallel:n,maxWidth:s,maxHeight:a}=this.label;let o=this.maxThickness,r=Math.round(this.calculateAvailableRange()/t.labelCount);return n&&([o,r]=[r,o]),t.ticks.forEach((t=>{const{text:e}=Fo.wrap(t.tickLabel,null!=s?s:o,null!=a?a:r,i,"hyphenate");t.tickLabel=e})),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:n,lineNode:s,tickLineGroup:a,tickLabelGroup:o}=this;if(!i)return void(n.enabled=!1);let r=0;if(i.enabled&&t.anyTickVisible){const t=Mo.computeBBox([a,o,s]);r+=(0===e?t.width:t.height)+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(n,{spacing:r})}formatTick(t,e){return this.datumFormatter(e)(t)}formatDatum(t){return String(t)}datumFormatter(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{label:e,labelFormatter:i,fractionDigits:n,moduleCtx:{callbackCache:s}}=this;return e.formatter?a=>{var o;return null!=(o=s.call(e.formatter,{value:n>0?a:String(a),index:t,fractionDigits:n,formatter:i}))?o:a}:i?t=>{var e;return null!=(e=s.call(i,t))?e:String(t)}:t=>String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some((t=>this.includeInvisibleDomains||t.isEnabled()))}clipTickLines(t,e,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new ts(t,e,i,n))}clipGrid(t,e,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new ts(t,e,i,n))}calculatePadding(t,e){const i=.01*Math.abs(this.reverse?e:t);return[i,i]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce(((t,e)=>{const i=e.getKeys(this.direction),n=e.getNames(this.direction);for(let s=0;s<i.length;s++)t.push({key:i[s],name:n[s]});return t}),[]);return{direction:this.direction,boundSeries:e,defaultValue:null==(t=this.title)?void 0:t.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return m({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){return null!=this.axisContext||(this.axisContext=this.createAxisContext()),f(m({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:qa.is(this.scale),keys:()=>this.boundSeries.flatMap((t=>t.getKeys(this.direction))),seriesKeyProperties:()=>this.boundSeries.reduce(((t,e)=>(e.getKeyProperties(this.direction).forEach((e=>{t.indexOf(e)<0&&t.push(e)})),t)),[]),scaleValueFormatter:t=>{var e,i;return t?null==(i=(e=this.scale).tickFormat)?void 0:i.call(e,{specifier:t}):this.formatDatum},scaleBandwidth:()=>{var t;return null!=(t=this.scale.bandwidth)?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null==(i=(e=this.scale).invert)?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,i=fl(pl(this));Ts(this.id,"axis-group",e,[this.axisGroup],i.group),Ts(this.id,"line",e,[this.lineNode],i.line),Ts(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,((t,e)=>e.tickId),t),Ts(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,((t,e)=>e.tickId),t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:n}=this,s=pl(this);fr([this.axisGroup],((t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY}))),fr([t,e],vl(s)),fr([i],((t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX}))),fr([n],bl())}calculateUpdateDiff(t,e){const i=new Set,n=new Set,s={},a=Math.max(t.length,e.ticks.length);for(let o=0;o<a;o++){const a=e.ticks[o],r=t[o],l=null==a?void 0:a.tickId;s[null!=l?l:r]=a,r!==l&&(n.has(l)?n.delete(l):l&&i.add(l),i.has(r)?i.delete(r):r&&n.add(r))}return{changed:i.size>0||n.size>0,added:i,removed:n}}isReversed(){return this.reverse}};Sl.defaultTickMinSpacing=50,x([Xs($s)],Sl.prototype,"nice",2),x([Xs($s)],Sl.prototype,"reverse",2),x([Xs(ba)],Sl.prototype,"keys",2),x([Xs(Js,{optional:!0})],Sl.prototype,"title",2),x([qr(((t,e,i)=>t.onGridLengthChange(e,i)))],Sl.prototype,"gridLength",2);var kl=Sl,wl=class extends cl{constructor(){super(...arguments),this.autoRotateAngle=335}};x([Xs($s,{optional:!0})],wl.prototype,"autoRotate",2),x([Xs(oa)],wl.prototype,"autoRotateAngle",2);var Ml=class t extends kl{constructor(){super(...arguments),this.thickness=0,this.position="left"}static is(e){return e instanceof t}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t,e){return this.updateDirection(),super.update(t,e)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return f(m({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){ja(t,pr)}createLabel(){return new wl}};x([Xs(sa)],Ml.prototype,"thickness",2),x([Xs(Ca)],Ml.prototype,"position",2);var Dl=Ml,Cl=class extends Ha{constructor(){super(...arguments),this.minSpacing=NaN}};x([Xs(_a),Us(NaN)],Cl.prototype,"minSpacing",2);var Ll=class extends Dl{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Hs),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}createTick(){return new Cl}normaliseDataDomain(t){const e=[],i=new Set;for(const n of t){const t=n instanceof Date?n.getTime():n;i.has(t)||(i.add(t),e.push(n))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map((t=>{var e;return null==(e=t.getBandScalePadding)?void 0:e.call(t)})).filter((t=>null!=t));t.length>0&&(this.scale.paddingInner=Math.min(...t.map((t=>t.inner))),this.scale.paddingOuter=Math.max(...t.map((t=>t.outer))))}return super.calculateDomain()}};Ll.className="CategoryAxis",Ll.type="category",x([Xs(aa)],Ll.prototype,"groupPaddingInner",2);var Rl=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter(((t,e)=>e!==this.number)):[]}};function Il(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new Rl;let n=0;return e&&t.forEach((t=>n=Math.max(n,t.labels.length))),t.forEach((t=>{if(e)for(;t.labels.length<n;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),n=i.length-1;i.forEach(((e,i)=>{const s=t.children,a=s.find((t=>t.label===e)),o=i!==n;if(a&&o)t=a;else{const i=new Rl(e,t);i.number=s.length,s.push(i),o&&(t=i)}}))}(i,t)})),i}function Al(t,e,i){const n=i/(e.number-t.number);e.change-=n,e.shift+=i,t.change+=n,e.prelim+=i,e.mod+=i}function Tl(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function Nl(t,e){const i=t.children;if(i.length){let n=i[0];i.forEach((t=>{Nl(t,e),n=function(t,e,i){const n=t.getLeftSibling();if(n){let s=t,a=t,o=n,r=a.getLeftmostSibling(),l=a.mod,h=s.mod,c=o.mod,d=r.mod;for(;o.nextRight()&&a.nextLeft();){o=o.nextRight(),a=a.nextLeft(),r=r.nextLeft(),s=s.nextRight(),s.ancestor=t;const n=o.prelim+c-(a.prelim+l)+i;n>0&&(Al(Tl(o,t,e),t,n),l+=n,h+=n),c+=o.mod,l+=a.mod,d+=r.mod,h+=s.mod}o.nextRight()&&!s.nextRight()?(s.thread=o.nextRight(),s.mod+=c-h):(a.nextLeft()&&!r.nextLeft()&&(r.thread=a.nextLeft(),r.mod+=l-d),e=t)}return e}(t,n,e)})),function(t){const e=t.children;if(e){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const s=e[n];s.prelim+=t,s.mod+=t,i+=s.change,t+=s.shift+i}}}(t);const s=(i[0].prelim+i.at(-1).prelim)/2,a=t.getLeftSibling();a?(t.prelim=a.prelim+e,t.mod=t.prelim-s):t.prelim=s}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}var El=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:n}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),n>this.bottom&&(this.bottom=n),n<this.top&&(this.top=n)}};function Ol(t,e,i){t.x=t.prelim+e,t.y=t.depth,i.update(t),t.children.forEach((n=>Ol(n,e+t.mod,i)))}function Pl(t){const e=t.children;let i=0;e.forEach((t=>{Pl(t),t.children.length?i+=t.leafCount:i++})),t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function Bl(t){const e=new Fl;return Nl(t,1),Ol(t,-t.prelim,e),Pl(t),e}var Fl=class{constructor(){this.dimensions=new El,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,(t=>({x:t.x,y:t.y}))),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=this.leafCount-1,o=this.depth,r=this.dimensions;let l=1,h=1;if(t>0&&a){const e=(r.right-r.left)/a;l=t/a/e,s&&(l=-l)}if(e>0&&o){const t=(r.bottom-r.top)/o;h=e/o/t}const c=new El;this.nodes.forEach((t=>{t.screenX=t.x*l,t.screenY=t.y*h,c.update(t,(t=>({x:t.screenX,y:t.screenY})))}));const d=-c.left,u=-c.top;this.nodes.forEach((t=>{t.screenX+=d+i,t.screenY+=u+n}))}},_l=class extends cl{constructor(){super(...arguments),this.grid=!1}};x([Xs($s)],_l.prototype,"grid",2);var Gl=class extends Dl{constructor(t){super(t,new Hs),this.tickScale=new Hs,this.line=new dl,this.label=new _l,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:n,tickScale:s,scale:a}=this;a.paddingOuter=.1,a.paddingInner=2*a.paddingOuter,this.refreshScale(),s.paddingInner=1,s.paddingOuter=0,this.gridLineSelection=Br.select(n,zr),this.axisLineSelection=Br.select(e,zr),this.separatorSelection=Br.select(e,zr),this.labelSelection=Br.select(i,Fo)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,n=(t[1]-t[0])/(e[1]-e[0]),s=n*e[0],a=t[0]-s;this.tickScale.range=i.range=[a,a+n],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,n=this.tickTreeLayout,s=this.lineHeight;n&&n.resize(Math.abs(i[1]-i[0]),n.depth*s,(Math.min(i[0],i[1])||0)+(null!=(t=e.bandwidth)?t:0)/2,-n.depth*s,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}createTick(){return new Cl}calculateDomain(){var t;const{direction:e}=this;let i=null;const n=this.boundSeries.filter((t=>t.visible)).flatMap((t=>{if("y"===e||i)return t.getDomain(e);if(null===i){const n=t.getDomain(e);return i=Vt(n[0]),n}return[]}));this.setDomain(null!=(t=ln(n))?t:pn(n));const{domain:s}=this.dataDomain;this.tickTreeLayout=Bl(Il(s)),this.tickScale.domain=s.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each(((t,e)=>{t.setProperties(e)}))}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each(((t,i)=>{t.x1=i.x1,t.x2=i.x2,t.y1=i.y,t.y2=i.y,t.visible=i.y>=e[0]-1e-7&&i.y<=e[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1}))}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each(((t,e)=>{t.setProperties(f(m({},e),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=e.x,t.x2=e.x,t.y1=e.y1,t.y2=e.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color}))}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:n,tickScale:s}=this,a=s.ticks(),o=i.getSideFlag(),r=this.gridLineSelection.update(t?a:[]);if(t){const{width:i,style:a}=e,l=a.length;r.each(((e,r,h)=>{const c=Math.round(s.convert(r));e.x1=0,e.x2=-o*t,e.y1=c,e.y2=c,e.visible=c>=n[0]&&c<=n[1];const{stroke:d,lineDash:u}=a[h%l];e.stroke=d,e.strokeWidth=i,e.lineDash=u,e.fill=void 0}))}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:n},range:s,title:a,title:{formatter:o=t=>t.defaultValue}={}}=this,r=t.range[0],l=t.range[1],h=Math.abs(l-r)/t.domain.length||0,c=Math.ceil(e.fontSize/h),d=Gs(this.rotation),u=Math.abs(Math.cos(d))<1e-8,p=e.getSideFlag(),g=this.lineHeight,y=this.tickTreeLayout,v=t.ticks(),x=y?y.nodes:[],b=!!y&&y.depth>1,{defaultRotation:S,configuredRotation:k,parallelFlipFlag:w}=Wo({rotation:e.rotation,parallel:i,regularFlipRotation:Ps(d-Math.PI/2),parallelFlipRotation:Ps(d)}),M=[],D=new Map;let C=0;const L=new Fo,R=(t,i)=>{var r;if(L.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===w?"bottom":"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX}),0===i){if(!((null==a?void 0:a.enabled)&&v.length>0))return!1;const i=n.call(o,this.getTitleFormatterParams());L.setProperties({fill:a.color,fontFamily:a.fontFamily,fontSize:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight,text:i,textBaseline:"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX})}else{if(i%c!==0)return!1;if(!(t.screenX>=s[0]&&t.screenX<=s[1]))return!1;e.formatter?L.text=null!=(r=n.call(e.formatter,{value:String(t.label),index:i}))?r:String(t.label):L.text=String(t.label)}return!0};x.forEach(((t,e)=>{if(!R(t,e))return;const i=L.computeTransformedBBox();if(!i)return;D.set(e,i);!t.children.length&&i.width>C&&(C=i.width)}));const I=p*e.padding,A=this.label.grid,T=[];x.forEach(((t,e)=>{let i=R(t,e);const n=e;L.x=I,L.rotationCenterX=I;const s=!t.children.length;if(s)L.rotation=k,L.textAlign="end",L.textBaseline="middle";else{L.translationX-=C-g+this.label.padding;const e=t.leafCount*h,s=D.get(n);s&&s.width>e?(i=!1,D.delete(n)):L.rotation=u?S:-Math.PI/2}if(t.parent&&b){const e=s?t.screenX-h/2:t.screenX-t.leafCount*h/2;if(s)(t.number!==t.children.length-1||A)&&T.push({y:e,x1:0,x2:-C-2*this.label.padding});else{const i=-C-2*this.label.padding+t.screenY;T.push({y:e,x1:i+g,x2:i})}}let a;if(i){const t=L.computeTransformedBBox();t&&D.set(e,t),a=f(m({},{fill:(o=L).fill,fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight,rotation:o.rotation,rotationCenterX:o.rotationCenterX,rotationCenterY:o.rotationCenterY,text:o.text,textAlign:o.textAlign,textBaseline:o.textBaseline,translationX:o.translationX,translationY:o.translationY,visible:o.visible,x:o.x,y:o.y}),{visible:i})}else D.delete(e),a={visible:i};var o;M.push(a)}));let N=0;T.forEach((t=>N=Math.min(N,t.x2))),T.push({y:Math.max(r,l),x1:0,x2:N});const E=[],O=[];T.forEach((t=>{if(t.y>=s[0]-1e-7&&t.y<=s[1]+1e-7){const{x1:e,x2:i,y:n}=t,s=new ts(Math.min(e,i),n,Math.abs(e-i),0);O.push(s),E.push({x1:e,x2:i,y:n})}}));const P=[],B=[],F=y?y.depth+1:1;for(let m=0;m<F;m++){const t=v.length>0&&(0===m||A&&b),e=m>0?-C-2*this.label.padding-(m-1)*g:0,i=new ts(e,Math.min(...s),0,Math.abs(s[1]-s[0]));B.push(i),P.push({x:e,y1:s[0],y2:s[1],visible:t})}return{bbox:(t=>{const e=new os,{rotation:i,translationX:n,translationY:s,rotationCenterX:a,rotationCenterY:o}=this.getAxisTransform();return os.updateTransformMatrix(e,1,1,i,n,s,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:a,rotationCenterY:o}),e.transformBBox(t)})(ts.merge([...D.values(),...O,...B])),tickLabelLayout:M,separatorLayout:E,axisLineLayout:P}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:n}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:n,primaryTickCount:void 0}}};Gl.className="GroupedCategoryAxis",Gl.type="grouped-category",x([Xs(fa,{optional:!0})],Gl.prototype,"labelColor",2);var zl=class t{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:i,height:n,pixelRatio:s,position:a,insertAsFirstChild:o}=e;this.insertAsFirstChild=null!=o&&o,this.pixelRatio=function(){if("undefined"===typeof navigator)return!1;const t=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(null==t)return!1;const[e,i]=t[1].split("_").map(Number);return e<16||16===e&&i<6}()?1:null!=s?s:kn("devicePixelRatio"),this.element=wn("canvas"),this.element.width=Math.round((null!=i?i:this.width)*this.pixelRatio),this.element.height=Math.round((null!=n?n:this.height)*this.pixelRatio),a&&(this.element.style.position=a),this.context=this.element.getContext("2d"),this.onEnabledChange(),this.resize(null!=i?i:0,null!=n?n:0),t.debugContext(this.context)}static is(e){return e instanceof t}drawImage(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.drawImage(this.context.canvas,e,i)}toDataURL(t){return this.element.toDataURL(t)}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:n,pixelRatio:s}=this;i.width=Math.round(t*s),i.height=Math.round(e*s),n.setTransform(s,0,0,s,0,0),i.style.width=t+"px",i.style.height=e+"px",this.width=t,this.height=e}snapshot(){}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onContainerChange(t,e){var i,n,s,a;t!==e&&(null==(i=this.element.parentNode)||i.removeChild(this.element),this.insertAsFirstChild&&(null==(n=this.container)?void 0:n.firstChild)?null==(s=this.container)||s.insertBefore(this.element,this.container.firstChild):null==(a=this.container)||a.appendChild(this.element))}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"block":"none")}static debugContext(t){if(In.check("canvas")){const e=t.save.bind(t),i=t.restore.bind(t);let n=0;Object.assign(t,{save(){e(),n++},restore(){if(0===n)throw new Error("AG Charts - Unable to restore() past depth 0");i(),n--},verifyDepthZero(){if(0!==n)throw new Error("AG Charts - Save/restore depth is non-zero: ".concat(n))}})}}};x([qr((t=>t.onEnabledChange()))],zl.prototype,"enabled",2),x([qr(((t,e,i)=>t.onContainerChange(e,i)))],zl.prototype,"container",2);var Wl=zl,Vl=class t{constructor(t,e){this.canvas=t,this.markDirty=e,this.debug=In.create(!0,"scene"),this.layersMap=new Map,this.nextZIndex=0,this.nextLayerId=0}static sortLayers(t,e){var i,n;return ko([t.zIndex,...null!=(i=t.zIndexSubOrder)?i:[void 0,void 0],t.id],[e.zIndex,...null!=(n=e.zIndexSubOrder)?n:[void 0,void 0],e.id],bo)}get size(){return this.layersMap.size}forEach(e){Array.from(this.layersMap.values()).sort(t.sortLayers).forEach(e)}resize(t,e){this.canvas.resize(t,e),this.layersMap.forEach((i=>{let{canvas:n}=i;return n.resize(t,e)}))}addLayer(t){const{width:e,height:i,pixelRatio:n}=this.canvas,{zIndex:s=this.nextZIndex++,name:a,zIndexSubOrder:o,getComputedOpacity:r,getVisibility:l}=t,h=new Wl({width:e,height:i,pixelRatio:n,position:"absolute"}),c={id:this.nextLayerId++,name:a,canvas:h,zIndex:s,zIndexSubOrder:o,getComputedOpacity:r,getVisibility:l};return s>=this.nextZIndex&&(this.nextZIndex=s+1),this.layersMap.set(h,c),this.debug("Scene.addLayer() - layers",this.layersMap),c.canvas}removeLayer(t){this.layersMap.has(t)&&(this.layersMap.delete(t),t.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}moveLayer(t,e,i){const n=this.layersMap.get(t);n&&(n.zIndex=e,n.zIndexSubOrder=i,this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layersMap))}clear(){this.layersMap.clear()}};function Kl(t,e,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!In.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:a=0,layersSkipped:o=0,nodesRendered:r=0,nodesSkipped:l=0}=null!=n?n:{},h=performance.now(),c=e,{start:d}=c,u=y(c,["start"]),p=Object.entries(u).map((t=>{let[e,i]=t;return Xl(e,i)})).filter((t=>null!=t)).join(" + "),g=Object.entries(s).map((t=>{let[e,i]=t;return"".concat(e,": ").concat(i)})).join(" ; "),m=In.check("scene:stats:verbose"),f=["".concat(Xl("\u23f1\ufe0f",d,h)," (").concat(p,")"),"".concat(g),"Layers: ".concat(m?Ul(a,o):t.size),m?"Nodes: ".concat(Ul(r,l)):null].filter(Wt),v=new Map(f.map((t=>[t,Fo.getTextSize(t,i.font)]))),x=Math.max(...Array.from(v.values(),(t=>t.width))),b=function(t,e){let i=0;for(const n of t)i+=e(n);return i}(v.values(),(t=>t.height));i.save(),i.fillStyle="white",i.fillRect(0,0,x,b),i.fillStyle="black";let S=0;for(const[y,k]of v.entries())S+=k.height,i.fillText(y,2,S);i.restore()}function Yl(t){var e,i;return In.check(!0,"scene")?m(m({node:t,name:null!=(e=t instanceof Mo?t.name:null)?e:t.id,dirty:es[t.dirty]},(null==(i=t.parent)?void 0:i.isVirtual)?{virtualParentDirty:es[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map((t=>Yl(t))).reduce(((t,e)=>{let{name:i}=e;const{node:{visible:n,opacity:s,zIndex:a,zIndexSubOrder:o},node:r,virtualParent:l}=e;(!n||s<=0)&&(i="(".concat(i,")")),r instanceof Mo&&r.isLayer()&&(i="*".concat(i,"*"));const h=["".concat(null!=i?i:"<unknown>"),"z: ".concat(a),o&&"zo: ".concat(o.map((t=>"function"===typeof t?"".concat(t()," (fn)"):t)).join(" / ")),l&&"(virtual parent)"].filter((t=>!!t)).join(" ");let c=h,d=1;for(;null!=t[c]&&d<100;)c="".concat(h," (").concat(d++,")");return t[c]=e,t}),{})):{}}function Hl(t){var e;if(0===t.dirty)return{dirtyTree:{},paths:[]};const i=t.children.map((t=>Hl(t))).filter((t=>t.paths.length>0)),n=Mo.is(t)&&null!=(e=t.name)?e:t.id,s=i.length?i.flatMap((t=>t.paths)).map((t=>"".concat(n,".").concat(t))):[n];return{dirtyTree:m({name:n,node:t,dirty:es[t.dirty]},i.map((t=>t.dirtyTree)).filter((t=>null!=t.dirty)).reduce(((t,e)=>{var i;return t[null!=(i=e.name)?i:"<unknown>"]=e,t}),{})),paths:s}}function Ul(t,e){const i=t+e;return"".concat(t," / ").concat(i," (").concat(Math.round(100*t/i),"%)")}function Xl(t,e,i){const n=null!=i?i-e:e;return"".concat(t,": ").concat(Math.round(100*n)/100,"ms")}var jl=class{constructor(t){let{width:e,height:i,pixelRatio:n,canvasPosition:s}=t;this.debug=In.create(!0,"scene"),this.id=_n(this),this.root=null,this.isDirty=!1,this.canvas=new Wl({width:e,height:i,pixelRatio:n,position:s,insertAsFirstChild:"absolute"===s}),this.layersManager=new Vl(this.canvas,(()=>{this.isDirty=!0}))}get width(){var t,e;return null!=(e=null==(t=this.pendingSize)?void 0:t[0])?e:this.canvas.width}get height(){var t,e;return null!=(e=null==(t=this.pendingSize)?void 0:t[1])?e:this.canvas.height}setContainer(t){return this.canvas.container=t,this}setRoot(t){var e;return this.root===t||(this.isDirty=!0,null==(e=this.root)||e._setLayerManager(),this.root=t,t&&(t.visible=!0,t._setLayerManager(this.layersManager))),this}attachNode(t){var e;return null==(e=this.root)||e.appendChild(t),()=>this.removeChild(t)}appendChild(t){var e;return null==(e=this.root)||e.appendChild(t),this}removeChild(t){var e;return null==(e=this.root)||e.removeChild(t),this}download(t,e){var i;Mn(this.canvas.toDataURL(e),null!=(i=null==t?void 0:t.trim())?i:"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,e){return t=Math.round(t),e=Math.round(e),t>0&&e>0&&(t!==this.width||e!==this.height)&&(this.pendingSize=[t,e],this.isDirty=!0,!0)}render(t){return S(this,null,(function*(){var e,i;const{debugSplitTimes:n={start:performance.now()},extraDebugStats:s}=null!=t?t:{},{canvas:a,canvas:{context:o}={},root:r,pendingSize:l}=this;if(!o)return;const h=performance.now();if(l&&(this.layersManager.resize(...l),this.pendingSize=void 0),r&&!r.visible)return void(this.isDirty=!1);if(r&&!this.isDirty)return this.debug.check()&&this.debug("Scene.render() - no-op",{redrawType:es[r.dirty],tree:Yl(r)}),void Kl(this.layersManager,n,o,void 0,s);const c={ctx:o,devicePixelRatio:null!=(e=this.canvas.pixelRatio)?e:1,forceRender:!0,resized:Boolean(l),debugNodes:{}};In.check("scene:stats:verbose")&&(c.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let d=!1;if((!r||r.dirty>=1)&&(d=!0,a.clear()),r&&In.check("scene:dirtyTree")){const{dirtyTree:t,paths:e}=Hl(r);In.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}if(r&&d&&(this.debug("Scene.render() - before",{redrawType:es[r.dirty],canvasCleared:d,tree:Yl(r)}),r.visible&&(r.preRender(),o.save(),r.render(c),o.restore())),n["\u270d\ufe0f"]=performance.now()-h,this.layersManager.size&&d){const t=performance.now();o.save(),o.resetTransform(),this.layersManager.forEach((t=>{t.canvas.enabled&&t.getVisibility()&&(o.globalAlpha=t.getComputedOpacity(),t.canvas.drawImage(o))})),o.restore(),n["\u26d9"]=performance.now()-t}null==(i=o.verifyDepthZero)||i.call(o),this.isDirty=!1,Kl(this.layersManager,n,o,c.stats,s),function(t,e){t.save();for(const[i,n]of Object.entries(e)){const e=n.computeTransformedBBox();e?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(i,e.x,e.y,e.width),t.fillText(i,e.x,e.y,e.width)):E.log("Scene.render() - no bbox for debugged node [".concat(i,"]."))}t.restore()}(o,c.debugNodes),r&&this.debug.check()&&this.debug("Scene.render() - after",{redrawType:es[r.dirty],tree:Yl(r),canvasCleared:d})}))}strip(){const{context:t,pixelRatio:e}=this.canvas;t.setTransform(e,0,0,e,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.canvas.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};jl.className="Scene";var Zl="\n/* Reset */\n".concat("\n[class^='ag-charts'],\n[class^='ag-charts']:focus,\n[class^='ag-charts']:after,\n[class^='ag-charts']:before {\n    box-sizing: border-box;\n    outline: none;\n}\n\nbutton[class^='ag-charts'] {\n    background: none;\n    border: 0;\n}\n\n","\n\n/* Icons */\n").concat("\n[class^='ag-charts-icon'] {\n    display: block;\n    /* speak: none; */\n    mask-size: contain;\n    mask-repeat: no-repeat;\n    background-color: currentColor;\n}\n\n.ag-charts-icon-zoom-in {\n    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+);\n}\n\n.ag-charts-icon-zoom-out {\n    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=);\n}\n\n.ag-charts-icon-reset {\n    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXJvdGF0ZS1jY3ciPjxwYXRoIGQ9Ik0zIDEyYTkgOSAwIDEgMCA5LTkgOS43NSA5Ljc1IDAgMCAwLTYuNzQgMi43NEwzIDgiLz48cGF0aCBkPSJNMyAzdjVoNSIvPjwvc3ZnPg==);\n}\n\n.ag-charts-icon-pan-left {\n    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGVmdCI+PHBhdGggZD0ibTE1IDE4LTYtNiA2LTYiLz48L3N2Zz4=);\n}\n\n.ag-charts-icon-pan-right {\n    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tcmlnaHQiPjxwYXRoIGQ9Im05IDE4IDYtNi02LTYiLz48L3N2Zz4=);\n}\n\n.ag-charts-icon-pan-start {\n    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZmlyc3QiPjxwYXRoIGQ9Im0xNyAxOC02LTYgNi02Ii8+PHBhdGggZD0iTTcgNnYxMiIvPjwvc3ZnPg==);\n}\n\n.ag-charts-icon-pan-end {\n    mask-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tbGFzdCI+PHBhdGggZD0ibTcgMTggNi02LTYtNiIvPjxwYXRoIGQ9Ik0xNyA2djEyIi8+PC9zdmc+);\n}\n\n","\n\n/* AG Charts Theme Default */\n").concat("\n.ag-charts-theme-default,\n.ag-charts-theme-default-dark {\n    /* Colors */\n    --ag-charts-active-color: var(--ag-active-color, #2196f3);\n    --ag-charts-background-color: var(--ag-background-color, #fff);\n    --ag-charts-foreground-color: var(--ag-foreground-color, #181d1f);\n    --ag-charts-border-color: var(--ag-border-color, #dddddd);\n\n    /* Sizing */\n    --ag-charts-font-size: var(--ag-font-size, 14px);\n    --ag-charts-size: var(--ag-grid-size, 8px);\n\n    /* Borders */\n    --ag-charts-border: var(--ag-borders, solid 1px);\n    --ag-charts-border-critical: var(--ag-borders-critical, solid 1px);\n\n    /* Toolbar */\n    --ag-charts-toolbar-foreground-color: var(--ag-header-foreground-color, var(--ag-charts-foreground-color));\n    --ag-charts-toolbar-background-color: var(\n        --ag-header-background-color,\n        color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 2%)\n    );\n    --ag-charts-toolbar-size: var(--ag-header-height, 48px);\n    --ag-charts-toolbar-padding: calc(var(--ag-charts-size) * 2);\n    --ag-charts-toolbar-border: var(--ag-charts-border, solid 1px) var(--ag-charts-border-color);\n    --ag-charts-toolbar-border-critical: var(--ag-charts-border-critical, solid 1px) var(--ag-charts-border-color);\n    --ag-charts-toolbar-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12%);\n    --ag-charts-toolbar-disabled-foreground-color: var(\n        --ag-disabled-foreground-color,\n        color-mix(in srgb, transparent, var(--ag-charts-toolbar-foreground-color) 50%)\n    );\n    --ag-charts-toolbar-disabled-background-color: var(\n        --ag-input-disabled-background-color,\n        color-mix(in srgb, var(--ag-charts-toolbar-background-color), var(--ag-charts-toolbar-foreground-color) 6%)\n    );\n    --ag-charts-toolbar-gap: var(--ag-charts-size);\n\n    /* Buttons */\n    --ag-charts-button-padding: var(--ag-charts-size);\n    --ag-charts-button-radius: var(--ag-border-radius, 4px);\n\n    /* Focus Indicator */\n    --ag-charts-focus-border: solid 2px var(--ag-input-focus-border-color, var(--ag-charts-active-color));\n    --ag-charts-focus-border-shadow: var(--ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-charts-focus-border) 47%));\n\n    /* Icons */\n    --ag-charts-icon-font-family: 'agChartsDefault';\n    --ag-charts-icon-font-weight: normal;\n    --ag-charts-icon-font-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color), 90%);\n}\n\n","\n\n/* AG Charts Theme Default Dark */\n").concat("\n.ag-charts-theme-default-dark {\n    /* Colors */\n    --ag-charts-background-color: var(--ag-background-color, color-mix(in srgb, #fff, #182230 97%));\n    --ag-charts-foreground-color: var(--ag-foreground-color, #fff);\n    --ag-charts-border-color: var(--ag-border-color, rgba(255, 255, 255, 0.16));\n    --ag-charts-hover-color: var(\n        --ag-row-hover-color,\n        color-mix(in srgb, transparent, var(--ag-charts-active-color) 20%)\n    );\n\n    /* Toolbar */\n    --ag-charts-toolbar-background-color: var(--ag-header-background-color, color-mix(in srgb, #fff, #182230 93%));\n}\n\n","\n");function ql(t){return new Promise((e=>{setTimeout((()=>e(void 0)),t)}))}var Jl=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise((e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch((t=>E.errorOnce(t)))}))}acquireImmediately(t){return S(this,null,(function*(){return!!this.available&&(yield this.acquire(t),!0)}))}waitForClearAcquireQueue(){return S(this,null,(function*(){return this.acquire((()=>S(this,null,(function*(){}))))}))}dispatchNext(){return S(this,null,(function*(){var t,e;this.available=!1;let[i,n]=null!=(t=this.acquireQueue.shift())?t:[];for(;i;){try{yield i(),null==n||n()}catch(s){E.error("mutex callback error",s),null==n||n()}[i,n]=null!=(e=this.acquireQueue.shift())?e:[]}this.available=!0}))}},Ql=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!==typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null==(i=this.eventListeners.get(t))||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null==(e=this.eventListeners.get(t.type))||e.forEach((e=>e(t)))}},$l=class extends fe{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;super(),this.top=t,this.right=e,this.bottom=i,this.left=n}clear(){this.top=this.right=this.bottom=this.left=0}};function th(t,e){let i,n,s=0,a=!1;const o=()=>a,r=()=>{a=!1,null==n||n(),n=void 0,i=void 0,s>0&&t(l)},l=()=>{const t=s;s=0,a=!0;const i=e({count:t});i?i.then(r,r):r()};return{schedule(e){0!==s||o()||t(l,e),s++},await(){return S(this,null,(function*(){if(o())for(null==i&&(i=new Promise((t=>{n=t})));o();)yield i}))}}}x([Xs(sa)],$l.prototype,"top",2),x([Xs(sa)],$l.prototype,"right",2),x([Xs(sa)],$l.prototype,"bottom",2),x([Xs(sa)],$l.prototype,"left",2);var eh=class{constructor(){var t;this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach((t=>{let[e,i]=t;return this.observe(e,i)})),this.queuedObserveRequests=[]},"undefined"!==typeof ResizeObserver&&(this.resizeObserver=new ResizeObserver((t=>{for(const{target:e,contentRect:i}of t){const{width:t,height:n}=i;this.checkSize(this.elements.get(e),e,t,n)}})),this.documentReady="complete"===Sn("readyState"),this.documentReady||null==(t=kn())||t.addEventListener("load",this.onLoad))}destroy(){var t,e;null==(t=kn())||t.removeEventListener("load",this.onLoad),null==(e=this.resizeObserver)||e.disconnect(),this.resizeObserver=null}checkSize(t,e,i,n){var s,a;t&&(i===(null==(s=t.size)?void 0:s.width)&&n===(null==(a=t.size)?void 0:a.height)||(t.size={width:i,height:n},t.cb(t.size,e)))}observe(t,e){var i;this.documentReady?(this.elements.has(t)?this.removeFromQueue(t):null==(i=this.resizeObserver)||i.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}unobserve(t){var e;null==(e=this.resizeObserver)||e.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter((e=>{let[i]=e;return i!==t}))}},ih=class{constructor(){this.cache=new WeakMap}call(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];let s,a=this.cache.get(t);const o=()=>{try{const e=t(...i);return a&&null!=s&&a.set(s,e),e}catch(e){return void E.warnOnce("User callback errored, ignoring",e)}};try{s=JSON.stringify(i)}catch(r){return o()}return null==a&&(a=new Map,this.cache.set(t,a)),a.has(s)?a.get(s):o()}invalidateCache(){this.cache=new WeakMap}},nh=class{constructor(t){this.annotationRoot=t}attachNode(t){return this.annotationRoot.append(t),()=>{var e;return null==(e=this.annotationRoot)||e.removeChild(t),this}}setAnnotationStyles(t){this.styles=t}getAnnotationTypeStyles(t){var e;return null==(e=this.styles)?void 0:e[t]}},sh=class{constructor(){this.registeredListeners=new Map}addListener(t,e){const i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const n=i.findIndex((e=>e.symbol===t));if(n>=0){i.splice(n,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];for(const a of this.getListenersByType(t))try{a.handler(...i)}catch(s){E.errorOnce(s)}}dispatchWrapHandlers(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];for(const o of this.getListenersByType(t))try{e(o.handler,...n)}catch(a){E.errorOnce(a)}}getListenersByType(t){var e;return null!=(e=this.registeredListeners.get(t))?e:[]}destroy(){this.registeredListeners.clear()}},ah=class extends sh{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=In.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){"function"===typeof t&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return N((t=>this.fetch(t)),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return N(((t,e)=>{this.debug("DataService - dispatching 'data-load' | ".concat(t)),this.dispatch("data-load",{type:"data-load",data:e})}),t,{leading:!0,trailing:!0})}fetch(t){return S(this,null,(function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),i=this.requestCounter++;let n;this.debug("DataService - requesting | ".concat(i)),this.freshRequests.push(i);try{n=yield this.dataSourceCallback(t),this.debug("DataService - response | ".concat(performance.now()-e,"ms | ").concat(i))}catch(a){this.debug("DataService - request failed | ".concat(i)),E.errorOnce("DataService - request failed | [".concat(a,"]"))}this.isLoadingInitialData=!1;const s=this.freshRequests.findIndex((t=>t===i));-1===s||this.dispatchOnlyLatest&&s!==this.freshRequests.length-1?this.debug("DataService - discarding stale request | ".concat(i)):(this.freshRequests=this.freshRequests.slice(s+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(n)?this.throttledDispatch(i,n):this.dispatch("data-error"))}))}};x([Zr({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],ah.prototype,"dispatchThrottle",2),x([Zr({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],ah.prototype,"requestThrottle",2);var oh=class{constructor(t){this.maxAnimationTime=t,this.debug=In.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Ds.map((t=>[t,[]]))),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){var t;return null!=(t=this.phases.get(Ds[this.currentPhase]))?t:[]}checkOverlappingId(t){null!=t&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug("Skipping animation batch due to update of existing animation: ".concat(t)),this.skip())}addAnimation(t){var e;if(t.isComplete)return;if(Ds.indexOf(t.phase)<this.currentPhase)return this.debug("Skipping animation due to being for an earlier phase",t.id),void t.stop();this.controllers.set(t.id,t),null==(e=this.phases.get(t.phase))||e.push(t)}removeAnimation(t){this.controllers.delete(t.id);const e=this.phases.get(t.phase),i=null==e?void 0:e.indexOf(t);null!=i&&i>=0&&(null==e||e.splice(i,1))}progress(t){if(!this.isReady)return;let e=0===t?.01:t;const i=()=>{const t=Ds[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:t,phaseMeta:Cs[t]}};let{phase:n,phaseControllers:s,phaseMeta:a}=i();const o=()=>null==Ds[this.currentPhase],r=()=>{for(({phase:n,phaseControllers:s,phaseMeta:a}=i());!o()&&0===s.length;)this.currentPhase++,({phase:n,phaseControllers:s,phaseMeta:a}=i()),this.debug("AnimationBatch - phase changing to ".concat(n),{unusedTime:e},s)},l=this.controllers.size;this.debug("AnimationBatch - ".concat(t,"ms; phase ").concat(n," with ").concat(null==s?void 0:s.length," of ").concat(l));do{const t=e,i=a.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed;let n=0;for(const a of s)i?a.stop():e=Math.min(a.update(t),e),a.isComplete&&(n++,this.removeAnimation(a));this.animationTimeConsumed+=t-e,this.debug("AnimationBatch - updated ".concat(s.length," controllers; ").concat(n," completed")),this.debug("AnimationBatch - animationTimeConsumed: ".concat(this.animationTimeConsumed)),r()}while(e>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(E.warnOnce("Animation batch exceeded max animation time, skipping.",new Map(this.controllers.entries())),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug("AnimationBatch - ready; skipped: ".concat(this.skipAnimations),[...this.controllers]);let t=!0;for(const[,e]of this.controllers)if(e.duration>0&&!0!==Cs[e.phase].skipIfNoEarlierAnimations){t=!1;break}if(!t)for(const[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===this.skipAnimations&&!0===t){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(const t of this.controllers.values())t.play()}pause(){for(const t of this.controllers.values())t.pause()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){E.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(t){if(null!=t&&this.controllers.has(t)){const e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(const e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach((t=>t())),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}},rh=class{constructor(){this.listeners=new sh,this.destroyFns=[]}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}destroy(){this.listeners.destroy(),this.destroyFns.forEach((t=>t()))}};function lh(t){const e=f(m({},t),{consumed:!1,consume(){var i,n;e.consumed=!0,t.sourceEvent instanceof Event?null==(i=t.sourceEvent)||i.preventDefault():null==(n=t.sourceEvent)||n.consume()}});return e}function hh(t,e,i){t.dispatchWrapHandlers(e,((t,e)=>{e.consumed||t(e)}),i)}var ch=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","enter","page-left","wheel"],dh=["blur","focus"],uh=["keydown","keyup"],ph=["pagehide","mousemove","mouseup"],gh=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","blur","focus","keydown","keyup"],mh=(t=>(t[t.Default=16]="Default",t[t.ZoomDrag=8]="ZoomDrag",t[t.Annotations=4]="Annotations",t[t.ContextMenu=2]="ContextMenu",t[t.Animation=1]="Animation",t[t.All=31]="All",t))(mh||{}),fh=class t extends rh{constructor(t,e){super(),this.keyboardOptions=t,this.debug=In.create(!0,"interaction"),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=17,this.rootElement=Sn("body"),this.element=e;for(const i of gh)i.startsWith("touch")?e.addEventListener(i,this.eventHandler,{passive:!0}):"wheel"===i?e.addEventListener(i,this.eventHandler,{passive:!1}):e.addEventListener(i,this.eventHandler);for(const i of ph)kn().addEventListener(i,this.eventHandler);Dn("\n.ag-chart-wrapper {\n    touch-action: none;\n}\n","interactionManager")}destroy(){super.destroy();for(const t of ph)kn().removeEventListener(t,this.eventHandler);for(const t of gh)this.element.removeEventListener(t,this.eventHandler)}addListener(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;return super.addListener(t,(t=>{this.getState()&i&&e(t)}))}pushState(t){this.stateQueue|=t}popState(t){this.stateQueue&=~t}getState(){return this.stateQueue&-this.stateQueue}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch((t=>E.errorOnce(t)))}dispatchEvent(t,e){return S(this,null,(function*(){if(vn(ch,e))this.dispatchPointerEvent(t,e);else if(vn(dh,e))for(const i of e)hh(this.listeners,i,lh({type:i,sourceEvent:t}));else if(vn(uh,e))for(const i of e)hh(this.listeners,i,lh({type:i,sourceEvent:t}))}))}dispatchPointerEvent(t,e){const i=this.calculateCoordinates(t);if(null!=i)for(const n of e)hh(this.listeners,n,this.buildPointerEvent(m({type:n,event:t},i)))}recordDown(t){t instanceof MouseEvent&&(ie(["offsetX","offsetY"],this.clickHistory[0],t),ie(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),ie(["offsetX","offsetY"],this.dblclickHistory[0],t)),this.dragStartElement=t.target}recordUp(t){t instanceof MouseEvent&&ie(["offsetX","offsetY"],this.dblclickHistory[1],t),this.dragStartElement=void 0}decideInteractionEventTypes(t){const e="drag-start";switch(t.type){case"blur":case"focus":case"keydown":case"keyup":return this.keyboardOptions.enabled?[t.type]:[];case"click":case"dblclick":case"contextmenu":case"wheel":return[t.type];case"mousedown":return this.isEventOverElement(t)?(this.mouseDown=!0,this.recordDown(t),[e]):[];case"touchstart":return this.isEventOverElement(t)?(this.touchDown=!0,this.recordDown(t),[e]):[];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.recordUp(t),["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.recordUp(t),["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const i=t instanceof MouseEvent&&1===(1&t.buttons);return this.mouseDown!==i?(this.mouseDown=i,[i?e:"drag-end"]):["enter"];case"pagehide":return["page-left"]}return[]}isEventOverElement(t){var e,i,n;return t.target===this.element||(null==(e=t.target)?void 0:e.parentElement)===this.element||(null==(n=null==(i=t.target)?void 0:i.parentElement)?void 0:n.parentElement)===this.element}calculateCoordinates(e){var i;if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if("undefined"!==typeof TouchEvent&&e instanceof TouchEvent){const n=null!=(i=e.touches[0])?i:e.changedTouches[0],{clientX:s,clientY:a,pageX:o,pageY:r}=n;return f(m({},t.NULL_COORDS),{clientX:s,clientY:a,pageX:o,pageY:r})}if(e instanceof PageTransitionEvent){if(e.persisted)return;return t.NULL_COORDS}}getMouseEventCoords(t){const{clientX:e,clientY:i,pageX:n,pageY:s}=t;let{offsetX:a,offsetY:o}=t;const r=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const e=r(this.dragStartElement),i=r(t.target);a-=e.x-i.x,o-=e.y-i.y}return{clientX:e,clientY:i,pageX:n,pageY:s,offsetX:a,offsetY:o}}isWheelEvent(t){return"wheel"===t.type}buildPointerEvent(t){const{type:e,event:i,clientX:n,clientY:s}=t;let{offsetX:a,offsetY:o,pageX:r,pageY:l}=t;if(!Kt(a)||!Kt(o)){const t=this.element.getBoundingClientRect();a=n-t.left,o=s-t.top}if(!Kt(r)||!Kt(l)){const t=this.rootElement.getBoundingClientRect();r=n-t.left,l=s-t.top}let[h,c]=[NaN,NaN];if(this.isWheelEvent(i)){const t=0===i.deltaMode?.01:1;h=i.deltaX*t,c=i.deltaY*t}let d=[];"click"===i.type?d=this.clickHistory:"dblclick"===i.type&&(d=this.dblclickHistory);const u=lh({type:e,offsetX:a,offsetY:o,pageX:r,pageY:l,deltaX:h,deltaY:c,pointerHistory:d,sourceEvent:i});return this.debug("InteractionManager - builtEvent: ",u),u}};fh.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var yh=fh;function vh(t){return null==t||!isNaN(t)&&t>=0&&t<=2}var xh=class extends rh{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new oh(1.5*this.defaultDuration),this.debug=In.create(!0,"animation"),this.rafAvailable="undefined"!==typeof requestAnimationFrame,this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i=y(t,[]);const n=this.batch;try{n.checkOverlappingId(i.id)}catch(h){return void this.failsafeOnError(h)}const s=null!=(e=i.id)?e:Math.random().toString(),a=this.isSkipped()||"none"===i.phase;a&&this.debug("AnimationManager - skipping animation");const{delay:o,duration:r}=i;if(!vh(o))throw new Error("Animation delay of ".concat(o," is unsupported (").concat(s,")"));if(!vh(r))throw new Error("Animation duration of ".concat(r," is unsupported (").concat(s,")"));const l=new Is(f(m({},i),{id:s,skip:a,autoplay:!!this.isPlaying&&i.autoplay,phase:i.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(l,this.defaultDuration))return this.batch.addAnimation(l),l}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable)return;if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>S(this,null,(function*(){const n=()=>S(this,null,(function*(){const e=i-(null!=t?t:i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:e}),this.interactionManager.pushState(1);try{this.batch.progress(e)}catch(n){this.failsafeOnError(n)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:e})}));this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(n):yield this.chartUpdateMutex.acquire(n),this.batch.isActive()?this.scheduleAnimationFrame(e):(this.batch.stop(),this.listeners.dispatch("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))}));this.listeners.dispatch("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];E.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug("AnimationManager - startBatch() with skipAnimations=".concat(t,".")),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new oh(1.5*this.defaultDuration),!0===t&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(1),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}},bh=class t{constructor(e){this.canvas=e,this.debug=In.create(!0,"aria"),this.canvas.appendChild(this.liveElem=t.createAnnouncer())}static createAnnouncer(){const t=Sn().createElement("div");return t.classList.add("ag-charts-aria-announcer"),Jr(t,"role","status"),Jr(t,"aria-live","assertive"),t}destroy(){this.canvas.removeChild(this.liveElem)}announceValue(t){this.debug("AriaAnnouncementService - announceValue: ".concat(t)),this.liveElem.textContent=t}},Sh=class extends rh{legendItemClick(t,e,i,n){const s={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:n};this.listeners.dispatch("legend-item-click",s)}legendItemDoubleClick(t,e,i,n,s){const a={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:s,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",a)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}},kh=class{constructor(){this.defaultActions=[],this.disabledActions=new Set}copyDefaultActions(){return[...this.defaultActions]}registerDefaultAction(t){t.id&&this.defaultActions.find((e=>{let{id:i}=e;return i===t.id}))||this.defaultActions.push(t)}enableAction(t){this.disabledActions.delete(t)}disableAction(t){this.disabledActions.add(t)}isDisabled(t){return this.disabledActions.has(t)}},wh=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),"undefined"!==typeof e&&super.set(t,e),this}stateId(){var t;return null!=(t=Array.from(this.keys()).pop())?t:this.defaultState}stateValue(){var t;return null!=(t=Array.from(this.values()).pop())?t:this.defaultValue}},Mh=class{constructor(t){this.element=t,this.stateTracker=new wh("default")}updateCursor(t,e){this.stateTracker.set(t,e),this.element.style.cursor=this.stateTracker.stateValue()}getCursor(){return this.element.style.cursor}};function Dh(t,e){return Math.sqrt(function(t,e){const i=t.screenX-e.screenX,n=t.screenY-e.screenY;return i*i+n*n}(t,e))}var Ch=class extends rh{constructor(t){super(),this.touchstart=t=>this.onTouchStart(t),this.touchmove=t=>this.onTouchMove(t),this.touchend=t=>this.onTouchEnd(t),this.touchcancel=t=>this.onTouchCancel(t),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.element=t,t.addEventListener("touchstart",this.touchstart,{passive:!0}),t.addEventListener("touchmove",this.touchmove,{passive:!0}),t.addEventListener("touchend",this.touchend),t.addEventListener("touchcancel",this.touchcancel)}destroy(){const{element:t}=this;t.removeEventListener("touchstart",this.touchstart),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(t){const{touches:e}=t,{finger1:i,finger2:n}=this.pinch;if(0!==this.pinch.status&&2===e.length){if(e[0].identifier===i.identifier&&e[1].identifier===n.identifier)return[e[0],e[1]];if(e[0].identifier===n.identifier&&e[1].identifier===i.identifier)return[e[1],e[0]]}}copyTouchData(t){const e=["identifier","screenX","screenY"];ie(e,this.pinch.finger1,t.touches[0]),ie(e,this.pinch.finger2,t.touches[1]),this.pinch.distance=Dh(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(t,e){const{finger1:i,finger2:n,origin:s}=this.pinch,a={type:t,finger1:i,finger2:n,deltaDistance:e,origin:s};this.listeners.dispatch(t,a)}onTouchStart(t){this.stopPinchTracking();const{pinch:e}=this;2===t.touches.length&&(e.status=1,this.copyTouchData(t),e.origin.x=(t.touches[0].clientX+t.touches[1].clientX)/2,e.origin.y=(t.touches[0].clientY+t.touches[1].clientY)/2)}onTouchMove(t){const e=this.findPinchTouches(t);if(void 0!==e){const[i,n]=e,{pinch:s}=this,a=Dh(i,n),o=a-s.distance;1===s.status?Math.abs(o)>1&&(s.status=2,this.copyTouchData(t),this.dispatchPinchEvent("pinch-start",0)):2===s.status?(s.distance=a,this.copyTouchData(t),this.dispatchPinchEvent("pinch-move",o)):E.error("unexpected pinch.status: ".concat(s.status))}}onTouchEnd(t){this.stopPinchTracking()}onTouchCancel(t){this.stopPinchTracking()}stopPinchTracking(){const{pinch:t}=this;2===t.status&&this.dispatchPinchEvent("pinch-end",0),this.pinch.status=0}},Lh=class extends rh{constructor(){super(...arguments),this.highlightStates=new wh,this.pickedStates=new wh}updateHighlight(t,e){const{activeHighlight:i}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i})}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.set(t,e),this.activePicked=this.pickedStates.stateValue()}getActivePicked(){return this.activePicked}isEqual(t,e){return t===e||(null==t?void 0:t.series)===(null==e?void 0:e.series)&&(null==t?void 0:t.itemId)===(null==e?void 0:e.itemId)&&(null==t?void 0:t.datum)===(null==e?void 0:e.datum)}},Rh=class extends rh{constructor(t){super(),this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.isClicking=!1,this.destroyFns.push(t.addListener("drag-start",(t=>this.onClickStart(t)),31),t.addListener("click",(t=>this.onClickStop(t)),31),t.addListener("drag-end",(t=>this.onClickStop(t)),31),t.addListener("wheel",(t=>this.mouseBlur(t))),t.addListener("hover",(t=>this.mouseBlur(t))),t.addListener("drag",(t=>this.mouseBlur(t))),t.addListener("blur",(t=>this.onBlur(t)),31),t.addListener("focus",(t=>this.onFocus(t)),31),t.addListener("keydown",(t=>this.onKeyDown(t)),31))}destroy(){super.destroy()}onClickStart(t){this.isClicking=!0,this.mouseBlur(t)}onClickStop(t){this.isClicking=!1,this.mouseBlur(t)}mouseBlur(t){this.hasBrowserFocus&&(this.isMouseBlurred||(this.dispatch("blur",0,t),this.isMouseBlurred=!0))}onBlur(t){this.hasBrowserFocus=!1,this.isMouseBlurred=!1,this.dispatch("blur",0,t)}onFocus(t){this.hasBrowserFocus=!0,this.isClicking?this.isMouseBlurred=!0:(this.dispatch("browserfocus",1,t),this.dispatch("tab",0,t))}onKeyDown(t){if(this.hasBrowserFocus&&!this.isClicking)switch(this.isMouseBlurred=!1,t.sourceEvent.code){case"Tab":return t.sourceEvent.shiftKey?this.dispatch("tab",-1,t):this.dispatch("tab",1,t);case"ArrowDown":return this.dispatch("nav-vert",1,t);case"ArrowUp":return this.dispatch("nav-vert",-1,t);case"ArrowLeft":return this.dispatch("nav-hori",-1,t);case"ArrowRight":return this.dispatch("nav-hori",1,t);case"Space":case"Enter":return this.dispatch("submit",0,t)}}dispatch(t,e,i){const n=lh({type:t,delta:e,sourceEvent:i});hh(this.listeners,t,n)}},Ih={};v(Ih,{block:()=>Ah,css:()=>Eh,elements:()=>Th,modifiers:()=>Nh});var Ah="ag-charts-focus",Th={wrapper:"".concat(Ah,"__wrapper"),indicator:"".concat(Ah,"__indicator")},Nh={hidden:"".concat(Ah,"--hidden")},Eh="\n.".concat(Ah,".").concat(Th.wrapper," {\n    position: relative;\n    display: block;\n    pointer-events: none;\n    user-select: none;\n    overflow: hidden;\n    top: 0;\n    left: 0;\n}\n\n.").concat(Ah,".").concat(Th.indicator," {\n    position: absolute;\n    display: block;\n    pointer-events: none;\n    user-select: none;\n    border: var(--ag-charts-focus-border);\n    box-shadow: var(--ag-charts-focus-border-shadow);\n}\n\n.").concat(Nh.hidden," {\n    visibility: hidden;\n}\n"),Oh=["series","legend"],Ph=class extends sh{},Bh=class{constructor(t,e,i,n){this.interactionManager=t,this.keyNavManager=e,this.canvasElement=i,this.currentTabIndex=0,this.isDragging=!1,this.leftCanvas=!1,this.regions=new Map,this.destroyFns=[],this.destroyFns.push(...ch.map((e=>t.addListener(e,this.processPointerEvent.bind(this),31))),this.keyNavManager.addListener("blur",this.onNav.bind(this)),this.keyNavManager.addListener("browserfocus",this.onFocus.bind(this)),this.keyNavManager.addListener("tab",this.onTab.bind(this)),this.keyNavManager.addListener("nav-vert",this.onNav.bind(this)),this.keyNavManager.addListener("nav-hori",this.onNav.bind(this)),this.keyNavManager.addListener("submit",this.onNav.bind(this))),Dn(Eh,Ah),this.focusWrapper=Sn().createElement("div"),this.focusIndicator=Sn().createElement("div"),this.focusWrapper.appendChild(this.focusIndicator),n.appendChild(this.focusWrapper);const{block:s,elements:a,modifiers:o}=Ih;this.focusWrapper.classList.add(s,a.wrapper),this.focusIndicator.classList.add(s,a.indicator,o.hidden)}destroy(){this.destroyFns.forEach((t=>t())),this.currentRegion=void 0;for(const t of this.regions.values())t.listeners.destroy();this.focusWrapper.remove(),this.regions.clear()}addRegionFromProperties(t){const e={properties:t,listeners:new Ph};return this.regions.set(t.name,e),this.makeObserver(e)}addRegion(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return this.addRegionFromProperties({name:t,bboxproviders:[e,...n],canInteraction:()=>!0})}getRegion(t){return this.makeObserver(this.regions.get(t))}find(t,e){const i=[];for(const[n,s]of this.regions.entries())for(const a of s.properties.bboxproviders){const n=a.getCachedBBox();n.containsPoint(t,e)&&i.push([s,n.width*n.height])}return i.sort(((t,e)=>t[1]-e[1])).map((t=>t[0]))}makeObserver(t){const{interactionManager:e}=this;return new class{addListener(i,n){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;var a;return null!=(a=null==t?void 0:t.listeners.addListener(i,(t=>{if(!t.consumed){e.getState()&s&&n(t)}})))?a:()=>{}}}}checkPointerHistory(t,e){for(const i of e.pointerHistory){const e=this.pickRegion(i.offsetX,i.offsetY);if(t.properties.name!==(null==e?void 0:e.properties.name))return!1}return!0}dispatch(t,e){null==t||t.listeners.dispatch(e.type,e)}handleDragging(t){const{currentRegion:e}=this;switch(t.type){case"drag-start":this.isDragging=!0,this.leftCanvas=!1;break;case"leave":return this.leftCanvas=!0,this.isDragging;case"enter":return this.leftCanvas=!1,this.isDragging;case"drag":if(this.isDragging)return this.dispatch(e,t),!0;break;case"drag-end":if(this.isDragging)return this.isDragging=!1,this.dispatch(e,t),this.leftCanvas&&this.dispatch(e,f(m({},t),{type:"leave"})),!0}return!1}processPointerEvent(t){if(this.handleDragging(t))return;const{currentRegion:e}=this,i=this.pickRegion(t.offsetX,t.offsetY);void 0!==e&&(null==i?void 0:i.properties.name)!==e.properties.name&&this.dispatch(e,f(m({},t),{type:"leave"})),void 0!==i&&i.properties.name!==(null==e?void 0:e.properties.name)&&this.dispatch(i,f(m({},t),{type:"enter"})),void 0!==i&&this.checkPointerHistory(i,t)&&this.dispatch(i,t),this.currentRegion=i}pickRegion(t,e){const i=this.find(t,e);return i.length>0?i[0]:void 0}getTabRegion(t){if(void 0!==t&&t>=0&&t<Oh.length)return this.regions.get(Oh[t])}dispatchTabStart(t){const{delta:e,sourceEvent:i}=t,n=lh({type:"tab-start",delta:e,sourceEvent:i}),s=this.getTabRegion(this.currentTabIndex);return this.dispatch(s,n),!!n.consumed}getNextInteractableTabIndex(t,e){const i=e<0?-1:1;let n=t;for(;0!==e;){const t=this.getTabRegion(n+i);if(void 0===t)return;t.properties.canInteraction()&&(e-=i),n+=i}return n}validateCurrentTabIndex(){var t;const e=this.getTabRegion(this.currentTabIndex);void 0===e||e.properties.canInteraction()||(this.currentTabIndex=null!=(t=this.getNextInteractableTabIndex(-1,1))?t:0)}onFocus(t){const{delta:e,sourceEvent:i}=t,n=e>0?this.getNextInteractableTabIndex(-1,1):this.getNextInteractableTabIndex(Oh.length,-1);this.currentTabIndex=null!=n?n:0;const s=this.getTabRegion(this.currentTabIndex);s&&this.dispatch(s,lh({type:"tab",delta:e,sourceEvent:i}))}onTab(t){if(this.dispatchTabStart(t))return;this.validateCurrentTabIndex();const e=this.getNextInteractableTabIndex(this.currentTabIndex,t.delta),i=this.getTabRegion(e),n=this.getTabRegion(this.currentTabIndex);if(void 0!==e&&(this.currentTabIndex=e),void 0!==n&&(null==i?void 0:i.properties.name)!==n.properties.name){const{delta:e,sourceEvent:i}=t,s=lh({type:"blur",delta:e,sourceEvent:i});this.dispatch(n,s)}void 0!==i&&i.properties.canInteraction()?this.dispatch(i,t):this.updateFocusIndicatorRect(void 0)}onNav(t){const e=this.getTabRegion(this.currentTabIndex);this.dispatch(e,t)}updateFocusWrapperRect(){this.focusWrapper.style.width=this.canvasElement.style.width,this.focusWrapper.style.height=this.canvasElement.style.height}updateFocusIndicatorRect(t){null!=t?(this.updateFocusWrapperRect(),this.focusIndicator.classList.remove(Nh.hidden),this.focusIndicator.style.width="".concat(t.width,"px"),this.focusIndicator.style.height="".concat(t.height,"px"),this.focusIndicator.style.left="".concat(t.x,"px"),this.focusIndicator.style.top="".concat(t.y,"px")):this.focusIndicator.classList.add(Nh.hidden)}},Fh=class extends rh{constructor(t){super(),this.element=t}static isGroup(t,e){return e.group===t}pressButton(t,e){this.listeners.dispatch("button-pressed",{type:"button-pressed",group:t,value:e})}toggleGroup(t,e){this.listeners.dispatch("group-toggled",{type:"group-toggled",group:t,visible:e})}toggleButton(t,e,i){this.listeners.dispatch("button-toggled",{type:"button-toggled",group:t,value:e,enabled:i})}proxyGroupOptions(t,e){this.listeners.dispatch("proxy-group-options",{type:"proxy-group-options",group:t,options:e})}},_h="\n.".concat($r," {\n    transition: transform 0.1s ease;\n    max-width: 100%;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.").concat($r,"-wrap-always {\n    overflow-wrap: break-word;\n    word-break: break-word;\n    hyphens: none;\n}\n\n.").concat($r,"-wrap-hyphenate {\n    overflow-wrap: break-word;\n    word-break: break-word;\n    hyphens: auto;\n}\n\n.").concat($r,"-wrap-on-space {\n    overflow-wrap: normal;\n    word-break: normal;\n}\n\n.").concat($r,"-wrap-never {\n    white-space: pre;\n    text-overflow: ellipsis;\n}\n\n.").concat($r,"-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.").concat($r,"-no-animation {\n    transition: none !important;\n}\n\n.").concat($r,"-hidden {\n    visibility: hidden;\n}\n\n.").concat($r,"-title {\n    overflow: hidden;\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n    text-overflow: inherit;\n}\n\n.").concat($r,"-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.").concat($r,"-content {\n    overflow: hidden;\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n    text-overflow: inherit;\n}\n\n.").concat($r,'-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.').concat($r,'-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n'),Gh=class{constructor(t,e){if(this.canvasElement=t,this.tooltip=e,this.stateTracker=new wh,this.appliedState=null,"undefined"!==typeof IntersectionObserver){const t=new IntersectionObserver((t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.tooltip.toggle(!1)}),{root:this.tooltip.root});t.observe(this.canvasElement),this.observer=t}Dn(_h,"tooltip")}updateTooltip(t,e,i){var n;this.tooltip.enabled&&(null!=i||(i=null==(n=this.stateTracker.get(t))?void 0:n.content),this.stateTracker.set(t,{content:i,meta:e}),this.applyStates())}removeTooltip(t){this.tooltip.enabled&&(this.stateTracker.delete(t),this.applyStates())}getTooltipMeta(t){var e;return null==(e=this.stateTracker.get(t))?void 0:e.meta}destroy(){var t;null==(t=this.observer)||t.unobserve(this.canvasElement)}applyStates(){var t;const e=this.stateTracker.stateId(),i=e?this.stateTracker.get(e):null;if(null==(null==i?void 0:i.meta)||null==(null==i?void 0:i.content))return this.appliedState=null,void this.tooltip.toggle(!1);const n=this.canvasElement.getBoundingClientRect();if((null==(t=this.appliedState)?void 0:t.content)===(null==i?void 0:i.content)){const t=this.tooltip.isVisible();this.tooltip.show(n,null==i?void 0:i.meta,null,t)}else this.tooltip.show(n,null==i?void 0:i.meta,null==i?void 0:i.content);this.appliedState=i}static makeTooltipMeta(t,e){var i,n,s,a,o,r,l;const{offsetX:h,offsetY:c}=t,{tooltip:d}=e.series.properties,u={offsetX:h,offsetY:c,enableInteraction:null!=(n=null==(i=d.interaction)?void 0:i.enabled)&&n,lastPointerEvent:{type:t.type,offsetX:h,offsetY:c},showArrow:d.showArrow,position:{type:d.position.type,xOffset:d.position.xOffset,yOffset:d.position.yOffset}},p=null!=(l=null!=(a=null==(s=e.yBar)?void 0:s.upperPoint)?a:e.midPoint)?l:null==(r=(o=e.series).datumMidPoint)?void 0:r.call(o,e);if("node"===d.position.type&&p){const{x:t,y:i}=p,n=e.series.contentGroup.inverseTransformPoint(t,i);return f(m({},u),{offsetX:Math.round(n.x),offsetY:Math.round(n.y)})}return u}},zh=class extends sh{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error("AG Charts - unsupported listener type: ".concat(t))}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce(((t,e)=>{try{return e.handler(t)}catch(i){return E.errorOnce(i),t}}),e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}},Wh=class{constructor(){this.groups={}}registerSeries(t){let{id:e,seriesGrouping:i,visible:n,type:s}=t;var a;i&&(null!=(a=this.groups)[s]||(a[s]={}),this.groups[s][e]={grouping:i,visible:n})}deregisterSeries(t){let{id:e,type:i}=t;this.groups[i]&&delete this.groups[i][e],this.groups[i]&&0===Object.keys(this.groups[i]).length&&delete this.groups[i]}getVisiblePeerGroupIndex(t){let{type:e,seriesGrouping:i,visible:n}=t;var s;if(!i)return{visibleGroupCount:n?1:0,visibleSameStackCount:n?1:0,index:0};const a=new Set,o=new Set;for(const l of Object.values(null!=(s=this.groups[e])?s:{}))l.visible&&(a.add(l.grouping.groupIndex),l.grouping.groupIndex===i.groupIndex&&o.add(l.grouping.stackIndex));const r=Array.from(a);return r.sort(((t,e)=>t-e)),{visibleGroupCount:r.length,visibleSameStackCount:o.size,index:r.indexOf(i.groupIndex)}}},Vh=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(Vh||{}),Kh=class extends sh{constructor(t){super(),this.updateCallback=t}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.updateCallback(t,e)}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:null==t?void 0:t.minRect,minVisibleRect:null==t?void 0:t.minVisibleRect})}},Yh=class{constructor(t,e){const{scene:i,syncManager:n,element:s,updateCallback:a,updateMutex:o}=e;this.chartService=t,this.scene=i,this.syncManager=n,this.zoomManager=t.zoomManager,this.annotationManager=new nh(t.annotationRoot),this.ariaAnnouncementService=new bh(i.canvas.element),this.chartEventManager=new Sh,this.contextMenuRegistry=new kh,this.cursorManager=new Mh(s),this.highlightManager=new Lh,this.interactionManager=new yh(t.keyboard,s),this.keyNavManager=new Rh(this.interactionManager),this.regionManager=new Bh(this.interactionManager,this.keyNavManager,this.scene.canvas.element,s),this.toolbarManager=new Fh(s),this.gestureDetector=new Ch(s),this.layoutService=new zh,this.updateService=new Kh(a),this.seriesStateManager=new Wh,this.callbackCache=new ih,this.animationManager=new xh(this.interactionManager,o),this.animationManager.skip(),this.animationManager.play(),this.dataService=new ah(this.animationManager),this.tooltipManager=new Gh(this.scene.canvas.element,t.tooltip)}destroy(){this.tooltipManager.destroy(),this.regionManager.destroy(),this.keyNavManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.ariaAnnouncementService.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.callbackCache.invalidateCache(),this.animationManager.reset(),this.syncManager.destroy()}},Hh=class extends fe{constructor(){super(...arguments),this.range="tooltip"}};x([Xs(Fa(["tooltip","node"],"a range"))],Hh.prototype,"range",2);var Uh=class t{constructor(){this.domain=new Set}static is(e){return e instanceof t}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},Xh=class t{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof t}static extendDomain(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/0,-1/0];for(const i of t)"number"===typeof i&&(e[0]>i&&(e[0]=i),e[1]<i&&(e[1]=i));return e}extend(t){this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t)}getDomain(){return[...this.domain]}};function jh(t){return t.map((t=>_t(t)?JSON.stringify(t):t)).join("-")}function Zh(t){const e=1e4;return Number.isInteger(t)?t:Math.abs(t)>e?Math.trunc(t):Math.round(t*e)/e}function qh(t,e){var i;const n=function(t){if(null==t)return[];let[e,i]=t.map(Number);return 0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0?e=0:i===-1/0&&(i=0),Kt(e)&&Kt(i)?[e,i]:[])}(t);if(0===n.length)return n;let[s,a]=n;if(s===a){const[t,n]=null!=(i=null==e?void 0:e.calculatePadding(s,a))?i:[1,1];s-=t,a+=n}return[s,a]}function Jh(t,e){var i;return null!=(i=null==e?void 0:e.get(t.id))?i:0}var Qh=Symbol("invalid"),$h=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standalone";this.opts=t,this.mode=e,this.debug=In.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let i=!0;for(const s of t.props){if("key"===s.type&&!i)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===s.type&&i&&(i=!1)}const n=t=>{let{matchGroupIds:e=[]}=t;for(const i of e)if(this.values.every((t=>t.groupId!==i)))throw new Error("AG Charts - internal config error: matchGroupIds properties must match defined groups (".concat(i,")."))};for(const s of t.props)switch(s.type){case"key":this.keys.push(f(m({},s),{index:this.keys.length,missing:new Map}));break;case"value":if(null==s.property)throw new Error("AG Charts - internal config error: no properties specified for value definitions: ".concat(JSON.stringify(s)));this.values.push(f(m({},s),{index:this.values.length,missing:new Map}));break;case"aggregate":n(s),this.aggregates.push(f(m({},s),{index:this.aggregates.length}));break;case"group-value-processor":n(s),this.groupProcessors.push(f(m({},s),{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(f(m({},s),{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(f(m({},s),{index:this.reducers.length}));break;case"processor":this.processors.push(f(m({},s),{index:this.processors.length}))}}resolveProcessedDataDefById(t,e){var i;const n=null==(i=this.scopeCache.get(t.id))?void 0:i.get(e);if(!n)throw new Error("AG Charts - didn't find property definition for [".concat(e,", ").concat(t.id,"]"));return{index:n.index,def:n}}resolveProcessedDataIndexById(t,e){return this.resolveProcessedDataDefById(t,e).index}resolveProcessedDataDefsByIds(t,e){return e.map((e=>[e,this.resolveProcessedDataDefById(t,e)]))}resolveProcessedDataDefsValues(t,e){let{keys:i,values:n}=e;const s={};for(const[a,{index:o,def:r}]of t){const t="key"===r.type?i:n;s[a]=t[o]}return s}getDomain(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",n=arguments.length>3?arguments[3]:void 0;var s;const a=this.getDomainsByType(i,n);return null!=(s=null==a?void 0:a[this.resolveProcessedDataIndexById(t,e)])?s:[]}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t,e){var i;const{opts:{groupByKeys:n,groupByFn:s},aggregates:a,groupProcessors:o,reducers:r,processors:l,propertyProcessors:h}=this,c=performance.now();if(n&&0===this.keys.length)return;let d=this.extractData(t,e);if(n?d=this.groupData(d):s&&(d=this.groupData(d,s(d))),o.length>0&&this.postProcessGroups(d),a.length>0&&this.aggregateData(d),h.length>0&&this.postProcessProperties(d),r.length>0&&this.reduceData(d),l.length>0&&this.postProcessData(d),t.length>0)for(const p of T(this.keys,this.values))for(const[e,i]of p.missing)if(i>=t.length){const t=null==e?"":" for ".concat(e);E.warnOnce("the key '".concat(p.property,"' was not found in any data element").concat(t,"."))}const u=performance.now();d.time=u-c,this.debug.check()&&function(t){var e,i;const n=(t,e)=>{e.length>0&&(E.log("DataModel.processData() - ".concat(t)),E.table(e))};if(E.log("DataModel.processData() - processedData",t),n("Key Domains",t.domain.keys),n("Group Domains",null!=(e=t.domain.groups)?e:[]),n("Value Domains",t.domain.values),n("Aggregate Domains",null!=(i=t.domain.aggValues)?i:[]),"grouped"===t.type){n("Values",t.data.reduce(((t,e)=>{var i,n;const s=null!=(i=e.keys)?i:[],a=null!=(n=e.aggValues)?n:[],o=e.keys.map((()=>{})),r=null==a?void 0:a.map((()=>{}));return t.push(...e.values.map(((t,e)=>[...0===e?s:o,...null!=t?t:[],...0==e?a:r]))),t}),[]))}else{n("Values",t.data.reduce(((t,e)=>{var i;const n=null!=(i=e.aggValues)?i:[];return t.push([...e.keys,...e.values,...n]),t}),[]))}}(d),this.scopeCache.clear();for(const p of T(this.keys,this.values,this.aggregates))if(p.idsMap)for(const[t,e]of p.idsMap)for(const n of e)if(this.scopeCache.has(t)){if(null==(i=this.scopeCache.get(t))?void 0:i.has(n))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(t).set(n,p)}else this.scopeCache.set(t,new Map([[n,p]]));return d}valueGroupIdxLookup(t){let{matchGroupIds:e}=t;const i=[];for(const[n,s]of this.values.entries())(!e||s.groupId&&e.includes(s.groupId))&&i.push(n);return i}valueIdxLookup(t,e){const i=null==t||0===t.length,n="string"===typeof e?e:e.id,s=this.values.findIndex((e=>(null==e.scopes||i&&!e.scopes.length||e.scopes.some((e=>null==t?void 0:t.includes(e))))&&(e.property===n||e.id===n||(e=>{if(e.idsMap)for(const[i,s]of e.idsMap)if((null==t?void 0:t.includes(i))&&s.has(n))return!0;return!1})(e))));if(-1===s)throw new Error("AG Charts - configuration error, unknown property ".concat(JSON.stringify(e)," in scope(s) ").concat(JSON.stringify(t)));return s}extractData(t,e){var i,n,s;const{dataDomain:a,processValue:o,scopes:r,allScopesHaveSameDefs:l}=this.initDataDomainProcessor(),h=new Map(null==e?void 0:e.map((t=>[t.id,t]))),{keys:c,values:d}=this,u=new Array(t.length);let p=0,g=0;for(const[y,v]of t.entries()){const t={},e=r.size>0?new Set(r):void 0,a=new Array(c.length);let f,x=0;for(const i of c){if(f=o(i,v,f),f===Qh)break;a&&(a[x++]=f)}if(f===Qh)continue;const b=d.length>0?new Array(d.length):void 0;let S;for(const[c,u]of d.entries()){for(const e of null!=(i=u.scopes)?i:r){const i=h.get(e);if(S=o(u,null!=(n=null==i?void 0:i.data[y])?n:v,S,e),S!==Qh&&b){if(null!=i&&!1!==u.includeProperty){const i=u.includeProperty&&null!=u.id?u.id:u.property;null!=t[e]||(t[e]={}),t[e][i]=S}b[c]=S}}if(S===Qh){if(l)break;for(const t of null!=(s=u.scopes)?s:r)null==e||e.delete(t);if(0===(null==e?void 0:e.size))break}}if(S===Qh&&l)continue;if(0===(null==e?void 0:e.size))continue;const k={datum:m(m({},v),t),keys:a,values:b};!l&&e&&e.size<r.size&&(g++,k.validScopes=new Set(e)),u[p++]=k}u.length=p;const f=t=>{const e=a.get(t),i=e.getDomain();return Xh.is(e)&&i[0]>i[1]?[]:i};return{type:"ungrouped",input:{count:t.length},data:u,domain:{keys:c.map(f),values:d.map(f)},defs:{allScopesHaveSameDefs:l,keys:c,values:d},partialValidDataCount:g,time:0}}groupData(t,e){var i;const n=new Map;for(const r of t.data){const{keys:t,values:s,datum:a,validScopes:o}=r,l=null!=(i=null==e?void 0:e(r))?i:t,h=jh(l);if(n.has(h)){const t=n.get(h);if(t.values.push(s),t.datum.push(a),null!=o&&null!=t.validScopes)for(const e of t.validScopes)o.has(e)||t.validScopes.delete(e)}else n.set(h,{keys:l,values:[s],datum:[a],validScopes:o})}const s=new Array(n.size),a=new Array(n.size);let o=0;for(const{keys:r,values:l,datum:h,validScopes:c}of n.values())0!==(null==c?void 0:c.size)&&(a[o]=r,s[o++]={keys:r,values:l,datum:h,validScopes:c});return f(m({},t),{type:"grouped",data:s,domain:f(m({},t.domain),{groups:a})})}aggregateData(t){var e,i,n,s,a,o;const r="ungrouped"===t.type;t.domain.aggValues=[];for(const[l,h]of this.aggregates.entries()){const c=this.valueGroupIdxLookup(h),d=[1/0,-1/0];for(const u of t.data){if(null!=u.aggValues||(u.aggValues=new Array(this.aggregates.length)),u.validScopes)continue;const t=r?[u.values]:u.values;let p=null!=(i=null==(e=h.groupAggregateFunction)?void 0:e.call(h))?i:[1/0,-1/0];for(const e of t){const t=c.map((t=>e[t])),i=h.aggregateFunction(t,u.keys);i&&(p=null!=(s=null==(n=h.groupAggregateFunction)?void 0:n.call(h,i,p))?s:Xh.extendDomain(i,p))}const g=(null!=(o=null==(a=h.finalFunction)?void 0:a.call(h,p))?o:p).map((t=>Zh(t)));u.aggValues[l]=g,Xh.extendDomain(g,d)}t.domain.aggValues.push(d)}}postProcessGroups(t){var e,i;const{groupProcessors:n}=this,s=new Set,a=new Map,o=new Map,r=new Map;for(const h of n){const t=this.valueGroupIdxLookup(h);o.set(h,t),r.set(h,h.adjust());for(const e of t){const t="category"===this.values[e].valueType;s.add(e),a.set(e,t?new Uh:new Xh)}}const l=t=>{var e;for(const i of s)null==(e=a.get(i))||e.extend(t[i])};for(const h of t.data){for(const s of n){if(h.validScopes)continue;const n=null!=(e=o.get(s))?e:[],a=null==(i=r.get(s))?void 0:i();if(a)if("grouped"===t.type)for(const t of h.values)t&&a(t,n);else h.values&&a(h.values,n)}if("grouped"===t.type)for(const t of h.values)l(t);else l(h.values)}for(const[h,c]of a)t.domain.values[h]=c.getDomain()}postProcessProperties(t){for(const{adjust:e,property:i,scopes:n}of this.propertyProcessors)e()(t,this.valueIdxLookup(n,i))}reduceData(t){var e;null!=t.reduced||(t.reduced={});for(const i of this.reducers){const n=i.reducer();let s=i.initialValue;for(const a of t.data)a.validScopes&&!(null==(e=i.scopes)?void 0:e.some((t=>{var e;return null==(e=a.validScopes)?void 0:e.has(t)})))||(s=n(s,a));t.reduced[i.property]=s}}postProcessData(t){null!=t.reduced||(t.reduced={});for(const e of this.processors)t.reduced[e.property]=e.calculate(t)}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Set;for(const l of e)if(l.scopes)for(const t of l.scopes)i.add(t);const n=new Map,s=new Map;let a=!0;const o=()=>{var s;for(const o of T(t,e))"category"===o.valueType?n.set(o,new Uh):(n.set(o,new Xh),a&&(a=(null!=(s=o.scopes)?s:[]).length===i.size))};o();const r=this.buildAccessors(T(t,e));return{dataDomain:n,processValue:(t,e,i,a)=>{var l,h,c,d,u;let p,g;if(r.has(t.property)){try{g=r.get(t.property)(e)}catch(m){}p=null!=g}else p=t.property in e,g=p?e[t.property]:t.missingValue;if(null!=t.forceValue){g=p&&Un(g)?-1*t.forceValue:t.forceValue,p=!0}if(!p&&!("missingValue"in t)){const e=null!=(l=t.missing.get(a))?l:0;t.missing.set(a,e+1)}if(n.has(t)||o(),p&&null!=(c=null==(h=t.validation)?void 0:h.call(t,g,e))&&!c){if(!("invalidValue"in t))return"integrated"!==this.mode&&E.warnOnce("invalid value of type [".concat(typeof g,"] ignored:"),"[".concat(g,"]")),Qh;g=t.invalidValue}return t.processor&&(s.has(t)||s.set(t,t.processor()),g=null==(d=s.get(t))?void 0:d(g,i===Qh?void 0:i)),null==(u=n.get(t))||u.extend(g),g},initDataDomain:o,scopes:i,allScopesHaveSameDefs:a}}buildAccessors(t){const e=new Map;if("integrated"===this.mode)return e;for(const i of t){if(!(i.property.includes(".")||i.property.includes("[")))continue;let t;t=i.property.startsWith("[")?"return datum".concat(i.property,";"):"return datum.".concat(i.property,";"),e.set(i.property,new Function("datum",t))}return e}};var tc=class t{constructor(t){this.mode=t,this.debug=In.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return S(this,null,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise(((n,s)=>{this.requested.push({id:t,opts:i,data:e,resolve:n,reject:s})}))}))}execute(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",t);const e=this.mergeRequested(t);this.debug("DataController.execute() - merged",e),this.debug.check()&&(kn().processedData=[]);const i=this.requested.map((t=>{let{id:e}=t;return e})),n=this.hasMultipleDataSources(t);for(const{opts:a,data:o,resolves:r,rejects:l,ids:h}of e)try{const e=new $h(a,this.mode),s=e.processData(o,t);this.debug.check()&&kn("processedData").push(s),0===(null==s?void 0:s.partialValidDataCount)?r.forEach(((t,a)=>t({dataModel:e,processedData:this.processScopedData(h[a],s,i,n)}))):s?this.splitResult(e,s,h,r):l.forEach((t=>t(new Error("AG Charts - no processed data generated"))))}catch(s){l.forEach((t=>t(s)))}}hasMultipleDataSources(t){if(t.length){const[{data:e},...i]=t;return i.some((t=>e!==t.data))}return!1}processScopedData(t,e,i,n){const s=e=>{if(Array.isArray(e))return e.map(s);const a=n?m(m({},e),e[t]):e;for(const t of i)delete a[t];return a},a=e=>{var i;return Array.isArray(e)?e.map(a):null!=(i=null==e?void 0:e[t])?i:e};return f(m({},e),{data:e.data.map((t=>{var e;return f(m({},t),{datum:s(t.datum),values:n?null==(e=t.values)?void 0:e.map(a):t.values})}))})}validateRequests(t){const e=[];for(const[i,n]of t.entries())i>0&&n.data.length!==t[0].data.length&&!1===n.opts.groupByData?n.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):e.push(n);return e}mergeRequested(e){const i=[];for(const n of e){const e=i.find(t.groupMatch(n));e?e.push(n):i.push([n])}return i.map(t.mergeRequests)}splitResult(t,e,i,n){for(let s=0;s<i.length;s++){const a=i[s];(0,n[s])({dataModel:t,processedData:f(m({},e),{data:e.data.filter((t=>{let{validScopes:e}=t;var i;return null==(i=null==e?void 0:e.has(a))||i}))})})}}static groupMatch(t){let{data:e,opts:i}=t;function n(t){return t.filter((t=>"key"===t.type)).map((t=>t.property)).join(";")}return t=>{let[s]=t;return(!1===i.groupByData||s.data===e)&&s.opts.groupByKeys===i.groupByKeys&&s.opts.groupByFn===i.groupByFn&&n(s.opts.props)===n(i.props)}}static mergeRequests(e){return e.reduce(((e,i)=>{var n,s,{id:a,data:o,resolve:r,reject:l,opts:h}=i,c=h,{props:d}=c,u=y(c,["props"]);e.ids.push(a),e.rejects.push(l),e.resolves.push(r),null!=e.data||(e.data=o),null!=e.opts||(e.opts=f(m({},u),{props:[]}));for(const p of d){const i=f(m({},p),{scopes:[a]});t.createIdsMap(a,i);const o=e.opts.props.find((e=>e.type===i.type&&t.deepEqual(e,i)));o?(null!=o.scopes||(o.scopes=[]),o.scopes.push(...null!=(n=i.scopes)?n:[]),"key"!==o.type&&"value"!==o.type||!(null==(s=i.idsMap)?void 0:s.size)||t.mergeIdsMap(i.idsMap,o.idsMap)):e.opts.props.push(i)}return e}),{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(t,e){for(const[i,n]of t)if(e.has(i))for(const t of n)e.get(i).add(t);else e.set(i,new Set(n))}static createIdsMap(t,e){null!=e.id&&(null!=e.idsMap||(e.idsMap=new Map),e.idsMap.has(t)?e.idsMap.get(t).add(e.id):e.idsMap.set(t,new Set([e.id])))}static deepEqual(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;let n,s;if(Array.isArray(e)){if(s=e.length,s!==i.length)return!1;for(n=s-1;n>=0;n--)if(!t.deepEqual(e[n],i[n]))return!1;return!0}const a=Object.keys(e);if(s=a.length,s!==Object.keys(i).length)return!1;for(n=s-1;n>=0;n--){const s=a[n];if(!t.skipKeys.has(s)&&(!Object.hasOwn(i,s)||!t.deepEqual(e[s],i[s])))return!1}return!0}return!1}};tc.skipKeys=new Set(["id","idsMap","type","scopes"]);var ec=tc,ic=class t extends rh{constructor(t){super(),this.chart=t}subscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_GROUP,i=this.get(e);return i||(i=new Set,t.chartsGroups.set(e,i)),i.add(this.chart),this}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_GROUP;var i;return null==(i=this.get(e))||i.delete(this.chart),this}getChart(){return this.chart}getGroup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_GROUP;const i=this.get(e);return i?Array.from(i):[]}getGroupSiblings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_GROUP;return this.getGroup(e).filter((t=>t!==this.chart))}get(e){return t.chartsGroups.get(e)}};ic.chartsGroups=new Map,ic.DEFAULT_GROUP=Symbol("sync-group-default");var nc=ic,sc=class extends rh{constructor(){super(...arguments),this.axisZoomManagers=new Map,this.state=new wh(void 0,"initial"),this.rejectCallbacks=new Map}updateAxes(t){var e;const i=new Map(t.map((t=>[t.id,this.axisZoomManagers.get(t.id)])));this.axisZoomManagers.clear();for(const n of t)this.axisZoomManagers.set(n.id,null!=(e=i.get(n.id))?e:new ac(n));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}updateZoom(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3?arguments[3]:void 0;var s;if(n&&this.rejectCallbacks.set(t,n),0!==this.axisZoomManagers.size)this.state.set(t,e),this.axisZoomManagers.forEach((i=>{i.updateZoom(t,null==e?void 0:e[i.getDirection()])})),this.applyChanges(t);else{const a=this.state.stateId();"initial"===a||a===t||i?(this.state.set(t,e),a!==t&&(null==(s=this.rejectCallbacks.get(a))||s(t))):null==n||n(a)}}updateAxisZoom(t,e,i){var n;null==(n=this.axisZoomManagers.get(e))||n.updateZoom(t,i),this.applyChanges(t)}fireZoomPanStartEvent(t){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:t})}getZoom(){let t,e;if(this.axisZoomManagers.forEach((i=>{"x"===i.getDirection()?null!=t||(t=i.getZoom()):"y"===i.getDirection()&&(null!=e||(e=i.getZoom()))})),t||e)return{x:t,y:e}}getAxisZoom(t){var e,i;return null!=(i=null==(e=this.axisZoomManagers.get(t))?void 0:e.getZoom())?i:{min:0,max:1}}getAxisZooms(){const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyChanges(t){if(!Array.from(this.axisZoomManagers.values(),(t=>t.applyChanges())).some(Boolean))return;const e={};for(const[i,n]of this.axisZoomManagers.entries())e[i]=n.getZoom();this.listeners.dispatch("zoom-change",f(m({type:"zoom-change"},this.getZoom()),{axes:e,callerId:t}))}},ac=class{constructor(t){this.axis=t;const[e=0,i=1]=t.visibleRange;this.state=new wh({min:e,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return Se(this.state.stateValue())}applyChanges(){const t=this.currentZoom;return this.currentZoom=this.state.stateValue(),t.min!==this.currentZoom.min||t.max!==this.currentZoom.max}},oc=class extends fe{constructor(){super(...arguments),this.enabled=!1}};function rc(t,e){const{bbox:i,showFocusBox:n}=e;if(n&&t.updateFocusIndicatorRect(e.bbox),void 0!==i){const{x:t,y:e}=i.computeCenter();return{type:"keyboard",offsetX:t,offsetY:e}}}x([Xs($s)],oc.prototype,"enabled",2),x([Xs(ia)],oc.prototype,"tabIndex",2);var lc=["top","right","bottom","left"],hc=["category","grouped-category","ordinal-time","number","log","time"];var cc=class{constructor(){this.result=[],this.valid=[],this.invalid=[]}push(t,e){const{result:i,valid:n,invalid:s}=this;var a;(function(t){return hc.includes(t.type)})(e)&&("string"===typeof(a=e.position)&&lc.includes(a)?n.push(t):s.push(t)),i.push(t)}guessInvalidPositions(){const t=this.valid.filter((t=>hc.includes(t.type))).map((t=>t.position)).filter((t=>void 0!==t)),e=["top","right","bottom","left"];for(const i of this.invalid){let n=e.pop();for(;t.includes(n)&&void 0!==n;)n=e.pop();if(void 0===n)break;i.position=n}return this.result}},dc=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo","stacked","grouped","stackGroup"];var uc=class extends gr{applyOptions(t){for(const e of this.moduleMap.values())e.module.optionsKey in t&&ve(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(const{module:t,moduleInstance:e}of this.moduleMap.values())"legend"===t.type&&(yield{legendType:t.identifier,legend:e})}},pc="ag-chart-overlay",gc="ag-chart-dark-overlay",mc=class extends fe{constructor(t,e){super(),this.className=t,this.defaultText=e,this.darkTheme=!1}getText(){var t;return null!=(t=this.text)?t:this.defaultText}getElement(t,e){null!=this.element||(this.element=wn("div",pc,{position:"absolute"})),this.element.classList.toggle(gc,this.darkTheme),this.focusBox=e;const i=this.element;if(i.style.left="".concat(e.x,"px"),i.style.top="".concat(e.y,"px"),i.style.width="".concat(e.width,"px"),i.style.height="".concat(e.height,"px"),this.renderer){const t=this.renderer();t instanceof HTMLElement?i.replaceChildren(t):i.innerHTML=t}else{const e=wn("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});e.innerText=this.getText(),i.replaceChildren(e),null==t||t.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(t){i.style.opacity=String(t)},onStop(){i.style.opacity="1"}})}return this.element}removeElement(t){if(this.element){if(t){const{element:e}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(t){e.style.opacity=String(t)},onStop(){e.remove()}})}else this.element.remove();this.element=void 0,this.focusBox=void 0}}};x([Xs(ea,{optional:!0})],mc.prototype,"text",2),x([Xs(ta,{optional:!0})],mc.prototype,"renderer",2),x([Xs($s)],mc.prototype,"darkTheme",2);var fc=class extends fe{constructor(){super(...arguments),this.loading=new mc("ag-chart-loading-overlay","Loading data..."),this.noData=new mc("ag-chart-no-data-overlay","No data to display"),this.noVisibleSeries=new mc("ag-chart-no-visible-series","No visible series")}getFocusInfo(){for(const t of[this.loading,this.noData,this.noVisibleSeries])if(void 0!==t.focusBox)return{text:t.getText(),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement()}};x([Xs(Js)],fc.prototype,"loading",2),x([Xs(Js)],fc.prototype,"noData",2),x([Xs(Js)],fc.prototype,"noVisibleSeries",2);var yc="\n.".concat(pc," {\n    color: #181d1f;\n}\n\n.").concat(pc,".").concat(gc," {\n    color: #ffffff;\n}\n\n.").concat(pc,"--loading {\n    color: rgb(140, 140, 140); /* DEFAULT_MUTED_LABEL_COLOUR */\n}\n\n.").concat(pc,"__loading-background {\n    background: white; /* DEFAULT_BACKGROUND_FILL */\n}\n\n.").concat(pc,".").concat(gc," .").concat(pc,"__loading-background {\n    background: #192232; /* DEFAULT_DARK_BACKGROUND_FILL */\n}\n");function vc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];for(const i of t)"number"===typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function xc(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:t=>vc(t)}}function bc(t,e){return{id:t,type:"aggregate",matchGroupIds:e?[e]:void 0,aggregateFunction:t=>vc(t),groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,n;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(n=null==t?void 0:t[1])?n:0,e}}}function Sc(t,e){return{id:t,matchGroupIds:[e],type:"aggregate",aggregateFunction:t=>Xh.extendDomain(t)}}function kc(t){return{id:t,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,n;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(n=null==t?void 0:t[1])?n:0,e}}}function wc(t,e){const i={id:t,matchGroupIds:e?[e]:void 0,type:"aggregate",aggregateFunction:t=>vc(t),groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,-1];var i,n;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(n=null==t?void 0:t[1])?n:0,e[2]++,e},finalFunction:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}};return i}function Mc(t,e,i){const n={id:t,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=i[1]-i[0];return e.aggregateFunction(t).map((t=>t/n))}};return e.groupAggregateFunction&&(n.groupAggregateFunction=e.groupAggregateFunction),n}function Dc(t){return()=>{let e=0;return i=>Kt(i)?(e+=t?Math.max(0,i):i,e):i}}function Cc(){return()=>{let t=0;return e=>{if(!Kt(e))return e;const i=t;return t+=e,i}}}var Lc={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;const i=(arguments.length>1?arguments[1]:void 0).keys[0],n=Math.abs(i-t);return t=i,!isNaN(n)&&n>0&&n<e?n:e}}},Rc={type:"processor",property:"sortedGroupDomain",calculate:t=>{let{domain:{groups:e}}=t;return null==e?void 0:e.slice().sort(((t,e)=>{for(let i=0;i<t.length;i++){const n=t[i]-e[i];if(0!==n)return n}return 0}))}};function Ic(t){let{normaliseTo:e,mode:i}=t;const n=(t,i)=>{const n=t*e/i;return n>=0?Math.min(e,n):Math.max(-e,n)};return()=>()=>(t,e)=>{const s=[0,0];for(const n of e){const e=t[n],a=e<0?0:1;"sum"===i?s[a]+=e:s[a]=0===a?Math.min(s[a],e):Math.max(s[a],e)}const a=Math.max(Math.abs(s[0]),s[1]);for(const i of e)t[i]=n(t[i],a)}}function Ac(t,e){return{type:"group-value-processor",matchGroupIds:t,adjust:Eo({normaliseTo:e,mode:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sum"},Ic)}}function Tc(t){let{normaliseTo:e,zeroDomain:i,rangeMin:n,rangeMax:s}=t;const a=e[1]-e[0],o=(t,n,s)=>{const o=e[0]+(t-n)/s*a;return 0===s?i:o>=e[1]?e[1]:o<e[0]?e[0]:o};return()=>(t,i)=>{let[a,r]=t.domain.values[i];null!=n&&(a=n),null!=s&&(r=s);const l=r-a;t.domain.values[i]=[e[0],e[1]];for(const e of t.data){let n=e.values;"ungrouped"===t.type&&(n=[n]);for(const t of n)t[i]=o(t[i],a,l)}}}function Nc(t,e,i,n,s){return{type:"property-value-processor",property:t,adjust:Eo({normaliseTo:e,rangeMin:n,rangeMax:s,zeroDomain:i},Tc)}}function Ec(t){return{type:"processor",property:"animationValidation",calculate(e){const{keys:i,values:n}=e.defs,{input:s,data:a}=e;let o=!0,r=!0;const l=[];for(let c=0;c<n.length;c++)(null==t?void 0:t.includes(n[c].id))&&l.push([c,n[c]]);const h=(t,i,n)=>{var l;if("category"===i.valueType){const i=e.domain[n][t];return void(o&&(o=i.length===s.count))}let h=null==(l=a[0])?void 0:l[n][t];for(let e=1;(o||r)&&e<a.length;e++){const i=a[e][n][t];r&&(r=h<=i),o&&(o=h!==i),h=i}};for(let t=0;(o||r)&&t<i.length;t++)h(t,i[t],"keys");for(let t=0;(o||r)&&t<l.length;t++){const[e,i]=l[t];h(e,i,"values")}return{uniqueKeys:o,orderedKeys:r}}}}function Oc(t){let{mode:e,separateNegative:i}=t;return()=>()=>(t,n)=>{const s=[0,0];for(const a of n){const n=t[a],o=Un(n)&&i?0:1;Kt(n)&&("normal"===e&&(s[o]+=n),t[a]=s[o],"trailing"===e&&(s[o]+=n))}}}function Pc(t){let{mode:e,sum:i}=t;return()=>{const t=[];let n=!0;return()=>(s,a)=>{let o=0;for(const r of a){const a=s[r],l=n&&"current"===i?0:t[r];t[r]=a;const h="current"===i?a:l;Kt(a)&&Kt(l)?("normal"===e&&(o+=h),s[r]=o,"trailing"===e&&(o+=h)):s[r]=o}n=!1}}}function Bc(t,e,i){let n,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e.startsWith("window")){n=Eo({mode:e.endsWith("-trailing")?"trailing":"normal",sum:i},Pc)}else n=Eo({mode:e,separateNegative:s},Oc);return{type:"group-value-processor",matchGroupIds:[t],adjust:n}}function Fc(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"processor",property:"diff",calculate:i=>{const n=new Map,s=new Map,a=new Map,o=new Map,r=Math.max(t.data.length,i.data.length);for(let l=0;l<r;l++){const r=t.data[l],h=i.data[l],c=r?_c(r.keys):"",d=h?_c(h.keys):"";h&&r&&c===d?dn(r.values,h.values)||a.set(d,h):(o.has(d)?(!e&&dn(o.get(d).values,h.values)||(a.set(d,h),n.set(d,h)),o.delete(d)):h&&s.set(d,h),s.has(c)?(!e&&dn(s.get(c).values,r.values)||(a.set(c,r),n.set(c,r)),s.delete(c)):r&&(a.delete(c),o.set(c,r)))}return{changed:s.size>0||a.size>0||o.size>0,added:s,updated:a,removed:o,moved:n}}}}function _c(t){let e;e=Nt(t)?t.map((t=>Zo(t))).join("___"):Zo(t);const i="string"===typeof e||"number"===typeof e||e instanceof Date;for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return i&&s.length>0&&(e+="___".concat(s.join("___"))),e}var Gc=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE",t))(Gc||{});function zc(t){return null!=t&&Xo(t)}function Wc(t){return null!=t}function Vc(t){switch(t){case"number":case"log":case"ordinal-time":case"time":case"color":return zc;default:return Wc}}function Kc(t){switch(t){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function Yc(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m({property:t,type:"key",valueType:Kc(e),validation:Vc(e)},i)}function Hc(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return m({property:t,type:"value",valueType:Kc(e),validation:Vc(e)},i)}function Uc(t){const e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{min:i=-1/0,max:n=1/0}=e,s=y(e,["min","max"]);return m({type:"value",property:t,valueType:"range",validation:zc,processor:()=>t=>Kt(t)?Wn(i,t,n):t},s)}function Xc(t,e){const i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{onlyPositive:n}=i,s=y(i,["onlyPositive"]);return f(m({},Hc(t,e,s)),{processor:Dc(n)})}function jc(t,e){return f(m({},Hc(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})),{processor:Cc()})}function Zc(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"current",n=arguments.length>3?arguments[3]:void 0;return[Hc(t,arguments.length>4?arguments[4]:void 0,n),Bc(n.groupId,e,i,n.separateNegative),...null!=n.rangeId?[Sc(n.rangeId,n.groupId)]:[]]}var qc=class{constructor(t,e,i,n){let{datum:s}=i;this.type=t,this.event=e,this.datum=s,this.seriesId=n.id}},Jc=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},Qc=class extends Ql{constructor(t){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeEvent=qc,this.internalId=_n(this),this.rootGroup=new Mo({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new gr,this._declarationOrder=-1,this.seriesListeners=new sh;const{moduleCtx:e,pickModes:i=[1],directionKeys:n={},directionNames:s={},contentGroupVirtual:a=!0,canHaveAxes:o=!1}=t;this.ctx=e,this.directionKeys=n,this.directionNames=s,this.canHaveAxes=o,this.contentGroup=this.rootGroup.appendChild(new Mo({name:"".concat(this.internalId,"-content"),isVirtual:a,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new Mo({name:"".concat(this.internalId,"-highlight"),isVirtual:a,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new Mo({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new Mo({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new Mo({name:"".concat(this.internalId,"-series-labels"),zIndex:8})),this.annotationGroup=new Mo({name:"".concat(this.id,"-annotation"),isVirtual:a,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var t,e;return null!=(e=null==(t=this.properties)?void 0:t.id)?e:this.internalId}get type(){var t;return null!=(t=this.constructor.type)?t:""}get data(){var t;return null!=(t=this._data)?t:this._chartData}set visible(t){this.properties.visible=t,this.visibleChanged()}get visible(){return this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){var t,e;return null!=(e=null==(t=this.properties.tooltip)?void 0:t.enabled)&&e}onDataChange(){this.nodeDataRefresh=!0}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){const{internalId:i,type:n,visible:s}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:n}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:n,visible:s,seriesGrouping:e}),this.fireEvent(new Jc(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach((t=>t())),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),n=null==e?void 0:e[i],s=[];if(!n)return s;const a=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const n of e)Array.isArray(n)?a(...n):"object"===typeof n?a(...Object.values(n)):s.push(n)};return a(...n.map((t=>this.properties[t]))),s}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getKeyProperties(t){var e;return null!=(e=this.directionKeys[this.resolveKeyDirection(t)])?e:[]}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){const e=this.getSeriesDomain(t),i=this.moduleMap.mapModules((e=>e.getDomain(t)));return e.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:e=!0}=this.properties.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;default:return t}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){var t,e;const i=null==(e=null==(t=this.ctx.highlightManager)?void 0:t.getActiveHighlight())?void 0:e.series;return null==i?0:i!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules((t=>t.getTooltipParams())).reduce(((t,e)=>Object.assign(t,e)),{})}pickNode(t,e){const{pickModes:i,visible:n,rootGroup:s}=this;if(n&&s.visible)for(const a of i){if(e&&!e.includes(a))continue;let i;switch(a){case 0:i=this.pickNodeExactShape(t);break;case 1:case 2:i=this.pickNodeMainAxisFirst(t,2===a);break;case 3:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:a,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);if(e&&!0!==e.datum.missing)return{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(t,e){const i=Jn(t.x,t.y,e);if(void 0!==i.nearest&&!0!==i.nearest.datum.missing)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeDoubleClick",t,e,this))}createNodeContextMenuActionEvent(t,e){return new this.NodeEvent("nodeContextMenuAction",t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return f(m({},this.ctx),{series:this})}getLabelText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String;var n;return t.formatter&&null!=(n=this.ctx.callbackCache.call(t.formatter,m({seriesId:this.id},e)))?n:i(e.value)}getMarkerStyle(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getStyle();var n,s;const a=Zt({size:null!=(s=null==(n=e.datum.point)?void 0:n.size)?s:0},i);if(t.formatter){return Zt(this.ctx.callbackCache.call(t.formatter,f(m(m({seriesId:this.id},a),e),{datum:e.datum.datum})),a)}return a}updateMarkerStyle(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getStyle(),{applyTranslation:s=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{point:a}=i.datum,o=this.getMarkerStyle(e,i,n),r=this.visible&&o.size>0&&a&&!isNaN(a.x)&&!isNaN(a.y);s?t.setProperties(f(m({visible:r},o),{translationX:null==a?void 0:a.x,translationY:null==a?void 0:a.y})):t.setProperties(m({visible:r},o)),"function"!==typeof e.shape||t.dirtyPath||(t.path.clear(!0),t.updatePath(),t.checkPathDirty())}getMinRects(t,e){}get nodeDataDependencies(){var t;return null!=(t=this._nodeDataDependencies)?t:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){const{width:e,height:i}=null!=t?t:{width:NaN,height:NaN},n=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,s=null!=be(this.nodeDataDependencies,n);return s&&(this._nodeDataDependencies=n,this.markNodeDataDirty()),s}pickFocus(t){}};Qc.highlightedZIndex=1e12,x([Zr({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],Qc.prototype,"seriesGrouping",2);var $c=class{constructor(t,e,i){this.seriesRoot=t,this.highlightRoot=e,this.annotationRoot=i,this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,n;const{internalId:s,type:a,rootGroup:o,highlightGroup:r,annotationGroup:l,seriesGrouping:h}=t,{groupIndex:c=s}=null!=h?h:{};if(null!=this.series[s])throw new Error("AG Charts - series already has an allocated layer: ".concat(this.series[s]));0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!=(e=this.groups)[a]||(e[a]={});const d=this.lookupIdx(c);let u=this.groups[a][d];return u||(u=null!=(n=(i=this.groups[a])[d])?n:i[d]={seriesIds:[],group:this.seriesRoot.appendChild(new Mo({name:"".concat(a,"-content"),layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.highlightRoot.appendChild(new Mo({name:"".concat(a,"-highlight"),zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.annotationRoot.appendChild(new Mo({name:"".concat(a,"-annotation"),zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[s]={layerState:u,seriesConfig:t},u.seriesIds.push(s),u.group.appendChild(o),u.highlight.appendChild(r),u.annotation.appendChild(l),u.group}changeGroup(t){var e,i;const{internalId:n,seriesGrouping:s,type:a,rootGroup:o,highlightGroup:r,annotationGroup:l,oldGrouping:h}=t,{groupIndex:c=n}=null!=s?s:{};(null==(i=null==(e=this.groups[a])?void 0:e[c])?void 0:i.seriesIds.includes(n))||(null!=this.series[n]&&this.releaseGroup({internalId:n,seriesGrouping:h,type:a,rootGroup:o,highlightGroup:r,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,n,s,a;const{internalId:o,seriesGrouping:r,rootGroup:l,highlightGroup:h,annotationGroup:c,type:d}=t,{groupIndex:u=o}=null!=r?r:{};if(null==this.series[o])throw new Error("AG Charts - series doesn't have an allocated layer: ".concat(o));const p=this.lookupIdx(u),g=null!=(n=null==(e=this.groups[d])?void 0:e[p])?n:null==(i=this.series[o])?void 0:i.layerState;if(g&&(g.seriesIds=g.seriesIds.filter((t=>t!==o)),g.group.removeChild(l),g.highlight.removeChild(h),g.annotation.removeChild(c)),0===(null==g?void 0:g.seriesIds.length))this.seriesRoot.removeChild(g.group),this.highlightRoot.removeChild(g.highlight),this.annotationRoot.removeChild(g.annotation),delete this.groups[d][p],delete this.groups[d][o];else if((null==g?void 0:g.seriesIds.length)>0){const t=null==(a=this.series[null==(s=null==g?void 0:g.seriesIds)?void 0:s[0]])?void 0:a.seriesConfig;g.group.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("data"),g.highlight.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("highlight"),g.annotation.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("annotation")}delete this.series[o]}lookupIdx(t){return"normal"===this.mode?t:"string"!==typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*Wn(0,t/this.expectedSeriesCount,1)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.seriesRoot.removeChild(e.group),this.highlightRoot.removeChild(e.highlight),this.annotationRoot.removeChild(e.annotation);this.groups={},this.series={}}},td=class{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("start-layout",(t=>this.positionPadding(t.shrinkRect))),this.layoutService.addListener("start-layout",(t=>this.positionCaptions(t.shrinkRect))))}destroy(){this.destroyFns.forEach((t=>t()))}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i;const{title:n,subtitle:s,footnote:a}=this.chartLike,o=t.clone(),r=e=>{var i;const n=t.height/10,s=null!=(i=e.lineHeight)?i:e.fontSize*Fo.defaultLineHeightRatio,a=t.width,o=Math.max(s,n);e.computeTextWrap(a,o)},l=t=>"left"===t?o.x:"right"===t?o.x+o.width:("center"!==t&&E.error("invalid textAlign value: ".concat(t)),o.x+o.width/2),h=(t,e)=>{const i=o.y;t.node.x=l(t.textAlign),t.node.y=i,t.node.textBaseline="top",r(t);const n=t.node.computeBBox(),s=Math.ceil(n.y-i+n.height+e);o.shrink(s,"top")};if(n.node.visible=n.enabled,s.node.visible=s.enabled,a.node.visible=a.enabled,n.enabled){const{spacing:t=(s.enabled?ol.SMALL_PADDING:ol.LARGE_PADDING)}=n;h(n,t)}return s.enabled&&h(s,null!=(e=s.spacing)?e:0),a.enabled&&((t,e)=>{const i=o.y+o.height;t.node.x=l(t.textAlign),t.node.y=i,t.node.textBaseline="bottom",r(t);const n=t.node.computeBBox(),s=Math.ceil(i-n.y+e);o.shrink(s,"bottom")})(a,null!=(i=a.spacing)?i:0),{shrinkRect:o}}},ed=class{constructor(t,e,i,n){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=n,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",(()=>this.onDataSourceChange())),this.dataService.addListener("data-load",(()=>this.onDataLoad())),this.dataService.addListener("data-error",(()=>this.onDataError())),this.updateService.addListener("update-complete",(()=>this.onUpdateComplete())),this.zoomManager.addListener("zoom-change",(()=>this.onZoomChange())))}destroy(){this.destroyFns.forEach((t=>t()))}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){(this.dirtyZoom||this.dirtyDataSource)&&this.updateWindow().catch((t=>E.errorOnce(t)))}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return S(this,null,(function*(){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let e,i=!0;if(t){const n=this.zoomManager.getAxisZoom(t.id);e=this.getAxisWindow(t,n),i=this.shouldRefresh(t,n)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:null==e?void 0:e.min,windowEnd:null==e?void 0:e.max})}))}getValidAxis(){return this.chart.axes.find((t=>"time"===t.type))}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(t.id);return(!i||e.min!==i.min||e.max!==i.max)&&(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){var i,n;const s=null==(n=(i=t.scale).getDomain)?void 0:n.call(i);if(!e||!s||0===s.length||isNaN(Number(s[0])))return;const a=Number(s[1])-Number(s[0]);return{min:new Date(Number(s[0])+a*e.min),max:new Date(Number(s[0])+a*e.max)}}},id=class{constructor(t,e,i,n,s){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutService=n,this.animationManager=s,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",(t=>this.onLayoutComplete(t))))}destroy(){this.destroyFns.forEach((t=>t()))}onLayoutComplete(t){let{series:{rect:e}}=t;const i=this.dataService.isLoading(),n=this.chartLike.series.some((t=>t.hasData)),s=this.chartLike.series.some((t=>t.visible));this.toggleOverlay(this.overlays.loading,e,i),this.toggleOverlay(this.overlays.noData,e,!i&&!n),this.toggleOverlay(this.overlays.noVisibleSeries,e,n&&!s)}toggleOverlay(t,e,i){if(i){const i=t.getElement(this.animationManager,e);this.chartLike.element.append(i)}else t.removeElement(this.animationManager)}},nd=In.create(!0,"opts"),sd=class extends fe{constructor(){super(...arguments),this.padding=new $l(0)}};x([Xs($s,{optional:!0})],sd.prototype,"clip",2),x([Xs(Js)],sd.prototype,"padding",2);var ad=class t extends Ql{constructor(t,e){var i,n,s;super(),i=this,this.id=_n(this),this.seriesRoot=new Mo({name:"".concat(this.id,"-series-root")}),this.highlightRoot=new Mo({name:"".concat(this.id,"-highlight-root"),layer:!0,zIndex:5,nonEmptyChildDerivedZIndex:!0}),this.annotationRoot=new Mo({name:"".concat(this.id,"-annotation-root"),layer:!0,zIndex:10}),this.debug=In.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new $l(20),this.seriesArea=new sd,this.title=new ol,this.subtitle=new ol,this.footnote=new ol,this.keyboard=new oc,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.modulesManager=new uc,this.zoomManager=new sc,this.processors=[],this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new Jl,this.updateRequestors={},this.performUpdateTrigger=th((function(t){return setTimeout(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}),(t=>S(this,[t],(function(t){var e=this;let{count:i}=t;return function*(){e.destroyed||e.updateMutex.acquire((()=>S(e,null,(function*(){try{yield this.performUpdate(i)}catch(t){E.error("update error",t)}})))).catch((t=>E.errorOnce(t)))}()})))),this._performUpdateSplits={},this.axes=[],this.series=[],this.focus={hasFocus:!1,series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.pointerScheduler=function(t){return th(((t,e)=>requestAnimationFrame(t)),t)}((()=>{this.lastInteractionEvent&&(this.performUpdateType<=4?this.pointerScheduler.schedule():(this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0))})),this.onSeriesNodeClick=t=>{const e=f(m({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=f(m({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)},this.seriesGroupingChanged=t=>{if(!(t instanceof Jc))return;const{series:e,seriesGrouping:i,oldGrouping:n}=t;null!=e.rootGroup.parent&&this.seriesLayerManager.changeGroup({internalId:e.internalId,type:e.type,rootGroup:e.rootGroup,highlightGroup:e.highlightGroup,annotationGroup:e.annotationGroup,getGroupZIndexSubOrder:t=>e.getGroupZIndexSubOrder(t),seriesGrouping:i,oldGrouping:n})},this.dataProcessListeners=new Set,this.chartOptions=t;let a=null==e?void 0:e.scene;const o=null!=(n=null==e?void 0:e.element)?n:wn("div","ag-chart-wrapper",{position:"relative",userSelect:"none"}),r=null==e?void 0:e.container;this.element=o;const l=new Mo({name:"root"});l.visible=!1,l.append(this.seriesRoot),l.append(this.highlightRoot),l.append(this.annotationRoot),this.axisGridGroup=new Mo({name:"Axes-Grids",layer:!0,zIndex:1}),l.appendChild(this.axisGridGroup),this.axisGroup=new Mo({name:"Axes",layer:!0,zIndex:2}),l.appendChild(this.axisGroup),this.sizeMonitor=new eh,this.sizeMonitor.observe(this.element,(t=>this.rawResize(t)));const{overrideDevicePixelRatio:h}=t.specialOverrides;null!=a||(a=new jl({pixelRatio:h,canvasPosition:"absolute"})),a.setRoot(l).setContainer(o),this.autoSize=!0,this.tooltip=new al,this.seriesLayerManager=new $c(this.seriesRoot,this.highlightRoot,this.annotationRoot);const c=this.ctx=new Yh(this,{scene:a,syncManager:new nc(this),element:o,updateCallback:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return i.update(t,e)},updateMutex:this.updateMutex});this.overlays=new fc,null!=(s=this.overlays.loading).renderer||(s.renderer=()=>function(t,e){const{animationDuration:i}=Cs.add,n=i*e,s=wn("div","".concat(pc,"--loading"),{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:"ag-charts-loading ".concat(n,"ms linear 50ms both")}),a=wn("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=wn("p",{marginTop:"1em"});o.innerText=t;const r=wn("div","".concat(pc,"__loading-background"),{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=wn("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),s.replaceChildren(l,a,o,r),Dn(yc,"chartOverlays"),s}(this.overlays.loading.getText(),c.animationManager.defaultDuration)),this.processors=[new td(this,c.layoutService),new ed(this,c.dataService,c.updateService,c.zoomManager),new id(this,this.overlays,c.dataService,c.layoutService,c.animationManager)],this.highlight=new Hh,this.container=r;const{All:d}=mh,u=this.getModuleContext(),p=c.regionManager.addRegion("series",this.seriesRoot,this.axisGroup);c.regionManager.addRegion("root",l),this._destroyFns.push(c.dataService.addListener("data-load",(t=>{this.data=t.data})),c.scene.attachNode(this.title.node),c.scene.attachNode(this.subtitle.node),c.scene.attachNode(this.footnote.node),this.title.registerInteraction(u,"title"),this.subtitle.registerInteraction(u,"subtitle"),this.footnote.registerInteraction(u,"footnote"),c.interactionManager.addListener("click",(t=>this.onClick(t))),c.interactionManager.addListener("dblclick",(t=>this.onDoubleClick(t))),p.addListener("hover",(t=>this.onMouseMove(t))),p.addListener("leave",(t=>this.onLeave(t))),p.addListener("blur",(()=>this.onBlur())),p.addListener("tab",(t=>this.onTab(t))),p.addListener("nav-vert",(t=>this.onNavVert(t))),p.addListener("nav-hori",(t=>this.onNavHori(t))),p.addListener("submit",(t=>this.onSubmit(t))),c.keyNavManager.addListener("browserfocus",(t=>this.onBrowserFocus(t))),c.interactionManager.addListener("page-left",(()=>this.destroy())),c.interactionManager.addListener("contextmenu",(t=>this.onContextMenu(t)),d),c.animationManager.addListener("animation-start",(()=>this.onAnimationStart())),c.animationManager.addListener("animation-frame",(()=>{this.update(6)})),c.highlightManager.addListener("highlight-change",(t=>this.changeHighlightDatum(t))),c.zoomManager.addListener("zoom-pan-start",(()=>this.resetPointer())),c.zoomManager.addListener("zoom-change",(()=>{this.resetPointer(),this.series.map((t=>{var e;return null==(e=t.animationState)?void 0:e.transition("updateData")}));const t="initial"!==this.chartAnimationPhase;this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t})})))}static getInstance(e){return t.chartsInstances.get(e)}get canvasElement(){return this.ctx.scene.canvas.element}getCanvasDataURL(t){return this.ctx.scene.getDataURL(t)}onAutoSizeChange(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.ctx.scene.download(t,e)}getOptions(){var t;return null!=(t=this.queuedUserOptions.at(-1))?t:this.userOptions}getModuleContext(){return this.ctx}getAriaLabel(){var t;const e=[this.title,this.subtitle,this.footnote].filter((t=>t.enabled&&t.text)).map((t=>t.text)).join(". "),i=null!=(t=this.series.length)?t:0;return"chart, ".concat(i," series, ").concat(e)}resetAnimations(){this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(t){if(this.destroyed)return;const e=null==t?void 0:t.keepTransferableResources;let i;return this.performUpdateType=7,this._destroyFns.forEach((t=>t())),this.processors.forEach((t=>t.destroy())),this.tooltip.destroy(),this.overlays.destroy(),this.sizeMonitor.unobserve(this.element),this.modulesManager.destroy(),e?(this.ctx.scene.strip(),i={container:this.container,scene:this.ctx.scene,element:this.element}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach((t=>t.destroy())),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.zoomManager.destroy(),this.destroyed=!0,Object.freeze(this),i}resetPointer(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.ctx.tooltipManager.removeTooltip(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire((()=>S(this,null,(function*(){this.destroyed||(yield t(this),this.destroyed||this._pendingFactoryUpdatesCount--)})))).catch((t=>E.errorOnce(t))))}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;var i,n;const{forceNodeDataRefresh:s=!1,skipAnimations:a,seriesToUpdate:o=this.series,newAnimationBatch:r}=null!=e?e:{};s&&this.series.forEach((t=>t.markNodeDataDirty()));for(const l of o)this.seriesToUpdate.add(l);if(a&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),r&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=null!=(i=null==e?void 0:e.skipSync)&&i,this.debug.check()){let e=null!=(n=(new Error).stack)?n:"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.performUpdateTrigger.schedule(null==e?void 0:e.backOffMs))}performUpdate(t){return S(this,null,(function*(){const{performUpdateType:e,extraDebugStats:i,_performUpdateSplits:n,ctx:s}=this,a=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&e<6&&(s.animationManager.startBatch(this._performUpdateSkipAnimations),s.animationManager.onBatchStop((()=>this.chartAnimationPhase="ready"))),this.debug("Chart.performUpdate() - start",Vh[e]);let o=performance.now();null!=n.start||(n.start=o);const r=t=>{null!=n[t]||(n[t]=0),n[t]+=performance.now()-o,o=performance.now()};let l=!1;switch(e){case 0:this.updateDOM();case 1:yield this.updateData(),r("\u2b07\ufe0f");case 2:yield this.processData(),this.resetPointer(!0),r("\ud83c\udfed");case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(a)){l=!0;break}yield this.processLayout(),r("\u2316");case 4:if(this.checkUpdateShortcut(4))break;const{seriesRect:t}=this;yield Promise.all(a.map((e=>e.update({seriesRect:t})))),r("\ud83e\udd14");case 5:if(this.checkUpdateShortcut(5))break;const o=s.tooltipManager.getTooltipMeta(this.id);e<=4&&null!=(null==o?void 0:o.lastPointerEvent)&&this.handlePointer(o.lastPointerEvent,!0),r("\u2196");case 6:if(this.checkUpdateShortcut(6))break;s.animationManager.endBatch(),i.updateShortcutCount=this.updateShortcutCount,yield s.scene.render({debugSplitTimes:n,extraDebugStats:i}),this.ctx.regionManager.updateFocusWrapperRect(),this.extraDebugStats={};for(const e in n)delete n[e];case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,s.animationManager.endBatch()}l||s.updateService.dispatchUpdateComplete(this.getMinRects());const h=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(h-n.start))/100,count:t,performUpdateType:Vh[e]})}))}updateThemeClassName(){const{element:t,processedOptions:{theme:e}}=this,i="ag-charts-theme-",n=["".concat(i,"default"),"".concat(i,"default-dark")];let s=n[0],a=!1;"string"===typeof e?(s=e.replace("ag-",i),a=e.includes("-dark")):"string"===typeof(null==e?void 0:e.baseTheme)&&(s=e.baseTheme.replace("ag-",i),a=e.baseTheme.includes("-dark")),n.includes(s)||(s=a?n[1]:n[0]),t.classList.forEach((e=>{e.startsWith(i)&&e!==s&&t.classList.remove(e)})),t.classList.add(s)}updateDOM(){this.updateThemeClassName();const{enabled:t,tabIndex:e}=this.keyboard;this.element.tabIndex=t?null!=e?e:0:-1,Jr(this.ctx.scene.canvas.element,"role","figure"),Jr(this.ctx.scene.canvas.element,"aria-label",this.getAriaLabel())}checkUpdateShortcut(t){return this.updateShortcutCount>3?(E.warn("exceeded the maximum number of simultaneous updates (".concat(4,"), discarding changes and rendering"),this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=40*p(e+1,2);if(e<8)return this.update(3,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onAxisChange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const i of e)t.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of t)(null==e?void 0:e.includes(i))||i.attachAxis(this.axisGroup,this.axisGridGroup)}onSeriesChange(t,e){var i,n;const s=null!=(i=null==e?void 0:e.filter((e=>!t.includes(e))))?i:[];this.destroySeries(s),null==(n=this.seriesLayerManager)||n.setSeriesCount(t.length);for(const a of t){if(null==e?void 0:e.includes(a))continue;null==a.rootGroup.parent&&this.seriesLayerManager.requestGroup(a);const t=this;a.chart={get mode(){return t.mode},get isMiniChart(){return!1},get seriesRect(){return t.seriesRect},placeLabels:()=>t.placeLabels()},a.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(a),a.addChartEventListeners()}}destroySeries(t){null==t||t.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.removeEventListener("groupingChanged",this.seriesGroupingChanged),t.destroy(),this.seriesLayerManager.releaseGroup(t),t.chart=void 0}))}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)}))}assignSeriesToAxes(){this.axes.forEach((t=>{t.boundSeries=this.series.filter((e=>e.axes[t.direction]===t))}))}assignAxesToSeries(){const t=gn(this.axes,(t=>t.direction));this.series.forEach((e=>{e.directions.forEach((i=>{const n=t[i];if(!n)return void E.warnOnce("no available axis for direction [".concat(i,"]; check series and axes configuration."));const s=e.getKeys(i),a=n.find((t=>!t.keys.length||s.some((e=>t.keys.includes(e)))));a?e.axes[i]=a:E.warnOnce("no matching axis for direction [".concat(i,"] and keys [").concat(s,"]; check series and axes configuration."))}))}))}rawResize(t){let{width:e,height:i}=t;var n;if(!this.autoSize)return;if(e=Math.floor(e),i=Math.floor(i),0===e&&0===i)return;const[s=0,a=0]=null!=(n=this._lastAutoSize)?n:[];s===e&&a===i||(this._lastAutoSize=[e,i],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var n,s,a,o;const{scene:r,animationManager:l}=this.ctx;if(null!=t||(t=null!=(s=this.width)?s:this.autoSize?null==(n=this._lastAutoSize)?void 0:n[0]:r.canvas.width),null!=e||(e=null!=(o=this.height)?o:this.autoSize?null==(a=this._lastAutoSize)?void 0:a[1]:r.canvas.height),this.debug("Chart.resize() from ".concat(i),{width:t,height:e,stack:(new Error).stack}),t&&e&&Kt(t)&&Kt(e)&&r.resize(t,e)){this.resetPointer(),l.reset();let t=!0;this.autoSize&&this._firstAutoSize&&(t=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t})}}updateData(){return S(this,null,(function*(){this.series.forEach((t=>t.setChartData(this.data)));const t=this.modulesManager.mapModules((t=>{var e;return null==(e=t.updateData)?void 0:e.call(t,{data:this.data})}));yield Promise.all(t)}))}processData(){return S(this,null,(function*(){if(this.series.some((t=>t.canHaveAxes))){this.assignAxesToSeries();const t=this.modulesManager.getModule("sync");(null==t?void 0:t.enabled)?t.syncAxes(this._skipSync):this.assignSeriesToAxes()}const t=new ec(this.mode),e=this.series.map((e=>e.processData(t))),i=this.modulesManager.mapModules((e=>{var i;return null==(i=e.processData)?void 0:i.call(e,{dataController:t})}));t.execute(),yield Promise.all([...e,...i]);for(const{legendType:n,legend:s}of this.modulesManager.legends())s.data=this.getLegendData(n,"integrated"!==this.mode);this.dataProcessListeners.forEach((t=>t())),this.dataProcessListeners.clear()}))}placeLabels(){const t=[],e=[];for(const h of this.series){if(!h.visible)continue;const n=h.getLabelData();null!=(i=null==n?void 0:n[0])&&"object"===typeof i.point&&"object"===typeof i.label&&(e.push(n),t.push(h))}var i;const{seriesRect:n}=this,{top:s,right:a,bottom:o,left:r}=this.seriesArea.padding,l=n&&e.length>0?function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;var n,s;const a=[];t=t.map((t=>t.slice().sort(((t,e)=>e.point.size-t.point.size))));for(let c=0;c<t.length;c++){const d=a[c]=[],u=t[c];if((null==u?void 0:u.length)&&u[0].label)for(let c=0,p=u.length;c<p;c++){const p=u[c],{point:g,label:m,marker:f}=p,{text:y,width:v,height:x}=m,b=.5*g.size;let S=0,k=0;if(b>0&&null!=p.placement){const t=Kr[p.placement];S=(.5*v+b+i)*t.x,k=(.5*x+b+i)*t.y}const w=g.x-.5*v+S-((null!=(n=null==f?void 0:f.center.x)?n:.5)-.5)*g.size,M=g.y-.5*x+k-((null!=(s=null==f?void 0:f.center.y)?s:.5)-.5)*g.size;(!e||(l=M,h=x,(r=w)+v<(o=e).x+o.width&&r>o.x&&l>o.y&&l+h<o.y+o.height))&&(t.some((t=>t.some((t=>{var e;return Wr(t.point,null==(e=t.marker)?void 0:e.center,w,M,v,x)}))))||a.some((t=>t.some((t=>Vr(t,w,M,v,x)))))||d.push({index:c,text:y,x:w,y:M,width:v,height:x,datum:p}))}}var o,r,l,h;return a}(e,{x:-r,y:-s,width:n.width+r+a,height:n.height+s+o}):[];return new Map(l.map(((e,i)=>[t[i],e])))}getLegendData(t,e){var i,n;const s=this.series.filter((t=>t.properties.showInLegend)).flatMap((e=>e.getLegendData(t)));if(e&&s.every((t=>"category"===t.legendType))){const t={},e=new Map(this.series.map((t=>[t.id,t.type])));for(const{seriesId:a,marker:o,label:r}of s){if(null==o.fill)continue;const s=e.get(a),l=null!=(i=t[s])?i:t[s]={};null!=l[n=r.text]||(l[n]=o.fill),l[r.text]!==o.fill&&E.warnOnce("legend item '".concat(r.text,"' has multiple fill colors, this may cause unexpected behaviour."))}}return s}processLayout(){return S(this,null,(function*(){var t;const e=this.animationRect;yield this.performLayout(),e&&!(null==(t=this.animationRect)?void 0:t.equals(e))&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}))}performLayout(){return S(this,null,(function*(){const{width:t,height:e}=this.ctx.scene;let i={shrinkRect:new ts(0,0,t,e)};i=this.ctx.layoutService.dispatchPerformLayout("start-layout",i),i=this.ctx.layoutService.dispatchPerformLayout("before-series",i);const n=this.modulesManager.mapModules((t=>S(this,null,(function*(){null!=t.performLayout&&(i=yield t.performLayout(i))}))));return yield Promise.all(n),i.shrinkRect}))}pickSeriesNode(t,e,i){var n,s;const a=performance.now(),o=e?[0]:void 0,r=[...this.series].reverse();let l;for(const h of r){if(!h.visible||!h.rootGroup.visible)continue;const{match:e,distance:s}=null!=(n=h.pickNode(t,o))?n:{};if(e&&null!=s&&((!l||l.distance>s)&&s<=(null!=i?i:1/0)&&(l={series:h,distance:s,datum:e}),0===s))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!=(s=this.extraDebugStats.pickSeriesNode)?s:0)+(performance.now()-a)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(6)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||(this.resetPointer(),this.update(6),this.ctx.cursorManager.updateCursor("chart"))}onBrowserFocus(t){t.delta>0?(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=0,this.focus.seriesIndex=0):(this.focus.datum=void 0,this.focus.series=void 0,this.focus.datumIndex=1/0,this.focus.seriesIndex=1/0)}onAnimationStart(){this.focus.hasFocus&&this.onBlur()}onBlur(){this.ctx.regionManager.updateFocusIndicatorRect(void 0),this.resetPointer(),this.focus.hasFocus=!1}onTab(t){this.handleFocus(),t.consume(),this.focus.hasFocus=!0}onNavVert(t){this.focus.seriesIndex+=t.delta,this.handleFocus(),t.consume()}onNavHori(t){this.focus.datumIndex+=t.delta,this.handleFocus(t.delta),t.consume()}onSubmit(t){const{series:e,datum:i}=this.focus,n=t.sourceEvent.sourceEvent;void 0!==e&&void 0!==i?e.fireNodeClickEvent(n,i):this.fireEvent({type:"click",event:n})}onContextMenu(t){this.ctx.tooltipManager.removeTooltip(this.id);const{Default:e,ContextMenu:i}=mh;this.ctx.interactionManager.getState()&(e|i)&&this.checkSeriesNodeRange(t,(()=>{this.ctx.highlightManager.updateHighlight(this.id)}))}handleFocus(t){this.focus.hasFocus=!0;const e=this.overlays.getFocusInfo();null==e?this.handleSeriesFocus(null!=t?t:0):(this.ctx.regionManager.updateFocusIndicatorRect(e.rect),this.ctx.ariaAnnouncementService.announceValue(e.text))}handleSeriesFocus(t){const{series:e,seriesRect:i,focus:n}=this,s=e.filter((t=>t.visible));if(0===s.length)return;n.seriesIndex=Wn(0,n.seriesIndex,s.length-1),n.series=s[n.seriesIndex];const a=n.series.pickFocus({datumIndex:n.datumIndex,datumIndexDelta:t,seriesRect:i});if(void 0===a)return;const{datum:o,datumIndex:r}=a;n.datumIndex=r,n.datum=o;const l=rc(this.ctx.regionManager,a);if(void 0!==l){this.lastInteractionEvent=l;const t=n.series.getTooltipHtml(o),e=Gh.makeTooltipMeta(this.lastInteractionEvent,o);this.ctx.highlightManager.updateHighlight(this.id,o),this.ctx.tooltipManager.updateTooltip(this.id,e,t),this.ctx.ariaAnnouncementService.announceValue(t.ariaLabel)}}static isHoverEvent(t){return void 0!==t&&"hover"===t.type}handlePointer(e,i){var n=this;if(16!==this.ctx.interactionManager.getState()||!t.isHoverEvent(e))return;const{lastPick:s,hoverRect:a}=this,{offsetX:o,offsetY:r}=e,l=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s&&n.resetPointer(t)};(i?!this.ctx.animationManager.isActive():null==a?void 0:a.containsPoint(o,r))?(this.handlePointerTooltip(e,l),this.handlePointerNode(e)):l()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:n}=this,{range:s}=n,{offsetX:a,offsetY:o}=t;let r;Kt(s)&&(r=s);const l=this.pickSeriesNode({x:a,y:o},"exact"===s,r);if(!l)return this.ctx.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const h="node"===this.highlight.range||!i||i!==l.datum;let c;h&&(c=l.series.getTooltipHtml(l.datum),"tooltip"===this.highlight.range&&this.ctx.highlightManager.updateHighlight(this.id,l.datum));const d=null!=r,u=this.tooltip.enabled&&l.series.tooltipEnabled,p="exact"===s&&0===l.distance,g=u&&("nearest"===s||d||p)&&(!h||void 0!==c),m=Gh.makeTooltipMeta(t,l.datum);g&&this.ctx.tooltipManager.updateTooltip(this.id,m,c)}handlePointerNode(t){this.checkSeriesNodeRange(t,((t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.ctx.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.ctx.highlightManager.updateHighlight(this.id,e)}))||(this.ctx.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.ctx.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(4):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(4):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,((e,i)=>e.fireNodeClickEvent(t.sourceEvent,i)))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,((e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i)))}checkSeriesNodeRange(t,e){var i;const n=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),s=null==n?void 0:n.datum,a=null==s?void 0:s.series.properties.nodeClickRange;let o;Kt(a)&&(o=a);let r=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(r?this.ctx.highlightManager.updatePicked(this.id,r.datum):this.ctx.highlightManager.updatePicked(this.id),s&&"nearest"===a)return e(s.series,s),!0;if("exact"!==a&&(r=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,o)),!r)return!1;const l=null!=o,h="exact"===a&&0===r.distance;if(l||h){if(void 0===t.pointerHistory||(null==(i=t.pointerHistory)?void 0:i.every((t=>{const e={x:t.offsetX,y:t.offsetY},i=this.pickSeriesNode(e,!1,o);return(null==i?void 0:i.datum)===(null==r?void 0:r.datum)}))))return e(r.series,r.datum),!0}return!1}changeHighlightDatum(t){var e,i;const n=new Set,{series:s,datum:a}=null!=(e=t.currentHighlight)?e:{},{series:o,datum:r}=null!=(i=t.previousHighlight)?i:{};o&&n.add(o),s&&n.add(s),(null==o?void 0:o.properties.cursor)&&r&&this.ctx.cursorManager.updateCursor(o.id),(null==s?void 0:s.properties.cursor)&&a&&this.ctx.cursorManager.updateCursor(s.id,s.properties.cursor),this.lastPick=t.currentHighlight;null==s||null==o?this.update(4):this.update(4,{seriesToUpdate:n})}waitForUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return S(this,null,(function*(){const i=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());7!==this.performUpdateType;){if(performance.now()-i>t){const i="Chart.waitForUpdate() timeout of ".concat(t," reached - first chart update taking too long.");if(e)throw new Error(i);E.warnOnce(i)}yield ql(50)}yield this.updateMutex.waitForClearAcquireQueue()}))}waitForDataProcess(t){return new Promise((e=>{this.dataProcessListeners.add(e),Vt(t)&&setTimeout((()=>{this.dataProcessListeners.has(e)&&(this.dataProcessListeners.delete(e),e())}),t)}))}getMinRects(){const{width:t,height:e}=this.ctx.scene,i=this.series.map((i=>i.getMinRects(t,e))).filter(Tt);if(0===i.length)return;let n=0,s=0,a=0,o=0;for(const{minRect:h,minVisibleRect:c}of i)n=Math.max(n,h.width),s=Math.max(s,h.height),a=Math.max(a,c.width),o=Math.max(o,c.height);const r=new ts(0,0,n,s);let l=r.clone();return a>0&&o>0&&(l=new ts(0,0,a,o)),{minRect:r,minVisibleRect:l}}filterMiniChartSeries(t){return null==t?void 0:t.filter((t=>!1!==t.showInMiniChart))}applyOptions(t){var e,i,n,s,a;const o=this.processedOptions,r=t.diffOptions(o),l=t.userOptions;if(null==r)return;nd("AgChartV2.updateDelta() - applying delta",r);const h=Zt(r,o),c=this.applyModules(h);r.listeners&&this.registerListeners(this,r.listeners),Me(this,r,{skip:["type","data","series","listeners","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","axes","topology"]});let d=!1,u="no-op";(null==(e=r.series)?void 0:e.length)&&(u=this.applySeries(this,r.series,null==o?void 0:o.series),d=!0),"replaced"===u&&this.resetAnimations(),this.applyAxes(this,h,o,u)&&(d=!0),r.data&&(this.data=r.data),(null==(i=r.legend)?void 0:i.listeners)&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,r.legend.listeners),r.listeners&&this.updateAllSeriesListeners(),this.chartOptions=t,this.processedOptions=h,this.userOptions=Zt(l,this.userOptions);const p=this.modulesManager.getModule("navigator"),g=this.modulesManager.getModule("zoom");(null==p?void 0:p.enabled)||(null==g?void 0:g.enabled)||this.ctx.zoomManager.updateZoom("chart");const m=null==p?void 0:p.miniChart,f=null!=(a=null==(s=null==(n=h.navigator)?void 0:n.miniChart)?void 0:s.series)?a:h.series;!0===(null==m?void 0:m.enabled)&&null!=f?this.applyMiniChartOptions(m,f,h,o):!1===(null==m?void 0:m.enabled)&&(m.series=[],m.axes=[]),Dn(Zl,"chart"),this.ctx.annotationManager.setAnnotationStyles(t.annotationThemes),d||(d=this.shouldForceNodeDataRefresh(r,u));const y=d||c?0:3;this.maybeResetAnimations(u),nd("AgChartV2.applyChartOptions() - update type",Vh[y],{seriesStatus:u,forceNodeDataRefresh:d}),this.update(y,{forceNodeDataRefresh:d,newAnimationBatch:!0})}maybeResetAnimations(t){if("standalone"===this.mode)switch(t){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(t,e){const i=!!t.data||"data-change"===e||"replaced"===e,n=Re.getKeys(),s=Object.values(n).some((e=>null!=t[e])),a=null!=t.title&&null!=t.subtitle;return i||s||a}applyMiniChartOptions(t,e,i,n){var s,a,o,r,l;const h=null!=(o=null==(a=null==(s=null==n?void 0:n.navigator)?void 0:s.miniChart)?void 0:a.series)?o:null==n?void 0:n.series,c=this.applySeries(t,this.filterMiniChartSeries(e),this.filterMiniChartSeries(h));this.applyAxes(t,i,n,c,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const d=t.axes,u=d.find((t=>"x"===t.direction));for(const p of d)p.gridLine.enabled=!1,p.label.enabled=p===u,p.tick.enabled=!1,p.interactionEnabled=!1;if(null!=u){const t=null==(r=i.navigator)?void 0:r.miniChart,e=null==t?void 0:t.label,n=null==(l=null==t?void 0:t.label)?void 0:l.interval;u.line.enabled=!1,u.label.set(Qt(e,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),u.tick.set(Qt(n,["enabled","width","size","color","interval","step"]));const s=null==n?void 0:n.step;null!=s&&(u.tick.interval=s)}}applyModules(t){var e;const{type:i}=this.constructor;let n=!1;for(const s of kt.byType("root","legend")){const a=null!=t[s.optionsKey]&&s.chartTypes.includes(i);a!==this.modulesManager.isEnabled(s)&&(a?(this.modulesManager.addModule(s,(t=>new t.instanceConstructor(this.getModuleContext()))),"legend"===s.type&&(null==(e=this.modulesManager.getModule(s))||e.attachLegend(this.ctx.scene)),this[s.optionsKey]=this.modulesManager.getModule(s)):(this.modulesManager.removeModule(s),delete this[s.optionsKey]),n=!0)}return n}applySeries(t,e,i){var n;if(!e)return"no-change";const s=function(t,e,i){var n,s,a,o;const r=(t,e)=>{const i=[t];for(const n of dc)n in e&&null!=e[n]&&i.push("".concat(n,"=").concat(e[n]));return i.join(";")},l=new Map;let h=0;for(const p of t){const t=r(p.type,p.properties);l.has(t)||l.set(t,[]),null==(n=l.get(t))||n.push([p,h++])}const c=new Map;for(const p of e){const t=r(p.type,p);c.has(t)||c.set(t,[]),null==(s=c.get(t))||s.push(p)}if(![...l.keys()].some((t=>c.has(t))))return{status:"no-overlap",oldKeys:l.keys(),newKeys:c.keys()};const d=[];let u=-1;for(const[p,g]of c.entries())for(const t of g){u++;const e=l.get(p);if(null==e||e.length<1){d.push({opts:t,idx:u,status:"add"}),l.delete(p);continue}const[n,s]=e.shift(),r=be(null!=(a=null==i?void 0:i[s])?a:{},null!=t?t:{}),{groupIndex:h,stackIndex:c}=null!=(o=null==r?void 0:r.seriesGrouping)?o:{};null!=h||null!=c?d.push({opts:t,series:n,diff:r,idx:s,status:"series-grouping"}):r?d.push({opts:t,series:n,diff:r,idx:s,status:"update"}):d.push({opts:t,series:n,idx:s,status:"no-op"}),0===e.length&&l.delete(p)}for(const p of l.values())for(const[t,e]of p)d.push({series:t,idx:e,status:"remove"});return{status:"overlap",changes:d}}(t.series,e,i);if("no-overlap"===s.status)return nd("AgChartV2.applySeries() - creating new series instances, status: ".concat(s.status),s),t.series=e.map((t=>this.createSeries(t))),"replaced";nd("AgChartV2.applySeries() - matchResult",s);const a=[];let o=!1,r=!1,l=!1;for(const h of s.changes)switch(r||(r="series-grouping"===h.status),o||(o=null!=(null==(n=h.diff)?void 0:n.data)),l||(l="no-op"!==h.status),h.status){case"add":const t=this.createSeries(h.opts);a.push(t),nd("AgChartV2.applySeries() - created new series",t);break;case"remove":nd("AgChartV2.applySeries() - removing series at previous idx ".concat(h.idx),h.series);break;case"no-op":a.push(h.series),nd("AgChartV2.applySeries() - no change to series at previous idx ".concat(h.idx),h.series);break;default:const{series:e,diff:i,idx:n}=h;nd("AgChartV2.applySeries() - applying series diff previous idx ".concat(n),i,e),this.applySeriesValues(e,i),e.markNodeDataDirty(),a.push(e)}for(let h=0;h<a.length;h++)a[h]._declarationOrder=h;return nd("AgChartV2.applySeries() - final series instances",a),t.series=a,r?"series-grouping-change":o?"data-change":l?"updated":"no-op"}applyAxes(t,e,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!("axes"in e)||!e.axes)return!1;s=["axes[].type",...s];const{axes:a}=e;return"replaced"!==n&&t.axes.length===a.length&&t.axes.every(((t,e)=>t.type===a[e].type))&&ue(i)?(t.axes.forEach(((t,e)=>{var n,o;const r=be(null!=(o=null==(n=i.axes)?void 0:n[e])?o:{},a[e]);nd("AgChartV2.applyAxes() - applying axis diff idx ".concat(e),r);const l="axes[".concat(e,"]");Me(t,r,f(m({},Xa),{path:l,skip:s}))})),!0):(nd("AgChartV2.applyAxes() - creating new axes instances; seriesStatus: ".concat(n)),t.axes=this.createAxis(a,s),!0)}createSeries(t){const e=Le.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(e,t),this.applySeriesValues(e,t),e}applySeriesOptionModules(t,e){const i=t.createModuleContext(),n=t.getModuleMap();for(const s of kt.byType("series-option"))s.optionsKey in e&&s.seriesTypes.includes(t.type)&&n.addModule(s,(t=>new t.instanceConstructor(i)))}applySeriesValues(t,e){const i=t.getModuleMap(),n=e,{type:s,data:a,listeners:o,seriesGrouping:r,showInMiniChart:l}=n,h=y(n,["type","data","listeners","seriesGrouping","showInMiniChart"]);for(const c of le)if("series-option"===c.type&&c.optionsKey in h){const t=i.getModule(c.optionsKey),e=h[c.optionsKey];delete h[c.optionsKey],t.properties.set(e)}t.properties.set(h),"data"in e&&t.setOptionsData(a),o&&this.registerListeners(t,o),"seriesGrouping"in e&&(t.seriesGrouping=null==r?void 0:m(m({},t.seriesGrouping),r))}createAxis(t,e){const i=new cc,n=this.getModuleContext();for(let s=0;s<t.length;s++){const a=t[s],o=wt.create(a.type,n);this.applyAxisModules(o,a),Me(o,a,f(m({},Xa),{path:"axes[".concat(s,"]"),skip:e})),i.push(o,a)}return i.guessInvalidPositions()}applyAxisModules(t,e){const i=t.createModuleContext(),n=t.getModuleMap();for(const s of kt.byType("axis-option")){const a=null!=e[s.optionsKey];a!==n.isEnabled(s)&&(a?(n.addModule(s,(t=>new t.instanceConstructor(i))),t[s.optionsKey]=n.getModule(s)):(n.removeModule(s),delete t[s.optionsKey]))}}registerListeners(t,e){t.clearEventListeners();for(const[i,n]of Object.entries(e))Ft(n)&&t.addEventListener(i,n)}};ad.chartsInstances=new WeakMap,x([Zr({newValue(t){this.destroyed||(t.setAttribute("data-ag-charts",""),t.appendChild(this.element),ad.chartsInstances.set(t,this))},oldValue(t){t.removeAttribute("data-ag-charts"),t.removeChild(this.element),ad.chartsInstances.delete(t)}})],ad.prototype,"container",2),x([Zr({newValue(t){this.resize(t,void 0,"width option")}})],ad.prototype,"width",2),x([Zr({newValue(t){this.resize(void 0,t,"height option")}})],ad.prototype,"height",2),x([Zr({newValue(t){this.onAutoSizeChange(t)}}),Xs($s)],ad.prototype,"autoSize",2),x([Xs(Js)],ad.prototype,"padding",2),x([Xs(Js)],ad.prototype,"seriesArea",2),x([Xs(Js)],ad.prototype,"title",2),x([Xs(Js)],ad.prototype,"subtitle",2),x([Xs(Js)],ad.prototype,"footnote",2),x([Xs(Js)],ad.prototype,"keyboard",2),x([Xs(Fa(["standalone","integrated"],"a chart mode"))],ad.prototype,"mode",2),x([Zr({changeValue(t,e){this.onAxisChange(t,e)}})],ad.prototype,"axes",2),x([Zr({changeValue(t,e){this.onSeriesChange(t,e)}})],ad.prototype,"series",2);var od=ad;function rd(t,e,i,n){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const n=e*e-4*t*i,s=[];if(0===n){const i=-e/(2*t);i>=0&&i<=1&&s.push(i)}else if(n>0){const i=Math.sqrt(n),a=(-e-i)/(2*t),o=(-e+i)/(2*t);a>=0&&a<=1&&s.push(a),o>=0&&o<=1&&s.push(o)}return s}(e,i,n);const s=e/t,a=i/t,o=(3*a-s*s)/9,r=(9*s*a-27*(n/t)-2*s*s*s)/54,l=o*o*o+r*r,h=1/3,c=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(r+t)*Math.pow(Math.abs(r+t),h),i=Math.sign(r-t)*Math.pow(Math.abs(r-t),h),n=Math.abs(Math.sqrt(3)*(e-i)/2),a=-h*s+(e+i);if(a>=0&&a<=1&&c.push(a),0===n){const t=-h*s-(e+i)/2;t>=0&&t<=1&&c.push(t)}}else{const t=Math.acos(r/Math.sqrt(-o*o*o)),e=h*s,i=2*Math.sqrt(-o),n=i*Math.cos(h*t)-e,a=i*Math.cos(h*(t+2*Math.PI))-e,l=i*Math.cos(h*(t+4*Math.PI))-e;n>=0&&n<=1&&c.push(n),a>=0&&a<=1&&c.push(a),l>=0&&l<=1&&c.push(l)}return c}function ld(t,e,i,n,s,a,o,r){const l=(i-t)*(r-a)-(n-e)*(o-s);if(0===l)return 0;const h=((o-s)*(e-a)-(t-s)*(r-a))/l,c=((i-t)*(e-a)-(n-e)*(t-s))/l;return h>=0&&h<=1&&c>=0&&c<=1?1:0}function hd(t,e,i,n,s,a,o,r,l,h,c,d){let u=0;const p=h-d,g=c-l,m=l*(d-h)-h*(c-l),f=cd(t,i,s,o),y=cd(e,n,a,r),v=rd(p*f[0]+g*y[0],p*f[1]+g*y[1],p*f[2]+g*y[2],p*f[3]+g*y[3]+m);for(const x of v){const t=x*x,e=x*t,i=f[0]*e+f[1]*t+f[2]*x+f[3],n=y[0]*e+y[1]*t+y[2]*x+y[3];let s;s=l===c?(n-h)/(d-h):(i-l)/(c-l),s>=0&&s<=1&&u++}return u}function cd(t,e,i,n){return[3*e-t-3*i+n,3*t-6*e+3*i,-3*t+3*e,t]}function dd(t,e,i,n,s,a,o,r,l,h){if(isNaN(t)||isNaN(e))return 0;a&&([s,n]=[n,s]);const c=(h-r)/(l-o),d=r-c*o,u=Math.pow(c,2)+1,p=2*(c*(d-e)-t),g=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),m=Math.pow(p,2)-4*u*g;if(m<0)return 0;const f=(-p+Math.sqrt(m))/2/u,y=(-p-Math.sqrt(m))/2/u;let v=0;return[f,y].forEach((i=>{if(!(i>=Math.min(o,l)&&i<=Math.max(o,l)))return;const a=i-t,r=c*i+d-e;_s(Math.atan2(r,a),n,s)&&v++})),v}var ud=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(t,e){this.openedPath=!0,this.path2d.moveTo(t,e),this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.openedPath?(this.path2d.lineTo(t,e),this.commands.push(1),this.params.push(t,e)):this.moveTo(t,e)}rect(t,e,i,n){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+n),this.lineTo(t,e+n),this.closePath()}roundRect(t,e,i,n,s){s=Math.min(s,i/2,n/2),this.moveTo(t,e+s),this.arc(t+s,e+s,s,Math.PI,1.5*Math.PI),this.lineTo(t+s,e),this.lineTo(t+i-s,e),this.arc(t+i-s,e+s,s,1.5*Math.PI,2*Math.PI),this.lineTo(t+i,e+s),this.lineTo(t+i,e+n-s),this.arc(t+i-s,e+n-s,s,0,Math.PI/2),this.lineTo(t+i-s,e+n),this.lineTo(t+s,e+n),this.arc(t+ +s,e+n-s,s,Math.PI/2,Math.PI),this.lineTo(t,e+n-s),this.closePath()}arc(t,e,i,n,s,a){this.openedPath=!0,this.path2d.arc(t,e,i,n,s,a),this.commands.push(2),this.params.push(t,e,i,n,s,a?1:0)}cubicCurveTo(t,e,i,n,s,a){this.openedPath||this.moveTo(t,e),this.path2d.bezierCurveTo(t,e,i,n,s,a),this.commands.push(3),this.params.push(t,e,i,n,s,a)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(t){t&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(t,e){const i=this.commands,n=this.params,s=i.length,a=-1e4,o=-1e4;let r=NaN,l=NaN,h=0,c=0,d=0;for(let u=0,p=0;u<s;u++)switch(i[u]){case 0:d+=ld(r,l,h,c,a,o,t,e),h=n[p++],r=h,c=n[p++],l=c;break;case 1:d+=ld(h,c,n[p++],n[p++],a,o,t,e),h=n[p-2],c=n[p-1];break;case 3:d+=hd(h,c,n[p++],n[p++],n[p++],n[p++],n[p++],n[p++],a,o,t,e),h=n[p-2],c=n[p-1];break;case 2:const i=n[p++],s=n[p++],u=n[p++],g=n[p++],m=n[p++];if(d+=dd(i,s,u,g,m,Boolean(n[p++]),a,o,t,e),!isNaN(r)){d+=ld(h,c,i+Math.cos(g)*u,s+Math.sin(g)*u,a,o,t,e)}h=i+Math.cos(m)*u,c=s+Math.sin(m)*u;break;case 4:d+=ld(r,l,h,c,a,o,t,e)}return d%2===1}distanceSquared(t,e){let i=1/0;const n=this.commands,s=this.params,a=n.length;let o=NaN,r=NaN,l=0,h=0;for(let c=0,d=0;c<a;c++)switch(n[c]){case 0:l=o=s[d++],h=r=s[d++];break;case 1:i=_r(t,e,l,h,s[d++],s[d++],i);break;case 3:E.error("Command.Curve distanceSquare not implemented");break;case 2:{const n=s[d++],a=s[d++],o=s[d++],r=s[d++],c=s[d++],u=n+Math.cos(r)*o,p=a+Math.sin(r)*o,g=Boolean(s[d++]);i=_r(t,e,l,h,u,p,i),i=Gr(t,e,n,a,o,r,c,g,i),l=n+Math.cos(c)*o,h=a+Math.sin(c)*o;break}case 4:i=_r(t,e,l,h,o,r,i)}return i}getPoints(){const{commands:t,params:e}=this,i=[];let n=0;for(let s=0;s<t.length;s++)switch(t[s]){case 0:case 1:i.push({x:e[n++],y:e[n++]});break;case 3:n+=4,i.push({x:e[n++],y:e[n++]});break;case 2:i.push({x:e[n++],y:e[n++]}),n+=4}return i}};function pd(t){const{redraw:e=3,changeCb:i,convertor:n}=null!=t?t:{};return ns({redraw:e,type:"path",convertor:n,changeCb:i})}var gd=class extends Io{constructor(){super(...arguments),this.path=new ud,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,n;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!=(e=null==(t=this.fillShadow)?void 0:t.isDirty())&&e||null!=(n=null==(i=this._clipPath)?void 0:i.isDirty())&&n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}distanceSquared(t,e){const i=this.transformPoint(t,e);return this.path.distanceSquared(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i,n,s;const{ctx:a,forceRender:o,stats:r}=t;if(0!==this.dirty||o){if(this.computeTransformMatrix(),this.matrix.toContext(a),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),isNaN(this._clipX)||isNaN(this._clipY)||null==this.clipMode)this.drawPath(a);else{a.save();const t=this.strokeWidth/2;if(null!=this._clipPath||(this._clipPath=new ud),this._clipPath.clear(),this._clipPath.rect(-t,-t,this._clipX+t,this._clipY+t+t),"normal"===this.clipMode&&a.clip(null==(e=this._clipPath)?void 0:e.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(a),"punch-out"===this.clipMode){a.clip(null==(i=this._clipPath)?void 0:i.getPath2D());const{x:t=-1e4,y:e=-1e4,width:s=2e4,height:o=2e4}=null!=(n=this.computeBBox())?n:{};a.clearRect(t,e,s,o)}a.restore()}null==(s=this.fillShadow)||s.markClean(),super.render(t)}else r&&(r.nodesSkipped+=this.nodeCount.count)}drawPath(t){this.fillStroke(t,this.path.getPath2D())}};gd.className="Path",x([pd()],gd.prototype,"clipMode",2),x([pd()],gd.prototype,"clipX",1),x([pd()],gd.prototype,"clipY",1);var md=class{constructor(t,e,i){this.root=new vd(t,e,i)}clear(t){this.root.clear(t)}addValue(t,e){const i={hitTester:t,value:e,distanceSquared:(e,i)=>t.distanceSquared(e,i)};this.root.addElem(i)}find(t,e){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(t,e,i),i.best}},fd=class{constructor(t,e,i,n){this.nw=t,this.ne=e,this.sw=i,this.se=n}addElem(t){this.nw.addElem(t),this.ne.addElem(t),this.sw.addElem(t),this.se.addElem(t)}find(t,e,i){this.nw.find(t,e,i),this.ne.find(t,e,i),this.sw.find(t,e,i),this.se.find(t,e,i)}},yd=class{constructor(t,e,i){this.capacity=t,this.maxdepth=e,this.boundary=null!=i?i:ts.NaN,this.elems=[],this.subdivisions=void 0}clear(t){this.elems.length=0,this.boundary=t,this.subdivisions=void 0}addElem(t){this.addCondition(t)&&(void 0===this.subdivisions?0===this.maxdepth||this.elems.length<this.capacity?this.elems.push(t):this.subdivide(t):this.subdivisions.addElem(t))}find(t,e,i){this.findCondition(t,e,i)&&(void 0===this.subdivisions?this.findAction(t,e,i):this.subdivisions.find(t,e,i))}subdivide(t){this.subdivisions=this.makeSubdivisions();for(const e of this.elems)this.subdivisions.addElem(e);this.subdivisions.addElem(t),this.elems.length=0}makeSubdivisions(){const{x:t,y:e,width:i,height:n}=this.boundary,{capacity:s}=this,a=this.maxdepth-1,o=i/2,r=n/2,l=new ts(t,e,o,r),h=new ts(t+o,e,o,r),c=new ts(t,e+r,o,r),d=new ts(t+o,e+r,o,r);return new fd(this.child(s,a,l),this.child(s,a,h),this.child(s,a,c),this.child(s,a,d))}},vd=class t extends yd{addCondition(t){const{x:e,y:i}=t.hitTester.midPoint;return this.boundary.containsPoint(e,i)}findCondition(t,e,i){const{best:n}=i;return 0!==n.distanceSquared&&this.boundary.distanceSquared(t,e)<n.distanceSquared}findAction(t,e,i){const n=Jn(t,e,this.elems,i.best.distanceSquared);void 0!==n.nearest&&n.distanceSquared<i.best.distanceSquared&&(i.best=n)}child(e,i,n){return new t(e,i,n)}},xd=class extends gd{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,{center:n}=this.constructor;return new ts(t-i*n.x,e-i*n.y,i,i)}applyPath(t,e){const{path:i}=this;let{x:n,y:s}=this;null!=this.repeat&&(n=0,s=0),i.clear();for(const{x:a,y:o,t:r}of e)n+=a*t,s+=o*t,"move"===r?i.moveTo(n,s):i.lineTo(n,s);i.closePath()}executeFill(t,e){if(!e)return;if(null==this.repeat)return super.executeFill(t,e);t.save();let i=this.translationX,n=this.translationY;for(const s of this.repeat)t.translate(s.x-i,s.y-n),t.fill(e),i=s.x,n=s.y;t.restore()}executeStroke(t,e){if(!e)return;if(null==this.repeat)return super.executeStroke(t,e);t.save();let i=this.translationX,n=this.translationY;for(const s of this.repeat)t.translate(s.x-i,s.y-n),t.stroke(e),i=s.x,n=s.y;t.restore()}};xd.center={x:.5,y:.5},x([pd()],xd.prototype,"x",2),x([pd()],xd.prototype,"y",2),x([pd({convertor:Math.abs})],xd.prototype,"size",2),x([pd()],xd.prototype,"repeat",2);var bd=class extends xd{updatePath(){const{x:t,y:e,path:i,size:n}=this,s=n/2;i.clear(),i.arc(t,e,s,0,2*Math.PI),i.closePath()}};bd.className="Circle";var Sd=class t extends xd{updatePath(){const e=this.size/4.2;super.applyPath(e,t.moves)}};Sd.className="Cross",Sd.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var kd=Sd,wd=class t extends xd{updatePath(){const e=this.size/2;super.applyPath(e,t.moves)}};wd.className="Diamond",wd.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var Md=wd,Dd=class extends xd{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:n}=this,s=i/4,a=this.y+s/2;e.clear(),e.arc(t-s,a-s,s,n(130),n(330)),e.arc(t+s,a-s,s,n(220),n(50)),e.lineTo(t,a+s),e.closePath()}};Dd.className="Heart";var Cd=class extends xd{updatePath(){const{path:t,x:e,y:i}=this,n=this.size,s=.5;t.clear(),t.moveTo(e+-.34375*n,i+-.65625*n),t.cubicCurveTo(e+-.34375*n,i+-.848509*n,e+-.192259*n,i+-1*n,e+0*n,i+-1*n),t.cubicCurveTo(e+(.692259-s)*n,i+-1*n,e+.34375*n,i+-.848509*n,e+.34375*n,i+-.65625*n),t.cubicCurveTo(e+.34375*n,i+-.506176*n,e+.284625*n,i+(.600181-1)*n,e+(.716461-s)*n,i+(.695393-1)*n),t.cubicCurveTo(e+.199009*n,i+-.280231*n,e+(.681271-s)*n,i+-.256896*n,e+(.663785-s)*n,i+(.766105-1)*n),t.cubicCurveTo(e+(.611893-s)*n,i+(.834367-1)*n,e+(.562228-s)*n,i+(.899699-1)*n,e+(.528896-s)*n,i+(.980648-1)*n),t.cubicCurveTo(e+(.524075-s)*n,i+(.992358-1)*n,e+(.512663-s)*n,i+0*n,e+0*n,i+0*n),t.cubicCurveTo(e+(.487337-s)*n,i+0*n,e+(.475925-s)*n,i+(.992358-1)*n,e+(.471104-s)*n,i+(.980648-1)*n),t.cubicCurveTo(e+(.487337-s)*n,i+0*n,e+(.475925-s)*n,i+(.992358-1)*n,e+(.471104-s)*n,i+(.980648-1)*n),t.cubicCurveTo(e+(.437772-s)*n,i+(.899699-1)*n,e+(.388107-s)*n,i+(.834367-1)*n,e+(.336215-s)*n,i+(.766105-1)*n),t.cubicCurveTo(e+(.318729-s)*n,i+-.256896*n,e+-.199009*n,i+-.280231*n,e+(.283539-s)*n,i+(.695393-1)*n),t.cubicCurveTo(e+-.284625*n,i+(.600181-1)*n,e+-.34375*n,i+-.506176*n,e+-.34375*n,i+-.65625*n),t.closePath()}};Cd.className="MapPin",Cd.center={x:.5,y:1};var Ld=class t extends xd{updatePath(){const e=this.size/3;super.applyPath(e,t.moves)}};Ld.className="Plus",Ld.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var Rd=Ld,Id=class extends xd{updatePath(){const{path:t,x:e,y:i}=this,n=this.size/2;t.clear(),t.moveTo(this.align(e-n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i-n)),t.lineTo(this.align(e+n),this.align(i+n)),t.lineTo(this.align(e-n),this.align(i+n)),t.closePath()}};Id.className="Square";var Ad=class extends xd{updatePath(){const{x:t,y:e,path:i,size:n}=this,s=n/2,a=Math.PI/2;i.clear();for(let o=0;o<10;o++){const r=o%2===0?n:s,l=o*Math.PI/5-a,h=t+Math.cos(l)*r,c=e+Math.sin(l)*r;i.lineTo(h,c)}i.closePath()}};Ad.className="Star";var Td=class t extends xd{updatePath(){const e=1.1*this.size;super.applyPath(e,t.moves)}};Td.className="Triangle",Td.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var Nd=Td,Ed={circle:bd,cross:kd,diamond:Md,heart:Dd,pin:Cd,plus:Rd,square:Id,star:Ad,triangle:Nd},Od=Object.keys(Ed);function Pd(t){return"string"===typeof t&&Od.includes(t)}function Bd(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Id;return Pd(t)?Ed[t]:"function"===typeof t?t:Id}var Fd=class extends Qc{constructor(){super(...arguments),this.showFocusBox=!0}getScaleInformation(t){let{xScale:e,yScale:i}=t;return{isContinuousX:qa.is(e),isContinuousY:qa.is(i),xScaleType:null==e?void 0:e.type,yScaleType:null==i?void 0:i.type}}getModulePropertyDefinitions(){var t,e;const i=null==(t=this.axes.x)?void 0:t.scale,n=null==(e=this.axes.y)?void 0:e.scale;return this.moduleMap.mapModules((t=>t.getPropertyDefinitions(this.getScaleInformation({xScale:i,yScale:n})))).flat()}requestDataModel(t,e,i){return S(this,null,(function*(){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:n,processedData:s}=yield t.request(this.id,null!=e?e:[],i);return this.dataModel=n,this.processedData=s,this.dispatch("data-processed",{dataModel:n,processedData:s}),{dataModel:n,processedData:s}}))}isProcessedDataAnimatable(){var t,e;const i=null==(e=null==(t=this.processedData)?void 0:t.reduced)?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:n,uniqueKeys:s}=i;return n&&s}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(t){return this.doPickFocus(t,this)}doPickFocus(t,e){const i=this.getNodeData();if(void 0===i||0===i.length)return;const{datumIndexDelta:n,seriesRect:s}=t,a=this.computeFocusDatumIndex(t,i,e.seriesItemEnabled);if(void 0===a)return;const{showFocusBox:o}=this,r=i[a],l=this.computeFocusBounds({datumIndex:a,datumIndexDelta:n,seriesRect:s});return void 0!==l?{bbox:l,showFocusBox:o,datum:r,datumIndex:a}:void 0}computeFocusDatumIndex(t,e,i){i&&e.length!==i.length&&E.error("invalid state: nodeData.length (".concat(e.length," !== seriesItemEnabled.length (").concat(null==i?void 0:i.length,")"));const n=t=>{const n=e[t];return(void 0===n.missing||!1===n.missing)&&(void 0===i||i[t])},s=t=>{for(;t>=0&&!n(t);)t--;return-1===t?void 0:t},a=t=>{for(;t<e.length&&!n(t);)t++;return t===e.length?void 0:t};let o;const r=Wn(0,t.datumIndex,e.length-1);return t.datumIndexDelta<0?o=s(r):t.datumIndexDelta>0?o=a(r):(null!=o||(o=a(r)),null!=o||(o=s(r))),void 0===o?0===t.datumIndexDelta?void 0:t.datumIndex-t.datumIndexDelta:o}},_d=class extends fe{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};x([Xs(fa,{optional:!0})],_d.prototype,"fill",2),x([Xs(aa,{optional:!0})],_d.prototype,"fillOpacity",2),x([Xs(fa,{optional:!0})],_d.prototype,"stroke",2),x([Xs(sa,{optional:!0})],_d.prototype,"strokeWidth",2),x([Xs(aa,{optional:!0})],_d.prototype,"strokeOpacity",2),x([Xs(Da,{optional:!0})],_d.prototype,"lineDash",2),x([Xs(sa,{optional:!0})],_d.prototype,"lineDashOffset",2);var Gd=class extends fe{};x([Xs(sa,{optional:!0})],Gd.prototype,"strokeWidth",2),x([Xs(aa,{optional:!0})],Gd.prototype,"dimOpacity",2),x([Xs($s,{optional:!0})],Gd.prototype,"enabled",2);var zd=class extends fe{constructor(){super(...arguments),this.color="black"}};x([Xs(fa,{optional:!0})],zd.prototype,"color",2);var Wd=class extends fe{constructor(){super(...arguments),this.item=new _d,this.series=new Gd,this.text=new zd}};x([Xs(Js)],Wd.prototype,"item",2),x([Xs(Js)],Wd.prototype,"series",2),x([Xs(Js)],Wd.prototype,"text",2);var Vd=class extends fe{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new Wd}};x([Xs(ea,{optional:!0})],Vd.prototype,"id",2),x([Xs($s)],Vd.prototype,"visible",2),x([Xs($s)],Vd.prototype,"showInLegend",2),x([Xs(ea)],Vd.prototype,"cursor",2),x([Xs(Pa)],Vd.prototype,"nodeClickRange",2),x([Xs(Js)],Vd.prototype,"highlightStyle",2);var Kd={x:["xKey"],y:["yKey"]},Yd={x:["xName"],y:["yName"]},Hd=class extends qc{constructor(t,e,i,n){super(t,e,i,n),this.xKey=n.properties.xKey,this.yKey=n.properties.yKey}},Ud=class extends Vd{};x([Xs(ea,{optional:!0})],Ud.prototype,"legendItemName",2);var Xd=class extends Fd{constructor(t){var e=t,{pathsPerSeries:i=1,hasMarkers:n=!1,hasHighlightedLabels:s=!1,pathsZIndexSubOrderOffset:a=[],datumSelectionGarbageCollection:o=!0,markerSelectionGarbageCollection:r=!0,animationAlwaysUpdateSelections:l=!1,animationResetFns:h,directionKeys:c,directionNames:d}=e,u=y(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns","directionKeys","directionNames"]);if(super(m({directionKeys:c,directionNames:d,canHaveAxes:!0},u)),this.NodeEvent=Hd,this.dataNodeGroup=this.contentGroup.appendChild(new Mo({name:"".concat(this.id,"-series-dataNodes"),zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.markerGroup=this.contentGroup.appendChild(new Mo({name:"".concat(this.id,"-series-markers"),zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelGroup=this.contentGroup.appendChild(new Mo({name:"".concat(this.id,"-series-labels"),zIndex:8,zIndexSubOrder:this.getGroupZIndexSubOrder("labels")})),this.labelSelection=Br.select(this.labelGroup,Fo),this.highlightSelection=Br.select(this.highlightNode,(()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory())),this.highlightLabelSelection=Br.select(this.highlightLabel,Fo),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=In.create(),!c||!d)throw new Error("Unable to initialise series type ".concat(this.type));this.opts={pathsPerSeries:i,hasMarkers:n,hasHighlightedLabels:s,pathsZIndexSubOrderOffset:a,directionKeys:c,directionNames:d,animationResetFns:h,animationAlwaysUpdateSelections:l,datumSelectionGarbageCollection:o,markerSelectionGarbageCollection:r},this.paths=[];for(let p=0;p<i;p++)this.paths[p]=new gd,this.paths[p].zIndex=4,this.paths[p].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",p),this.contentGroup.appendChild(this.paths[p]);this.datumSelection=Br.select(this.dataNodeGroup,(()=>this.nodeFactory()),o),this.markerSelection=Br.select(this.markerGroup,(()=>this.markerFactory()),r),this.animationState=new yr("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:t=>this.resetAllAnimation(t),reset:"empty"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}get contextNodeData(){return this._contextNodeData}getNodeData(){var t;return null==(t=this.contextNodeData)?void 0:t.nodeData}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t?this.animationState.transition("skip"):"disabled"===t&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(t=>this.onLegendItemClick(t))),this.ctx.chartEventManager.addListener("legend-item-double-click",(t=>this.onLegendItemDoubleClick(t))))}destroy(){super.destroy(),this._contextNodeData=void 0}update(t){return S(this,arguments,(function(t){var e=this;let{seriesRect:i}=t;return function*(){var t,n;const{visible:s,_contextNodeData:a}=e,o=(null==(n=null==(t=e.ctx.highlightManager)?void 0:t.getActiveHighlight())?void 0:n.series)===e,r=e.checkResize(i),l=yield e.updateHighlightSelection(o);yield e.updateSelections(s),yield e.updateNodes(l,o,s);const h=e.getAnimationData(i,a);h&&(r&&e.animationState.transition("resize",h),e.animationState.transition("update",h))}()}))}updateSelections(t){return S(this,null,(function*(){var e;const i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((t||!i)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=yield this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData&&(null!=(e=this._contextNodeData).animationValid||(e.animationValid=t)),this.minRectsCache.dirtyNodeData=!0;const{dataModel:i,processedData:n}=this;void 0!==i&&void 0!==n&&this.dispatch("data-update",{dataModel:i,processedData:n})}yield this.updateSeriesSelections()}}))}updateSeriesSelections(t){return S(this,null,(function*(){const{datumSelection:e,labelSelection:i,markerSelection:n,paths:s}=this,a=this._contextNodeData;if(!a)return;const{nodeData:o,labelData:r,itemId:l}=a;yield this.updatePaths({seriesHighlighted:t,itemId:l,contextData:a,paths:s}),this.datumSelection=yield this.updateDatumSelection({nodeData:o,datumSelection:e}),this.labelSelection=yield this.updateLabelSelection({labelData:r,labelSelection:i}),this.opts.hasMarkers&&(this.markerSelection=yield this.updateMarkerSelection({nodeData:o,markerSelection:n}))}))}markerFactory(){return new(Bd())}getGroupZIndexSubOrder(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var i;const n=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const[t]=n,s=null!=(i=this.opts.pathsZIndexSubOrderOffset[e])?i:0;n[0]=Ft(t)?()=>Number(t())+s:Number(t)+s}return n}updateNodes(t,e,i){return S(this,null,(function*(){var n;const{highlightSelection:s,highlightLabelSelection:a,opts:{hasMarkers:o,hasHighlightedLabels:r}}=this,l=!this.ctx.animationManager.isSkipped(),h=this.visible&&null!=this._contextNodeData&&i;this.rootGroup.visible=l||h,this.contentGroup.visible=l||h,this.highlightGroup.visible=(l||h)&&e;const c=this.getOpacity();o?(yield this.updateMarkerNodes({markerSelection:s,isHighlight:!0}),this.animationState.transition("highlightMarkers",s)):(yield this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("highlight",s)),r&&(yield this.updateLabelNodes({labelSelection:a}));const{dataNodeGroup:d,markerGroup:u,datumSelection:p,labelSelection:g,markerSelection:m,paths:f,labelGroup:y}=this,{itemId:v}=null!=(n=this.contextNodeData)?n:{};d.opacity=c,d.visible=l||h,y.visible=h,o&&(u.opacity=c,u.zIndex=d.zIndex>=4?d.zIndex:d.zIndex+1,u.visible=h),y&&(y.opacity=c),yield this.updatePathNodes({seriesHighlighted:e,itemId:v,paths:f,opacity:c,visible:h,animationEnabled:l}),d.visible&&(yield this.updateDatumNodes({datumSelection:p,highlightedItems:t,isHighlight:!1}),yield this.updateLabelNodes({labelSelection:g}),o&&(yield this.updateMarkerNodes({markerSelection:m,isHighlight:!1})))}))}getHighlightLabelData(t,e){const i=t.filter((t=>t.datum===e.datum&&t.itemId===e.itemId));return 0===i.length?void 0:i}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){return S(this,null,(function*(){var e;const{highlightSelection:i,highlightLabelSelection:n,_contextNodeData:s}=this;if(!s)return;const a=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight(),o=t&&(null==a?void 0:a.datum)?a:void 0;let r,l;if(null!=o){const t=this.isLabelEnabled(),{labelData:e,nodeData:i}=s;l=this.getHighlightData(i,o),r=t?this.getHighlightLabelData(e,o):void 0}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:r,highlightLabelSelection:n}),l}))}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:t}of this.datumSelection)!0!==t.datum.missing&&(yield t)}getQuadTree(){if(void 0===this.quadtree){const{width:t,height:e}=this.ctx.scene.canvas,i=new ts(0,0,t,e);this.quadtree=new md(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(t){}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:n,y:s}=t,{opts:{hasMarkers:a}}=this;let o;const{dataNodeGroup:r,markerGroup:l}=this;if(o=r.pickNode(n,s),!o&&a&&(o=null==l?void 0:l.pickNode(n,s)),o&&!0!==o.datum.missing)return{datum:o.datum,distance:0};for(const h of this.moduleMap.modules()){const{datum:i}=null!=(e=h.pickNodeExact(t))?e:{};if(null!=i&&!0!==(null==i?void 0:i.missing))return{datum:i,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:n,y:s}=t,{axes:a,rootGroup:o,_contextNodeData:r}=this;if(!r)return;const l=a.x,h=a.y,c=o.transformPoint(n,s);let d,u=1/0;for(const g of r.nodeData){const{point:{x:t=NaN,y:e=NaN}={}}=g;if(isNaN(t)||isNaN(e))continue;if(!((null==l?void 0:l.inRange(t))&&(null==h?void 0:h.inRange(e))))continue;const i=Math.max(p(c.x-t,2)+p(c.y-e,2),0);i<u&&(u=i,d=g)}for(const p of this.moduleMap.modules()){const e=p.pickNodeNearest(t);if(void 0!==e&&e.distanceSquared<u){u=e.distanceSquared,d=e.datum;break}}if(d){return{datum:d,distance:Math.max(Math.sqrt(u)-(null!=(i=null==(e=d.point)?void 0:e.size)?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,n,s,a;const{x:o,y:r}=t,{axes:l,rootGroup:h,_contextNodeData:c}=this;if(!c)return;const d=l.x,u=l.y,g=[d,u].filter((t=>t instanceof Ll)).map((t=>t.direction));if(e&&0===g.length)return;const[m="x"]=g,f=h.transformPoint(o,r),y="x"===m?[f.x,f.y]:[f.y,f.x],v=[1/0,1/0];let x;for(const p of c.nodeData){const{x:t=NaN,y:e=NaN}=null!=(n=null!=(i=p.point)?i:p.midPoint)?n:{};if(isNaN(t)||isNaN(e)||!0===p.missing)continue;if(!((null==d?void 0:d.inRange(t))&&(null==u?void 0:u.inRange(e))))continue;const s="x"===m?[t,e]:[e,t];let a=!0;for(let i=0;i<s.length;i++){const t=Math.abs(s[i]-y[i]);if(t>v[i]){a=!1;break}t<v[i]&&(v[i]=t,v.fill(1/0,i+1,v.length))}a&&(x=p)}if(x){let e=Math.max(p(v[0],2)+p(v[1],2)-(null!=(a=null==(s=x.point)?void 0:s.size)?a:0),0);for(const i of this.moduleMap.modules()){const n=i.pickNodeMainAxisFirst(t);if(void 0!==n&&n.distanceSquared<e){x=n.datum,e=n.distanceSquared;break}}return{datum:x,distance:Math.sqrt(e)}}}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:n,series:s}=t,a=null!=e&&e===t.legendItemName;(s.id===this.id||a)&&this.toggleSeriesItem(n,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:n,numVisibleItems:s}=t,{legendItemName:a}=this.properties,o=null!=a&&a===t.legendItemName;n.id===this.id||o||e&&1===s?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRects(t,e){const{dirtyNodeData:i,sizeCache:n,minRect:s,minVisibleRect:a}=this.minRectsCache,o=JSON.stringify({width:t,height:e});if(!(o!==n)&&!i&&s&&a)return{minRect:s,minVisibleRect:a};const r=this.computeMinRects(t,e);return this.minRectsCache={dirtyNodeData:!1,sizeCache:o,minRect:null==r?void 0:r.minRect,minVisibleRect:null==r?void 0:r.minVisibleRect},r}computeMinRects(t,e){var i,n;const s=this._contextNodeData;if(!(null==s?void 0:s.nodeData.length))return;const{nodeData:a}=s,o=Array(a.length),r=Array(a.length);for(const[v,{midPoint:x}]of a.entries())o[v]=null!=(i=null==x?void 0:x.x)?i:0,r[v]=null!=(n=null==x?void 0:x.y)?n:0;let l,h,c,d;o.sort(((t,e)=>t-e)),r.sort(((t,e)=>t-e));let u=0,p=0;for(let v=1;v<a.length;v++)o[v]>=0&&(null!=l||(l=v)),o[v]>t&&(null!=h||(h=v)),r[v]>=0&&(null!=c||(c=v)),r[v]>e&&(null!=d||(d=v)),u=Math.max(u,o[v]-o[v-1]),p=Math.max(p,r[v]-r[v-1]);null!=h||(h=a.length),null!=d||(d=a.length);const g=null!=l&&null!=h?o.slice(l,h):[],m=null!=c&&null!=d?r.slice(c,d):[];let f=0,y=0;for(let v=1;v<Math.max(g.length,m.length);v++){const t=g[v],e=g[v-1],i=m[v],n=m[v-1];null!=t&&null!=e&&(f=Math.max(f,t-e)),null!=i&&null!=n&&(y=Math.max(y,i-n))}return{minRect:new ts(0,0,u,p),minVisibleRect:new ts(0,0,f,y)}}updateHighlightSelectionItem(t){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:n}=t,s=null!=i?i:[];if(e){const t=n;return this.updateMarkerSelection({nodeData:s,markerSelection:t})}return this.updateDatumSelection({nodeData:s,datumSelection:n})}updateHighlightSelectionLabel(t){var e;return this.updateLabelSelection({labelData:null!=(e=t.items)?e:[],labelSelection:t.highlightLabelSelection})}updateDatumSelection(t){return S(this,null,(function*(){return t.datumSelection}))}updateDatumNodes(t){return S(this,null,(function*(){}))}updateMarkerSelection(t){return S(this,null,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return S(this,null,(function*(){}))}updatePaths(t){return S(this,null,(function*(){t.paths.forEach((t=>t.visible=!1))}))}updatePathNodes(t){return S(this,null,(function*(){const{paths:e,opacity:i,visible:n}=t;for(const t of e)t.opacity=i,t.visible=n}))}resetAllAnimation(t){var e,i,n;const{path:s,datum:a,label:o,marker:r}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),s&&t.paths.forEach((t=>{fr([t],s)})),a&&fr([t.datumSelection],a),o&&fr([t.labelSelection],o),r&&this.opts.hasMarkers&&fr([t.markerSelection],r),!1===(null==(n=t.contextData)?void 0:n.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:n}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};n&&fr([t],n)}animateReadyHighlightMarkers(t){var e,i;const{marker:n}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};n&&fr([t],n)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){const t=this.getAnimationData();t&&this.animationState.transition("clear",t)}getAnimationData(t,e){const{_contextNodeData:i}=this;if(!i)return;return{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:e,paths:this.paths,seriesRect:t}}calculateScaling(){const t={};for(const e of Object.values(Ua)){const i=this.axes[e];if(i)if(i.scale instanceof Pr){const{range:n,domain:s}=i.scale;t[e]={type:"log",convert:t=>i.scale.convert(t),domain:[s[0],s[1]],range:[n[0],n[1]]}}else if(i.scale instanceof qa){const{range:n}=i.scale,s=i.scale.getDomain();t[e]={type:"continuous",domain:[s[0],s[1]],range:[n[0],n[1]]}}else if(i.scale){const{domain:n}=i.scale;t[e]={type:"category",domain:n,range:n.map((t=>i.scale.convert(t)))}}}return t}},jd=["top","right","bottom","left"],Zd=class t extends od{constructor(t,e){super(t,e),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastClipSeries=!1,this._lastVisibility={crossLines:!0,series:!0}}onAxisChange(t,e){super.onAxisChange(t,e),this.zoomManager.updateAxes(t)}destroySeries(t){super.destroySeries(t),this.firstSeriesTranslation=!0}performLayout(){return S(this,null,(function*(){const e=yield b(t.prototype,this,"performLayout").call(this),{firstSeriesTranslation:i,seriesRoot:n,annotationRoot:s,highlightRoot:a}=this,{animationRect:o,seriesRect:r,visibility:l,clipSeries:h}=this.updateAxes(e);this.seriesRoot.visible=l.series,this.seriesRect=r,this.animationRect=o;const{x:c,y:d}=r;if(i){for(const t of[n,s,a])t.translationX=Math.floor(c),t.translationY=Math.floor(d);this.firstSeriesTranslation=!1}else{const{translationX:t,translationY:e}=n;Ns(this.id,"seriesRect",this.ctx.animationManager,[n,a,s],{translationX:t,translationY:e},{translationX:Math.floor(c),translationY:Math.floor(d)},{phase:"update"})}const u=r.clone().grow(this.seriesArea.padding);this.hoverRect=u;const p=this.seriesArea.clip||h?u:void 0;n.setClipRectInGroupCoordinateSpace(p),a.setClipRectInGroupCoordinateSpace(p),s.setClipRectInGroupCoordinateSpace(p),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:h,series:{rect:r,paddedRect:u,visible:l.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map((t=>m({id:t.id},t.getLayoutState())))});const g=this.modulesManager.mapModules((t=>{var e;return null==(e=t.performCartesianLayout)?void 0:e.call(t,{seriesRect:r})}));return yield Promise.all(g),e}))}updateAxes(t){var e;const i=this.axes.flatMap((t=>{var e;return null!=(e=t.crossLines)?e:[]})).map((t=>t.id));let n,s,a;null!=this._lastCrossLineIds&&this._lastCrossLineIds.length===i.length&&this._lastCrossLineIds.every(((t,e)=>i[e]===t))?(n=m({},this._lastAxisWidths),s=this._lastClipSeries,a=m({},this._lastVisibility)):(n={top:0,bottom:0,left:0,right:0},s=!1,a={crossLines:!0,series:!0},this._lastCrossLineIds=i);const o=new Set(this.axes.map((t=>t.position)));for(const g of Object.keys(n))o.has(g)||delete n[g];const r=(t,e,i)=>!Object.keys(t).some((t=>null==n[t]))&&(a.crossLines===i.crossLines&&a.series===i.series&&Object.entries(n).every((e=>{let[i,n]=e;const s=t[i];return null==n&&null==s||n===s}))&&s===e);let l={},h={},c=!1,d=null==(e=this.seriesRect)?void 0:e.clone(),u=0,p={};do{Object.assign(n,l),s=c,Object.assign(a,h);const e=this.updateAxesPass(n,t.clone(),d);if(l=Jt(e.axisWidths,(t=>t&&Math.abs(t)===1/0?0:null!=t?Math.ceil(t):t)),h=e.visibility,c=e.clipSeries,d=e.seriesRect,p=e.primaryTickCounts,u++>10){E.warn("unable to find stable axis layout.");break}}while(!r(l,c,h));this.axes.forEach((t=>{t.update(p[t.direction])}));return this.axes.forEach((e=>{if(e.setCrossLinesVisible(a.crossLines),d)switch(e.clipGrid(d.x,d.y,d.width+5,d.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,d.y,t.width+5,d.height+5);break;case"top":case"bottom":e.clipTickLines(d.x,t.y,d.width+5,t.height+5)}})),this._lastAxisWidths=n,this._lastVisibility=a,{seriesRect:d,animationRect:t,visibility:a,clipSeries:s}}updateAxesPass(t,e,i){const n={},s={},a={series:!0,crossLines:!0};let o=!1;const r={},l=this.applySeriesPadding(e),h=i?this.buildCrossLinePadding(t):{},c=this.buildAxisBound(l,t,h,a),d=this.buildSeriesRect(c,t);return this.axes.forEach((e=>{var i,a;const{position:h="left"}=e,{clipSeries:u,axisThickness:p,axisOffset:g}=this.calculateAxisDimensions({axis:e,seriesRect:d,paddedBounds:l,axisWidths:t,newAxisWidths:s,primaryTickCounts:r,clipSeries:o,addInterAxisPadding:(null!=(i=n[h])?i:0)>0});n[h]=(null!=(a=n[h])?a:0)+1,o=o||u,this.positionAxis({axis:e,axisBound:c,axisOffset:g,axisThickness:p,axisWidths:t,primaryTickCounts:r,seriesRect:d})})),{clipSeries:o,seriesRect:d,axisWidths:s,visibility:a,primaryTickCounts:r}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach((t=>{t.crossLines&&t.crossLines.forEach((t=>{var e;null==(e=t.calculatePadding)||e.call(t,i)}))}));for(const[n,s=0]of Object.entries(i))i[n]=Math.max(s-(null!=(e=t[n])?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return jd.forEach((t=>{const n=this.seriesArea.padding[t],s=i.find((e=>e.position===t));s?s.seriesAreaPadding=n:e.shrink(n,t)})),e}buildAxisBound(t,e,i,n){var s,a,o,r;const l=t.clone(),{top:h=0,right:c=0,bottom:d=0,left:u=0}=i,p=u+c,g=h+d,m=(null!=(s=e.left)?s:0)+(null!=(a=e.right)?a:0)+p,f=(null!=(o=e.top)?o:0)+(null!=(r=e.bottom)?r:0)+g;return l.width<=m||l.height<=f?(n.crossLines=!1,n.series=!1,l):(l.x+=u,l.y+=h,l.width-=p,l.height-=g,l)}buildSeriesRect(t,e){const i=t.clone(),{top:n,bottom:s,left:a,right:o}=e;return i.x+=null!=a?a:0,i.y+=null!=n?n:0,i.width-=(null!=a?a:0)+(null!=o?o:0),i.height-=(null!=n?n:0)+(null!=s?s:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,n){const{x:s,y:a,width:o,height:r}=t,l=[s,a,s+o,a+r][("x"===i?0:1)+(1===n?0:2)];return(1===n?Math.min:Math.max)(e,l)}calculateAxisDimensions(t){var e,i,n;const{axis:s,seriesRect:a,paddedBounds:o,axisWidths:r,newAxisWidths:l,primaryTickCounts:h,addInterAxisPadding:c}=t;let{clipSeries:d}=t;const{position:u="left",direction:p}=s,g=s instanceof Ll||s instanceof Gl,m="left"===u||"right"===u,f=null!=(e=l[u])?e:0,{min:y,max:v}=this.ctx.zoomManager.getAxisZoom(s.id);m?(g?(s.range=[0,a.height],s.visibleRange=[1-v,1-y]):(s.range=[a.height,0],s.visibleRange=[y,v]),s.gridLength=a.width):(s.range=[0,a.width],s.visibleRange=[y,v],s.gridLength=a.height);let x=s.nice?h[p]:void 0;const b="y"===p;s.thickness?s.maxThickness=s.thickness:s.maxThickness=.3*(b?o.width:o.height);const S=s.calculateLayout(x);let k;if(x=S.primaryTickCount,null!=h[p]||(h[p]=x),d||(d=s.dataDomain.clipped||s.visibleRange[0]>0||s.visibleRange[1]<1),null!=s.thickness&&s.thickness>0)k=s.thickness;else{const{bbox:t}=S;k=b?t.width:t.height}return c&&(k+=15),k=Math.ceil(k),l[u]=(null!=(i=l[u])?i:0)+k,s.gridPadding=(null!=(n=r[u])?n:0)-l[u],{clipSeries:d,axisThickness:k,axisOffset:f,primaryTickCount:x}}positionAxis(t){var e,i,n,s;const{axis:a,axisBound:o,axisWidths:r,seriesRect:l,axisOffset:h,axisThickness:c}=t,{position:d}=a;switch(d){case"top":a.translation.x=o.x+(null!=(e=r.left)?e:0),a.translation.y=this.clampToOutsideSeriesRect(l,o.y+1+h+c,"y",1);break;case"bottom":a.translation.x=o.x+(null!=(i=r.left)?i:0),a.translation.y=this.clampToOutsideSeriesRect(l,o.y+o.height+1-c-h,"y",-1);break;case"left":a.translation.y=o.y+(null!=(n=r.top)?n:0),a.translation.x=this.clampToOutsideSeriesRect(l,o.x+h+c,"x",1);break;case"right":a.translation.y=o.y+(null!=(s=r.top)?s:0),a.translation.x=this.clampToOutsideSeriesRect(l,o.x+o.width-c-h,"x",-1)}a.updatePosition({rotation:Gs(a.rotation),sideFlag:a.label.getSideFlag()})}shouldFlipXY(){return!this.series.some((t=>!(t instanceof Xd&&t.shouldFlipXY())))}};Zd.className="CartesianChart",Zd.type="cartesian";var qd=Zd,Jd=class t{static isInstance(e){var i;return e instanceof t||("AgChartInstanceProxy"===(null==(i=e.constructor)?void 0:i.name)&&null!=e.chart||null!=e.chart&&this.validateImplementation(e))}static validateImplementation(t){var e;const i=Object.keys(null!=(e=Object.getPrototypeOf(t))?e:{});return["getOptions","destroy"].every((t=>i.includes(t)))}constructor(t){this.chart=t}getOptions(){return Se(this.chart.getOptions())}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}};Jd.chartInstances=new WeakMap,x([Zr({oldValue(t){Jd.chartInstances.delete(t)},newValue(t){Jd.chartInstances.set(t,this)}})],Jd.prototype,"chart",2);var Qd=Jd,$d=class extends qa{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(t){return t}ticks(){var t;const e=null!=(t=this.tickCount)?t:qa.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some((t=>!isFinite(t))))return[];this.refresh();const[i,n]=this.getDomain(),{interval:s}=this;if(s){const t=Math.abs(s);if(!mo({start:i,stop:n,interval:t,availableRange:this.getPixelRange()}))return go(i,n,t)}return co(i,n,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,n;const s=null!=(i=this.tickCount)?i:qa.defaultTickCount;return null!=(n=this.interval)?n:po(t,e,s,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!=(t=this.tickCount)?t:qa.defaultTickCount;if(e<1)return void(this.niceDomain=[...this.domain]);let[i,n]=this.domain;if(1===e)[i,n]=function(t,e){const i=Math.abs(e-t),n=Math.floor(Math.log10(i)),s=Math.pow(10,n),a=t>e?Math.ceil:Math.floor,o=e<t?Math.floor:Math.ceil;return uo.map((n=>{const r=n*s,l=a(t/r)*r,h=o(e/r)*r;return{error:1-i/Math.abs(h-l),domain:[l,h]}})).sort(((t,e)=>t.error-e.error))[0].domain}(i,n);else{const t=i>n?Math.ceil:Math.floor,e=n<i?Math.floor:Math.ceil,s=4;for(let a=0;a<s;a++){const s=i,a=n,o=this.getTickStep(i,n),[r,l]=this.domain;if(o>=1)i=t(r/o)*o,n=e(l/o)*o;else{const s=1/o;i=t(r*s)/s,n=e(l*s)/s}if(i===s&&n===a)break}}this.niceDomain=[i,n]}tickFormat(t){let{ticks:e,specifier:i}=t;return Er(null!=e?e:this.ticks(),i)}};function tu(t,e,i){let[n,s]=Kn(t);n=function(t,e,i){const n=Math.abs(e-t)/(i-1),s=Math.floor(Math.log10(n)),a=Math.pow(10,s);return Math.floor(t/a)*a}(Math.floor(n),s,e);const a=function(t,e,i){const n=i-1,s=(e-t)/n;return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),n=t/i*10;if(n>0&&n<=1)return i/10;if(n>1&&n<=2)return 2*i/10;if(n>1&&n<=5)return 5*i/10;if(n>5&&n<=10)return 10*i/10;if(n>10&&n<=20)return 20*i/10;if(n>20&&n<=40)return 40*i/10;if(n>40&&n<=50)return 50*i/10;if(n>50&&n<=100)return 100*i/10;return n}(s)}(n,s,e);s=n+(e-1)*a;const o=i?[s,n]:[n,s],r=function(t,e,i){const n=Math.floor(Math.log10(e)),s=e>0&&e<1?Math.abs(n):0,a=Math.pow(10,s),o=ho(s);for(let r=0;r<i;r++){const i=t+e*r;o[r]=Math.round(i*a)/a}return o}(n,a,e);return[o,r]}var eu=class extends Ha{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};x([Xs(_a),Us(NaN)],eu.prototype,"minSpacing",2),x([Xs(Ga),Us(NaN)],eu.prototype,"maxSpacing",2);var iu=class extends Dl{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new $d),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:s}=cn(t,e,i);return{domain:n,clipped:s}}createTick(){return new eu}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=tu(this.dataDomain.domain,null!=t?t:0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}formatDatum(t){return"number"===typeof t?t.toFixed(2):String(t)}};iu.className="NumberAxis",iu.type="number",x([Xs(Zs(ra,da("max"))),Us(NaN)],iu.prototype,"min",2),x([Xs(Zs(ra,ua("min"))),Us(NaN)],iu.prototype,"max",2);var nu=za((t=>Vt(t)&&0!==t),"a non-zero number"),su=class extends iu{constructor(t){super(t,new Pr),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:n,clipped:s}=cn(t,e,i),a=n[0]>n[1],o=n[0]<0&&n[1]>0,r=0===n[0]&&0===n[1];return(a||o||r)&&(o?E.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):r&&E.warn("the data domain has 0 extent, no data is rendered.")),0===n[0]&&(n[0]=1),0===n[1]&&(n[1]=-1),{domain:n,clipped:s}}set base(t){this.scale.base=t}get base(){return this.scale.base}};su.className="LogAxis",su.type="log",x([Xs(Zs(ra,nu,da("max"))),Us(NaN)],su.prototype,"min",2),x([Xs(Zs(ra,nu,ua("min"))),Us(NaN)],su.prototype,"max",2);var au=class extends Ha{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};x([Xs(_a),Us(NaN)],au.prototype,"minSpacing",2),x([Xs(Ga),Us(NaN)],au.prototype,"maxSpacing",2);var ou=class extends Dl{constructor(t){super(t,new yo),this.min=void 0,this.max=void 0,this.refreshScale()}normaliseDataDomain(t){var e;let{min:i,max:n}=this,s=!1;return"number"===typeof i&&(i=new Date(i)),"number"===typeof n&&(n=new Date(n)),t.length>2&&(t=(null!=(e=ln(t))?e:[0,1e3]).map((t=>new Date(t)))),i instanceof Date&&(s||(s=i>t[0]),t=[i,t[1]]),n instanceof Date&&(s||(s=n<t[1]),t=[t[0],n]),t[0]>t[1]&&(t=[]),{domain:t,clipped:s}}createTick(){return new au}onLabelFormatChange(t,e,i){i?super.onLabelFormatChange(t,e,i):this.labelFormatter=this.scale.tickFormat({ticks:t,domain:e})}calculatePadding(){return[0,0]}formatDatum(t){var e;const i=this.scale.tickFormat({specifier:"%m/%d/%y, %H:%M:%S"});return null!=(e=this.moduleCtx.callbackCache.call(i,t))?e:String(t)}};ou.className="TimeAxis",ou.type="time",x([Xs(Zs(ga,da("max")),{optional:!0})],ou.prototype,"min",2),x([Xs(Zs(ga,ua("min")),{optional:!0})],ou.prototype,"max",2);var ru=1e-6,lu=(t,e,i,n,s)=>{let a=!1,o=!1,r=n-Math.sqrt(Math.max(p(s,2)-p(i,2),0)),l=0,h=0,c=i-Math.sqrt(Math.max(p(s,2)-p(n,2),0));return r>t?(a=!0,r=t,l=i-Math.sqrt(Math.max(p(s,2)-p(n-t,2)))):r<ru&&(r=0),c>e?(o=!0,h=n-Math.sqrt(Math.max(p(s,2)-p(i-e,2))),c=e):c<ru&&(c=0),{leading0:r,leading1:l,trailing0:h,trailing1:c,leadingClipped:a,trailingClipped:o}},hu=(t,e,i,n)=>{let{x0:s,y0:a,x1:o,y1:r,cx:l,cy:h}=e;if(n&&t.moveTo(s,a),s!==o||a!==r){const e=Math.atan2(a-h,s-l),n=Math.atan2(r-h,o-l);t.arc(l,h,i,e,n)}else t.lineTo(s,a)},cu=(t,e,i,n,s,a,o)=>{let{topLeft:r,topRight:l,bottomRight:h,bottomLeft:c}=a;const d=Math.max(r+c,l+h),u=Math.max(r+l,c+h);if(d<=0&&u<=0)return void(null==o?t.rect(e,i,n,s):t.rect(o.x,o.y,o.width,o.height));if(null==o&&r===l&&r===h&&r===c)return void t.roundRect(e,i,n,s,r);if(n<0&&(e+=n,n=Math.abs(n)),s<0&&(i+=s,s=Math.abs(s)),n<=0||s<=0)return;if(null==o)o=new ts(e,i,n,s);else{const t=Math.max(e,o.x),a=Math.min(e+n,o.x+o.width),r=Math.max(i,o.y),l=Math.min(i+s,o.y+o.height);o=new ts(t,r,a-t,l-r)}const p=Math.max(d/s,u/n,1);p>1&&(r/=p,l/=p,h/=p,c/=p);let g,m,f,y,v=!0,x=!0,b=!0,S=!0;if(v){const t=lu(o.height,o.width,Math.max(e+r-o.x,0),Math.max(i+r-o.y,0),r);t.leadingClipped&&(S=!1),t.trailingClipped&&(x=!1);g={x0:Math.max(o.x+t.leading1,o.x),y0:Math.max(o.y+t.leading0,o.y),x1:Math.max(o.x+t.trailing1,o.x),y1:Math.max(o.y+t.trailing0,o.y),cx:e+r,cy:i+r}}if(x){const t=lu(o.width,o.height,Math.max(i+l-o.y,0),Math.max(o.x+o.width-(e+n-l),0),l);t.leadingClipped&&(v=!1),t.trailingClipped&&(b=!1);m={x0:Math.min(o.x+o.width-t.leading0,o.x+o.width),y0:Math.max(o.y+t.leading1,o.y),x1:Math.min(o.x+o.width-t.trailing0,o.x+o.width),y1:Math.max(o.y+t.trailing1,o.y),cx:e+n-l,cy:i+l}}if(b){const t=lu(o.height,o.width,Math.max(o.x+o.width-(e+n-h),0),Math.max(o.y+o.height-(i+s-h),0),h);t.leadingClipped&&(x=!1),t.trailingClipped&&(S=!1);f={x0:Math.min(o.x+o.width-t.leading1,o.x+o.width),y0:Math.min(o.y+o.height-t.leading0,o.y+o.height),x1:Math.min(o.x+o.width-t.trailing1,o.x+o.width),y1:Math.min(o.y+o.height-t.trailing0,o.y+o.height),cx:e+n-h,cy:i+s-h}}if(S){const t=lu(o.width,o.height,Math.max(o.y+o.height-(i+s-c),0),Math.max(e+c-o.x,0),c);t.leadingClipped&&(b=!1),t.trailingClipped&&(v=!1);y={x0:Math.max(o.x+t.leading0,o.x),y0:Math.min(o.y+o.height-t.leading1,o.y+o.height),x1:Math.max(o.x+t.trailing0,o.x),y1:Math.min(o.y+o.height-t.trailing1,o.y+o.height),cx:e+c,cy:i+s-c}}let k=!1;v&&null!=g&&(hu(t,g,r,!k),k||(k=!0)),x&&null!=m&&(hu(t,m,l,!k),k||(k=!0)),b&&null!=f&&(hu(t,f,h,!k),k||(k=!0)),S&&null!=y&&(hu(t,y,c,!k),k||(k=!0)),t.closePath()},du=class extends gd{constructor(){super(...arguments),this.borderPath=new ud,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Io.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Io.defaultStyles.strokeWidth,this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquared,this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||Boolean(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var t,e,i;const{path:n,borderPath:s,crisp:a,topLeftCornerRadius:o,topRightCornerRadius:r,bottomRightCornerRadius:l,bottomLeftCornerRadius:h}=this;let{x:c,y:d,width:u,height:p,strokeWidth:g,clipBBox:m}=this;const f=1/(null!=(e=null==(t=this.layerManager)?void 0:t.canvas.pixelRatio)?e:1);let y=1;if(n.clear(!0),s.clear(!0),a&&(u<=f&&(y*=u/f),p<=f&&(y*=p/f),u=this.align(c,u),p=this.align(d,p),c=this.align(c),d=this.align(d),m=null!=m?new ts(this.align(m.x),this.align(m.y),this.align(m.x,m.width),this.align(m.y,m.height)):void 0),g)if(u<f){const t=c+f/2;s.moveTo(t,d),s.lineTo(t,d+p),g=f,this.borderClipPath=void 0}else if(p<f){const t=d+f/2;s.moveTo(c,t),s.lineTo(c+u,t),g=f,this.borderClipPath=void 0}else if(g<u&&g<p){const t=g/2;c+=t,d+=t,u-=g,p-=g;const e=null==m?void 0:m.clone().shrink(t),i={topLeft:o>0?o-g:0,topRight:r>0?r-g:0,bottomRight:l>0?l-g:0,bottomLeft:h>0?h-g:0};this.borderClipPath=void 0,u>0&&p>0&&(null==e||(null==e?void 0:e.width)>0&&(null==e?void 0:e.height)>0)&&(cu(n,c,d,u,p,i,e),cu(s,c,d,u,p,i,e))}else this.borderClipPath=null!=(i=this.borderClipPath)?i:new ud,this.borderClipPath.clear(!0),this.borderClipPath.rect(c,d,u,p),s.rect(c,d,u,p);else{const t={topLeft:o,topRight:r,bottomRight:l,bottomLeft:h};this.borderClipPath=void 0,cu(n,c,d,u,p,t,m)}[o,r,l,h].every((t=>0===t))?(this.hittester=(t,e)=>{const i=this.transformPoint(t,e);return this.getCachedBBox().containsPoint(i.x,i.y)},this.distanceSquared=(t,e)=>this.getCachedBBox().distanceSquared(t,e)):(this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquared),this.effectiveStrokeWidth=g,this.lastUpdatePathStrokeWidth=g,this.microPixelEffectOpacity=y}computeBBox(){var t;const{x:e,y:i,width:n,height:s,clipBBox:a}=this;return null!=(t=null==a?void 0:a.clone())?t:new ts(e,i,n,s)}isPointInPath(t,e){return this.hittester(t,e)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(t,e){return this.distanceCalculator(t,e)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:n}=this;t.globalAlpha*=n*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i}=this;if(e&&i){const{globalAlpha:n}=t,{strokeOpacity:s,lineDash:a,lineDashOffset:o,lineCap:r,lineJoin:l,borderPath:h,borderClipPath:c,opacity:d,microPixelEffectOpacity:u}=this;c&&t.clip(c.getPath2D()),t.strokeStyle=e,t.globalAlpha*=d*s*u,t.lineWidth=i,a&&t.setLineDash(a),o&&(t.lineDashOffset=o),r&&(t.lineCap=r),l&&(t.lineJoin=l),t.stroke(h.getPath2D()),t.globalAlpha=n}}};du.className="Rect",x([pd()],du.prototype,"x",2),x([pd()],du.prototype,"y",2),x([pd()],du.prototype,"width",2),x([pd()],du.prototype,"height",2),x([pd()],du.prototype,"topLeftCornerRadius",2),x([pd()],du.prototype,"topRightCornerRadius",2),x([pd()],du.prototype,"bottomRightCornerRadius",2),x([pd()],du.prototype,"bottomLeftCornerRadius",2),x([pd()],du.prototype,"clipBBox",2),x([pd()],du.prototype,"crisp",2);var uu=class extends St{constructor(t){super(),this.node=new Mo({name:"background",zIndex:0}),this.rectNode=new du,this.visible=!0,this.fill="white",this.node.appendChild(this.rectNode),this.destroyFns.push(t.scene.attachNode(this.node),t.layoutService.addListener("layout-complete",(t=>this.onLayoutComplete(t))))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}};x([Xs($s),jr("node","visible")],uu.prototype,"visible",2),x([Xs(fa,{optional:!0}),jr("rectNode","fill")],uu.prototype,"fill",2),x([Xs(Js,{optional:!0})],uu.prototype,"image",2);var pu={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:uu};function gu(t){let{orientation:e,bboxes:i,maxHeight:n,maxWidth:s,itemPaddingY:a=0,itemPaddingX:o=0,forceResult:r=!1}=t;const l="horizontal"===e,h={max:l?s:n,fn:l?t=>t.width:t=>t.height,padding:l?o:a},c={max:l?n:s,fn:l?t=>t.height:t=>t.width,padding:l?a:o};let d=0;const u=[];for(;d<i.length;){const t=mu(i.slice(d),d,h,c,r);if(!t)return;d+=t.processedBBoxCount,u.push(t.pageIndices)}return function(t,e,i,n,s){let a=0,o=0;const r=t.map((t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach(((t,i)=>{t.forEach(((t,n)=>{e[n][i]=t}))})),e}(t));let r=0;const l=t.map((t=>{const e=t.map((t=>(r=Math.max(t,r),i[t])));let a=0,o=0;return e.forEach((t=>{a+=t.height+n,o=Math.max(o,t.width+s)})),{indices:t,bboxes:e,columnHeight:Math.ceil(a),columnWidth:Math.ceil(o)}}));let h=0,c=0;return l.forEach((t=>{h+=t.columnWidth,c=Math.max(c,t.columnHeight)})),a=Math.max(h,a),o=Math.max(c,o),{columns:l,startIndex:t[0][0],endIndex:r,pageWidth:h,pageHeight:c}}));return{pages:r,maxPageWidth:a,maxPageHeight:o}}(u,e,i,a,o)}function mu(t,e,i,n,s){let a=function(t,e){const i=t.length;let n=0;for(let s=0;s<i;s++)if(n+=e.fn(t[s])+e.padding,n>e.max){return i/s<2?Math.ceil(i/2):s}return i}(t,i);if(a<1){if(!s)return;a=1}let o=a;for(;o>=1;){const a=fu(t,e,o,i,n,s);if(null==a&&o<=1)return;if(null==a){o--;continue}if("number"===typeof a){if(a<=1)return;o=a<o&&a>1?a:o,o--;continue}return{processedBBoxCount:a.length*a[0].length,pageIndices:a}}}function fu(t,e,i,n,s,a){var o;const r=[];let l=0,h=0,c=[];const d=[];for(let u=0;u<t.length;u++){const p=(u+i)%i;0===p&&(l+=h,h=0,c.length>0&&r.push(c),c=[]);const g=n.fn(t[u])+n.padding;d[p]=Math.max(null!=(o=d[p])?o:0,g),h=Math.max(h,s.fn(t[u])+s.padding);const m=l+h,f=!a||r.length>0;if(m>s.max&&f){c=[];break}if(d.reduce(((t,e)=>t+e),0)>n.max&&!a)return d.length<i?d.length:void 0;c.push(u+e)}return c.length>0&&r.push(c),r.length>0?r:void 0}var yu=class extends Mo{constructor(){super({name:"markerLabelGroup"}),this.label=new Fo,this.line=new zr,this._marker=new Id,this._markerSize=15,this._spacing=8;const{marker:t,label:e,line:i}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1,this.append([i,t,e]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}setSeriesStrokeOffset(t){const e=this.marker.size/2+t;this.line.x1=-e,this.line.x2=e,this.line.y1=0,this.line.y2=0,this.line.markDirtyTransform(),this.update()}update(){const{markerSize:t}=this,e=this.marker.constructor.center;this.marker.size=t,this.marker.x=(e.x-.5)*t,this.marker.y=(e.y-.5)*t;const i=this.line.visible?this.line.x2:-1/0,n=t/2;this.label.x=Math.max(i,n)+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,this.line.opacity=this.opacity,super.render(t)}};yu.className="MarkerLabel",x([jr("label")],yu.prototype,"text",2),x([jr("label")],yu.prototype,"fontStyle",2),x([jr("label")],yu.prototype,"fontWeight",2),x([jr("label")],yu.prototype,"fontSize",2),x([jr("label")],yu.prototype,"fontFamily",2),x([jr("label","fill")],yu.prototype,"color",2),x([jr("marker","fill")],yu.prototype,"markerFill",2),x([jr("marker","stroke")],yu.prototype,"markerStroke",2),x([jr("marker","strokeWidth")],yu.prototype,"markerStrokeWidth",2),x([jr("marker","fillOpacity")],yu.prototype,"markerFillOpacity",2),x([jr("marker","strokeOpacity")],yu.prototype,"markerStrokeOpacity",2),x([jr("marker","visible")],yu.prototype,"markerVisible",2),x([jr("line","stroke")],yu.prototype,"lineStroke",2),x([jr("line","strokeWidth")],yu.prototype,"lineStrokeWidth",2),x([jr("line","strokeOpacity")],yu.prototype,"lineStrokeOpacity",2),x([jr("line","lineDash")],yu.prototype,"lineLineDash",2),x([jr("line","visible")],yu.prototype,"lineVisible",2);var vu=class extends fe{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};x([Xs(fa)],vu.prototype,"color",2),x([Xs(La,{optional:!0})],vu.prototype,"fontStyle",2),x([Xs(Ra,{optional:!0})],vu.prototype,"fontWeight",2),x([Xs(sa)],vu.prototype,"fontSize",2),x([Xs(ea)],vu.prototype,"fontFamily",2);var xu=class extends fe{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};x([Xs(sa)],xu.prototype,"size",2),x([Xs(fa,{optional:!0})],xu.prototype,"fill",2),x([Xs(aa,{optional:!0})],xu.prototype,"fillOpacity",2),x([Xs(fa,{optional:!0})],xu.prototype,"stroke",2),x([Xs(sa)],xu.prototype,"strokeWidth",2),x([Xs(aa)],xu.prototype,"strokeOpacity",2);var bu=class extends fe{constructor(t){super(),this.parent=t,this.shape=Nd,this.size=15,this.padding=8}};x([Zr({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],bu.prototype,"shape",2),x([Xs(sa)],bu.prototype,"size",2),x([Xs(sa)],bu.prototype,"padding",2);var Su=class extends fe{constructor(t,e,i,n){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.regionManager=i,this.cursorManager=n,this.id=_n(this),this.marker=new bu(this),this.activeStyle=new xu,this.inactiveStyle=new xu,this.highlightStyle=new xu,this.label=new vu,this.group=new Mo({name:"pagination"}),this.labelNode=new Fo,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new Nd,this._previousButton=new Nd,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);const s=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(s.addListener("click",(t=>this.onPaginationClick(t))),s.addListener("hover",(t=>this.onPaginationMouseMove(t)))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach((t=>t()))}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){if(this._orientation=t,"horizontal"===t)this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:n,fontStyle:s,fontWeight:a,fontSize:o,fontFamily:r}}=this;i.text="".concat(t+1," / ").concat(e),i.fill=n,i.fontStyle=s,i.fontWeight=a,i.fontSize=o,i.fontFamily=r}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:n,activeStyle:s,inactiveStyle:a,highlightStyle:o,highlightActive:r}=this,l=(t,e)=>e?a:t===r?o:s;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",n))}updateMarker(t,e){var i;const{size:n}=this.marker;t.size=n,t.fill=e.fill,t.fillOpacity=null!=(i=e.fillOpacity)?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,n=t===e-1,s=0===t;this.nextButtonDisabled=n||i,this.previousButtonDisabled=s||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}clickNext(){this.incrementPage(),this.onPaginationChanged()}clickPrevious(){this.decrementPage(),this.onPaginationChanged()}setPage(t){t=Wn(0,t,this.totalPages-1),this.currentPage!==t&&(this.currentPage=t,this.onPaginationChanged())}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.clickNext(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.clickPrevious(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=Bd(this.marker.shape||Nd);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}};Su.className="Pagination",x([Xs(Js)],Su.prototype,"marker",2),x([Xs(Js)],Su.prototype,"activeStyle",2),x([Xs(Js)],Su.prototype,"inactiveStyle",2),x([Xs(Js)],Su.prototype,"highlightStyle",2),x([Xs(Js)],Su.prototype,"label",2);var ku=class extends fe{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}};x([Xs(sa,{optional:!0})],ku.prototype,"maxLength",2),x([Xs(fa)],ku.prototype,"color",2),x([Xs(La,{optional:!0})],ku.prototype,"fontStyle",2),x([Xs(Ra,{optional:!0})],ku.prototype,"fontWeight",2),x([Xs(sa)],ku.prototype,"fontSize",2),x([Xs(ea)],ku.prototype,"fontFamily",2),x([Xs(ta,{optional:!0})],ku.prototype,"formatter",2);var wu=class extends fe{constructor(){super(...arguments),this.size=15,this.padding=8,this.enabled=!0}};x([qr((t=>{var e;return null==(e=t.parent)?void 0:e.onMarkerShapeChange()}))],wu.prototype,"shape",2),x([Xs(sa)],wu.prototype,"size",2),x([Xs(sa)],wu.prototype,"padding",2),x([Xs(sa,{optional:!0})],wu.prototype,"strokeWidth",2),x([Xs($s)],wu.prototype,"enabled",2);var Mu=class extends fe{};x([Xs(sa,{optional:!0})],Mu.prototype,"strokeWidth",2),x([Xs(sa,{optional:!0})],Mu.prototype,"length",2);var Du=class extends fe{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0,this.showSeriesStroke=!1,this.marker=new wu,this.label=new ku,this.line=new Mu}};x([Xs(sa,{optional:!0})],Du.prototype,"maxWidth",2),x([Xs(sa)],Du.prototype,"paddingX",2),x([Xs(sa)],Du.prototype,"paddingY",2),x([Xs($s)],Du.prototype,"toggleSeriesVisible",2),x([Xs($s)],Du.prototype,"showSeriesStroke",2),x([Xs(Js)],Du.prototype,"marker",2),x([Xs(Js)],Du.prototype,"label",2),x([Xs(Js)],Du.prototype,"line",2);var Cu=class extends fe{};x([Xs(ta,{optional:!0})],Cu.prototype,"legendItemClick",2),x([Xs(ta,{optional:!0})],Cu.prototype,"legendItemDoubleClick",2);var Lu=class extends fe{constructor(t){super(),this.ctx=t,this.id=_n(this),this.group=new Mo({name:"legend",layer:!0,zIndex:11}),this.itemSelection=Br.select(this.group,yu),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.item=new Du,this.listeners=new Cu,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.focus={mode:"item",index:0},this.item.marker.parent=this,this.pagination=new Su((e=>t.updateService.update(e)),(t=>this.updatePageNumber(t)),t.regionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=t.regionManager.addRegionFromProperties({name:"legend",bboxproviders:[this.group],canInteraction:()=>this.enabled&&this.group.visible});this.destroyFns.push(e.addListener("click",(t=>this.checkLegendClick(t)),17),e.addListener("dblclick",(t=>this.checkLegendDoubleClick(t)),17),e.addListener("hover",(t=>this.handleLegendMouseMove(t))),e.addListener("leave",(t=>this.handleLegendMouseExit(t)),17),e.addListener("enter",(t=>this.handleLegendMouseEnter(t)),17),e.addListener("blur",(t=>this.onBlur(t))),e.addListener("tab",(t=>this.onTab(t))),e.addListener("tab-start",(t=>this.onTabStart(t))),e.addListener("nav-vert",(t=>this.onNav(t))),e.addListener("nav-hori",(t=>this.onNav(t))),e.addListener("submit",(t=>this.onSubmit(t))),t.layoutService.addListener("start-layout",(t=>this.positionLegend(t.shrinkRect))),(()=>this.detachLegend()))}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.destroyFns.forEach((t=>t())),this.pagination.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":Fo.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}detachLegend(){var t;null==(t=this.group.parent)||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}calcLayout(t,e){const{paddingX:i,paddingY:n,label:s,maxWidth:a,marker:{size:o,padding:r,shape:l},label:{maxLength:h=1/0,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:p},line:g,showSeriesStroke:m}=this.item,f=[...this.data];this.reverseOrder&&f.reverse(),this.itemSelection.update(f);const y=[],v=Go(s),x=null!=a?a:.8*t,b=o+r+i;if(this.itemSelection.each(((t,e)=>{var i,n,s;const a=Bd(null!=l?l:e.marker.shape),f=null!=(i=e.marker.enabled)?i:this.item.marker.enabled;t.marker&&t.marker instanceof a||(t.marker=new a),t.markerSize=o,t.spacing=r,t.fontStyle=c,t.fontWeight=d,t.fontSize=u,t.fontFamily=p;const S=null!=(n=e.itemId)?n:e.id,k=this.getItemLabel(e),w=(null!=k?k:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(w,h,x,b,v,S),m&&void 0!==e.line?(t.lineVisible=!0,t.markerVisible=f,t.setSeriesStrokeOffset(null!=(s=g.length)?s:5)):(t.lineVisible=!1,t.markerVisible=!0),y.push(t.computeBBox())})),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const S=this.size,k=this.oldSize;S[0]=t,S[1]=e,S[0]===k[0]&&S[1]===k[1]||(k[0]=S[0],k[1]=S[1]);const{pages:w,maxPageHeight:M,maxPageWidth:D}=this.updatePagination(y,t,e);this.pages=w,this.maxPageSize=[D-i,M-n];const C=this.pagination.currentPage,L=this.pages[C];this.pages.length<1||!L?this.visible=!1:(this.visible=!0,this.updatePositions(C),this.update())}truncate(t,e,i,n,s,a){const o=t.split("");let r=!1;t.length>e&&(t="".concat(t.substring(0,e)),r=!0);if(Math.floor(n+Fo.getTextSize(t,s).width)>i){let e="";const a=this.getCharacterWidths(s);let l=n+a["..."];for(const t of o){if(a[t]||(a[t]=Fo.getTextSize(t,s).width),l+=a[t],l>i)break;e+=t}t=e,r=!0}return r?(t+="...",this.truncatedItems.add(a)):this.truncatedItems.delete(a),t}updatePagination(t,e,i){const n=this.getOrientation(),s=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=n,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:a,maxPageHeight:o,maxPageWidth:r,paginationBBox:l,paginationVertical:h}=this.calculatePagination(t,e,i),c=a.findIndex((t=>t.endIndex>=s));this.pagination.currentPage=Wn(0,c,a.length-1);const{paddingX:d,paddingY:u}=this.item,p=r-d,g=o-u;let m=0,f=-l.y-this.item.marker.size/2;return h?f+=g+8:(m+=-l.x+p+8,f+=(g-l.height)/2),this.pagination.translationX=m,this.pagination.translationY=f,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:o,maxPageWidth:r,pages:a}}calculatePagination(t,e,i){var n,s,a;const{paddingX:o,paddingY:r}=this.item,l=this.getOrientation(),h=["left","right"].includes(this.position);let c=this.pagination.computeBBox(),d=new ts(0,0,0,0),u=[],p=0,g=0,m=0;const f=void 0!==this.maxWidth&&void 0!==this.maxHeight;do{if(m++>10){E.warn("unable to find stable legend layout.");break}c=d;const y=e-(h?0:c.width),v=gu({orientation:l,bboxes:t,maxHeight:i-(h?c.height:0),maxWidth:y,itemPaddingY:r,itemPaddingX:o,forceResult:f});u=null!=(n=null==v?void 0:v.pages)?n:[],p=null!=(s=null==v?void 0:v.maxPageWidth)?s:0,g=null!=(a=null==v?void 0:v.maxPageHeight)?a:0;const x=u.length;if(this.pagination.visible=x>1,this.pagination.totalPages=x,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while((y=d).width!==c.width||y.height!==c.height);var y;return{maxPageWidth:p,maxPageHeight:g,pages:u,paginationBBox:c,paginationVertical:h}}getPageItemCount(t){let e=0;for(const i of this.pages[t].columns)e+=i.indices.length;return e}getNodeIndexFromFocusIndex(){const{index:t}=this.focus,e=this.pages[this.pagination.currentPage];let i=0;for(const n of e.columns){if(t<i+n.indices.length)return n.indices[t-i];i+=n.indices.length}return-1}updatePositions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{item:{paddingY:e},itemSelection:i,pages:n}=this;if(n.length<1||!n[t])return;const{columns:s,startIndex:a,endIndex:o}=n[t];let r=0,l=0;const h=s.length,c=s[0].indices.length,d="horizontal"===this.getOrientation(),u=s[0].bboxes[0].height+e,p=[];i.each(((t,e,i)=>{var n,g;if(i<a||i>o)return void(t.visible=!1);const m=i-a;let f=0,y=0;d?(f=m%h,y=Math.floor(m/h)):(f=Math.floor(m/c),y=m%c),t.visible=!0;const v=s[f];v&&(l=u*y,r=null!=(n=p[y])?n:0,p[y]=(null!=(g=p[y])?g:0)+v.columnWidth,t.translationX=Math.floor(r),t.translationY=Math.floor(l))}))}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:n}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=n:this.paginationTrackingIndex=Math.floor((i+n)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(6)}update(){const{label:{color:t},marker:e,line:i,showSeriesStroke:n}=this.item;this.itemSelection.each(((s,a)=>{var o,r;const l=a.marker;s.markerFill=l.fill,s.markerStroke=l.stroke,s.markerStrokeWidth=null!=(o=e.strokeWidth)?o:Math.min(2,l.strokeWidth),s.markerFillOpacity=l.fillOpacity,s.markerStrokeOpacity=l.strokeOpacity,s.opacity=a.enabled?1:.5,s.color=t;const{line:h}=a;n&&void 0!==h&&(s.lineStroke=h.stroke,s.lineStrokeOpacity=h.strokeOpacity,s.lineStrokeWidth=null!=(r=i.strokeWidth)?r:Math.min(2,h.strokeWidth),s.lineLineDash=h.lineDash)}))}getDatumForPoint(t,e){const i=[],n={dist:1/0,datum:void 0};for(const s of this.group.children){if(!s.visible)continue;if(!(s instanceof yu))continue;const a=s.computeBBox();if(a.grow(this.item.paddingX/2,"horizontal"),a.grow(this.item.paddingY/2,"vertical"),a.containsPoint(t,e))return s.datum;const o=t-a.x-this.item.paddingX/2,r=e-a.y-this.item.paddingY/2,l=p(o,2)+p(r,2);o>=0&&r>=0&&l<n.dist&&(n.dist=l,n.datum=s.datum),i.push(a)}if(ts.merge(i).containsPoint(t,e))return n.datum}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const e=this.getDatumForPoint(t.offsetX,t.offsetY);this.doClick(e)&&t.consume()}doClick(t){const{listeners:{legendItemClick:e},ctx:{chartService:i,highlightManager:n},item:{toggleSeriesVisible:s},preventHidingAll:a}=this;if(!t)return!1;const{id:o,itemId:r,enabled:l}=t,h=i.series.find((t=>t.id===o));if(!h)return!1;let c=l;if(s){if(c=!l,a&&!c){i.series.flatMap((t=>t.getLegendData("category"))).filter((t=>t.enabled)).length<2&&(c=!0)}const e=c?"visible":"hidden";this.ctx.ariaAnnouncementService.announceValue("".concat(e)),this.ctx.chartEventManager.legendItemClick(h,r,c,t.legendItemName)}return c?n.updateHighlight(this.id,{series:h,itemId:r,datum:void 0}):n.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:c,itemId:r,seriesId:h.id}),!0}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{chartService:n},item:{toggleSeriesVisible:s}}=this;if("integrated"===n.mode)return;const a=this.getDatumForPoint(t.offsetX,t.offsetY);if(!a)return;const{id:o,itemId:r,seriesId:l}=a,h=n.series.find((t=>t.id===o));if(h){if(t.consume(),s){const t=n.series.flatMap((t=>t.getLegendData("category"))),i=t.filter((t=>t.enabled)).length,s=t.find((t=>t.itemId===r&&t.seriesId===l));this.ctx.chartEventManager.legendItemDoubleClick(h,r,null!=(e=null==s?void 0:s.enabled)&&e,i,null==s?void 0:s.legendItemName)}this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:r,seriesId:h.id})}}handleLegendMouseMove(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t;t.consume();const n=this.getDatumForPoint(e,i);this.doHover(t,n)}doHover(t,e){var i;const{item:{toggleSeriesVisible:n},listeners:s}=this;if(void 0===t||void 0===e)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const a=e?this.ctx.chartService.series.find((t=>t.id===(null==e?void 0:e.id))):void 0;if(e&&this.truncatedItems.has(null!=(i=e.itemId)?i:e.id)){const{offsetX:i,offsetY:n}=t;this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:n,lastPointerEvent:t,showArrow:!1},nl({content:this.getItemLabel(e)}))}else this.ctx.tooltipManager.removeTooltip(this.id);(n||null!=s.legendItemClick||null!=s.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null==e?void 0:e.enabled)&&a?this.ctx.highlightManager.updateHighlight(this.id,{series:a,itemId:null==e?void 0:e.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(t){this.doMouseExit()}doMouseExit(){this.ctx.cursorManager.updateCursor(this.id),this.ctx.tooltipManager.removeTooltip(this.id),16===this.ctx.interactionManager.getState()&&this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseEnter(t){const{enabled:e,item:{toggleSeriesVisible:i},listeners:{legendItemClick:n,legendItemDoubleClick:s}}=this,a=this.getDatumForPoint(t.offsetX,t.offsetY);e&&void 0!==a&&(i||null!=n||null!=s)&&this.ctx.cursorManager.updateCursor(this.id,"pointer")}onBlur(t){this.doMouseExit(),this.focus.mode="item",this.ctx.regionManager.updateFocusIndicatorRect(void 0)}onTab(t){this.updateFocus(),t.consume()}onTabStart(t){if(!this.pagination.visible||!this.pagination.enabled)return;const e=e=>{this.focus.mode=e,this.updateFocus(),t.consume()};"item"===this.focus.mode&&1===t.delta?(this.focus.index=0===this.pagination.currentPage?1:0,e("page")):"page"===this.focus.mode&&-1===t.delta&&(this.focus.index=0,e("item"))}onNav(t){if("item"===this.focus.mode){const e=this.focus.index+t.delta,i=this.getPageItemCount(this.pagination.currentPage);this.focus.index=Wn(-1,e,i),this.updateFocus(),t.consume()}else"page"===this.focus.mode&&(t.delta<0&&(this.focus.index=0),t.delta>0&&(this.focus.index=1),this.updateFocus(),t.consume())}onSubmit(t){"item"===this.focus.mode?this.doClick(this.getFocusedItem().datum):"page"===this.focus.mode&&(0===this.focus.index&&this.pagination.clickPrevious(),1===this.focus.index&&this.pagination.clickNext(),this.ctx.ariaAnnouncementService.announceValue("Legend page ".concat(this.pagination.currentPage+1," of ").concat(this.pages.length)))}maybeChangeFocusPage(){const t=this.pagination.currentPage,e=this.getPageItemCount(t);if(-1===this.focus.index)this.pagination.setPage(t-1);else{if(this.focus.index!==e)return;this.pagination.setPage(t+1)}const{currentPage:i}=this.pagination;t===i?this.focus.index=Wn(0,this.focus.index,e-1):-1===this.focus.index?this.focus.index=this.getPageItemCount(i)-1:this.focus.index=0}getFocusedItem(){if("item"!==this.focus.mode)return E.error("getFocusedItem() should be called only when focus.mode is 'item'"),{nodeIndex:-1,node:void 0,datum:void 0};this.maybeChangeFocusPage();const t=this.getNodeIndexFromFocusIndex();if(t<0)return E.error("Cannot access negative nodeIndex ".concat(t)),{nodeIndex:-1,node:void 0,datum:void 0};const e=this.itemSelection.nodes()[t];let i;return t<this.data.length?i=this.data[t]:E.error("Cannot access datum[".concat(t,"]")),{nodeIndex:t,node:e,datum:i}}updateFocus(){const{focus:t,pagination:e}=this;if("item"===t.mode){const{nodeIndex:t,node:e,datum:i}=this.getFocusedItem();if(void 0===i)return;const n=null==e?void 0:e.computeTransformedBBox();this.doHover(rc(this.ctx.regionManager,{bbox:n,showFocusBox:!0}),i);const s=i&&this.getItemLabel(i);if(s){const e=i.enabled?"visible":"hidden";this.ctx.ariaAnnouncementService.announceValue("Legend item ".concat(t+1," of ").concat(this.data.length,", ").concat(s,", ").concat(e))}}else if("page"===t.mode){const i=0===t.index?e.previousButton:e.nextButton;this.ctx.regionManager.updateFocusIndicatorRect(i.computeTransformedBBox());const n=["Previous legend page","Next legend page"][t.index];this.ctx.ariaAnnouncementService.announceValue("".concat(n,", button"))}}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,n]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.calcLayout(i,n);const s=this.computePagedBBox(),a=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-s.height;default:return t.width-s.width}};if(this.visible){let i,n;switch(this.position){case"top":case"bottom":i=(t.width-s.width)/2,n=a(),e.shrink(s.height,this.position);break;default:i=a(),n=(t.height-s.height)/2,e.shrink(s.width,this.position)}this.group.translationX=Math.floor(-s.x+t.x+i),this.group.translationY=Math.floor(-s.y+t.y+n)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=s.clone();i.x+=this.group.translationX,i.y+=this.group.translationY}return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,n=e/i;let s,a;switch(this.position){case"top":case"bottom":const t=n<1?Math.min(.5,1/n*.2):.2;s=this.maxWidth?Math.min(this.maxWidth,e):e,a=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;default:const o=n>1?Math.min(.5,.25*n):.25;s=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*o),a=this.maxHeight?Math.min(this.maxHeight,i):i}return[s,a]}};Lu.className="Legend",x([Xs(Js)],Lu.prototype,"pagination",2),x([Xs(Js)],Lu.prototype,"item",2),x([Xs(Js)],Lu.prototype,"listeners",2),x([qr((t=>t.updateGroupVisibility())),Xs($s)],Lu.prototype,"enabled",2),x([Xs(Ca)],Lu.prototype,"position",2),x([Xs(sa,{optional:!0})],Lu.prototype,"maxWidth",2),x([Xs(sa,{optional:!0})],Lu.prototype,"maxHeight",2),x([Xs($s,{optional:!0})],Lu.prototype,"reverseOrder",2),x([Xs(Fa(["horizontal","vertical"],"an orientation"),{optional:!0})],Lu.prototype,"orientation",2),x([Xs($s,{optional:!0})],Lu.prototype,"preventHidingAll",2),x([Xs(sa)],Lu.prototype,"spacing",2);var Ru={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:Lu,packageType:"community"},Iu=class extends gd{constructor(){super(...arguments),this.zIndex=3,this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}layout(t,e){this.centerX=t,this.centerY=e}static align(t,e,i,n,s,a,o,r){const l=t.strokeWidth/2,h=t.align(i+s*o)+l,c=h+t.align(i+s*o,s*(r-o))-2*l,d=t.align(n+a/2)+l;t.layout(h,d),e.layout(c,d)}computeBBox(){const{centerX:t,centerY:e,width:i,height:n}=this;return new ts(t-i/2,e-n/2,i,n)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){var t,e,i;const{centerX:n,centerY:s,path:a,strokeWidth:o,gripLineGap:r,gripLineLength:l}=this,h=null!=(i=null==(e=null==(t=this.layerManager)?void 0:t.canvas)?void 0:e.pixelRatio)?i:1;a.clear();const c=Math.floor(this.width/2*h)/h,d=Math.floor(this.height/2*h)/h;a.moveTo(n-c,s-d),a.lineTo(n+c,s-d),a.lineTo(n+c,s+d),a.lineTo(n-c,s+d),a.closePath();const u=Math.floor((r+o)/2*h)/h,p=Math.floor(l/2*h)/h;a.moveTo(n-u,s-p),a.lineTo(n-u,s+p),a.moveTo(n+u,s-p),a.lineTo(n+u,s+p)}};Iu.className="RangeHandle",x([Xs(fa)],Iu.prototype,"_fill",2),x([Xs(fa)],Iu.prototype,"_stroke",2),x([Xs(sa)],Iu.prototype,"_strokeWidth",2),x([Xs(wa)],Iu.prototype,"_lineCap",2),x([Xs(sa)],Iu.prototype,"_width",2),x([Xs(sa)],Iu.prototype,"_gripLineGap",2),x([Xs(sa)],Iu.prototype,"_gripLineLength",2),x([Xs(sa)],Iu.prototype,"_height",2);var Au=class extends gd{constructor(){super(...arguments),this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1}layout(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n,this.dirtyPath=!0}update(t,e){this.min=isNaN(t)?this.min:t,this.max=isNaN(e)?this.max:e,this.dirtyPath=!0}computeBBox(){const{x:t,y:e,width:i,height:n}=this;return new ts(t,e,i,n)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:n,min:s,max:a}=this,o=t+i*s;return new ts(o,e,t+i*a-o,n)}updatePath(){const{path:t,x:e,y:i,width:n,height:s,min:a,max:o,strokeWidth:r}=this,l=r/2;t.clear();const h=this.align(e)+l,c=this.align(i)+l,d=h+this.align(e,n)-2*l,u=c+this.align(i,s)-2*l;t.moveTo(h,c),t.lineTo(d,c),t.lineTo(d,u),t.lineTo(h,u),t.closePath();const p=this.align(e+n*a)+l,g=p+this.align(e+n*a,n*(o-a))-2*l;t.moveTo(p,c),t.lineTo(p,u),t.lineTo(g,u),t.lineTo(g,c),t.closePath()}};Au.className="RangeMask";var Tu=class extends Mo{constructor(t){super({name:"rangeSelectorGroup",layer:!0,zIndex:12}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.isContainerNode=!0,this.background=new Mo({name:"navigator-background"}),this.background.zIndex=1,this.appendChild(this.background),this.append(t)}layout(t,e,i,n,s,a){this.x=t,this.y=e,this.width=i,this.height=n,this.lOffset=s,this.rOffset=a,this.background.translationX=t,this.background.translationY=e}updateBackground(t,e){null!=t&&this.background.removeChild(t),null!=e&&this.background.appendChild(e)}computeBBox(){const{x:t,y:e,width:i,height:n,lOffset:s,rOffset:a}=this;return new ts(t-s,e,i+(s+a),n)}},Nu=class extends St{constructor(t){super(),this.ctx=t,this.miniChart=void 0,this.enabled=!1,this.mask=new Au,this.minHandle=new Iu,this.maxHandle=new Iu,this.height=30,this.margin=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new Tu([this.mask,this.minHandle,this.maxHandle]),this._min=0,this._max=1,this.minRange=.001;const e=t.regionManager.addRegion("navigator",this.rangeSelector);this.destroyFns.push(t.scene.attachNode(this.rangeSelector),e.addListener("hover",(t=>this.onHover(t)),25),e.addListener("drag-start",(t=>this.onDragStart(t)),25),e.addListener("drag",(t=>this.onDrag(t)),25),e.addListener("drag-end",(()=>this.onDragEnd()),25),e.addListener("leave",(t=>this.onLeave(t)),25),t.zoomManager.addListener("zoom-change",(t=>this.onZoomChange(t)))),this.updateGroupVisibility()}updateBackground(t,e){var i;null==(i=this.rangeSelector)||i.updateBackground(t,e)}updateGroupVisibility(){const{enabled:t}=this;null!=this.rangeSelector&&t!==this.rangeSelector.visible&&(this.rangeSelector.visible=t,t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}performLayout(t){return S(this,arguments,(function(t){var e=this;let{shrinkRect:i}=t;return function*(){if(e.enabled){const t=e.height+e.margin;i.shrink(t,"bottom"),e.y=i.y+i.height+e.margin}else e.y=0;return{shrinkRect:i}}()}))}performCartesianLayout(t){return S(this,null,(function*(){const{x:e,width:i}=t.seriesRect;if(this.enabled){const{y:t,height:n}=this;this.layoutNodes(e,t,i,n)}this.x=e,this.width=i}))}onHover(t){if(!this.enabled)return;const{mask:e,minHandle:i,maxHandle:n}=this,{offsetX:s,offsetY:a}=t;i.containsPoint(s,a)||n.containsPoint(s,a)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):e.computeVisibleRangeBBox().containsPoint(s,a)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator")}onDragStart(t){if(!this.enabled)return;const{mask:e,minHandle:i,maxHandle:n,x:s,width:a,_min:o}=this,{offsetX:r,offsetY:l}=t;i.zIndex<n.zIndex?n.containsPoint(r,l)?this.dragging="max":i.containsPoint(r,l)&&(this.dragging="min"):i.containsPoint(r,l)?this.dragging="min":n.containsPoint(r,l)&&(this.dragging="max"),null==this.dragging&&e.computeVisibleRangeBBox().containsPoint(r,l)&&(this.dragging="pan",this.panStart=(r-s)/a-o),null!=this.dragging&&this.ctx.zoomManager.fireZoomPanStartEvent("navigator")}onDrag(t){if(!this.enabled||null==this.dragging)return;const{dragging:e,minRange:i,panStart:n,x:s,width:a}=this;let{_min:o,_max:r}=this;const{offsetX:l}=t,h=(l-s)/a;if("min"===e)o=Wn(0,h,r-i);else if("max"===e)r=Wn(o+i,h,1);else if("pan"===e&&null!=n){const t=r-o;o=Wn(0,h-n,1-t),r=o+t}this._min=o,this._max=r,this.updateZoom()}onDragEnd(){this.dragging=void 0}onLeave(t){this.ctx.cursorManager.updateCursor("navigator")}onZoomChange(t){const{x:e}=t;e&&(this._min=e.min,this._max=e.max,this.updateNodes(e.min,e.max))}layoutNodes(t,e,i,n){const{rangeSelector:s,mask:a,minHandle:o,maxHandle:r,_min:l,_max:h}=this;s.layout(t,e,i,n,o.width/2,r.width/2),a.layout(t,e,i,n),Iu.align(o,r,t,e,i,n,l,h),l+(h-l)/2<.5?(o.zIndex=3,r.zIndex=4):(o.zIndex=4,r.zIndex=3)}updateNodes(t,e){this.mask.update(t,e)}updateZoom(){if(!this.enabled)return;const{_min:t,_max:e}=this,i=this.ctx.zoomManager.getZoom();if(null==t||null==e)return;return this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e},y:null==i?void 0:i.y},!1,(t=>{null==this.min&&null==this.max||E.warnOnce("Could not apply [navigator.min] or [navigator.max] as [".concat(t,"] has modified the initial zoom state."))}))}};x([Xs(Js,{optional:!0})],Nu.prototype,"miniChart",2),x([Xs($s),qr((t=>t.updateGroupVisibility()))],Nu.prototype,"enabled",2),x([Xs(sa)],Nu.prototype,"height",2),x([Xs(sa)],Nu.prototype,"margin",2),x([Zr({newValue(t){this._min=t,this.updateZoom()}}),Xs(Zs(aa,da("max")),{optional:!0})],Nu.prototype,"min",2),x([Zr({newValue(t){this._max=t,this.updateZoom()}}),Xs(Zs(aa,ua("min")),{optional:!0})],Nu.prototype,"max",2);var Eu={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Nu,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8}}}},Ou=t=>{let{takeColors:e}=t;const{fills:[i],strokes:[n]}=e(1);return{fill:i,stroke:n}},Pu=t=>{const{fill:e,stroke:i}=Ou(t);return{marker:{fill:e,stroke:i}}};function Bu(t,e,i,n,s){const{addPhaseFn:a,updatePhaseFn:o,removePhaseFn:r}=s,l=(n,s,a)=>{i.animate({id:"".concat(t,"_").concat(e,"_").concat(s.id,"_").concat(n),groupId:t,from:0,to:1,ease:vs,collapsable:!1,onUpdate(t,e){e&&"removed"!==n||(s.path.clear(!0),a(t,s),s.checkPathDirty())},onStop(){"added"===n&&(s.path.clear(!0),a(1,s),s.checkPathDirty())},phase:As[n]})};for(const h of n)i.isSkipped()||(l("removed",h,r),l("updated",h,o)),l("added",h,a)}var Fu=null;function _u(t){if(null!=t)return""===t?"":(null!=Fu||(Fu=wn("div")),Fu.textContent=String(t),Fu.innerHTML)}function Gu(t,e,i){let{id:n}=t;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];Ns(n,e,i,a,{opacity:0},{opacity:1},{phase:"trailing"})}function zu(t,e,i){let{id:n}=t;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];Ns(n,e,i,a,{opacity:1},{opacity:0},{phase:"remove"})}function Wu(t){return{opacity:1}}var Vu=class extends fe{constructor(){super(...arguments),this._dirty=3}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},Ku=class extends Vu{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};x([Xs($s),ns({redraw:3})],Ku.prototype,"enabled",2),x([Xs(fa),ns({redraw:3})],Ku.prototype,"color",2),x([Xs(ia),ns({redraw:3})],Ku.prototype,"xOffset",2),x([Xs(ia),ns({redraw:3})],Ku.prototype,"yOffset",2),x([Xs(sa),ns({redraw:3})],Ku.prototype,"blur",2);var Yu=za((t=>Pd(t)||"function"===typeof xd&&Object.create(t.prototype)instanceof xd),"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Hu=class extends Vu{constructor(){super(...arguments),this.enabled=!0,this.shape=bd,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:s,strokeOpacity:a}=this;return{size:t,fill:e,fillOpacity:i,stroke:n,strokeWidth:s,strokeOpacity:a}}getDiameter(){return this.size+this.strokeWidth}};x([Xs($s),ns({redraw:3})],Hu.prototype,"enabled",2),x([Xs(Yu),ns({redraw:3})],Hu.prototype,"shape",2),x([Xs(sa),ns({redraw:3})],Hu.prototype,"size",2),x([Xs(fa,{optional:!0}),ns({redraw:3})],Hu.prototype,"fill",2),x([Xs(aa),ns({redraw:3})],Hu.prototype,"fillOpacity",2),x([Xs(fa,{optional:!0}),ns({redraw:3})],Hu.prototype,"stroke",2),x([Xs(sa),ns({redraw:3})],Hu.prototype,"strokeWidth",2),x([Xs(aa),ns({redraw:3})],Hu.prototype,"strokeOpacity",2),x([Xs(ta,{optional:!0}),ns({redraw:3})],Hu.prototype,"formatter",2);var Uu=class extends fe{constructor(){super(...arguments),this.enabled=!1}};x([Xs($s)],Uu.prototype,"enabled",2);var Xu=class extends fe{constructor(){super(...arguments),this.enabled=!0,this.interaction=new Uu,this.position=new sl}toTooltipHtml(t,e){return this.renderer?nl(this.renderer(e),t):nl(t)}};x([Xs($s)],Xu.prototype,"enabled",2),x([Xs($s,{optional:!0})],Xu.prototype,"showArrow",2),x([Xs(ta,{optional:!0})],Xu.prototype,"renderer",2),x([Xs(Js)],Xu.prototype,"interaction",2),x([Xs(Js)],Xu.prototype,"position",2);var ju=class extends Ud{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new Ku,this.marker=new Hu,this.label=new zo,this.tooltip=new Xu,this.connectMissingData=!1}};function Zu(t,e,i){let{id:n}=t;const s={phase:i?As[i]:"trailing"};for(var a=arguments.length,o=new Array(a>3?a-3:0),r=3;r<a;r++)o[r-3]=arguments[r];Ns(n,"markers",e,o,{opacity:0},{opacity:1},s),o.forEach((t=>t.cleanup()))}function qu(t,e){let{id:i}=t;for(var n=arguments.length,s=new Array(n>2?n-2:0),a=2;a<n;a++)s[a-2]=arguments[a];Ns(i,"markers",e,s,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),s.forEach((t=>t.cleanup()))}function Ju(t,e){let{id:i,nodeDataDependencies:n}=t;const s=n.seriesRectWidth;for(var a=arguments.length,o=new Array(a>2?a-2:0),r=2;r<a;r++)o[r-2]=arguments[r];Ts(i,"markers",e,o,{fromFn:(t,e)=>{var i,n;const a=null!=(n=null==(i=e.midPoint)?void 0:i.x)?n:s;let o=Wn(0,ws(a/s),1);return isNaN(o)&&(o=0),{scalingX:0,scalingY:0,delay:o,duration:Ms,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function Qu(t){return{opacity:1,scalingX:1,scalingY:1}}function $u(t,e){var i,n,s,a;return{translationX:null!=(n=null==(i=e.point)?void 0:i.x)?n:NaN,translationY:null!=(a=null==(s=e.point)?void 0:s.y)?a:NaN}}function tp(t,e){const i=(e,i)=>{const n=t[i][e];return Array.isArray(n)?n[0]:n},n=e=>{const{xValue:n}=e;return t.moved[n]?{point:i(n,"moved"),status:"updated"}:t.removed[n]?{point:i(n,"removed"),status:"removed"}:t.added[n]?{point:i(n,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(t,i)=>{var s,a,o,r,l,h;const{status:c,point:d}=n(i);if("unknown"===c)return{opacity:0};const u={translationX:null!=(a=null==(s=null==d?void 0:d.from)?void 0:s.x)?a:t.translationX,translationY:null!=(r=null==(o=null==d?void 0:d.from)?void 0:o.y)?r:t.translationY,opacity:t.opacity,phase:As[c]};return"added"===e?f(m({},u),{opacity:0,translationX:null==(l=null==d?void 0:d.to)?void 0:l.x,translationY:null==(h=null==d?void 0:d.to)?void 0:h.y,phase:As.added}):("added"===c&&(u.opacity=0),u)},toFn:(t,i)=>{var s,a;const{status:o,point:r}=n(i);if("unknown"===o)return{opacity:0};const l={translationX:i.point.x,translationY:i.point.y,opacity:1,phase:As[o]};return"removed"===o||"removed"===e?f(m({},l),{translationX:null==(s=null==r?void 0:r.to)?void 0:s.x,translationY:null==(a=null==r?void 0:r.to)?void 0:a.y,opacity:0,phase:As.removed}):l}}}function ep(t,e){let{datumIndex:i}=e;const n=t.getNodeData();if(void 0===n)return;const s=n[i];if(void 0===s||void 0===s.point)return;const a=t.getFormattedMarkerStyle(s).size,o=a/2,{x:r,y:l}=t.contentGroup.inverseTransformPoint(s.point.x-o,s.point.y-o);return new ts(r,l,a,a)}function ip(t){return t.reduce(((t,e)=>{let{min:i,max:n}=t;return(null==i||i.point.x>e.point.x)&&(i=e),(null==n||n.point.x<e.point.x)&&(n=e),{min:i,max:n}}),{})}function np(t,e,i){const n=(e.y-t.y)/(e.x-t.x);return{x:i,y:(i-t.x)*n+t.y}}function sp(t,e,i,n){let s=-1,a=0;const o=[];for(;a<t.length;)t[a].change!==e?t[a].change!==i?(o.length>0&&(n(o,s,a),o.length=0),s=a,a++):a++:(o.push(t[a]),a++);o.length>0&&n(o,s,a)}function ap(t,e){sp(t,"out","in",((i,n,s)=>{var a,o;-1===n&&t[s]?i.forEach((e=>e.to=t[s].from)):s===t.length&&t[n]?i.forEach((e=>e.to=t[n].from)):"intersect"===e&&(null==(a=t[n])?void 0:a.from)&&(null==(o=t[s])?void 0:o.from)?i.forEach((e=>e.to=np(t[n].from,t[s].from,e.from.x))):i.forEach((t=>t.to=t.from))})),sp(t,"in","out",((i,n,s)=>{var a,o;-1===n&&t[s]?i.forEach((e=>e.from=t[s].to)):s===t.length&&t[n]?i.forEach((e=>e.from=t[n].to)):"intersect"===e&&(null==(a=t[n])?void 0:a.to)&&(null==(o=t[s])?void 0:o.to)?i.forEach((e=>e.from=np(t[n].to,t[s].to,e.to.x))):i.forEach((t=>t.from=t.to))}))}function op(t,e,i){const n=isNaN(t.x)?e.x:t.x,s=isNaN(t.y)?e.y:t.y,a=e.x-t.x,o=e.y-t.y;return{x:n+(isNaN(a)?0:a*i),y:s+(isNaN(o)?0:o*i)}}function rp(t,e,i){const{path:n}=i;let s;for(const a of t){const{from:t,to:i}=a,o=e[a.change];if(null==o||null==t||null==i)continue;const{x:r,y:l}=op(t,i,o);if(!1===a.moveTo)n.lineTo(r,l);else if(!0!==a.moveTo&&s){if(s){const t="in"===a.moveTo?o:1-o,{x:e,y:i}=op(s,{x:r,y:l},t);n.lineTo(e,i),n.moveTo(r,l)}}else n.moveTo(r,l);s={x:r,y:l}}}function lp(t,e){let{id:i,visible:n,nodeDataDependencies:s}=t;const{seriesRectWidth:a,seriesRectHeight:o}=s;for(var r=arguments.length,l=new Array(r>2?r-2:0),h=2;h<r;h++)l[h-2]=arguments[h];Ns(i,"path_properties",e,l,{clipX:0},{clipX:a},{phase:"initial",start:{clipMode:"normal",clipY:o,visible:n},finish:{clipMode:void 0,visible:n}})}function hp(t,e,i){let{id:n}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"add";for(var a=arguments.length,o=new Array(a>4?a-4:0),r=4;r<a;r++)o[r-4]=arguments[r];Ns(n,e,i,o,{opacity:0},{opacity:1},{phase:s})}function cp(t,e,i){let{id:n}=t;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];Ns(n,e,i,a,{opacity:1},{opacity:0},{phase:"remove"})}function dp(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function up(t,e){let{nodeDataDependencies:i}=t;const n=t=>isFinite(t)?t:0;e.clipX=n(i.seriesRectWidth),e.clipY=n(i.seriesRectHeight)}function pp(t){return"continuous"===t.type||"log"===t.type}function gp(t){return"category"===t.type}function mp(t,e){return t.domain.length===e.domain.length&&t.range.length===e.range.length&&t.domain.every(((t,i)=>t===e.domain[i]))&&t.range.every(((t,i)=>t===e.range[i]))}function fp(t,e){return void 0===t||void 0===e?void 0!==t||void 0!==e:pp(t)&&pp(e)?t.type===e.type&&mp(t,e):!(!gp(t)||!gp(e))&&mp(t,e)}function yp(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"===typeof t){return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0]}if("log"===e.type&&"number"===typeof t)return e.convert(t);const i=e.domain.findIndex((e=>e===t));return i>=0?e.range[i]:NaN}function vp(t,e){const i=Number(t),n=Number(e);return isNaN(i)||isNaN(n)?t===e:Math.abs(n-i)<.25}function xp(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?Boolean(t):t?"in":"out"}function bp(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n,s,a,o;const{backfillSplitMode:r="intersect"}=i,l=e=>{var i,n;return{x:yp(null!=(i=e.xValue)?i:NaN,t.scales.x),y:yp(null!=(n=e.yValue)?n:NaN,t.scales.y)}},h=t=>{var i,n;return{x:yp(null!=(i=t.xValue)?i:NaN,e.scales.x),y:yp(null!=(n=t.yValue)?n:NaN,e.scales.y)}},c=[],d={added:{},moved:{},removed:{}},u=function(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"move";t&&(isNaN(t.point.x)||isNaN(t.point.y))&&(t=e);const s={from:null==t?void 0:t.point,to:null==e?void 0:e.point,moveTo:xp(null==t?void 0:t.point.moveTo,null==e?void 0:e.point.moveTo),change:n};"move"===n?(d.moved[i]=s,y++,v++):"in"===n?(d.added[i]=s,v++):"out"===n&&(d.removed[i]=s,y++),c.push(s)},{min:p,max:g}=ip(e.nodeData),{min:m,max:f}=ip(t.nodeData);let y=0,v=0;for(;y<e.nodeData.length||v<t.nodeData.length;){const i=e.nodeData[y],r=t.nodeData[v],c=i?l(i):void 0,d=r?h(r):void 0,x=void 0;if(c&&vp(c.x,null==r?void 0:r.point.x))u(i,r,r.xValue,"move");else if(c&&c.x<(null!=(n=null==m?void 0:m.point.x)?n:-1/0))u(i,x,i.xValue,"out");else if(c&&c.x>(null!=(s=null==f?void 0:f.point.x)?s:1/0))u(i,x,i.xValue,"out");else if(d&&d.x<(null!=(a=null==p?void 0:p.point.x)?a:-1/0))u(x,r,r.xValue,"in");else if(d&&d.x>(null!=(o=null==g?void 0:g.point.x)?o:1/0))u(x,r,r.xValue,"in");else if(c&&c.x<(null==r?void 0:r.point.x))u(i,x,i.xValue,"out");else if(d&&d.x<(null==i?void 0:i.point.x))u(x,r,r.xValue,"in");else if(i)u(i,x,i.xValue,"out");else{if(!r)throw new Error("Unable to process points");u(x,r,r.xValue,"in")}}return ap(c,r),{result:c,resultMap:d}}function Sp(t,e,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s,a,o;const{backfillSplitMode:r="intersect",multiDatum:l=!1}=n,h=[],c={added:{},moved:{},removed:{}},d={added:{},moved:{},removed:{}},u={in:"added",move:"moved",out:"removed"};let p,g;const f=(t,e)=>{var i;const n=u[e.change];l?(null!=(i=d[n])[t]||(i[t]=[]),d[n][t].push(e)):c[n][t]=e,p=e,g=Zo(t)};let y=0,v=0,x=!1;for(;y<e.nodeData.length||v<t.nodeData.length;){const n=e.nodeData[y],r=t.nodeData[v],c=Zo(null==n?void 0:n.xValue),d=Zo(null==r?void 0:r.xValue);let u;if(c===d)u={change:"move",moveTo:xp(null!=(s=n.point.moveTo)&&s,r.point.moveTo),from:n.point,to:r.point},f(null==n?void 0:n.xValue,u),y++,v++;else if(null==i?void 0:i.removed.has(String(c)))u={change:"out",moveTo:null!=(a=n.point.moveTo)&&a,from:n.point},f(null==n?void 0:n.xValue,u),y++;else if(null==i?void 0:i.added.has(String(d)))u={change:"in",moveTo:null!=(o=r.point.moveTo)&&o,to:r.point},f(null==r?void 0:r.xValue,u),v++;else if(l&&p&&g===c)u=m({},p),f(null==n?void 0:n.xValue,u),y++;else{if(!l||!p||g!==d){x=!0;break}u=m({},p),f(null==r?void 0:r.xValue,u),v++}h.push(u)}let b=-1/0;return x||(x=h.some((t=>{const{change:e,to:{x:i=-1/0}={}}=t;if("out"===e)return;const n=i<b;return b=i,n}))),x?{result:void 0,resultMap:void 0}:(ap(h,r),{result:h,resultMap:l?d:c})}function kp(t,e,i){var n,s,a,o;let r="updated";const l=t=>t.visible;if(!l(e)&&l(t))r="added";else if(l(e)&&!l(t))r="removed";else for(let h=0;h<i.length&&"move"===i[h].change&&(null==(n=i[h].from)?void 0:n.x)===(null==(s=i[h].to)?void 0:s.x)&&(null==(a=i[h].from)?void 0:a.y)===(null==(o=i[h].to)?void 0:o.y);h++)if(h===i.length-1)return"no-op";return r}function wp(t,e,i,n,s){const a=kp(t,e,i),o=function(t,e){const i="none"===e?"updated":t,n={fromFn:e=>{let n;return n="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},m({phase:As[i]},n)},toFn:t=>({phase:As[i]})};return"fade"===e?{fromFn:e=>{const i="added"===t?0:e.opacity;return m({opacity:i},n.fromFn(e))},toFn:e=>m({opacity:"removed"===t?0:1},n.toFn(e))}:n}(a,n);return{status:a,path:{addPhaseFn:(t,e)=>{s(i,{move:1,in:t},e)},updatePhaseFn:(t,e)=>{s(i,{move:t},e)},removePhaseFn:(t,e)=>{s(i,{move:0,out:t},e)}},pathProperties:o}}function Mp(t,e,i){var n,s,a;const o="category"===(null==(n=t.scales.x)?void 0:n.type);if(o!==("category"===(null==(s=e.scales.x)?void 0:s.type)))return;const{result:r,resultMap:l}=o?Sp(t,e,i):bp(t,e);let h="updated";if(e.visible&&!t.visible?h="removed":!e.visible&&t.visible&&(h="added"),void 0===r||void 0===l)return;const c=null==(a=null==i?void 0:i.changed)||a||function(t,e){return!fp(t.scales.x,e.scales.x)||!fp(t.scales.y,e.scales.y)}(t,e)||"updated"!==h,d=wp(t,e,r,"fade",rp),u=tp(l,h);return f(m({},d),{marker:u,hasMotion:c})}x([Xs(ea)],ju.prototype,"xKey",2),x([Xs(ea,{optional:!0})],ju.prototype,"xName",2),x([Xs(ea)],ju.prototype,"yKey",2),x([Xs(ea,{optional:!0})],ju.prototype,"yName",2),x([Xs(sa,{optional:!0})],ju.prototype,"normalizedTo",2),x([Xs(fa)],ju.prototype,"fill",2),x([Xs(aa)],ju.prototype,"fillOpacity",2),x([Xs(fa)],ju.prototype,"stroke",2),x([Xs(sa)],ju.prototype,"strokeWidth",2),x([Xs(aa)],ju.prototype,"strokeOpacity",2),x([Xs(Da)],ju.prototype,"lineDash",2),x([Xs(sa)],ju.prototype,"lineDashOffset",2),x([Xs(Js)],ju.prototype,"shadow",2),x([Xs(Js)],ju.prototype,"marker",2),x([Xs(Js)],ju.prototype,"label",2),x([Xs(Js)],ju.prototype,"tooltip",2),x([Xs($s)],ju.prototype,"connectMissingData",2);var Dp=(t=>(t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label",t))(Dp||{});function Cp(t){const{points:e,phantomPoints:i}=t.fillData;return{top:e,bottom:i}}function Lp(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function Rp(t,e,i){var n,s;const a="category"===(null==(n=t.scales.x)?void 0:n.type),o="category"===(null==(s=e.scales.x)?void 0:s.type);if(a!==o)return;let r="updated";e.visible&&!t.visible?r="removed":!e.visible&&t.visible&&(r="added");const{resultMap:l}=a?Sp(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):bp(t,e,{backfillSplitMode:"static"}),{top:h,bottom:c}=a?function(t,e,i){const n=Cp(e),s=Cp(t),a={multiDatum:!0};return{top:Sp(Lp("top",t,s),Lp("top",e,n),i,a),bottom:Sp(Lp("bottom",t,s),Lp("bottom",e,n),i,a)}}(t,e,i):function(t,e){const i=Cp(e),n=Cp(t);return{top:bp(Lp("top",t,n),Lp("top",e,i)),bottom:bp(Lp("bottom",t,n),Lp("bottom",e,i))}}(t,e);if(void 0===l||void 0===h.result||void 0===c.result)return;const d=[...h.result,...c.result.reverse()],u=!!e.stackVisible&&t.stackVisible,p=wp(t,e,d,u?"none":"fade",rp),g=tp(l,r);return{status:p.status,fill:p,marker:g}}var Ip=class extends Xd{constructor(t){super({moduleCtx:t,directionKeys:Kd,directionNames:Yd,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:dp({getOpacity:()=>this.getOpacity()}),label:Wu,marker:(t,e)=>m(m({},{opacity:1,scalingX:1,scalingY:1}),$u(0,e))}}),this.properties=new ju}processData(t){return S(this,null,(function*(){var e,i;if(null==this.data||!this.properties.isValid())return;const{data:n,visible:s,seriesGrouping:{groupIndex:a=this.id,stackCount:o=1}={}}=this,{xKey:r,yKey:l,connectMissingData:h,normalizedTo:c}=this.properties,d=!this.ctx.animationManager.isSkipped(),u=null==(e=this.axes.x)?void 0:e.scale,p=null==(i=this.axes.y)?void 0:i.scale,{isContinuousX:g,xScaleType:y,yScaleType:v}=this.getScaleInformation({xScale:u,yScale:p}),x=["area-stack-".concat(a,"-yValues"),"area-stack-".concat(a,"-yValues-trailing"),"area-stack-".concat(a,"-yValues-prev"),"area-stack-".concat(a,"-yValues-trailing-prev"),"area-stack-".concat(a,"-yValues-marker")],b=[];Tt(c)&&(b.push(Ac([x[0],x[1],x[4]],c,"range")),b.push(Ac([x[2],x[3]],c,"range"))),!g&&d&&this.processedData&&b.push(Fc(this.processedData)),d&&b.push(Ec());const S={invalidValue:null};h&&o>1&&(S.invalidValue=0),s||(S.forceValue=0),yield this.requestDataModel(t,n,{props:[Yc(r,y,{id:"xValue"}),Hc(l,v,m({id:"yValueRaw"},S)),...Zc(l,"window","current",f(m({id:"yValueEnd"},S),{groupId:x[0]}),v),...Zc(l,"window-trailing","current",f(m({id:"yValueStart"},S),{groupId:x[1]}),v),...Zc(l,"window","last",f(m({id:"yValuePreviousEnd"},S),{groupId:x[2]}),v),...Zc(l,"window-trailing","last",f(m({id:"yValuePreviousStart"},S),{groupId:x[3]}),v),...Zc(l,"normal","current",f(m({id:"yValueCumulative"},S),{groupId:x[4]}),v),...b],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:n}=this;if(!e||!i||0===e.data.length)return[];const s=n.x,a=n.y,o=i.resolveProcessedDataDefById(this,"xValue"),r=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if("x"===t)return"key"===(null==o?void 0:o.def.type)&&"category"===o.def.valueType?r:qh(ln(r),s);if(a instanceof su||a instanceof ou)return qh(l,a);return qh([l[0]>0?0:l[0],l[1]<0?0:l[1]],a)}createNodeData(){return S(this,null,(function*(){var t;const{axes:e,data:i,processedData:{data:n}={},dataModel:s}=this,a=e.x,o=e.y;if(!a||!o||!i||!s||!this.properties.isValid())return;const{yKey:r,xKey:l,marker:h,label:c,fill:d,stroke:u,connectMissingData:p}=this.properties,{scale:g}=a,{scale:y}=o,{isContinuousY:v}=this.getScaleInformation({xScale:g,yScale:y}),x=(null!=(t=g.bandwidth)?t:0)/2,b=s.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),S=t=>f(m({},t),{point:f(m({},t.point),{moveTo:!0})}),k=(t,e,i)=>{const n=g.convert(t)+x,s=y.convert(e);return[{point:{x:n,y:y.convert(i)},yValue:i,xValue:t},{point:{x:n,y:s},yValue:e,xValue:t}]},w=(t,e,i)=>{let n;return(Tt(this.properties.normalizedTo)?v&&Xo(i):!isNaN(i))&&(n=e),{x:g.convert(t)+x,y:y.convert(n),size:h.size}},M=r,D=[],C=[],{visibleSameStackCount:L}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),R={itemId:M,fillData:{itemId:M,points:[],phantomPoints:[]},strokeData:{itemId:M,points:[]},labelData:D,nodeData:C,scales:this.calculateScaling(),visible:this.visible,stackVisible:L>0},I=R.fillData.points,A=R.fillData.phantomPoints,T=R.strokeData.points;let N,E=-1,O=-1/0;return null==n||n.forEach((t=>{const{keys:e,keys:[i],datum:n,values:a}=t;a.forEach(((t,a)=>{var o,g,m;E++;const f=n[a],y=s.resolveProcessedDataDefsValues(b,{keys:e,values:t}),{yValueRaw:v,yValueCumulative:x}=y;let{yValueStart:L,yValueEnd:R,yValuePreviousStart:P,yValuePreviousEnd:B}=y;const F=null!=v,_=w(i,+x,v);if(F&&h&&C.push({index:E,series:this,itemId:M,datum:f,midPoint:{x:_.x,y:_.y},cumulativeValue:R,yValue:v,xValue:i,yKey:r,xKey:l,point:_,fill:null!=(o=h.fill)?o:d,stroke:null!=(g=h.stroke)?g:u,strokeWidth:null!=(m=h.strokeWidth)?m:this.getStrokeWidth(this.properties.strokeWidth)}),F&&c){const t=this.getLabelText(c,{value:v,datum:f,xKey:l,yKey:r,xName:this.properties.xName,yName:this.properties.yName},(t=>Kt(t)?t.toFixed(2):String(t)));D.push({index:E,series:this,itemId:r,datum:f,x:_.x,y:_.y,label:t?{text:t,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0})}const G=null!=N&&null!=i,z=null!=O&&F;z||(L=null!=L?L:0,R=null!=L?L:0,P=null!=P?P:0,B=null!=P?P:0);const[W,V]=k(N,P,B),[K,Y]=k(i,L,R);!G||p&&!z||(I.push(W,K),A.push(V,Y)),z&&E>0&&T.push(S(W),K),N=i,O=v}))})),T.length>0&&(T[0]=S(T[0])),R}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker;return new(Bd(t))}updatePathNodes(t){return S(this,null,(function*(){const{opacity:e,visible:i,animationEnabled:n}=t,[s,a]=t.paths,o=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({tag:1,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:o,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),s.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:e,visible:i||n,strokeWidth:o}),up(this,a),up(this,s)}))}updatePaths(t){return S(this,null,(function*(){this.updateAreaPaths(t.paths,t.contextData)}))}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){const{fillData:i}=e,[n]=t,{path:s}=n;let a;s.clear(!0);for(const{point:o}of T(i.points,function*(t){for(let e=t.length-1;e>=0;e--)yield t[e]}(i.phantomPoints)))o.moveTo?s.moveTo(o.x,o.y):(null==a?void 0:a.y)!==o.y&&(a&&s.lineTo(a.x,a.y),s.lineTo(o.x,o.y)),a=o;a&&s.lineTo(a.x,a.y),s.closePath(),n.checkPathDirty()}updateStrokePath(t,e){const{strokeData:i}=e,[,n]=t,{path:s}=n;s.clear(!0);for(const{point:a}of i.points)a.moveTo?s.moveTo(a.x,a.y):s.lineTo(a.x,a.y);n.checkPathDirty()}updateMarkerSelection(t){return S(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}))}updateMarkerNodes(t){return S(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n,yKey:s,marker:a,fill:o,stroke:r,strokeWidth:l,fillOpacity:h,strokeOpacity:c,highlightStyle:d}=this.properties,u=Zt(i&&d.item,a.getStyle(),{fill:o,stroke:r,strokeWidth:l,fillOpacity:h,strokeOpacity:c});e.each(((t,e)=>{this.updateMarkerStyle(t,a,{datum:e,highlighted:i,xKey:n,yKey:s},u)})),i||this.properties.marker.markClean()}))}updateLabelSelection(t){return S(this,null,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.tag=3}))}))}updateLabelNodes(t){return S(this,null,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:n,fontWeight:s,fontSize:a,fontFamily:o,color:r}=this.properties.label;e.each(((t,e)=>{const{x:l,y:h,label:c}=e;c&&i&&this.visible?(t.fontStyle=n,t.fontWeight=s,t.fontSize=a,t.fontFamily=o,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l,t.y=h-10,t.fill=r,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){const{id:e,axes:i,dataModel:n}=this,{xKey:s,xName:a,yName:o,tooltip:r,marker:l}=this.properties,{yKey:h,xValue:c,yValue:d,datum:u,itemId:p}=t,g=i.x,m=i.y;if(!this.properties.isValid()||!(g&&m&&Kt(d))||!n)return el;const f=g.formatDatum(c),y=m.formatDatum(d),v=_u(o),x=_u(f+": "+y),b=Zt({fill:this.properties.fill},l.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:S}=this.getMarkerStyle(l,{datum:t,xKey:s,yKey:h,highlighted:!1},b);return r.toTooltipHtml({title:v,content:x,backgroundColor:S},{datum:u,itemId:p,xKey:s,xName:a,yKey:h,yName:o,color:S,title:v,seriesId:e})}getLegendData(t){var e,i,n,s;if(!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||"category"!==t)return[];const{yKey:a,yName:o,fill:r,stroke:l,fillOpacity:h,strokeOpacity:c,strokeWidth:d,lineDash:u,marker:p,visible:g}=this.properties,m=!p.enabled||void 0===p.fill;return[{legendType:t,id:this.id,itemId:a,seriesId:this.id,enabled:g,label:{text:null!=o?o:a},marker:{shape:p.shape,fill:m?r:p.fill,fillOpacity:m?h:p.fillOpacity,stroke:null!=(i=p.stroke)?i:l,strokeOpacity:null!=(n=p.strokeOpacity)?n:c,strokeWidth:null!=(s=p.strokeWidth)?s:0,enabled:p.enabled||d<=0},line:{stroke:l,strokeOpacity:c,strokeWidth:d,lineDash:u}}]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,contextData:n,paths:s}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(s,n),lp(this,a,...s),fr([e],$u),Ju(this,a,e),Gu(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelection:s,labelSelection:a,contextData:o,paths:r,previousContextData:l}=t,[h,c]=r;if(null==h&&null==c)return;super.resetAllAnimation(t);const d=()=>{this.updateAreaPaths(r,o),this.updateStrokePath(r,o)};if(null==o||null==l)return d(),Zu(this,n,"added",s),hp(this,"fill_path_properties",n,"add",h),hp(this,"stroke",n,"trailing",c),void Gu(this,"labels",n,a);const u=Rp(o,l,null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff);if(void 0===u)return n.skipCurrentBatch(),void d();"no-op"!==u.status&&(Zu(this,n,void 0,s),Ts(this.id,"fill_path_properties",n,[h],u.fill.pathProperties),Bu(this.id,"fill_path_update",n,[h],u.fill.path),this.updateStrokePath(r,o),hp(this,"stroke",n,"trailing",c),Gu(this,"labels",n,a))}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Mo}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=t;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,highlighted:!0})}computeFocusBounds(t){return ep(this,t)}};Ip.className="AreaSeries",Ip.type="area";var Ap={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:Ip,stackable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{__extends__:Ve,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:$e,xOffset:3,yOffset:3,blur:5},marker:{__extends__:Ke,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:Ye,color:He}}},paletteFactory:t=>{const{marker:e}=Pu(t);return{fill:e.fill,stroke:e.stroke,marker:e}}};function*Tp(t){for(const e of t.children)yield e}function Np(t,e){for(const i of e){const e=i.datum;void 0===e?E.error("undefined datum"):t.addValue(i,e)}}function Ep(t,e){const{x:i,y:n}=t.contentGroup.transformPoint(e.x,e.y),{nearest:s,distanceSquared:a}=t.getQuadTree().find(i,n);if(void 0!==s)return{datum:s.value,distance:Math.sqrt(a)}}var Op=class extends Ud{constructor(){super(...arguments),this.direction="vertical"}};x([Xs(Ea)],Op.prototype,"direction",2);var Pp=class extends Xd{constructor(){super(...arguments),this.groupScale=new Hs,this.smallestDataInterval=void 0}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}updateGroupScale(t){const{groupScale:e,smallestDataInterval:i,ctx:{seriesStateManager:n}}=this,s=t.scale,a=qa.is(s)?s.calcBandwidth(i):s.bandwidth,o=[],{index:r,visibleGroupCount:l}=n.getVisiblePeerGroupIndex(this);for(let h=0;h<l;h++)o.push(String(h));e.domain=o,e.range=[0,null!=a?a:0],t instanceof Ll?e.paddingInner=t.groupPaddingInner:e.padding=t instanceof Gl?.1:0,e.round=0!==e.padding;return{barWidth:e.bandwidth>=1?e.bandwidth:e.rawBandwidth,groupIndex:r}}resolveKeyDirection(t){return"x"===this.getBarDirection()?"x"===t?"y":"x":t}initQuadTree(t){Np(t,this.datumNodesIter())}pickNodeClosestDatum(t){return Ep(this,t)}},Bp=class extends zo{constructor(){super(...arguments),this.placement="inside"}};x([Xs(Oa)],Bp.prototype,"placement",2);var Fp=class extends Op{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new Ku,this.label=new Bp,this.tooltip=new Xu}};function _p(t){let{rect:e,config:i}=t;const{crisp:n=!0,fill:s,stroke:a,strokeWidth:o,fillOpacity:r,strokeOpacity:l,lineDash:h,lineDashOffset:c,fillShadow:d,cornerRadius:u=0,topLeftCornerRadius:p=!0,topRightCornerRadius:g=!0,bottomRightCornerRadius:m=!0,bottomLeftCornerRadius:f=!0,visible:y=!0}=i;e.crisp=n,e.fill=s,e.stroke=a,e.strokeWidth=o,e.fillOpacity=r,e.strokeOpacity=l,e.lineDash=h,e.lineDashOffset=c,e.fillShadow=d,e.topLeftCornerRadius=p?u:0,e.topRightCornerRadius=g?u:0,e.bottomRightCornerRadius=m?u:0,e.bottomLeftCornerRadius=f?u:0,e.visible=y}function Gp(t){var e,i,n,s,a,o,r=t,{datum:l,isHighlighted:h,style:c,highlightStyle:d,formatter:u,seriesId:p,ctx:{callbackCache:g}}=r,f=y(r,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:v,fillOpacity:x,stroke:b,strokeWidth:S}=Zt(h&&d,c),{strokeOpacity:k,fillShadow:w,lineDash:M,lineDashOffset:D,cornerRadius:C=0,topLeftCornerRadius:L=!0,topRightCornerRadius:R=!0,bottomRightCornerRadius:I=!0,bottomLeftCornerRadius:A=!0}=c;let T;return u&&(T=g.call(u,m({datum:l.datum,xKey:l.xKey,fill:v,stroke:b,strokeWidth:S,cornerRadius:C,highlighted:h,seriesId:p},f))),{fill:null!=(e=null==T?void 0:T.fill)?e:v,stroke:null!=(i=null==T?void 0:T.stroke)?i:b,strokeWidth:null!=(n=null==T?void 0:T.strokeWidth)?n:S,fillOpacity:null!=(s=null==T?void 0:T.fillOpacity)?s:x,strokeOpacity:null!=(a=null==T?void 0:T.strokeOpacity)?a:k,lineDash:M,lineDashOffset:D,fillShadow:w,cornerRadius:null!=(o=null==T?void 0:T.cornerRadius)?o:C,topLeftCornerRadius:L,topRightCornerRadius:R,bottomRightCornerRadius:I,bottomLeftCornerRadius:A}}function zp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[e,i]=t;return!(0!==e||1!==i)}x([Xs(ea)],Fp.prototype,"xKey",2),x([Xs(ea,{optional:!0})],Fp.prototype,"xName",2),x([Xs(ea)],Fp.prototype,"yKey",2),x([Xs(ea,{optional:!0})],Fp.prototype,"yName",2),x([Xs(ea,{optional:!0})],Fp.prototype,"stackGroup",2),x([Xs(ia,{optional:!0})],Fp.prototype,"normalizedTo",2),x([Xs(fa)],Fp.prototype,"fill",2),x([Xs(aa)],Fp.prototype,"fillOpacity",2),x([Xs(fa)],Fp.prototype,"stroke",2),x([Xs(sa)],Fp.prototype,"strokeWidth",2),x([Xs(aa)],Fp.prototype,"strokeOpacity",2),x([Xs(Da)],Fp.prototype,"lineDash",2),x([Xs(sa)],Fp.prototype,"lineDashOffset",2),x([Xs(sa)],Fp.prototype,"cornerRadius",2),x([Xs(ta,{optional:!0})],Fp.prototype,"formatter",2),x([Xs(Js,{optional:!0})],Fp.prototype,"shadow",2),x([Xs(Js)],Fp.prototype,"label",2),x([Xs(Js)],Fp.prototype,"tooltip",2);var Wp=t=>{var e;return Un(null!=(e=t.yValue)?e:0)};function Vp(t,e,i){const{startingX:n,startingY:s}=function(t,e){const i=e[t?"y":"x"];let n=1/0,s=0;if(!i)return{startingX:n,startingY:s};t?s=i.scale.convert(qa.is(i.scale)?0:Math.max(...i.range)):n=i.scale.convert(qa.is(i.scale)?0:Math.min(...i.range));return{startingX:n,startingY:s}}(t,e);return{isVertical:t,calculate:(e,i)=>{let a=t?e.x:n,o=t?s:e.y,r=t?e.width:0,l=t?0:e.height;const{opacity:h}=e;let c;return i&&(isNaN(a)||isNaN(o))&&(({x:a,y:o}=i),r=t?i.width:0,l=t?0:i.height,t&&!Wp(i)?o+=i.height:!t&&Wp(i)&&(a+=i.width)),c=null==e.clipBBox?void 0:Wp(e)?t?new ts(a,o-l,r,l):new ts(a-r,o,r,l):new ts(a,o,r,l),{x:a,y:o,width:r,height:l,clipBBox:c,opacity:h}},mode:i}}function Kp(t,e){return{isVertical:t,calculate:e=>({x:t?e.x:e.x+e.width/2,y:t?e.y+e.height/2:e.y,width:t?e.width:0,height:t?0:e.height,clipBBox:e.clipBBox,opacity:e.opacity}),mode:e}}function Yp(t){const e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,n,s)=>{let a;return a="removed"===s&&null==i.datum&&"fade"===t.mode?f(m({},Hp(i,n)),{opacity:0}):"removed"===s||e(n)?t.calculate(n,i.previousDatum):{x:n.x,y:n.y,width:n.width,height:n.height,clipBBox:n.clipBBox,opacity:n.opacity},a},fromFn:(i,n,s)=>{let a;"updated"===s&&e(n)?s="removed":"updated"===s&&e(i.previousDatum)&&(s="added"),a="added"===s&&null==i.previousDatum&&"fade"===t.mode?f(m({},Hp(i,n)),{opacity:0}):"unknown"===s||"added"===s?t.calculate(n,i.previousDatum):{x:i.x,y:i.y,width:i.width,height:i.height,clipBBox:i.clipBBox,opacity:i.opacity};const o=As[s];return f(m({},a),{phase:o})}}}function Hp(t,e){let{x:i,y:n,width:s,height:a,clipBBox:o,opacity:r}=e;return{x:i,y:n,width:s,height:a,clipBBox:o,opacity:r}}function Up(t,e,i){if(void 0===t)return;const{x:n,y:s,width:a,height:o}=t;return e.inverseTransformBBox(new ts(n,s,a,o)).clip(i)}function Xp(t,e,i){if(e.enabled&&i){const{x:n,y:s,text:a,textAlign:o,textBaseline:r}=i,{color:l,fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u}=e;t.setProperties({visible:!0,x:n,y:s,text:a,fill:l,fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,textAlign:o,textBaseline:r})}else t.visible=!1}function jp(t){let{isPositive:e,isVertical:i,placement:n,padding:s=0,rect:a}=t,o=a.x+a.width/2,r=a.y+a.height/2,l="center",h="middle";switch(n){case"start":i?(r=e?a.y+a.height+s:a.y-s,h=e?"top":"bottom"):(o=e?a.x-s:a.x+a.width+s,l=e?"start":"end");break;case"outside":case"end":i?(r=e?a.y-s:a.y+a.height+s,h=e?"bottom":"top"):(o=e?a.x+a.width+s:a.x-s,l=e?"start":"end")}return{x:o,y:r,textAlign:l,textBaseline:h}}var Zp=class extends Pp{constructor(t){super({moduleCtx:t,directionKeys:Kd,directionNames:Yd,pickModes:[0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Hp,label:Wu}}),this.properties=new Fp}processData(t){return S(this,null,(function*(){var e,i,n;if(!this.properties.isValid()||!this.data)return;const{seriesGrouping:{groupIndex:s=this.id}={},data:a=[]}=this,{xKey:o,yKey:r,normalizedTo:l}=this.properties,h=!this.ctx.animationManager.isSkipped(),c=null==(e=this.getCategoryAxis())?void 0:e.scale,d=null==(i=this.getValueAxis())?void 0:i.scale,{isContinuousX:u,xScaleType:p,yScaleType:g}=this.getScaleInformation({xScale:c,yScale:d}),f="bar-stack-".concat(s,"-yValues"),y="".concat(f,"-trailing"),v=[];Kt(l)&&v.push(Ac([f,y],Math.abs(l),"range")),h&&this.processedData&&v.push(Fc(this.processedData)),h&&v.push(Ec());const x=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(t,a,{props:[Yc(o,p,{id:"xValue"}),Hc(r,g,m({id:"yValue-raw",invalidValue:null},x)),...Zc(r,"normal","current",m({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},x),g),...Zc(r,"trailing","current",m({id:"yValue-start",invalidValue:null,missingValue:0,groupId:y,separateNegative:!0},x),g),...u?[Lc]:[],...v],groupByKeys:!0,groupByData:!1});this.smallestDataInterval=null==(n=b.reduced)?void 0:n.smallestKeyInterval,this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:n,smallestDataInterval:s}=this;if(!i||!n||0===i.data.length)return[];const a=this.getCategoryAxis(),o=this.getValueAxis(),r=n.resolveProcessedDataDefById(this,"xValue"),l=n.getDomain(this,"xValue","key",i),h=n.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===(null==r?void 0:r.def.type)&&"category"===r.def.valueType)return l;const t=Kt(s)?.5*s:0,i=null!=(e=ln(l))?e:[NaN,NaN];return qh([i[0]+-t,i[1]+t],a)}if(this.getValueAxis()instanceof su)return qh(h,o);return qh([Math.min(0,h[0]),Math.max(0,h[1])],o)}createNodeData(){return S(this,null,(function*(){const{dataModel:t}=this,e=this.getCategoryAxis(),i=this.getValueAxis();if(!t||!e||!i||!this.properties.isValid())return;const n=e.scale,s=i.scale,{xKey:a,yKey:o,xName:r,yName:l,fill:h,stroke:c,strokeWidth:d,cornerRadius:u,legendItemName:p,label:g}=this.properties,f=i.isReversed(),{barWidth:y,groupIndex:v}=this.updateGroupScale(e),x=qa.is(n)?-.5*y:0,b=t.resolveProcessedDataIndexById(this,"xValue"),S=t.resolveProcessedDataIndexById(this,"yValue-raw"),k=t.resolveProcessedDataIndexById(this,"yValue-start"),w=t.resolveProcessedDataIndexById(this,"yValue-end"),M=t.resolveProcessedDataIndexById(this,"yValue-range"),D=!this.ctx.animationManager.isSkipped(),C={itemId:o,nodeData:[],labelData:[],scales:this.calculateScaling(),visible:this.visible||D},{groupScale:L,processedData:R}=this;return null==R||R.data.forEach((t=>{let{keys:e,datum:i,values:D,aggValues:R}=t;D.forEach(((t,D)=>{var I;const A=e[b],T=n.convert(A),N=+t[w],E=+t[k],O=t[S],P=O>=0&&!Object.is(O,-0),B=P!==f,F=null!=(I=null==R?void 0:R[M][P?1:0])?I:0,_=T+L.convert(String(v))+x;if(isNaN(N))return;const G=s.convert(N),z=s.convert(E),W="x"===this.getBarDirection(),V=s.convert(F),K=s.convert(0),Y={x:W?Math.min(G,z):_,y:W?_:Math.min(G,z),width:W?Math.abs(z-G):y,height:W?y:Math.abs(z-G)},H=new ts(Y.x,Y.y,Y.width,Y.height),U={x:W?Math.min(K,V):_,y:W?_:Math.min(K,V),width:W?Math.abs(K-V):y,height:W?y:Math.abs(K-V),clipBBox:H},{fontStyle:X,fontWeight:j,fontSize:Z,fontFamily:q,color:J,placement:Q}=g,$=this.getLabelText(this.properties.label,{datum:i[D],value:O,xKey:a,yKey:o,xName:r,yName:l,legendItemName:p},(t=>Kt(t)?t.toFixed(2):String(t))),tt=$?m({text:$,fill:J,fontStyle:X,fontWeight:j,fontSize:Z,fontFamily:q},jp({isPositive:P,isVertical:!W,placement:Q,rect:Y})):void 0,et=this.shouldFlipXY()?Y.height:Y.width,it={series:this,itemId:o,datum:i[D],valueIndex:D,cumulativeValue:N,xValue:A,yValue:O,yKey:o,xKey:a,capDefaults:{lengthRatioMultiplier:et,lengthMax:et},x:U.x,y:U.y,width:U.width,height:U.height,midPoint:{x:Y.x+Y.width/2,y:Y.y+Y.height/2},fill:h,stroke:c,opacity:1,strokeWidth:d,cornerRadius:u,topLeftCornerRadius:W!==B,topRightCornerRadius:B,bottomRightCornerRadius:W===B,bottomLeftCornerRadius:!B,clipBBox:H,label:tt,missing:null==O};C.nodeData.push(it),C.labelData.push(it)}))})),C}))}nodeFactory(){return new du}updateDatumSelection(t){return S(this,null,(function*(){return t.datumSelection.update(t.nodeData,(t=>{t.tag=0}),(t=>_c(t.xValue,t.valueIndex)))}))}updateDatumNodes(t){return S(this,null,(function*(){if(!this.properties.isValid())return;const{yKey:e,stackGroup:i,fill:n,fillOpacity:s,stroke:a,strokeWidth:o,strokeOpacity:r,lineDash:l,lineDashOffset:h,formatter:c,shadow:d,highlightStyle:{item:u}}=this.properties,p=this.axes.x,g=zp(null==p?void 0:p.visibleRange),m="x"===this.getCategoryDirection();t.datumSelection.each(((p,f)=>{var y,v,x,b;const S={fill:n,stroke:a,fillOpacity:s,strokeOpacity:r,lineDash:l,lineDashOffset:h,fillShadow:d,strokeWidth:this.getStrokeWidth(o),cornerRadius:f.cornerRadius,topLeftCornerRadius:f.topLeftCornerRadius,topRightCornerRadius:f.topRightCornerRadius,bottomRightCornerRadius:f.bottomRightCornerRadius,bottomLeftCornerRadius:f.bottomLeftCornerRadius},k=m?(null!=(v=null==(y=f.clipBBox)?void 0:y.width)?v:f.width)>0:(null!=(b=null==(x=f.clipBBox)?void 0:x.height)?b:f.height)>0,w=Gp({datum:f,ctx:this.ctx,seriesId:this.id,isHighlighted:t.isHighlight,highlightStyle:u,yKey:e,style:S,formatter:c,stackGroup:i});w.crisp=g,w.visible=k,_p({rect:p,config:w})}))}))}updateLabelSelection(t){return S(this,null,(function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,(t=>{t.tag=1,t.pointerEvents=1}))}))}updateLabelNodes(t){return S(this,null,(function*(){t.labelSelection.each(((t,e)=>{Xp(t,this.properties.label,e.label)}))}))}getTooltipHtml(t){var e;const{id:i,processedData:n,ctx:{callbackCache:s}}=this,a=this.getCategoryAxis(),o=this.getValueAxis();if(!n||!this.properties.isValid()||!a||!o)return el;const{xKey:r,yKey:l,xName:h,yName:c,fill:d,stroke:u,strokeWidth:p,tooltip:g,formatter:f,stackGroup:y,legendItemName:v}=this.properties,{xValue:x,yValue:b,datum:S,itemId:k}=t,w=a.formatDatum(x),M=o.formatDatum(b),D=_u(c),C=_u(w+": "+M);let L;f&&(L=s.call(f,{seriesId:i,datum:S,xKey:r,yKey:l,stackGroup:y,fill:d,stroke:u,strokeWidth:this.getStrokeWidth(p),highlighted:!1}));const R=null!=(e=null==L?void 0:L.fill)?e:d;return g.toTooltipHtml({title:D,content:C,backgroundColor:R},m({seriesId:i,itemId:k,datum:S,xKey:r,yKey:l,xName:h,yName:c,stackGroup:y,title:D,color:R,legendItemName:v},this.getModuleTooltipParams()))}getLegendData(t){var e,i;const{showInLegend:n}=this.properties;if("category"!==t||!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||!n)return[];const{yKey:s,yName:a,fill:o,stroke:r,strokeWidth:l,fillOpacity:h,strokeOpacity:c,legendItemName:d,visible:u}=this.properties;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:u,label:{text:null!=(i=null!=d?d:a)?i:s},marker:{fill:o,fillOpacity:h,stroke:r,strokeWidth:l,strokeOpacity:c},legendItemName:d}]}animateEmptyUpdateReady(t){let{datumSelection:e,labelSelection:i,annotationSelections:n}=t;const s=Yp(Vp(this.isVertical(),this.axes,"normal"));Ts(this.id,"nodes",this.ctx.animationManager,[e],s),Gu(this,"labels",this.ctx.animationManager,i),Gu(this,"annotations",this.ctx.animationManager,...n)}animateWaitingUpdateReady(t){var e,i,n;const{datumSelection:s,labelSelection:a,annotationSelections:o,previousContextData:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff,h=null==r?"fade":"normal",c=Yp(Vp(this.isVertical(),this.axes,h));Ts(this.id,"nodes",this.ctx.animationManager,[s],c,((t,e)=>_c(e.xValue,e.valueIndex)),l);(null==(n=null==l?void 0:l.changed)||n)&&(Gu(this,"labels",this.ctx.animationManager,a),Gu(this,"annotations",this.ctx.animationManager,...o))}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(t){let{datumIndex:e,seriesRect:i}=t;var n;return Up(null==(n=this.contextNodeData)?void 0:n.nodeData[e].clipBBox,this.contentGroup,i)}};Zp.className="BarSeries",Zp.type="bar";var qp={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:Zp,stackable:!0,groupable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],swapDefaultAxesCondition:t=>"horizontal"===(null==t?void 0:t.direction),themeTemplate:{series:{__extends__:Ve,direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:Ye,color:Xe,placement:"inside"},shadow:{enabled:!1,color:$e,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Ou},Jp=t=>{const e=ps.fromString(t),[i,n,s]=ps.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:n,h:s,a:e.a}},Qp=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Jp)}update(){const{domain:t,range:e}=this;t.length<2&&(E.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let i=1;i<t.length;i++){if(t[i-1]>=t[i]){E.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort(((t,e)=>t-e));break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(Jp)}convert(t){this.refresh();const{domain:e,range:i,parsedRange:n}=this,s=e[0],a=e.at(-1),o=i[0],r=i[i.length-1];if(t<=s)return o;if(t>=a)return r;let l,h;if(2===e.length){const e=(t-s)/(a-s),n=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),h=(e-l*n)/n}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];h=(t-i)/(e[l+1]-i)}return((t,e,i)=>{let n,s;if(i=Wn(0,i,1),Number.isNaN(t.h)&&Number.isNaN(e.h))n=0,s=0;else if(Number.isNaN(t.h))n=e.h,s=e.c;else if(Number.isNaN(e.h))n=t.h,s=t.c;else{const a=t.h;let o=e.h;const r=e.h-t.h;r>180?o-=360:r<-180&&(o+=360),n=a*(1-i)+o*i,s=t.c*(1-i)+e.c*i}const a=t.l*(1-i)+e.l*i,o=t.a*(1-i)+e.a*i;return ps.fromOKLCH(a,s,n,o)})(n[l],n[l+1],h).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&E.warnOnce("Expected update to not invalidate scale"))}};x([Ks],Qp.prototype,"domain",2),x([Ks],Qp.prototype,"range",2);var $p=class extends Hu{constructor(){super(...arguments),this.maxSize=30}};x([Xs(sa),ns({redraw:3})],$p.prototype,"maxSize",2),x([Xs(xa,{optional:!0}),ns({redraw:3})],$p.prototype,"domain",2);var tg=class extends zo{constructor(){super(...arguments),this.placement="top"}};x([Xs(Ba)],tg.prototype,"placement",2);var eg=class extends Ud{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new $p,this.label=new tg,this.tooltip=new Xu}};x([Xs(ea)],eg.prototype,"xKey",2),x([Xs(ea)],eg.prototype,"yKey",2),x([Xs(ea)],eg.prototype,"sizeKey",2),x([Xs(ea,{optional:!0})],eg.prototype,"labelKey",2),x([Xs(ea,{optional:!0})],eg.prototype,"colorKey",2),x([Xs(ea,{optional:!0})],eg.prototype,"xName",2),x([Xs(ea,{optional:!0})],eg.prototype,"yName",2),x([Xs(ea,{optional:!0})],eg.prototype,"sizeName",2),x([Xs(ea,{optional:!0})],eg.prototype,"labelName",2),x([Xs(ea,{optional:!0})],eg.prototype,"colorName",2),x([Xs(xa,{optional:!0})],eg.prototype,"colorDomain",2),x([Xs(ya)],eg.prototype,"colorRange",2),x([Xs(ea,{optional:!0})],eg.prototype,"title",2),x([Xs(Js)],eg.prototype,"marker",2),x([Xs(Js)],eg.prototype,"label",2),x([Xs(Js)],eg.prototype,"tooltip",2);var ig=class extends Hd{constructor(t,e,i,n){super(t,e,i,n),this.sizeKey=n.properties.sizeKey}},ng=class extends Xd{constructor(t){super({moduleCtx:t,directionKeys:Kd,directionNames:Yd,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Wu,marker:Qu}}),this.NodeEvent=ig,this.properties=new eg,this.sizeScale=new $d,this.colorScale=new Qp}processData(t){return S(this,null,(function*(){var e,i,n,s;if(!this.properties.isValid()||null==this.data||!this.visible)return;const a=null==(e=this.axes.x)?void 0:e.scale,o=null==(i=this.axes.y)?void 0:i.scale,{xScaleType:r,yScaleType:l}=this.getScaleInformation({xScale:a,yScale:o}),h=this.colorScale.type,c=this.sizeScale.type,{xKey:d,yKey:u,sizeKey:p,labelKey:g,colorDomain:m,colorRange:f,colorKey:y,marker:v}=this.properties,{dataModel:x,processedData:b}=yield this.requestDataModel(t,this.data,{props:[Yc(d,r,{id:"xKey-raw"}),Yc(u,l,{id:"yKey-raw"}),...g?[Yc(g,"band",{id:"labelKey-raw"})]:[],Hc(d,r,{id:"xValue"}),Hc(u,l,{id:"yValue"}),Hc(p,c,{id:"sizeValue"}),...y?[Hc(y,h,{id:"colorValue"})]:[],...g?[Hc(g,"band",{id:"labelValue"})]:[]]}),S=x.resolveProcessedDataIndexById(this,"sizeValue"),k=null!=(n=b.domain.values[S])?n:[];if(this.sizeScale.domain=v.domain?v.domain:k,y){const t=x.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=null!=(s=null!=m?m:b.domain.values[t])?s:[],this.colorScale.range=f,this.colorScale.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n="x"===t?"xValue":"yValue",s=e.resolveProcessedDataDefById(this,n),a=e.getDomain(this,n,"value",i);if("value"===(null==s?void 0:s.def.type)&&"category"===(null==s?void 0:s.def.valueType))return a;const o=this.axes[t];return qh(ln(a),o)}createNodeData(){return S(this,null,(function*(){var t,e,i;const{axes:n,dataModel:s,processedData:a,colorScale:o,sizeScale:r}=this,{xKey:l,yKey:h,sizeKey:c,labelKey:d,xName:u,yName:p,sizeName:g,labelName:f,label:y,colorKey:v,marker:x,visible:b}=this.properties,S=Bd(x.shape),{placement:k}=y,w=n.x,M=n.y;if(!(s&&a&&b&&w&&M))return;const D=s.resolveProcessedDataIndexById(this,"xValue"),C=s.resolveProcessedDataIndexById(this,"yValue"),L=c?s.resolveProcessedDataIndexById(this,"sizeValue"):-1,R=v?s.resolveProcessedDataIndexById(this,"colorValue"):-1,I=d?s.resolveProcessedDataIndexById(this,"labelValue"):-1,A=w.scale,T=M.scale,N=(null!=(t=A.bandwidth)?t:0)/2,E=(null!=(e=T.bandwidth)?e:0)/2,O=[];r.range=[x.size,x.maxSize];const P=y.getFont();for(const{values:B,datum:F}of null!=(i=a.data)?i:[]){const t=B[D],e=B[C],i=A.convert(t)+N,n=T.convert(e)+E,s=this.getLabelText(y,{value:d?B[I]:e,datum:F,xKey:l,yKey:h,sizeKey:c,labelKey:d,xName:u,yName:p,sizeName:g,labelName:f}),a=Fo.getTextSize(String(s),P),b=c?r.convert(B[L]):x.size,w=v?o.convert(B[R]):void 0;O.push({series:this,itemId:h,yKey:h,xKey:l,datum:F,xValue:t,yValue:e,sizeValue:B[L],point:{x:i,y:n,size:b},midPoint:{x:i,y:n},fill:w,label:m({text:s},a),marker:S,placement:k})}return{itemId:h,nodeData:O,labelData:O,scales:this.calculateScaling(),visible:this.visible}}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t,e;return null!=(e=null==(t=this.contextNodeData)?void 0:t.labelData)?e:[]}markerFactory(){const{shape:t}=this.properties.marker;return new(Bd(t))}updateMarkerSelection(t){return S(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const n=this.properties.marker.enabled?e:[];return i.update(n,void 0,(t=>_c([t.xValue,t.yValue,t.label.text])))}))}updateMarkerNodes(t){return S(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n,yKey:s,sizeKey:a,labelKey:o,marker:r}=this.properties,l=Zt(i&&this.properties.highlightStyle.item,r.getStyle());this.sizeScale.range=[r.size,r.maxSize],e.each(((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:n,yKey:s,sizeKey:a,labelKey:o},l)})),i||this.properties.marker.markClean()}))}updateLabelSelection(t){return S(this,null,(function*(){var e,i;const n=this.properties.label.enabled&&null!=(i=null==(e=this.chart)?void 0:e.placeLabels().get(this))?i:[];return t.labelSelection.update(n.map((t=>f(m({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}))))}))}updateLabelNodes(t){return S(this,null,(function*(){const{label:e}=this.properties;t.labelSelection.each(((t,i)=>{var n,s,a,o;t.text=i.label.text,t.fill=e.color,t.x=null!=(s=null==(n=i.point)?void 0:n.x)?s:0,t.y=null!=(o=null==(a=i.point)?void 0:a.y)?o:0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"}))}))}getTooltipHtml(t){var e;const i=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!i||!n)return el;const{xKey:s,yKey:a,sizeKey:o,labelKey:r,xName:l,yName:h,sizeName:c,labelName:d,marker:u,tooltip:p}=this.properties,g=null!=(e=this.properties.title)?e:h,m=Zt({fill:t.fill,strokeWidth:this.getStrokeWidth(u.strokeWidth)},u.getStyle()),{fill:f="gray"}=this.getMarkerStyle(u,{datum:t,highlighted:!1,xKey:s,yKey:a,sizeKey:o,labelKey:r},m),{datum:y,xValue:v,yValue:x,sizeValue:b,label:{text:S},itemId:k}=t,w=_u(i.formatDatum(v)),M=_u(n.formatDatum(x));let D="<b>".concat(_u(null!=l?l:s),"</b>: ").concat(w,"<br><b>").concat(_u(null!=h?h:a),"</b>: ").concat(M);return o&&(D+="<br><b>".concat(_u(null!=c?c:o),"</b>: ").concat(_u(String(b)))),r&&(D="<b>".concat(_u(null!=d?d:r),"</b>: ").concat(_u(S),"<br>")+D),p.toTooltipHtml({title:g,content:D,backgroundColor:f},{datum:y,itemId:k,xKey:s,xName:l,yKey:a,yName:h,sizeKey:o,sizeName:c,labelKey:r,labelName:d,title:g,color:f,seriesId:this.id})}getLegendData(){var t,e;if(!(null==(t=this.data)?void 0:t.length)||!this.properties.isValid())return[];const{yKey:i,yName:n,title:s,marker:a,visible:o}=this.properties,{shape:r,fill:l,stroke:h,fillOpacity:c,strokeOpacity:d,strokeWidth:u}=a;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:o,label:{text:null!=(e=null!=s?s:n)?e:i},marker:{shape:r,fill:null!=l?l:"rgba(0, 0, 0, 0)",stroke:null!=h?h:"rgba(0, 0, 0, 0)",fillOpacity:null!=c?c:1,strokeOpacity:null!=d?d:1,strokeWidth:null!=u?u:0}}]}animateEmptyUpdateReady(t){let{markerSelection:e,labelSelection:i}=t;qu(this,this.ctx.animationManager,e),Gu(this,"labels",this.ctx.animationManager,i)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Mo}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,sizeKey:n,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,sizeKey:n,labelKey:s,highlighted:!1})}computeFocusBounds(t){return ep(this,t)}};ng.className="BubbleSeries",ng.type="bubble";var sg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:ng,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Ve,tooltip:{position:{type:"node"}},marker:{__extends__:Ke,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontSize:12,fontFamily:Ye,color:He}}},paletteFactory:Pu},ag=class extends Ud{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Ku,this.label=new zo,this.tooltip=new Xu}};x([Xs(ea)],ag.prototype,"xKey",2),x([Xs(ea,{optional:!0})],ag.prototype,"yKey",2),x([Xs(ea,{optional:!0})],ag.prototype,"xName",2),x([Xs(ea,{optional:!0})],ag.prototype,"yName",2),x([Xs(fa,{optional:!0})],ag.prototype,"fill",2),x([Xs(aa)],ag.prototype,"fillOpacity",2),x([Xs(fa,{optional:!0})],ag.prototype,"stroke",2),x([Xs(sa)],ag.prototype,"strokeWidth",2),x([Xs(aa)],ag.prototype,"strokeOpacity",2),x([Xs(Da)],ag.prototype,"lineDash",2),x([Xs(sa)],ag.prototype,"lineDashOffset",2),x([Xs(sa)],ag.prototype,"cornerRadius",2),x([Xs($s)],ag.prototype,"areaPlot",2),x([Xs(la,{optional:!0})],ag.prototype,"bins",2),x([Xs(Fa(["count","sum","mean"],"a histogram aggregation"))],ag.prototype,"aggregation",2),x([Xs(sa,{optional:!0})],ag.prototype,"binCount",2),x([Xs(Js)],ag.prototype,"shadow",2),x([Xs(Js)],ag.prototype,"label",2),x([Xs(Js)],ag.prototype,"tooltip",2);var og=class extends Xd{constructor(t){super({moduleCtx:t,directionKeys:Kd,directionNames:Yd,pickModes:[0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Hp,label:Wu}}),this.properties=new ag,this.calculatedBins=[]}deriveBins(t){const e=co(t[0],t[1],10),i=po(t[0],t[1],10),[n]=e;return[[n-i,n],...e.map((t=>[t,t+i]))]}calculateNiceBins(t,e){const i=Math.floor(t[0]),n=t[1],s=e||1,{start:a,binSize:o}=this.calculateNiceStart(i,n,s);return this.getBins(a,n,o,s)}getBins(t,e,i,n){const s=[],a=this.calculatePrecision(i);for(let o=0;o<n;o++){const r=Math.round((t+o*i)*a)/a;let l=Math.round((t+(o+1)*i)*a)/a;o===n-1&&(l=Math.max(l,e)),s[o]=[r,l]}return s}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){const n=Math.abs(e-t)/i,s=Math.floor(Math.log10(n)),a=Math.pow(10,s);return{start:Math.floor(t/a)*a,binSize:n}}processData(t){return S(this,null,(function*(){var e,i;this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:n,yKey:s,areaPlot:a,aggregation:o}=this.properties,r=null==(e=this.axes.x)?void 0:e.scale,l=null==(i=this.axes.y)?void 0:i.scale,{xScaleType:h,yScaleType:c}=this.getScaleInformation({yScale:l,xScale:r}),d=[Yc(n,h),Rc];if(s){let t=kc("groupAgg");"count"===o||("sum"===o?t=bc("groupAgg"):"mean"===o&&(t=wc("groupAgg"))),a&&(t=Mc("groupAgg",t)),d.push(Hc(s,c,{invalidValue:void 0}),t)}else{let t=kc("groupAgg");a&&(t=Mc("groupAgg",t)),d.push(t)}!this.ctx.animationManager.isSkipped()&&this.processedData&&d.push(Fc(this.processedData,!1)),yield this.requestDataModel(t,this.data,{props:d,groupByFn:t=>{var e;const i=qh(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const n=Vt(this.properties.binCount)?this.calculateNiceBins(i,this.properties.binCount):null!=(e=this.properties.bins)?e:this.deriveBins(i),s=n.length;return this.calculatedBins=[...n],t=>{const e=t.keys[0];for(let i=0;i<s;i++){const t=n[i];if(e>=t[0]&&e<t[1])return t;if(i===s-1&&e<=t[1])return t}return[]}}}),this.animationState.transition("updateData")}))}getSeriesDomain(t){var e,i,n,s;const{processedData:a,dataModel:o}=this;if(!a||!o||!this.calculatedBins.length)return[];const r=o.getDomain(this,"groupAgg","aggregate",a),l=null==(e=this.calculatedBins)?void 0:e[0][0],h=null==(s=this.calculatedBins)?void 0:s[(null!=(n=null==(i=this.calculatedBins)?void 0:i.length)?n:0)-1][1];return qh("x"===t?[l,h]:r)}createNodeData(){return S(this,null,(function*(){var t;const{id:e,axes:i,processedData:n,ctx:{callbackCache:s}}=this,a=i.x,o=i.y;if(!a||!o)return;const{scale:r}=a,{scale:l}=o,{xKey:h,yKey:c,xName:d,yName:u,fill:p,stroke:g,strokeWidth:m,cornerRadius:f}=this.properties,{formatter:y=t=>String(t.value),fontStyle:v,fontWeight:x,fontSize:b,fontFamily:S,color:k}=this.properties.label,w=[],M={itemId:null!=(t=this.properties.yKey)?t:this.id,nodeData:w,labelData:w,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};return this.visible&&n&&"grouped"===n.type?(n.data.forEach((t=>{var i;const{aggValues:[[n,a]]=[[0,0]],datum:M,datum:{length:D},keys:C,keys:[L,R]}=t,I=r.convert(L),A=r.convert(R),T=n+a,N=l.convert(0),E=l.convert(T),O=Math.abs(A-I),P=Math.abs(E-N),B=Math.min(I,A),F=Math.min(N,E);let _;0!==T&&(_={text:null!=(i=s.call(y,{value:T,datum:M,seriesId:e,xKey:h,yKey:c,xName:d,yName:u}))?i:String(T),fontStyle:v,fontWeight:x,fontSize:b,fontFamily:S,fill:k,x:B+O/2,y:F+P/2});const G={x:B+O/2,y:F+P/2},z=o.isReversed();w.push({series:this,datum:M,aggregatedValue:T,frequency:D,domain:C,yKey:c,xKey:h,x:B,y:F,xValue:I,yValue:E,width:O,height:P,midPoint:G,fill:p,stroke:g,cornerRadius:f,topLeftCornerRadius:!z,topRightCornerRadius:!z,bottomRightCornerRadius:z,bottomLeftCornerRadius:z,opacity:1,strokeWidth:m,label:_})})),w.sort(((t,e)=>t.x-e.x)),M):M}))}nodeFactory(){return new du}updateDatumSelection(t){return S(this,null,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,(t=>{t.tag=0,t.crisp=!0}),(t=>t.domain.join("_")))}))}updateDatumNodes(t){return S(this,null,(function*(){const{isHighlight:e}=t,{fillOpacity:i,strokeOpacity:n,lineDash:s,lineDashOffset:a,shadow:o,highlightStyle:{item:{fill:r,fillOpacity:l=i,stroke:h,strokeWidth:c}}}=this.properties;t.datumSelection.each(((t,d,u)=>{var p,g;const{cornerRadius:m,topLeftCornerRadius:f,topRightCornerRadius:y,bottomRightCornerRadius:v,bottomLeftCornerRadius:x}=d,b=e&&void 0!==c?c:d.strokeWidth,S=e?l:i;t.fill=null!=(p=e?r:void 0)?p:d.fill,t.stroke=null!=(g=e?h:void 0)?g:d.stroke,t.fillOpacity=S,t.strokeOpacity=n,t.strokeWidth=b,t.lineDash=s,t.lineDashOffset=a,t.topLeftCornerRadius=f?m:0,t.topRightCornerRadius=y?m:0,t.bottomRightCornerRadius=v?m:0,t.bottomLeftCornerRadius=x?m:0,t.fillShadow=o,t.zIndex=e?Qc.highlightedZIndex:u,t.visible=d.height>0}))}))}updateLabelSelection(t){return S(this,null,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.tag=1,t.pointerEvents=1,t.textAlign="center",t.textBaseline="middle"}))}))}updateLabelNodes(t){return S(this,null,(function*(){const e=this.isLabelEnabled();t.labelSelection.each(((t,i)=>{const n=i.label;n&&e?(t.text=n.text,t.x=n.x,t.y=n.y,t.fontStyle=n.fontStyle,t.fontWeight=n.fontWeight,t.fontSize=n.fontSize,t.fontFamily=n.fontFamily,t.fill=n.fill,t.visible=!0):t.visible=!1}))}))}initQuadTree(t){Np(t,Tp(this.contentGroup.children[0]))}pickNodeClosestDatum(t){return Ep(this,t)}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return el;const{xKey:n,yKey:s,xName:a,yName:o,fill:r,aggregation:l,tooltip:h}=this.properties,{aggregatedValue:c,frequency:d,domain:[u,p],itemId:g}=t,m="".concat(_u(null!=a?a:n),": ").concat(e.formatDatum(u)," - ").concat(e.formatDatum(p));let f=s?"<b>".concat(_u(null!=o?o:s)," (").concat(l,")</b>: ").concat(i.formatDatum(c),"<br>"):"";f+="<b>Frequency</b>: ".concat(d);const y={title:m,backgroundColor:r,content:f};return h.toTooltipHtml(y,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},itemId:g,xKey:n,xName:a,yKey:s,yName:o,color:r,title:m,seriesId:this.id})}getLegendData(t){var e,i;if(!(null==(e=this.data)?void 0:e.length)||"category"!==t)return[];const{xKey:n,yName:s,fill:a,fillOpacity:o,stroke:r,strokeWidth:l,strokeOpacity:h,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:c,label:{text:null!=(i=null!=s?s:n)?i:"Frequency"},marker:{fill:null!=a?a:"rgba(0, 0, 0, 0)",stroke:null!=r?r:"rgba(0, 0, 0, 0)",fillOpacity:o,strokeOpacity:h,strokeWidth:l}}]}animateEmptyUpdateReady(t){let{datumSelection:e,labelSelection:i}=t;const n=Yp(Vp(!0,this.axes,"normal"));Ts(this.id,"datums",this.ctx.animationManager,[e],n),Gu(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i;const n=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff,s=Yp(Vp(!0,this.axes,"normal"));Ts(this.id,"datums",this.ctx.animationManager,[t.datumSelection],s,((t,e)=>_c(e.domain)),n),Gu(this,"labels",this.ctx.animationManager,t.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds(t){let{datumIndex:e,seriesRect:i}=t;var n;return Up(null==(n=this.contextNodeData)?void 0:n.nodeData[e],this.contentGroup,i)}};og.className="HistogramSeries",og.type="histogram";var rg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:og,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Ve,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:Ye,color:Xe},shadow:{enabled:!1,color:$e,xOffset:3,yOffset:3,blur:5}}},paletteFactory:t=>{let{takeColors:e}=t;const{fills:[i],strokes:[n]}=e(1);return{fill:i,stroke:n}}},lg=class extends Ud{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new Hu,this.label=new zo,this.tooltip=new Xu,this.connectMissingData=!1}};x([Xs(ea)],lg.prototype,"xKey",2),x([Xs(ea)],lg.prototype,"yKey",2),x([Xs(ea,{optional:!0})],lg.prototype,"xName",2),x([Xs(ea,{optional:!0})],lg.prototype,"yName",2),x([Xs(ea,{optional:!0})],lg.prototype,"title",2),x([Xs(fa)],lg.prototype,"stroke",2),x([Xs(sa)],lg.prototype,"strokeWidth",2),x([Xs(aa)],lg.prototype,"strokeOpacity",2),x([Xs(Da)],lg.prototype,"lineDash",2),x([Xs(sa)],lg.prototype,"lineDashOffset",2),x([Xs(Js)],lg.prototype,"marker",2),x([Xs(Js)],lg.prototype,"label",2),x([Xs(Js)],lg.prototype,"tooltip",2),x([Xs($s)],lg.prototype,"connectMissingData",2);var hg=class extends Xd{constructor(t){super({moduleCtx:t,directionKeys:Kd,directionNames:Yd,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:dp({getOpacity:()=>this.getOpacity()}),label:Wu,marker:(t,e)=>m(m({},{opacity:1,scalingX:1,scalingY:1}),$u(0,e))}}),this.properties=new lg}processData(t){return S(this,null,(function*(){var e,i;if(!this.properties.isValid()||null==this.data)return;const{xKey:n,yKey:s}=this.properties,a=!this.ctx.animationManager.isSkipped(),o=null==(e=this.axes.x)?void 0:e.scale,r=null==(i=this.axes.y)?void 0:i.scale,{isContinuousX:l,xScaleType:h,yScaleType:c}=this.getScaleInformation({xScale:o,yScale:r}),d=[];l||d.push(Yc(n,h,{id:"xKey"})),a&&(d.push(Ec(l?["xValue"]:void 0)),this.processedData&&d.push(Fc(this.processedData))),d.push(Hc(n,h,{id:"xValue"}),Hc(s,c,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,this.data,{props:d}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:n}=this;if(!n||!i)return[];const s=e.x,a=e.y,o=i.resolveProcessedDataDefById(this,"xValue");if("x"===t){const t=i.getDomain(this,"xValue","value",n);return"value"===(null==o?void 0:o.def.type)&&"category"===o.def.valueType?t:qh(ln(t),s)}return qh(i.getDomain(this,"yValue","value",n),a)}createNodeData(){return S(this,null,(function*(){var t,e,i;const{processedData:n,dataModel:s,axes:a}=this,o=a.x,r=a.y;if(!n||!s||!o||!r)return;const{xKey:l,yKey:h,xName:c,yName:d,marker:u,label:p,connectMissingData:g,legendItemName:m}=this.properties,f=o.scale,y=r.scale,v=(null!=(t=f.bandwidth)?t:0)/2,x=(null!=(e=y.bandwidth)?e:0)/2,b=[],S=u.enabled?u.size:0,k=s.resolveProcessedDataIndexById(this,"xValue"),w=s.resolveProcessedDataIndexById(this,"yValue");let M,D=!0;for(let C=0;C<n.data.length;C++){const{datum:t,values:e}=null!=M?M:n.data[C],s=e[k],a=e[w];if(void 0===a)D=!g;else{const e=f.convert(s)+v;if(isNaN(e)){D=!g,M=void 0;continue}M=void 0===(null==(i=n.data[C+1])?void 0:i.values[w])?void 0:n.data[C+1];const o=y.convert(a)+x,r=this.getLabelText(p,{value:a,datum:t,xKey:l,yKey:h,xName:c,yName:d,legendItemName:m},(t=>Kt(t)?t.toFixed(2):String(t)));b.push({series:this,datum:t,yKey:h,xKey:l,point:{x:e,y:o,moveTo:D,size:S},midPoint:{x:e,y:o},yValue:a,xValue:s,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:r?{text:r,fontStyle:p.fontStyle,fontWeight:p.fontWeight,fontSize:p.fontSize,fontFamily:p.fontFamily,textAlign:"center",textBaseline:"bottom",fill:p.color}:void 0}),D=!1}}return{itemId:h,nodeData:b,labelData:b,scales:this.calculateScaling(),visible:this.visible}}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker;return new(Bd(t))}updatePathNodes(t){return S(this,null,(function*(){const{paths:[e],opacity:i,visible:n,animationEnabled:s}=t;e.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),s||(e.visible=n),up(this,e)}))}updateMarkerSelection(t){return S(this,null,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:n,enabled:s}=this.properties.marker;return e=n&&s?e:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,(t=>_c(t.xValue)))}))}updateMarkerNodes(t){return S(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n,yKey:s,stroke:a,strokeWidth:o,strokeOpacity:r,marker:l,highlightStyle:h}=this.properties,c=Zt(i&&h.item,l.getStyle(),{stroke:a,strokeWidth:o,strokeOpacity:r}),d=this.ctx.animationManager.isSkipped();e.each(((t,e)=>{this.updateMarkerStyle(t,l,{datum:e,highlighted:i,xKey:n,yKey:s},c,{applyTranslation:d})})),i||l.markClean()}))}updateLabelSelection(t){return S(this,null,(function*(){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])}))}updateLabelNodes(t){return S(this,null,(function*(){const{enabled:e,fontStyle:i,fontWeight:n,fontSize:s,fontFamily:a,color:o}=this.properties.label;t.labelSelection.each(((t,r)=>{const{point:l,label:h}=r;r&&h&&e?(t.fontStyle=i,t.fontWeight=n,t.fontSize=s,t.fontFamily=a,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=o,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){var e;const i=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!i||!n)return el;const{xKey:s,yKey:a,xName:o,yName:r,strokeWidth:l,marker:h,tooltip:c}=this.properties,{datum:d,xValue:u,yValue:p,itemId:g}=t,f=i.formatDatum(u),y=n.formatDatum(p),v=_u(null!=(e=this.properties.title)?e:r),x=_u(f+": "+y),b=Zt({fill:h.stroke},h.getStyle(),{strokeWidth:l}),{fill:S}=this.getMarkerStyle(h,{datum:t,xKey:s,yKey:a,highlighted:!1},b);return c.toTooltipHtml({title:v,content:x,backgroundColor:S},m({datum:d,itemId:g,xKey:s,xName:o,yKey:a,yName:r,title:v,color:S,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,n,s,a,o,r,l,h,c;if(!(null==(e=this.data)?void 0:e.length)||!this.properties.isValid()||"category"!==t)return[];const{yKey:d,yName:u,stroke:p,strokeOpacity:g,strokeWidth:m,lineDash:f,title:y,marker:v,visible:x,legendItemName:b}=this.properties,S="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:d,legendItemName:b,seriesId:this.id,enabled:x,label:{text:null!=(n=null!=(i=null!=b?b:y)?i:u)?n:d},marker:{shape:v.shape,fill:null!=(s=v.fill)?s:S,stroke:null!=(o=null!=(a=v.stroke)?a:p)?o:S,fillOpacity:null!=(r=v.fillOpacity)?r:1,strokeOpacity:null!=(h=null!=(l=v.strokeOpacity)?l:g)?h:1,strokeWidth:null!=(c=v.strokeWidth)?c:0,enabled:v.enabled},line:{stroke:null!=p?p:S,strokeOpacity:g,strokeWidth:m,lineDash:f}}]}updatePaths(t){return S(this,null,(function*(){this.updateLinePaths(t.paths,t.contextData)}))}updateLinePaths(t,e){const{nodeData:i}=e,[n]=t,{path:s}=n;s.clear(!0);for(const a of i)a.point.moveTo?s.moveTo(a.point.x,a.point.y):s.lineTo(a.point.x,a.point.y);n.checkPathDirty()}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:n,contextData:s,paths:a}=t,{animationManager:o}=this.ctx;this.updateLinePaths(a,s),lp(this,o,...a),fr([e],$u),Ju(this,o,e),Gu(this,"labels",o,i),Gu(this,"annotations",o,...n)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:n}=this.ctx,{markerSelection:s,labelSelection:a,annotationSelections:o,contextData:r,paths:l,previousContextData:h}=t,[c]=l;super.resetAllAnimation(t);const d=()=>{this.updateLinePaths(l,r)};if(null==r||null==h)return d(),Zu(this,n,"added",s),hp(this,"path_properties",n,"add",c),Gu(this,"labels",n,a),void Gu(this,"annotations",n,...o);const u=Mp(r,h,null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff);if(void 0===u)return n.skipCurrentBatch(),void d();"no-op"!==u.status&&(Zu(this,n,void 0,s),Ts(this.id,"path_properties",n,[c],u.pathProperties),Bu(this.id,"path_update",n,[c],u.path),u.hasMotion&&(Gu(this,"labels",n,a),Gu(this,"annotations",n,...o)))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new Mo}getFormattedMarkerStyle(t){const{xKey:e,yKey:i}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,highlighted:!0})}computeFocusBounds(t){return ep(this,t)}};hg.className="LineSeries",hg.type="line";var cg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:hg,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{__extends__:Ve,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:Ke,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:Ye,color:He}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{const{marker:e}=Pu(t);return{stroke:e.fill,marker:e}}},dg=class extends zo{constructor(){super(...arguments),this.placement="top"}};x([Xs(Ba)],dg.prototype,"placement",2);var ug=class extends Ud{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new Hu,this.label=new dg,this.tooltip=new Xu}};x([Xs(ea)],ug.prototype,"xKey",2),x([Xs(ea)],ug.prototype,"yKey",2),x([Xs(ea,{optional:!0})],ug.prototype,"labelKey",2),x([Xs(ea,{optional:!0})],ug.prototype,"colorKey",2),x([Xs(ea,{optional:!0})],ug.prototype,"xName",2),x([Xs(ea,{optional:!0})],ug.prototype,"yName",2),x([Xs(ea,{optional:!0})],ug.prototype,"labelName",2),x([Xs(ea,{optional:!0})],ug.prototype,"colorName",2),x([Xs(xa,{optional:!0})],ug.prototype,"colorDomain",2),x([Xs(ya)],ug.prototype,"colorRange",2),x([Xs(ea,{optional:!0})],ug.prototype,"title",2),x([Xs(Js)],ug.prototype,"marker",2),x([Xs(Js)],ug.prototype,"label",2),x([Xs(Js)],ug.prototype,"tooltip",2);var pg=class extends Xd{constructor(t){super({moduleCtx:t,directionKeys:Kd,directionNames:Yd,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Qu,label:Wu}}),this.properties=new ug,this.colorScale=new Qp}processData(t){return S(this,null,(function*(){var e,i,n;if(!this.properties.isValid()||null==this.data||!this.visible)return;const s=null==(e=this.axes.x)?void 0:e.scale,a=null==(i=this.axes.y)?void 0:i.scale,{xScaleType:o,yScaleType:r}=this.getScaleInformation({xScale:s,yScale:a}),l=this.colorScale.type,{xKey:h,yKey:c,labelKey:d,colorKey:u,colorDomain:p,colorRange:g}=this.properties,{dataModel:m,processedData:f}=yield this.requestDataModel(t,this.data,{props:[Yc(h,o,{id:"xKey-raw"}),Yc(c,r,{id:"yKey-raw"}),...d?[Yc(d,"band",{id:"labelKey-raw"})]:[],Hc(h,o,{id:"xValue"}),Hc(c,r,{id:"yValue"}),...u?[Hc(u,l,{id:"colorValue"})]:[],...d?[Hc(d,"band",{id:"labelValue"})]:[]]});if(u){const t=m.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=null!=(n=null!=p?p:f.domain.values[t])?n:[],this.colorScale.range=g,this.colorScale.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const n="x"===t?"xValue":"yValue",s=e.resolveProcessedDataDefById(this,n),a=e.getDomain(this,n,"value",i);if("value"===(null==s?void 0:s.def.type)&&"category"===(null==s?void 0:s.def.valueType))return a;const o=this.axes[t];return qh(ln(a),o)}createNodeData(){return S(this,null,(function*(){var t,e,i;const{axes:n,dataModel:s,processedData:a,colorScale:o}=this,{xKey:r,yKey:l,labelKey:h,colorKey:c,xName:d,yName:u,labelName:p,marker:g,label:f,visible:y}=this.properties,{placement:v}=f,x=Bd(g.shape),b=n.x,S=n.y;if(!(s&&a&&y&&b&&S))return;const k=s.resolveProcessedDataIndexById(this,"xValue"),w=s.resolveProcessedDataIndexById(this,"yValue"),M=c?s.resolveProcessedDataIndexById(this,"colorValue"):-1,D=h?s.resolveProcessedDataIndexById(this,"labelValue"):-1,C=b.scale,L=S.scale,R=(null!=(t=C.bandwidth)?t:0)/2,I=(null!=(e=L.bandwidth)?e:0)/2,A=[],T=f.getFont();for(const{values:N,datum:E}of null!=(i=a.data)?i:[]){const t=N[k],e=N[w],i=C.convert(t)+R,n=L.convert(e)+I,s=this.getLabelText(f,{value:h?N[D]:e,datum:E,xKey:r,yKey:l,labelKey:h,xName:d,yName:u,labelName:p}),a=Fo.getTextSize(s,T),y=c?o.convert(N[M]):void 0;A.push({series:this,itemId:l,yKey:l,xKey:r,datum:E,xValue:t,yValue:e,capDefaults:{lengthRatioMultiplier:g.getDiameter(),lengthMax:1/0},point:{x:i,y:n,size:g.size},midPoint:{x:i,y:n},fill:y,label:m({text:s},a),marker:x,placement:v})}return{itemId:l,nodeData:A,labelData:A,scales:this.calculateScaling(),visible:this.visible}}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t,e;return null!=(e=null==(t=this.contextNodeData)?void 0:t.labelData)?e:[]}markerFactory(){const{shape:t}=this.properties.marker;return new(Bd(t))}updateMarkerSelection(t){return S(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}))}updateMarkerNodes(t){return S(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:n,yKey:s,labelKey:a,marker:o,highlightStyle:r}=this.properties,l=Zt(i&&r.item,o.getStyle());e.each(((t,e)=>{this.updateMarkerStyle(t,o,{datum:e,highlighted:i,xKey:n,yKey:s,labelKey:a},l)})),i||o.markClean()}))}updateLabelSelection(t){return S(this,null,(function*(){var e,i;const n=this.isLabelEnabled()&&null!=(i=null==(e=this.chart)?void 0:e.placeLabels().get(this))?i:[];return t.labelSelection.update(n.map((t=>{let{datum:e,x:i,y:n}=t;return f(m({},e),{point:{x:i,y:n,size:e.point.size},placement:"top"})})),(t=>{t.pointerEvents=1}))}))}updateLabelNodes(t){return S(this,null,(function*(){const{label:e}=this.properties;t.labelSelection.each(((t,i)=>{var n,s,a,o;t.text=i.label.text,t.fill=e.color,t.x=null!=(s=null==(n=i.point)?void 0:n.x)?s:0,t.y=null!=(o=null==(a=i.point)?void 0:a.y)?o:0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"}))}))}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return el;const{xKey:n,yKey:s,labelKey:a,xName:o,yName:r,labelName:l,title:h=r,marker:c,tooltip:d}=this.properties,{datum:u,xValue:p,yValue:g,label:f,itemId:y}=t,v=Zt({fill:t.fill,strokeWidth:this.getStrokeWidth(c.strokeWidth)},c.getStyle()),{fill:x="gray"}=this.getMarkerStyle(c,{datum:t,highlighted:!1,xKey:n,yKey:s,labelKey:a},v),b=_u(e.formatDatum(p)),S=_u(i.formatDatum(g));let k="<b>".concat(_u(null!=o?o:n),"</b>: ").concat(b,"<br><b>").concat(_u(null!=r?r:s),"</b>: ").concat(S);return a&&(k="<b>".concat(_u(null!=l?l:a),"</b>: ").concat(_u(f.text),"<br>")+k),d.toTooltipHtml({title:h,content:k,backgroundColor:x},m({datum:u,itemId:y,xKey:n,xName:o,yKey:s,yName:r,labelKey:a,labelName:l,title:h,color:x,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,n,s,a,o;const{yKey:r,yName:l,title:h,marker:c,visible:d}=this.properties,{fill:u,stroke:p,fillOpacity:g,strokeOpacity:m,strokeWidth:f}=c;return(null==(e=this.data)?void 0:e.length)&&this.properties.isValid()&&"category"===t?[{legendType:"category",id:this.id,itemId:r,seriesId:this.id,enabled:d,label:{text:null!=(i=null!=h?h:l)?i:r},marker:{shape:c.shape,fill:null!=(s=null!=(n=c.fill)?n:u)?s:"rgba(0, 0, 0, 0)",stroke:null!=(o=null!=(a=c.stroke)?a:p)?o:"rgba(0, 0, 0, 0)",fillOpacity:null!=g?g:1,strokeOpacity:null!=m?m:1,strokeWidth:null!=f?f:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelection:e,labelSelection:i,annotationSelections:n}=t;qu(this,this.ctx.animationManager,e),Gu(this,"labels",this.ctx.animationManager,i),Gu(this,"annotations",this.ctx.animationManager,...n)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Mo}getFormattedMarkerStyle(t){const{xKey:e,yKey:i,labelKey:n}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:t,xKey:e,yKey:i,labelKey:n,highlighted:!0})}computeFocusBounds(t){return ep(this,t)}};pg.className="ScatterSeries",pg.type="scatter";var gg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:pg,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Ve,tooltip:{position:{type:"node"}},marker:{__extends__:Ke,fillOpacity:.8},label:{enabled:!1,fontSize:12,fontFamily:Ye,color:He}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:Pu},mg=class t{constructor(t,e,i,n){this.startAngle=t,this.endAngle=e,this.innerRadius=i,this.outerRadius=n}clone(){const{startAngle:e,endAngle:i,innerRadius:n,outerRadius:s}=this;return new t(e,i,n,s)}[Gn](e,i){return new t(this.startAngle*(1-i)+e.startAngle*i,this.endAngle*(1-i)+e.endAngle*i,this.innerRadius*(1-i)+e.innerRadius*i,this.outerRadius*(1-i)+e.outerRadius*i)}};function fg(t,e,i){const n=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:s,outerRadius:a}=i;if(i.startAngle===i.endAngle||n<Math.min(s,a)||n>Math.max(s,a))return!1;const o=Fs(i.startAngle),r=Fs(i.endAngle),l=Math.atan2(e,t);return o<r?l<=r&&l>=o:l<=r&&l>=-Math.PI||l>=o&&l<=Math.PI}function yg(t,e){const{startAngle:i,endAngle:n,innerRadius:s,outerRadius:a}=e,o={x:a*Math.cos(i),y:a*Math.sin(i)},r={x:a*Math.cos(n),y:a*Math.sin(n)},l=0===s?{x:0,y:0}:{x:s*Math.cos(i),y:s*Math.sin(i)},h=0===s?{x:0,y:0}:{x:s*Math.cos(n),y:s*Math.sin(n)};return ld(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,l.x,l.y)||ld(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,h.x,h.y)||dd(0,0,a,i,n,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function vg(t,e){const i={x:t.x,y:t.y},n={x:t.x+t.width,y:t.y},s={x:t.x,y:t.y+t.height},a={x:t.x+t.width,y:t.y+t.height};return yg({start:i,end:n},e)||yg({start:s,end:a},e)}function xg(t,e,i,n){if(0===i&&0===n)return 0;if(Math.asin(Math.abs(1*i)/(t+1*i))+Math.asin(Math.abs(1*n)/(t+1*n))-e<0)return 1;let s=0,a=1;for(let o=0;o<8;o+=1){const o=(s+a)/2;Math.asin(Math.abs(o*i)/(t+o*i))+Math.asin(Math.abs(o*n)/(t+o*n))-e<0?s=o:a=o}return s}function bg(t,e){return Ws(t,e)<1e-6?e:Ps(t-e)+e}function Sg(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Math.abs(e-t)>=2*Math.PI?2*Math.PI:Ps(e-t);return{startAngle:t=bg(t,i),endAngle:e=t+n}}function kg(t,e,i,n,s,a){const o=Math.sin(a),r=Math.cos(a),l=p(t,2)+p(e,2)-p(i,2);let h=NaN,c=NaN,d=NaN,u=NaN;if(r>.5){const i=o/r,n=1+p(i,2),s=-2*(t+e*i),a=p(s,2)-4*n*l;if(a<0)return;const g=(-s+Math.sqrt(a))/(2*n),m=(-s-Math.sqrt(a))/(2*n);h=g,c=g*i,d=m,u=m*i}else{const i=r/o,n=1+p(i,2),s=-2*(e+t*i),a=p(s,2)-4*n*l;if(a<0)return;const g=(-s+Math.sqrt(a))/(2*n),m=(-s-Math.sqrt(a))/(2*n);h=g*i,c=g,d=m*i,u=m}const g=d*r+u*o,m=h*r+c*o>0?bg(Math.atan2(c-e,h-t),n):NaN,f=g>0?bg(Math.atan2(u-e,d-t),n):NaN;return m>=n&&m<=s?m:f>=n&&f<=s?f:void 0}function wg(t,e,i,n,s,a){const o=Math.hypot(t,e),r=o-(p(o,2)-p(i,2)+p(a,2))/(2*o),l=Math.atan2(e,t),h=Math.acos(-r/i),c=bg(l+h,n),d=bg(l-h,n);return c>=n&&c<=s?c:d>=n&&d<=s?d:void 0}var Mg=class{constructor(t,e,i,n,s){this.cx=t,this.cy=e,this.r=i,this.a0=n,this.a1=s,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(t){return{x:this.cx+this.r*Math.cos(t),y:this.cy+this.r*Math.sin(t)}}clipStart(t){null==t||!this.isValid()||t<this.a0||(this.a0=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(t){null==t||!this.isValid()||t>this.a1||(this.a1=t,(Number.isNaN(t)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},Dg=class extends gd{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(t){this.concentricEdgeInset=t,this.radialEdgeInset=t}set cornerRadius(t){this.startOuterCornerRadius=t,this.endOuterCornerRadius=t,this.startInnerCornerRadius=t,this.endInnerCornerRadius=t}computeBBox(){const t=this.outerRadius;return new ts(this.centerX-t,this.centerY-t,2*t,2*t)}normalizedRadii(){const{concentricEdgeInset:t}=this;return{innerRadius:Math.max(Math.min(this.innerRadius,this.outerRadius)+t,0),outerRadius:Math.max(Math.max(this.innerRadius,this.outerRadius)-t,0)}}normalizedClipSector(){const{clipSector:t}=this;if(null==t)return;const{startAngle:e,endAngle:i}=Sg(this.startAngle,this.endAngle),{innerRadius:n,outerRadius:s}=this.normalizedRadii(),a=Sg(t.startAngle,t.endAngle,e);return new mg(Math.max(e,a.startAngle),Math.min(i,a.endAngle),Math.max(n,t.innerRadius),Math.min(s,t.outerRadius))}getAngleOffset(t){return t>0?this.radialEdgeInset/t:0}arc(t,e,i,n,s,a,o,r){if(t<=0)return;const{startAngle:l,endAngle:h}=Sg(this.startAngle,this.endAngle),{innerRadius:c,outerRadius:d}=this.normalizedRadii(),u=this.normalizedClipSector();if(r&&c<=0)return;const p=this.getAngleOffset(c),g=this.getAngleOffset(d),m=r?this.getAngleOffset(c+t):this.getAngleOffset(d-t),f=o?l+m+e:h-m-e,y=r?c+t:d-t,v=y*Math.cos(f),x=y*Math.sin(f);if(null!=u){const t=1e-6;if(!o&&!(f>=l-t&&f<=u.endAngle-t))return;if(o&&!(f>=u.startAngle+t&&f<=h-t))return;if(r&&!(y>=u.innerRadius-t))return;if(!r&&!(y<=u.outerRadius+t))return}const b=new Mg(v,x,t,i,n);if(null!=u){let e,h;if(r?(b.clipStart(kg(v,x,t,i,n,u.endAngle-p)),b.clipEnd(kg(v,x,t,i,n,u.startAngle+p))):(b.clipStart(kg(v,x,t,i,n,u.startAngle+g)),b.clipEnd(kg(v,x,t,i,n,u.endAngle-g))),o?(e=wg(v,x,t,i,n,u.innerRadius),h=wg(v,x,t,i,n,u.outerRadius)):(e=wg(v,x,t,i,n,u.outerRadius),h=wg(v,x,t,i,n,u.innerRadius)),b.clipStart(e),b.clipEnd(h),null!=e){const{x:t,y:i}=b.pointAt(e),n=bg(Math.atan2(i,t),l);o?null==a||a.clipStart(n):s.clipEnd(n)}if(null!=h){const{x:t,y:e}=b.pointAt(h),i=bg(Math.atan2(e,t),l);o?s.clipStart(i):null==a||a.clipEnd(i)}}if(null!=u){const{x:t,y:e}=b.pointAt((b.a0+b.a1)/2);if(!fg(t,e,u))return}const{x:S,y:k}=b.pointAt(o===r?b.a0:b.a1),w=bg(Math.atan2(k,S),l),M=r?a:s;return o?null==M||M.clipStart(w):null==M||M.clipEnd(w),b}updatePath(){var t,e,i,n,s;const a=1e-6,{path:o,centerX:r,centerY:l,concentricEdgeInset:h,radialEdgeInset:c}=this;let{startOuterCornerRadius:d,endOuterCornerRadius:u,startInnerCornerRadius:p,endInnerCornerRadius:g}=this;const{startAngle:m,endAngle:f}=Sg(this.startAngle,this.endAngle),{innerRadius:y,outerRadius:v}=this.normalizedRadii(),x=this.normalizedClipSector(),b=f-m,S=b>=2*Math.PI-a;if(o.clear(),(null!=(t=null==x?void 0:x.startAngle)?t:m)===(null!=(e=null==x?void 0:x.endAngle)?e:f))return;if(S&&null==this.clipSector&&0===d&&0===u&&0===p&&0===g)return o.moveTo(r+v*Math.cos(m),l+v*Math.sin(m)),o.arc(r,l,v,m,f),y>h&&(o.moveTo(r+y*Math.cos(f),l+y*Math.sin(f)),o.arc(r,l,y,f,m,!0)),void o.closePath();const k=this.getAngleOffset(y),w=this.getAngleOffset(v);if(b<2*w)return;const M=(null!=(i=null==x?void 0:x.innerRadius)?i:y)>h,D=y<h||b<2*k,C=v-y,L=Math.max(d,p,u,g),R=L>0?Math.min(C/L,1):1;d*=R,u*=R,p*=R,g*=R;const I=xg(v,b-2*w,-d,-u);if(d*=I,u*=I,!D&&M){const t=xg(y,b-2*k,p,g);p*=t,g*=t}else p=0,g=0;const A=Math.max(d+p,u+g),T=A>0?Math.min(C/A,1):1;d*=T,u*=T,p*=T,g*=T;let N=0,E=0;const O=d/(v-d),P=u/(v-u);if(O>=0&&O<.999999)N=Math.asin(O);else{N=b/2;const t=v/(1/Math.sin(N)+1);d=Math.min(t,d)}if(P>=0&&P<.999999)E=Math.asin(P);else{E=b/2;const t=v/(1/Math.sin(E)+1);u=Math.min(t,u)}const B=Math.asin(p/(y+p)),F=Math.asin(g/(y+g)),_=null!=(n=null==x?void 0:x.outerRadius)?n:v,G=this.getAngleOffset(_),z=new Mg(0,0,_,m+G,f-G),W=null!=(s=null==x?void 0:x.innerRadius)?s:y,V=this.getAngleOffset(W),K=M?new Mg(0,0,W,m+V,f-V):void 0;null!=x&&(z.clipStart(x.startAngle),z.clipEnd(x.endAngle),null==K||K.clipStart(x.startAngle),null==K||K.clipEnd(x.endAngle));const Y=this.arc(d,N,m-.5*Math.PI,m+N,z,K,!0,!1),H=this.arc(u,E,f-E,f+.5*Math.PI,z,K,!1,!1),U=this.arc(g,F,f+.5*Math.PI,f+Math.PI-F,z,K,!1,!0),X=this.arc(p,B,m+Math.PI+B,m+1.5*Math.PI,z,K,!0,!0);if(D){const t=b<.5*Math.PI?c*(1+Math.cos(b))/Math.sin(b):NaN;let e;e=t>0&&t<v?Math.max(Math.hypot(c,t),y):y;const i=m+.5*b;o.moveTo(r+e*Math.cos(i),l+e*Math.sin(i))}else if(!0===(null==X?void 0:X.isValid())){const{x:t,y:e}=X.pointAt(X.a1);o.moveTo(r+t,l+e)}else if(!0===(null==K?void 0:K.isValid())){const{x:t,y:e}=K.pointAt(K.a0);o.moveTo(r+t,l+e)}else{const t=m+b/2,e=y*Math.cos(t),i=y*Math.sin(t);o.moveTo(r+e,l+i)}if(!0===(null==Y?void 0:Y.isValid())){const{cx:t,cy:e,r:i,a0:n,a1:s}=Y;o.arc(r+t,l+e,i,n,s)}if(z.isValid()){const{r:t,a0:e,a1:i}=z;o.arc(r,l,t,e,i)}if(!0===(null==H?void 0:H.isValid())){const{cx:t,cy:e,r:i,a0:n,a1:s}=H;o.arc(r+t,l+e,i,n,s)}if(!D){if(!0===(null==U?void 0:U.isValid())){const{cx:t,cy:e,r:i,a0:n,a1:s}=U;o.arc(r+t,l+e,i,n,s)}if(!0===(null==K?void 0:K.isValid())){const{r:t,a0:e,a1:i}=K;o.arc(r,l,t,i,e,!0)}if(!0===(null==X?void 0:X.isValid())){const{cx:t,cy:e,r:i,a0:n,a1:s}=X;o.arc(r+t,l+e,i,n,s)}}o.closePath()}isPointInPath(t,e){var i;const n=this.transformPoint(t,e),{startAngle:s,endAngle:a,innerRadius:o,outerRadius:r}=null!=(i=this.clipSector)?i:this;return fg(n.x,n.y,{startAngle:s,endAngle:a,innerRadius:Math.min(o,r),outerRadius:Math.max(o,r)})}};Dg.className="Sector",x([pd()],Dg.prototype,"centerX",2),x([pd()],Dg.prototype,"centerY",2),x([pd()],Dg.prototype,"innerRadius",2),x([pd()],Dg.prototype,"outerRadius",2),x([pd()],Dg.prototype,"startAngle",2),x([pd()],Dg.prototype,"endAngle",2),x([pd()],Dg.prototype,"clipSector",2),x([pd()],Dg.prototype,"concentricEdgeInset",2),x([pd()],Dg.prototype,"radialEdgeInset",2),x([pd()],Dg.prototype,"startOuterCornerRadius",2),x([pd()],Dg.prototype,"endOuterCornerRadius",2),x([pd()],Dg.prototype,"startInnerCornerRadius",2),x([pd()],Dg.prototype,"endInnerCornerRadius",2);var Cg=class extends ol{constructor(){super(...arguments),this.showInLegend=!1}};x([Xs($s)],Cg.prototype,"showInLegend",2);var Lg=class extends zo{constructor(){super(...arguments),this.margin=2}set(t,e){return super.set(t)}};x([Xs(ea)],Lg.prototype,"text",2),x([Xs(ia)],Lg.prototype,"margin",2);var Rg=class extends fe{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};x([Xs(fa)],Rg.prototype,"fill",2),x([Xs(aa)],Rg.prototype,"fillOpacity",2);var Ig=class extends zo{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};x([Xs(sa)],Ig.prototype,"offset",2),x([Xs(oa)],Ig.prototype,"minAngle",2),x([Xs(sa)],Ig.prototype,"minSpacing",2),x([Xs(sa)],Ig.prototype,"maxCollisionOffset",2),x([Xs($s)],Ig.prototype,"avoidCollisions",2);var Ag=class extends zo{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};x([Xs(ia)],Ag.prototype,"positionOffset",2),x([Xs(aa)],Ag.prototype,"positionRatio",2);var Tg=class extends fe{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};x([Xs(ya,{optional:!0})],Tg.prototype,"colors",2),x([Xs(sa)],Tg.prototype,"length",2),x([Xs(sa)],Tg.prototype,"strokeWidth",2);var Ng=class extends Vd{constructor(){super(...arguments),this.fills=Object.values(Pe),this.strokes=Object.values(Be),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new ye(Lg),this.title=new Cg,this.innerCircle=new Rg,this.shadow=new Ku,this.calloutLabel=new Ig,this.sectorLabel=new Ag,this.calloutLine=new Tg,this.tooltip=new Xu,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}isValid(){const t=super.isValid();return null==this.innerRadiusRatio&&null==this.innerRadiusOffset?(E.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}};function Eg(t,e,i,n){const s=[i.convert(0),i.convert(1)],a=[n.convert(0),n.convert(1)],o=Math.PI/-2+Gs(e),r=t?"initial":"update";return{nodes:{toFn:(t,e,i,n)=>{let{prevLive:a}=n;var r,l;let{startAngle:h,endAngle:c,innerRadius:d,outerRadius:u}=e;const{stroke:p,fill:g}=e.sectorFormat;if("removed"===i&&a?(h=null==(r=a.datum)?void 0:r.endAngle,c=null==(l=a.datum)?void 0:l.endAngle):"removed"!==i||a||(h=o,c=o),"removed"===i){const t=(t=>{let{radius:e}=t;return{innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*e}})(e);d=t.innerRadius,u=t.outerRadius}return{startAngle:h,endAngle:c,outerRadius:u,innerRadius:d,stroke:p,fill:g}},fromFn:(e,i,n,s)=>{let{prevFromProps:l}=s;var h,c,d,u,p,g;let{startAngle:m,endAngle:f,innerRadius:y,outerRadius:v}=e,{fill:x,stroke:b}=i.sectorFormat;if("unknown"===n||"added"===n&&!l?(m=o,f=o,y=i.innerRadius,v=i.outerRadius):"added"===n&&l&&(m=null!=(h=l.endAngle)?h:o,f=null!=(c=l.endAngle)?c:o,y=null!=(d=l.innerRadius)?d:i.innerRadius,v=null!=(u=l.outerRadius)?u:i.outerRadius),"added"===n&&!t){const t=(t=>{let{radius:e}=t;return{innerRadius:a[0],outerRadius:a[0]+(a[1]-a[0])*e}})(i);y=t.innerRadius,v=t.outerRadius}return"updated"===n&&(x=null!=(p=e.fill)?p:x,b=null!=(g=e.stroke)?g:b),{startAngle:m,endAngle:f,innerRadius:y,outerRadius:v,fill:x,stroke:b,phase:r}}},innerCircle:{fromFn:(t,e)=>{var i,n,s;return{size:null!=(s=null!=(n=null==(i=t.previousDatum)?void 0:i.radius)?n:t.size)?s:0,phase:r}},toFn:(t,e)=>{var i;return{size:null!=(i=e.radius)?i:0}}}}}function Og(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function Pg(t,e){const i=e.y-t.centerY,n=e.x-t.centerX,s=Math.atan2(i,n),a=t.getItemNodes();for(const o of a)if(!0!==o.datum.missing&&_s(s,o.startAngle,o.endAngle)){const t=Math.sqrt(n*n+i*i);let e=0;return t<o.innerRadius?e=o.innerRadius-t:t>o.outerRadius&&(e=t-o.outerRadius),{datum:o.datum,distance:e}}}function Bg(t,e){const i=t.getNodeData();if(void 0===i)return;const{centerX:n,centerY:s}=t,a=i[e.datumIndex],o=[{radius:a.innerRadius,angle:a.startAngle},{radius:a.innerRadius,angle:a.endAngle},{radius:a.outerRadius,angle:a.startAngle},{radius:a.outerRadius,angle:a.endAngle}],r=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const m of r)_s(m,a.startAngle,a.endAngle)&&o.push({radius:a.outerRadius,angle:m});const l=o.map((t=>{let{radius:e,angle:i}=t;return Vs(n,s,e,i)})),h=l.map((t=>t.x)),c=l.map((t=>t.y)),d=Math.min(...h),u=Math.min(...c),p=Math.max(...h)-d,g=Math.max(...c)-u;return new ts(d,u,p,g)}x([Xs(ea)],Ng.prototype,"angleKey",2),x([Xs(ea,{optional:!0})],Ng.prototype,"angleName",2),x([Xs(ea,{optional:!0})],Ng.prototype,"radiusKey",2),x([Xs(ea,{optional:!0})],Ng.prototype,"radiusName",2),x([Xs(sa,{optional:!0})],Ng.prototype,"radiusMin",2),x([Xs(sa,{optional:!0})],Ng.prototype,"radiusMax",2),x([Xs(ea,{optional:!0})],Ng.prototype,"calloutLabelKey",2),x([Xs(ea,{optional:!0})],Ng.prototype,"calloutLabelName",2),x([Xs(ea,{optional:!0})],Ng.prototype,"sectorLabelKey",2),x([Xs(ea,{optional:!0})],Ng.prototype,"sectorLabelName",2),x([Xs(ea,{optional:!0})],Ng.prototype,"legendItemKey",2),x([Xs(ya)],Ng.prototype,"fills",2),x([Xs(ya)],Ng.prototype,"strokes",2),x([Xs(aa)],Ng.prototype,"fillOpacity",2),x([Xs(aa)],Ng.prototype,"strokeOpacity",2),x([Xs(Da)],Ng.prototype,"lineDash",2),x([Xs(sa)],Ng.prototype,"lineDashOffset",2),x([Xs(sa)],Ng.prototype,"cornerRadius",2),x([Xs(ta,{optional:!0})],Ng.prototype,"formatter",2),x([Xs(oa)],Ng.prototype,"rotation",2),x([Xs(ia)],Ng.prototype,"outerRadiusOffset",2),x([Xs(aa)],Ng.prototype,"outerRadiusRatio",2),x([Xs(ia,{optional:!0})],Ng.prototype,"innerRadiusOffset",2),x([Xs(aa,{optional:!0})],Ng.prototype,"innerRadiusRatio",2),x([Xs(sa)],Ng.prototype,"strokeWidth",2),x([Xs(sa,{optional:!0})],Ng.prototype,"sectorSpacing",2),x([Xs(ka)],Ng.prototype,"innerLabels",2),x([Xs(Js)],Ng.prototype,"title",2),x([Xs(Js)],Ng.prototype,"innerCircle",2),x([Xs(Js)],Ng.prototype,"shadow",2),x([Xs(Js)],Ng.prototype,"calloutLabel",2),x([Xs(Js)],Ng.prototype,"sectorLabel",2),x([Xs(Js)],Ng.prototype,"calloutLine",2),x([Xs(Js)],Ng.prototype,"tooltip",2),x([Xs(ea,{optional:!0})],Ng.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var Fg=class extends Fd{constructor(t){var e=t,{useLabelLayer:i=!1,pickModes:n=[0],canHaveAxes:s=!1,animationResetFns:a}=e,o=y(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(f(m({},o),{useLabelLayer:i,pickModes:n,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:s})),this.itemGroup=this.contentGroup.appendChild(new Mo),this.nodeData=[],this.itemSelection=Br.select(this.itemGroup,(()=>this.nodeFactory()),!1),this.labelSelection=Br.select(this.labelGroup,Fo,!1),this.highlightSelection=Br.select(this.highlightGroup,(()=>this.nodeFactory())),this.centerX=0,this.centerY=0,this.radius=0,this.showFocusBox=!1,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=a,this.animationState=new yr("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}getItemNodes(){return this.itemGroup.children}getNodeData(){return this.nodeData}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!=(t=this.animationResetFns)?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&fr([this.itemSelection,this.highlightSelection],e),i&&fr([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!=(e=this.animationResetFns)?e:{};i&&fr([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}},_g=class extends qc{constructor(t,e,i,n){super(t,e,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},Gg=class extends Fg{constructor(t){super({moduleCtx:t,pickModes:[0],useLabelLayer:!0,animationResetFns:{item:Og,label:Wu}}),this.properties=new Ng,this.previousRadiusScale=new $d,this.radiusScale=new $d,this.backgroundGroup=this.rootGroup.appendChild(new Mo({name:"".concat(this.id,"-background"),layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Mo({name:"".concat(this.id,"-zerosumRings")})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new bd),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new bd),this.innerCircleGroup=this.backgroundGroup.appendChild(new Mo({name:"".concat(this.id,"-innerCircle")})),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=_g,this.angleScale=new $d,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((t=>t+Math.PI/2));const e=new Mo({name:"pieCalloutLabels"}),i=new Mo({name:"pieSectorLabels"}),n=new Mo({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=Br.select(e,Mo),this.sectorLabelSelection=Br.select(i,Fo),this.innerLabelsSelection=Br.select(n,Fo),this.innerCircleSelection=Br.select(this.innerCircleGroup,bd)}addChartEventListeners(){var t;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",(t=>this.onLegendItemClick(t))))}get visible(){return super.visible&&(0===this.seriesItemEnabled.length||this.seriesItemEnabled.some((t=>t)))}nodeFactory(){return new Dg}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}processData(t){return S(this,null,(function*(){var e,i,n,s,a;if(null==this.data||!this.properties.isValid())return;let{data:o}=this;const{visible:r,seriesItemEnabled:l}=this,{angleKey:h,radiusKey:c,calloutLabelKey:d,sectorLabelKey:u,legendItemKey:p}=this.properties,g=!this.ctx.animationManager.isSkipped(),y=[],v=[];p?y.push(Yc(p,"band",{id:"legendItemKey"})):d?y.push(Yc(d,"band",{id:"calloutLabelKey"})):u&&y.push(Yc(u,"band",{id:"sectorLabelKey"}));const x=this.radiusScale.type,b=this.radiusScale.type;c&&v.push(Uc(c,{id:"radiusValue",min:null!=(e=this.properties.radiusMin)?e:0,max:this.properties.radiusMax}),Hc(c,x,{id:"radiusRaw"}),Nc({id:"radiusValue"},[0,1],1,null!=(i=this.properties.radiusMin)?i:0,this.properties.radiusMax)),d&&v.push(Hc(d,"band",{id:"calloutLabelValue"})),u&&v.push(Hc(u,"band",{id:"sectorLabelValue"})),p&&v.push(Hc(p,"band",{id:"legendItemValue"})),g&&this.processedData&&y.length>0&&v.push(Fc(this.processedData)),v.push(Ec()),o=o.map(((t,e)=>r&&l[e]?t:f(m({},t),{[h]:0}))),yield this.requestDataModel(t,o,{props:[...y,Xc(h,b,{id:"angleValue",onlyPositive:!0}),Hc(h,b,{id:"angleRaw"}),Nc({id:"angleValue"},[0,1],0,0),...v]});for(const t of null!=(a=null==(s=null==(n=this.processedData)?void 0:n.defs)?void 0:s.values)?a:[]){const{id:e,missing:i,property:n}=t,s=Jh(this,i);"angleRaw"!==e&&s>0&&E.warnOnce("no value was found for the key '".concat(String(n),"' on ").concat(s," data element").concat(s>1?"s":""))}this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return S(this,null,(function*(){var t;if(!this.nodeDataRefresh)return;const{nodeData:e=[]}=null!=(t=yield this.createNodeData())?t:{};this.nodeData=e,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue"),radiusIdx:this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue"):-1,calloutLabelIdx:this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,sectorLabelIdx:this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,legendItemIdx:this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue"):-1}}createNodeData(){return S(this,null,(function*(){const{id:t,processedData:e,dataModel:i,angleScale:n}=this,{rotation:s,innerRadiusRatio:a}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:t,nodeData:[],labelData:[]};if(!e||!i||"ungrouped"!==e.type)return;const{angleIdx:o,radiusIdx:r,calloutLabelIdx:l,sectorLabelIdx:h,legendItemIdx:c}=this.getProcessedDataIndexes(i);let d=0,u=0;const p=e.data.map(((t,e)=>{var i;const{datum:a,values:p}=t,g=p[o],f=n.convert(d)+Gs(s);d=g,u+=g;const y=n.convert(d)+Gs(s),v=Math.abs(y-f),x=f+v/2,b=p[o+1],S=r>=0&&null!=(i=p[r])?i:1,k=r>=0?p[r+1]:void 0,w=c>=0?p[c]:void 0,M=this.getLabels(a,x,v,!0,p[l],p[h],w),D=this.getSectorFormat(a,e,!1);return m({itemId:e,series:this,datum:a,index:e,angleValue:b,midAngle:x,midCos:Math.cos(x),midSin:Math.sin(x),startAngle:f,endAngle:y,sectorFormat:D,radiusValue:k,radius:S,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(S),0),legendItemValue:w},M)}));return this.zerosumOuterRing.visible=0===u,this.zerosumInnerRing.visible=0===u&&null!=a&&1!==a&&a>0,{itemId:t,nodeData:p,labelData:p}}))}getLabels(t,e,i,n,s,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:h}=this.properties,c=!n||r.enabled?this.properties.calloutLabelKey:void 0,d=!n||l.enabled?this.properties.sectorLabelKey:void 0;if(!c&&!d&&!h)return{};const u={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return c&&i>Gs(r.minAngle)&&(p.calloutLabel=f(m({},this.getTextAlignment(e)),{text:this.getLabelText(r,f(m({},u),{value:s})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),d&&(p.sectorLabel={text:this.getLabelText(l,f(m({},u),{value:a}))}),null!=h&&null!=o&&(p.legendItem={key:h,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Fs(t)- -.75*Math.PI;return e[Zn(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var n,s,a,o,r;const{callbackCache:l,highlightManager:h}=this.ctx,{angleKey:c,radiusKey:d,fills:u,strokes:p,formatter:g,sectorSpacing:m,__BACKGROUND_COLOR_DO_NOT_USE:f}=this.properties,y=h.getActiveHighlight(),v=i&&(null==y?void 0:y.series)===this&&e===y.itemId;let x=p[e%p.length];null==m&&null==x&&(x=f);const{fill:b,fillOpacity:S,stroke:k,strokeWidth:w,strokeOpacity:M}=Zt(v&&this.properties.highlightStyle.item,{fill:u.length>0?u[e%u.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:x,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let D;return g&&(D=l.call(g,{datum:t,angleKey:c,radiusKey:d,fill:b,stroke:k,fills:u,strokes:p,strokeWidth:w,highlighted:v,seriesId:this.id})),{fill:null!=(n=null==D?void 0:D.fill)?n:b,fillOpacity:null!=(s=null==D?void 0:D.fillOpacity)?s:S,stroke:null!=(a=null==D?void 0:D.stroke)?a:k,strokeWidth:null!=(o=null==D?void 0:D.strokeWidth)?o:w,strokeOpacity:null!=(r=null==D?void 0:D.strokeOpacity)?r:M}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,n=t*e+i;return n===t||n<0?0:n}getOuterRadius(){const{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map((t=>{var e=t,{radius:i}=e,n=y(e,["radius"]);return f(m({},n),{radius:i,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(i),0)})}))}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!=(e=null==(t=this.properties.title)?void 0:t.spacing)?e:0))-Math.max(0,-i)}update(t){return S(this,arguments,(function(t){var e=this;let{seriesRect:i}=t;return function*(){const{title:t}=e.properties,n={seriesRectWidth:null==i?void 0:i.width,seriesRectHeight:null==i?void 0:i.height},s=null!=be(e.nodeDataDependencies,n);if(s&&(e._nodeDataDependencies=n),yield e.maybeRefreshNodeData(),e.updateTitleNodes(),e.updateRadiusScale(s),e.contentGroup.translationX=e.centerX,e.contentGroup.translationY=e.centerY,e.highlightGroup.translationX=e.centerX,e.highlightGroup.translationY=e.centerY,e.backgroundGroup.translationX=e.centerX,e.backgroundGroup.translationY=e.centerY,e.labelGroup&&(e.labelGroup.translationX=e.centerX,e.labelGroup.translationY=e.centerY),t){const i=e.getTitleTranslationY(),n=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(i)&&!e.bboxIntersectsSurroundingSeries(n,0,i),t.node.translationY=isFinite(i)?i:0}for(const i of[e.zerosumInnerRing,e.zerosumOuterRing])i.fillOpacity=0,i.stroke=e.properties.calloutLabel.color,i.strokeWidth=1,i.strokeOpacity=1;e.updateNodeMidPoint(),yield e.updateSelections(),yield e.updateNodes(i)}()}))}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:n}=this.properties;i!==n&&(i&&(null==(t=this.labelGroup)||t.removeChild(i.node)),n&&(n.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(n.node)),this.oldTitle=n)}updateNodeMidPoint(){this.nodeData.forEach((t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}}))}updateSelections(){return S(this,null,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return S(this,null,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:s}=this,a=(t,e)=>{let i=this.nodeData;e&&(i=i.map((t=>f(m({},t),{sectorFormat:m({},t.sectorFormat)})))),t.update(i,void 0,(t=>this.getDatumId(t))),this.ctx.animationManager.isSkipped()&&t.cleanup()};a(t,!1),a(e,!0),i.update(this.nodeData,(t=>{const e=new zr;e.tag=0,e.pointerEvents=1,t.appendChild(e);const i=new Fo;i.tag=1,i.pointerEvents=1,t.appendChild(i)})),n.update(this.nodeData,(t=>{t.pointerEvents=1})),s.update(this.properties.innerLabels,(t=>{t.pointerEvents=1}))}))}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),n=1;e=Math.ceil(2*t+n)}const n=t?[{radius:e}]:[];this.innerCircleSelection.update(n)}updateNodes(t){return S(this,null,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((t,e)=>{let{radius:i}=e;var n,s;t.setProperties({fill:null==(n=this.properties.innerCircle)?void 0:n.fill,opacity:null==(s=this.properties.innerCircle)?void 0:s.fillOpacity,size:i})}));const n=(t,e,i,n)=>{const s=this.getSectorFormat(e.datum,e.itemId,n);e.sectorFormat.fill=s.fill,e.sectorFormat.stroke=s.stroke;const a=this.ctx.animationManager.isSkipped();a&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(n||a)&&(t.fill=s.fill,t.stroke=s.stroke),t.strokeWidth=s.strokeWidth,t.fillOpacity=s.fillOpacity,t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.fillShadow=this.properties.shadow,t.cornerRadius=this.properties.cornerRadius,t.inset=null!=this.properties.sectorSpacing?(this.properties.sectorSpacing+(null!=s.stroke?s.strokeWidth:0))/2:0,t.lineJoin=null!=this.properties.sectorSpacing?"miter":"round"};this.itemSelection.each(((t,e,i)=>n(t,e,0,!1))),this.highlightSelection.each(((t,i,s)=>{const a=(null==e?void 0:e.series)===this&&t.datum.itemId===e.itemId;n(t,i,0,!0),t.visible=a})),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,n=e.strokeWidth,s=null!=(t=e.colors)?t:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((t,e)=>{var o;const r=t.datum,{calloutLabel:l,outerRadius:h}=r;if((null==l?void 0:l.text)&&!l.hidden&&0!==h){t.visible=!0,t.strokeWidth=n,t.stroke=s[e%s.length],t.fill=void 0;const c=r.midCos*h,d=r.midSin*h;let u=r.midCos*(h+i),p=r.midSin*(h+i);if((null!=(o=l.collisionTextAlign)?o:0!==l.collisionOffsetY)&&null!=l.box){const t=l.box;let e=u,i=p;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),p<t.y?i=t.y:p>t.y+t.height&&(i=t.y+t.height);const n=e-u,s=i-p,o=Math.sqrt(Math.pow(n,2)+Math.pow(s,2)),r=o-a;r>0&&(u+=n*r/o,p+=s*r/o)}t.x1=c,t.y1=d,t.x2=u,t.y2=p}else t.visible=!1}))}getLabelOverflow(t,e,i){const n=i.x-this.centerX,s=i.x+i.width-this.centerX,a=i.y-this.centerY,o=i.y+i.height-this.centerY;let r=1;e.x+1<n?r=(e.x+e.width-n)/e.width:e.x+e.width-1>s&&(r=(s-e.x)/e.width);const l=e.y+1<a||e.y+e.height-1>o;return{textLength:1===r?t.length:Math.floor(t.length*r)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{surroundingRadius:n}=this;if(null==n)return!1;const s=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=p(n,2);return s.some((t=>p(t.x,2)+p(t.y,2)>a))}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:n,minSpacing:s}=e,a=t.convert(0),o=this.nodeData,r=this.nodeData.filter((t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e}));if(r.forEach((t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),r.length<=1)return;const l=r.filter((t=>t.midCos<0)).sort(((t,e)=>t.midSin-e.midSin)),h=r.filter((t=>t.midCos>=0)).sort(((t,e)=>t.midSin-e.midSin)),c=r.filter((t=>{var e;return t.midSin<0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),d=r.filter((t=>{var e;return t.midSin>=0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),u=new Fo,p=t=>{var e;const s=t.calloutLabel;if(null==s)return new ts(0,0,0,0);const a=t.outerRadius+i.length+n,o=t.midCos*a,r=t.midSin*a+s.collisionOffsetY;return u.text=s.text,u.x=o,u.y=r,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:null!=(e=s.collisionTextAlign)?e:s.textAlign,textBaseline:s.textBaseline}),u.computeBBox()},g=(t,e,i)=>{const n=p(t).grow(s/2),a=p(e).grow(s/2);if(n.x<a.x+a.width&&n.x+n.width>a.x&&("to-top"===i?n.y<a.y+a.height:n.y+n.height>a.y)){const t="to-top"===i?n.y-a.y-a.height:n.y+n.height-a.y;e.calloutLabel.collisionOffsetY=t}},m=t=>{const e=t.slice().sort(((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin)))[0],i=t.indexOf(e);for(let n=i-1;n>=0;n--){const e=t[n+1],i=t[n];g(e,i,"to-top")}for(let n=i+1;n<t.length;n++){const e=t[n-1],i=t[n];g(e,i,"to-bottom")}},f=t=>{const e=r.some((t=>0!==t.calloutLabel.collisionOffsetY)),i=t.map((t=>p(t))),n=i.map((t=>t.clone().grow(s/2)));let l=!1;for(let s=0;s<n.length&&!l;s++){const e=n[s];for(let i=s+1;i<t.length;i++){const t=n[i];if(e.collidesBBox(t)){l=!0;break}}}const h=o.map((t=>{const{startAngle:e,endAngle:i,outerRadius:n}=t;return{startAngle:e,endAngle:i,innerRadius:a,outerRadius:n}})),c=i.some((t=>h.some((e=>vg(t,e)))));(l||e||c)&&t.filter((t=>"center"===t.calloutLabel.textAlign)).forEach((t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};m(l),m(h),f(c),f(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:n}=this.properties,s=n.length,{offset:a,color:o}=i,r=new Fo;this.calloutLabelSelection.selectByTag(1).forEach((n=>{var l;const{datum:h}=n,c=h.calloutLabel,d=e.convert(h.radius),u=Math.max(0,d);if(!(null==c?void 0:c.text)||0===u||c.hidden)return void(n.visible=!1);const p=u+s+a,g=h.midCos*p,m=h.midSin*p+c.collisionOffsetY,f={textAlign:null!=(l=c.collisionTextAlign)?l:c.textAlign,textBaseline:c.textBaseline};r.text=c.text,r.x=g,r.y=m,r.setFont(this.properties.calloutLabel),r.setAlign(f);const y=r.computeBBox();let v=c.text,x=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,y,t);v=c.text.length===e?c.text:"".concat(c.text.substring(0,e),"\u2026"),x=!i}n.text=v,n.x=g,n.y=m,n.setFont(this.properties.calloutLabel),n.setAlign(f),n.fill=o,n.visible=x}))}computeLabelsBBox(t,e){return S(this,null,(function*(){const{calloutLabel:i,calloutLine:n}=this.properties,s=n.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],h=new Fo;let c;const{title:d}=this.properties;if((null==d?void 0:d.text)&&d.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(h.text=d.text,h.x=0,h.y=t,h.setFont(d),h.setAlign({textBaseline:"bottom",textAlign:"center"}),c=h.computeBBox(),l.push(c))}return this.nodeData.forEach((i=>{var n;const d=i.calloutLabel;if(!d||0===i.outerRadius)return null;const u=i.outerRadius+s+a,p=i.midCos*u,g=i.midSin*u+d.collisionOffsetY;h.text=d.text,h.x=p,h.y=g,h.setFont(this.properties.calloutLabel),h.setAlign({textAlign:null!=(n=d.collisionTextAlign)?n:d.textAlign,textBaseline:d.textBaseline});const m=h.computeBBox();if(d.box=m,Math.abs(d.collisionOffsetY)>o)d.hidden=!0;else{if(c){const t=e.y-this.centerY,i=new ts(c.x-r,t,c.width+2*r,c.y+c.height+r-t);if(m.collidesBBox(i))return void(d.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(d.text,m,e),s=d.text.length>2&&t<2;if(i||s||n)return void(d.hidden=!0)}d.hidden=!1,l.push(m)}})),0===l.length?null:ts.merge(l)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:s,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel;this.sectorLabelSelection.each(((t,h)=>{const{sectorLabel:c,outerRadius:d}=h;let u=!1;if(c&&0!==d){const p=e*(1-r)+d*r+o;t.fill=l,t.fontStyle=n,t.fontWeight=s,t.fontSize=i,t.fontFamily=a,t.text=c.text,t.x=h.midCos*p,t.y=h.midSin*p,t.textAlign="center",t.textBaseline="middle";const g=t.computeBBox(),m=[[g.x,g.y],[g.x+g.width,g.y],[g.x+g.width,g.y+g.height],[g.x,g.y+g.height]],{startAngle:f,endAngle:y}=h,v={startAngle:f,endAngle:y,innerRadius:e,outerRadius:d};m.every((t=>{let[e,i]=t;return fg(e,i,v)}))&&(u=!0)}t.visible=u}))}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each(((i,n)=>{const{fontStyle:s,fontWeight:a,fontSize:o,fontFamily:r,color:l}=n;i.fontStyle=s,i.fontWeight=a,i.fontSize=o,i.fontFamily=r,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(n.margin)}));const i=t=>0===t?0:e[t],n=t=>t===e.length-1?0:e[t],s=t.reduce(((t,e,s)=>t+e.height+i(s)+n(s)),0),a=Math.max(...t.map((t=>t.width))),o=this.getInnerRadius(),r=Math.sqrt(Math.pow(a/2,2)+Math.pow(s/2,2))<=(o>0?o:this.getOuterRadius()),l=[];for(let h=0,c=-s/2;h<t.length;h++){const e=t[h].height+c+i(h);l.push(e),c=e+n(h)}this.innerLabelsSelection.each(((t,e,i)=>{t.y=l[i],t.visible=r}))}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:n,legendItemKey:s}=this.properties,{sectorLabel:a,calloutLabel:o,legendItem:r}=t;return s&&void 0!==r?r.text:i&&i!==e&&void 0!==(null==o?void 0:o.text)?o.text:n&&n!==e&&void 0!==(null==a?void 0:a.text)?a.text:void 0}pickNodeClosestDatum(t){return Pg(this,t)}getTooltipHtml(t){var e;if(!this.properties.isValid())return el;const{datum:i,angleValue:n,sectorFormat:{fill:s},itemId:a}=t,o=_u(null==(e=this.properties.title)?void 0:e.text),r=Kt(n)?jn(n):String(n),l=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:null!=o?o:l,content:o&&l?"".concat(l,": ").concat(r):r,backgroundColor:s},{datum:i,itemId:a,title:o,color:s,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(t){var e,i,n,s,a;const{visible:o,processedData:r,dataModel:l}=this;if(!l||!(null==r?void 0:r.data.length)||!this.properties.isValid()||"category"!==t)return[];const{angleKey:h,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:u}=this.properties;if(!u&&(!c||c===h)&&(!d||d===h))return[];const{calloutLabelIdx:p,sectorLabelIdx:g,legendItemIdx:m}=this.getProcessedDataIndexes(l),f=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,y=[];for(let v=0;v<r.data.length;v++){const{datum:t,values:e}=r.data[v],l=[];f&&l.push(f);const x=this.getLabels(t,2*Math.PI,2*Math.PI,!1,e[p],e[g],e[m]);if(u&&void 0!==x.legendItem?l.push(x.legendItem.text):c&&c!==h&&void 0!==(null==(i=x.calloutLabel)?void 0:i.text)?l.push(null==(n=x.calloutLabel)?void 0:n.text):d&&d!==h&&void 0!==(null==(s=x.sectorLabel)?void 0:s.text)&&l.push(null==(a=x.sectorLabel)?void 0:a.text),0===l.length)continue;const b=this.getSectorFormat(t,v,!1);y.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:o&&this.seriesItemEnabled[v],label:{text:l.join(" - ")},marker:{fill:b.fill,stroke:b.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:null!=u?t[u]:void 0})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:n,legendItemName:s}=t;n.id===this.id?this.toggleSeriesItem(i,e):null!=s&&this.toggleOtherSeriesItems(s,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const n=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");null==(i=this.processedData)||i.data.forEach(((i,s)=>{let{values:a}=i;a[n]===t&&this.toggleSeriesItem(s,e)}))}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=Eg(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Ts(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Ts(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),Gu(this,"callout",e,this.calloutLabelSelection),Gu(this,"sector",e,this.sectorLabelSelection),Gu(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,n,s,a;const{itemSelection:o,highlightSelection:r,processedData:l,radiusScale:h,previousRadiusScale:c}=this,{animationManager:d}=this.ctx,u=null==(t=null==l?void 0:l.reduced)?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!=(e=null==u?void 0:u.moved.size)?e:0),g=(null!=(i=null==l?void 0:l.defs.keys.length)?i:0)>0,m=null==(a=null==(s=null==(n=null==l?void 0:l.reduced)?void 0:n.animationValidation)?void 0:s.uniqueKeys)||a;p&&g&&m||this.ctx.animationManager.skipCurrentBatch();const f=Eg(!1,this.properties.rotation,h,c);Ts(this.id,"nodes",d,[o,r],f.nodes,((t,e)=>this.getDatumId(e)),u),Ts(this.id,"innerCircle",d,[this.innerCircleSelection],f.innerCircle),Gu(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Gu(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),Gu(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:n}=this,{animationManager:s}=this.ctx,a=Eg(!1,this.properties.rotation,i,n);Ts(this.id,"nodes",s,[t,e],a.nodes),Ts(this.id,"innerCircle",s,[this.innerCircleSelection],a.innerCircle),zu(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),zu(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),zu(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,n;const{calloutLabelKey:s,sectorLabelKey:a,legendItemKey:o}=this.properties;if(null==(n=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.animationValidation)?void 0:n.uniqueKeys)return o?t[o]:s?t[s]:a?t[a]:void 0}getDatumId(t){const{index:e}=t,i=this.getDatumIdFromData(t.datum);return null!=i?String(i):"".concat(e)}onDataChange(){var t;const{data:e,seriesItemEnabled:i}=this;this.seriesItemEnabled=null!=(t=null==e?void 0:e.map(((t,e)=>{var n;return null==(n=i[e])||n})))?t:[]}computeFocusBounds(t){return Bg(this,t)}};Gg.className="DonutSeries",Gg.type="donut";var zg={series:{__extends__:Ve,title:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:14,fontFamily:Ye,color:je,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ye,color:He,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:Ye,color:Xe,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,shadow:{enabled:!1,color:$e,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Ye,color:He,margin:2},__BACKGROUND_COLOR_DO_NOT_USE:Qe}},Wg=t=>{let{takeColors:e,colorsCount:i,userPalette:n}=t;const{fills:s,strokes:a}=e(i);return{fills:s,strokes:n?a:[],calloutLine:{colors:a}}},Vg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:Gg,themeTemplate:zg,paletteFactory:Wg},Kg=class extends ol{constructor(){super(...arguments),this.showInLegend=!1}};x([Xs($s)],Kg.prototype,"showInLegend",2);var Yg=class extends zo{set(t,e){return super.set(t)}};x([En("Use a Donut Series instead"),Xs(ea,{optional:!0})],Yg.prototype,"text",2),x([En("Use a Donut Series instead"),Xs(ia,{optional:!0})],Yg.prototype,"margin",2);var Hg=class extends fe{};x([En("Use a Donut Series instead"),Xs(fa,{optional:!0})],Hg.prototype,"fill",2),x([En("Use a Donut Series instead"),Xs(aa,{optional:!0})],Hg.prototype,"fillOpacity",2);var Ug=class extends zo{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};x([Xs(sa)],Ug.prototype,"offset",2),x([Xs(oa)],Ug.prototype,"minAngle",2),x([Xs(sa)],Ug.prototype,"minSpacing",2),x([Xs(sa)],Ug.prototype,"maxCollisionOffset",2),x([Xs($s)],Ug.prototype,"avoidCollisions",2);var Xg=class extends zo{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};x([Xs(ia)],Xg.prototype,"positionOffset",2),x([Xs(aa)],Xg.prototype,"positionRatio",2);var jg=class extends fe{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};x([Xs(ya,{optional:!0})],jg.prototype,"colors",2),x([Xs(sa)],jg.prototype,"length",2),x([Xs(sa)],jg.prototype,"strokeWidth",2);var Zg=class extends Vd{constructor(){super(...arguments),this.fills=Object.values(Pe),this.strokes=Object.values(Be),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new ye(Yg),this.title=new Kg,this.innerCircle=new Hg,this.shadow=new Ku,this.calloutLabel=new Ug,this.sectorLabel=new Xg,this.calloutLine=new jg,this.tooltip=new Xu,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}};x([Xs(ea)],Zg.prototype,"angleKey",2),x([Xs(ea,{optional:!0})],Zg.prototype,"angleName",2),x([Xs(ea,{optional:!0})],Zg.prototype,"radiusKey",2),x([Xs(ea,{optional:!0})],Zg.prototype,"radiusName",2),x([Xs(sa,{optional:!0})],Zg.prototype,"radiusMin",2),x([Xs(sa,{optional:!0})],Zg.prototype,"radiusMax",2),x([Xs(ea,{optional:!0})],Zg.prototype,"calloutLabelKey",2),x([Xs(ea,{optional:!0})],Zg.prototype,"calloutLabelName",2),x([Xs(ea,{optional:!0})],Zg.prototype,"sectorLabelKey",2),x([Xs(ea,{optional:!0})],Zg.prototype,"sectorLabelName",2),x([Xs(ea,{optional:!0})],Zg.prototype,"legendItemKey",2),x([Xs(ya)],Zg.prototype,"fills",2),x([Xs(ya)],Zg.prototype,"strokes",2),x([Xs(aa)],Zg.prototype,"fillOpacity",2),x([Xs(aa)],Zg.prototype,"strokeOpacity",2),x([Xs(Da)],Zg.prototype,"lineDash",2),x([Xs(sa)],Zg.prototype,"lineDashOffset",2),x([Xs(sa)],Zg.prototype,"cornerRadius",2),x([Xs(ta,{optional:!0})],Zg.prototype,"formatter",2),x([Xs(oa)],Zg.prototype,"rotation",2),x([Xs(ia)],Zg.prototype,"outerRadiusOffset",2),x([Xs(aa)],Zg.prototype,"outerRadiusRatio",2),x([En("Use a Donut Series instead"),Xs(ia,{optional:!0})],Zg.prototype,"innerRadiusOffset",2),x([En("Use a Donut Series instead"),Xs(aa,{optional:!0})],Zg.prototype,"innerRadiusRatio",2),x([Xs(sa)],Zg.prototype,"strokeWidth",2),x([Xs(sa,{optional:!0})],Zg.prototype,"sectorSpacing",2),x([Xs(ka)],Zg.prototype,"innerLabels",2),x([Xs(Js)],Zg.prototype,"title",2),x([Xs(Js)],Zg.prototype,"innerCircle",2),x([Xs(Js)],Zg.prototype,"shadow",2),x([Xs(Js)],Zg.prototype,"calloutLabel",2),x([Xs(Js)],Zg.prototype,"sectorLabel",2),x([Xs(Js)],Zg.prototype,"calloutLine",2),x([Xs(Js)],Zg.prototype,"tooltip",2),x([Xs(ea,{optional:!0})],Zg.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var qg=class extends qc{constructor(t,e,i,n){super(t,e,i,n),this.angleKey=n.properties.angleKey,this.radiusKey=n.properties.radiusKey,this.calloutLabelKey=n.properties.calloutLabelKey,this.sectorLabelKey=n.properties.sectorLabelKey}},Jg=class extends Fg{constructor(t){super({moduleCtx:t,pickModes:[0],useLabelLayer:!0,animationResetFns:{item:Og,label:Wu}}),this.properties=new Zg,this.previousRadiusScale=new $d,this.radiusScale=new $d,this.backgroundGroup=this.rootGroup.appendChild(new Mo({name:"".concat(this.id,"-background"),layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Mo({name:"".concat(this.id,"-zerosumRings")})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new bd),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new bd),this.innerCircleGroup=this.backgroundGroup.appendChild(new Mo({name:"".concat(this.id,"-innerCircle")})),this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=qg,this.angleScale=new $d,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((t=>t+Math.PI/2));const e=new Mo({name:"pieCalloutLabels"}),i=new Mo({name:"pieSectorLabels"}),n=new Mo({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(n),this.calloutLabelSelection=Br.select(e,Mo),this.sectorLabelSelection=Br.select(i,Fo),this.innerLabelsSelection=Br.select(n,Fo),this.innerCircleSelection=Br.select(this.innerCircleGroup,bd)}addChartEventListeners(){var t;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",(t=>this.onLegendItemClick(t))))}get visible(){return super.visible&&(0===this.seriesItemEnabled.length||this.seriesItemEnabled.some((t=>t)))}nodeFactory(){return new Dg}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}processData(t){return S(this,null,(function*(){var e,i,n,s,a;if(null==this.data||!this.properties.isValid())return;let{data:o}=this;const{visible:r,seriesItemEnabled:l}=this,{angleKey:h,radiusKey:c,calloutLabelKey:d,sectorLabelKey:u,legendItemKey:p}=this.properties,g=!this.ctx.animationManager.isSkipped(),y=[],v=[];p?y.push(Yc(p,"band",{id:"legendItemKey"})):d?y.push(Yc(d,"band",{id:"calloutLabelKey"})):u&&y.push(Yc(u,"band",{id:"sectorLabelKey"}));const x=this.radiusScale.type,b=this.radiusScale.type;c&&v.push(Uc(c,{id:"radiusValue",min:null!=(e=this.properties.radiusMin)?e:0,max:this.properties.radiusMax}),Hc(c,x,{id:"radiusRaw"}),Nc({id:"radiusValue"},[0,1],1,null!=(i=this.properties.radiusMin)?i:0,this.properties.radiusMax)),d&&v.push(Hc(d,"band",{id:"calloutLabelValue"})),u&&v.push(Hc(u,"band",{id:"sectorLabelValue"})),p&&v.push(Hc(p,"band",{id:"legendItemValue"})),g&&this.processedData&&y.length>0&&v.push(Fc(this.processedData)),v.push(Ec()),o=o.map(((t,e)=>r&&l[e]?t:f(m({},t),{[h]:0}))),yield this.requestDataModel(t,o,{props:[...y,Xc(h,b,{id:"angleValue",onlyPositive:!0}),Hc(h,b,{id:"angleRaw"}),Nc({id:"angleValue"},[0,1],0,0),...v]});for(const t of null!=(a=null==(s=null==(n=this.processedData)?void 0:n.defs)?void 0:s.values)?a:[]){const{id:e,missing:i,property:n}=t,s=Jh(this,i);"angleRaw"!==e&&s>0&&E.warnOnce("no value was found for the key '".concat(String(n),"' on ").concat(s," data element").concat(s>1?"s":""))}this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return S(this,null,(function*(){var t;if(!this.nodeDataRefresh)return;const{nodeData:e=[]}=null!=(t=yield this.createNodeData())?t:{};this.nodeData=e,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue"),radiusIdx:this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue"):-1,calloutLabelIdx:this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue"):-1,sectorLabelIdx:this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue"):-1,legendItemIdx:this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue"):-1}}createNodeData(){return S(this,null,(function*(){const{id:t,processedData:e,dataModel:i,angleScale:n}=this,{rotation:s}=this.properties;if(!e||!i||"ungrouped"!==e.type)return;const{angleIdx:a,radiusIdx:o,calloutLabelIdx:r,sectorLabelIdx:l,legendItemIdx:h}=this.getProcessedDataIndexes(i);let c=0,d=0;const u=e.data.map(((t,e)=>{var i;const{datum:u,values:p}=t,g=p[a],f=n.convert(c)+Gs(s);c=g,d+=g;const y=n.convert(c)+Gs(s),v=Math.abs(y-f),x=f+v/2,b=p[a+1],S=o>=0&&null!=(i=p[o])?i:1,k=o>=0?p[o+1]:void 0,w=h>=0?p[h]:void 0,M=this.getLabels(u,x,v,!0,p[r],p[l],w),D=this.getSectorFormat(u,e,!1);return m({itemId:e,series:this,datum:u,index:e,angleValue:b,midAngle:x,midCos:Math.cos(x),midSin:Math.sin(x),startAngle:f,endAngle:y,sectorFormat:D,radiusValue:k,radius:S,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(S),0),legendItemValue:w},M)}));this.zerosumOuterRing.visible=0===d;const{innerRadiusRatio:p=1}=this.properties;return this.zerosumInnerRing.visible=0===d&&1!==p&&p>0,{itemId:t,nodeData:u,labelData:u}}))}getLabels(t,e,i,n,s,a,o){const{calloutLabel:r,sectorLabel:l,legendItemKey:h}=this.properties,c=!n||r.enabled?this.properties.calloutLabelKey:void 0,d=!n||l.enabled?this.properties.sectorLabelKey:void 0;if(!c&&!d&&!h)return{};const u={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return c&&i>Gs(r.minAngle)&&(p.calloutLabel=f(m({},this.getTextAlignment(e)),{text:this.getLabelText(r,f(m({},u),{value:s})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),d&&(p.sectorLabel={text:this.getLabelText(l,f(m({},u),{value:a}))}),null!=h&&null!=o&&(p.legendItem={key:h,text:o}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Fs(t)- -.75*Math.PI;return e[Zn(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var n,s,a,o,r;const{callbackCache:l,highlightManager:h}=this.ctx,{angleKey:c,radiusKey:d,fills:u,strokes:p,formatter:g,sectorSpacing:m,__BACKGROUND_COLOR_DO_NOT_USE:f}=this.properties,y=h.getActiveHighlight(),v=i&&(null==y?void 0:y.series)===this&&e===y.itemId;let x=p[e%p.length];null!=m&&(null!=x||(x=f));const{fill:b,fillOpacity:S,stroke:k,strokeWidth:w,strokeOpacity:M}=Zt(v&&this.properties.highlightStyle.item,{fill:u.length>0?u[e%u.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:x,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let D;return g&&(D=l.call(g,{datum:t,angleKey:c,radiusKey:d,fill:b,stroke:k,fills:u,strokes:p,strokeWidth:w,highlighted:v,seriesId:this.id})),{fill:null!=(n=null==D?void 0:D.fill)?n:b,fillOpacity:null!=(s=null==D?void 0:D.fillOpacity)?s:S,stroke:null!=(a=null==D?void 0:D.stroke)?a:k,strokeWidth:null!=(o=null==D?void 0:D.strokeWidth)?o:w,strokeOpacity:null!=(r=null==D?void 0:D.strokeOpacity)?r:M}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,n=t*e+i;return n===t||n<0?0:n}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map((t=>{var e=t,{radius:i}=e,n=y(e,["radius"]);return f(m({},n),{radius:i,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(i),0)})}))}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!=(e=null==(t=this.properties.title)?void 0:t.spacing)?e:0))-Math.max(0,-i)}update(t){return S(this,arguments,(function(t){var e=this;let{seriesRect:i}=t;return function*(){const{title:t}=e.properties,n={seriesRectWidth:null==i?void 0:i.width,seriesRectHeight:null==i?void 0:i.height},s=null!=be(e.nodeDataDependencies,n);if(s&&(e._nodeDataDependencies=n),yield e.maybeRefreshNodeData(),e.updateTitleNodes(),e.updateRadiusScale(s),e.contentGroup.translationX=e.centerX,e.contentGroup.translationY=e.centerY,e.highlightGroup.translationX=e.centerX,e.highlightGroup.translationY=e.centerY,e.backgroundGroup.translationX=e.centerX,e.backgroundGroup.translationY=e.centerY,e.labelGroup&&(e.labelGroup.translationX=e.centerX,e.labelGroup.translationY=e.centerY),t){const i=e.getTitleTranslationY(),n=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(i)&&!e.bboxIntersectsSurroundingSeries(n,0,i),t.node.translationY=isFinite(i)?i:0}for(const i of[e.zerosumInnerRing,e.zerosumOuterRing])i.fillOpacity=0,i.stroke=e.properties.calloutLabel.color,i.strokeWidth=1,i.strokeOpacity=1;e.updateNodeMidPoint(),yield e.updateSelections(),yield e.updateNodes(i)}()}))}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:n}=this.properties;i!==n&&(i&&(null==(t=this.labelGroup)||t.removeChild(i.node)),n&&(n.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(n.node)),this.oldTitle=n)}updateNodeMidPoint(){this.nodeData.forEach((t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}}))}updateSelections(){return S(this,null,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return S(this,null,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:n,innerLabelsSelection:s}=this,a=(t,e)=>{let i=this.nodeData;e&&(i=i.map((t=>f(m({},t),{sectorFormat:m({},t.sectorFormat)})))),t.update(i,void 0,(t=>this.getDatumId(t))),this.ctx.animationManager.isSkipped()&&t.cleanup()};a(t,!1),a(e,!0),i.update(this.nodeData,(t=>{const e=new zr;e.tag=0,e.pointerEvents=1,t.appendChild(e);const i=new Fo;i.tag=1,i.pointerEvents=1,t.appendChild(i)})),n.update(this.nodeData,(t=>{t.pointerEvents=1})),s.update(this.properties.innerLabels,(t=>{t.pointerEvents=1}))}))}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),n=1;e=Math.ceil(2*t+n)}const n=t?[{radius:e}]:[];this.innerCircleSelection.update(n)}updateNodes(t){return S(this,null,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((t,e)=>{let{radius:i}=e;var n,s;t.setProperties({fill:null==(n=this.properties.innerCircle)?void 0:n.fill,opacity:null==(s=this.properties.innerCircle)?void 0:s.fillOpacity,size:i})}));const n=(t,e,i,n)=>{const s=this.getSectorFormat(e.datum,e.itemId,n);e.sectorFormat.fill=s.fill,e.sectorFormat.stroke=s.stroke;const a=this.ctx.animationManager.isSkipped();a&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(n||a)&&(t.fill=s.fill,t.stroke=s.stroke),t.strokeWidth=s.strokeWidth,t.fillOpacity=s.fillOpacity,t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.fillShadow=this.properties.shadow,t.cornerRadius=this.properties.cornerRadius,t.inset=null!=this.properties.sectorSpacing?(this.properties.sectorSpacing+(null!=s.stroke?s.strokeWidth:0))/2:0,t.lineJoin=null!=this.properties.sectorSpacing?"miter":"round"};this.itemSelection.each(((t,e,i)=>n(t,e,0,!1))),this.highlightSelection.each(((t,i,s)=>{const a=(null==e?void 0:e.series)===this&&t.datum.itemId===e.itemId;n(t,i,0,!0),t.visible=a})),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,n=e.strokeWidth,s=null!=(t=e.colors)?t:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((t,e)=>{var o;const r=t.datum,{calloutLabel:l,outerRadius:h}=r;if((null==l?void 0:l.text)&&!l.hidden&&0!==h){t.visible=!0,t.strokeWidth=n,t.stroke=s[e%s.length],t.fill=void 0;const c=r.midCos*h,d=r.midSin*h;let u=r.midCos*(h+i),p=r.midSin*(h+i);if((null!=(o=l.collisionTextAlign)?o:0!==l.collisionOffsetY)&&null!=l.box){const t=l.box;let e=u,i=p;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),p<t.y?i=t.y:p>t.y+t.height&&(i=t.y+t.height);const n=e-u,s=i-p,o=Math.sqrt(Math.pow(n,2)+Math.pow(s,2)),r=o-a;r>0&&(u+=n*r/o,p+=s*r/o)}t.x1=c,t.y1=d,t.x2=u,t.y2=p}else t.visible=!1}))}getLabelOverflow(t,e,i){const n=i.x-this.centerX,s=i.x+i.width-this.centerX,a=i.y-this.centerY,o=i.y+i.height-this.centerY;let r=1;e.x+1<n?r=(e.x+e.width-n)/e.width:e.x+e.width-1>s&&(r=(s-e.x)/e.width);const l=e.y+1<a||e.y+e.height-1>o;return{textLength:1===r?t.length:Math.floor(t.length*r)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{surroundingRadius:n}=this;if(null==n)return!1;const s=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=p(n,2);return s.some((t=>p(t.x,2)+p(t.y,2)>a))}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:n,minSpacing:s}=e,a=t.convert(0),o=this.nodeData,r=this.nodeData.filter((t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e}));if(r.forEach((t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),r.length<=1)return;const l=r.filter((t=>t.midCos<0)).sort(((t,e)=>t.midSin-e.midSin)),h=r.filter((t=>t.midCos>=0)).sort(((t,e)=>t.midSin-e.midSin)),c=r.filter((t=>{var e;return t.midSin<0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),d=r.filter((t=>{var e;return t.midSin>=0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),u=new Fo,p=t=>{var e;const s=t.calloutLabel;if(null==s)return new ts(0,0,0,0);const a=t.outerRadius+i.length+n,o=t.midCos*a,r=t.midSin*a+s.collisionOffsetY;return u.text=s.text,u.x=o,u.y=r,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:null!=(e=s.collisionTextAlign)?e:s.textAlign,textBaseline:s.textBaseline}),u.computeBBox()},g=(t,e,i)=>{const n=p(t).grow(s/2),a=p(e).grow(s/2);if(n.x<a.x+a.width&&n.x+n.width>a.x&&("to-top"===i?n.y<a.y+a.height:n.y+n.height>a.y)){const t="to-top"===i?n.y-a.y-a.height:n.y+n.height-a.y;e.calloutLabel.collisionOffsetY=t}},m=t=>{const e=t.slice().sort(((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin)))[0],i=t.indexOf(e);for(let n=i-1;n>=0;n--){const e=t[n+1],i=t[n];g(e,i,"to-top")}for(let n=i+1;n<t.length;n++){const e=t[n-1],i=t[n];g(e,i,"to-bottom")}},f=t=>{const e=r.some((t=>0!==t.calloutLabel.collisionOffsetY)),i=t.map((t=>p(t))),n=i.map((t=>t.clone().grow(s/2)));let l=!1;for(let s=0;s<n.length&&!l;s++){const e=n[s];for(let i=s+1;i<t.length;i++){const t=n[i];if(e.collidesBBox(t)){l=!0;break}}}const h=o.map((t=>{const{startAngle:e,endAngle:i,outerRadius:n}=t;return{startAngle:e,endAngle:i,innerRadius:a,outerRadius:n}})),c=i.some((t=>h.some((e=>vg(t,e)))));(l||e||c)&&t.filter((t=>"center"===t.calloutLabel.textAlign)).forEach((t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};m(l),m(h),f(c),f(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:n}=this.properties,s=n.length,{offset:a,color:o}=i,r=new Fo;this.calloutLabelSelection.selectByTag(1).forEach((n=>{var l;const{datum:h}=n,c=h.calloutLabel,d=e.convert(h.radius),u=Math.max(0,d);if(!(null==c?void 0:c.text)||0===u||c.hidden)return void(n.visible=!1);const p=u+s+a,g=h.midCos*p,m=h.midSin*p+c.collisionOffsetY,f={textAlign:null!=(l=c.collisionTextAlign)?l:c.textAlign,textBaseline:c.textBaseline};r.text=c.text,r.x=g,r.y=m,r.setFont(this.properties.calloutLabel),r.setAlign(f);const y=r.computeBBox();let v=c.text,x=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,y,t);v=c.text.length===e?c.text:"".concat(c.text.substring(0,e),"\u2026"),x=!i}n.text=v,n.x=g,n.y=m,n.setFont(this.properties.calloutLabel),n.setAlign(f),n.fill=o,n.visible=x}))}computeLabelsBBox(t,e){return S(this,null,(function*(){const{calloutLabel:i,calloutLine:n}=this.properties,s=n.length,{offset:a,maxCollisionOffset:o,minSpacing:r}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],h=new Fo;let c;const{title:d}=this.properties;if((null==d?void 0:d.text)&&d.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(h.text=d.text,h.x=0,h.y=t,h.setFont(d),h.setAlign({textBaseline:"bottom",textAlign:"center"}),c=h.computeBBox(),l.push(c))}return this.nodeData.forEach((i=>{var n;const d=i.calloutLabel;if(!d||0===i.outerRadius)return null;const u=i.outerRadius+s+a,p=i.midCos*u,g=i.midSin*u+d.collisionOffsetY;h.text=d.text,h.x=p,h.y=g,h.setFont(this.properties.calloutLabel),h.setAlign({textAlign:null!=(n=d.collisionTextAlign)?n:d.textAlign,textBaseline:d.textBaseline});const m=h.computeBBox();if(d.box=m,Math.abs(d.collisionOffsetY)>o)d.hidden=!0;else{if(c){const t=e.y-this.centerY,i=new ts(c.x-r,t,c.width+2*r,c.y+c.height+r-t);if(m.collidesBBox(i))return void(d.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:n}=this.getLabelOverflow(d.text,m,e),s=d.text.length>2&&t<2;if(i||s||n)return void(d.hidden=!0)}d.hidden=!1,l.push(m)}})),0===l.length?null:ts.merge(l)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:n,fontWeight:s,fontFamily:a,positionOffset:o,positionRatio:r,color:l}=this.properties.sectorLabel,h=e>0,c=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each(((t,d)=>{const{sectorLabel:u,outerRadius:p}=d;let g=!1;if(u&&0!==p){const m=e*(1-r)+p*r+o;t.fill=l,t.fontStyle=n,t.fontWeight=s,t.fontSize=i,t.fontFamily=a,t.text=u.text;!h&&c?(t.x=0,t.y=0):(t.x=d.midCos*m,t.y=d.midSin*m),t.textAlign="center",t.textBaseline="middle";const f=t.computeBBox(),y=[[f.x,f.y],[f.x+f.width,f.y],[f.x+f.width,f.y+f.height],[f.x,f.y+f.height]],{startAngle:v,endAngle:x}=d,b={startAngle:v,endAngle:x,innerRadius:e,outerRadius:p};y.every((t=>{let[e,i]=t;return fg(e,i,b)}))&&(g=!0)}t.visible=g}))}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each(((i,n)=>{const{fontStyle:s,fontWeight:a,fontSize:o,fontFamily:r,color:l,margin:h=2}=n;i.fontStyle=s,i.fontWeight=a,i.fontSize=o,i.fontFamily=r,i.text=n.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(h)}));const i=t=>0===t?0:e[t],n=t=>t===e.length-1?0:e[t],s=t.reduce(((t,e,s)=>t+e.height+i(s)+n(s)),0),a=Math.max(...t.map((t=>t.width))),o=this.getInnerRadius(),r=Math.sqrt(Math.pow(a/2,2)+Math.pow(s/2,2))<=(o>0?o:this.getOuterRadius()),l=[];for(let h=0,c=-s/2;h<t.length;h++){const e=t[h].height+c+i(h);l.push(e),c=e+n(h)}this.innerLabelsSelection.each(((t,e,i)=>{t.y=l[i],t.visible=r}))}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:n,legendItemKey:s}=this.properties,{sectorLabel:a,calloutLabel:o,legendItem:r}=t;return s&&void 0!==r?r.text:i&&i!==e&&void 0!==(null==o?void 0:o.text)?o.text:n&&n!==e&&void 0!==(null==a?void 0:a.text)?a.text:void 0}pickNodeClosestDatum(t){return Pg(this,t)}getTooltipHtml(t){var e;if(!this.properties.isValid())return el;const{datum:i,angleValue:n,sectorFormat:{fill:s},itemId:a}=t,o=_u(null==(e=this.properties.title)?void 0:e.text),r=Kt(n)?jn(n):String(n),l=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:null!=o?o:l,content:o&&l?"".concat(l,": ").concat(r):r,backgroundColor:s},{datum:i,itemId:a,title:o,color:s,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey})}getLegendData(t){var e,i,n,s,a;const{visible:o,processedData:r,dataModel:l}=this;if(!l||!(null==r?void 0:r.data.length)||"category"!==t)return[];const{angleKey:h,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:u}=this.properties;if(!u&&(!c||c===h)&&(!d||d===h))return[];const{calloutLabelIdx:p,sectorLabelIdx:g,legendItemIdx:m}=this.getProcessedDataIndexes(l),f=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,y=[];for(let v=0;v<r.data.length;v++){const{datum:t,values:e}=r.data[v],l=[];f&&l.push(f);const x=this.getLabels(t,2*Math.PI,2*Math.PI,!1,e[p],e[g],e[m]);if(u&&void 0!==x.legendItem?l.push(x.legendItem.text):c&&c!==h&&void 0!==(null==(i=x.calloutLabel)?void 0:i.text)?l.push(null==(n=x.calloutLabel)?void 0:n.text):d&&d!==h&&void 0!==(null==(s=x.sectorLabel)?void 0:s.text)&&l.push(null==(a=x.sectorLabel)?void 0:a.text),0===l.length)continue;const b=this.getSectorFormat(t,v,!1);y.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:o&&this.seriesItemEnabled[v],label:{text:l.join(" - ")},marker:{fill:b.fill,stroke:b.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:null!=u?t[u]:void 0})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:n,legendItemName:s}=t;n.id===this.id?this.toggleSeriesItem(i,e):null!=s&&this.toggleOtherSeriesItems(s,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const n=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue");null==(i=this.processedData)||i.data.forEach(((i,s)=>{let{values:a}=i;a[n]===t&&this.toggleSeriesItem(s,e)}))}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=Eg(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Ts(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Ts(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),Gu(this,"callout",e,this.calloutLabelSelection),Gu(this,"sector",e,this.sectorLabelSelection),Gu(this,"inner",e,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,n,s,a;const{itemSelection:o,highlightSelection:r,processedData:l,radiusScale:h,previousRadiusScale:c}=this,{animationManager:d}=this.ctx,u=null==(t=null==l?void 0:l.reduced)?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!=(e=null==u?void 0:u.moved.size)?e:0),g=(null!=(i=null==l?void 0:l.defs.keys.length)?i:0)>0,m=null==(a=null==(s=null==(n=null==l?void 0:l.reduced)?void 0:n.animationValidation)?void 0:s.uniqueKeys)||a;p&&g&&m||this.ctx.animationManager.skipCurrentBatch();const f=Eg(!1,this.properties.rotation,h,c);Ts(this.id,"nodes",d,[o,r],f.nodes,((t,e)=>this.getDatumId(e)),u),Ts(this.id,"innerCircle",d,[this.innerCircleSelection],f.innerCircle),Gu(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Gu(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),Gu(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:n}=this,{animationManager:s}=this.ctx,a=Eg(!1,this.properties.rotation,i,n);Ts(this.id,"nodes",s,[t,e],a.nodes),Ts(this.id,"innerCircle",s,[this.innerCircleSelection],a.innerCircle),zu(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),zu(this,"sector",this.ctx.animationManager,this.sectorLabelSelection),zu(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,n;const{calloutLabelKey:s,sectorLabelKey:a,legendItemKey:o}=this.properties;if(null==(n=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.animationValidation)?void 0:n.uniqueKeys)return o?t[o]:s?t[s]:a?t[a]:void 0}getDatumId(t){const{index:e}=t,i=this.getDatumIdFromData(t.datum);return null!=i?String(i):"".concat(e)}onDataChange(){var t;const{data:e,seriesItemEnabled:i}=this;this.seriesItemEnabled=null!=(t=null==e?void 0:e.map(((t,e)=>{var n;return null==(n=i[e])||n})))?t:[]}computeFocusBounds(t){return Bg(this,t)}};Jg.className="PieSeries",Jg.type="pie";var Qg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:Jg,themeTemplate:zg,paletteFactory:Wg},$g=["start","center","end"],tm=["annotations","ranges","zoom"],em=(t=>(t.Top="top",t.Right="right",t.Bottom="bottom",t.Left="left",t.FloatingTop="floating-top",t.FloatingBottom="floating-bottom",t))(em||{}),im=Object.values(em),nm=class extends fe{constructor(t,e){super(),this.onChange=t,this.onButtonsChange=e,this.align="start",this.position="top"}};x([qr((t=>{t.onChange(t.enabled)})),Xs($s)],nm.prototype,"enabled",2),x([qr((t=>{t.onChange(t.enabled)})),Xs(Fa(["start","center","end"]),{optional:!0})],nm.prototype,"align",2),x([qr((t=>{t.onChange(t.enabled)})),Xs(Fa(["top","right","bottom","left","floating-top","floating-bottom"]),{optional:!0})],nm.prototype,"position",2),x([qr((t=>{t.onButtonsChange(t.buttons)})),Xs(la,{optional:!0})],nm.prototype,"buttons",2);var sm="ag-charts-toolbar",am={align:"".concat(sm,"__align"),button:"".concat(sm,"__button"),icon:"".concat(sm,"__icon"),label:"".concat(sm,"__label")},om={top:"".concat(sm,"--top"),right:"".concat(sm,"--right"),bottom:"".concat(sm,"--bottom"),left:"".concat(sm,"--left"),"floating-top":"".concat(sm,"--floating-top"),"floating-bottom":"".concat(sm,"--floating-bottom"),hidden:"".concat(sm,"--hidden"),preventFlash:"".concat(sm,"--prevent-flash"),floatingHidden:"".concat(sm,"--floating-hidden"),align:{start:"".concat(am.align,"--start"),center:"".concat(am.align,"--center"),end:"".concat(am.align,"--end")},button:{hidden:"".concat(am.button,"--hidden")}},rm="\n.".concat(sm," {\n    align-items: center;\n    background: var(--ag-charts-toolbar-background-color);\n    border-bottom: var(--ag-charts-toolbar-border-critical);\n    border-top: var(--ag-charts-toolbar-border-critical);\n    border-left: var(--ag-charts-toolbar-border);\n    border-right: var(--ag-charts-toolbar-border);\n    display: flex;\n    flex-wrap: nowrap;\n    opacity: 1;\n    position: absolute;\n    transform: translateY(0);\n    transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;\n}\n\n.").concat(om.hidden,",\n.").concat(om.preventFlash," {\n    visibility: hidden;\n}\n\n.").concat(om.floatingHidden," {\n    opacity: 0;\n    transition: opacity 0.4s ease-in-out;\n}\n\n.").concat(om.top,",\n.").concat(om.bottom," {\n    flex-direction: row;\n    height: var(--ag-charts-toolbar-size);\n    padding: 0 var(--ag-charts-toolbar-padding);\n    width: 100%;\n}\n\n.").concat(om.left,",\n.").concat(om.right," {\n    flex-direction: column;\n    padding: var(--ag-charts-toolbar-padding) 0;\n    width: var(--ag-charts-toolbar-size);\n}\n\n.").concat(om["floating-top"],",\n.").concat(om["floating-bottom"]," {\n    background: none;\n    border: none;\n    flex-direction: row;\n    height: var(--ag-charts-toolbar-size);\n    overflow: hidden;\n    padding: 0 var(--ag-charts-toolbar-padding);\n    pointer-events: none;\n    width: 100%;\n}\n\n.").concat(am.align," {\n    display: flex;\n    flex-direction: inherit;\n    flex-wrap: inherit;\n    max-width: 100%;\n}\n\n.").concat(om.align.center,",\n.").concat(om.align.end," {\n    margin-left: auto;\n}\n\n.").concat(om.left," .").concat(om.align.center,",\n.").concat(om.left," .").concat(om.align.end,",\n.").concat(om.right," .").concat(om.align.center,",\n.").concat(om.right," .").concat(om.align.end," {\n    margin-left: 0;\n    margin-top: auto;\n}\n\n.").concat(om["floating-top"]," .").concat(am.align,",\n.").concat(om["floating-bottom"]," .").concat(am.align," {\n    gap: var(--ag-charts-toolbar-gap);\n    transition: transform 0.4s ease-in-out;\n}\n\n.").concat(am.button," {\n    align-items: center;\n    border-radius: var(--ag-charts-button-radius);\n    color: var(--ag-charts-toolbar-foreground-color);\n    display: flex;\n    font-size: 14px;\n    font-weight: 500;\n    justify-content: center;\n    margin: 0;\n    padding: var(--ag-charts-button-padding);\n    pointer-events: all;\n    transition: background-color .25s ease-in-out;\n}\n\n.").concat(om.left," .").concat(am.button,",\n.").concat(om.right," .").concat(am.button," {\n    height: var(--ag-charts-toolbar-size);\n    max-width: 100%;\n    overflow: hidden;\n}\n\n.").concat(om["floating-top"]," .").concat(am.button,",\n.").concat(om["floating-bottom"]," .").concat(am.button," {\n    background: var(--ag-charts-toolbar-background-color);\n    border: var(--ag-charts-toolbar-border-critical);\n}\n\n.").concat(om.button.hidden," {\n    display: none;\n}\n\n.").concat(am.button,":hover {\n    background: var(--ag-charts-toolbar-hover-color);\n}\n\n.").concat(am.button,":disabled {\n    background: var(--ag-charts-toolbar-disabled-background-color);\n    color: var(--ag-charts-toolbar-disabled-foreground-color);\n}\n\n.").concat(am.button,":not([disabled]) {\n    cursor: pointer;\n}\n\n.").concat(am.icon," {\n    height: 1.2em;\n    width: 1.2em;\n}\n\n.").concat(am.icon," + .").concat(am.label," {\n    margin-left: var(--ag-charts-size);\n}\n\n.").concat(am.icon,",\n.").concat(am.label," {\n    pointer-events: none;\n}\n\n"),lm=class extends St{constructor(t){super(),this.ctx=t,this.enabled=!0,this.annotations=new nm(this.onGroupChanged.bind(this,"annotations"),this.onGroupButtonsChanged.bind(this,"annotations")),this.ranges=new nm(this.onGroupChanged.bind(this,"ranges"),this.onGroupButtonsChanged.bind(this,"ranges")),this.zoom=new nm(this.onGroupChanged.bind(this,"zoom"),this.onGroupButtonsChanged.bind(this,"zoom")),this.margin=10,this.floatingDetectionRange=28,this.positions={top:new Set,right:new Set,bottom:new Set,left:new Set,"floating-top":new Set,"floating-bottom":new Set},this.positionAlignments={top:{},right:{},bottom:{},left:{},"floating-top":{},"floating-bottom":{}},this.groupCallers={annotations:0,ranges:0,zoom:0},this.groupButtons={annotations:[],ranges:[],zoom:[]},this.pendingButtonToggledEvents=[],this.groupProxied=new Set,this.container=t.toolbarManager.element,this.elements={top:this.container.appendChild(wn("div")),right:this.container.appendChild(wn("div")),bottom:this.container.appendChild(wn("div")),left:this.container.appendChild(wn("div")),"floating-top":this.container.appendChild(wn("div")),"floating-bottom":this.container.appendChild(wn("div"))},Dn(rm,sm),this.renderToolbar("top"),this.renderToolbar("right"),this.renderToolbar("bottom"),this.renderToolbar("left"),this.renderToolbar("floating-top"),this.renderToolbar("floating-bottom"),this.toggleVisibilities(),this.destroyFns.push(t.interactionManager.addListener("hover",this.onHover.bind(this),31),t.interactionManager.addListener("leave",this.onLeave.bind(this),31),t.toolbarManager.addListener("button-toggled",this.onButtonToggled.bind(this)),t.toolbarManager.addListener("group-toggled",this.onGroupToggled.bind(this)),t.toolbarManager.addListener("proxy-group-options",this.onProxyGroupOptions.bind(this)),t.layoutService.addListener("layout-complete",this.onLayoutComplete.bind(this)),(()=>this.destroyElements()))}destroyElements(){for(const t of Object.values(this.elements))t.remove()}onHover(t){const{enabled:e,elements:i,floatingDetectionRange:n,ctx:{scene:s}}=this,{offsetY:a,sourceEvent:{target:o}}=t,{FloatingBottom:r,FloatingTop:l}=em;if(!e)return;const h=i[r],c=i[l],d=a>h.offsetTop-n&&a<s.canvas.element.offsetHeight||o===h,u=c.offsetTop+c.offsetHeight+n,p=a>0&&a<u||o===c;h.classList.toggle(om.floatingHidden,!d),c.classList.toggle(om.floatingHidden,!p),this.translateFloatingElements(r,d),this.translateFloatingElements(l,p)}onLeave(t){const{enabled:e,elements:i,ctx:{scene:n}}=this,{relatedTarget:s,target:a}=t.sourceEvent,{FloatingBottom:o,FloatingTop:r}=em;if(!e||a!==n.canvas.element)return;tm.some((t=>this.groupButtons[t].some((t=>t===s))))||(i[o].classList.add(om.floatingHidden),i[r].classList.add(om.floatingHidden),this.translateFloatingElements(o,!1),this.translateFloatingElements(r,!1))}onGroupChanged(t){null==this[t]||this.groupProxied.has(t)||(this.createGroup(t),this.toggleVisibilities())}onGroupButtonsChanged(t,e){this.enabled&&!this.groupProxied.has(t)&&(this.createGroupButtons(t,e),this.toggleVisibilities())}onLayoutComplete(){for(const t of im)this.elements[t].classList.remove(om.preventFlash)}onButtonToggled(t){const{group:e,value:i,enabled:n}=t;if(0!==this.groupButtons[e].length)for(const s of this.groupButtons[e])s.dataset.toolbarValue==="".concat(i)&&(s.disabled=!n);else this.pendingButtonToggledEvents.push(t)}onGroupToggled(t){const{group:e,visible:i}=t;this.toggleGroup(e,i),this.toggleVisibilities()}onProxyGroupOptions(t){const{group:e,options:i}=t;this.groupProxied.add(e),this.createGroup(e,i.enabled,i.position),this.createGroupButtons(e,i.buttons),this.toggleGroup(e,i.enabled),this[e].set(i)}createGroup(t,e,i){null!=e||(e=this[t].enabled),null!=i||(i=this[t].position);for(const n of im)e&&i===n?this.positions[n].add(t):this.positions[n].delete(t)}createGroupButtons(t,e){var i,n;for(const r of this.groupButtons[t])r.remove();this.groupButtons[t]=[];const s=null!=(i=this[t].align)?i:"start",a=null!=(n=this[t].position)?n:"top",o=this.positionAlignments[a][s];for(const r of null!=e?e:[]){const e=this.createButtonElement(t,r);null==o||o.appendChild(e),this.groupButtons[t].push(e)}}toggleGroup(t,e){e?this.groupCallers[t]+=1:this.groupCallers[t]=Math.max(0,this.groupCallers[t]-1)}processPendingEvents(){var t;const e=(null!=(t=this.pendingButtonToggledEvents)?t:[]).slice();for(const i of e)this.onButtonToggled(i);this.pendingButtonToggledEvents=[]}performLayout(t){return S(this,arguments,(function(t){var e=this;let{shrinkRect:i}=t;return function*(){const{elements:t,margin:n}=e;return t.top.classList.contains(om.hidden)||i.shrink(t.top.offsetHeight+2*n,"top"),t.right.classList.contains(om.hidden)||i.shrink(t.right.offsetWidth+n,"right"),t.bottom.classList.contains(om.hidden)||i.shrink(t.bottom.offsetHeight+2*n,"bottom"),t.left.classList.contains(om.hidden)||i.shrink(t.left.offsetWidth+n,"left"),{shrinkRect:i}}()}))}performCartesianLayout(t){return S(this,null,(function*(){const{elements:e,margin:i}=this,{seriesRect:n}=t,{FloatingBottom:s,FloatingTop:a}=em;e.top.style.top="".concat(n.y-e.top.offsetHeight-2*i,"px"),e.top.style.left="".concat(i,"px"),e.top.style.width="calc(100% - ".concat(2*i,"px)"),e.right.style.top="".concat(n.y+i,"px"),e.right.style.right="".concat(i,"px"),e.right.style.height="calc(100% - ".concat(n.y+2*i,"px)"),e.bottom.style.bottom="".concat(i,"px"),e.bottom.style.left="".concat(i,"px"),e.bottom.style.width="calc(100% - ".concat(2*i,"px)"),e.left.style.top="".concat(n.y,"px"),e.left.style.left="".concat(i,"px"),e.left.style.height="calc(100% - ".concat(n.y+2*i,"px)"),e[a].style.top="".concat(n.y,"px"),e[a].style.paddingTop="".concat(i,"px"),e[s].style.top="".concat(n.y+n.height-e[s].offsetHeight,"px"),e[s].style.paddingBottom="".concat(i,"px")}))}toggleVisibilities(){var t;if(null==this.elements)return;const e=t=>this[t].enabled&&this.groupCallers[t]>0,i=t=>e=>"string"!==typeof e.value&&"number"!==typeof e.value||"".concat(e.value)===t.dataset.toolbarValue;for(const n of im){const t=this.enabled&&Array.from(this.positions[n].values()).some(e);this.elements[n].classList.toggle(om.hidden,!t)}for(const n of tm){if(null==this[n])continue;const s=e(n);for(const e of this.groupButtons[n]){const a=s&&(null==(t=this[n].buttons)?void 0:t.some(i(e)));e.classList.toggle(om.button.hidden,!a)}}}translateFloatingElements(t,e){const{elements:i,margin:n,positionAlignments:s}=this,a=i[t],o=Object.values(s[t]);for(const r of o)r.style.transform=e&&""!==r.style.transform?"translateY(0)":"translateY(".concat(a.offsetHeight+n,"px)")}renderToolbar(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";const e=this.elements[t];e.classList.add(sm,om[t],om.preventFlash),"floating-top"!==t&&"floating-bottom"!==t||e.classList.add(om.floatingHidden);for(const i of $g){const n=wn("div");n.classList.add(am.align,om.align[i]),e.appendChild(n),this.positionAlignments[t][i]=n}}createButtonElement(t,e){const i=wn("button");i.classList.add(am.button),i.dataset.toolbarGroup=t,i.tabIndex=-1,"string"!==typeof e.value&&"number"!==typeof e.value||(i.dataset.toolbarValue="".concat(e.value)),e.tooltip&&(i.title=e.tooltip);let n="";return null!=e.icon&&(n='<span class="ag-charts-icon-'.concat(e.icon," ").concat(am.icon,'"></span>')),null!=e.label&&(n="".concat(n,'<span class="').concat(am.label,'">').concat(e.label,"</span>")),i.innerHTML=n,i.onclick=this.onButtonPress.bind(this,t,e.value),this.destroyFns.push((()=>i.remove())),i}onButtonPress(t,e){this.ctx.toolbarManager.pressButton(t,e)}};x([qr((t=>{t.processPendingEvents(),t.toggleVisibilities()})),Xs($s)],lm.prototype,"enabled",2);var hm=864e5,cm=30*hm,dm={type:"root",optionsKey:"toolbar",packageType:"community",chartTypes:["cartesian"],instanceConstructor:lm,themeTemplate:{toolbar:{enabled:!0,annotations:{enabled:!1,position:"left",align:"start",buttons:[{label:"Li",value:"line"},{label:"PCh",value:"parallel-channel"}]},ranges:{enabled:!1,position:"top",align:"start",buttons:[{label:"1m",value:cm},{label:"3m",value:3*cm},{label:"6m",value:6*cm},{label:"YTD",value:(t,e)=>[new Date("".concat(new Date(e).getFullYear(),"-01-01")).getTime(),e]},{label:"1y",value:365*hm},{label:"All",value:(t,e)=>[t,e]}]},zoom:{enabled:!1,position:"top",align:"end",buttons:[{icon:"zoom-out",tooltip:"Zoom out",value:"zoom-out"},{icon:"zoom-in",tooltip:"Zoom in",value:"zoom-in"},{icon:"pan-left",tooltip:"Pan left",value:"pan-left"},{icon:"pan-right",tooltip:"Pan right",value:"pan-right"},{icon:"pan-start",tooltip:"Pan to the start",value:"pan-start"},{icon:"pan-end",tooltip:"Pan to the end",value:"pan-end"},{icon:"reset",tooltip:"Reset the zoom",value:"reset"}]}}}};function um(){for(const t of kt.modules){if("enterprise"!==t.packageType||ce(t)||E.errorOnce("Unexpected enterprise module registered: "+t.identifier),"root"===t.type&&t.themeTemplate)for(const e of t.chartTypes)re.set(e,t.themeTemplate);if("series"===t.type){if(t.chartTypes.length>1)throw new Error("AG Charts - Module definition error: ".concat(t.identifier));Le.register(t.identifier,t)}if("series-option"===t.type&&t.themeTemplate)for(const e of t.seriesTypes)Le.setThemeTemplate(e,t.themeTemplate);if("axis-option"===t.type&&t.themeTemplate)for(const e of t.axisTypes){const i=t.themeTemplate[e],n=m(m({},t.themeTemplate),i);for(const e of t.axisTypes)delete n[e];wt.setThemeTemplate(e,n)}"axis"===t.type&&wt.register(t.identifier,t),"legend"===t.type&&Re.register(t.identifier,t)}if(kt.hasEnterpriseModules()){const t=le.filter((t=>{let{useCount:e}=t;return null==e||0===e}));t.length>0&&E.errorOnce("Enterprise modules expected but not registered: ",t)}}var pm=class t extends od{constructor(t,e){super(t,e)}performLayout(){return S(this,null,(function*(){const e=yield b(t.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:n,annotationRoot:s,highlightRoot:a}=this,o=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e;for(const t of[n,s,a])t.translationX=Math.floor(e.x),t.translationY=Math.floor(e.y);return yield Promise.all(this.series.map((t=>S(this,null,(function*(){yield t.update({seriesRect:e})}))))),n.visible=this.series[0].visible,n.setClipRectInGroupCoordinateSpace(new ts(e.x,e.y,e.width,e.height)),this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:!0},axes:[]}),e}))}};pm.className="HierarchyChart",pm.type="hierarchy";var gm=pm,mm=class extends kl{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}};x([Xs(Fa(["polygon","circle"],"a polar axis shape"))],mm.prototype,"shape",2),x([Xs(aa)],mm.prototype,"innerRadiusRatio",2);var fm=class t extends od{constructor(t,e){super(t,e),this.padding=new $l(40),this.axisGroup.zIndex=6}performLayout(){return S(this,null,(function*(){const e=yield b(t.prototype,this,"performLayout").call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach((t=>t.update())),this.hoverRect=e,this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e}))}updateAxes(t,e,i){var n,s;const a=this.axes.find((t=>"x"===t.direction)),o=this.axes.find((t=>"y"===t.direction));if(!(a instanceof mm)||!(o instanceof mm))return;const r=a.scale,l=null==(n=r.ticks)?void 0:n.call(r).map((t=>r.convert(t))),h=o.innerRadiusRatio;a.innerRadiusRatio=h,null==(s=a.computeRange)||s.call(a),a.gridLength=i,o.gridAngles=l,o.gridRange=a.range,o.range=[i,i*h],[a,o].forEach((i=>{i.translation.x=t,i.translation.y=e,i.calculateLayout()}))}computeSeriesRect(t){const{seriesArea:{padding:e}}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return S(this,null,(function*(){var e=this;const i=this.series.filter((t=>t instanceof Fg)),n=this.axes.filter((t=>t instanceof mm)),s=(t,e,n)=>{this.updateAxes(t,e,n),i.forEach((i=>{i.centerX=t,i.centerY=e,i.radius=n}));const s=i.filter((t=>t instanceof Jg||t instanceof Gg));if(s.length>1){const t=s.map((t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}})).sort(((t,e)=>t.innerRadius-e.innerRadius));t.at(-1).series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},a=t.x+t.width/2,o=t.y+t.height/2,r=Math.max(0,Math.min(t.width,t.height)/2);let l=r;s(a,o,l);const h=function(){for(var h=arguments.length,c=new Array(h),d=0;d<h;d++)c[d]=arguments[d];return S(e,[...c],(function(){var e=this;let{hideWhenNecessary:h=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){const c=[];for(const e of[...n,...i]){const i=yield e.computeLabelsBBox({hideWhenNecessary:h},t);i&&c.push(i)}if(0===c.length)return void s(a,o,r);const d=ts.merge(c),u=e.refineCircle(d,l,t);s(u.centerX,u.centerY,u.radius),u.radius!==l&&(l=u.radius)}()}))};return yield h(),yield h(),yield h(),yield h({hideWhenNecessary:!0}),yield h({hideWhenNecessary:!0}),{radius:l,centerX:a,centerY:o}}))}refineCircle(t,e,i){const n=-e,s=-e,a=e,o=e;let r=Math.max(0,n-t.x),l=Math.max(0,s-t.y),h=Math.max(0,t.x+t.width-a),c=Math.max(0,t.y+t.height-o);r=h=Math.max(r,h),l=c=Math.max(l,c);const d=i.width-r-h,u=i.height-l-c;let p=Math.min(d,u)/2;const g=.5*i.width/2,m=.5*i.height/2,f=Math.min(g,m);if(p<f){p=f;const t=r+h;if(2*p+(l+c)>i.height){const t=i.height-2*p;2*Math.min(l,c)>t?(l=t/2,c=t/2):l>c?l=t-c:c=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(r,h)>t?(r=t/2,h=t/2):r>h?r=t-h:h=t-r}}const y=r+2*p+h,v=l+2*p+c;return{centerX:i.x+(i.width-y)/2+r+p,centerY:i.y+(i.height-v)/2+l+p,radius:p}}};fm.className="PolarChart",fm.type="polar";var ym=fm,vm=Math.PI/180,xm=t=>t*vm,bm=t=>-Math.log(Math.tan(.25*Math.PI+t*vm*.5)),Sm=t=>t/vm,km=t=>(Math.atan(Math.exp(-t))-.25*Math.PI)/(.5*vm),wm=class t{constructor(e,i){this.domain=e,this.range=i,this.type="mercator",this.bounds=t.bounds(e)}static bounds(t){const[[e,i],[n,s]]=t,a=xm(e),o=bm(i),r=xm(n),l=bm(s);return new ts(Math.min(a,r),Math.min(o,l),Math.abs(r-a),Math.abs(l-o))}static fixedScale(){return new t([[Sm(0),km(0)],[Sm(1),km(1)]],[[0,0],[1,1]])}convert(t){let[e,i]=t;const[[n,s],[a,o]]=this.range,r=(a-n)/this.bounds.width,l=(o-s)/this.bounds.height;return[(xm(e)-this.bounds.x)*r+n,(bm(i)-this.bounds.y)*l+s]}invert(t){let[e,i]=t;const[[n,s],[a,o]]=this.range,r=(a-n)/this.bounds.width,l=(o-s)/this.bounds.height;return[Sm((e-n)/r+this.bounds.x),km((i-s)/l+this.bounds.y)]}};function Mm(t){return"map-shape"===t.type||"map-line"===t.type||"map-marker"===t.type||"map-shape-background"===t.type||"map-line-background"===t.type}var Dm=class t extends od{constructor(t,e){super(t,e),this.xAxis=new iu(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new iu(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}updateData(){return S(this,null,(function*(){yield b(t.prototype,this,"updateData").call(this);const{topology:e}=this.getOptions();this.series.forEach((t=>{Mm(t)&&t.setChartTopology(e)}))}))}performLayout(){return S(this,null,(function*(){const e=yield b(t.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:n,annotationRoot:s,highlightRoot:a}=this,o=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e;const r=this.series.filter(Mm),l=r.reduce(((t,e)=>{if(!e.visible)return t;const i=e.topologyBounds;return null==i?t:null==t?i:(t.merge(i),t)}),void 0);let h;if(null!=l){const{lon0:t,lat0:i,lon1:n,lat1:s}=l,a=[[t,i],[n,s]],o=wm.bounds(a),{width:r,height:c}=e,d=Math.min(r/o.width,c/o.height),u=o.width*d,p=o.height*d,g=(r-u)/2,m=(c-p)/2,f=g,y=m,v=g+u,x=m+p,b=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),S=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),k=(v-f)/(b.max-b.min),w=f-k*b.min,M=(x-y)/(1-S.min-(1-S.max)),D=y-M*(1-S.max);h=new wm(a,[[w,D],[w+k,D+M]])}r.forEach((t=>{t.scale=h}));const c=this.series.some((t=>t.visible));n.visible=c;for(const t of[n,s,a])t.translationX=Math.floor(e.x),t.translationY=Math.floor(e.y),t.setClipRectInGroupCoordinateSpace(new ts(e.x,e.y,e.width,e.height));return this.ctx.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.ctx.scene.width,height:this.ctx.scene.height},clipSeries:!1,series:{rect:o,paddedRect:e,visible:c},axes:[]}),e}))}};Dm.className="TopologyChart",Dm.type="topology";var Cm=Dm,Lm=In.create(!0,"opts");function Rm(t){if(ue(t))return"cartesian";if(pe(t))return"polar";if(ge(t))return"hierarchy";if(me(t))return"topology";throw new Error("AG Chart - unknown type of chart for options with type: ".concat(t.type))}var Im=class t{static licenseCheck(t){var e,i,n,s;this.licenseChecked||(this.licenseManager=null==(i=(e=bt).licenseManager)?void 0:i.call(e,t),null==(n=this.licenseManager)||n.setLicenseKey(this.licenseKey,this.gridContext),null==(s=this.licenseManager)||s.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static setGridContext(t){this.gridContext=t}static getLicenseDetails(t){var e,i;return null==(i=(e=bt).licenseManager)?void 0:i.call(e,{}).getLicenseDetails(t)}static getInstance(t){return Em.getInstance(t)}static create(t){var e,i,n;this.licenseCheck(t);const s=Em.createOrUpdate(t);return(null==(e=this.licenseManager)?void 0:e.isDisplayWatermark())&&(null==(n=(i=bt).injectWatermark)||n.call(i,s.chart.element,this.licenseManager.getWatermarkMessage())),s}static update(e,i){if(!Qd.isInstance(e))throw new Error(t.INVALID_CHART_REF_MESSAGE);Em.createOrUpdate(i,e)}static updateDelta(e,i){if(!Qd.isInstance(e))throw new Error(t.INVALID_CHART_REF_MESSAGE);Em.updateUserDelta(e,i)}static download(e,i){if(!(e instanceof Qd))throw new Error(t.INVALID_CHART_REF_MESSAGE);Em.download(e,i).catch((t=>E.errorOnce(t)))}static getImageDataURL(e,i){if(!(e instanceof Qd))throw new Error(t.INVALID_CHART_REF_MESSAGE);return Em.getImageDataURL(e,i)}};Im.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",Im.licenseChecked=!1,Im.gridContext=!1;var Am=Im,Tm=class{static warnDeprecated(t){Nn()("AgChart.".concat(t),"Use AgCharts.".concat(t," instead"))}static create(t){return this.warnDeprecated("create"),Am.create(t)}static update(t,e){return this.warnDeprecated("update"),Am.update(t,e)}static updateDelta(t,e){return this.warnDeprecated("updateDelta"),Am.updateDelta(t,e)}static download(t,e){return this.warnDeprecated("download"),Am.download(t,e)}static getImageDataURL(t,e){return this.warnDeprecated("getImageDataURL"),Am.getImageDataURL(t,e)}},Nm=class t{static getInstance(t){const e=od.getInstance(t);return e?Qd.chartInstances.get(e):void 0}static initialiseModules(){t.initialised||(!function(){kt.register(pu,Ru,Eu,dm,Ap,qp,sg,cg,gg,Vg,Qg,rg);for(const t of[iu,Ll,ou,Gl,su])wt.register(t.type,{instanceConstructor:t,hidden:t===Gl})}(),um(),t.initialised=!0)}static createOrUpdate(e,i){t.initialiseModules(),Lm(">>> AgChartV2.createOrUpdate() user options",e);const n=e,{overrideDevicePixelRatio:s,document:a,window:o}=n,r=y(n,["overrideDevicePixelRatio","document","window"]),l=new Tn(r,{overrideDevicePixelRatio:s,document:a,window:o});let h=null==i?void 0:i.chart;return null!=h&&Rm(r)===Rm(h.processedOptions)||(h=t.createChartInstance(l,h)),null==i?i=new Qd(h):i.chart=h,Lm.check()&&"undefined"!==typeof window&&(null!=window.agChartInstances||(window.agChartInstances={}),window.agChartInstances[h.id]=h),h.queuedUserOptions.push(r),h.requestFactoryUpdate((t=>{t.applyOptions(l),t.queuedUserOptions.splice(0,t.queuedUserOptions.indexOf(r))})),i}static updateUserDelta(e,i){we(i=Se(i,{shallow:["data"]}),(t=>{if("object"===typeof t)for(const[e,i]of Object.entries(t))"undefined"===typeof i&&Object.assign(t,{[e]:Symbol("UNSET")})}),{skip:["data"]});const{chart:n}=e,s=n.getOptions(),a=Zt(i,s);Lm(">>> AgChartV2.updateUserDelta() user delta",i),Lm("AgChartV2.updateUserDelta() - base options",s),t.createOrUpdate(a,e)}static download(e,i){return S(this,null,(function*(){try{const n=yield t.prepareResizedChart(e,i);n.chart.ctx.scene.download(null==i?void 0:i.fileName,null==i?void 0:i.fileFormat),n.destroy()}catch(n){E.errorOnce(n)}}))}static getImageDataURL(e,i){return S(this,null,(function*(){const n=yield t.prepareResizedChart(e,i),s=n.chart.ctx.scene.getDataURL(null==i?void 0:i.fileFormat);return n.destroy(),s}))}static prepareResizedChart(e){return S(this,arguments,(function(e){let{chart:i}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var e,s,a,o;const r=null!=(s=null!=(e=n.width)?e:i.width)?s:i.ctx.scene.canvas.width,l=null!=(o=null!=(a=n.height)?a:i.height)?o:i.ctx.scene.canvas.height,h=Zt({container:document.createElement("div"),overrideDevicePixelRatio:1,autoSize:!1,width:r,height:l},kt.hasEnterpriseModules()&&{animation:{enabled:!1}},i.userOptions),c=t.createOrUpdate(h);return c.chart.ctx.zoomManager.updateZoom("agChartV2",i.ctx.zoomManager.getZoom()),i.series.forEach(((t,e)=>{t.visible||(c.chart.series[e].visible=!1)})),i.update(0,{forceNodeDataRefresh:!0}),yield c.chart.waitForUpdate(),c}()}))}static createChartInstance(e,i){const n=null==i?void 0:i.destroy({keepTransferableResources:!0});return new(t.getChartByOptions(e.processedOptions))(e,n)}static getChartByOptions(t){if(ue(t))return qd;if(ge(t))return gm;if(pe(t))return ym;if(me(t))return Cm;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};Nm.initialised=!1;var Em=Nm,Om="9.3.2",Pm={};v(Pm,{Arc:()=>Bm,BBox:()=>ts,BandScale:()=>Hs,Caption:()=>ol,ChangeDetectableProperties:()=>Vu,Circle:()=>bd,ContinuousScale:()=>qa,Diamond:()=>Md,DropShadow:()=>Ku,ExtendedPath2D:()=>ud,Group:()=>Mo,HdpiCanvas:()=>Wl,Image:()=>Wm,Label:()=>zo,Line:()=>zr,LinearGradientFill:()=>Fm,LinearScale:()=>$d,Marker:()=>xd,Node:()=>hs,OrdinalTimeScale:()=>xo,Path:()=>gd,PointerEvents:()=>rs,RadialColumnShape:()=>Gm,Rect:()=>du,RedrawType:()=>es,Scene:()=>jl,SceneChangeDetection:()=>ns,ScenePathChangeDetection:()=>pd,Sector:()=>Dg,SectorBox:()=>mg,Selection:()=>Br,Shape:()=>Io,Square:()=>Id,Text:()=>Fo,Tooltip:()=>al,Triangle:()=>Nd,easing:()=>ms,getFont:()=>Go,getMarker:()=>Bd,getRadialColumnWidth:()=>zm,motion:()=>Vm,nearestSquared:()=>Jn,nearestSquaredInContainer:()=>Qn,toRadians:()=>Gs,toTooltipHtml:()=>nl});var Bm=class extends gd{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return Hn(Ps(this.startAngle),Ps(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?t.closePath():2!==this.type||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new ts(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),n=this.computeBBox();return 0!==this.type&&n.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}};Bm.className="Arc",Bm.defaultStyles=Object.assign({},Io.defaultStyles,{lineWidth:1,fillStyle:null}),x([pd()],Bm.prototype,"centerX",2),x([pd()],Bm.prototype,"centerY",2),x([pd()],Bm.prototype,"radius",2),x([pd()],Bm.prototype,"startAngle",2),x([pd()],Bm.prototype,"endAngle",2),x([pd()],Bm.prototype,"counterClockwise",2),x([pd()],Bm.prototype,"type",2);var Fm=class extends Io{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,n;return null!=(n=null==(i=this.mask)?void 0:i.isPointInPath(t,e))&&n}computeBBox(){var t;return null==(t=this.mask)?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:n,devicePixelRatio:s}=t,a=1/s,o=null==e?void 0:e.computeTransformedBBox();if(null==e||null==i||null==o)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),n.save(),n.clip(e.path.getPath2D()),n.setTransform(s,0,0,s,0,0);const r=Math.floor(o.x),l=Math.ceil(o.x+o.width),h=Math.floor(o.y),c=Math.ceil(o.y+o.height),d=new Qp,[u,p]="to-right"===this.direction?[r,l]:[h,c];if(d.domain=i.map(((t,e)=>u+(p-u)*e/(i.length-1))),d.range=i,d.update(),"to-right"===this.direction){const t=c-h;for(let e=r;e<=l;e+=a)n.fillStyle=d.convert(e),n.fillRect(e,h,a,t)}else{const t=l-r;for(let e=h;e<=c;e+=a)n.fillStyle=d.convert(e),n.fillRect(r,e,t,a)}n.restore()}};function _m(t,e,i){const n=Math.sqrt(p(t,2)+p(e,2)),s=Math.atan2(e,t)+i;return{x:Math.cos(s)*n,y:Math.sin(s)*n}}x([ns({redraw:3})],Fm.prototype,"direction",2),x([ns({redraw:3})],Fm.prototype,"stops",2),x([ns({redraw:3})],Fm.prototype,"_mask",2);var Gm=class extends gd{constructor(){super(...arguments),this.borderPath=new ud,this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}getRotation(){const{startAngle:t,endAngle:e}=this;return Ps(t+Ws(t,e)/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:e,outerRadius:i,path:n}=this,s=-t/2,a=t/2,o=-i,r=-e,l=this.getRotation(),h=[[s,r],[s,o],[a,o],[a,r],[s,r]].map((t=>{let[e,i]=t;return _m(e,i,l)}));n.clear(!0),n.moveTo(h[0].x,h[0].y),n.lineTo(h[1].x,h[1].y),n.lineTo(h[2].x,h[2].y),n.lineTo(h[3].x,h[3].y),n.lineTo(h[0].x,h[0].y),n.closePath()}updateBeveledPath(){const{columnWidth:t,path:e,outerRadius:i,innerRadius:n,axisInnerRadius:s,axisOuterRadius:a,isRadiusAxisReversed:o}=this,r=Hn(n,s),l=Math.asin(t/2/n),h=this.getRotation(),c=(t,e)=>_m(t,e,h),d=(t,e)=>Math.sqrt(p(t,2)+p(e,2)),u=(t,e)=>e>t?0:Math.sqrt(p(t,2)-p(e,2)),g=(t,e,i)=>i?t<e:t>e,m=r&&!isNaN(l)&&l<Math.PI/6;let f=-t/2,y=t/2;const v=-i,x=-n*(m?Math.cos(l):1),b=g(a,d(n,t/2),!o);if(b){const t=u(a,n);f=-t,y=t}e.clear(!0);const S=c(f,x);e.moveTo(S.x,S.y);const k=Hn(n,i),w=g(a,d(i,t/2),!o);if(k&&m)e.arc(0,0,n,Ps(-l-Math.PI/2)+h,Ps(l-Math.PI/2)+h,!1);else if(w){const n=-u(a,t/2),s=u(a,i);if(!b){const t=c(f,n);e.lineTo(t.x,t.y)}if(e.arc(0,0,a,Math.atan2(n,f)+h,Math.atan2(v,-s)+h,!1),!Hn(s,0)){const t=c(s,v);e.lineTo(t.x,t.y)}e.arc(0,0,a,Math.atan2(v,s)+h,Math.atan2(n,y)+h,!1)}else{const t=c(f,v),i=c(y,v);e.lineTo(t.x,t.y),e.lineTo(i.x,i.y)}const M=c(y,x);if(e.lineTo(M.x,M.y),m)e.arc(0,0,n,Ps(l-Math.PI/2)+h,Ps(-l-Math.PI/2)+h,!0);else{const t=c(f,x);e.lineTo(t.x,t.y)}e.closePath()}};function zm(t,e,i,n,s){const a=Ws(t,e),o=a*(1-n)/2;if(t+=o,e-=o,a<.001)return 2*i*s;if(a>=2*Math.PI){const i=t+a/2;t=i-Math.PI,e=i+Math.PI}const r=i*Math.cos(t),l=i*Math.sin(t),h=i*Math.cos(e),c=i*Math.sin(e),d=Math.floor(Math.sqrt(p(r-h,2)+p(l-c,2))),u=2*i*s;return Math.max(1,Math.min(u,d))}Gm.className="RadialColumnShape",x([pd()],Gm.prototype,"isBeveled",2),x([pd()],Gm.prototype,"columnWidth",2),x([pd()],Gm.prototype,"startAngle",2),x([pd()],Gm.prototype,"endAngle",2),x([pd()],Gm.prototype,"outerRadius",2),x([pd()],Gm.prototype,"innerRadius",2),x([pd()],Gm.prototype,"axisInnerRadius",2),x([pd()],Gm.prototype,"axisOuterRadius",2),x([pd()],Gm.prototype,"isRadiusAxisReversed",2);var Wm=class extends hs{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:n}=t;if(0===this.dirty&&!i)return void(n&&n.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const s=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(s,0,0,s.width,s.height,this.x,this.y,this.width,this.height),super.render(t)}};x([ns({redraw:3})],Wm.prototype,"x",2),x([ns({redraw:3})],Wm.prototype,"y",2),x([ns({redraw:3})],Wm.prototype,"width",2),x([ns({redraw:3})],Wm.prototype,"height",2),x([ns({redraw:3})],Wm.prototype,"opacity",2);var Vm=m(m({},Pn),mr),Km={};v(Km,{CARTESIAN_AXIS_TYPE:()=>Ne,ChartTheme:()=>yi,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>ci,DEFAULT_ANNOTATION_HANDLE_FILL:()=>di,DEFAULT_ANNOTATION_STROKE:()=>hi,DEFAULT_AXIS_GRID_COLOUR:()=>Ze,DEFAULT_AXIS_LINE_COLOUR:()=>qe,DEFAULT_BACKGROUND_COLOUR:()=>Qe,DEFAULT_COLOURS:()=>ti,DEFAULT_CROSS_LINES_COLOUR:()=>Je,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>oi,DEFAULT_FONT_FAMILY:()=>Ye,DEFAULT_HIERARCHY_FILLS:()=>ri,DEFAULT_HIERARCHY_STROKES:()=>li,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>Xe,DEFAULT_INVERTED_LABEL_COLOUR:()=>Ue,DEFAULT_LABEL_COLOUR:()=>He,DEFAULT_MUTED_LABEL_COLOUR:()=>je,DEFAULT_POLAR_SERIES_STROKE:()=>ai,DEFAULT_SHADOW_COLOUR:()=>$e,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:()=>si,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:()=>ii,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:()=>ei,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:()=>ni,EXTENDS_AXES_DEFAULTS:()=>_e,EXTENDS_AXES_GRID_LINE_DEFAULTS:()=>We,EXTENDS_AXES_LINE_DEFAULTS:()=>Ge,EXTENDS_AXES_TICK_DEFAULTS:()=>ze,EXTENDS_CARTESIAN_MARKER_DEFAULTS:()=>Ke,EXTENDS_SERIES_DEFAULTS:()=>Ve,FONT_SIZE:()=>Ie,FONT_WEIGHT:()=>Ae,IS_DARK_THEME:()=>Fe,POLAR_AXIS_SHAPE:()=>Oe,POLAR_AXIS_TYPE:()=>Ee,POSITION:()=>Te,getChartTheme:()=>rn,markerPaletteFactory:()=>Pu,singleSeriesPaletteFactory:()=>Ou,themes:()=>Ym});var Ym=Jt(an,(t=>null==t?void 0:t())),Hm={};v(Hm,{BandScale:()=>Hs,ColorScale:()=>Qp,ContinuousScale:()=>qa,Invalidating:()=>Ks,LinearScale:()=>$d,OrdinalTimeScale:()=>xo,TimeScale:()=>yo});var Um={};function Xm(t,e){const i={};if(Array.isArray(e))for(let n=0;n<t.length;n++)i["".concat(t[n])]=e[n];else for(let n=0;n<t.length;n++)i["".concat(t[n])]=e;return i}v(Um,{Color:()=>ps,Logger:()=>E,Padding:()=>$l,angleBetween:()=>Ws,areArrayItemsStrictlyEqual:()=>Yr,areArrayNumbersEqual:()=>Hr,bifurcate:()=>fn,checkDatum:()=>jo,clamp:()=>Wn,clampArray:()=>Vn,countFractionDigits:()=>qn,createId:()=>_n,deepClone:()=>Se,displacePointFromVector:()=>Vs,extent:()=>ln,findMinMax:()=>Kn,findRangeExtent:()=>Yn,isBetweenAngles:()=>_s,isContinuous:()=>Xo,isDate:()=>Pt,isDenseInterval:()=>mo,isEqual:()=>Hn,isNegative:()=>Un,isNumber:()=>Kt,isNumberEqual:()=>Hn,isNumberObject:()=>Uo,isString:()=>Wt,isStringObject:()=>Ho,jsonApply:()=>Me,jsonDiff:()=>be,jsonWalk:()=>we,mod:()=>Zn,normalisedExtent:()=>hn,normalisedExtentWithMetadata:()=>cn,normalizeAngle180:()=>Fs,normalizeAngle360:()=>Ps,normalizeAngle360Inclusive:()=>Bs,range:()=>go,resetIds:()=>Fn,round:()=>Xn,sanitizeHtml:()=>_u,setAttribute:()=>Jr,shallowClone:()=>ke,tickFormat:()=>Er,tickStep:()=>po,ticks:()=>co,toDegrees:()=>zs,toFixed:()=>jn,toRadians:()=>Gs,transformIntegratedCategoryValue:()=>Zo,zipObject:()=>Xm});var jm={};function Zm(t){let{defs:e,values:i,xAxis:n,yAxis:s}=t;if(!n||!s)throw new Error("Axes must be defined");const a={};for(const[o,{def:r}]of e)if(Object.hasOwn(i,o)){const{scale:t}="key"===r.type?n:s;a[o]=Math.round(t.convert(i[o]))}return a}v(jm,{AND:()=>Zs,ARRAY:()=>la,ARRAY_OF:()=>ha,AbstractBarSeries:()=>Pp,AbstractBarSeriesProperties:()=>Op,ActionOnSet:()=>Zr,Animation:()=>Is,AnimationManager:()=>xh,AreaSeriesTag:()=>Dp,Axis:()=>kl,AxisLabel:()=>cl,AxisTick:()=>Ha,BOOLEAN:()=>$s,BOOLEAN_ARRAY:()=>va,Background:()=>uu,BackgroundModule:()=>pu,BaseModuleInstance:()=>St,BaseProperties:()=>fe,COLOR_STRING:()=>fa,COLOR_STRING_ARRAY:()=>ya,CartesianAxis:()=>Dl,CartesianSeries:()=>Xd,CartesianSeriesNodeEvent:()=>Hd,CartesianSeriesProperties:()=>Ud,CategoryAxis:()=>Ll,CategoryAxisTick:()=>Cl,ChartAxisDirection:()=>Ua,ChartEventManager:()=>Sh,ChartOptions:()=>Tn,ChartUpdateType:()=>Vh,ContextMenuRegistry:()=>kh,CursorManager:()=>Mh,DATE:()=>pa,DATE_ARRAY:()=>Sa,DATE_OR_DATETIME_MS:()=>ga,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Kd,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Yd,DEFAULT_TOOLTIP_CLASS:()=>$r,DEFAULT_TOOLTIP_DARK_CLASS:()=>tl,DEGREE:()=>oa,DIRECTION:()=>Ea,DataController:()=>ec,DataModel:()=>$h,DataModelSeries:()=>Fd,DataService:()=>ah,Default:()=>Us,Deprecated:()=>En,DeprecatedAndRenamedTo:()=>On,EMPTY_TOOLTIP_CONTENT:()=>el,FONT_STYLE:()=>La,FONT_WEIGHT:()=>Ra,FUNCTION:()=>ta,GREATER_THAN:()=>ua,GestureDetector:()=>Ch,GroupedCategoryAxis:()=>Gl,HierarchyNode:()=>Jm,HierarchySeries:()=>Qm,HierarchySeriesProperties:()=>$m,HighlightManager:()=>Lh,HighlightStyle:()=>Wd,INTERACTION_RANGE:()=>Pa,InteractionManager:()=>yh,InteractionState:()=>mh,LABEL_PLACEMENT:()=>Ba,LESS_THAN:()=>da,LINE_CAP:()=>wa,LINE_DASH:()=>Da,LINE_JOIN:()=>Ma,Layers:()=>Yo,LayoutService:()=>zh,LonLatBBox:()=>tf,MARKER_SHAPE:()=>Yu,MATCHING_CROSSLINE_TYPE:()=>qo,MAX_SPACING:()=>Ga,MIN_SPACING:()=>_a,MercatorScale:()=>wm,Motion:()=>ms,NAN:()=>na,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>As,NUMBER:()=>ia,NUMBER_ARRAY:()=>xa,NUMBER_OR_NAN:()=>ra,Navigator:()=>Nu,NavigatorModule:()=>Eu,OBJECT:()=>Js,OBJECT_ARRAY:()=>ka,OR:()=>qs,OVERFLOW_STRATEGY:()=>Na,ObserveChanges:()=>qr,PHASE_METADATA:()=>Cs,PHASE_ORDER:()=>Ds,PLACEMENT:()=>Oa,PLAIN_OBJECT:()=>Qs,POINTER_INTERACTION_TYPES:()=>ch,POSITION:()=>Ca,POSITIVE_NUMBER:()=>sa,PolarAxis:()=>mm,PolarSeries:()=>Fg,PropertiesArray:()=>ye,ProxyOnWrite:()=>Xr,ProxyProperty:()=>Ur,ProxyPropertyOnWrite:()=>jr,QUICK_TRANSITION:()=>Ms,RATIO:()=>aa,RepeatType:()=>Ls,SKIP_JS_BUILTINS:()=>te,SMALLEST_KEY_INTERVAL:()=>Lc,SORT_DOMAIN_GROUPS:()=>Rc,STRING:()=>ea,STRING_ARRAY:()=>ba,Series:()=>Qc,SeriesGroupingChangedEvent:()=>Jc,SeriesItemHighlightStyle:()=>_d,SeriesMarker:()=>Hu,SeriesNodeEvent:()=>qc,SeriesNodePickMode:()=>Gc,SeriesProperties:()=>Vd,SeriesTooltip:()=>Xu,StateMachine:()=>yr,TEXT_ALIGN:()=>Aa,TEXT_WRAP:()=>Ia,ToolbarManager:()=>Fh,Tooltip:()=>al,TooltipManager:()=>Gh,TooltipPosition:()=>sl,UNION:()=>Fa,UpdateService:()=>Kh,VERTICAL_ALIGN:()=>Ta,Validate:()=>Xs,ZoomManager:()=>sc,__FORCE_MODULE_DETECTION:()=>ef,accumulateGroup:()=>Bc,accumulatedValue:()=>Dc,accumulativeValueProperty:()=>Xc,addHitTestersToQuadtree:()=>Np,adjustLabelPlacement:()=>jp,allInStringUnion:()=>vn,animationValidation:()=>Ec,area:()=>Mc,arraysEqual:()=>dn,assignJsonApplyConstructedArray:()=>ja,backfillPathPointData:()=>ap,basicContinuousCheckDatumValidation:()=>zc,bifurcate:()=>fn,buildFormatter:()=>so,buildResetPathFn:()=>dp,calculateDefaultTimeTickFormat:()=>ro,calculatePlacement:()=>Qr,checkCrisp:()=>zp,childrenIter:()=>Tp,circularSliceArray:()=>mn,clamp:()=>Wn,clampArray:()=>Vn,collapsedStartingBarPosition:()=>Vp,computeBarFocusBounds:()=>Up,computeMarkerFocusBounds:()=>ep,computeSectorFocusBounds:()=>Bg,convertValuesToScaleByDefs:()=>Zm,countFractionDigits:()=>qn,createDatumId:()=>_c,createDeprecationWarning:()=>Nn,createElement:()=>wn,dateToNumber:()=>ao,deconstructSelectionsOrNodes:()=>Rs,deepClone:()=>Se,deepMerge:()=>jt,defaultTimeTickFormat:()=>oo,determinePathStatus:()=>kp,diff:()=>Fc,downloadUrl:()=>Mn,enterpriseModule:()=>bt,extent:()=>ln,extractDecoratedProperties:()=>At,findMinMax:()=>Kn,findQuadtreeMatch:()=>Ep,findRangeExtent:()=>Yn,fixNumericExtent:()=>qh,fromToMotion:()=>Ts,getDocument:()=>Sn,getMissCount:()=>Jh,getPath:()=>$t,getRectConfig:()=>Gp,getWindow:()=>kn,groupAccumulativeValueProperty:()=>Zc,groupAverage:()=>wc,groupBy:()=>gn,groupCount:()=>kc,groupSum:()=>bc,injectStyle:()=>Dn,isArray:()=>Nt,isBoolean:()=>Et,isDate:()=>Ot,isDecoratedObject:()=>Rt,isDefined:()=>Tt,isEnumKey:()=>Ht,isEnumValue:()=>Ut,isEqual:()=>Hn,isFiniteNumber:()=>Kt,isFunction:()=>Ft,isHtmlElement:()=>Yt,isNegative:()=>Un,isNumber:()=>Vt,isObject:()=>_t,isObjectLike:()=>Gt,isPlainObject:()=>zt,isProperties:()=>ve,isRegExp:()=>Bt,isString:()=>Wt,isSymbol:()=>Xt,isValidDate:()=>Pt,jsonApply:()=>Me,jsonDiff:()=>be,jsonWalk:()=>we,keyProperty:()=>Yc,listDecoratedProperties:()=>It,mapIterable:()=>yn,mapValues:()=>Jt,markerFadeInAnimation:()=>Zu,markerPaletteFactory:()=>Pu,markerScaleInAnimation:()=>qu,markerSwipeScaleInAnimation:()=>Ju,mergeArrayDefaults:()=>qt,mergeDefaults:()=>Zt,midpointStartingBarPosition:()=>Kp,minMax:()=>ip,mod:()=>Zn,moduleRegistry:()=>kt,normaliseGroupTo:()=>Ac,normalisePropertyTo:()=>Nc,normalisedExtent:()=>hn,normalisedExtentWithMetadata:()=>cn,pairCategoryData:()=>Sp,pairContinuousData:()=>bp,partialAssign:()=>ie,pathFadeInAnimation:()=>hp,pathFadeOutAnimation:()=>cp,pathSwipeInAnimation:()=>lp,pickByMatchingAngle:()=>Pg,predicateWithMessage:()=>za,prepareAreaPathAnimation:()=>Rp,prepareAxisAnimationContext:()=>pl,prepareAxisAnimationFunctions:()=>fl,prepareBarAnimationFunctions:()=>Yp,prepareLinePathAnimation:()=>Mp,prepareLinePathAnimationFns:()=>wp,prepareMarkerAnimation:()=>tp,preparePieSeriesAnimationFunctions:()=>Eg,range:()=>Sc,rangedValueProperty:()=>Uc,renderPartialPath:()=>rp,resetAxisGroupFn:()=>yl,resetAxisLabelSelectionFn:()=>xl,resetAxisLineSelectionFn:()=>bl,resetAxisSelectionFn:()=>vl,resetBarSelectionsFn:()=>Hp,resetIds:()=>Fn,resetLabelFn:()=>Wu,resetMarkerFn:()=>Qu,resetMarkerPositionFn:()=>$u,resetMotion:()=>fr,resetPieSelectionsFn:()=>Og,round:()=>Xn,seriesLabelFadeInAnimation:()=>Gu,seriesLabelFadeOutAnimation:()=>zu,setDocument:()=>Cn,setPath:()=>ee,setWindow:()=>Ln,shallowClone:()=>ke,singleSeriesPaletteFactory:()=>Ou,staticFromToMotion:()=>Ns,stringify:()=>Ka,sum:()=>xc,sumValues:()=>vc,toArray:()=>un,toFixed:()=>jn,toTooltipHtml:()=>nl,trailingAccumulatedValue:()=>Cc,trailingAccumulatedValueProperty:()=>jc,unique:()=>pn,updateClipPath:()=>up,updateLabelNode:()=>Xp,updateRect:()=>_p,validateCrossLineValues:()=>Jo,valueProperty:()=>Hc,without:()=>Qt});var qm=class t{constructor(t,e,i,n,s,a,o,r,l,h,c){this.series=t,this.index=e,this.datum=i,this.size=n,this.colorValue=s,this.fill=a,this.stroke=o,this.sumSize=r,this.depth=l,this.parent=h,this.children=c,this.midPoint={x:0,y:0}}contains(t){let e=t;for(;null!=e&&e.index>=this.index;){if(e===this)return!0;e=e.parent}return!1}walk(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.Walk.PreOrder;i===t.Walk.PreOrder&&e(this),this.children.forEach((t=>{t.walk(e,i)})),i===t.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*w(t)}};qm.Walk={PreOrder:0,PostOrder:1};var Jm=qm,Qm=class extends Qc{constructor(t){super({moduleCtx:t,pickModes:[0],contentGroupVirtual:!1}),this.rootNode=new Jm(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new yr("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}processData(){return S(this,null,(function*(){var t,e;const{childrenKey:i,sizeKey:n,colorKey:s,fills:a,strokes:o,colorRange:r}=this.properties;let l=0;let h=0,c=1/0,d=-1/0;const u=new Array((null!=(e=null==(t=this.data)?void 0:t.length)?e:0)+1).fill(void 0),p=(t,e)=>{const a=(l+=1,l),o=null!=e.depth?e.depth+1:0,r=null!=i?t[i]:void 0,p=null==r||0===r.length;let m=null!=n?t[n]:void 0;m=Number.isFinite(m)?Math.max(m,0):p?1:0;const f=m;h=Math.max(h,o);const y=null!=s?t[s]:void 0;return"number"===typeof y&&(u[a]=y,c=Math.min(c,y),d=Math.max(d,y)),g(new Jm(this,a,t,m,y,void 0,void 0,f,o,e,[]),r)},g=(t,e)=>(null==e||e.forEach((e=>{const i=p(e,t);t.children.push(i),t.sumSize+=i.sumSize})),t),m=g(new Jm(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),f=[c,d];let y;null!=r&&Number.isFinite(c)&&Number.isFinite(d)&&(y=new Qp,y.domain=f,y.range=r,y.update()),m.children.forEach(((t,e)=>{t.walk((t=>{let i;const n=u[t.index];null!=n&&(i=null==y?void 0:y.convert(n)),null!=i||(i=null==a?void 0:a[e%a.length]),t.fill=i,t.stroke=null==y?null==o?void 0:o[e%o.length]:"rgba(0, 0, 0, 0.2)"}))})),this.rootNode=m,this.maxDepth=h,this.colorDomain=f}))}update(t){return S(this,arguments,(function(t){var e=this;let{seriesRect:i}=t;return function*(){yield e.updateSelections(),yield e.updateNodes();const t=e.getAnimationData();e.checkResize(i)&&e.animationState.transition("resize",t),e.animationState.transition("update",t)}()}))}resetAllAnimation(t){var e;const i=null==(e=this.animationResetFns)?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&fr(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null==(e=this.animationResetFns)?void 0:e.datum;null!=i&&fr([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){const{colorKey:e,colorName:i,colorRange:n,visible:s}=this.properties;return"gradient"===t&&null!=e&&null!=n?[{legendType:"gradient",enabled:s,seriesId:this.id,colorName:i,colorRange:n,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return"".concat(t.index)}getDatumId(t){return this.getDatumIdFromData(t)}},$m=class extends Vd{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(Pe),this.strokes=Object.values(Be)}};x([Xs(ea)],$m.prototype,"childrenKey",2),x([Xs(ea,{optional:!0})],$m.prototype,"sizeKey",2),x([Xs(ea,{optional:!0})],$m.prototype,"colorKey",2),x([Xs(ea,{optional:!0})],$m.prototype,"colorName",2),x([Xs(ya)],$m.prototype,"fills",2),x([Xs(ya)],$m.prototype,"strokes",2),x([Xs(ya,{optional:!0})],$m.prototype,"colorRange",2);var tf=class{constructor(t,e,i,n){this.lon0=t,this.lat0=e,this.lon1=i,this.lat1=n}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}},ef=0}}]);