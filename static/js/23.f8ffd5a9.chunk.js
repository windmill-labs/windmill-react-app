"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[23],{4023:(e,t,i)=>{i.r(t),i.d(t,{AgChart:()=>o.A,AgCharts:()=>o.c,AgErrorBarSupportedSeriesTypes:()=>o.e,AgTooltipPositionType:()=>o.f,Marker:()=>o.M,VERSION:()=>o.V,_ModuleSupport:()=>o.m,_Scale:()=>o.d,_Scene:()=>o.i,_Theme:()=>o.a,_Util:()=>o.s,__FORCE_MODULE_DETECTION:()=>o._,time:()=>o.t});var o=i(2382),a=Object.defineProperty,s=Object.defineProperties,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,h=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,u=Reflect.get,p=Math.pow,y=(e,t,i)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,g=(e,t)=>{for(var i in t||(t={}))d.call(t,i)&&y(e,i,t[i]);if(l)for(var i of l(t))c.call(t,i)&&y(e,i,t[i]);return e},m=(e,t)=>s(e,r(t)),x=(e,t)=>{var i={};for(var o in e)d.call(e,o)&&t.indexOf(o)<0&&(i[o]=e[o]);if(null!=e&&l)for(var o of l(e))t.indexOf(o)<0&&c.call(e,o)&&(i[o]=e[o]);return i},f=(e,t,i,o)=>{for(var s,r=o>1?void 0:o?n(t,i):t,l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o?s(t,i,r):s(r))||r);return o&&r&&a(t,i,r),r},v=(e,t,i)=>u(h(e),i,t),D=(e,t,i)=>new Promise(((o,a)=>{var s=e=>{try{r(i.next(e))}catch(t){a(t)}},n=e=>{try{r(i.throw(e))}catch(t){a(t)}},r=e=>e.done?o(e.value):Promise.resolve(e.value).then(s,n);r((i=i.apply(e,t)).next())})),M={__extends__:o.a.EXTENDS_AXES_DEFAULTS,gridLine:{enabled:!1,__extends__:o.a.EXTENDS_AXES_GRID_LINE_DEFAULTS}};function b(e,t,i){const o=(t,i,o,a)=>{let s=e[0];for(let n=t;o>0?n<=i:n>i;n+=o){const t=e[n];if(a(s,t))return!0;s=t}return!1},a=Math.floor(e.length/2);return!!o(t,a,t,i)||o(e.length-t,a,-t,i)}var{ChartAxisDirection:S,Layers:N,ARRAY:I,BOOLEAN:k,COLOR_STRING:A,FONT_STYLE:T,FONT_WEIGHT:L,LINE_DASH:O,NUMBER:E,POSITIVE_NUMBER:R,RATIO:C,STRING:w,UNION:P,AND:_,Validate:z,MATCHING_CROSSLINE_TYPE:K}=o.m,{Group:V}=o.i,{createId:j}=o.s,F=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.parallel=void 0}};f([z(k,{optional:!0})],F.prototype,"enabled",2),f([z(w,{optional:!0})],F.prototype,"text",2),f([z(T,{optional:!0})],F.prototype,"fontStyle",2),f([z(L,{optional:!0})],F.prototype,"fontWeight",2),f([z(R)],F.prototype,"fontSize",2),f([z(w)],F.prototype,"fontFamily",2),f([z(E)],F.prototype,"padding",2),f([z(A,{optional:!0})],F.prototype,"color",2),f([z(k,{optional:!0})],F.prototype,"parallel",2);var B=class e{constructor(){this.id=j(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.shape="polygon",this.label=new F,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=S.X,this.axisInnerRadius=0,this.axisOuterRadius=0,this.group=new V({name:"".concat(this.id),layer:!0,zIndex:e.LINE_LAYER_ZINDEX}),this.labelGroup=new V({name:"".concat(this.id),layer:!0,zIndex:e.LABEL_LAYER_ZINDEX})}setSectorNodeProps(e){var t,i,o;e.fill=this.fill,e.fillOpacity=null!=(t=this.fillOpacity)?t:1,e.stroke=this.stroke,e.strokeOpacity=null!=(i=this.strokeOpacity)?i:1,e.strokeWidth=null!=(o=this.strokeWidth)?o:1,e.lineDash=this.lineDash}setLabelNodeProps(e,t,i,o,a){const{label:s}=this;e.x=t,e.y=i,e.text=s.text,e.textAlign="center",e.textBaseline=o,e.rotation=a,e.rotationCenterX=t,e.rotationCenterY=i,e.fill=s.color,e.fontFamily=s.fontFamily,e.fontSize=s.fontSize,e.fontStyle=s.fontStyle,e.visible=!0}calculateLayout(e){}};B.LINE_LAYER_ZINDEX=N.SERIES_CROSSLINE_LINE_ZINDEX,B.RANGE_LAYER_ZINDEX=N.SERIES_CROSSLINE_RANGE_ZINDEX,B.LABEL_LAYER_ZINDEX=N.SERIES_LABEL_ZINDEX,f([z(k,{optional:!0})],B.prototype,"enabled",2),f([z(P(["range","line"],"a crossLine type"),{optional:!0})],B.prototype,"type",2),f([z(_(K("range"),I.restrict({length:2})),{optional:!0})],B.prototype,"range",2),f([z(K("value"),{optional:!0})],B.prototype,"value",2),f([z(A,{optional:!0})],B.prototype,"fill",2),f([z(C,{optional:!0})],B.prototype,"fillOpacity",2),f([z(A,{optional:!0})],B.prototype,"stroke",2),f([z(E,{optional:!0})],B.prototype,"strokeWidth",2),f([z(C,{optional:!0})],B.prototype,"strokeOpacity",2),f([z(O,{optional:!0})],B.prototype,"lineDash",2);var U=B,{ChartAxisDirection:W,validateCrossLineValues:G}=o.m,{Path:Y,Sector:H,Text:X}=o.i,{normalizeAngle360:Q,isNumberEqual:Z}=o.s,q=class e extends U{constructor(){super(),this.direction=W.X,this.polygonNode=new Y,this.sectorNode=new H,this.lineNode=new Y,this.labelNode=new X,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.group.append(this.lineNode),this.labelGroup.append(this.labelNode)}update(e){const{scale:t,shape:i,type:a,value:s,range:n}=this;if(!t||!a||!G(a,s,n,t))return this.group.visible=!1,void(this.labelGroup.visible=!1);this.group.visible=e,this.labelGroup.visible=e,"line"===a&&"circle"===i&&t instanceof o.d.BandScale&&(this.type="range",this.range=[s,s]),this.updateLineNode(e),this.updatePolygonNode(e),this.updateSectorNode(e),this.updateLabelNode(e)}updateLineNode(t){var i,o;const{scale:a,type:s,value:n,lineNode:r}=this;let l;if(!t||"line"!==s||!a||isNaN(l=a.convert(n)))return void(r.visible=!1);const{axisInnerRadius:h,axisOuterRadius:d}=this;r.visible=!0,r.stroke=this.stroke,r.strokeOpacity=null!=(i=this.strokeOpacity)?i:1,r.strokeWidth=null!=(o=this.strokeWidth)?o:1,r.fill=void 0,r.lineDash=this.lineDash;const c=d*Math.cos(l),u=d*Math.sin(l),p=h*Math.cos(l),y=h*Math.sin(l);r.path.clear({trackChanges:!0}),r.path.moveTo(p,y),r.path.lineTo(c,u),this.group.zIndex=e.LINE_LAYER_ZINDEX}updatePolygonNode(t){var i;const{polygonNode:o,range:a,scale:s,shape:n,type:r}=this;let l;if(!t||"range"!==r||"polygon"!==n||!s||!a||!(l=null==(i=s.ticks)?void 0:i.call(s)))return void(o.visible=!1);const{axisInnerRadius:h,axisOuterRadius:d}=this,c=l.indexOf(a[0]),u=l.indexOf(a[1]),p=(c<=u?l.slice(c,u+1):l.slice(c).concat(l.slice(0,u+1))).map((e=>s.convert(e)));o.visible=!0,this.setSectorNodeProps(o);const{path:y}=o;y.clear({trackChanges:!0}),p.forEach(((e,t)=>{const i=d*Math.cos(e),o=d*Math.sin(e);0===t?y.moveTo(i,o):y.lineTo(i,o)})),0===h?y.lineTo(0,0):p.slice().reverse().forEach((e=>{const t=h*Math.cos(e),i=h*Math.sin(e);y.lineTo(t,i)})),o.path.closePath(),this.group.zIndex=e.RANGE_LAYER_ZINDEX}updateSectorNode(t){var i;const{sectorNode:a,range:s,scale:n,shape:r,type:l}=this;if(!t||"range"!==l||"circle"!==r||!n||!s)return void(a.visible=!1);const{axisInnerRadius:h,axisOuterRadius:d}=this,c=s.map((e=>n.convert(e))),u=null!=(i=n.step)?i:0,p=n instanceof o.d.BandScale?u/2:0;a.visible=!0,this.setSectorNodeProps(a),a.centerX=0,a.centerY=0,a.innerRadius=h,a.outerRadius=d,a.startAngle=c[0]-p,a.endAngle=c[1]+p,this.group.zIndex=e.RANGE_LAYER_ZINDEX}updateLabelNode(e){var t,i;const{label:o,labelNode:a,range:s,scale:n,type:r}=this;if(!e||!1===o.enabled||!o.text||!n||"range"===r&&!s)return void(a.visible=!0);const{axisInnerRadius:l,axisOuterRadius:h}=this;let d,c,u,p;if("line"===r){const e=Q(n.convert(this.value)),t=3*Math.PI/2,i=Z(e,t)||e>t||e<Math.PI/2,a=(l+h)/2*Math.cos(e),s=(l+h)/2*Math.sin(e);d=a+o.padding*Math.cos(e+Math.PI/2),c=s+o.padding*Math.sin(e+Math.PI/2),p=i?"top":"bottom",u=i?e:e-Math.PI}else{const[e,a]=s.map((e=>Q(n.convert(e))));let r=(e+a)/2;e>a&&(r-=Math.PI),r=Q(r);const l=(Z(r,0)||r>0)&&r<Math.PI;let y;const g=null!=(i=null==(t=n.ticks)?void 0:t.call(n))?i:[];y="circle"===this.shape||g.length<3?h-o.padding:h*Math.cos(Math.PI/g.length)-o.padding,d=y*Math.cos(r),c=y*Math.sin(r),p=l?"bottom":"top",u=l?r-Math.PI/2:r+Math.PI/2}this.setLabelNodeProps(a,d,c,p,u)}};q.className="AngleCrossLine";var J=q,{AND:$,assignJsonApplyConstructedArray:ee,ChartAxisDirection:te,GREATER_THAN:ie,NUMBER:oe,UNION:ae,ProxyOnWrite:se,Validate:ne}=o.m,{Path:re,Text:le}=o.i,{angleBetween:he,isNumberEqual:de,toRadians:ce,normalizeAngle360:ue}=o.s,pe=class extends o.m.AxisLabel{constructor(){super(...arguments),this.orientation="fixed"}};f([ne(ae(["fixed","parallel","perpendicular"],"a label orientation"))],pe.prototype,"orientation",2);var ye=class extends o.m.PolarAxis{constructor(e,t){super(e,t),this.startAngle=0,this.endAngle=void 0,this.labelData=[],this.tickData=[],this.radiusLine=this.axisGroup.appendChild(new re),this.computeRange=()=>{const e=ue(-Math.PI/2+ce(this.startAngle));let t=null==this.endAngle?e+2*Math.PI:-Math.PI/2+ce(this.endAngle);t<e&&(t+=2*Math.PI),this.range=[e,t]},this.includeInvisibleDomains=!0}get direction(){return te.X}assignCrossLineArrayConstructor(e){ee(e,J)}createLabel(){return new pe}update(){return this.updateScale(),this.updatePosition(),this.updateGridLines(),this.updateTickLines(),this.updateLabels(),this.updateRadiusLine(),this.updateCrossLines(),this.tickData.length}calculateAvailableRange(){const{range:e,gridLength:t}=this;return he(e[0],e[1])*t}updatePosition(){const{translation:e,axisGroup:t,gridGroup:i,crossLineGroup:o}=this,a=Math.floor(e.x),s=Math.floor(e.y);t.translationX=a,t.translationY=s,i.translationX=a,i.translationY=s,o.translationX=a,o.translationY=s}updateRadiusLine(){const e=this.radiusLine,{path:t}=e;t.clear({trackChanges:!0});const{points:i,closePath:o}=this.getAxisLinePoints();i.forEach((e=>{let{x:i,y:o,moveTo:a,arc:s,radius:n=0,startAngle:r=0,endAngle:l=0}=e;s?t.arc(i,o,n,r,l):a?t.moveTo(i,o):t.lineTo(i,o)})),o&&t.closePath(),e.visible=this.line.enabled,e.stroke=this.line.color,e.strokeWidth=this.line.width,e.fill=void 0}getAxisLinePoints(){var e,t;const{scale:i,shape:o,gridLength:a}=this,[s,n]=this.range,r=de(n-s,2*Math.PI),l=[];if("circle"===o)r?(l.push({x:a,y:0,moveTo:!0}),l.push({x:0,y:0,radius:a,startAngle:0,endAngle:2*Math.PI,arc:!0,moveTo:!1})):(l.push({x:a*Math.cos(s),y:a*Math.sin(s),moveTo:!0}),l.push({x:0,y:0,radius:a,startAngle:ue(s),endAngle:ue(n),arc:!0,moveTo:!1}));else if("polygon"===o){const o=(null!=(t=null==(e=i.ticks)?void 0:e.call(i))?t:[]).map((e=>i.convert(e)));o.length>2&&o.forEach(((e,t)=>{const i=a*Math.cos(e),o=a*Math.sin(e),s=0===t;l.push({x:i,y:o,moveTo:s})}))}return{points:l,closePath:r}}updateGridLines(){const{scale:e,gridLength:t,gridLine:{enabled:i,style:o,width:a},innerRadiusRatio:s}=this;if(!(o&&t>0))return;const n=this.tickData,r=t*s,l=o.length;this.gridLineGroupSelection.update(i?n:[],void 0,(e=>e.value)).each(((i,s,n)=>{const{value:h}=s,{stroke:d,lineDash:c}=o[n%l],u=e.convert(h);i.x1=r*Math.cos(u),i.y1=r*Math.sin(u),i.x2=t*Math.cos(u),i.y2=t*Math.sin(u),i.stroke=d,i.strokeWidth=a,i.lineDash=c,i.fill=void 0})),this.gridLineGroupSelection.cleanup()}updateLabels(){const{label:e,tickLabelGroupSelection:t}=this,i=this.tickData;t.update(e.enabled?i:[]).each(((t,i,o)=>{const a=this.labelData[o];a&&!a.hidden?(t.text=a.text,t.setFont(e),t.fill=e.color,t.x=a.x,t.y=a.y,t.textAlign=a.textAlign,t.textBaseline=a.textBaseline,t.visible=!0,a.rotation?(t.rotation=a.rotation,t.rotationCenterX=a.x,t.rotationCenterY=a.y):t.rotation=0):t.visible=!1}))}updateTickLines(){const{scale:e,gridLength:t,tick:i,tickLineGroupSelection:o}=this,a=this.tickData;o.update(i.enabled?a:[]).each(((o,a)=>{const{value:s}=a,n=e.convert(s),r=Math.cos(n),l=Math.sin(n);o.x1=t*r,o.y1=t*l,o.x2=(t+i.size)*r,o.y2=(t+i.size)*l,o.stroke=i.color,o.strokeWidth=i.width}))}createLabelNodeData(e,t,i){const{label:o,gridLength:a,scale:s,tick:n}=this;if(!o.enabled)return[];const r=new le,l=i.x-this.translation.x,h=i.x+i.width-this.translation.x,d=e.map(((i,d)=>{var c;const{value:u}=i,p=a+o.padding+n.size,y=s.convert(u),g=p*Math.cos(y),m=p*Math.sin(y),{textAlign:x,textBaseline:f}=this.getLabelAlign(y),v=d===e.length-1&&u!==e[0]&&de(ue(y),ue(s.convert(e[0]))),D=this.getLabelRotation(y);let M=String(u);if(o.formatter){const{callbackCache:e}=this.moduleCtx;M=null!=(c=e.call(o.formatter,{value:u,index:d}))?c:""}r.text=M,r.x=g,r.y=m,r.setFont(o),r.textAlign=x,r.textBaseline=f,r.rotation=D,D&&(r.rotationCenterX=g,r.rotationCenterY=m);let b=D?r.computeTransformedBBox():r.computeBBox();if(b&&t.hideWhenNecessary&&!D){const e=l-b.x,t=b.x+b.width-h,i=1;if(e>i||t>i){const i=b.width-Math.max(e,t);({text:M}=le.wrap(M,i,1/0,o,"never")),"\u2026"===M&&(M="",b=void 0),r.text=M,b=r.computeBBox()}}return{text:M,x:g,y:m,textAlign:x,textBaseline:f,hidden:""===M||i.hidden||v,rotation:D,box:b}}));return o.avoidCollisions&&this.avoidLabelCollisions(d),d}computeLabelsBBox(e,t){this.tickData=this.generateAngleTicks(),this.labelData=this.createLabelNodeData(this.tickData,e,t);const i=this.labelData.map((e=>{let{box:t}=e;return t})).filter((e=>null!=e));return this.label.enabled&&0!==i.length?o.i.BBox.merge(i):null}getLabelOrientation(){const{label:e}=this;return e instanceof pe?e.orientation:"fixed"}getLabelRotation(e){var t;let i=ce(null!=(t=this.label.rotation)?t:0);e=ue(e);const o=this.getLabelOrientation();return"parallel"===o?(i+=e,e>=0&&e<Math.PI?i-=Math.PI/2:i+=Math.PI/2):"perpendicular"===o&&(i+=e,e>=Math.PI/2&&e<3*Math.PI/2&&(i+=Math.PI)),i}getLabelAlign(e){const t=Math.cos(e),i=Math.sin(e);let o,a;const s=this.getLabelOrientation(),n=de(t,0),r=de(i,0),l=de(t,1),h=de(i,-1),d=t>0&&!n,c=i>0&&!r;return"parallel"===s?(o="center",a=l&&r||c?"top":"bottom"):"perpendicular"===s?(o=h||d?"left":"right",a="middle"):(o="right",n?o="center":d&&(o="left"),a="bottom",r?a="middle":c&&(a="top")),{textAlign:o,textBaseline:a}}updateCrossLines(){var e;null==(e=this.crossLines)||e.forEach((e=>{if(e instanceof J){const{shape:t,gridLength:i,innerRadiusRatio:o}=this;e.shape=t,e.axisOuterRadius=i,e.axisInnerRadius=i*o}})),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}};f([se("rotation"),ne(oe.restrict({min:0,max:360}))],ye.prototype,"startAngle",2),f([ne($(oe.restrict({min:0,max:720}),ie("startAngle")),{optional:!0})],ye.prototype,"endAngle",2);var{RATIO:ge,Validate:me}=o.m,{BandScale:xe}=o.d,{isNumberEqual:fe}=o.s,ve=class extends ye{constructor(e){super(e,new xe),this.groupPaddingInner=0,this.paddingInner=0}generateAngleTicks(){var e,t;const{scale:i,tick:o,gridLength:a}=this,s=null!=(t=null!=(e=o.values)?e:i.ticks())?t:[];if(s.length<2||isNaN(o.minSpacing))return s.map((e=>({value:e,visible:!0})));const n=s[0],r=i.convert(n),l=a*Math.cos(r),h=a*Math.sin(r);for(let d=1;d<s.length-1;d++){const e=s[d],t=i.convert(e);if(t-r>Math.PI)break;const c=a*Math.cos(t),u=a*Math.sin(t);if(Math.sqrt(p(c-l,2)+p(u-h,2))>o.minSpacing){const e=new Set([n]);return b(s,d,((t,i)=>{e.add(i)})),s.map((t=>({value:t,visible:e.has(t)})))}}return[{value:n,visible:!0}]}avoidLabelCollisions(e){let{minSpacing:t}=this.label;if(Number.isFinite(t)||(t=0),e.length<3)return;const i=(e,i)=>{if(e.hidden||i.hidden)return!1;const o=e.box.clone().grow(t/2),a=i.box.clone().grow(t/2);return o.collidesBBox(a)},o=e[0],a=e.at(-1),s=new Set([o]),n=fe(o.x,a.x)&&fe(o.y,a.y),r=Math.floor(e.length/2);for(let l=1;l<=r;l++){const t=n?e.slice(0,-1):e;if(!b(t,l,i)){b(t,l,((e,t)=>{s.add(t)}));break}}e.forEach((e=>{s.has(e)||(e.hidden=!0,e.box=void 0)}))}};ve.className="AngleCategoryAxis",ve.type="angle-category",f([me(ge)],ve.prototype,"groupPaddingInner",2),f([me(ge)],ve.prototype,"paddingInner",2);var De={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-category",instanceConstructor:ve,themeTemplate:M},{LinearScale:Me,Invalidating:be}=o.d,{isNumberEqual:Se,range:Ne,isDenseInterval:Ie}=o.s,ke=class extends Me{constructor(){super(...arguments),this.arcLength=0,this.niceTickStep=0}ticks(){if(!this.domain||this.domain.length<2||this.domain.some((e=>!isFinite(e))))return[];this.refresh();const[e,t]=this.getDomain(),{interval:i}=this;if(i){const o=Math.abs(i),a=this.getPixelRange();if(!Ie({start:e,stop:t,interval:o,availableRange:a}))return Ne(e,t,o)}const o=this.nice&&this.niceTickStep?this.niceTickStep:this.getTickStep(e,t);return Ne(e,t,o)}hasNiceRange(){const e=this.range.slice().sort(((e,t)=>e-t));return[Math.PI,2*Math.PI].some((t=>Se(t,e[1]-e[0])))}getNiceStepAndTickCount(){const[e,t]=this.niceDomain;let i=this.getTickStep(e,t);const o=isNaN(this.maxTickCount)?1/0:this.maxTickCount,a=Math.abs(t-e)/i;let s=Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)));return s>o&&(s/=2,i*=2),{count:s,step:i}}updateNiceDomain(){if(super.updateNiceDomain(),!this.hasNiceRange())return;const e=this.niceDomain[0]>this.niceDomain[1],t=e?this.niceDomain[1]:this.niceDomain[0],{step:i,count:o}=this.getNiceStepAndTickCount(),a=1/i,s=i>=1?Math.ceil(t/i+o)*i:Math.ceil((t+o*i)*a)/a;this.niceDomain=e?[s,t]:[t,s],this.niceTickStep=i}getPixelRange(){return this.arcLength}};f([be],ke.prototype,"arcLength",2);var{AND:Ae,Default:Te,GREATER_THAN:Le,LESS_THAN:Oe,NUMBER_OR_NAN:Ee,MIN_SPACING:Re,Validate:Ce}=o.m,{angleBetween:we,isNumberEqual:Pe,normalisedExtentWithMetadata:_e}=o.s,ze=class extends o.m.AxisTick{constructor(){super(...arguments),this.maxSpacing=NaN}};f([Ce(Re),Te(NaN)],ze.prototype,"maxSpacing",2);var Ke=class extends ye{constructor(e){super(e,new ke),this.shape="circle",this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:o,clipped:a}=_e(e,t,i);return{domain:o,clipped:a}}createTick(){return new ze}getRangeArcLength(){const{range:e}=this,t=Math.min(...e),i=Math.max(...e);return(we(t,i)||2*Math.PI)*this.gridLength}generateAngleTicks(){var e;const t=this.getRangeArcLength(),{scale:i,tick:o,range:a}=this,{minSpacing:s=NaN,maxSpacing:n=NaN}=o,r=n?Math.floor(t/n):1,l=s?Math.floor(t/s):1/0,h=Math.floor(4/Math.PI*Math.abs(a[0]-a[1]));return i.tickCount=Math.max(r,Math.min(l,h)),i.minTickCount=r,i.maxTickCount=l,i.arcLength=t,(null!=(e=o.values)?e:i.ticks()).map((e=>({value:e,visible:!0})))}avoidLabelCollisions(e){let{minSpacing:t}=this.label;Number.isFinite(t)||(t=0);const i=(e,i)=>{if(e.hidden||i.hidden)return!1;const o=e.box.clone().grow(t/2),a=i.box.clone().grow(t/2);return o.collidesBBox(a)},o=e[0],a=e.at(-1);o!==a&&Pe(o.x,a.x)&&Pe(o.y,a.y)&&(a.hidden=!0);for(let s=1;s<e.length;s*=2){let t=!1;for(let o=s;o<e.length;o+=s){const a=e[o];if(i(e[o-s],a)){t=!0;break}}if(!t)return void e.forEach(((e,t)=>{t%s>0&&(e.hidden=!0,e.box=void 0)}))}e.forEach(((e,t)=>{t>0&&(e.hidden=!0,e.box=void 0)}))}};Ke.className="AngleNumberAxis",Ke.type="angle-number",f([Ce(Ae(Ee,Oe("max"))),Te(NaN)],Ke.prototype,"min",2),f([Ce(Ae(Ee,Le("min"))),Te(NaN)],Ke.prototype,"max",2);var Ve={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"angle-number",instanceConstructor:Ke,themeTemplate:M},{OrdinalTimeScale:je}=o.i,{dateToNumber:Fe}=o.m,Be=class extends o.m.CategoryAxis{constructor(e){super(e,new je)}normaliseDataDomain(e){const t=[],i=new Set;for(let o of e){"number"==typeof o&&(o=new Date(o));const e=Fe(o);i.has(e)||(i.add(e),t.push(o))}return t.sort(((e,t)=>Fe(e)-Fe(t))),{domain:t,clipped:!1}}onLabelFormatChange(e,t){t?super.onLabelFormatChange(e,t):this.labelFormatter=this.scale.tickFormat({ticks:e})}};Be.className="OrdinalTimeAxis",Be.type="ordinal-time";var Ue={type:"axis",optionsKey:"axes[]",hidden:!0,packageType:"enterprise",chartTypes:["cartesian"],identifier:"ordinal-time",instanceConstructor:Be,themeTemplate:{__extends__:o.a.EXTENDS_AXES_DEFAULTS,groupPaddingInner:0,label:{autoRotate:!1},gridLine:{__extends__:o.a.EXTENDS_AXES_GRID_LINE_DEFAULTS,enabled:!1}}},We={__extends__:o.a.EXTENDS_AXES_DEFAULTS,line:{enabled:!1,__extends__:o.a.EXTENDS_AXES_LINE_DEFAULTS},tick:{enabled:!1,__extends__:o.a.EXTENDS_AXES_TICK_DEFAULTS}},{ChartAxisDirection:Ge,Validate:Ye,DEGREE:He,validateCrossLineValues:Xe}=o.m,{Path:Qe,Sector:Ze,Text:qe}=o.i,{normalizeAngle360:Je,toRadians:$e,isNumberEqual:et}=o.s,tt=class extends F{constructor(){super(...arguments),this.positionAngle=void 0}};f([Ye(He,{optional:!0})],tt.prototype,"positionAngle",2);var it=class e extends U{constructor(){super(),this.direction=Ge.Y,this.label=new tt,this.polygonNode=new Qe,this.sectorNode=new Ze,this.labelNode=new qe,this.outerRadius=0,this.innerRadius=0,this.group.append(this.polygonNode),this.group.append(this.sectorNode),this.labelGroup.append(this.labelNode)}update(t){const{scale:i,type:a,value:s,range:n}=this;if(!i||!a||!Xe(a,s,n,i))return this.group.visible=!1,void(this.labelGroup.visible=!1);"line"===a&&i instanceof o.d.BandScale&&(this.type="range",this.range=[s,s]),this.updateRadii();const{innerRadius:r,outerRadius:l}=this;t&&(t=r>=this.axisInnerRadius&&l<=this.axisOuterRadius),this.group.visible=t,this.labelGroup.visible=t,this.updatePolygonNode(t),this.updateSectorNode(t),this.updateLabelNode(t),this.group.zIndex="line"===this.type?e.LINE_LAYER_ZINDEX:e.RANGE_LAYER_ZINDEX}updateRadii(){var e;const{range:t,scale:i,type:o,axisInnerRadius:a,axisOuterRadius:s}=this;if(!i)return{innerRadius:0,outerRadius:0};const n=e=>s+a-e;let r=0,l=0;if("line"===o)r=n(i.convert(this.value)),l=r;else{const o=Math.abs(null!=(e=null==i?void 0:i.bandwidth)?e:0),a=t.map((e=>i.convert(e)));r=n(Math.max(...a)),l=n(Math.min(...a))+o}this.outerRadius=r,this.innerRadius=l}drawPolygon(e,t,i){t.forEach(((t,o)=>{const a=e*Math.cos(t),s=e*Math.sin(t);0===o?i.path.moveTo(a,s):i.path.lineTo(a,s)})),i.path.closePath()}updatePolygonNode(e){const{gridAngles:t,polygonNode:i,scale:o,shape:a,type:s,innerRadius:n,outerRadius:r}=this;if(!e||"polygon"!==a||!o||!t)return void(i.visible=!1);i.visible=!0;const l=this.getPadding();i.path.clear({trackChanges:!0}),this.drawPolygon(r-l,t,i);const h=t.slice().reverse(),d="line"===s?r-l:n+l;this.drawPolygon(d,h,i),this.setSectorNodeProps(i)}updateSectorNode(e){const{axisInnerRadius:t,axisOuterRadius:i,scale:a,sectorNode:s,shape:n,innerRadius:r,outerRadius:l}=this;if(!e||"circle"!==n||!a)return void(s.visible=!1);s.visible=!0,s.startAngle=0,s.endAngle=2*Math.PI;const h=this.getPadding();s.innerRadius=o.s.clamp(t,r+h,i),s.outerRadius=o.s.clamp(t,l-h,i),this.setSectorNodeProps(s)}updateLabelNode(e){var t,i;const{innerRadius:o,label:a,labelNode:s,scale:n,shape:r,type:l}=this;if(!e||!1===a.enabled||!a.text||!n)return void(s.visible=!1);const h=Je($e((null!=(t=a.positionAngle)?t:0)-90)),d=(et(h,0)||h>0)&&h<Math.PI,c=d?h-Math.PI/2:h+Math.PI/2;let u=0;const p=null!=(i=this.gridAngles)?i:[];u="line"===l?o+a.padding:"circle"===r||p.length<3?o-a.padding:o*Math.cos(Math.PI/p.length)-a.padding;const y=u*Math.cos(h),g=u*Math.sin(h);let m;m="line"===l?d?"top":"bottom":d?"bottom":"top",this.setLabelNodeProps(s,y,g,m,c)}getPadding(){var e,t;const{scale:i}=this;if(!i)return 0;const a=Math.abs(null!=(e=i.bandwidth)?e:0),s=Math.abs(null!=(t=i.step)?t:0);return i instanceof o.d.BandScale?(s-a)/2:0}};it.className="RadiusCrossLine";var ot=it,{assignJsonApplyConstructedArray:at,ChartAxisDirection:st,Default:nt,Layers:rt,DEGREE:lt,MIN_SPACING:ht,BOOLEAN:dt,Validate:ct}=o.m,{Caption:ut,Group:pt,Path:yt,Selection:gt}=o.i,{isNumberEqual:mt,normalizeAngle360:xt,toRadians:ft}=o.s,vt=class extends o.m.AxisTick{constructor(){super(...arguments),this.maxSpacing=NaN}};f([ct(ht),nt(NaN)],vt.prototype,"maxSpacing",2);var Dt=class extends o.m.AxisLabel{constructor(){super(...arguments),this.autoRotateAngle=335}};f([ct(dt,{optional:!0})],Dt.prototype,"autoRotate",2),f([ct(lt)],Dt.prototype,"autoRotateAngle",2);var Mt=class extends o.m.PolarAxis{constructor(e,t){super(e,t),this.positionAngle=0,this.gridPathGroup=this.gridGroup.appendChild(new pt({name:"".concat(this.id,"-gridPaths"),zIndex:rt.AXIS_GRID_ZINDEX})),this.gridPathSelection=gt.select(this.gridPathGroup,yt)}get direction(){return st.Y}assignCrossLineArrayConstructor(e){at(e,ot)}getAxisTransform(){const e=this.scale.range[0],{translation:t,positionAngle:i,innerRadiusRatio:o}=this,a=e*o,s=ft(i);return{translationX:t.x,translationY:t.y-e-a,rotation:s,rotationCenterX:0,rotationCenterY:e+a}}updateSelections(e,t,i){var o;super.updateSelections(e,t,i);const{gridLine:{enabled:a,style:s,width:n},shape:r}=this;if(!s)return;const l=this.prepareTickData(t),h=s.length,[d,c]=null!=(o=this.gridRange)?o:[0,2*Math.PI],u=mt(c-d,2*Math.PI),p=(e,t)=>{const{path:i}=e;i.clear({trackChanges:!0});const o=this.getTickRadius(t);u?(i.moveTo(o,0),i.arc(0,0,o,0,2*Math.PI)):(i.moveTo(o*Math.cos(d),o*Math.sin(d)),i.arc(0,0,o,xt(d),xt(c))),u&&i.closePath()},y=(e,t)=>{const{path:i}=e,o=this.gridAngles;if(i.clear({trackChanges:!0}),!o||o.length<3)return;const a=this.getTickRadius(t);o.forEach(((e,t)=>{const s=a*Math.cos(e),n=a*Math.sin(e);0===t?i.moveTo(s,n):i.lineTo(s,n),o.forEach(((e,t)=>{const o=a*Math.cos(e),s=a*Math.sin(e);0===t?i.moveTo(o,s):i.lineTo(o,s)})),i.closePath()})),i.closePath()};this.gridPathSelection.update(a?l:[]).each(((e,t,i)=>{((e,t)=>{const{stroke:i,lineDash:o}=s[t%h];e.stroke=i,e.strokeWidth=n,e.lineDash=o,e.fill=void 0})(e,i),"circle"===r?p(e,t):y(e,t)}))}updateTitle(){var e;const t=e=>e.defaultValue,{title:i,_titleCaption:o,range:a,moduleCtx:{callbackCache:s}}=this,{formatter:n=t}=null!=(e=this.title)?e:{};if(!i)return void(o.enabled=!1);o.enabled=i.enabled,o.fontFamily=i.fontFamily,o.fontSize=i.fontSize,o.fontStyle=i.fontStyle,o.fontWeight=i.fontWeight,o.color=i.color,o.wrapping=i.wrapping;let r=!1;const l=o.node;i.enabled&&(r=!0,l.rotation=Math.PI/2,l.x=Math.floor((a[0]+a[1])/2),l.y=-ut.SMALL_PADDING,l.textAlign="center",l.textBaseline="bottom",l.text=s.call(n,this.getTitleFormatterParams())),l.visible=r}createTick(){return new vt}updateCrossLines(){var e;null==(e=this.crossLines)||e.forEach((e=>{if(e instanceof ot){const{shape:t,gridAngles:i,range:o,innerRadiusRatio:a}=this,s=o[0];e.shape=t,e.gridAngles=i,e.axisOuterRadius=s,e.axisInnerRadius=s*a}})),super.updateCrossLines({rotation:0,parallelFlipRotation:0,regularFlipRotation:0})}createLabel(){return new Dt}};f([ct(lt),nt(0)],Mt.prototype,"positionAngle",2);var{RATIO:bt,ProxyPropertyOnWrite:St,Validate:Nt}=o.m,{BandScale:It}=o.d,kt=class extends Mt{constructor(e){super(e,new It),this.shape="circle",this.groupPaddingInner=0,this.paddingInner=0,this.paddingOuter=0}prepareTickData(e){return e.slice().reverse()}getTickRadius(e){const{scale:t}=this,i=t.range[0],o=i*this.innerRadiusRatio,a=(i-o)/t.domain.length;return i-e.translationY+o-a/2}};kt.className="RadiusCategoryAxis",kt.type="radius-category",f([Nt(bt)],kt.prototype,"groupPaddingInner",2),f([St("scale","paddingInner"),Nt(bt)],kt.prototype,"paddingInner",2),f([St("scale","paddingOuter"),Nt(bt)],kt.prototype,"paddingOuter",2);var At={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-category",instanceConstructor:kt,themeTemplate:We},{AND:Tt,Default:Lt,GREATER_THAN:Ot,LESS_THAN:Et,NUMBER_OR_NAN:Rt,Validate:Ct}=o.m,{LinearScale:wt}=o.d,{normalisedExtentWithMetadata:Pt}=o.s,_t=class extends Mt{constructor(e){super(e,new wt),this.shape="polygon",this.min=NaN,this.max=NaN}prepareTickData(e){var t;const{scale:i}=this,o=null==(t=i.getDomain)?void 0:t.call(i)[1];return e.filter((e=>{let{tick:t}=e;return t!==o})).sort(((e,t)=>t.tick-e.tick))}getTickRadius(e){const{scale:t}=this,i=t.range[0],o=i*this.innerRadiusRatio;return i-e.translationY+o}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:o,clipped:a}=Pt(e,t,i);return{domain:o,clipped:a}}};_t.className="RadiusNumberAxis",_t.type="radius-number",f([Ct(Tt(Rt,Et("max"))),Lt(NaN)],_t.prototype,"min",2),f([Ct(Tt(Rt,Ot("min"))),Lt(NaN)],_t.prototype,"max",2);var zt={type:"axis",optionsKey:"axes[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radius-number",instanceConstructor:_t,themeTemplate:We},{BOOLEAN:Kt,POSITIVE_NUMBER:Vt,ObserveChanges:jt,Validate:Ft}=o.m,Bt=class extends o.m.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,e.animationManager.skip(!1)}};f([jt(((e,t)=>{e.ctx.animationManager.skip(!t)})),Ft(Kt)],Bt.prototype,"enabled",2),f([jt(((e,t)=>{e.ctx.animationManager.defaultDuration=t})),Ft(Vt,{optional:!0})],Bt.prototype,"duration",2);var Ut={type:"root",optionsKey:"animation",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:Bt,themeTemplate:{animation:{enabled:!0}}},{Image:Wt}=o.i,{BaseProperties:Gt,ObserveChanges:Yt,ProxyProperty:Ht,Validate:Xt,NUMBER:Qt,POSITIVE_NUMBER:Zt,RATIO:qt,createElement:Jt,calculatePlacement:$t}=o.m,ei=class extends Gt{constructor(){super(),this.opacity=1,this.loadedSynchronously=!0,this.containerWidth=0,this.containerHeight=0,this.onLoad=void 0,this.onImageLoad=()=>{var e;this.loadedSynchronously||(this.node.visible=!1,this.performLayout(this.containerWidth,this.containerHeight),null==(e=this.onLoad)||e.call(this))},this.imageElement=Jt("img"),this.imageElement.onload=this.onImageLoad,this.node=new Wt(this.imageElement)}get complete(){return this.imageElement.width>0&&this.imageElement.height>0}performLayout(e,t){this.containerWidth=e,this.containerHeight=t,this.node.setProperties(this.complete?g({visible:!0,opacity:this.opacity},$t(this.imageElement.width,this.imageElement.height,this.containerWidth,this.containerHeight,this)):{visible:!1})}};f([Xt(Qt,{optional:!0})],ei.prototype,"top",2),f([Xt(Qt,{optional:!0})],ei.prototype,"right",2),f([Xt(Qt,{optional:!0})],ei.prototype,"bottom",2),f([Xt(Qt,{optional:!0})],ei.prototype,"left",2),f([Xt(Zt,{optional:!0})],ei.prototype,"width",2),f([Xt(Zt,{optional:!0})],ei.prototype,"height",2),f([Xt(qt)],ei.prototype,"opacity",2),f([Ht("imageElement.src"),Yt((e=>e.loadedSynchronously=e.complete))],ei.prototype,"url",2);var{ActionOnSet:ti,OBJECT:ii,Validate:oi}=o.m,ai=class extends o.m.Background{constructor(e){super(e),this.ctx=e,this.image=new ei}onLayoutComplete(e){if(super.onLayoutComplete(e),this.image){const{width:t,height:i}=e.chart;this.image.performLayout(t,i)}}onImageLoad(){this.ctx.updateService.update(o.m.ChartUpdateType.SCENE_RENDER)}};f([oi(ii,{optional:!0}),ti({newValue(e){this.node.appendChild(e.node),e.onLoad=()=>this.onImageLoad()},oldValue(e){this.node.removeChild(e.node),e.onLoad=void 0}})],ai.prototype,"image",2);var si={type:"root",optionsKey:"background",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:ai},ni="ag-chart-context-menu",ri="ag-charts-dark-context-menu",li="\n.".concat(ni," {\n    background: rgb(248, 248, 248);\n    border: 1px solid #babfc7;\n    border-radius: 5px;\n    box-shadow: 0 1px 4px 1px rgba(186, 191, 199, 0.4);\n    color: rgb(24, 29, 31);\n    font: 13px Verdana, sans-serif;\n    position: fixed;\n    transition: transform 0.1s ease;\n    white-space: nowrap;\n    z-index: 99999;\n}\n\n.").concat(ni,".").concat(ri," {\n    color: white;\n    background: #15181c;\n}\n\n.").concat(ni,"__cover {\n    position: fixed;\n    left: 0px;\n    top: 0px;\n}\n\n.").concat(ni,"__menu {\n    display: flex;\n    flex-direction: column;\n    padding: 0.5em 0;\n}\n\n.").concat(ni,"__item {\n    background: none;\n    border: none;\n    box-sizing: border-box;\n    font: inherit;\n    padding: 0.5em 1em;\n    text-align: left;\n    -webkit-appearance: none;\n    -moz-appearance: none;\n}\n\n.").concat(ni,"__item.").concat(ri," {\n    color: white;\n}\n\n.").concat(ni,"__item:hover {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.").concat(ni,"__item:hover.").concat(ri," {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.").concat(ni,"__item:active {\n    background: rgb(33, 150, 243, 0.2);\n}\n\n.").concat(ni,"__item:active.").concat(ri," {\n    background: rgb(33, 150, 243, 0.1);\n}\n\n.").concat(ni,"__item[disabled] {\n    border: none;\n    opacity: 0.5;\n    text-align: left;\n}\n\n.").concat(ni,"__item[disabled]:hover {\n    background: inherit;\n    cursor: inherit;\n}\n\n.").concat(ni,"__divider {\n    margin: 5px 0;\n    background: #babfc7;\n    height: 1px;\n}\n\n.").concat(ni,"__divider.").concat(ri," {\n    background: rgb(33, 150, 243, 0.1);\n}\n"),{BOOLEAN:hi,Validate:di,createElement:ci,getDocument:ui,getWindow:pi,injectStyle:yi}=o.m,gi=class extends o.m.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!0,this.darkTheme=!1,this.extraActions=[],this.extraNodeActions=[],this.x=0,this.y=0,this.highlightManager=e.highlightManager,this.interactionManager=e.interactionManager,this.registry=e.contextMenuRegistry,this.scene=e.scene;const{Default:t,ContextMenu:i,All:a}=o.m.InteractionState,s=t|i;if(this.destroyFns.push(e.interactionManager.addListener("contextmenu",(e=>this.onContextMenu(e)),s),e.interactionManager.addListener("click",(()=>this.onClick()),a)),this.groups={default:[],node:[],extra:[],extraNode:[]},this.canvasElement=e.scene.canvas.element,this.container=ui().body,this.element=this.container.appendChild(ci("div")),this.element.classList.add(ni),this.element.addEventListener("contextmenu",(e=>e.preventDefault())),this.destroyFns.push((()=>{var e;return null==(e=this.element.parentNode)?void 0:e.removeChild(this.element)})),this.hide(),typeof IntersectionObserver<"u"){const e=new IntersectionObserver((e=>{for(const t of e)t.target===this.canvasElement&&0===t.intersectionRatio&&this.hide()}),{root:this.container});e.observe(this.canvasElement),this.intersectionObserver=e}if(typeof MutationObserver<"u"){const e=new MutationObserver((()=>{this.menuElement&&this.element.contains(this.menuElement)&&this.reposition()}));e.observe(this.element,{childList:!0}),this.mutationObserver=e}yi(li,"contextMenu"),this.registry.registerDefaultAction({id:"download",label:"Download",action:()=>{const t=e.chartService.title;let i="image";null!=t&&t.enabled&&void 0!==(null==t?void 0:t.text)&&(i=t.text),this.scene.download(i)}})}isShown(){return void 0!==this.menuElement}onClick(){this.isShown()&&this.hide()}onContextMenu(e){if(!this.enabled)return;this.showEvent=e.sourceEvent,this.x=e.pageX,this.y=e.pageY,this.groups.default=this.registry.copyDefaultActions(),this.pickedNode=this.highlightManager.getActivePicked(),this.extraActions.length>0&&(this.groups.extra=[...this.extraActions]),this.extraNodeActions.length>0&&this.pickedNode&&(this.groups.extraNode=[...this.extraNodeActions]);const{default:t,node:i,extra:o,extraNode:a}=this.groups;t.length+i.length+o.length+a.length!==0&&(e.consume(),e.sourceEvent.preventDefault(),this.show())}show(){this.interactionManager.pushState(o.m.InteractionState.ContextMenu),this.element.classList.toggle(ri,this.darkTheme);const e=this.renderMenu();this.menuElement?this.element.replaceChild(e,this.menuElement):this.element.appendChild(e),this.menuElement=e,this.element.style.display="block"}hide(){this.interactionManager.popState(o.m.InteractionState.ContextMenu),this.menuElement&&(this.element.removeChild(this.menuElement),this.menuElement=void 0),this.element.style.display="none"}renderMenu(){const e=ci("div");return e.classList.add("".concat(ni,"__menu")),e.classList.toggle(ri,this.darkTheme),this.appendMenuGroup(e,this.groups.default,!1),this.pickedNode&&this.appendMenuGroup(e,this.groups.node),this.appendMenuGroup(e,this.groups.extra),this.pickedNode&&this.appendMenuGroup(e,this.groups.extraNode),e}appendMenuGroup(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];0!==t.length&&(i&&e.appendChild(this.createDividerElement()),t.forEach((t=>{const i=this.renderItem(t);i&&e.appendChild(i)})))}renderItem(e){if(e&&"object"==typeof e&&e.constructor===Object)return this.createActionElement(e)}createDividerElement(){const e=ci("div");return e.classList.add("".concat(ni,"__divider")),e.classList.toggle(ri,this.darkTheme),e}createActionElement(e){let{id:t,label:i,action:o}=e;return t&&this.registry.isDisabled(t)?this.createDisabledElement(i):this.createButtonElement(i,o)}createButtonElement(e,t){const i=ci("button");return i.classList.add("".concat(ni,"__item")),i.classList.toggle(ri,this.darkTheme),i.innerHTML=e,i.onclick=()=>{var e;const i=null==(e=this.pickedNode)?void 0:e.series.createNodeContextMenuActionEvent(this.showEvent,this.pickedNode);i?(Object.defineProperty(i,"itemId",{enumerable:!1,get:()=>{var e;return o.s.Logger.warnOnce("Property [AgNodeContextMenuActionEvent.itemId] is deprecated. Use [yKey], [angleKey] and others instead."),null==(e=this.pickedNode)?void 0:e.itemId}}),t(i)):t({event:this.showEvent}),this.hide()},i}createDisabledElement(e){const t=ci("button");return t.classList.add("".concat(ni,"__item")),t.classList.toggle(ri,this.darkTheme),t.disabled=!0,t.innerHTML=e,t}reposition(){const{x:e,y:t}=this;this.element.style.top="unset",this.element.style.bottom="unset",this.element.style.left="unset",this.element.style.right="unset",e+this.element.offsetWidth>pi("innerWidth")?this.element.style.right="calc(100% - ".concat(e-1,"px)"):this.element.style.left="".concat(e+1,"px"),t+this.element.offsetHeight>pi("innerHeight")?this.element.style.bottom="calc(100% - ".concat(t,"px - 0.5em)"):this.element.style.top="calc(".concat(t,"px - 0.5em)")}destroy(){var e,t;super.destroy(),null==(e=this.intersectionObserver)||e.unobserve(this.canvasElement),null==(t=this.mutationObserver)||t.disconnect()}};f([di(hi)],gi.prototype,"enabled",2),f([di(hi)],gi.prototype,"darkTheme",2);var mi={type:"root",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],optionsKey:"contextMenu",instanceConstructor:gi,themeTemplate:{contextMenu:{enabled:!0,darkTheme:o.a.IS_DARK_THEME}}},{ActionOnSet:xi,BaseProperties:fi,BOOLEAN:vi,FUNCTION:Di,NUMBER:Mi,STRING:bi,Validate:Si,createElement:Ni,injectStyle:Ii}=o.m,{BBox:ki}=o.i,Ai="ag-crosshair-label",Ti="\n.".concat(Ai," {\n    position: absolute;\n    left: 0px;\n    top: 0px;\n    user-select: none;\n    pointer-events: none;\n    font: 12px Verdana, sans-serif;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    box-sizing: border-box;\n}\n\n.").concat(Ai,"-content {\n    padding: 0 7px;\n    border-radius: 2px;\n    line-height: 1.7em;\n    background-color: rgb(71,71,71);\n    color: rgb(255, 255, 255);\n}\n\n.").concat(Ai,"-hidden {\n    top: -10000px !important;\n}\n"),Li=class extends o.i.ChangeDetectableProperties{constructor(){super(...arguments),this.enabled=!0,this.xOffset=0,this.yOffset=0,this.format=void 0,this.renderer=void 0}};f([Si(vi)],Li.prototype,"enabled",2),f([Si(bi,{optional:!0})],Li.prototype,"className",2),f([Si(Mi)],Li.prototype,"xOffset",2),f([Si(Mi)],Li.prototype,"yOffset",2),f([Si(bi,{optional:!0})],Li.prototype,"format",2),f([Si(Di,{optional:!0})],Li.prototype,"renderer",2);var Oi=class extends fi{constructor(e){super(),this.labelRoot=e,this.enabled=!0,this.xOffset=0,this.yOffset=0,this.renderer=void 0,this.element=Ni("div"),this.element.classList.add(Ai),e.appendChild(this.element),Ii(Ti,"crosshairLabel")}show(e){const{element:t}=this;let i=e.x+this.xOffset,o=e.y+this.yOffset;const a=(e,t,i)=>Math.max(Math.min(t,i),e),s=this.getContainerBoundingBox(),n=s.x+s.width-t.clientWidth-1,r=s.y+s.height-t.clientHeight;i=a(s.x+1,i,n),o=a(s.y,o,r),t.style.transform="translate(".concat(Math.round(i),"px, ").concat(Math.round(o),"px)"),this.toggle(!0)}setLabelHtml(e){void 0!==e&&(this.element.innerHTML=e)}computeBBox(){const{element:e}=this;return new o.i.BBox(e.clientLeft,e.clientTop,e.clientWidth,e.clientHeight)}getContainerBoundingBox(){const{width:e,height:t}=this.labelRoot.getBoundingClientRect();return new ki(0,0,e,t)}toggle(e){this.element.classList.toggle("".concat(Ai,"-hidden"),!e)}destroy(){const{parentNode:e}=this.element;e&&e.removeChild(this.element)}toLabelHtml(e,t){var i,o,a;if("string"==typeof e)return e;t=null!==(i=t)&&void 0!==i?i:{};const{text:s=(null!=(o=t.text)?o:""),color:n=t.color,backgroundColor:r=t.backgroundColor,opacity:l=(null!=(a=t.opacity)?a:1)}=e,h="opacity: ".concat(l,"; background-color: ").concat(null==r?void 0:r.toLowerCase(),"; color: ").concat(n);return'<div class="'.concat(Ai,'-content" style="').concat(h,'">\n                    <span>').concat(s,"</span>\n                </div>")}};f([Si(vi)],Oi.prototype,"enabled",2),f([Si(bi,{optional:!0}),xi({changeValue(e,t){e!==t&&(t&&this.element.classList.remove(t),e&&this.element.classList.add(e))}})],Oi.prototype,"className",2),f([Si(Mi)],Oi.prototype,"xOffset",2),f([Si(Mi)],Oi.prototype,"yOffset",2),f([Si(bi,{optional:!0})],Oi.prototype,"format",2),f([Si(Di,{optional:!0})],Oi.prototype,"renderer",2);var{Group:Ei,Line:Ri,BBox:Ci}=o.i,{createId:wi}=o.s,{POSITIVE_NUMBER:Pi,RATIO:_i,BOOLEAN:zi,COLOR_STRING:Ki,LINE_DASH:Vi,OBJECT:ji,Validate:Fi,Layers:Bi,getDocument:Ui}=o.m,Wi=class extends o.m.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.id=wi(this),this.enabled=!1,this.stroke="rgb(195, 195, 195)",this.lineDash=[6,3],this.lineDashOffset=0,this.strokeWidth=1,this.strokeOpacity=1,this.snap=!0,this.label=new Li,this.seriesRect=new Ci(0,0,0,0),this.hoverRect=new Ci(0,0,0,0),this.bounds=new Ci(0,0,0,0),this.visible=!1,this.crosshairGroup=new Ei({layer:!0,zIndex:Bi.SERIES_CROSSHAIR_ZINDEX}),this.lineGroup=this.crosshairGroup.appendChild(new Ei({name:"".concat(this.id,"-crosshair-lines"),zIndex:Bi.SERIES_CROSSHAIR_ZINDEX})),this.lineGroupSelection=o.i.Selection.select(this.lineGroup,Ri,!1),this.activeHighlight=void 0,this.axisCtx=e.parent,this.crosshairGroup.visible=!1,this.labels={};const t=e.regionManager.getRegion("series");this.destroyFns.push(e.scene.attachNode(this.crosshairGroup),t.addListener("hover",(e=>this.onMouseMove(e))),t.addListener("leave",(()=>this.onMouseOut())),e.highlightManager.addListener("highlight-change",(e=>this.onHighlightChange(e))),e.layoutService.addListener("layout-complete",(e=>this.layout(e))),(()=>Object.entries(this.labels).forEach((e=>{let[t,i]=e;return i.destroy()}))))}layout(e){let{series:{rect:t,paddedRect:i,visible:o},axes:a}=e;if(this.hideCrosshairs(),!(o&&a&&this.enabled))return void(this.visible=!1);this.visible=!0,this.seriesRect=t,this.hoverRect=i;const{position:s="left",axisId:n}=this.axisCtx,r=a.find((e=>e.id===n));if(!r)return;this.axisLayout=r;const l=r.gridPadding+r.seriesAreaPadding;this.bounds=this.buildBounds(t,s,l);const{crosshairGroup:h,bounds:d}=this;h.translationX=Math.round(d.x),h.translationY=Math.round(d.y);const c=["pointer",...this.axisCtx.seriesKeyProperties()];this.updateSelections(c),this.updateLines(),this.updateLabels(c)}buildBounds(e,t,i){const o=e.clone();return o.x+="left"===t?-i:0,o.y+="top"===t?-i:0,o.width+="left"===t||"right"===t?i:0,o.height+="top"===t||"bottom"===t?i:0,o}updateSelections(e){this.lineGroupSelection.update(e,(e=>e.append(new Ri)),(e=>e))}updateLabels(e){var t;const{labels:i,ctx:o,axisLayout:a}=this;e.forEach((e=>{var t;null!=i[e]||(i[e]=new Oi(null!=(t=o.scene.canvas.container)?t:Ui().body)),this.updateLabel(i[e])}));const s=null!=(t=this.label.format)?t:null==a?void 0:a.label.format;this.labelFormatter=s?this.axisCtx.scaleValueFormatter(s):void 0}updateLabel(e){const{enabled:t,className:i,xOffset:o,yOffset:a,format:s,renderer:n}=this.label;e.enabled=t,e.className=i,e.xOffset=o,e.yOffset=a,e.format=s,e.renderer=n}updateLines(){const{lineGroupSelection:e,bounds:t,stroke:i,strokeWidth:o,strokeOpacity:a,lineDash:s,lineDashOffset:n,axisLayout:r}=this;if(!r)return;const l=this.isVertical();e.each((e=>{e.stroke=i,e.strokeWidth=o,e.strokeOpacity=a,e.lineDash=s,e.lineDashOffset=n,e.y1=0,e.y2=l?t.height:0,e.x1=0,e.x2=l?0:t.width}))}isVertical(){return"x"===this.axisCtx.direction}formatValue(e){var t;const{labelFormatter:i,axisLayout:o,ctx:{callbackCache:a}}=this;if(i){const t=a.call(i,e);if(void 0!==t)return t}const s=e%1===0,n=(null!=(t=null==o?void 0:o.label.fractionDigits)?t:0)+(s?0:1);return"number"==typeof e?e.toFixed(n):String(e)}onMouseMove(e){if(!this.enabled||this.snap)return;const{crosshairGroup:t,hoverRect:i}=this,{offsetX:o,offsetY:a}=e;if(this.visible&&i.containsPoint(o,a)){t.visible=!0;const i=this.getData(e);this.updatePositions(i)}else this.hideCrosshairs()}onMouseOut(){this.hideCrosshairs()}onHighlightChange(e){var t,i,o;if(!this.enabled)return;const{crosshairGroup:a,axisCtx:s}=this,{datum:n,series:r}=null!=(t=e.currentHighlight)?t:{},l=n&&((null==(i=null==r?void 0:r.axes.x)?void 0:i.id)===s.axisId||(null==(o=null==r?void 0:r.axes.y)?void 0:o.id)===s.axisId);if(this.activeHighlight=l?e.currentHighlight:void 0,this.snap){if(!this.visible||!this.activeHighlight)return void this.hideCrosshairs();const e=this.getActiveHighlightData(this.activeHighlight);this.updatePositions(e),a.visible=!0}}updatePositions(e){const{seriesRect:t,lineGroupSelection:i}=this;i.each(((i,o)=>{const a=e[o];if(!a)return void(i.visible=!1);i.visible=!0;const{value:s,position:n}=a;let r=0,l=0;this.isVertical()?(r=n,i.translationX=Math.round(r)):(l=n,i.translationY=Math.round(l)),this.label.enabled?this.showLabel(r+t.x,l+t.y,s,o):this.hideLabel(o)}))}getData(e){var t,i;const{seriesRect:o,axisCtx:a}=this,s="pointer",{datum:n,xKey:r="",yKey:l=""}=null!=(t=this.activeHighlight)?t:{},{offsetX:h,offsetY:d}=e,c=h-o.x,u=d-o.y,p=this.isVertical();return{[s]:{position:p?c:u,value:a.continuous?a.scaleInvert(p?c:u):null!=(i=null==n?void 0:n[p?r:l])?i:""}}}getActiveHighlightData(e){var t,i;const{axisCtx:o}=this,{datum:a,series:s,xKey:n="",aggregatedValue:r,cumulativeValue:l,midPoint:h}=e,d=s.getKeyProperties(o.direction),c=o.scaleBandwidth()/2,u=(null==(t=s.axes[o.direction])?void 0:t.id)===o.axisId,p=d.indexOf("yKey")>-1&&u,y=d.indexOf("xKey")>-1&&u;if(p&&void 0!==r)return{yKey:{value:r,position:o.scaleConvert(r)+c}};if(p&&void 0!==l)return{yKey:{value:l,position:o.scaleConvert(l)+c}};if(y){const e=null!=(i=this.isVertical()?null==h?void 0:h.x:null==h?void 0:h.y)?i:0;return{xKey:{value:o.continuous?o.scaleInvert(e):a[n],position:e}}}const g={};return d.forEach((e=>{const t=s.properties[e],i=a[t],n=o.scaleConvert(i)+c;g[e]={value:i,position:n}})),g}getLabelHtml(e,t){const{label:{renderer:i},axisLayout:{label:{fractionDigits:o=0}={}}={}}=this,a={text:this.formatValue(e)};if(i){const s={value:e,fractionDigits:o};return t.toLabelHtml(i(s),a)}return t.toLabelHtml(a)}showLabel(e,t,i,o){const{axisCtx:a,bounds:s,axisLayout:n}=this;if(!n)return;const{label:{padding:r},tickSize:l}=n,h=r+l,d=this.labels[o],c=this.getLabelHtml(i,d);d.setLabelHtml(c);const u=d.computeBBox();let p;if(this.isVertical()){const t=-u.width/2,i="bottom"===a.position?0:-u.height;p={x:e+t,y:("bottom"===a.position?s.y+s.height+h:s.y-h)+i}}else{const e=-u.height/2,i="right"===a.position?0:-u.width;p={x:("right"===a.position?s.x+s.width+h:s.x-h)+i,y:t+e}}d.show(p)}hideCrosshairs(){this.crosshairGroup.visible=!1;for(const e in this.labels)this.hideLabel(e)}hideLabel(e){this.labels[e].toggle(!1)}};f([Fi(zi)],Wi.prototype,"enabled",2),f([Fi(Ki,{optional:!0})],Wi.prototype,"stroke",2),f([Fi(Vi,{optional:!0})],Wi.prototype,"lineDash",2),f([Fi(Pi)],Wi.prototype,"lineDashOffset",2),f([Fi(Pi)],Wi.prototype,"strokeWidth",2),f([Fi(_i)],Wi.prototype,"strokeOpacity",2),f([Fi(zi)],Wi.prototype,"snap",2),f([Fi(ji)],Wi.prototype,"label",2);var Gi={type:"axis-option",optionsKey:"crosshair",packageType:"enterprise",chartTypes:["cartesian"],axisTypes:["category","ordinal-time","number","log","time"],instanceConstructor:Wi,themeTemplate:{crosshair:{enabled:!0,snap:!0,stroke:o.a.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}},category:{crosshair:{enabled:!1,snap:!0,stroke:o.a.DEFAULT_MUTED_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,lineDash:[5,6],lineDashOffset:0,label:{enabled:!0}}}}},{BOOLEAN:Yi,FUNCTION:Hi,ActionOnSet:Xi,Validate:Qi}=o.m,Zi=class extends o.m.BaseModuleInstance{constructor(e){super(),this.enabled=!1,this.getData=()=>Promise.resolve(),this.dataService=e.dataService}updateCallback(e,t){this.dataService&&(e&&null!=t?this.dataService.updateCallback(t):this.dataService.clearCallback())}};f([Xi({newValue(e){this.updateCallback(e,this.getData)}}),Qi(Yi)],Zi.prototype,"enabled",2),f([Xi({newValue(e){this.updateCallback(this.enabled,e)}}),Qi(Hi)],Zi.prototype,"getData",2),f([Xi({newValue(e){this.dataService.requestThrottle=e}})],Zi.prototype,"requestThrottle",2),f([Xi({newValue(e){this.dataService.dispatchThrottle=e}})],Zi.prototype,"updateThrottle",2),f([Xi({newValue(e){this.dataService.dispatchOnlyLatest=!e}})],Zi.prototype,"updateDuringInteraction",2);var qi={type:"root",optionsKey:"dataSource",packageType:"enterprise",chartTypes:["cartesian","hierarchy","polar","topology"],instanceConstructor:Zi,themeTemplate:{dataSource:{enabled:!1}}},{partialAssign:Ji,mergeDefaults:$i}=o.m,{BBox:eo}=o.i,to=class{constructor(e){this.components=e,this.union=eo.merge(e)}containsPoint(e,t){if(!this.union.containsPoint(e,t))return!1;for(const i of this.components)if(i.containsPoint(e,t))return!0;return!1}},io=class extends o.i.Group{constructor(){super(),this.capLength=NaN,this._datum=void 0,this.whiskerPath=new o.i.Path,this.capsPath=new o.i.Path,this.bboxes=new to([]),this.append([this.whiskerPath,this.capsPath])}get datum(){return this._datum}set datum(e){this._datum=e}calculateCapLength(e,t){const{lengthRatio:i=1,length:o}=e,{lengthRatioMultiplier:a,lengthMax:s}=t,n=null!==o&&void 0!==o?o:i*a;return Math.min(n,s)}getFormatterParams(e,t){const{datum:i}=this;if(void 0===i||void 0===e.formatter&&void 0===e.cap.formatter)return;const{xLowerKey:o,xLowerName:a,xUpperKey:s,xUpperName:n,yLowerKey:r,yLowerName:l,yUpperKey:h,yUpperName:d}=e;return{datum:i.datum,seriesId:i.datum.seriesId,xKey:i.xKey,yKey:i.yKey,xLowerKey:o,xLowerName:a,xUpperKey:s,xUpperName:n,yLowerKey:r,yLowerName:l,yUpperKey:h,yUpperName:d,highlighted:t}}formatStyles(e,t,i){let o=e,{cap:a}=o,s=x(o,["cap"]);const n=this.getFormatterParams(t,i);if(void 0!==n){if(void 0!==t.formatter){const e=t.formatter(n);s=$i(e,s),a=$i(e,a),a=$i(null==e?void 0:e.cap,a)}if(void 0!==t.cap.formatter){const e=t.cap.formatter(n);a=$i(e,a)}}return{whiskerStyle:s,capsStyle:a}}applyStyling(e,t){Ji(["visible","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],e,t)}update(e,t,i){if(void 0===this.datum)return;const{whiskerStyle:o,capsStyle:a}=this.formatStyles(e,t,i),{xBar:s,yBar:n,capDefaults:r}=this.datum,l=this.whiskerPath;this.applyStyling(l,o),l.path.clear(),void 0!==n&&(l.path.moveTo(n.lowerPoint.x,n.lowerPoint.y),l.path.lineTo(n.upperPoint.x,n.upperPoint.y)),void 0!==s&&(l.path.moveTo(s.lowerPoint.x,s.lowerPoint.y),l.path.lineTo(s.upperPoint.x,s.upperPoint.y)),l.path.closePath(),l.markDirtyTransform(),this.capLength=this.calculateCapLength(null!==a&&void 0!==a?a:{},r);const h=this.capLength/2,d=this.capsPath;this.applyStyling(d,a),d.path.clear(),void 0!==n&&(d.path.moveTo(n.lowerPoint.x-h,n.lowerPoint.y),d.path.lineTo(n.lowerPoint.x+h,n.lowerPoint.y),d.path.moveTo(n.upperPoint.x-h,n.upperPoint.y),d.path.lineTo(n.upperPoint.x+h,n.upperPoint.y)),void 0!==s&&(d.path.moveTo(s.lowerPoint.x,s.lowerPoint.y-h),d.path.lineTo(s.lowerPoint.x,s.lowerPoint.y+h),d.path.moveTo(s.upperPoint.x,s.upperPoint.y-h),d.path.lineTo(s.upperPoint.x,s.upperPoint.y+h)),d.path.closePath(),d.markDirtyTransform()}updateBBoxes(){var e;const{capLength:t,whiskerPath:i,capsPath:o}=this,{yBar:a,xBar:s}=null!=(e=this.datum)?e:{},n=t/2,r=[];if(void 0!==a){const e=a.lowerPoint.y-a.upperPoint.y;r.push(new eo(a.lowerPoint.x,a.upperPoint.y,i.strokeWidth,e),new eo(a.lowerPoint.x-n,a.lowerPoint.y,t,o.strokeWidth),new eo(a.upperPoint.x-n,a.upperPoint.y,t,o.strokeWidth))}if(void 0!==s){const e=s.upperPoint.x-s.lowerPoint.x;r.push(new eo(s.lowerPoint.x,s.upperPoint.y,e,i.strokeWidth),new eo(s.lowerPoint.x,s.lowerPoint.y-n,o.strokeWidth,t),new eo(s.upperPoint.x,s.upperPoint.y-n,o.strokeWidth,t))}this.bboxes.components=r,this.bboxes.union=eo.merge(r)}containsPoint(e,t){return this.bboxes.containsPoint(e,t)}pickNode(e,t){return this.containsPoint(e,t)?this:void 0}nearestSquared(e,t,i){const{bboxes:o}=this;if(o.union.distanceSquared(e,t)>i)return{nearest:void 0,distanceSquared:1/0};const{distanceSquared:a}=eo.nearestBox(e,t,o.components);return{nearest:this,distanceSquared:a}}},oo=class extends o.i.Group{get children(){return super.children}nearestSquared(e,t){const{nearest:i,distanceSquared:a}=o.i.nearestSquaredInContainer(e,t,this);if(void 0!==i&&!isNaN(a))return{datum:i.datum,distanceSquared:a}}},{BaseProperties:ao,Validate:so,BOOLEAN:no,COLOR_STRING:ro,FUNCTION:lo,LINE_DASH:ho,NUMBER:co,OBJECT:uo,POSITIVE_NUMBER:po,RATIO:yo,STRING:go}=o.m,mo=class extends ao{};f([so(no,{optional:!0})],mo.prototype,"visible",2),f([so(ro,{optional:!0})],mo.prototype,"stroke",2),f([so(po,{optional:!0})],mo.prototype,"strokeWidth",2),f([so(yo,{optional:!0})],mo.prototype,"strokeOpacity",2),f([so(ho,{optional:!0})],mo.prototype,"lineDash",2),f([so(po,{optional:!0})],mo.prototype,"lineDashOffset",2),f([so(co,{optional:!0})],mo.prototype,"length",2),f([so(yo,{optional:!0})],mo.prototype,"lengthRatio",2),f([so(lo,{optional:!0})],mo.prototype,"formatter",2);var xo=class extends ao{constructor(){super(...arguments),this.visible=!0,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.cap=new mo}};f([so(go,{optional:!0})],xo.prototype,"yLowerKey",2),f([so(go,{optional:!0})],xo.prototype,"yLowerName",2),f([so(go,{optional:!0})],xo.prototype,"yUpperKey",2),f([so(go,{optional:!0})],xo.prototype,"yUpperName",2),f([so(go,{optional:!0})],xo.prototype,"xLowerKey",2),f([so(go,{optional:!0})],xo.prototype,"xLowerName",2),f([so(go,{optional:!0})],xo.prototype,"xUpperKey",2),f([so(go,{optional:!0})],xo.prototype,"xUpperName",2),f([so(no,{optional:!0})],xo.prototype,"visible",2),f([so(ro,{optional:!0})],xo.prototype,"stroke",2),f([so(po,{optional:!0})],xo.prototype,"strokeWidth",2),f([so(yo,{optional:!0})],xo.prototype,"strokeOpacity",2),f([so(ho,{optional:!0})],xo.prototype,"lineDash",2),f([so(po,{optional:!0})],xo.prototype,"lineDashOffset",2),f([so(lo,{optional:!0})],xo.prototype,"formatter",2),f([so(uo)],xo.prototype,"cap",2);var{fixNumericExtent:fo,groupAccumulativeValueProperty:vo,isDefined:Do,mergeDefaults:Mo,valueProperty:bo,ChartAxisDirection:So}=o.m;var No=class e extends o.m.BaseModuleInstance{constructor(e){super(),this.properties=new xo;const t=function(e){for(const t of o.e)if(t==e.series.type)return e.series;throw new Error("AG Charts - unsupported series type '".concat(e.series.type,"', error bars supported series types: ").concat(o.e.join(", ")))}(e),{annotationGroup:i,annotationSelections:a}=t;this.cartesianSeries=t,this.groupNode=new oo({name:"".concat(i.id,"-errorBars"),zIndex:o.m.Layers.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}),i.appendChild(this.groupNode),this.selection=o.i.Selection.select(this.groupNode,(()=>this.errorBarFactory())),a.add(this.selection),this.destroyFns.push(t.addListener("data-processed",(e=>this.onDataProcessed(e))),t.addListener("data-update",(e=>this.onDataUpdate(e))),t.addListener("visibility-changed",(e=>this.onToggleSeriesItem(e))),e.highlightManager.addListener("highlight-change",(e=>this.onHighlightChange(e))),(()=>i.removeChild(this.groupNode)),(()=>a.delete(this.selection)))}hasErrorBars(){const{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:o}=this.properties;return Do(e)&&Do(t)||Do(i)&&Do(o)}isStacked(){var e;const t=null==(e=this.cartesianSeries.seriesGrouping)?void 0:e.stackCount;return void 0!==t&&t>0}getUnstackPropertyDefinition(e){const t=[],{cartesianSeries:i}=this,{xLowerKey:o,xUpperKey:a,yLowerKey:s,yUpperKey:n,xErrorsID:r,yErrorsID:l}=this.getMaybeFlippedKeys(),{isContinuousX:h,isContinuousY:d}=e;return void 0!==s&&void 0!==n&&t.push(bo(i,s,d,{id:l}),bo(i,n,d,{id:l})),void 0!==o&&void 0!==a&&t.push(bo(i,o,h,{id:r}),bo(i,a,h,{id:r})),t}getStackPropertyDefinition(e){var t,i;const o=[],{cartesianSeries:a}=this,{xLowerKey:s,xUpperKey:n,yLowerKey:r,yUpperKey:l,xErrorsID:h,yErrorsID:d}=this.getMaybeFlippedKeys(),{isContinuousX:c,isContinuousY:u}=e,p=null!=(i=null==(t=a.seriesGrouping)?void 0:t.groupIndex)?i:a.id,y=g({invalidValue:null,missingValue:0,separateNegative:!0},a.visible?{}:{forceValue:0}),m=(e,t,i,o)=>vo(a,e,t,"normal","current",g({id:"".concat(i,"-").concat(o),groupId:"errorGroup-".concat(p,"-").concat(o)},y)),x=(e,t,i,a)=>{o.push(...m(e,i,a,"lower"),...m(t,i,a,"upper"))};return void 0!==r&&void 0!==l&&x(r,l,u,d),void 0!==s&&void 0!==n&&x(s,n,c,h),o}getPropertyDefinitions(e){return this.isStacked()?this.getStackPropertyDefinition(e):this.getUnstackPropertyDefinition(e)}onDataProcessed(e){this.dataModel=e.dataModel,this.processedData=e.processedData}getDomain(e){const{xLowerKey:t,xUpperKey:i,xErrorsID:o,yLowerKey:a,yUpperKey:s,yErrorsID:n}=this.getMaybeFlippedKeys();if(e===So.X?Do(t)&&Do(i):Do(a)&&Do(s)){const{dataModel:t,processedData:i,cartesianSeries:a}=this,s=a.axes[e],r={x:o,y:n}[e];if(void 0!==t&&void 0!==i){if(this.isStacked()){const e=t.getDomain(a,"".concat(r,"-lower"),"value",i),o=t.getDomain(a,"".concat(r,"-upper"),"value",i),n=[Math.min(...e,...o),Math.max(...e,...o)];return fo(n,s)}{const e=t.getDomain(a,r,"value",i);return fo(e,s)}}}return[]}onDataUpdate(e){this.dataModel=e.dataModel,this.processedData=e.processedData,Do(e.dataModel)&&Do(e.processedData)&&(this.createNodeData(),this.update())}getNodeData(){const{contextNodeData:e}=this.cartesianSeries;if(e.length>0)return e[0].nodeData}createNodeData(){var e,t;const i=this.getNodeData(),o=null==(e=this.cartesianSeries.axes[So.X])?void 0:e.scale,a=null==(t=this.cartesianSeries.axes[So.Y])?void 0:t.scale;if(this.hasErrorBars()&&o&&a&&i)for(let s=0;s<i.length;s++){const{midPoint:e,xLower:t,xUpper:n,yLower:r,yUpper:l}=this.getDatum(i,s);if(void 0!==e){let h,d;Do(t)&&Do(n)&&(h={lowerPoint:{x:this.convert(o,t),y:e.y},upperPoint:{x:this.convert(o,n),y:e.y}}),Do(r)&&Do(l)&&(d={lowerPoint:{x:e.x,y:this.convert(a,r)},upperPoint:{x:e.x,y:this.convert(a,l)}}),i[s].xBar=h,i[s].yBar=d}}}getMaybeFlippedKeys(){let{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:o}=this.properties,[a,s]=["xValue-errors","yValue-errors"];return this.cartesianSeries.shouldFlipXY()&&([e,i]=[i,e],[t,o]=[o,t],[a,s]=[s,a]),{xLowerKey:e,xUpperKey:t,xErrorsID:a,yLowerKey:i,yUpperKey:o,yErrorsID:s}}static getDatumKey(e,t,i){if(void 0===t)return;const a=e.datum[t];return void 0!==a?"number"!=typeof a?void o.s.Logger.warnOnce("Found [".concat(t,"] error value of type ").concat(typeof a,". Expected number type")):a+i:void 0}getDatum(t,i){const{xLowerKey:o,xUpperKey:a,yLowerKey:s,yUpperKey:n}=this.getMaybeFlippedKeys(),r=t[i],l=void 0!==r.cumulativeValue&&this.isStacked()?r.cumulativeValue-r.yValue:0,[h,d]=this.cartesianSeries.shouldFlipXY()?[l,0]:[0,l];return{midPoint:r.midPoint,xLower:e.getDatumKey(r,o,h),xUpper:e.getDatumKey(r,a,h),yLower:e.getDatumKey(r,s,d),yUpper:e.getDatumKey(r,n,d)}}convert(e,t){var i;const o=(null!=(i=e.bandwidth)?i:0)/2;return e.convert(t)+o}update(){const e=this.getNodeData();void 0!==e&&(this.selection.update(e),this.selection.each(((e,t,i)=>this.updateNode(e,t,i))))}updateNode(e,t,i){e.datum=t,e.update(this.getDefaultStyle(),this.properties,!1),e.updateBBoxes()}pickNodeExact(e){const{x:t,y:i}=this.groupNode.transformPoint(e.x,e.y),o=this.groupNode.pickNode(t,i);if(void 0!==o)return{datum:o.datum,distanceSquared:0}}pickNodeNearest(e){return this.groupNode.nearestSquared(e.x,e.y)}pickNodeMainAxisFirst(e){return this.groupNode.nearestSquared(e.x,e.y)}getTooltipParams(){const{xLowerKey:e,xUpperKey:t,yLowerKey:i,yUpperKey:o,xLowerName:a=e,xUpperName:s=t,yLowerName:n=i,yUpperName:r=o}=this.properties;return{xLowerKey:e,xLowerName:a,xUpperKey:t,xUpperName:s,yLowerKey:i,yLowerName:n,yUpperKey:o,yUpperName:r}}onToggleSeriesItem(e){this.groupNode.visible=e.enabled}makeStyle(e){return{visible:e.visible,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,stroke:e.stroke,strokeWidth:e.strokeWidth,strokeOpacity:e.strokeOpacity,cap:Mo(this.properties.cap,e)}}getDefaultStyle(){return this.makeStyle(this.getWhiskerProperties())}getHighlightStyle(){return this.makeStyle(this.getWhiskerProperties())}restyleHighlightChange(e,t,i){const o=this.getNodeData();if(void 0!==o)for(let a=0;a<o.length;a++)if(e===o[a]){this.selection.nodes()[a].update(t,this.properties,i);break}}onHighlightChange(e){const{previousHighlight:t,currentHighlight:i}=e;(null==i?void 0:i.series)===this.cartesianSeries&&this.restyleHighlightChange(i,this.getHighlightStyle(),!0),(null==t?void 0:t.series)===this.cartesianSeries&&this.restyleHighlightChange(t,this.getDefaultStyle(),!1),this.groupNode.opacity=this.cartesianSeries.getOpacity()}errorBarFactory(){return new io}getWhiskerProperties(){const{stroke:e,strokeWidth:t,visible:i,strokeOpacity:o,lineDash:a,lineDashOffset:s}=this.properties;return{stroke:e,strokeWidth:t,visible:i,strokeOpacity:o,lineDash:a,lineDashOffset:s}}},Io={series:{errorBar:{visible:!0,stroke:o.a.DEFAULT_LABEL_COLOUR,strokeWidth:1,strokeOpacity:1,cap:{length:void 0,lengthRatio:void 0}}}},ko={type:"series-option",identifier:"error-bars",optionsKey:"errorBar",packageType:"enterprise",chartTypes:["cartesian"],seriesTypes:o.e,instanceConstructor:No,themeTemplate:Io},{Validate:Ao,BOOLEAN:To,POSITIVE_NUMBER:Lo,Layers:Oo,ActionOnSet:Eo,CategoryAxis:Ro,GroupedCategoryAxis:Co}=o.m,{toRadians:wo,Padding:Po,Logger:_o}=o.s,{Text:zo,Group:Ko,BBox:Vo}=o.i,jo=class{constructor(){this.top=0,this.bottom=0}};f([Ao(Lo)],jo.prototype,"top",2),f([Ao(Lo)],jo.prototype,"bottom",2);var Fo=class extends o.m.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.padding=new jo,this.root=new Ko({name:"root"}),this.seriesRoot=this.root.appendChild(new Ko({name:"Series-root",layer:!0,zIndex:Oo.SERIES_LAYER_ZINDEX})),this.axisGridGroup=this.root.appendChild(new Ko({name:"Axes-Grids",layer:!0,zIndex:Oo.AXIS_GRID_ZINDEX})),this.axisGroup=this.root.appendChild(new Ko({name:"Axes-Grids",layer:!0,zIndex:Oo.AXIS_GRID_ZINDEX})),this.data=[],this._destroyed=!1,this.miniChartAnimationPhase="initial",this.axes=[],this.series=[]}destroy(){this._destroyed||(this.destroySeries(this.series),this.axes.forEach((e=>e.destroy())),this.axes=[],this._destroyed=!0)}onSeriesChange(e,t){var i;const o=null!=(i=null==t?void 0:t.filter((t=>!e.includes(t))))?i:[];this.destroySeries(o);for(const a of e){if(null!=t&&t.includes(a))continue;null==a.rootGroup.parent&&this.seriesRoot.appendChild(a.rootGroup);const e=this;a.chart={get mode(){return"standalone"},get isMiniChart(){return!0},get seriesRect(){return e.seriesRect},placeLabels:()=>new Map},a.resetAnimation("initial"===this.miniChartAnimationPhase?"initial":"disabled")}}destroySeries(e){null==e||e.forEach((e=>{e.destroy(),null!=e.rootGroup&&this.seriesRoot.removeChild(e.rootGroup),e.chart=void 0}))}assignSeriesToAxes(){this.axes.forEach((e=>{e.boundSeries=this.series.filter((t=>t.axes[e.direction]===e))}))}assignAxesToSeries(){const e={};this.axes.forEach((t=>{var i;const o=t.direction;(null!=(i=e[o])?i:e[o]=[]).push(t)})),this.series.forEach((t=>{t.directions.forEach((i=>{const o=e[i];if(!o)return void _o.warnOnce("no available axis for direction [".concat(i,"]; check series and axes configuration."));const a=t.getKeys(i),s=this.findMatchingAxis(o,a);s?t.axes[i]=s:_o.warnOnce("no matching axis for direction [".concat(i,"] and keys [").concat(a,"]; check series and axes configuration."))}))}))}findMatchingAxis(e,t){for(const i of e){if(!i.keys.length)return i;if(t)for(const e of t)if(i.keys.includes(e))return i}}updateData(e){return D(this,null,(function*(){this.series.forEach((t=>t.setChartData(e.data))),"initial"===this.miniChartAnimationPhase&&this.ctx.animationManager.onBatchStop((()=>{this.miniChartAnimationPhase="ready",this.series.forEach((e=>e.resetAnimation("disabled")))}))}))}processData(e){return D(this,null,(function*(){this.series.some((e=>e.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=this.series.map((t=>t.processData(e.dataController)));yield Promise.all(t)}))}computeAxisPadding(){const e=new Po;return this.enabled&&this.axes.forEach((t=>{var i;const{position:o,thickness:a=0,line:s,label:n}=t;if(null==o)return;let r;r=a>0?a:(s.enabled?s.width:0)+(n.enabled?(null!=(i=n.fontSize)?i:0)*zo.defaultLineHeightRatio+n.padding:0),e[o]=Math.ceil(r)})),e}layout(e,t){return D(this,null,(function*(){const{padding:i}=this,o=null!=this.seriesRect,a=new Vo(0,0,e,t-(i.top+i.bottom));this.seriesRect=a,this.seriesRoot.translationY=i.top,this.seriesRoot.setClipRectInGroupCoordinateSpace(this.seriesRoot.inverseTransformBBox(new Vo(0,-i.top,e,t)));this.axes.forEach((i=>{const{position:s="left"}=i;switch(s){case"top":case"bottom":i.range=[0,a.width],i.gridLength=a.height;break;case"right":case"left":i.range=(e=>e instanceof Ro||e instanceof Co?[0,a.height]:[a.height,0])(i),i.gridLength=a.width}switch(s){case"top":case"left":i.translation.x=0,i.translation.y=0;break;case"bottom":i.translation.x=0,i.translation.y=t;break;case"right":i.translation.x=e,i.translation.y=0}i.gridPadding=0,i.calculateLayout(),i.updatePosition({rotation:wo(i.rotation),sideFlag:i.label.getSideFlag()}),i.update(void 0,o)})),yield Promise.all(this.series.map((e=>e.update({seriesRect:a}))))}))}};f([Ao(To)],Fo.prototype,"enabled",2),f([Eo({changeValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const i of t)e.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of e)null!=t&&t.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup)}})],Fo.prototype,"axes",2),f([Eo({changeValue(e,t){this.onSeriesChange(e,t)}})],Fo.prototype,"series",2);var{ObserveChanges:Bo}=o.m,Uo=class e extends o.m.Navigator{constructor(e){super(e),this.miniChart=new Fo(e)}updateData(e){return D(this,null,(function*(){yield this.miniChart.updateData(e)}))}processData(e){return D(this,null,(function*(){yield this.miniChart.processData(e)}))}performLayout(t){return D(this,null,(function*(){const{shrinkRect:i}=yield v(e.prototype,this,"performLayout").call(this,t);if(this.enabled){const{top:e,bottom:t}=this.miniChart.computeAxisPadding();i.shrink(e+t,"bottom"),this.y-=t}return{shrinkRect:i}}))}performCartesianLayout(t){return D(this,null,(function*(){yield v(e.prototype,this,"performCartesianLayout").call(this,t),yield this.miniChart.layout(this.width,this.height)}))}};f([Bo(((e,t,i)=>{e.updateBackground(null==i?void 0:i.root,null==t?void 0:t.root)}))],Uo.prototype,"miniChart",2);var Wo,Go={type:"root",optionsKey:"navigator",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Uo,themeTemplate:m(g({},o.m.NavigatorModule.themeTemplate),{navigator:m(g({},null==(Wo=o.m.NavigatorModule.themeTemplate)?void 0:Wo.navigator),{miniChart:{enabled:!1,label:{color:o.a.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:o.a.DEFAULT_FONT_FAMILY,formatter:void 0,padding:0},padding:{top:0,bottom:0}}})})},{BOOLEAN:Yo,ActionOnSet:Ho,Validate:Xo}=o.m,Qo=class extends o.m.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1}};f([Ho({changeValue(e){this.ctx.toolbarManager.toggleVisibility("range-buttons",e)}}),Xo(Yo)],Qo.prototype,"enabled",2);var Zo={type:"root",optionsKey:"rangeButtons",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:Qo,themeTemplate:{rangeButtons:{enabled:!1}}},{BOOLEAN:qo,STRING:Jo,UNION:$o,BaseProperties:ea,CartesianAxis:ta,ChartUpdateType:ia,arraysEqual:oa,isDate:aa,isDefined:sa,isFiniteNumber:na,ObserveChanges:ra,TooltipManager:la,Validate:ha}=o.m,{Logger:da}=o.s,ca=class extends ea{constructor(e){super(),this.moduleContext=e,this.enabled=!1,this.axes="x",this.nodeInteraction=!0,this.zoom=!0}updateChart(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ia.UPDATE_DATA;e.updateService.update(t,{skipSync:!0})}updateSiblings(e){const{syncManager:t}=this.moduleContext;D(this,null,(function*(){for(const i of t.getGroupSiblings(e))yield i.waitForDataProcess(120),this.updateChart(i)})).catch((e=>{da.warnOnce("Error updating sibling chart",e)}))}enabledZoomSync(){const{syncManager:e,zoomManager:t}=this.moduleContext;this.disableZoomSync=t.addListener("zoom-change",(()=>{var t;for(const i of e.getGroupSiblings(this.groupId))null!=(t=i.modulesManager.getModule("sync"))&&t.zoom&&i.zoomManager.updateZoom("sync",this.mergeZoom(i))}))}enabledNodeInteractionSync(){const{highlightManager:e,syncManager:t}=this.moduleContext;this.disableNodeInteractionSync=e.addListener("highlight-change",(e=>{var i,o,a,s,n,r,l,h,d,c,u,p;for(const y of t.getGroupSiblings(this.groupId))if(null!=(i=y.modulesManager.getModule("sync"))&&i.nodeInteraction){if(null==(o=e.currentHighlight)||!o.datum){y.highlightManager.updateHighlight(y.id),y.tooltipManager.removeTooltip(y.id);continue}for(const t of y.axes){const i="xy"===this.axes?"x":this.axes;if(!ta.is(t)||t.direction!==i)continue;const o=y.series.map((i=>{const o=i.getKeys(t.direction);if(t.keys.length&&!t.keys.some((e=>o.includes(e))))return;const[{nodeData:a}]=i.contextNodeData;if(null==a||!a.length)return;const s=a[0]["".concat(t.direction,"Key")];let n=e.currentHighlight.datum[s];const r=aa(n);r&&(n=n.getTime());const l=a.find((e=>{const t=e.datum[s];return r?t.getTime()===n:t===n}));return l?{series:i,nodeDatum:l}:null})).filter(sa);if(o.length<2&&(null==(a=o[0])?void 0:a.nodeDatum)!==y.highlightManager.getActiveHighlight()){const{series:e,nodeDatum:t}=null!=(s=o[0])?s:{};if(y.highlightManager.updateHighlight(y.id,t),t){const i=null!=(h=null!=(l=null==(n=t.midPoint)?void 0:n.x)?l:null==(r=t.point)?void 0:r.x)?h:0,o=null!=(p=null!=(u=null==(d=t.midPoint)?void 0:d.y)?u:null==(c=t.point)?void 0:c.y)?p:0,a=la.makeTooltipMeta({offsetX:i,offsetY:o},t);delete a.lastPointerEvent,y.tooltipManager.updateTooltip(y.id,a,e.getTooltipHtml(t))}else y.tooltipManager.removeTooltip(y.id);this.updateChart(y,ia.SERIES_UPDATE)}}}}))}syncAxes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const{syncManager:t}=this.moduleContext,i=t.getChart(),o=t.getGroup(this.groupId),a=o.flatMap((e=>e.series)),s=o[0].axes;let n=!1;i.axes.forEach((e=>{if(!ta.is(e)||"xy"!==this.axes&&this.axes!==e.direction)return void(e.boundSeries=i.series.filter((t=>t.axes[e.direction]===e)));const{direction:t,min:o,max:r,nice:l,reverse:h}=e;for(const a of s)if(t===a.direction&&(l!==a.nice||h!==a.reverse||o!==a.min&&(na(o)||na(a.min))||r!==a.max&&(na(r)||na(a.max))))return da.warnOnce("To allow synchronization, ensure that all charts have matching min, max, nice, and reverse properties on the synchronized axes."),e.boundSeries=i.series.filter((t=>t.axes[e.direction]===e)),void(this.enabled=!1);const d=a.filter((t=>{if(t.visible){const i=t.getKeys(e.direction);return!e.keys.length||e.keys.some((e=>i.includes(e)))}}));oa(e.boundSeries,d)||(e.boundSeries=d,n=!0)})),n&&!e&&this.updateSiblings(this.groupId)}mergeZoom(e){var t,i;const{zoomManager:o}=this.moduleContext;if("xy"===this.axes)return o.getZoom();const a=null!=(t=e.zoomManager.getZoom())?t:{};return a[this.axes]=null==(i=o.getZoom())?void 0:i[this.axes],a}onEnabledChange(){const{syncManager:e}=this.moduleContext;this.enabled?e.subscribe(this.groupId):e.unsubscribe(this.groupId),this.updateSiblings(this.groupId),this.onNodeInteractionChange(),this.onZoomChange()}onGroupIdChange(e,t){if(!this.enabled||e===t)return;const{syncManager:i}=this.moduleContext;i.unsubscribe(t),i.subscribe(e),this.updateSiblings(t),this.updateSiblings(e)}onAxesChange(){if(!this.enabled)return;const{syncManager:e}=this.moduleContext;this.updateChart(e.getChart())}onNodeInteractionChange(){var e;this.enabled&&this.nodeInteraction?this.enabledNodeInteractionSync():null==(e=this.disableNodeInteractionSync)||e.call(this)}onZoomChange(){var e;this.enabled&&this.zoom?this.enabledZoomSync():null==(e=this.disableZoomSync)||e.call(this)}destroy(){var e;const{syncManager:t}=this.moduleContext;t.unsubscribe(this.groupId),this.updateSiblings(this.groupId),null==(e=this.disableZoomSync)||e.call(this)}};ca.className="Sync",f([ha(qo),ra((e=>e.onEnabledChange()))],ca.prototype,"enabled",2),f([ha(Jo,{optional:!0}),ra(((e,t,i)=>e.onGroupIdChange(t,i)))],ca.prototype,"groupId",2),f([ha($o(["x","y","xy"],"an axis")),ra((e=>e.onAxesChange()))],ca.prototype,"axes",2),f([ha(qo),ra((e=>e.onNodeInteractionChange()))],ca.prototype,"nodeInteraction",2),f([ha(qo),ra((e=>e.onZoomChange()))],ca.prototype,"zoom",2);var ua={type:"root",optionsKey:"sync",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:ca,themeTemplate:{sync:{enabled:!1}}},pa=864e5,ya=30*pa,ga=new Map([["1m",ya],["3m",3*ya],["6m",6*ya],["YTD",e=>new Date("".concat(new Date(e).getFullYear(),"-01-01")).getTime()],["1y",365*pa],["All",null]]),{COLOR_STRING:ma,RATIO:xa,Validate:fa}=o.m,va=class extends o.i.Rect{constructor(){super(...arguments),this.fill="rgb(33, 150, 243)",this.fillOpacity=.2}};va.className="ZoomRect",f([fa(ma)],va.prototype,"fill",2),f([fa(xa)],va.prototype,"fillOpacity",2);var{clamp:Da}=o.m,Ma={min:0,max:1},ba=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ma.min,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ma.max;return Da(t,e,i)};function Sa(e){return e.x.max-e.x.min}function Na(e){return e.y.max-e.y.min}function Ia(e){var t,i,o,a,s,n,r,l;return{x:{min:null!=(i=null==(t=null==e?void 0:e.x)?void 0:t.min)?i:Ma.min,max:null!=(a=null==(o=null==e?void 0:e.x)?void 0:o.max)?a:Ma.max},y:{min:null!=(n=null==(s=null==e?void 0:e.y)?void 0:s.min)?n:Ma.min,max:null!=(l=null==(r=null==e?void 0:e.y)?void 0:r.max)?l:Ma.max}}}function ka(e,t,i){if(!e)return{x:0,y:0};const o=ba(t-e.x,0,e.x+e.width),a=ba(i-e.y,0,e.y+e.height),s=1/e.width*o,n=1-1/e.height*a;return{x:ba(s),y:ba(n)}}function Aa(e,t,i){return{x:{min:e.x.min+t,max:e.x.max+t},y:{min:e.y.min+i,max:e.y.max+i}}}function Ta(e,t,i){const o=Sa(e),a=Na(e),s=e.x.min+o/2,n=e.y.min+a/2;return{x:{min:s-o*t/2,max:s+o*t/2},y:{min:n-a*i/2,max:n+a*i/2}}}function La(e,t,i,o){const{min:a,max:s}=t,n=a+(s-a)/2,r=e.max-e.min;switch(i){case"start":return{min:a,max:t.min+r};case"end":return{min:t.max-r,max:s};case"middle":return{min:n-r/2,max:n+r/2};case"pointer":return Oa(e,t,null!==o&&void 0!==o?o:n);default:return{min:a,max:s}}}function Oa(e,t,i){const o=i-i*(1-(t.max-t.min-(e.max-e.min)));return{min:e.min+o,max:e.max+o}}function Ea(e){const t={x:g({},Ma),y:g({},Ma)};return t.x=Ra(e.x),t.y=Ra(e.y),t}function Ra(e){const t=e.max-e.min;let i=e.max>Ma.max?Ma.max-t:e.min,o=e.min<Ma.min?t:e.max;return i=Math.max(Ma.min,i),o=Math.min(Ma.max,o),{min:i,max:o}}function Ca(e,t,i){let{min:o,max:a}=e;if(a===t.max)o=a-i;else if(o===t.min)a=o+i;else{const e=t.min+(t.max-t.min)/2;o=e-i/2,a=e+i/2}return{min:o,max:a}}var wa=class{update(e,t,i,a,s,n){return null!=this.oldZoom||(this.oldZoom=Ia(t===o.m.ChartAxisDirection.X?m(g({},s),{x:n}):m(g({},s),{y:n}))),this.updateCoords(e.offsetX,e.offsetY),this.updateZoom(t,i,a)}stop(){this.coords=void 0,this.oldZoom=void 0}updateCoords(e,t){this.coords?(this.coords.x2=e,this.coords.y2=t):this.coords={x1:e,y1:t,x2:e,y2:t}}updateZoom(e,t,i){const{coords:a,oldZoom:s}=this;let n=Ia(s);if(!a||!s)return e===o.m.ChartAxisDirection.X?n.x:n.y;const r=ka(i,a.x1,a.y1),l=ka(i,a.x2,a.y2);if(e===o.m.ChartAxisDirection.X){const e=(l.x-r.x)*Sa(s);return n.x.max+=e,n.x=La(n.x,s.x,t,r.x),n=Ea(n),n.x}const h=(l.y-r.y)*Na(s);return n.y.max-=h,n.y=La(n.y,s.y,t,r.y),n=Ea(n),n.y}},Pa=class{update(e,t,i){return this.updateCoords(e.offsetX,e.offsetY),this.translateZooms(t,i)}stop(){this.coords=void 0}updateCoords(e,t){this.coords?this.coords={x1:this.coords.x2,y1:this.coords.y2,x2:e,y2:t}:this.coords={x1:e,y1:t,x2:e,y2:t}}translateZooms(e,t){var i;const{x1:a=0,y1:s=0,x2:n=0,y2:r=0}=null!=(i=this.coords)?i:{},l=a<=n?n-a:a-n,h=s<=r?r-s:s-r,d=ka(e,e.x+l,e.y+e.height-h),c=a<=n?-d.x:d.x,u=s<=r?d.y:-d.y,p={};for(const[y,{direction:g,zoom:m}]of Object.entries(t)){let e;e=g===o.m.ChartAxisDirection.X?Ia({x:m}):Ia({y:m}),e=Ea(Aa(e,c*Sa(e),u*Na(e))),g===o.m.ChartAxisDirection.X?p[y]={direction:g,zoom:e.x}:p[y]={direction:g,zoom:e.y}}return p}},{AND:_a,DATE:za,NUMBER:Ka,OR:Va,ActionOnSet:ja,isFiniteNumber:Fa,isValidDate:Ba,Validate:Ua}=o.m,Wa=class{constructor(e){this.onChange=e}getRange(){return this.getRangeWithValues(this.start,this.end)}getInitialRange(){return this.getRangeWithValues(this.initialStart,this.initialEnd)}extendToEnd(e){return this.extendWith((t=>Number(t)-e))}extendWith(e){var t;if(!this.domain)return;const i=this.domain.at(-1);if(null==i)return;const o=e(i),a=this.start!==o||this.end!==i;this.end=i,this.start=o,a||null==(t=this.onChange)||t.call(this,this.getRange())}extendAll(){var e;if(!this.domain)return;const t=this.domain[0],i=this.domain.at(-1),o=this.start!==t||this.end!==i;this.start=t,this.end=i,o||null==(e=this.onChange)||e.call(this,this.getRange())}updateAxis(e){const t=e.find((e=>{let{domain:t}=e;const i=!Fa(t[0])||!Fa(t.at(-1)),o=!Ba(t[0])||!Ba(t.at(-1));return i||o}));let i=this.domain;if(!t)return null!=i;let a=t.domain;null!=i&&i[0]instanceof Date&&(i=i.map((e=>e instanceof Date?e.getTime():e)),a=a.map((e=>e instanceof Date?e.getTime():e)));const s=null==i||!o.s.areArrayItemsStrictlyEqual(i,a);return s&&(this.domain=t.domain),s}getRangeWithValues(e,t){const{domain:i}=this;let o=null==i?void 0:i[0],a=null==i?void 0:i.at(-1);if(null==e&&null==t||null==o||null==a)return;o=Number(o),a=Number(a);let s=0,n=1;return null!=e&&(s=(Number(e)-o)/(a-o)),null!=t&&(n=(Number(t)-o)/(a-o)),{min:s,max:n}}};f([ja({changeValue(e){var t;null!=this.initialStart||(this.initialStart=e),null==(t=this.onChange)||t.call(this,this.getRangeWithValues(e,this.end))}}),Ua(_a(Va(za,Ka)),{optional:!0})],Wa.prototype,"start",2),f([ja({changeValue(e){var t;null!=this.initialEnd||(this.initialEnd=e),null==(t=this.onChange)||t.call(this,this.getRangeWithValues(this.start,e))}}),Ua(_a(Va(za,Ka)),{optional:!0})],Wa.prototype,"end",2);var{AND:Ga,GREATER_THAN:Ya,LESS_THAN:Ha,RATIO:Xa,ActionOnSet:Qa,Validate:Za}=o.m,qa=class{constructor(e){this.onChange=e}getRatio(){return this.getRatioWithValues(this.start,this.end)}getInitialRatio(){return this.getRatioWithValues(this.initialStart,this.initialEnd)}getRatioWithValues(e,t){if(null!=e||null!=t)return{min:null!==e&&void 0!==e?e:Ma.min,max:null!==t&&void 0!==t?t:Ma.max}}};f([Qa({changeValue(e){var t;null!=this.initialStart||(this.initialStart=e),null==(t=this.onChange)||t.call(this,this.getRatioWithValues(e,this.end))}}),Za(Ga(Xa,Ha("end")),{optional:!0})],qa.prototype,"start",2),f([Qa({changeValue(e){var t;null!=this.initialEnd||(this.initialEnd=e),null==(t=this.onChange)||t.call(this,this.getRatioWithValues(this.start,e))}}),Za(Ga(Xa,Ya("start")),{optional:!0})],qa.prototype,"end",2);var Ja=class{update(e,t,i,o){const a=e.deltaX*t*200;return this.translateZooms(i,o,a)}translateZooms(e,t,i){const a={},s=ka(e,e.x+Math.abs(i),0),n=i<0?-s.x:s.x;for(const[r,{direction:l,zoom:h}]of Object.entries(t)){if(l!==o.m.ChartAxisDirection.X)continue;let e=Ia({x:h});e=Ea(Aa(e,n*Sa(e),0)),a[r]={direction:l,zoom:e.x}}return a}},$a=class{update(e,t,i,o,a,s,n,r){const l=Ia(r),h=e.sourceEvent,d=e.deltaY;let c=Ia(l);return c.x.max+=a?t*d*Sa(l):0,c.y.max+=s?t*d*Na(l):0,"pointer"===i&&a||"pointer"===o&&s?c=this.scaleZoomToPointer(h,a,s,n,l,c):(a&&(c.x=La(c.x,l.x,i)),s&&(c.y=La(c.y,l.y,o))),c=Ea(c),c}scaleZoomToPointer(e,t,i,o,a,s){var n,r;const l=ka(o,null!=(n=e.offsetX)?n:e.clientX,null!=(r=e.offsetY)?r:e.clientY);return s.x=t?Oa(s.x,a.x,l.x):s.x,s.y=i?Oa(s.y,a.y,l.y):s.y,s}},es=class{constructor(e){this.rect=e,this.rect.visible=!1}update(e,t,i,o,a,s,n){this.rect.visible=!0,this.updateCoords(e.offsetX,e.offsetY,t,i,o,a,s,n),this.updateRect(s)}stop(e,t,i){let o=Ia();if(!e||!t)return o;this.coords&&(o=this.createZoomFromCoords(t,i));return o=Ea(function(e,t,i){return{x:{min:e.x.min*t,max:e.x.max*t},y:{min:e.y.min*i,max:e.y.max*i}}}(o,t.width/e.width,t.height/e.height)),this.reset(),o}reset(){this.coords=void 0,this.rect.visible=!1}didUpdate(){return this.rect.visible}updateCoords(e,t,i,o,a,s,n,r){if(!this.coords)return void(this.coords={x1:e,y1:t,x2:e,y2:t});if(this.coords.x2=e,this.coords.y2=t,!n)return;const l=Ia(r),h=this.getNormalisedDimensions(),d=n.width/n.height,c=i/(l.x.max-l.x.min),u=o/(l.y.max-l.y.min);h.width/n.width<c&&(this.coords.x2<this.coords.x1?this.coords.x2=this.coords.x1-n.width*c:this.coords.x2=this.coords.x1+n.width*c),s&&!a?h.height/n.height<u&&(this.coords.y2<this.coords.y1?this.coords.y2=this.coords.y1-n.width*c:this.coords.y2=this.coords.y1+n.height*u):this.coords.y2<this.coords.y1?this.coords.y2=Math.min(this.coords.y1-h.width/d,this.coords.y1-n.height*u):this.coords.y2=Math.max(this.coords.y1+h.width/d,this.coords.y1+n.height*u),a||(this.coords.x1=n.x,this.coords.x2=n.x+n.width),s||(this.coords.y1=n.y,this.coords.y2=n.y+n.height)}updateRect(e){if(!e)return;const{rect:t}=this,i=this.getNormalisedDimensions(),{width:o,height:a}=i;let{x:s,y:n}=i;s=Math.max(s,e.x),s-=Math.max(0,s+o-(e.x+e.width)),n=Math.max(n,e.y),n-=Math.max(0,n+a-(e.y+e.height)),t.x=s,t.y=n,t.width=o,t.height=a}createZoomFromCoords(e,t){const i=Ia(t),o=this.getNormalisedDimensions(),a=ka(e,o.x,o.y+o.height);let s=function(e,t,i){return{x:{min:e.x.min,max:e.x.min+Sa(e)*t},y:{min:e.y.min,max:e.y.min+Na(e)*i}}}(i,o.width/e.width,o.height/e.height);return s=Aa(s,a.x*(i.x.max-i.x.min),a.y*(i.y.max-i.y.min)),s=Ea(s),s}getNormalisedDimensions(){var e;const{x1:t=0,y1:i=0,x2:o=0,y2:a=0}=null!=(e=this.coords)?e:{};return{x:t<=o?t:o,y:i<=a?i:a,width:t<=o?o-t:t-o,height:i<=a?a-i:i-a}}},{BOOLEAN:ts,NUMBER:is,RATIO:os,UNION:as,ActionOnSet:ss,ChartAxisDirection:ns,ChartUpdateType:rs,Validate:ls,round:hs}=o.m,ds=e=>hs(e,10),cs=as(["pointer","start","middle","end"],"an anchor cord"),us="zoom-action",ps="pan-action",ys="zoom-cursor",gs="zoom-tooltip",ms=class extends o.m.BaseModuleInstance{constructor(e){super(),this.ctx=e,this.enabled=!1,this.enableAxisDragging=!0,this.enableDoubleClickToReset=!0,this.enablePanning=!0,this.enableScrolling=!0,this.enableSelecting=!1,this.panKey="alt",this.axes="x",this.scrollingStep=(Ma.max-Ma.min)/10,this.minVisibleItemsX=2,this.minVisibleItemsY=2,this.anchorPointX="end",this.anchorPointY="middle",this.rangeX=new Wa(this.onRangeChange.bind(this,ns.X)),this.rangeY=new Wa(this.onRangeChange.bind(this,ns.Y)),this.ratioX=new qa(this.onRatioChange.bind(this,ns.X)),this.ratioY=new qa(this.onRatioChange.bind(this,ns.Y)),this.axisDragger=new wa,this.panner=new Pa,this.scroller=new $a,this.scrollPanner=new Ja,this.dragState=0,this.minRatioX=0,this.minRatioY=0,this.enableSecondaryAxis=!1,this.scene=e.scene,this.cursorManager=e.cursorManager,this.highlightManager=e.highlightManager,this.tooltipManager=e.tooltipManager,this.zoomManager=e.zoomManager,this.updateService=e.updateService,this.contextMenuRegistry=e.contextMenuRegistry,this.toolbarManager=e.toolbarManager;const t=new va;this.selector=new es(t);const{Default:i,ZoomDrag:a,Animation:s}=o.m.InteractionState,n=i|s|a,r=i|s,l=e.regionManager.getRegion("series");this.destroyFns.push(this.scene.attachNode(t),l.addListener("dblclick",(e=>this.onDoubleClick(e)),r),l.addListener("drag",(e=>this.onDrag(e)),n),l.addListener("drag-start",(e=>this.onDragStart(e)),n),l.addListener("drag-end",(()=>this.onDragEnd()),n),l.addListener("wheel",(e=>this.onWheel(e)),r),l.addListener("hover",(()=>this.onAxisLeave()),r),l.addListener("leave",(()=>this.onAxisLeave()),r),e.chartEventManager.addListener("axis-hover",(e=>this.onAxisHover(e))),e.gestureDetector.addListener("pinch-move",(e=>this.onPinchMove(e))),e.toolbarManager.addListener("button-pressed",(e=>this.onToolbarButtonPress(e))),e.layoutService.addListener("layout-complete",(e=>this.onLayoutComplete(e))),e.updateService.addListener("update-complete",(e=>this.onUpdateComplete(e))),e.zoomManager.addListener("zoom-change",(()=>this.onZoomChange())))}registerContextMenuActions(){this.contextMenuRegistry.registerDefaultAction({id:us,label:"Zoom to here",action:e=>this.onContextMenuZoomToHere(e)}),this.contextMenuRegistry.registerDefaultAction({id:ps,label:"Pan to here",action:e=>this.onContextMenuPanToHere(e)});const e=Ia(this.zoomManager.getZoom());this.toggleContextMenuActions(e)}addToolbarButtons(){for(const[e]of ga.entries())this.toolbarManager.addButton(e,{label:e})}removeToolbarButtons(){for(const[e]of ga.entries())this.toolbarManager.removeButton(e)}toggleContextMenuActions(e){this.isMinZoom(e)?this.contextMenuRegistry.disableAction(us):this.contextMenuRegistry.enableAction(us),this.isMaxZoom(e)?this.contextMenuRegistry.disableAction(ps):this.contextMenuRegistry.enableAction(ps)}onRangeChange(e,t){if(!t)return;const i=Ia(this.zoomManager.getZoom());i[e]=t,this.updateZoom(Ea(i))}onRatioChange(e,t){if(!t)return;let i=this.ratioX.getRatio(),o=this.ratioY.getRatio();e===ns.X?i=t:o=t;const a=Ea(Ia({x:i,y:o}));this.updateZoom(a)}onDoubleClick(e){var t,i,o,a,s;if(!this.enabled||!this.enableDoubleClickToReset)return;const n=null!=(i=null!=(t=this.rangeX.getInitialRange())?t:this.ratioX.getInitialRatio())?i:Ma,r=null!=(a=null!=(o=this.rangeY.getInitialRange())?o:this.ratioY.getInitialRatio())?a:Ma,{min:l,max:h}=n,{min:d,max:c}=r;if(this.hoveredAxis){const{id:e,direction:t}=this.hoveredAxis,i=t===ns.X?{min:l,max:h}:{min:d,max:c};this.updateAxisZoom(e,t,i)}else null!=(s=this.paddedRect)&&s.containsPoint(e.offsetX,e.offsetY)&&null==this.highlightManager.getActivePicked()&&this.updateZoom({x:{min:l,max:h},y:{min:d,max:c}})}onDragStart(e){if(!this.enabled||!this.paddedRect)return;let t=0;if(this.enableAxisDragging&&this.hoveredAxis)t=1;else if(this.paddedRect.containsPoint(e.offsetX,e.offsetY)){const i=this.isPanningKeyPressed(e.sourceEvent);!this.enablePanning||this.enableSelecting&&!i?!this.isMinZoom(Ia(this.zoomManager.getZoom()))&&!i&&(t=3):(this.cursorManager.updateCursor(ys,"grabbing"),t=2)}0!==(this.dragState=t)&&this.zoomManager.fireZoomPanStartEvent()}onDrag(e){if(!this.enabled||!this.paddedRect||!this.seriesRect)return;this.ctx.interactionManager.pushState(o.m.InteractionState.ZoomDrag);const t=Ia(this.zoomManager.getZoom());switch(this.dragState){case 1:if(!this.hoveredAxis)break;const{id:i,direction:a}=this.hoveredAxis,s=a===o.m.ChartAxisDirection.X?this.anchorPointX:this.anchorPointY,n=this.zoomManager.getAxisZoom(i),r=this.axisDragger.update(e,a,s,this.seriesRect,t,n);this.updateAxisZoom(i,a,r);break;case 2:const l=this.panner.update(e,this.seriesRect,this.zoomManager.getAxisZooms());for(const[e,{direction:t,zoom:o}]of Object.entries(l))this.updateAxisZoom(e,t,o);break;case 3:this.selector.update(e,this.minRatioX,this.minRatioY,this.isScalingX(),this.isScalingY(),this.paddedRect,t);break;case 0:return}this.tooltipManager.updateTooltip(gs),this.updateService.update(rs.PERFORM_LAYOUT,{skipAnimations:!0})}onDragEnd(){if(this.ctx.interactionManager.popState(o.m.InteractionState.ZoomDrag),this.enabled&&0!==this.dragState){switch(this.dragState){case 1:this.axisDragger.stop();break;case 2:this.panner.stop();break;case 3:if(!this.selector.didUpdate())break;const e=Ia(this.zoomManager.getZoom());if(!this.isMinZoom(e)){const t=this.selector.stop(this.seriesRect,this.paddedRect,e);this.updateZoom(t)}}this.dragState=0,this.cursorManager.updateCursor(ys),this.tooltipManager.removeTooltip(gs)}}onWheel(e){if(!this.enabled||!this.enableScrolling||!this.paddedRect||!this.seriesRect)return;const t=this.zoomManager.getZoom(),i=this.paddedRect.containsPoint(e.offsetX,e.offsetY),a=this.enableAxisDragging&&null!=this.hoveredAxis;let s=this.isScalingX(),n=this.isScalingY();a&&(s=this.hoveredAxis.direction===o.m.ChartAxisDirection.X,n=!s);const r=e.sourceEvent,{deltaX:l,deltaY:h}=r,d=null!=l&&null!=h&&Math.abs(l)>Math.abs(h);if(this.enablePanning&&d){e.consume(),e.sourceEvent.preventDefault();const t=this.scrollPanner.update(e,this.scrollingStep,this.seriesRect,this.zoomManager.getAxisZooms());for(const[e,{direction:i,zoom:o}]of Object.entries(t))this.updateAxisZoom(e,i,o);return}if(!i&&!a)return;e.consume(),e.sourceEvent.preventDefault();const c=this.scroller.update(e,this.scrollingStep,this.getAnchorPointX(),this.getAnchorPointY(),s,n,this.seriesRect,t);this.updateZoom(c)}onAxisLeave(){this.enabled&&(this.hoveredAxis=void 0,this.cursorManager.updateCursor(ys))}onAxisHover(e){this.enabled&&(this.hoveredAxis={id:e.axisId,direction:e.direction},this.enableAxisDragging&&this.cursorManager.updateCursor(ys,e.direction===ns.X?"ew-resize":"ns-resize"))}onPinchMove(e){if(!this.enabled||!this.enableScrolling||!this.paddedRect||!this.seriesRect)return;const t=this.zoomManager.getZoom(),i=Ia(t),o=Ia(t),a=-.01*e.deltaDistance,s=ka(this.seriesRect,e.origin.x,e.origin.y);this.isScalingX()&&(o.x.max+=a*Sa(i),o.x=Oa(o.x,i.x,s.x)),this.isScalingY()&&(o.y.max+=a*(i.y.max-i.y.min),o.y=Oa(o.y,i.y,s.y)),this.updateZoom(Ea(o))}onToolbarButtonPress(e){if(!ga.has(e.id))return;const t=ga.get(e.id);"function"==typeof t?this.rangeX.extendWith(t):null==t?this.rangeX.extendAll():this.rangeX.extendToEnd(t)}onLayoutComplete(e){if(!this.enabled)return;const{series:{rect:t,paddedRect:i,shouldFlipXY:a},axes:s}=e;if(this.seriesRect=t,this.paddedRect=i,this.shouldFlipXY=a,!s)return;const[n,r]=o.s.bifurcate((e=>e.direction===ns.X),s),l=this.rangeX.updateAxis(n),h=this.rangeY.updateAxis(r);if(!l&&!h)return;const d={};d.x=this.rangeX.getRange(),d.y=this.rangeY.getRange(),(null!=d.x||null!=d.y)&&this.updateZoom(Ea(Ia(d)))}onUpdateComplete(e){let{minRect:t,minVisibleRect:i}=e;if(!this.enabled||!this.paddedRect||!t||!i)return;const o=Ia(this.zoomManager.getZoom()),a=this.shouldFlipXY?this.minVisibleItemsY:this.minVisibleItemsX,s=this.shouldFlipXY?this.minVisibleItemsX:this.minVisibleItemsY,n=i.width*a/this.paddedRect.width,r=i.height*s/this.paddedRect.height,l=ds(n*Sa(o)),h=ds(r*Na(o));this.isScalingX()&&(this.minRatioX=Math.min(1,l)),this.isScalingY()&&(this.minRatioY=Math.min(1,h)),this.minRatioX||(this.minRatioX=this.minRatioY||0),this.minRatioY||(this.minRatioY=this.minRatioX||0)}onContextMenuZoomToHere(e){let{event:t}=e;if(!this.enabled||!this.paddedRect||!t||!t.target)return;const i=Ia(this.zoomManager.getZoom()),o=ka(this.paddedRect,t.clientX,t.clientY),a=o.x*Sa(i),s=o.y*Na(i),n=Ma.max-Ma.min,r=n/2;let l={x:{min:o.x-r,max:o.x+r},y:{min:o.y-r,max:o.y+r}};l=Ta(l,this.isScalingX()?this.minRatioX:n,this.isScalingY()?this.minRatioY:n),l=Aa(l,i.x.min-o.x+a,i.y.min-o.y+s),this.updateZoom(Ea(l))}onContextMenuPanToHere(e){let{event:t}=e;if(!this.enabled||!this.paddedRect||!t||!t.target)return;const i=Ia(this.zoomManager.getZoom()),o=ka(this.paddedRect,t.clientX,t.clientY),a=Sa(i),s=Na(i),n=o.x*a,r=o.y*s,l=(Ma.max-Ma.min)/2;let h={x:{min:o.x-l,max:o.x+l},y:{min:o.y-l,max:o.y+l}};h=Ta(h,a,s),h=Aa(h,i.x.min-o.x+n,i.y.min-o.y+r),this.updateZoom(Ea(h))}onZoomChange(){this.toggleContextMenuActions(Ia(this.zoomManager.getZoom()))}isPanningKeyPressed(e){switch(this.panKey){case"alt":return e.altKey;case"ctrl":return e.ctrlKey;case"shift":return e.shiftKey;case"meta":return e.metaKey}}isScalingX(){return"xy"===this.axes||(this.shouldFlipXY?"y"===this.axes:"x"===this.axes)}isScalingY(){return"xy"===this.axes||(this.shouldFlipXY?"x"===this.axes:"y"===this.axes)}getAnchorPointX(){return this.shouldFlipXY?this.anchorPointY:this.anchorPointX}getAnchorPointY(){return this.shouldFlipXY?this.anchorPointX:this.anchorPointY}isMinZoom(e){const t=ds(Sa(e))<=this.minRatioX,i=ds(Na(e))<=this.minRatioY;return t||i}isMaxZoom(e){return e.x.min===Ma.min&&e.x.max===Ma.max&&e.y.min===Ma.min&&e.y.max===Ma.max}updateZoom(e){const t=Sa(e),i=Na(e),o=Ia(this.zoomManager.getZoom()),a=t<=Sa(o)&&t<this.minRatioX,s=i<=Na(o)&&i<this.minRatioY;a&&(e.x=Ca(e.x,o.x,this.minRatioX)),s&&(e.y=Ca(e.y,o.y,this.minRatioY)),this.zoomManager.updateZoom("zoom",e)}updateAxisZoom(e,t,i){if(!i)return;if(!this.enableSecondaryAxis){const e=Ia(this.zoomManager.getZoom());return e[t]=i,void this.updateZoom(e)}i.max-i.min<(t===ns.X?this.minRatioX:this.minRatioY)||this.zoomManager.updateAxisZoom("zoom",e,i)}};f([ss({newValue(e){e?(this.registerContextMenuActions(),this.addToolbarButtons()):this.enabled&&this.removeToolbarButtons()}}),ls(ts)],ms.prototype,"enabled",2),f([ls(ts)],ms.prototype,"enableAxisDragging",2),f([ls(ts)],ms.prototype,"enableDoubleClickToReset",2),f([ls(ts)],ms.prototype,"enablePanning",2),f([ls(ts)],ms.prototype,"enableScrolling",2),f([ls(ts)],ms.prototype,"enableSelecting",2),f([ls(as(["alt","ctrl","meta","shift"],"a pan key"))],ms.prototype,"panKey",2),f([ls(as(["x","y","xy"],"an axis"))],ms.prototype,"axes",2),f([ls(os)],ms.prototype,"scrollingStep",2),f([ls(is.restrict({min:1}))],ms.prototype,"minVisibleItemsX",2),f([ls(is.restrict({min:1}))],ms.prototype,"minVisibleItemsY",2),f([ls(cs)],ms.prototype,"anchorPointX",2),f([ls(cs)],ms.prototype,"anchorPointY",2);var xs={type:"root",optionsKey:"zoom",packageType:"enterprise",chartTypes:["cartesian"],instanceConstructor:ms,themeTemplate:{zoom:{anchorPointX:"end",anchorPointY:"middle",axes:"x",enabled:!1,enableAxisDragging:!0,enableDoubleClickToReset:!0,enablePanning:!0,enableScrolling:!0,enableSelecting:!1,minVisibleItemsX:2,minVisibleItemsY:2,panKey:"alt",scrollingStep:.1}}},{BOOLEAN:fs,Layers:vs,POSITION:Ds,Validate:Ms,Default:bs,MIN_SPACING:Ss,POSITIVE_NUMBER:Ns,ProxyProperty:Is,DeprecatedAndRenamedTo:ks}=o.m,{BBox:As,Group:Ts,Rect:Ls,LinearGradientFill:Os,Triangle:Es}=o.i,{createId:Rs,Logger:Cs}=o.s,ws=class{constructor(){this.thickness=16,this.preferredLength=100}};f([Ms(Ns)],ws.prototype,"thickness",2),f([Ms(Ns)],ws.prototype,"preferredLength",2);var Ps=class extends o.m.AxisTick{constructor(){super(...arguments),this.enabled=!1,this.size=0,this.maxSpacing=NaN}};f([Ms(Ss),bs(NaN)],Ps.prototype,"maxSpacing",2);var _s=class extends o.m.CartesianAxis{constructor(e){super(e,new o.d.LinearScale,{respondsToZoom:!1}),this.colorDomain=[],this.nice=!1,this.line.enabled=!1}calculateDomain(){this.setDomain(this.colorDomain)}formatDatum(e){return"number"==typeof e?e.toFixed(2):(Cs.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(e))}createTick(){return new Ps}},zs=class{constructor(e){this.label=e}};f([Is("label.fontStyle")],zs.prototype,"fontStyle",2),f([Is("label.fontWeight")],zs.prototype,"fontWeight",2),f([Is("label.fontSize")],zs.prototype,"fontSize",2),f([Is("label.fontFamily")],zs.prototype,"fontFamily",2),f([Is("label.color")],zs.prototype,"color",2),f([Is("label.format")],zs.prototype,"format",2),f([Is("label.formatter")],zs.prototype,"formatter",2);var Ks=class{constructor(e){this.tick=e}};f([Is("tick.values")],Ks.prototype,"values",2),f([Is("tick.minSpacing")],Ks.prototype,"minSpacing",2),f([Is("tick.maxSpacing")],Ks.prototype,"maxSpacing",2),f([Is("tick.interval")],Ks.prototype,"step",2);var Vs=class{constructor(e){this.axis=e,this.label=new zs(e.label),this.interval=new Ks(e.tick)}};f([Is("axis.seriesAreaPadding")],Vs.prototype,"padding",2);var js=class{constructor(e){this.ctx=e,this.id=Rs(this),this.group=new Ts({name:"legend",layer:!0,zIndex:vs.LEGEND_ZINDEX}),this.gradient=new ws,this.destroyFns=[],this.enabled=!1,this.position="bottom",this.reverseOrder=void 0,this.pagination=void 0,this.spacing=20,this.data=[],this.listeners={},this.latestGradientBox=void 0,this.layoutService=e.layoutService,this.destroyFns.push(this.layoutService.addListener("start-layout",(e=>this.update(e.shrinkRect)))),this.highlightManager=e.highlightManager,this.destroyFns.push(this.highlightManager.addListener("highlight-change",(()=>this.onChartHoverChange()))),this.gradientRect=new Ls,this.gradientFill=new Os,this.gradientFill.mask=this.gradientRect,this.group.append(this.gradientFill),this.arrow=new Es,this.group.append(this.arrow),this.axisGridGroup=new Ts({name:"legend-axis-grid-group"}),this.group.append(this.axisGridGroup),this.axisGroup=new Ts({name:"legend-axis-group"}),this.group.append(this.axisGroup),this.axis=new _s(e),this.axis.attachAxis(this.axisGroup,this.axisGridGroup),this.scale=new Vs(this.axis),this.stop=this.scale,this.destroyFns.push((()=>this.detachLegend()))}getOrientation(){switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}destroy(){this.destroyFns.forEach((e=>e()))}attachLegend(e){e.appendChild(this.group)}detachLegend(){var e;null==(e=this.group.parent)||e.removeChild(this.group)}update(e){const t=this.data[0];if(!this.enabled||!t||!t.enabled)return this.group.visible=!1,{shrinkRect:e.clone()};const{colorRange:i}=this.normalizeColorArrays(t),o=this.updateGradientRect(e,i),a=this.updateAxis(t,o),{newShrinkRect:s,translateX:n,translateY:r}=this.getMeasurements(e,o,a);return this.updateArrow(o),this.group.visible=!0,this.group.translationX=n,this.group.translationY=r,this.latestGradientBox=o,{shrinkRect:s}}normalizeColorArrays(e){let t=e.colorDomain.slice();const i=e.colorRange.slice();if(t.length===i.length)return{colorDomain:t,colorRange:i};t.length>i.length&&i.splice(t.length);const o=i.length;return t=i.map(((e,i)=>{const[a,s]=t;return 0===i?a:i===o-1?s:a+(s-a)*i/(o-1)})),{colorDomain:t,colorRange:i}}updateGradientRect(e,t){const{preferredLength:i,thickness:o}=this.gradient,a=new As(0,0,0,0),s="vertical"===this.getOrientation();if(s){const t=e.height,s=i;a.x=0,a.y=0,a.width=o,a.height=Math.min(t,s)}else{const t=e.width,s=i;a.x=0,a.y=0,a.width=Math.min(t,s),a.height=o}return this.reverseOrder&&(t=t.slice().reverse()),this.gradientFill.stops=t,this.gradientFill.direction=s?"to-bottom":"to-right",this.gradientRect.x=a.x,this.gradientRect.y=a.y,this.gradientRect.width=a.width,this.gradientRect.height=a.height,a}updateAxis(e,t){const{reverseOrder:i,axis:o}=this,a="vertical"===this.getOrientation();o.position=a?"right":"bottom",o.colorDomain=i?e.colorDomain.slice().reverse():e.colorDomain,o.calculateDomain(),o.range=a?[0,t.height]:[0,t.width],o.gridLength=0,o.translation.x=t.x+(a?t.width:0),o.translation.y=t.y+(a?0:t.height);const s=o.calculateLayout().bbox;return o.update(),s}updateArrow(e){var t;const{arrow:i,axis:{label:o,scale:a}}=this,s=this.highlightManager.getActiveHighlight(),n=null==s?void 0:s.colorValue;if(null==s||null==n)return void(i.visible=!1);const r="vertical"===this.getOrientation(),l=null!=(t=o.fontSize)?t:0,h=a.convert(n);let d,c,u;r?(d=e.x-l/2,c=e.y+h,u=Math.PI/2):(d=e.x+h,c=e.y-l/2,u=Math.PI),i.fill=o.color,i.size=l,i.translationX=d,i.translationY=c,i.rotation=u,i.visible=!0}getMeasurements(e,t,i){let o,a;"vertical"===this.getOrientation()?(o=t.width+i.width,a=t.height):(o=t.width,a=t.height+i.height);const{spacing:s}=this,n=e.clone();let r,l;return"left"===this.position?(r=e.x,l=e.y+e.height/2-a/2,n.shrink(o+s,"left")):"right"===this.position?(r=e.x+e.width-o,l=e.y+e.height/2-a/2,n.shrink(o+s,"right")):"top"===this.position?(r=e.x+e.width/2-o/2,l=e.y,n.shrink(a+s,"top")):(r=e.x+e.width/2-o/2,l=e.y+e.height-a,n.shrink(a+s,"bottom")),{translateX:r,translateY:l,gradientBox:t,newShrinkRect:n}}computeBBox(){return this.group.computeBBox()}onChartHoverChange(){this.enabled&&null!=this.latestGradientBox&&this.updateArrow(this.latestGradientBox)}};js.className="GradientLegend",f([Ms(fs)],js.prototype,"enabled",2),f([Ms(Ds)],js.prototype,"position",2),f([Ms(fs,{optional:!0})],js.prototype,"reverseOrder",2),f([Ms(Ns)],js.prototype,"spacing",2),f([ks("scale")],js.prototype,"stop",2);var Fs={type:"legend",optionsKey:"gradientLegend",packageType:"enterprise",chartTypes:["cartesian","polar","hierarchy","topology"],identifier:"gradient",instanceConstructor:js,themeTemplate:{enabled:!1,position:"bottom",spacing:20,scale:{padding:8,label:{color:o.a.DEFAULT_LABEL_COLOUR,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:o.a.DEFAULT_FONT_FAMILY,formatter:void 0},interval:{minSpacing:1}},gradient:{preferredLength:100,thickness:16},reverseOrder:!1}},Bs=class{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],o=e[1],a=e[2],s=e[3];i=this.ff(i,o,a,s,t[0],7,-680876936),s=this.ff(s,i,o,a,t[1],12,-389564586),a=this.ff(a,s,i,o,t[2],17,606105819),o=this.ff(o,a,s,i,t[3],22,-1044525330),i=this.ff(i,o,a,s,t[4],7,-176418897),s=this.ff(s,i,o,a,t[5],12,1200080426),a=this.ff(a,s,i,o,t[6],17,-1473231341),o=this.ff(o,a,s,i,t[7],22,-45705983),i=this.ff(i,o,a,s,t[8],7,1770035416),s=this.ff(s,i,o,a,t[9],12,-1958414417),a=this.ff(a,s,i,o,t[10],17,-42063),o=this.ff(o,a,s,i,t[11],22,-1990404162),i=this.ff(i,o,a,s,t[12],7,1804603682),s=this.ff(s,i,o,a,t[13],12,-40341101),a=this.ff(a,s,i,o,t[14],17,-1502002290),o=this.ff(o,a,s,i,t[15],22,1236535329),i=this.gg(i,o,a,s,t[1],5,-165796510),s=this.gg(s,i,o,a,t[6],9,-1069501632),a=this.gg(a,s,i,o,t[11],14,643717713),o=this.gg(o,a,s,i,t[0],20,-373897302),i=this.gg(i,o,a,s,t[5],5,-701558691),s=this.gg(s,i,o,a,t[10],9,38016083),a=this.gg(a,s,i,o,t[15],14,-660478335),o=this.gg(o,a,s,i,t[4],20,-405537848),i=this.gg(i,o,a,s,t[9],5,568446438),s=this.gg(s,i,o,a,t[14],9,-1019803690),a=this.gg(a,s,i,o,t[3],14,-187363961),o=this.gg(o,a,s,i,t[8],20,1163531501),i=this.gg(i,o,a,s,t[13],5,-1444681467),s=this.gg(s,i,o,a,t[2],9,-51403784),a=this.gg(a,s,i,o,t[7],14,1735328473),o=this.gg(o,a,s,i,t[12],20,-1926607734),i=this.hh(i,o,a,s,t[5],4,-378558),s=this.hh(s,i,o,a,t[8],11,-2022574463),a=this.hh(a,s,i,o,t[11],16,1839030562),o=this.hh(o,a,s,i,t[14],23,-35309556),i=this.hh(i,o,a,s,t[1],4,-1530992060),s=this.hh(s,i,o,a,t[4],11,1272893353),a=this.hh(a,s,i,o,t[7],16,-155497632),o=this.hh(o,a,s,i,t[10],23,-1094730640),i=this.hh(i,o,a,s,t[13],4,681279174),s=this.hh(s,i,o,a,t[0],11,-358537222),a=this.hh(a,s,i,o,t[3],16,-722521979),o=this.hh(o,a,s,i,t[6],23,76029189),i=this.hh(i,o,a,s,t[9],4,-640364487),s=this.hh(s,i,o,a,t[12],11,-421815835),a=this.hh(a,s,i,o,t[15],16,530742520),o=this.hh(o,a,s,i,t[2],23,-995338651),i=this.ii(i,o,a,s,t[0],6,-198630844),s=this.ii(s,i,o,a,t[7],10,1126891415),a=this.ii(a,s,i,o,t[14],15,-1416354905),o=this.ii(o,a,s,i,t[5],21,-57434055),i=this.ii(i,o,a,s,t[12],6,1700485571),s=this.ii(s,i,o,a,t[3],10,-1894986606),a=this.ii(a,s,i,o,t[10],15,-1051523),o=this.ii(o,a,s,i,t[1],21,-2054922799),i=this.ii(i,o,a,s,t[8],6,1873313359),s=this.ii(s,i,o,a,t[15],10,-30611744),a=this.ii(a,s,i,o,t[6],15,-1560198380),o=this.ii(o,a,s,i,t[13],21,1309151649),i=this.ii(i,o,a,s,t[4],6,-145523070),s=this.ii(s,i,o,a,t[11],10,-1120210379),a=this.ii(a,s,i,o,t[2],15,718787259),o=this.ii(o,a,s,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(o,e[1]),e[2]=this.add32(a,e[2]),e[3]=this.add32(s,e[3])}cmn(e,t,i,o,a,s){return t=this.add32(this.add32(t,e),this.add32(o,s)),this.add32(t<<a|t>>>32-a,i)}ff(e,t,i,o,a,s,n){return this.cmn(t&i|~t&o,e,t,a,s,n)}gg(e,t,i,o,a,s,n){return this.cmn(t&o|i&~o,e,t,a,s,n)}hh(e,t,i,o,a,s,n){return this.cmn(t^i^o,e,t,a,s,n)}ii(e,t,i,o,a,s,n){return this.cmn(i^(t|~o),e,t,a,s,n)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let o;for(o=64;o<=e.length;o+=64)this.md5cycle(i,this.md5blk(e.substring(o-64,o)));e=e.substring(o-64);const a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<e.length;o++)a[o>>2]|=e.charCodeAt(o)<<(o%4<<3);if(a[o>>2]|=128<<(o%4<<3),o>55)for(this.md5cycle(i,a),o=0;o<16;o++)a[o]=0;return a[14]=8*t,this.md5cycle(i,a),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",o=0;for(;o<4;o++)i+=t[e>>8*o+4&15]+t[e>>8*o&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}};function Us(e){return null==e||0===e.length}var Ws={"01":"GRID","02":"CHARTS","0102":"BOTH"},Gs=class e{constructor(e){this.gridContext=!1,this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=e,this.md5=new Bs,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(this.licenseKey,this.gridContext),i="AG ".concat("BOTH"===t.currentLicenseType?"Grid and ":"","Charts Enterprise"),o=void 0===t.suppliedLicenseType?"":"AG ".concat("BOTH"===t.suppliedLicenseType?"Grid and AG Charts":"GRID"===t.suppliedLicenseType?"Grid":"Charts"," Enterprise");if(t.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(t.expired){const i=e.getChartsReleaseDate(),a=e.formatDate(i);this.outputExpiredKey(t.expiry,a,o)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,o):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,o)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(e.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const o=i.length-32,a=i.substring(o),s=i.substring(0,o),[n,r,l]=e.extractBracketedInformation(i);return{md5:a,license:s,version:n,isTrial:r,type:l}}getLicenseDetails(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o="CHARTS";if(Us(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:o};const a=e.getChartsReleaseDate(),{md5:s,license:n,version:r,isTrial:l,type:h}=e.extractLicenseComponents(t);let d,c,u,p=s===this.md5.md5(n)&&-1===t.indexOf("For_Trialing_ag-Grid_Only"),y=null,g=!1;if(p&&(y=e.extractExpiry(n),p=!isNaN(y.getTime()),p))switch(c=a>y,r){case"legacy":case"2":p=!1;break;case"3":Us(h)?p=!1:(u=h,h!==Ws["02"]&&h!==Ws["0102"]?(p=!1,g=!0):l&&(d=y<new Date,c=void 0))}return p?{licenseKey:t,valid:p,expiry:e.formatDate(y),expired:c,version:r,isTrial:l,trialExpired:d,invalidLicenseTypeForCombo:i?"BOTH"!==u:void 0,incorrectLicenseType:g,currentLicenseType:o,suppliedLicenseType:u}:{licenseKey:t,valid:p,incorrectLicenseType:g,currentLicenseType:o,suppliedLicenseType:u}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!Us(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){if(!this.document)return"localhost";const e=this.document.defaultView||window;if(!e)return"localhost";const t=e.location,{hostname:i=""}=t;return i}isForceWatermark(){var e,t;if(!this.document)return!1;const i=(null!=(t=null==(e=this.document)?void 0:e.defaultView)?t:typeof window<"u")?window:void 0;if(!i)return!1;const{pathname:o}=i.location;return!!o&&-1!==o.indexOf("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:[\w-]+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(e){const t=e.getDate(),i=e.getMonth(),o=e.getFullYear();return t+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+o}static getChartsReleaseDate(){return new Date(parseInt(e.decode(e.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let o,a,s,n,r,l,h,d="",c=0;const u=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;c<u.length;)n=i.indexOf(u.charAt(c++)),r=i.indexOf(u.charAt(c++)),l=i.indexOf(u.charAt(c++)),h=i.indexOf(u.charAt(c++)),o=n<<2|r>>4,a=(15&r)<<4|l>>2,s=(3&l)<<6|h,d+=String.fromCharCode(o),64!=l&&(d+=String.fromCharCode(a)),64!=h&&(d+=String.fromCharCode(s));return d=e.utf8_decode(d),d}static utf8_decode(e){e=e.replace(/rn/g,"n");let t="";for(let i=0;i<e.length;i++){const o=e.charCodeAt(i);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t}setLicenseKey(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.gridContext=t,this.licenseKey=e}static extractBracketedInformation(e){if(!e.includes("["))return["legacy",!1,void 0];const t=e.match(/\[(.*?)\]/g).map((e=>e.replace("[","").replace("]","")));if(!t||0===t.length)return["legacy",!1,void 0];const i=1===t.filter((e=>"TRIAL"===e)).length,o=t.filter((e=>0===e.indexOf("v")))[0];return[o?o.replace("v",""):"legacy",i,Ws[t.filter((e=>Ws[e]))[0]]]}centerPadAndOutput(e){const t=this.totalMessageLength-e.length;console.error(e.padStart(t/2+e.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";console.error(e.padEnd(this.totalMessageLength-i.length,t)+i)}outputInvalidLicenseKey(e,t,i){this.gridContext||(e?(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput("* Your license key is for ".concat(i," only and does not cover you for ").concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""))),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(e,t,i){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(t," License ")),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput("* Your trial only license for ".concat(i," expired on ").concat(e,".")," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(e){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(e," License ")),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput("* All ".concat(e," features are unlocked for trial.")," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(e,t,i){this.gridContext||(this.centerPadAndOutput(""),this.centerPadAndOutput(" ".concat(i," License ")),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput("* Your license key works with versions of ".concat(i," released before ").concat(e,".")," ","*"),this.padAndOutput("* The version you are trying to use was released on ".concat(t,".")," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="License Expired"}};Gs.RELEASE_INFORMATION="MTcxMDc0ODYyMTYzMg==";var Ys=Gs,{createElement:Hs,injectStyle:Xs}=o.m,Qs="\n.ag-watermark {\n    position: absolute;\n    bottom: 20px;\n    right: 25px;\n    font-weight: bold;\n    font-family: Impact, sans-serif;\n    font-size: 19px;\n    opacity: 0.7;\n    animation: 1s ease-out 3s ag-watermark-fadeout;\n    color: #9B9B9B;\n    pointer-events: none;\n\n    &::before {\n        content: '';\n        display: block;\n        height: 40px;\n        width: 170px;\n        background-image: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=);\n        background-repeat: no-repeat;\n        background-size: 170px 40px;\n    }\n\n    > span {\n        padding-left: 0.7rem;\n    }\n}\n\n@keyframes ag-watermark-fadeout {\n    from { opacity: 0.5; }\n    to { opacity: 0; }\n}\n";function Zs(e,t){Xs(Qs,"watermark");const i=Hs("div"),o=Hs("span");o.innerText=t,i.addEventListener("animationend",(()=>e.removeChild(i))),i.classList.add("ag-watermark"),i.appendChild(o),e.appendChild(i)}var{Group:qs,Rect:Js,Line:$s,BBox:en,Selection:tn}=o.i,on=class extends qs{constructor(){super(),this.append([new Js({tag:0}),new Js({tag:0}),new Js({tag:2}),new Js({tag:1}),new $s({tag:3}),new $s({tag:3}),new $s({tag:4}),new $s({tag:4})])}updateDatumStyles(e,t,i,a,s){const{bandwidth:n,scaledValues:{xValue:r,medianValue:l}}=e;let{minValue:h,q1Value:d,q3Value:c,maxValue:u}=e.scaledValues;(i&&!a||!i&&a)&&([u,c,d,h]=[h,d,c,u]);const{fill:p,fillOpacity:y,stroke:g,strokeWidth:m,strokeOpacity:x,lineDash:f,lineDashOffset:v,cap:D,whisker:M}=t,b=tn.select(this,Js),S=b.selectByTag(0),[N]=b.selectByTag(2),[I]=b.selectByTag(1),k=b.selectByTag(3),A=b.selectByTag(4);M.strokeWidth>n&&(M.strokeWidth=n),N.setProperties({x:d,y:r,width:c-d,height:n});const T=i?new en(r,d,n,c-d):new en(d,r,c-d,n);S[0].setProperties({x:d,y:r,width:Math.round(l-d+m/2),height:n,cornerRadius:s,cornerRadiusBbox:T}),S[1].setProperties({x:Math.round(l-m/2),y:r,width:Math.floor(c-l+m/2),height:n,cornerRadius:s,cornerRadiusBbox:T});const L=Math.max(Math.round(l-m/2),d+m),O=Math.min(Math.round(l+m/2),c-m);I.setProperties({visible:L<O,x:L,y:r+m,width:O-L,height:Math.max(0,n-2*m),cornerRadius:s,cornerRadiusBbox:T});const E=Math.floor(r+n*(1-D.lengthRatio)/2),R=Math.ceil(r+n*(1+D.lengthRatio)/2);A[0].setProperties({x:h,y1:E,y2:R}),A[1].setProperties({x:u,y1:E,y2:R}),k[0].setProperties({x1:Math.round(h+M.strokeWidth/2),x2:d,y:Math.floor(r+n/2)}),k[1].setProperties({x1:c,x2:Math.round(u-M.strokeWidth/2),y:Math.floor(r+n/2)}),i&&o.m.invertShapeDirection(N,I,...S,...A,...k);for(const o of S)o.setProperties({fill:p,fillOpacity:y,strokeWidth:2*m,strokeOpacity:0});I.setProperties({fill:g,fillOpacity:x,strokeWidth:0});for(const o of[...k,...A])o.setProperties(M);N.setProperties({stroke:g,strokeWidth:m,strokeOpacity:x,lineDash:f,lineDashOffset:v,cornerRadius:s,fillOpacity:0})}},{BaseProperties:an,AbstractBarSeriesProperties:sn,SeriesTooltip:nn,Validate:rn,COLOR_STRING:ln,FUNCTION:hn,LINE_DASH:dn,OBJECT:cn,POSITIVE_NUMBER:un,RATIO:pn,STRING:yn,mergeDefaults:gn}=o.m,mn=class extends an{constructor(){super(...arguments),this.lengthRatio=.5}};f([rn(pn)],mn.prototype,"lengthRatio",2);var xn=class extends an{};f([rn(ln,{optional:!0})],xn.prototype,"stroke",2),f([rn(un)],xn.prototype,"strokeWidth",2),f([rn(pn)],xn.prototype,"strokeOpacity",2),f([rn(dn,{optional:!0})],xn.prototype,"lineDash",2),f([rn(un)],xn.prototype,"lineDashOffset",2);var fn=class extends sn{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.cap=new mn,this.whisker=new xn,this.tooltip=new nn}toJson(){const{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:o,lineDashOffset:a}=this,s=super.toJson();return s.whisker=gn(s.whisker,{stroke:e,strokeWidth:t,strokeOpacity:i,lineDash:o,lineDashOffset:a}),s}};f([rn(yn)],fn.prototype,"xKey",2),f([rn(yn)],fn.prototype,"minKey",2),f([rn(yn)],fn.prototype,"q1Key",2),f([rn(yn)],fn.prototype,"medianKey",2),f([rn(yn)],fn.prototype,"q3Key",2),f([rn(yn)],fn.prototype,"maxKey",2),f([rn(yn,{optional:!0})],fn.prototype,"xName",2),f([rn(yn,{optional:!0})],fn.prototype,"yName",2),f([rn(yn,{optional:!0})],fn.prototype,"minName",2),f([rn(yn,{optional:!0})],fn.prototype,"q1Name",2),f([rn(yn,{optional:!0})],fn.prototype,"medianName",2),f([rn(yn,{optional:!0})],fn.prototype,"q3Name",2),f([rn(yn,{optional:!0})],fn.prototype,"maxName",2),f([rn(ln,{optional:!0})],fn.prototype,"fill",2),f([rn(pn)],fn.prototype,"fillOpacity",2),f([rn(ln)],fn.prototype,"stroke",2),f([rn(un)],fn.prototype,"strokeWidth",2),f([rn(pn)],fn.prototype,"strokeOpacity",2),f([rn(dn)],fn.prototype,"lineDash",2),f([rn(un)],fn.prototype,"lineDashOffset",2),f([rn(un)],fn.prototype,"cornerRadius",2),f([rn(hn,{optional:!0})],fn.prototype,"formatter",2),f([rn(cn)],fn.prototype,"cap",2),f([rn(cn)],fn.prototype,"whisker",2),f([rn(cn)],fn.prototype,"tooltip",2);var{extent:vn,extractDecoratedProperties:Dn,fixNumericExtent:Mn,keyProperty:bn,mergeDefaults:Sn,SeriesNodePickMode:Nn,SMALLEST_KEY_INTERVAL:In,valueProperty:kn,diff:An,animationValidation:Tn,ChartAxisDirection:Ln,convertValuesToScaleByDefs:On}=o.m,{motion:En}=o.i,Rn=class extends o.m.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.minKey=o.properties.minKey,this.q1Key=o.properties.q1Key,this.medianKey=o.properties.medianKey,this.q3Key=o.properties.q3Key,this.maxKey=o.properties.maxKey}},Cn=class e extends o.m.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Nn.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["medianKey","q1Key","q3Key","minKey","maxKey"]},directionNames:{x:["xName"],y:["medianName","q1Name","q3Name","minName","maxName"]},pathsPerSeries:1,hasHighlightedLabels:!0}),this.properties=new fn,this.NodeEvent=Rn}processData(e){return D(this,null,(function*(){var t,i,a,s;if(!this.properties.isValid())return;const{xKey:n,minKey:r,q1Key:l,medianKey:h,q3Key:d,maxKey:c}=this.properties,u=!this.ctx.animationManager.isSkipped(),p=(null==(t=this.getCategoryAxis())?void 0:t.scale)instanceof o.d.ContinuousScale,y=[];u&&this.processedData&&y.push(An(this.processedData)),u&&y.push(Tn(this));const{processedData:g}=yield this.requestDataModel(e,null!=(i=this.data)?i:[],{props:[bn(this,n,p,{id:"xValue"}),kn(this,r,!0,{id:"minValue"}),kn(this,l,!0,{id:"q1Value"}),kn(this,h,!0,{id:"medianValue"}),kn(this,d,!0,{id:"q3Value"}),kn(this,c,!0,{id:"maxValue"}),...p?[In]:[],...y],dataVisible:this.visible});this.smallestDataInterval={x:null!=(s=null==(a=g.reduced)?void 0:a.smallestKeyInterval)?s:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(e){var t;const{processedData:i,dataModel:o,smallestDataInterval:a}=this;if(!i||!o)return[];if(e===this.getBarDirection()){const e=o.getDomain(this,"minValue","value",i),t=o.getDomain(this,"maxValue","value",i);return Mn([Math.min(...e),Math.max(...t)],this.getValueAxis())}const{index:s,def:n}=o.resolveProcessedDataIndexById(this,"xValue"),r=i.domain.keys[s];if("key"===n.type&&"category"===n.valueType)return r;const l=this.getCategoryAxis(),h=null==l?void 0:l.isReversed(),d=null!=(t=vn(r))?t:[NaN,NaN],c=a&&isFinite(a.x)?a.x:0;if(e===Ln.Y){const e=d[0]+(h?0:-c),t=d[1]+(h?c:0);return Mn([e,t],l)}const u=d[0]+(h?-c:0),p=d[1]+(h?0:c);return Mn([u,p],l)}createNodeData(){return D(this,null,(function*(){const{visible:t,dataModel:i}=this,o=this.getCategoryAxis(),a=this.getValueAxis();if(!(i&&t&&o&&a))return[];const{xKey:s,fill:n,fillOpacity:r,stroke:l,strokeWidth:h,strokeOpacity:d,lineDash:c,lineDashOffset:u,cap:p,whisker:y}=this.properties,g=[],m=i.resolveProcessedDataDefsByIds(this,["xValue","minValue","q1Value","medianValue","q3Value","maxValue"]),{barWidth:x,groupIndex:f}=this.updateGroupScale(o),{groupScale:D,processedData:M}=this,b=this.isVertical();return null==M||M.data.forEach((e=>{let{datum:t,keys:v,values:M}=e;const{xValue:S,minValue:N,q1Value:I,medianValue:k,q3Value:A,maxValue:T}=i.resolveProcessedDataDefsValues(m,{keys:v,values:M});if([N,I,k,A,T].some((e=>"number"!=typeof e))||N>I||I>k||k>A||A>T)return;const L=On({defs:m,values:{xValue:S,minValue:N,q1Value:I,medianValue:k,q3Value:A,maxValue:T},xAxis:o,yAxis:a});L.xValue+=Math.round(D.convert(String(f)));const O=Math.round(x),E=Math.abs(L.q3Value-L.q1Value),R=L.xValue+O/2,C=Math.min(L.q3Value,L.q1Value)+E/2,w={x:b?R:C,y:b?C:R};g.push({series:this,itemId:S,datum:t,xKey:s,bandwidth:O,scaledValues:L,cap:p,whisker:y,fill:n,fillOpacity:r,stroke:l,strokeWidth:h,strokeOpacity:d,lineDash:c,lineDashOffset:u,midPoint:w})})),[{itemId:s,nodeData:g,labelData:[],scales:v(e.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}getLegendData(e){var t;const{id:i,data:o}=this,{xKey:a,yName:s,fill:n,fillOpacity:r,stroke:l,strokeWidth:h,strokeOpacity:d,showInLegend:c,legendItemName:u,visible:p}=this.properties;return c&&null!=o&&o.length&&a&&"category"===e?[{legendType:"category",id:i,itemId:i,seriesId:i,enabled:p,label:{text:null!=(t=null!==u&&void 0!==u?u:s)?t:i},marker:{fill:n,fillOpacity:r,stroke:l,strokeOpacity:d,strokeWidth:h},legendItemName:u}]:[]}getTooltipHtml(e){const{xKey:t,minKey:i,q1Key:a,medianKey:s,q3Key:n,maxKey:r,xName:l,yName:h,minName:d,q1Name:c,medianName:u,q3Name:p,maxName:y,tooltip:g}=this.properties,{datum:m}=e,x=this.getCategoryAxis(),f=this.getValueAxis();if(!x||!f||!this.properties.isValid())return"";const v=o.s.sanitizeHtml(h),D=[[t,l,x],[i,d,f],[a,c,f],[s,u,f],[n,p,f],[r,y,f]].map((e=>{let[t,i,a]=e;return o.s.sanitizeHtml("".concat(null!==i&&void 0!==i?i:t,": ").concat(a.formatDatum(m[t])))})).join(v?"<br/>":", "),{fill:M}=this.getFormattedStyles(e);return g.toTooltipHtml({title:v,content:D,backgroundColor:M},{seriesId:this.id,datum:m,fill:M,xKey:t,minKey:i,q1Key:a,medianKey:s,q3Key:n,maxKey:r,xName:l,minName:d,q1Name:c,medianName:u,q3Name:p,maxName:y})}animateEmptyUpdateReady(e){let{datumSelections:t}=e;const i=this.isVertical(),{from:o,to:a}={from:i?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}};En.resetMotion(t,function(e){return(t,i)=>e?{scalingCenterY:i.scaledValues.medianValue}:{scalingCenterX:i.scaledValues.medianValue}}(i)),En.staticFromToMotion(this.id,"datums",this.ctx.animationManager,t,o,a,{phase:"initial"})}isLabelEnabled(){return!1}updateDatumSelection(e){return D(this,null,(function*(){var t;const i=null!=(t=e.nodeData)?t:[];return e.datumSelection.update(i)}))}updateDatumNodes(e){return D(this,arguments,(function(e){var t=this;let{datumSelection:i,isHighlight:o}=e;return function*(){var e;const a=t.isVertical(),s=null==(e=t.getValueAxis())?void 0:e.isReversed(),{cornerRadius:n}=t.properties;i.each(((e,i)=>{let r=t.getFormattedStyles(i,o);o&&(r=Sn(t.properties.highlightStyle.item,r));const{stroke:l,strokeWidth:h,strokeOpacity:d,lineDash:c,lineDashOffset:u}=r;r.whisker=Sn(r.whisker,{stroke:l,strokeWidth:h,strokeOpacity:d,lineDash:c,lineDashOffset:u}),e.updateDatumStyles(i,r,a,s,n)}))}()}))}updateLabelNodes(e){return D(this,null,(function*(){}))}updateLabelSelection(e){return D(this,null,(function*(){const{labelData:t,labelSelection:i}=e;return i.update(t)}))}nodeFactory(){return new on}getFormattedStyles(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{id:i,ctx:{callbackCache:o}}=this,{xKey:a,minKey:s,q1Key:n,medianKey:r,q3Key:l,maxKey:h,formatter:d}=this.properties,{datum:c,fill:u,fillOpacity:p,stroke:y,strokeWidth:x,strokeOpacity:f,lineDash:v,lineDashOffset:D,cap:M,whisker:b}=e,S={fill:u,fillOpacity:p,stroke:y,strokeWidth:x,strokeOpacity:f,lineDash:v,lineDashOffset:D,cap:Dn(M),whisker:Dn(b)};if(d){const e=o.call(d,m(g({datum:c,seriesId:i,highlighted:t},S),{xKey:a,minKey:s,q1Key:n,medianKey:r,q3Key:l,maxKey:h}));if(e)return Sn(e,S)}return S}};Cn.className="BoxPlotSeries",Cn.type="box-plot";var wn=Cn,Pn={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:2},axes:{[o.a.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[o.a.CARTESIAN_AXIS_TYPE.CATEGORY]:{groupPaddingInner:.2,crosshair:{enabled:!1,snap:!1}}}},_n={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"box-plot",instanceConstructor:wn,defaultAxes:[{type:o.a.CARTESIAN_AXIS_TYPE.NUMBER,position:o.a.POSITION.LEFT},{type:o.a.CARTESIAN_AXIS_TYPE.CATEGORY,position:o.a.POSITION.BOTTOM}],themeTemplate:Pn,groupable:!0,paletteFactory:e=>{let{takeColors:t,userPalette:i,themeTemplateParameters:a}=e;var s;const n=a.properties.get(o.a.DEFAULT_BACKGROUND_COLOUR),r=null!=(s=Array.isArray(n)?n[0]:n)?s:"white",{fills:[l],strokes:[h]}=t(1);return{fill:i?l:o.s.Color.interpolate(l,r)(.7),stroke:h}},swapDefaultAxesCondition:e=>{let{direction:t}=e;return"horizontal"===t}},{AbstractBarSeriesProperties:zn,BaseProperties:Kn,PropertiesArray:Vn,SeriesTooltip:jn,Validate:Fn,ARRAY:Bn,COLOR_STRING:Un,LINE_DASH:Wn,OBJECT:Gn,POSITIVE_NUMBER:Yn,RATIO:Hn,STRING:Xn}=o.m,Qn=class extends Kn{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.lengthRatio=.75}};f([Fn(Un)],Qn.prototype,"fill",2),f([Fn(Hn)],Qn.prototype,"fillOpacity",2),f([Fn(Un)],Qn.prototype,"stroke",2),f([Fn(Yn)],Qn.prototype,"strokeWidth",2),f([Fn(Hn)],Qn.prototype,"strokeOpacity",2),f([Fn(Wn)],Qn.prototype,"lineDash",2),f([Fn(Yn)],Qn.prototype,"lineDashOffset",2),f([Fn(Hn)],Qn.prototype,"lengthRatio",2);var Zn=class extends Kn{};f([Fn(Yn,{optional:!0})],Zn.prototype,"max",2);var qn=class extends Kn{constructor(){super(...arguments),this.color="lightgrey"}};f([Fn(Un)],qn.prototype,"color",2),f([Fn(Yn,{optional:!0})],qn.prototype,"stop",2);var Jn=class extends zn{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.widthRatio=.5,this.colorRanges=new Vn(qn),this.target=new Qn,this.scale=new Zn,this.tooltip=new jn,this.backgroundFill="white"}};f([Fn(Xn)],Jn.prototype,"valueKey",2),f([Fn(Xn,{optional:!0})],Jn.prototype,"valueName",2),f([Fn(Xn,{optional:!0})],Jn.prototype,"targetKey",2),f([Fn(Xn,{optional:!0})],Jn.prototype,"targetName",2),f([Fn(Un)],Jn.prototype,"fill",2),f([Fn(Hn)],Jn.prototype,"fillOpacity",2),f([Fn(Un)],Jn.prototype,"stroke",2),f([Fn(Yn)],Jn.prototype,"strokeWidth",2),f([Fn(Hn)],Jn.prototype,"strokeOpacity",2),f([Fn(Wn)],Jn.prototype,"lineDash",2),f([Fn(Yn)],Jn.prototype,"lineDashOffset",2),f([Fn(Hn)],Jn.prototype,"widthRatio",2),f([Fn(Bn.restrict({minLength:0}))],Jn.prototype,"colorRanges",2),f([Fn(Gn)],Jn.prototype,"target",2),f([Fn(Gn)],Jn.prototype,"scale",2),f([Fn(Gn)],Jn.prototype,"tooltip",2),f([Fn(Un)],Jn.prototype,"backgroundFill",2);var{animationValidation:$n,collapsedStartingBarPosition:er,diff:tr,keyProperty:ir,partialAssign:or,prepareBarAnimationFunctions:ar,resetBarSelectionsFn:sr,seriesLabelFadeInAnimation:nr,valueProperty:rr,createDatumId:lr}=o.m,{fromToMotion:hr}=o.i.motion,{ContinuousScale:dr,OrdinalTimeScale:cr}=o.d,{sanitizeHtml:ur}=o.s,pr=["fill","fillOpacity","stroke","strokeWidth","strokeOpacity","lineDash","lineDashOffset"],yr=class e extends o.m.AbstractBarSeries{constructor(e){super({moduleCtx:e,directionKeys:{y:["targetKey","valueKey"]},directionNames:{y:["targetName","valueName"]},pickModes:[o.m.SeriesNodePickMode.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,animationResetFns:{datum:sr}}),this.properties=new Jn,this.normalizedColorRanges=[],this.colorRangesGroup=new o.i.Group({name:"".concat(this.id,"-colorRanges")}),this.colorRangesSelection=o.i.Selection.select(this.colorRangesGroup,o.i.Rect,!1),this.rootGroup.append(this.colorRangesGroup),this.targetLinesSelection=o.i.Selection.select(this.annotationGroup,o.i.Line,!1)}destroy(){this.rootGroup.removeChild(this.colorRangesGroup),super.destroy()}processData(e){return D(this,null,(function*(){var t,i;if(!this.properties.isValid()||!this.data)return;const{valueKey:o,targetKey:a}=this.properties,s=null==(t=this.getCategoryAxis())?void 0:t.scale,n=null==(i=this.getValueAxis())?void 0:i.scale,r=dr.is(s)||cr.is(s),l=dr.is(n)||cr.is(n),h=dr.is(s)?"range":"category",d=[];void 0!==a&&d.push(rr(this,a,l,{id:"target"})),this.ctx.animationManager.isSkipped()||(void 0!==this.processedData&&d.push(tr(this.processedData)),d.push($n(this))),yield this.requestDataModel(e,this.data.slice(0,1),{props:[ir(this,o,r,{id:"xValue",valueType:h}),rr(this,o,l,{id:"value"}),...d],groupByKeys:!0,dataVisible:this.visible}),this.animationState.transition("updateData")}))}getBandScalePadding(){return{inner:0,outer:0}}getMaxValue(){var e,t;return Math.max(...null!=(t=null==(e=this.getValueAxis())?void 0:e.dataDomain.domain)?t:[0])}getSeriesDomain(e){var t,i;const{dataModel:o,processedData:a}=this;if(!o||!a)return[];const{valueKey:s,targetKey:n,valueName:r,scale:l}=this.properties;if(e===this.getCategoryDirection())return[null!==r&&void 0!==r?r:s];if(e==(null==(t=this.getValueAxis())?void 0:t.direction)){const e=o.getDomain(this,"value","value",a),t=void 0===n?[]:o.getDomain(this,"target","value",a);return[0,null!=(i=l.max)?i:Math.max(...e,...t)]}throw new Error("unknown direction ".concat(e))}getKeys(e){return e===this.getBarDirection()?[this.properties.valueKey]:super.getKeys(e)}createNodeData(){return D(this,null,(function*(){var t,i,a,s;const{dataModel:n,processedData:r}=this,{valueKey:l,targetKey:h,widthRatio:d,target:{lengthRatio:c}}=this.properties,u=null==(t=this.getCategoryAxis())?void 0:t.scale,p=null==(i=this.getValueAxis())?void 0:i.scale;if(!l||!n||!r||!u||!p)return[];if(void 0===d||void 0===c)return[];const y=null!=(a=u.bandwidth)?a:NaN,x=this.getMaxValue(),f=n.resolveProcessedDataIndexById(this,"value").index,D=void 0===h?NaN:n.resolveProcessedDataIndexById(this,"target").index,M={itemId:l,nodeData:[],labelData:[],scales:v(e.prototype,this,"calculateScaling").call(this),visible:this.visible};for(const{datum:e,values:v}of r.data){if(!Array.isArray(e)||e.length<1)continue;v[0][f]<0&&o.s.Logger.warnOnce("negative values are not supported, clipping to 0.");const t=null!=(s=this.properties.valueName)?s:this.properties.valueKey,i=Math.min(x,Math.max(0,v[0][f])),a=p.convert(i),n=d*y,r=p.convert(0),h=this.getBarDirection()===o.m.ChartAxisDirection.X,u={x:y*(1-d)/2,y:Math.min(a,r),width:n,height:Math.abs(r-a)};let b;if(h&&([u.x,u.y,u.width,u.height]=[u.y,u.x,u.height,u.width]),v[0][D]<0&&o.s.Logger.warnOnce("negative targets are not supported, ignoring."),this.properties.targetKey&&v[0][D]>=0){const e=c*y,t=Math.min(x,v[0][D]);if(!isNaN(t)&&void 0!==t){const i=p.convert(t);let o=y*(1-c)/2,a=o+e,[s,n]=[i,i];h&&([o,a,s,n]=[s,n,o,a]),b={value:t,x1:o,x2:a,y1:s,y2:n}}}const S=m(g({series:this,datum:e[0],xKey:l,xValue:t,yKey:l,yValue:i,cumulativeValue:i,target:b},u),{midPoint:{x:u.x+u.width/2,y:u.y+u.height/2},opacity:1});M.nodeData.push(S)}const b=[...this.getColorRanges()].sort(((e,t)=>{var i,o;return(null!=(i=e.stop)?i:x)-(null!=(o=t.stop)?o:x)}));let S=0;return this.normalizedColorRanges=b.map((e=>{var t;const i=Math.min(x,null!=(t=e.stop)?t:1/0),o={color:e.color,start:S,stop:i};return S=i,o})),[M]}))}getColorRanges(){const{colorRanges:e,fill:t,backgroundFill:i}=this.properties;if(void 0!==e&&e.length>0)return e;const a=new qn;return a.color=o.s.Color.interpolate(t,i)(.7),[a]}getLegendData(e){return[]}getTooltipHtml(e){const{valueKey:t,valueName:i,targetKey:o,targetName:a}=this.properties,s=this.getValueAxis(),{yValue:n,target:{value:r}={value:void 0},datum:l}=e;if(void 0===t||void 0===n||void 0===s)return"";const h=(e,t,i)=>{const o=ur(null!==t&&void 0!==t?t:e),a=ur(s.formatDatum(i));return"<b>".concat(o,"</b>: ").concat(a)},d=void 0,c=void 0===o||void 0===r?h(t,i,n):"".concat(h(t,i,n),"<br/>").concat(h(o,a,r));return this.properties.tooltip.toTooltipHtml({title:d,content:c,backgroundColor:this.properties.fill},{datum:l,title:d,seriesId:this.id,valueKey:t,valueName:i,targetKey:o,targetName:a})}isLabelEnabled(){return!1}nodeFactory(){return new o.i.Rect}updateDatumSelection(e){return D(this,null,(function*(){return this.targetLinesSelection.update(e.nodeData,void 0,void 0),e.datumSelection.update(e.nodeData,void 0,void 0)}))}updateDatumNodes(e){return D(this,null,(function*(){for(const{node:t}of e.datumSelection){const e=this.properties;or(pr,t,e)}for(const{node:e,datum:t}of this.targetLinesSelection)if(void 0===t.target)e.visible=!1;else{const i=this.properties.target;or(["x1","x2","y1","y2"],e,t.target),or(pr,e,i)}}))}updateColorRanges(){return D(this,null,(function*(){const e=this.getValueAxis(),t=this.getCategoryAxis();if(!e||!t)return;const[i,a]=[0,Math.max(...t.scale.range)],s=this.getBarDirection()===o.m.ChartAxisDirection.Y?(t,o)=>{t.x=i,t.y=e.scale.convert(o.stop),t.height=e.scale.convert(o.start)-t.y,t.width=a}:(t,o)=>{t.x=e.scale.convert(o.start),t.y=i,t.height=a,t.width=e.scale.convert(o.stop)-t.x};this.colorRangesSelection.update(this.normalizedColorRanges);for(const{node:o,datum:n}of this.colorRangesSelection)s(o,n),o.fill=n.color}))}updateNodes(t,i,o){return D(this,null,(function*(){yield v(e.prototype,this,"updateNodes").call(this,t,i,o),yield this.updateColorRanges()}))}updateLabelSelection(e){return D(this,null,(function*(){return e.labelSelection}))}updateLabelNodes(e){return D(this,null,(function*(){}))}animateEmptyUpdateReady(e){const{datumSelections:t,annotationSelections:i}=e,o=ar(er(this.isVertical(),this.axes,"normal"));hr(this.id,"nodes",this.ctx.animationManager,t,o),nr(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){var t,i,o;const{datumSelections:a,annotationSelections:s}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const n=null==(i=null==(t=this.processedData)?void 0:t.reduced)?void 0:i.diff,r=ar(er(this.isVertical(),this.axes,"normal"));hr(this.id,"nodes",this.ctx.animationManager,a,r,((e,t)=>lr(t.xValue)),n),(null==(o=null==n?void 0:n.changed)||o)&&nr(this,"annotations",this.ctx.animationManager,s)}},gr={series:{direction:"vertical",strokeWidth:0,strokeOpacity:1,fillOpacity:1,widthRatio:.5,target:{strokeWidth:3,strokeOpacity:1,lengthRatio:.75}},axes:{[o.a.CARTESIAN_AXIS_TYPE.NUMBER]:{nice:!1,crosshair:{enabled:!1}}}},mr={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"bullet",solo:!0,instanceConstructor:yr,defaultAxes:[{type:o.a.CARTESIAN_AXIS_TYPE.NUMBER,position:o.a.POSITION.LEFT},{type:o.a.CARTESIAN_AXIS_TYPE.CATEGORY,position:o.a.POSITION.BOTTOM}],themeTemplate:gr,swapDefaultAxesCondition:e=>"horizontal"===(null==e?void 0:e.direction),paletteFactory:e=>{let{takeColors:t,colorsCount:i,themeTemplateParameters:a}=e;var s;const{properties:n}=a,{fills:[r],strokes:[l]}=t(i),h=a.properties.get(o.a.DEFAULT_BACKGROUND_COLOUR),d=null!=(s=Array.isArray(h)?h[0]:h)?s:"white";return{fill:r,stroke:l,target:{stroke:n.get(o.a.DEFAULT_CROSS_LINES_COLOUR)},backgroundFill:d}}},xr=class extends o.i.Group{constructor(){super(),this.append([new o.i.Rect({tag:0}),new o.i.Line({tag:2}),new o.i.Line({tag:2})])}updateDatumStyles(e,t){const{bandwidth:i,scaledValues:{xValue:a}}=e,{openValue:s,closeValue:n,highValue:r,lowValue:l}=e.scaledValues,{fill:h,fillOpacity:d,stroke:c,strokeWidth:u,strokeOpacity:p,lineDash:y,lineDashOffset:g,wick:m,cornerRadius:x}=t,f=o.i.Selection.select(this,o.i.Rect),[v]=f.selectByTag(0),D=f.selectByTag(2);m.strokeWidth>i&&(m.strokeWidth=i);const M=Math.min(s,n),b=Math.max(s,n),S=Math.min(r,l),N=Math.max(r,l);v.setProperties({x:a,y:M,width:i,height:b-M}),v.setProperties({fill:h,fillOpacity:d,strokeWidth:u,strokeOpacity:p,stroke:c,lineDash:y,lineDashOffset:g,cornerRadius:x}),D[0].setProperties({y1:Math.round(N+m.strokeWidth/2),y2:b,x:Math.floor(a+i/2)}),D[0].setProperties(m),D[1].setProperties({y1:Math.round(S-m.strokeWidth/2),y2:M,x:Math.floor(a+i/2)}),D[1].setProperties(m)}},{BaseProperties:fr,AbstractBarSeriesProperties:vr,SeriesTooltip:Dr,Validate:Mr,COLOR_STRING:br,FUNCTION:Sr,LINE_DASH:Nr,OBJECT:Ir,POSITIVE_NUMBER:kr,RATIO:Ar,STRING:Tr}=o.m,Lr=class extends fr{};f([Mr(br,{optional:!0})],Lr.prototype,"stroke",2),f([Mr(kr)],Lr.prototype,"strokeWidth",2),f([Mr(Ar)],Lr.prototype,"strokeOpacity",2),f([Mr(Nr,{optional:!0})],Lr.prototype,"lineDash",2),f([Mr(kr)],Lr.prototype,"lineDashOffset",2);var Or=class extends fr{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#333",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.wick=new Lr}};f([Mr(br,{optional:!0})],Or.prototype,"fill",2),f([Mr(Ar)],Or.prototype,"fillOpacity",2),f([Mr(br)],Or.prototype,"stroke",2),f([Mr(kr)],Or.prototype,"strokeWidth",2),f([Mr(Ar)],Or.prototype,"strokeOpacity",2),f([Mr(Nr)],Or.prototype,"lineDash",2),f([Mr(kr)],Or.prototype,"lineDashOffset",2),f([Mr(kr)],Or.prototype,"cornerRadius",2),f([Mr(Sr,{optional:!0})],Or.prototype,"formatter",2),f([Mr(Ir)],Or.prototype,"wick",2);var Er=class extends fr{constructor(){super(...arguments),this.up=new Or,this.down=new Or}};f([Mr(Ir)],Er.prototype,"up",2),f([Mr(Ir)],Er.prototype,"down",2);var Rr=class extends vr{constructor(){super(...arguments),this.item=new Er,this.tooltip=new Dr}};f([Mr(Tr)],Rr.prototype,"xKey",2),f([Mr(Tr)],Rr.prototype,"openKey",2),f([Mr(Tr)],Rr.prototype,"closeKey",2),f([Mr(Tr)],Rr.prototype,"highKey",2),f([Mr(Tr)],Rr.prototype,"lowKey",2),f([Mr(Tr,{optional:!0})],Rr.prototype,"xName",2),f([Mr(Tr,{optional:!0})],Rr.prototype,"yName",2),f([Mr(Tr,{optional:!0})],Rr.prototype,"openName",2),f([Mr(Tr,{optional:!0})],Rr.prototype,"closeName",2),f([Mr(Tr,{optional:!0})],Rr.prototype,"highName",2),f([Mr(Tr,{optional:!0})],Rr.prototype,"lowName",2),f([Mr(Sr,{optional:!0})],Rr.prototype,"formatter",2),f([Mr(Ir)],Rr.prototype,"item",2),f([Mr(Ir)],Rr.prototype,"tooltip",2);var{extent:Cr,extractDecoratedProperties:wr,fixNumericExtent:Pr,keyProperty:_r,mergeDefaults:zr,SeriesNodePickMode:Kr,SMALLEST_KEY_INTERVAL:Vr,valueProperty:jr,diff:Fr,animationValidation:Br,ChartAxisDirection:Ur,convertValuesToScaleByDefs:Wr}=o.m,{motion:Gr}=o.i,{sanitizeHtml:Yr,Logger:Hr}=o.s,{ContinuousScale:Xr,OrdinalTimeScale:Qr}=o.d,Zr=class extends o.m.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.openKey=o.properties.openKey,this.closeKey=o.properties.closeKey,this.highKey=o.properties.highKey,this.lowKey=o.properties.lowKey}},qr=class e extends o.m.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Kr.EXACT_SHAPE_MATCH],directionKeys:{x:["xKey"],y:["lowKey","highKey","openKey","closeKey"]},directionNames:{x:["xName"],y:["lowName","highName","openName","closeName"]},pathsPerSeries:1}),this.properties=new Rr,this.NodeEvent=Zr}processData(e){return D(this,null,(function*(){var t,i,o,a;if(!this.properties.isValid())return;const{xKey:s,openKey:n,closeKey:r,highKey:l,lowKey:h}=this.properties,d=!this.ctx.animationManager.isSkipped(),c=null==(t=this.getCategoryAxis())?void 0:t.scale,u=Xr.is(c)||Qr.is(c),p=Xr.is(c)?"range":"category",y=[];d&&this.processedData&&y.push(Fr(this.processedData)),d&&y.push(Br(this));const{processedData:g}=yield this.requestDataModel(e,null!=(i=this.data)?i:[],{props:[_r(this,s,u,{id:"xValue",valueType:p}),jr(this,n,!0,{id:"openValue"}),jr(this,r,!0,{id:"closeValue"}),jr(this,l,!0,{id:"highValue"}),jr(this,h,!0,{id:"lowValue"}),...u?[Vr]:[],...y],dataVisible:this.visible});this.smallestDataInterval={x:null!=(a=null==(o=g.reduced)?void 0:o.smallestKeyInterval)?a:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(e){var t;const{processedData:i,dataModel:o,smallestDataInterval:a}=this;if(!i||!o)return[];if(e===this.getBarDirection()){const e=o.getDomain(this,"lowValue","value",i),t=o.getDomain(this,"highValue","value",i),a=o.getDomain(this,"openValue","value",i),s=o.getDomain(this,"closeValue","value",i);return Pr([Math.min(...e,...t,...a,...s),Math.max(...t,...e,...a,...s)],this.getValueAxis())}const{index:s,def:n}=o.resolveProcessedDataIndexById(this,"xValue"),r=i.domain.keys[s];if("key"===n.type&&"category"===n.valueType)return r;const l=this.getCategoryAxis(),h=null==l?void 0:l.isReversed(),d=null!=(t=Cr(r))?t:[NaN,NaN],c=a&&isFinite(a.x)?a.x:0;if(e===Ur.Y){const e=d[0]+(h?0:-c),t=d[1]+(h?c:0);return Pr([e,t],l)}const u=d[0]+(h?-c:0),p=d[1]+(h?0:c);return Pr([u,p],l)}createNodeData(){return D(this,null,(function*(){const{visible:t,dataModel:i}=this,o=this.getCategoryAxis(),a=this.getValueAxis();if(!(i&&t&&o&&a))return[];const{xKey:s,openKey:n,closeKey:r,highKey:l,lowKey:h}=this.properties,d=[],c=i.resolveProcessedDataDefsByIds(this,["xValue","openValue","closeValue","highValue","lowValue"]),{barWidth:u,groupIndex:p}=this.updateGroupScale(o),{groupScale:y,processedData:g}=this;return null==g||g.data.forEach((e=>{let{datum:t,keys:g,values:m}=e;const{xValue:x,openValue:f,closeValue:v,highValue:D,lowValue:M}=i.resolveProcessedDataDefsValues(c,{keys:g,values:m}),b=void 0!==D&&D>=f&&D>=v;if(!(void 0!==M&&M<=f&&M<=v))return void Hr.warnOnce("invalid low value for key [".concat(h,"] in data element, low value cannot be higher than datum open or close values"));if(!b)return void Hr.warnOnce("invalid high value for key [".concat(l,"] in data element, high value cannot be lower than datum open or close values."));const S=Wr({defs:c,values:{xValue:x,openValue:f,closeValue:v,highValue:D,lowValue:M},xAxis:o,yAxis:a});S.xValue+=Math.round(y.convert(String(p)));const N=v>f,I=this.getSeriesItemType(N),{fill:k,fillOpacity:A,stroke:T,strokeWidth:L,strokeOpacity:O,lineDash:E,lineDashOffset:R,wick:C,cornerRadius:w}=this.getItemConfig(I),P=Math.min(S.openValue,S.closeValue),_=Math.max(S.openValue,S.closeValue)-P,z={x:S.xValue+Math.round(u)/2,y:P+_/2};d.push({series:this,itemId:I,datum:t,xKey:s,xValue:x,openKey:n,closeKey:r,highKey:l,lowKey:h,openValue:f,closeValue:v,highValue:D,lowValue:M,bandwidth:Math.round(u),scaledValues:S,wick:C,fill:k,fillOpacity:A,stroke:T,strokeWidth:L,strokeOpacity:O,lineDash:E,lineDashOffset:R,cornerRadius:w,midPoint:z,aggregatedValue:v})})),[{itemId:s,nodeData:d,labelData:[],scales:v(e.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}getSeriesItemType(e){return e?"up":"down"}getItemConfig(e){switch(e){case"up":return this.properties.item.up;case"down":return this.properties.item.down}}getLegendData(e){return[]}getTooltipHtml(e){const{xKey:t,openKey:i,closeKey:o,highKey:a,lowKey:s,xName:n,yName:r,openName:l,closeName:h,highName:d,lowName:c,tooltip:u}=this.properties,{datum:p}=e,y=this.getCategoryAxis(),g=this.getValueAxis();if(!y||!g||!this.properties.isValid())return"";const m=Yr(r),x=[[t,n,y],[i,l,g],[a,d,g],[s,c,g],[o,h,g]].map((e=>{let[t,i,o]=e;return Yr("".concat(null!==i&&void 0!==i?i:(e=>e.charAt(0).toUpperCase()+e.substring(1))(t),": ").concat(o.formatDatum(p[t])))})).join("<br/>");let{fill:f}=this.getFormattedStyles(e);return"transparent"===f&&(f=this.properties.item.down.fill),u.toTooltipHtml({title:m,content:x,backgroundColor:f},{seriesId:this.id,datum:p,fill:f,xKey:t,openKey:i,closeKey:o,highKey:a,lowKey:s,xName:n,yName:r,openName:l,closeName:h,highName:d,lowName:c})}animateEmptyUpdateReady(e){let{datumSelections:t}=e;const i=this.isVertical(),{from:o,to:a}={from:i?{scalingX:1,scalingY:0}:{scalingX:0,scalingY:1},to:{scalingX:1,scalingY:1}};Gr.resetMotion(t,function(e){return(t,i)=>e?{scalingCenterY:("up"===i.itemId?Math.max:Math.min)(i.scaledValues.highValue,i.scaledValues.lowValue)}:{scalingCenterX:i.scaledValues.highValue}}(i)),Gr.staticFromToMotion(this.id,"datums",this.ctx.animationManager,t,o,a,{phase:"initial"})}isVertical(){return!0}isLabelEnabled(){return!1}updateDatumSelection(e){return D(this,null,(function*(){var t;const i=null!=(t=e.nodeData)?t:[];return e.datumSelection.update(i)}))}updateDatumNodes(e){return D(this,arguments,(function(e){var t=this;let{datumSelection:i,isHighlight:o}=e;return function*(){i.each(((e,i)=>{let a=t.getFormattedStyles(i,o);o&&(a=zr(t.properties.highlightStyle.item,a));const{stroke:s,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:h}=a;a.wick=zr(a.wick,{stroke:s,strokeWidth:n,strokeOpacity:r,lineDash:l,lineDashOffset:h}),e.updateDatumStyles(i,a)}))}()}))}updateLabelNodes(e){return D(this,null,(function*(){}))}updateLabelSelection(e){return D(this,null,(function*(){const{labelData:t,labelSelection:i}=e;return i.update(t)}))}nodeFactory(){return new xr}getFormattedStyles(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{id:i,ctx:{callbackCache:o}}=this,{xKey:a,openKey:s,closeKey:n,highKey:r,lowKey:l,formatter:h}=this.properties,{datum:d,fill:c,fillOpacity:u,stroke:p,strokeWidth:y,strokeOpacity:x,lineDash:f,lineDashOffset:v,wick:D,itemId:M,cornerRadius:b}=e,S={fill:c,fillOpacity:u,stroke:p,strokeWidth:y,strokeOpacity:x,lineDash:f,lineDashOffset:v,wick:wr(D),cornerRadius:b};if(h){const e=o.call(h,m(g({datum:d,seriesId:i,itemId:M,highlighted:t},S),{xKey:a,openKey:s,closeKey:n,highKey:r,lowKey:l}));if(e)return zr(e,S)}return S}};qr.className="CandleStickSeries",qr.type="candlestick";var Jr=qr,$r={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS},axes:{[o.a.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{snap:!1}},[o.a.CARTESIAN_AXIS_TYPE.ORDINAL_TIME]:{groupPaddingInner:0,crosshair:{enabled:!0}}}},el={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"candlestick",instanceConstructor:Jr,hidden:!0,defaultAxes:[{type:o.a.CARTESIAN_AXIS_TYPE.NUMBER,position:o.a.POSITION.LEFT},{type:o.a.CARTESIAN_AXIS_TYPE.ORDINAL_TIME,position:o.a.POSITION.BOTTOM}],themeTemplate:$r,groupable:!1,paletteFactory:e=>{let{takeColors:t,colorsCount:i}=e;const{fills:o,strokes:a}=t(i);return{item:{up:{fill:"transparent",stroke:a[0]},down:{fill:o[0],stroke:a[0]}}}}},{Validate:tl,NUMBER:il,TEXT_WRAP:ol,OVERFLOW_STRATEGY:al}=o.m,{Logger:sl}=o.s,{Text:nl,Label:rl}=o.i,ll=class extends rl{constructor(){super(...arguments),this.wrapping="on-space",this.overflowStrategy="ellipsis"}static lineHeight(e){return Math.ceil(e*nl.defaultLineHeightRatio)}};f([tl(ol)],ll.prototype,"wrapping",2),f([tl(al)],ll.prototype,"overflowStrategy",2),f([tl(il,{optional:!0})],ll.prototype,"minimumFontSize",2);var hl=class extends ll{constructor(){super(...arguments),this.spacing=0}};f([tl(il)],hl.prototype,"spacing",2);var dl=class extends ll{};function cl(e,t,i){if(e>t)return;let o,a=e,s=t;for(;s>=a;){const e=(s+a)/2|0,t=i(e);null==t?s=e-1:(o=t,a=e+1)}return o}function ul(e,t,i,o){let{padding:a}=i;var s;const n=2*a,r=Math.min(null!=(s=t.minimumFontSize)?s:t.fontSize,t.fontSize),l=new nl;l.setFont(t);const h={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight};return cl(r,t.fontSize,(i=>{const a=hl.lineHeight(i),s=i===r,d=o(a+n,s),c=d.width-n,u=d.height-n;if(a>u)return;h.fontSize=i;const{lines:p}=nl.wrapLines(e,c,u,h,t.wrapping,s?t.overflowStrategy:"hide");if(null==p)return;const y=p.join("\n");l.text=y,l.fontSize=i,l.lineHeight=a;const g=l.computeBBox(),m=l.computeBBox().width,x=a*p.length;return g.width>c||x>u?void 0:[{text:y,fontSize:i,lineHeight:a,width:m,height:x},d.meta]}))}function pl(e){return null!=(null==e?void 0:e.minimumFontSize)&&(null==e?void 0:e.fontSize)&&(null==e?void 0:e.minimumFontSize)>(null==e?void 0:e.fontSize)}function yl(e,t,i,o,a,s){const n=t.enabled?e:void 0,r=o.enabled?i:void 0;let l,h,d;if((pl(t)||pl(o))&&sl.warnOnce("minimumFontSize should be set to a value less than or equal to the font size"),null!=n&&null!=r&&(l=function(e,t,i,o,a,s){let{padding:n}=a;var r,l;const{spacing:h}=t,d=2*n,c=2*n+h,u=(null!=(r=t.minimumFontSize)?r:t.fontSize)+(null!=(l=o.minimumFontSize)?l:o.fontSize);if(u>s(u+c,!1).height-c)return;const p=function(e,t){const{fontSize:i,minimumFontSize:o=i}=e,{fontSize:a,minimumFontSize:s=a}=t,n=i-o,r=a-s;let l=e.fontSize,h=t.fontSize;const d=[{labelFontSize:i,secondaryLabelFontSize:a}];for(;l>o||h>s;)(n>0?(l-o)/n:-1)>(r>0?(h-s)/r:-1)?l--:h--,d.push({labelFontSize:l,secondaryLabelFontSize:h});return d.reverse(),d}(t,o),y=new nl;y.setFont(t);const g={fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight},m=new nl;m.setFont(o);const x={fontFamily:o.fontFamily,fontSize:o.fontSize,fontStyle:o.fontStyle,fontWeight:o.fontWeight};let f,v;return cl(0,p.length-1,(a=>{const{labelFontSize:n,secondaryLabelFontSize:r}=p[a],l=0===a,u=hl.lineHeight(n),D=dl.lineHeight(r),M=s(u+D+c,l),b=M.width-d,S=M.height-c;if(u+D>S)return;if(null==f||f.fontSize!==n){g.fontSize=n;const{lines:i}=nl.wrapLines(e,b,S,g,t.wrapping,l?t.overflowStrategy:"hide");if(null==i)f=void 0;else{const e=i.join("\n");y.text=e,y.fontSize=n,y.lineHeight=n;const t=y.computeBBox().width,o=i.length*u;f={text:e,fontSize:n,lineHeight:u,width:t,height:o}}}if(null==f||f.width>b||f.height>S)return;if(null==v||v.fontSize!==r){x.fontSize=r;const{lines:e}=nl.wrapLines(i,b,S,x,o.wrapping,l?o.overflowStrategy:"hide");if(null==e)v=void 0;else{const t=e.join("\n");m.text=t,m.fontSize=r,m.lineHeight=D;const i=m.computeBBox().width,o=e.length*D;v={text:t,fontSize:r,lineHeight:D,width:i,height:o}}}if(null==v)return;const N=f.height+v.height;return v.width>b||N>S?void 0:{width:Math.max(f.width,v.width),height:N+h,meta:M.meta,label:f,secondaryLabel:v}}))}(n,t,r,o,a,s)),null==l&&null!=n&&(h=ul(n,t,a,s)),null!=h){const[e,t]=h;l={width:e.width,height:e.height,meta:t,label:e,secondaryLabel:void 0}}if(null==l&&null==n&&null!=r&&(d=ul(r,o,a,s)),null!=d){const[e,t]=d;l={width:e.width,height:e.height,meta:t,label:void 0,secondaryLabel:e}}return l}var{CartesianSeriesProperties:gl,SeriesTooltip:ml,Validate:xl,AND:fl,ARRAY:vl,COLOR_STRING:Dl,COLOR_STRING_ARRAY:Ml,FUNCTION:bl,OBJECT:Sl,POSITIVE_NUMBER:Nl,RATIO:Il,STRING:kl,TEXT_ALIGN:Al,VERTICAL_ALIGN:Tl}=o.m,Ll=class extends gl{constructor(){super(...arguments),this.colorRange=["black","black"],this.stroke="black",this.strokeWidth=0,this.textAlign="center",this.verticalAlign="middle",this.itemPadding=0,this.label=new hl,this.tooltip=new ml}};f([xl(kl,{optional:!0})],Ll.prototype,"title",2),f([xl(kl)],Ll.prototype,"xKey",2),f([xl(kl)],Ll.prototype,"yKey",2),f([xl(kl,{optional:!0})],Ll.prototype,"colorKey",2),f([xl(kl,{optional:!0})],Ll.prototype,"xName",2),f([xl(kl,{optional:!0})],Ll.prototype,"yName",2),f([xl(kl,{optional:!0})],Ll.prototype,"colorName",2),f([xl(fl(Ml,vl.restrict({minLength:1})))],Ll.prototype,"colorRange",2),f([xl(Dl,{optional:!0})],Ll.prototype,"stroke",2),f([xl(Il,{optional:!0})],Ll.prototype,"strokeOpacity",2),f([xl(Nl,{optional:!0})],Ll.prototype,"strokeWidth",2),f([xl(Al)],Ll.prototype,"textAlign",2),f([xl(Tl)],Ll.prototype,"verticalAlign",2),f([xl(Nl)],Ll.prototype,"itemPadding",2),f([xl(bl,{optional:!0})],Ll.prototype,"formatter",2),f([xl(Sl)],Ll.prototype,"label",2),f([xl(Sl)],Ll.prototype,"tooltip",2);var{SeriesNodePickMode:Ol,getMissCount:El,valueProperty:Rl,ChartAxisDirection:Cl,DEFAULT_CARTESIAN_DIRECTION_KEYS:wl,DEFAULT_CARTESIAN_DIRECTION_NAMES:Pl}=o.m,{Rect:_l,PointerEvents:zl}=o.i,{ColorScale:Kl}=o.d,{sanitizeHtml:Vl,Color:jl,Logger:Fl}=o.s,Bl=class extends o.m.CartesianSeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.colorKey=o.properties.colorKey}},Ul={left:-.5,center:0,right:-.5},Wl={top:-.5,middle:0,bottom:-.5},Gl=class e extends o.m.CartesianSeries{constructor(e){super({moduleCtx:e,directionKeys:wl,directionNames:Pl,pickModes:[Ol.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!1,hasHighlightedLabels:!0}),this.properties=new Ll,this.NodeEvent=Bl,this.colorScale=new Kl}processData(e){return D(this,null,(function*(){var t;const i=this.axes[Cl.X],o=this.axes[Cl.Y];if(!i||!o||!this.properties.isValid()||null==(t=this.data)||!t.length)return;const{xKey:a,yKey:s,colorRange:n,colorKey:r}=this.properties,{isContinuousX:l,isContinuousY:h}=this.isContinuous(),{dataModel:d,processedData:c}=yield this.requestDataModel(e,this.data,{props:[Rl(this,a,l,{id:"xValue"}),Rl(this,s,h,{id:"yValue"}),...r?[Rl(this,r,!0,{id:"colorValue"})]:[]]});if(this.isColorScaleValid()){const e=d.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=c.domain.values[e],this.colorScale.range=n,this.colorScale.update()}}))}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue").index,a=i.data.length,s=El(this,i.defs.values[o].missing);return!(0===a||a===s)}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;return t&&i?e===Cl.X?t.getDomain(this,"xValue","value",i):t.getDomain(this,"yValue","value",i):[]}createNodeData(){return D(this,null,(function*(){var t,i,o,a,s,n,r;const{data:l,visible:h,axes:d,dataModel:c}=this,u=d[Cl.X],p=d[Cl.Y];if(!(l&&c&&h&&u&&p))return[];if("category"!==u.type||"category"!==p.type)return Fl.warnOnce('Heatmap series expected axes to have "category" type, but received "'.concat(u.type,'" and "').concat(p.type,'" instead.')),[];const{xKey:y,xName:g,yKey:m,yName:x,colorKey:f,colorName:D,textAlign:M,verticalAlign:b,itemPadding:S,colorRange:N,label:I}=this.properties,k=c.resolveProcessedDataIndexById(this,"xValue").index,A=c.resolveProcessedDataIndexById(this,"yValue").index,T=f?c.resolveProcessedDataIndexById(this,"colorValue").index:void 0,L=u.scale,O=p.scale,E=(null!=(t=L.bandwidth)?t:0)/2,R=(null!=(i=O.bandwidth)?i:0)/2,C=this.isColorScaleValid(),w=[],P=[],_=null!=(o=L.bandwidth)?o:10,z=null!=(a=O.bandwidth)?a:10,K=(_-2*S)*Ul[M],V=(z-2*S)*Wl[b],j=()=>({width:_,height:z,meta:null});for(const{values:e,datum:v}of null!=(n=null==(s=this.processedData)?void 0:s.data)?n:[]){const t=e[k],i=e[A],o=L.convert(t)+E,a=O.convert(i)+R,s=e[null!==T&&void 0!==T?T:-1],n=C&&null!=s?this.colorScale.convert(s):N[0],r=yl(null==s?void 0:this.getLabelText(I,{value:s,datum:v,colorKey:f,colorName:D,xKey:y,yKey:m,xName:g,yName:x}),this.properties.label,void 0,this.properties.label,{padding:S},j),l={x:o,y:a,size:0};if(w.push({series:this,itemId:m,yKey:m,xKey:y,xValue:t,yValue:i,colorValue:s,datum:v,point:l,width:_,height:z,fill:n,midPoint:{x:o,y:a}}),null!=(null==r?void 0:r.label)){const{text:e,fontSize:t,lineHeight:i,height:o}=r.label,{fontStyle:a,fontFamily:s,fontWeight:n,color:h}=this.properties.label,d=l.x+K*(_-2*S),c=l.y+V*(z-2*S)-.5*(r.height-o);P.push({series:this,itemId:m,datum:v,text:e,fontSize:t,lineHeight:i,fontStyle:a,fontFamily:s,fontWeight:n,color:h,textAlign:M,verticalAlign:b,x:d,y:c})}}return[{itemId:null!=(r=this.properties.yKey)?r:this.id,nodeData:w,labelData:P,scales:v(e.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}nodeFactory(){return new _l}updateDatumSelection(e){return D(this,null,(function*(){const{nodeData:t,datumSelection:i}=e,o=null!==t&&void 0!==t?t:[];return i.update(o)}))}updateDatumNodes(e){return D(this,null,(function*(){var t;const{isHighlight:i}=e,{id:o,ctx:{callbackCache:a}}=this,{xKey:s,yKey:n,colorKey:r,formatter:l,highlightStyle:{item:{fill:h,stroke:d,strokeWidth:c,strokeOpacity:u,fillOpacity:p}}}=this.properties,y=this.axes[Cl.X],[g,m]=null!=(t=null==y?void 0:y.visibleRange)?t:[],x=!(0!==g||1!==m);e.datumSelection.each(((e,t)=>{var y,g,m,f,v;const{point:D,width:M,height:b}=t,S=i&&void 0!==h?jl.interpolate(t.fill,h)(null!==p&&void 0!==p?p:1):t.fill,N=i&&void 0!==d?d:this.properties.stroke,I=i&&void 0!==u?u:this.properties.strokeOpacity,k=i&&void 0!==c?c:this.properties.strokeWidth;let A;l&&(A=a.call(l,{datum:t.datum,fill:S,stroke:N,strokeOpacity:I,strokeWidth:k,highlighted:i,xKey:s,yKey:n,colorKey:r,seriesId:o})),e.crisp=x,e.x=Math.floor(D.x-M/2),e.y=Math.floor(D.y-b/2),e.width=Math.ceil(M),e.height=Math.ceil(b),e.fill=null!=(y=null==A?void 0:A.fill)?y:S,e.stroke=null!=(g=null==A?void 0:A.stroke)?g:N,e.strokeOpacity=null!=(f=null!=(m=null==A?void 0:A.strokeOpacity)?m:I)?f:1,e.strokeWidth=null!=(v=null==A?void 0:A.strokeWidth)?v:k}))}))}updateLabelSelection(e){return D(this,null,(function*(){const{labelData:t,labelSelection:i}=e,{enabled:o}=this.properties.label,a=o?t:[];return i.update(a)}))}updateLabelNodes(e){return D(this,null,(function*(){e.labelSelection.each(((e,t)=>{e.text=t.text,e.fontSize=t.fontSize,e.lineHeight=t.lineHeight,e.fontStyle=t.fontStyle,e.fontFamily=t.fontFamily,e.fontWeight=t.fontWeight,e.fill=t.color,e.textAlign=t.textAlign,e.textBaseline=t.verticalAlign,e.x=t.x,e.y=t.y,e.pointerEvents=zl.None}))}))}getTooltipHtml(e){var t,i,o;const a=this.axes[Cl.X],s=this.axes[Cl.Y];if(!this.properties.isValid()||!a||!s)return"";const{xKey:n,yKey:r,colorKey:l,xName:h,yName:d,colorName:c,stroke:u,strokeWidth:p,colorRange:y,formatter:g,tooltip:m}=this.properties,{colorScale:x,id:f,ctx:{callbackCache:v}}=this,{datum:D,xValue:M,yValue:b,colorValue:S}=e,N=this.isColorScaleValid()?x.convert(S):y[0];let I;g&&(I=v.call(g,{datum:e,xKey:n,yKey:r,colorKey:l,fill:N,stroke:u,strokeWidth:p,highlighted:!1,seriesId:f}));const k=null!=(i=null!=(t=null==I?void 0:I.fill)?t:N)?i:"gray",A=null!=(o=this.properties.title)?o:d,T=Vl(a.formatDatum(M)),L=Vl(s.formatDatum(b));let O="<b>".concat(Vl(null!==h&&void 0!==h?h:n),"</b>: ").concat(T,"<br><b>").concat(Vl(null!==d&&void 0!==d?d:r),"</b>: ").concat(L);return l&&(O="<b>".concat(Vl(null!==c&&void 0!==c?c:l),"</b>: ").concat(Vl(S),"<br>")+O),m.toTooltipHtml({title:A,content:O,backgroundColor:k},{seriesId:f,datum:D,xKey:n,yKey:r,xName:h,yName:d,title:A,color:k,colorKey:l})}getLegendData(e){var t;return"gradient"===e&&null!=(t=this.data)&&t.length&&this.properties.isValid()&&this.isColorScaleValid()&&this.dataModel?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.properties.colorName,colorDomain:this.processedData.domain.values[this.dataModel.resolveProcessedDataIndexById(this,"colorValue").index],colorRange:this.properties.colorRange}]:[]}isLabelEnabled(){return this.properties.label.enabled&&!!this.properties.colorKey}getBandScalePadding(){return{inner:0,outer:0}}};Gl.className="HeatmapSeries",Gl.type="heatmap";var Yl=Gl,Hl={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,label:{__overrides__:o.a.OVERRIDE_SERIES_LABEL_DEFAULTS,enabled:!1,color:o.a.DEFAULT_LABEL_COLOUR,fontSize:o.a.FONT_SIZE.SMALL,fontFamily:o.a.DEFAULT_FONT_FAMILY,wrapping:"on-space",overflowStrategy:"ellipsis"},itemPadding:3},gradientLegend:{enabled:!0}},Xl={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"heatmap",instanceConstructor:Yl,defaultAxes:[{type:o.a.CARTESIAN_AXIS_TYPE.CATEGORY,position:o.a.POSITION.LEFT},{type:o.a.CARTESIAN_AXIS_TYPE.CATEGORY,position:o.a.POSITION.BOTTOM}],themeTemplate:Hl,paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:a,themeTemplateParameters:s}=e;var n;const{properties:r}=s,l=r.get(o.a.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),h=r.get(o.a.DEFAULT_BACKGROUND_COLOUR),d=null!=(n=Array.isArray(h)?h[0]:h)?n:"white",{fills:c,strokes:u}=t(i);return{stroke:a?u[0]:d,colorRange:a?[c[0],c[1]]:l}}},Ql=1e-9;function Zl(e,t,i,o){const[a,s]=e,[n,r]=t,l=n-a,h=r-s,d=l*l+h*h;let c,u;if(Math.abs(d)<Ql)c=a,u=s;else{let e=((i-a)*l+(o-s)*h)/d;e=Math.max(0,Math.min(1,e)),c=a+e*(n-a),u=s+e*(r-s)}const p=i-c,y=o-u;return p*p+y*y}function ql(e,t,i){let o=1/0,a=e[e.length-1];for(const s of e)o=Math.min(o,Zl(a,s,t,i)),a=s;return Math.sqrt(o)}function Jl(e){let[t,i]=e[0],o=0;for(let a=1;a<e.length;a+=1){const[s,n]=e[a];o+=Math.hypot(s-t,n-i),t=s,i=n}return o}function $l(e){if(0===e.length)return;const t=Jl(e)/2;let[i,o]=e[0],a=0;for(let s=1;s<e.length;s+=1){const[n,r]=e[s],l=Math.hypot(n-i,r-o),h=a+l;if(h>t){const e=(t-a)/l;return{point:[i+(n-i)*e,o+(r-o)*e],angle:Math.atan2(r-o,n-i)}}a=h,i=n,o=r}}var{LonLatBBox:eh}=o.m;function th(e,t,i,o,a){return null==e?e=new eh(t,i,o,a):(e.lon0=Math.min(e.lon0,t),e.lat0=Math.min(e.lat0,i),e.lon1=Math.max(e.lon1,o),e.lat1=Math.max(e.lat1,a)),e}var ih=(e,t,i)=>{let o=e,a=o;for(const s of t)if(null==o||i(o.value,s)>0)o={value:s,next:o},a=o;else{for(;null!=a.next&&i(a.next.value,s)<=0;)a=a.next;a.next={value:s,next:a.next}}return o};function oh(e,t){return e.forEach((e=>{const[i,o]=e;t=th(t,i,o,i,o)})),t}function ah(e,t,i){let o=!1,a=1/0;for(const s of e){let e=s[s.length-1],[n,r]=e;for(const l of s){const[s,h]=l;h>i!=r>i&&t<(n-s)*(i-h)/(r-h)+s&&(o=!o),a=Math.min(a,Zl(e,l,t,i)),e=l,n=s,r=h}}return(o?-1:1)*Math.sqrt(a)}var{Path:sh,Path2D:nh,BBox:rh,ScenePathChangeDetection:lh}=o.i,hh=class extends sh{constructor(){super(...arguments),this.projectedGeometry=void 0,this.renderMode=3,this.strokePath=new nh}computeBBox(){var e;return(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),null==(e=this.bbox)?void 0:e.clone()}updatePath(){const{projectedGeometry:e}=this;this.strokePath.clear(),this.path.clear(),this.bbox=null!=e?this.drawGeometry(e,void 0):void 0}drawPath(e){super.drawPath(e),this.strokePath.draw(e),this.renderStroke(e)}containsPoint(e,t){const{projectedGeometry:i}=this;return!(null==i||(({x:e,y:t}=this.transformPoint(e,t)),!this.getCachedBBox().containsPoint(e,t)))&&this.geometryDistance(i,e,t)<=0}distanceToPoint(e,t){const{projectedGeometry:i}=this;return({x:e,y:t}=this.transformPoint(e,t)),null!=i?this.geometryDistance(i,e,t):1/0}geometryDistance(e,t,i){const{renderMode:o,strokeWidth:a}=this,s=0!==(1&o),n=0!==(2&o),r=Math.max(a/2,1)+1;switch(e.type){case"GeometryCollection":return e.geometries.reduce(((e,o)=>Math.min(e,this.geometryDistance(o,t,i))),1/0);case"MultiPolygon":return s?e.coordinates.reduce(((e,o)=>Math.min(e,Math.max(ah(o,t,i),0))),1/0):1/0;case"Polygon":return s?Math.max(ah(e.coordinates,t,i),0):1/0;case"MultiLineString":return n?e.coordinates.reduce(((e,o)=>Math.min(e,Math.max(ql(o,t,i)-r,0))),1/0):1/0;case"LineString":return n?Math.max(ql(e.coordinates,t,i)-r,0):1/0;default:return 1/0}}drawGeometry(e,t){const{renderMode:i,path:o,strokePath:a}=this,s=0!==(1&i),n=0!==(2&i);switch(e.type){case"GeometryCollection":e.geometries.forEach((e=>{t=this.drawGeometry(e,t)}));break;case"MultiPolygon":s&&e.coordinates.forEach((e=>{t=this.drawPolygon(o,e,t)}));break;case"Polygon":s&&(t=this.drawPolygon(o,e.coordinates,t));break;case"LineString":n&&(t=this.drawLineString(a,e.coordinates,t,!1));break;case"MultiLineString":n&&e.coordinates.forEach((e=>{t=this.drawLineString(a,e,t,!1)}))}return t}drawPolygon(e,t,i){if(t.length<1)return i;i=this.drawLineString(e,t[0],i,!0);for(let o=1;o<t.length;o+=1){const i=t[o];this.drawLineString(e,i,void 0,!0)}return i}drawLineString(e,t,i,o){if(t.length<2)return i;const a=o?t.length-1:t.length;for(let s=0;s<a;s+=1){const[o,a]=t[s];if(0===s?e.moveTo(o,a):e.lineTo(o,a),null==i)i=new rh(o,a,0,0);else{const{x:e,y:t}=i,s=e+i.width,n=t+i.height;i.x=Math.min(e,o),i.y=Math.min(t,a),i.width=Math.max(s,o)-i.x,i.height=Math.max(n,a)-i.y}}return o&&e.closePath(),i}};function dh(e,t){if(null!=e.bbox){const[i,o,a,s]=e.bbox;return t=th(t,i,o,a,s)}switch(e.type){case"GeometryCollection":e.geometries.forEach((e=>{t=dh(e,t)}));break;case"MultiPolygon":e.coordinates.forEach((e=>{e.length>0&&(t=oh(e[0],t))}));break;case"Polygon":e.coordinates.length>0&&(t=oh(e.coordinates[0],t));break;case"MultiLineString":e.coordinates.forEach((e=>{t=oh(e,t)}));break;case"LineString":t=oh(e.coordinates,t);break;case"MultiPoint":e.coordinates.forEach((e=>{const[i,o]=e;t=th(t,i,o,i,o)}));break;case"Point":{const[i,o]=e.coordinates;t=th(t,i,o,i,o);break}}return t}function ch(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.map((e=>{const o=ch(e);if(null==o)return;const a=oh(o[0],void 0);if(null==a)return;const s=Math.abs(a.lat1-a.lat0)*Math.abs(a.lon1-a.lon0);(null==t||s>t)&&(t=s,i=o)})),i}case"MultiPolygon":{let t,i;return e.coordinates.forEach((e=>{const o=oh(e[0],void 0);if(null==o)return;const a=Math.abs(o.lat1-o.lat0)*Math.abs(o.lon1-o.lon0);(null==t||a>t)&&(t=a,i=e)})),i}case"Polygon":return e.coordinates;case"MultiLineString":case"LineString":case"MultiPoint":case"Point":return}}function uh(e){switch(e.type){case"GeometryCollection":{let t,i;return e.geometries.map((e=>{const o=uh(e);if(null==o)return;const a=Jl(o);null!=a&&(null==t||a>t)&&(t=a,i=o)})),i}case"MultiLineString":{let t,i=0;return e.coordinates.forEach((e=>{const o=Jl(e);o>i&&(i=o,t=e)})),t}case"LineString":return e.coordinates;case"MultiPolygon":case"Polygon":case"MultiPoint":case"Point":return}}function ph(e,t){if(null==e)return!1;switch(e.type){case"GeometryCollection":return e.geometries.some((e=>ph(e,t)));case"MultiPolygon":case"Polygon":return 0!==(1&t);case"MultiLineString":case"LineString":return 0!==(2&t);case"MultiPoint":case"Point":return 0!==(4&t)}}function yh(e,t){switch(e.type){case"GeometryCollection":return{type:"GeometryCollection",geometries:e.geometries.map((e=>yh(e,t)))};case"Polygon":return{type:"Polygon",coordinates:mh(e.coordinates,t)};case"MultiPolygon":return{type:"MultiPolygon",coordinates:gh(e.coordinates,t)};case"MultiLineString":return{type:"MultiLineString",coordinates:mh(e.coordinates,t)};case"LineString":return{type:"LineString",coordinates:xh(e.coordinates,t)};case"MultiPoint":return{type:"MultiPoint",coordinates:xh(e.coordinates,t)};case"Point":return{type:"Point",coordinates:t.convert(e.coordinates)}}}function gh(e,t){return e.map((e=>mh(e,t)))}function mh(e,t){return e.map((e=>xh(e,t)))}function xh(e,t){return e.map((e=>t.convert(e)))}function fh(e){return Array.isArray(e)&&e.length>=2&&e.every(o.m.isFiniteNumber)}function vh(e){return Array.isArray(e)&&e.length>=2&&e.every(fh)}f([lh()],hh.prototype,"projectedGeometry",2),f([lh()],hh.prototype,"renderMode",2);var Dh=.001;function Mh(e){return Math.abs(e[0][0]-e[e.length-1][0])<Dh&&Math.abs(e[0][1]-e[e.length-1][1])<Dh}function bh(e){return Array.isArray(e)&&e.every(vh)&&e.every(Mh)}function Sh(e){if(null===e)return!0;if("object"!=typeof e||null==e.type)return!1;const{type:t,coordinates:i}=e;switch(t){case"GeometryCollection":return Array.isArray(e.geometries)&&e.geometries.every(Sh);case"MultiPolygon":return Array.isArray(i)&&i.every(bh);case"Polygon":return bh(i);case"MultiLineString":return Array.isArray(i)&&i.every(vh);case"LineString":case"MultiPoint":return vh(i);case"Point":return fh(i)}}function Nh(e){return null!==e&&"object"==typeof e&&"Feature"===e.type&&Sh(e.geometry)}var Ih=o.m.predicateWithMessage((function(e){return null!==e&&"object"==typeof e&&"FeatureCollection"===e.type&&Array.isArray(e.features)&&e.features.every(Nh)}),"a GeoJSON object"),{COLOR_STRING:kh,LINE_DASH:Ah,OBJECT:Th,POSITIVE_NUMBER:Lh,RATIO:Oh,Validate:Eh,SeriesProperties:Rh,SeriesTooltip:Ch}=o.m,wh=class extends Rh{constructor(){super(...arguments),this.topology=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new Ch}};f([Eh(Ih,{optional:!0})],wh.prototype,"topology",2),f([Eh(kh)],wh.prototype,"stroke",2),f([Eh(Oh)],wh.prototype,"strokeOpacity",2),f([Eh(Lh)],wh.prototype,"strokeWidth",2),f([Eh(Ah)],wh.prototype,"lineDash",2),f([Eh(Lh)],wh.prototype,"lineDashOffset",2),f([Eh(Th)],wh.prototype,"tooltip",2);var{createDatumId:Ph,DataModelSeries:_h,SeriesNodePickMode:zh,Validate:Kh}=o.m,{Group:Vh,Selection:jh,PointerEvents:Fh}=o.i,{Logger:Bh}=o.s,Uh=class extends _h{constructor(e){super({moduleCtx:e,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[zh.EXACT_SHAPE_MATCH]}),this.properties=new wh,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Vh({name:"itemGroup"})),this.datumSelection=jh.select(this.itemGroup,(()=>this.nodeFactory())),this.contextNodeData=[]}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}nodeFactory(){const e=new hh;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e.pointerEvents=Fh.None,e}processData(){return D(this,null,(function*(){const{topology:e}=this;this.topologyBounds=null==e?void 0:e.features.reduce(((e,t)=>{const i=t.geometry;return null==i?e:dh(i,e)}),void 0),null==e&&Bh.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}))}createNodeData(){return D(this,null,(function*(){const{id:e,topology:t,scale:i}=this;if(null==t)return[];const o=[];return t.features.forEach(((e,t)=>{const{geometry:a}=e,s=null!=a&&null!=i?yh(a,i):void 0;null!=s&&o.push({series:this,itemId:t,datum:e,index:t,projectedGeometry:s})})),[{itemId:e,nodeData:o,labelData:[]}]}))}updateSelections(){return D(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(){return D(this,null,(function*(){const{datumSelection:e}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:t}=this.contextNodeData[0];this.datumSelection=yield this.updateDatumSelection({nodeData:t,datumSelection:e}),yield this.updateDatumNodes({datumSelection:e})}))}updateDatumSelection(e){return D(this,null,(function*(){return e.datumSelection.update(e.nodeData,void 0,(e=>Ph(e.index)))}))}updateDatumNodes(e){return D(this,null,(function*(){const{properties:t}=this,{datumSelection:i}=e,{stroke:o,strokeOpacity:a,lineDash:s,lineDashOffset:n}=t,r=this.getStrokeWidth(t.strokeWidth);i.each(((e,t)=>{const{projectedGeometry:i}=t;if(null==i)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=i,e.stroke=o,e.strokeWidth=r,e.strokeOpacity=a,e.lineDash=s,e.lineDashOffset=n}))}))}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return""}};Uh.className="MapLineBackgroundSeries",Uh.type="map-line-background",f([Kh(Ih,{optional:!0,property:"topology"})],Uh.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:Wh,DEFAULT_HIERARCHY_STROKES:Gh}=o.a,Yh={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line-background",instanceConstructor:Uh,themeTemplate:{series:{__extends__:Wh,strokeWidth:1,lineDash:[0],lineDashOffset:0},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}},paletteFactory:e=>{let{themeTemplateParameters:t}=e;var i;const{properties:o}=t;return{stroke:null==(i=o.get(Gh))?void 0:i[1]}}},{AND:Hh,ARRAY:Xh,COLOR_STRING:Qh,COLOR_STRING_ARRAY:Zh,FUNCTION:qh,LINE_DASH:Jh,NUMBER_ARRAY:$h,OBJECT:ed,POSITIVE_NUMBER:td,RATIO:id,STRING:od,Validate:ad,SeriesProperties:sd,SeriesTooltip:nd}=o.m,{Label:rd}=o.i,ld=class extends sd{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.topologyIdKey="name",this.idName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.maxStrokeWidth=void 0,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.label=new rd,this.tooltip=new nd}};f([ad(Ih,{optional:!0})],ld.prototype,"topology",2),f([ad(od,{optional:!0})],ld.prototype,"title",2),f([ad(od,{optional:!0})],ld.prototype,"legendItemName",2),f([ad(od)],ld.prototype,"idKey",2),f([ad(od)],ld.prototype,"topologyIdKey",2),f([ad(od,{optional:!0})],ld.prototype,"idName",2),f([ad(od,{optional:!0})],ld.prototype,"labelKey",2),f([ad(od,{optional:!0})],ld.prototype,"labelName",2),f([ad(od,{optional:!0})],ld.prototype,"sizeKey",2),f([ad(od,{optional:!0})],ld.prototype,"sizeName",2),f([ad(od,{optional:!0})],ld.prototype,"colorKey",2),f([ad(od,{optional:!0})],ld.prototype,"colorName",2),f([ad($h,{optional:!0})],ld.prototype,"sizeDomain",2),f([ad(Hh(Zh,Xh.restrict({minLength:1})),{optional:!0})],ld.prototype,"colorRange",2),f([ad(td,{optional:!0})],ld.prototype,"maxStrokeWidth",2),f([ad(Qh)],ld.prototype,"stroke",2),f([ad(id)],ld.prototype,"strokeOpacity",2),f([ad(td)],ld.prototype,"strokeWidth",2),f([ad(Jh)],ld.prototype,"lineDash",2),f([ad(td)],ld.prototype,"lineDashOffset",2),f([ad(qh,{optional:!0})],ld.prototype,"formatter",2),f([ad(ed)],ld.prototype,"label",2),f([ad(ed)],ld.prototype,"tooltip",2);var{getMissCount:hd,createDatumId:dd,DataModelSeries:cd,SeriesNodePickMode:ud,valueProperty:pd,Validate:yd}=o.m,{ColorScale:gd,LinearScale:md}=o.d,{Group:xd,Selection:fd,Text:vd}=o.i,{sanitizeHtml:Dd,Logger:Md}=o.s,bd=class extends cd{constructor(e){super({moduleCtx:e,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[ud.EXACT_SHAPE_MATCH,ud.NEAREST_NODE]}),this.properties=new ld,this._chartTopology=void 0,this.colorScale=new gd,this.sizeScale=new md,this.itemGroup=this.contentGroup.appendChild(new xd({name:"itemGroup"})),this.datumSelection=fd.select(this.itemGroup,(()=>this.nodeFactory())),this.labelSelection=fd.select(this.labelGroup,vd),this.highlightDatumSelection=fd.select(this.highlightGroup,(()=>this.nodeFactory())),this.contextNodeData=[],this._previousDatumMidPoint=void 0}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}get hasData(){return super.hasData&&null!=this.topology}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>{this.onLegendItemClick(e)})),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>{this.onLegendItemDoubleClick(e)})))}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}nodeFactory(){const e=new hh;return e.renderMode=2,e.lineJoin="round",e.lineCap="round",e}processData(e){return D(this,null,(function*(){var t;if(null==this.data||!this.properties.isValid())return;const{data:i,topology:o,sizeScale:a,colorScale:s}=this,{topologyIdKey:n,idKey:r,sizeKey:l,colorKey:h,labelKey:d,sizeDomain:c,colorRange:u}=this.properties,p=new Map;null==o||o.features.forEach((e=>{var t;const i=null==(t=e.properties)?void 0:t[n];null==i||!ph(e.geometry,2)||p.set(i,e)}));const{dataModel:y,processedData:g}=yield this.requestDataModel(e,i,{props:[pd(this,r,!1,{id:"idValue",includeProperty:!1}),pd(this,r,!1,{id:"featureValue",includeProperty:!1,processor:()=>e=>p.get(e)}),...null!=d?[pd(this,d,!1,{id:"labelValue"})]:[],...null!=l?[pd(this,l,!0,{id:"sizeValue"})]:[],...null!=h?[pd(this,h,!0,{id:"colorValue"})]:[]]}),m=y.resolveProcessedDataIndexById(this,"featureValue").index;if(this.topologyBounds=g.data.reduce(((e,t)=>{let{values:i}=t;const o=i[m],a=null==o?void 0:o.geometry;return null==a?e:dh(a,e)}),void 0),null!=l){const e=y.resolveProcessedDataIndexById(this,"sizeValue").index,i=null!=(t=g.domain.values[e])?t:[];a.domain=null!==c&&void 0!==c?c:i}if(null!=u&&this.isColorScaleValid()){const e=y.resolveProcessedDataIndexById(this,"colorValue").index;s.domain=g.domain.values[e],s.range=u,s.update()}null==o&&Md.warnOnce("no topology was provided for [MapLineSeries]; nothing will be rendered.")}))}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue").index,a=i.data.length,s=hd(this,i.defs.values[o].missing);return!(0===a||a===s)}getLabelDatum(e,t,i,o){if(null==t||null==i)return;const a=uh(i);if(null==a)return;const{idKey:s,idName:n,sizeKey:r,sizeName:l,colorKey:h,colorName:d,labelKey:c,labelName:u,label:p}=this.properties,y=this.getLabelText(p,{value:t,datum:e,idKey:s,idName:n,sizeKey:r,sizeName:l,colorKey:h,colorName:d,labelKey:c,labelName:u});if(null==y)return;const g=vd.getTextSize(String(y),o),m=$l(a);if(null==m)return;const[x,f]=m.point,{width:v,height:D}=g;return{point:{x:x,y:f,size:0},label:{width:v,height:D,text:y},marker:void 0,placement:void 0}}createNodeData(){return D(this,null,(function*(){var e;const{id:t,dataModel:i,processedData:o,sizeScale:a,colorScale:s,properties:n,scale:r}=this,{idKey:l,sizeKey:h,colorKey:d,labelKey:c,label:u}=n;if(null==i||null==o)return[];const p=this.isColorScaleValid(),y=i.resolveProcessedDataIndexById(this,"idValue").index,g=i.resolveProcessedDataIndexById(this,"featureValue").index,m=null!=c?i.resolveProcessedDataIndexById(this,"labelValue").index:void 0,x=null!=h?i.resolveProcessedDataIndexById(this,"sizeValue").index:void 0,f=null!=d?i.resolveProcessedDataIndexById(this,"colorValue").index:void 0,v=null!=(e=n.maxStrokeWidth)?e:n.strokeWidth;a.range=[Math.min(n.strokeWidth,v),v];const D=u.getFont(),M=new Map;o.data.forEach((e=>{let{values:t}=e;var i;const o=t[y],a=null==(i=t[g])?void 0:i.geometry,s=null!=a&&null!=r?yh(a,r):void 0;null!=o&&null!=s&&M.set(o,s)}));const b=[],S=[],N=[];o.data.forEach((e=>{let{datum:t,values:i}=e;const o=i[y],n=null!=f?i[f]:void 0,r=null!=x?i[x]:void 0,h=null!=m?i[m]:void 0,d=p&&null!=n?s.convert(n):void 0,c=null!=r?a.convert(r,{clampMode:"clamped"}):void 0,u=M.get(o);null==u&&N.push(o);const g=this.getLabelDatum(t,h,u,D);null!=g&&S.push(g),b.push({series:this,itemId:l,datum:t,stroke:d,strokeWidth:c,idValue:o,labelValue:h,colorValue:n,sizeValue:r,projectedGeometry:u})}));if(N.length>10){const e=N.length-10;N.length=10,N.push("(+".concat(e," more)"))}return N.length>0&&Md.warnOnce("some data items do not have matches in the provided topology",N),[{itemId:t,nodeData:b,labelData:S}]}))}updateSelections(){return D(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(){return D(this,null,(function*(){var e,t,i;const{datumSelection:o,labelSelection:a,highlightDatumSelection:s}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let n=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight();null!=n&&(n.series!==this||null==n.datum)&&(n=void 0);const r=null!=(i=null==(t=this.contextNodeData[0])?void 0:t.nodeData)?i:[];this.datumSelection=yield this.updateDatumSelection({nodeData:r,datumSelection:o}),yield this.updateDatumNodes({datumSelection:o,isHighlight:!1}),this.labelSelection=yield this.updateLabelSelection({labelSelection:a}),yield this.updateLabelNodes({labelSelection:a}),this.highlightDatumSelection=yield this.updateDatumSelection({nodeData:null!=n?[n]:[],datumSelection:s}),yield this.updateDatumNodes({datumSelection:s,isHighlight:!0})}))}updateDatumSelection(e){return D(this,null,(function*(){return e.datumSelection.update(e.nodeData,void 0,(e=>dd(e.idValue)))}))}updateDatumNodes(e){return D(this,null,(function*(){const{id:t,properties:i,ctx:{callbackCache:o}}=this,{datumSelection:a,isHighlight:s}=e,{idKey:n,labelKey:r,sizeKey:l,colorKey:h,stroke:d,strokeOpacity:c,lineDash:u,lineDashOffset:p,formatter:y}=i,g=s?i.highlightStyle.item:void 0,m=this.getStrokeWidth(i.strokeWidth);a.each(((e,i)=>{var a,x,f,v,D,M,b,S,N,I,k,A;const{projectedGeometry:T}=i;if(null==T)return e.visible=!1,void(e.projectedGeometry=void 0);let L;if(null!=y){const e={seriesId:t,datum:i.datum,itemId:i.itemId,idKey:n,labelKey:r,sizeKey:l,colorKey:h,strokeOpacity:c,stroke:d,strokeWidth:m,lineDash:u,lineDashOffset:p,highlighted:s};L=o.call(y,e)}e.visible=!0,e.projectedGeometry=T,e.stroke=null!=(f=null!=(x=null!=(a=null==g?void 0:g.stroke)?a:null==L?void 0:L.stroke)?x:i.stroke)?f:d,e.strokeWidth=Math.max(null!=(v=null==g?void 0:g.strokeWidth)?v:0,null!=(M=null!=(D=null==L?void 0:L.strokeWidth)?D:i.strokeWidth)?M:m),e.strokeOpacity=null!=(S=null!=(b=null==g?void 0:g.strokeOpacity)?b:null==L?void 0:L.strokeOpacity)?S:c,e.lineDash=null!=(I=null!=(N=null==g?void 0:g.lineDash)?N:null==L?void 0:L.lineDash)?I:u,e.lineDashOffset=null!=(A=null!=(k=null==g?void 0:g.lineDashOffset)?k:null==L?void 0:L.lineDashOffset)?A:p}))}))}updateLabelSelection(e){return D(this,null,(function*(){var t,i;const o=null!=(i=this.isLabelEnabled()?null==(t=this.chart)?void 0:t.placeLabels().get(this):void 0)?i:[];return e.labelSelection.update(o)}))}updateLabelNodes(e){return D(this,null,(function*(){const{labelSelection:t}=e,{color:i,fontStyle:o,fontWeight:a,fontSize:s,fontFamily:n}=this.properties.label;t.each(((e,t)=>{let{x:r,y:l,width:h,height:d,text:c}=t;e.visible=!0,e.x=r+h/2,e.y=l+d/2,e.text=c,e.fill=i,e.fontStyle=o,e.fontWeight=a,e.fontSize=s,e.fontFamily=n,e.textAlign="center",e.textBaseline="middle"}))}))}onLegendItemClick(e){const{legendItemName:t}=this.properties,{enabled:i,itemId:o,series:a}=e,s=null!=t&&t===e.legendItemName;(a.id===this.id||s)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,{legendItemName:s}=this.properties,n=null!=s&&s===e.legendItemName;o.id===this.id||n||t&&1===a?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){return this.contextNodeData.flatMap((e=>{let{labelData:t}=e;return t}))}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(e){let t,{x:i,y:o}=e,a=1/0;return this.datumSelection.each(((e,s)=>{const n=e.distanceToPoint(i,o);n<a&&(a=n,t=s)})),null!=t?{datum:t,distance:a}:void 0}datumMidPoint(e){var t;const{_previousDatumMidPoint:i}=this;if((null==i?void 0:i.datum)===e)return i.point;const o=e.projectedGeometry,a=null!=o?uh(o):void 0,s=null!=a?null==(t=$l(a))?void 0:t.point:void 0,n=null!=s?{x:s[0],y:s[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:n},n}getLegendData(e){var t,i,o,a;const{processedData:s,dataModel:n}=this;if(null==s||null==n)return[];const{title:r,legendItemName:l,idKey:h,idName:d,colorKey:c,colorName:u,colorRange:p,stroke:y,strokeWidth:g,strokeOpacity:m,lineDash:x,visible:f}=this.properties;if("gradient"===e&&null!=c&&null!=p){const e=s.domain.values[n.resolveProcessedDataIndexById(this,"colorValue").index];return[{legendType:"gradient",enabled:f,seriesId:this.id,colorName:u,colorRange:p,colorDomain:e}]}return"category"===e?[{legendType:"category",id:this.id,itemId:null!=(i=null!=(t=null!==l&&void 0!==l?l:r)?t:d)?i:h,seriesId:this.id,enabled:f,label:{text:null!=(a=null!=(o=null!==l&&void 0!==l?l:r)?o:d)?a:h},marker:{fill:y,fillOpacity:m,stroke:void 0,strokeWidth:0,strokeOpacity:0,enabled:!1},line:{stroke:y,strokeOpacity:m,strokeWidth:g,lineDash:x},legendItemName:l}]:[]}getTooltipHtml(e){var t,i,o,a,s;const{id:n,processedData:r,properties:l,ctx:{callbackCache:h}}=this;if(!r||!l.isValid())return"";const{legendItemName:d,idKey:c,idName:u,colorKey:p,colorName:y,sizeKey:m,sizeName:x,labelKey:f,labelName:v,formatter:D,tooltip:M}=l,{datum:b,stroke:S,idValue:N,colorValue:I,sizeValue:k,labelValue:A}=e,T=null!=(i=Dd(null!=(t=l.title)?t:d))?i:"",L=[];L.push(Dd((null!=u?"".concat(u,": "):"")+N)),null!=I&&L.push(Dd((null!==y&&void 0!==y?y:p)+": "+I)),null!=k&&L.push(Dd((null!==x&&void 0!==x?x:m)+": "+k)),null!=A&&f!==c&&L.push(Dd((null!==v&&void 0!==v?v:f)+": "+A));const O=L.join("<br>");let E;D&&(E=h.call(D,{seriesId:n,datum:b,idKey:c,stroke:S,strokeWidth:this.getStrokeWidth(null!=(o=e.strokeWidth)?o:l.strokeWidth),highlighted:!1}));const R=null!=(s=null!=(a=null==E?void 0:E.stroke)?a:S)?s:l.stroke;return M.toTooltipHtml({title:T,content:O,backgroundColor:R},g({seriesId:n,datum:b,idKey:c,title:T,color:R},this.getModuleTooltipParams()))}};bd.className="MapLineSeries",bd.type="map-line",f([yd(Ih,{optional:!0,property:"topology"})],bd.prototype,"_chartTopology",2);var{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Sd,EXTENDS_SERIES_DEFAULTS:Nd,DEFAULT_FONT_FAMILY:Id,DEFAULT_LABEL_COLOUR:kd,singleSeriesPaletteFactory:Ad}=o.a,Td={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-line",instanceConstructor:bd,themeTemplate:{series:{__extends__:Nd,strokeWidth:1,maxStrokeWidth:3,lineDash:[0],lineDashOffset:0,label:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Id,color:kd}},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}},paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:o,themeTemplateParameters:a}=e,{fill:s}=Ad(e),{properties:n}=a,r=n.get(Sd),{fills:l}=t(i);return{colorRange:o?[l[0],l[1]]:r,stroke:s}}};function Ld(e,t,i){const o=oh(e[0],void 0);if(null==o)return;const a=(o.lon0+o.lon1)/2,s=(o.lat0+o.lat1)/2,n=Math.abs(o.lon1-o.lon0),r=Math.abs(o.lat1-o.lat0),l=function(e){if(0===e.length)return;let t=0,i=0,o=0,[a,s]=e[e.length-1];for(const[n,r]of e){const e=a*r-n*s;o+=e,t+=(a+n)*e,i+=(s+r)*e,a=n,s=r}return o*=3,[t/o,i/o]}(e[0]),[h,d]=l,c=-ah(e,h,d);let u;const p=(e,t)=>e-.5*Math.max(t-c,0),y=(t,o,a)=>{const{distance:s,maxDistance:n}=i(e,t,o,a),r=Math.hypot(h-t,d-o),l=Math.min(Math.max(h,t-a/2),t+a/2),c=Math.min(Math.max(d,o-a/2),o+a/2),u=Math.hypot(h-l,d-c);return{distance:s,maxDistance:n,value:p(s,r),maxValue:p(n,u),x:t,y:o,stride:a}},g=(e,t,i,o)=>{const a=y(t,i,o);a.maxDistance>=0&&e.push(a)},m=Math.min(n,r)/2;let x={value:y(a,s,m),next:null};for(;null!=x;){const e=x.value,{distance:i,value:o,maxValue:a,x:s,y:n,stride:r}=e;if(x=x.next,i>0&&(null==u||o>u.value)&&(u=e),null!=u&&a-u.value<=t)continue;const l=r/2,h=[];g(h,s-l,n-l,l),g(h,s+l,n-l,l),g(h,s-l,n+l,l),g(h,s+l,n+l,l),h.sort(Od),x=ih(x,h,Od)}if(null==u)return;const{distance:f,x:v,y:D}=u;return{x:v,y:D,distance:f}}var Od=(e,t)=>t.maxValue-e.maxValue;function Ed(e,t){const i=Ld(e,t,((e,t,i,o)=>{const a=-ah(e,t,i);return{distance:a,maxDistance:a+o*Math.SQRT2}}));if(null==i)return;const{x:o,y:a}=i;return[o,a]}function Rd(e,t){var i,o;let a;switch(e.type){case"GeometryCollection":return e.geometries.flatMap((e=>Rd(e,t)));case"MultiPoint":return e.coordinates;case"Point":return[e.coordinates];case"MultiPolygon":{const i=ch(e);a=null!=i?Ed(i,t):void 0;break}case"Polygon":{const i=e.coordinates;a=null!=i?Ed(i,t):void 0;break}case"MultiLineString":{const t=uh(e);a=null!=t?null==(i=$l(t))?void 0:i.point:void 0;break}case"LineString":a=null==(o=$l(e.coordinates))?void 0:o.point;break}return null!=a?[a]:[]}var{AND:Cd,ARRAY:wd,COLOR_STRING:Pd,COLOR_STRING_ARRAY:_d,FUNCTION:zd,NUMBER_ARRAY:Kd,OBJECT:Vd,POSITIVE_NUMBER:jd,RATIO:Fd,STRING:Bd,MARKER_SHAPE:Ud,Validate:Wd,SeriesProperties:Gd,SeriesTooltip:Yd}=o.m,{Label:Hd,Circle:Xd}=o.i,{Logger:Qd}=o.s,Zd=class extends Hd{constructor(){super(...arguments),this.placement="bottom"}};f([Wd(Bd)],Zd.prototype,"placement",2);var qd=class extends Gd{constructor(){super(...arguments),this.topology=void 0,this.idKey=void 0,this.topologyIdKey="name",this.idName=void 0,this.latitudeKey=void 0,this.latitudeName=void 0,this.longitudeKey=void 0,this.longitudeName=void 0,this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.shape=Xd,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.label=new Zd,this.tooltip=new Yd}isValid(){const e=super.isValid(),t=null!=this.idKey,i=null!=this.latitudeKey&&null!=this.longitudeKey;return t||i?e:(Qd.warnOnce("Either both [topology] and [idKey] or both [latitudeKey] and [longitudeKey] must be set to render a map marker series."),!1)}};f([Wd(Ih,{optional:!0})],qd.prototype,"topology",2),f([Wd(Bd,{optional:!0})],qd.prototype,"title",2),f([Wd(Bd,{optional:!0})],qd.prototype,"legendItemName",2),f([Wd(Bd,{optional:!0})],qd.prototype,"idKey",2),f([Wd(Bd)],qd.prototype,"topologyIdKey",2),f([Wd(Bd,{optional:!0})],qd.prototype,"idName",2),f([Wd(Bd,{optional:!0})],qd.prototype,"latitudeKey",2),f([Wd(Bd,{optional:!0})],qd.prototype,"latitudeName",2),f([Wd(Bd,{optional:!0})],qd.prototype,"longitudeKey",2),f([Wd(Bd,{optional:!0})],qd.prototype,"longitudeName",2),f([Wd(Bd,{optional:!0})],qd.prototype,"labelKey",2),f([Wd(Bd,{optional:!0})],qd.prototype,"labelName",2),f([Wd(Bd,{optional:!0})],qd.prototype,"sizeKey",2),f([Wd(Bd,{optional:!0})],qd.prototype,"sizeName",2),f([Wd(Bd,{optional:!0})],qd.prototype,"colorKey",2),f([Wd(Bd,{optional:!0})],qd.prototype,"colorName",2),f([Wd(Cd(_d,wd.restrict({minLength:1})),{optional:!0})],qd.prototype,"colorRange",2),f([Wd(Ud)],qd.prototype,"shape",2),f([Wd(jd)],qd.prototype,"size",2),f([Wd(jd,{optional:!0})],qd.prototype,"maxSize",2),f([Wd(Kd,{optional:!0})],qd.prototype,"sizeDomain",2),f([Wd(Pd,{optional:!0})],qd.prototype,"fill",2),f([Wd(Fd)],qd.prototype,"fillOpacity",2),f([Wd(Pd,{optional:!0})],qd.prototype,"stroke",2),f([Wd(jd)],qd.prototype,"strokeWidth",2),f([Wd(Fd)],qd.prototype,"strokeOpacity",2),f([Wd(zd,{optional:!0})],qd.prototype,"formatter",2),f([Wd(Vd)],qd.prototype,"label",2),f([Wd(Vd)],qd.prototype,"tooltip",2);var{Validate:Jd,fromToMotion:$d,StateMachine:ec,getMissCount:tc,createDatumId:ic,DataModelSeries:oc,SeriesNodePickMode:ac,Layers:sc,valueProperty:nc}=o.m,{ColorScale:rc,LinearScale:lc}=o.d,{Group:hc,Selection:dc,Text:cc,getMarker:uc}=o.i,{sanitizeHtml:pc,Logger:yc}=o.s,gc=class extends oc{constructor(e){super({moduleCtx:e,contentGroupVirtual:!0,useLabelLayer:!0,pickModes:[ac.EXACT_SHAPE_MATCH,ac.NEAREST_NODE]}),this.properties=new qd,this._chartTopology=void 0,this.colorScale=new rc,this.sizeScale=new lc,this.markerGroup=this.contentGroup.appendChild(new hc({name:"markerGroup",layer:!0,isVirtual:!1,zIndex:sc.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker")})),this.labelSelection=dc.select(this.labelGroup,cc,!1),this.markerSelection=dc.select(this.markerGroup,(()=>this.markerFactory()),!1),this.highlightMarkerSelection=dc.select(this.highlightGroup,(()=>this.markerFactory())),this.contextNodeData=[],this.animationState=new ec("empty",{empty:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",resize:()=>this.resetAllAnimation(),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:()=>this.animateMarkers()},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:()=>this.resetAllAnimation()},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}get hasData(){const e=null!=this.properties.latitudeKey&&null!=this.properties.longitudeKey;return super.hasData&&(null!=this.topology||e)}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>{this.onLegendItemClick(e)})),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>{this.onLegendItemDoubleClick(e)})))}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}markerFactory(){const{shape:e}=this.properties;return new(uc(e))}processData(e){return D(this,null,(function*(){var t;if(null==this.data||!this.properties.isValid())return;const{data:i,topology:o,sizeScale:a,colorScale:s}=this,{topologyIdKey:n,idKey:r,latitudeKey:l,longitudeKey:h,sizeKey:d,colorKey:c,labelKey:u,sizeDomain:p,colorRange:y}=this.properties,g=new Map;null==o||o.features.forEach((e=>{var t;const i=null==(t=e.properties)?void 0:t[n];null!=i&&g.set(i,e)}));const m=null!=l&&null!=h,{dataModel:x,processedData:f}=yield this.requestDataModel(e,i,{props:[...null!=r?[nc(this,r,!1,{id:"idValue",includeProperty:!1}),nc(this,r,!1,{id:"featureValue",includeProperty:!1,processor:()=>e=>g.get(e)})]:[],...m?[nc(this,l,!1,{id:"latValue"}),nc(this,h,!1,{id:"lonValue"})]:[],...u?[nc(this,u,!1,{id:"labelValue"})]:[],...d?[nc(this,d,!0,{id:"sizeValue"})]:[],...c?[nc(this,c,!0,{id:"colorValue"})]:[]]}),v=null!=r?x.resolveProcessedDataIndexById(this,"featureValue").index:void 0,D=m?x.resolveProcessedDataIndexById(this,"latValue").index:void 0,M=m?x.resolveProcessedDataIndexById(this,"lonValue").index:void 0;if(this.topologyBounds=f.data.reduce(((e,t)=>{let{values:i}=t;const o=null!=v?i[v]:void 0,a=null==o?void 0:o.geometry;if(null!=a&&(e=dh(a,e)),null!=D&&null!=M){const t=i[M],o=i[D];e=th(e,t,o,t,o)}return e}),void 0),null!=d){const e=x.resolveProcessedDataIndexById(this,"sizeValue").index,i=null!=(t=f.domain.values[e])?t:[];a.domain=null!==p&&void 0!==p?p:i}if(null!=y&&this.isColorScaleValid()){const e=x.resolveProcessedDataIndexById(this,"colorValue").index;s.domain=f.domain.values[e],s.range=y,s.update()}this.animationState.transition("updateData")}))}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue").index,a=i.data.length,s=tc(this,i.defs.values[o].missing);return!(0===a||a===s)}getLabelDatum(e,t,i,o,a,s){if(null==t)return;const{idKey:n,idName:r,latitudeKey:l,latitudeName:h,longitudeKey:d,longitudeName:c,sizeKey:u,sizeName:p,colorKey:y,colorName:g,labelKey:m,labelName:x,label:f}=this.properties,{placement:v}=f,D=this.getLabelText(f,{value:t,datum:e,idKey:n,idName:r,latitudeKey:l,latitudeName:h,longitudeKey:d,longitudeName:c,sizeKey:u,sizeName:p,colorKey:y,colorName:g,labelKey:m,labelName:x});if(null==D)return;const{width:M,height:b}=cc.getTextSize(String(D),s);return{point:{x:i,y:o,size:a},label:{width:M,height:b,text:D},marker:uc(this.properties.shape),placement:v}}createNodeData(){return D(this,null,(function*(){var e;const{id:t,dataModel:i,processedData:o,colorScale:a,sizeScale:s,properties:n,scale:r}=this,{idKey:l,latitudeKey:h,longitudeKey:d,sizeKey:c,colorKey:u,labelKey:p,label:y}=n;if(null==i||null==o||null==r)return[];const g=this.isColorScaleValid(),m=null!=h&&null!=d,x=null!=l?i.resolveProcessedDataIndexById(this,"idValue").index:void 0,f=null!=l?i.resolveProcessedDataIndexById(this,"featureValue").index:void 0,v=m?i.resolveProcessedDataIndexById(this,"latValue").index:void 0,D=m?i.resolveProcessedDataIndexById(this,"lonValue").index:void 0,M=null!=p?i.resolveProcessedDataIndexById(this,"labelValue").index:void 0,b=null!=c?i.resolveProcessedDataIndexById(this,"sizeValue").index:void 0,S=null!=u?i.resolveProcessedDataIndexById(this,"colorValue").index:void 0,N=null!=(e=n.maxSize)?e:n.size;s.range=[Math.min(n.size,N),N];const I=y.getFont();let k;null!=x&&null!=f&&(k=new Map,o.data.forEach((e=>{let{values:t}=e;var i;const o=t[x],a=null==(i=t[f])?void 0:i.geometry,s=null!=a&&null!=r?yh(a,r):void 0;null!=o&&null!=s&&k.set(o,s)})));const A=[],T=[],L=[];o.data.forEach((e=>{let{datum:t,values:i}=e;const o=null!=x?i[x]:void 0,l=null!=D?i[D]:void 0,d=null!=v?i[v]:void 0,c=null!=S?i[S]:void 0,u=null!=b?i[b]:void 0,p=null!=M?i[M]:void 0,y=g&&null!=c?a.convert(c):void 0,m=null!=u?s.convert(u,{clampMode:"clamped"}):n.size,f=null!=o?null==k?void 0:k.get(o):void 0;if(null!=o&&null==yh&&L.push(o),null!=l&&null!=d){const[e,i]=r.convert([l,d]),a=this.getLabelDatum(t,p,e,i,m,I);a&&T.push(a),A.push({series:this,itemId:h,datum:t,index:-1,fill:y,idValue:o,lonValue:l,latValue:d,labelValue:p,sizeValue:u,colorValue:c,point:{x:e,y:i,size:m},midPoint:{x:e,y:i}})}else null!=f&&Rd(f,1).forEach(((e,i)=>{let[a,s]=e;const n=this.getLabelDatum(t,p,a,s,m,I);n&&T.push(n),A.push({series:this,itemId:h,datum:t,index:i,fill:y,idValue:o,lonValue:l,latValue:d,labelValue:p,sizeValue:u,colorValue:c,point:{x:a,y:s,size:m},midPoint:{x:a,y:s}})}))}));if(L.length>10){const e=L.length-10;L.length=10,L.push("(+".concat(e," more)"))}return L.length>0&&yc.warnOnce("some data items do not have matches in the provided topology",L),[{itemId:t,nodeData:A,labelData:T}]}))}updateSelections(){return D(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(e){return D(this,arguments,(function(e){var t=this;let{seriesRect:i}=e;return function*(){var e,o,a;const{labelSelection:s,markerSelection:n,highlightMarkerSelection:r}=t;yield t.updateSelections(),t.contentGroup.visible=t.visible,t.contentGroup.opacity=t.getOpacity();let l=null==(e=t.ctx.highlightManager)?void 0:e.getActiveHighlight();null!=l&&(l.series!==t||null==l.datum)&&(l=void 0);const h=null!=(a=null==(o=t.contextNodeData[0])?void 0:o.nodeData)?a:[];t.labelSelection=yield t.updateLabelSelection({labelSelection:s}),yield t.updateLabelNodes({labelSelection:s}),t.markerSelection=yield t.updateMarkerSelection({markerData:h,markerSelection:n}),yield t.updateMarkerNodes({markerSelection:n,isHighlight:!1,highlightedDatum:l}),t.highlightMarkerSelection=yield t.updateMarkerSelection({markerData:null!=l?[l]:[],markerSelection:r}),yield t.updateMarkerNodes({markerSelection:r,isHighlight:!0,highlightedDatum:l}),t.checkResize(i)&&t.animationState.transition("resize"),t.animationState.transition("update")}()}))}updateLabelSelection(e){return D(this,null,(function*(){var t,i;const o=null!=(i=this.isLabelEnabled()?null==(t=this.chart)?void 0:t.placeLabels().get(this):void 0)?i:[];return e.labelSelection.update(o)}))}updateLabelNodes(e){return D(this,null,(function*(){const{labelSelection:t}=e,{color:i,fontStyle:o,fontWeight:a,fontSize:s,fontFamily:n}=this.properties.label;t.each(((e,t)=>{let{x:r,y:l,width:h,height:d,text:c}=t;e.visible=!0,e.x=r+h/2,e.y=l+d/2,e.text=c,e.fill=i,e.fontStyle=o,e.fontWeight=a,e.fontSize=s,e.fontFamily=n,e.textAlign="center",e.textBaseline="middle"}))}))}updateMarkerSelection(e){return D(this,null,(function*(){const{markerData:t,markerSelection:i}=e;return i.update(t,void 0,(e=>ic([e.index,e.idValue,e.lonValue,e.latValue])))}))}updateMarkerNodes(e){return D(this,null,(function*(){const{id:t,properties:i,ctx:{callbackCache:o}}=this,{markerSelection:a,isHighlight:s,highlightedDatum:n}=e,{idKey:r,latitudeKey:l,longitudeKey:h,labelKey:d,sizeKey:c,colorKey:u,fill:p,fillOpacity:y,stroke:g,strokeOpacity:m,formatter:x}=i,f=s?i.highlightStyle.item:void 0,v=this.getStrokeWidth(i.strokeWidth);a.each(((e,i)=>{var a,D,M,b,S,N,I,k,A,T,L;const{datum:O,point:E}=i;let R;if(null!=x){const e={seriesId:t,datum:i.datum,itemId:i.itemId,size:E.size,idKey:r,latitudeKey:l,longitudeKey:h,labelKey:d,sizeKey:c,colorKey:u,fill:p,fillOpacity:y,stroke:g,strokeWidth:v,strokeOpacity:m,highlighted:s};R=o.call(x,e)}e.size=E.size,e.fill=null!=(M=null!=(D=null!=(a=null==f?void 0:f.fill)?a:null==R?void 0:R.fill)?D:i.fill)?M:p,e.fillOpacity=null!=(S=null!=(b=null==f?void 0:f.fillOpacity)?b:null==R?void 0:R.fillOpacity)?S:y,e.stroke=null!=(I=null!=(N=null==f?void 0:f.stroke)?N:null==R?void 0:R.stroke)?I:g,e.strokeWidth=null!=(A=null!=(k=null==f?void 0:f.strokeWidth)?k:null==R?void 0:R.strokeWidth)?A:v,e.strokeOpacity=null!=(L=null!=(T=null==f?void 0:f.strokeOpacity)?T:null==R?void 0:R.strokeOpacity)?L:m,e.translationX=E.x,e.translationY=E.y,e.zIndex=s||null==n||O!==n.datum?0:1}))}))}onLegendItemClick(e){const{legendItemName:t}=this.properties,{enabled:i,itemId:o,series:a}=e,s=null!=t&&t===e.legendItemName;(a.id===this.id||s)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,{legendItemName:s}=this.properties,n=null!=s&&s===e.legendItemName;o.id===this.id||n||t&&1===a?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isProcessedDataAnimatable(){return!0}resetAnimation(e){"initial"===e?this.animationState.transition("reset"):"ready"===e&&this.animationState.transition("skip")}resetAllAnimation(){this.ctx.animationManager.stopByAnimationGroupId(this.id),this.ctx.animationManager.skipCurrentBatch(),this.labelSelection.cleanup(),this.markerSelection.cleanup(),this.highlightMarkerSelection.cleanup()}animateMarkers(){const{animationManager:e}=this.ctx,t={fromFn:(e,t,i)=>"removed"===i?{scalingX:1,scalingY:1}:null==e.previousDatum?{scalingX:0,scalingY:0}:{scalingX:e.scalingX,scalingY:e.scalingY},toFn:(e,t,i)=>"removed"===i?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}};$d(this.id,"markers",e,[this.markerSelection,this.highlightMarkerSelection],t)}getLabelData(){return this.contextNodeData.flatMap((e=>{let{labelData:t}=e;return t}))}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(e){const{x:t,y:i}=this.rootGroup.transformPoint(e.x,e.y);let o,a=1/0;return this.contextNodeData[0].nodeData.forEach((e=>{const{x:s,y:n,size:r}=e.point,l=Math.max(Math.abs(s-t)-r,0),h=Math.max(Math.abs(n-i)-r,0),d=l*l+h*h;d<a&&(a=d,o=e)})),null!=o?{datum:o,distance:Math.sqrt(a)}:void 0}getLegendData(e){var t,i,o,a,s,n;const{processedData:r,dataModel:l}=this;if(null==r||null==l)return[];const{title:h,legendItemName:d,idName:c,idKey:u,colorKey:p,colorName:y,colorRange:g,visible:m,shape:x,fill:f,stroke:v,fillOpacity:D,strokeOpacity:M,strokeWidth:b}=this.properties;if("gradient"===e&&null!=p&&null!=g){const e=r.domain.values[l.resolveProcessedDataIndexById(this,"colorValue").index];return[{legendType:"gradient",enabled:m,seriesId:this.id,colorName:y,colorRange:g,colorDomain:e}]}return"category"===e?[{legendType:"category",id:this.id,itemId:null!=(o=null!=(i=null!=(t=null!==d&&void 0!==d?d:h)?t:c)?i:u)?o:this.id,seriesId:this.id,enabled:m,label:{text:null!=(n=null!=(s=null!=(a=null!==d&&void 0!==d?d:h)?a:c)?s:u)?n:this.id},marker:{shape:x,fill:f,fillOpacity:D,stroke:v,strokeWidth:b,strokeOpacity:M},legendItemName:d}]:[]}getTooltipHtml(e){var t,i,o,a;const{id:s,processedData:n,ctx:{callbackCache:r},properties:l}=this;if(!n||!this.properties.isValid())return"";const{legendItemName:h,idKey:d,idName:c,latitudeKey:u,longitudeKey:p,sizeKey:y,sizeName:m,colorKey:x,colorName:f,labelKey:v,labelName:D,formatter:M,tooltip:b}=l,{datum:S,fill:N,idValue:I,latValue:k,lonValue:A,sizeValue:T,colorValue:L,labelValue:O}=e,E=null!=(i=pc(null!=(t=l.title)?t:h))?i:"",R=[];null!=I&&R.push(pc((null!=c?"".concat(c,": "):"")+I)),null!=L&&R.push(pc((null!==f&&void 0!==f?f:x)+": "+L)),null!=T&&R.push(pc((null!==m&&void 0!==m?m:y)+": "+T)),null!=O&&(null==d||d!==v)&&R.push(pc((null!==D&&void 0!==D?D:v)+": "+O)),null!=k&&null!=A&&R.push(pc("".concat(Math.abs(k).toFixed(4),"\xb0 ").concat(k>=0?"N":"S",", ").concat(Math.abs(A).toFixed(4),"\xb0 ").concat(k>=0?"W":"E")));const C=R.join("<br>");let w;M&&(w=r.call(M,{seriesId:s,datum:S,latitudeKey:u,longitudeKey:p,fill:N,highlighted:!1}));const P=null!=(a=null!=(o=null==w?void 0:w.fill)?o:N)?a:l.fill;return b.toTooltipHtml({title:E,content:C,backgroundColor:P},g({seriesId:s,datum:S,idKey:d,latitudeKey:u,longitudeKey:p,title:E,color:P},this.getModuleTooltipParams()))}};gc.className="MapMarkerSeries",gc.type="map-marker",f([Jd(Ih,{optional:!0,property:"topology"})],gc.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:mc,DEFAULT_LABEL_COLOUR:xc,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:fc,singleSeriesPaletteFactory:vc}=o.a,Dc={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-marker",instanceConstructor:gc,themeTemplate:{series:{__extends__:mc,maxSize:30,fillOpacity:.5,label:{color:xc}},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}},paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:o,themeTemplateParameters:a}=e,{fill:s,stroke:n}=vc(e),{properties:r}=a,l=r.get(fc),{fills:h}=t(i);return{fill:s,stroke:n,colorRange:o?[h[0],h[1]]:l}}},{COLOR_STRING:Mc,LINE_DASH:bc,OBJECT:Sc,POSITIVE_NUMBER:Nc,RATIO:Ic,Validate:kc,SeriesProperties:Ac,SeriesTooltip:Tc}=o.m,Lc=class extends Ac{constructor(){super(...arguments),this.topology=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.tooltip=new Tc}};f([kc(Ih,{optional:!0})],Lc.prototype,"topology",2),f([kc(Mc)],Lc.prototype,"fill",2),f([kc(Ic)],Lc.prototype,"fillOpacity",2),f([kc(Mc)],Lc.prototype,"stroke",2),f([kc(Ic)],Lc.prototype,"strokeOpacity",2),f([kc(Nc)],Lc.prototype,"strokeWidth",2),f([kc(bc)],Lc.prototype,"lineDash",2),f([kc(Nc)],Lc.prototype,"lineDashOffset",2),f([kc(Sc)],Lc.prototype,"tooltip",2);var{createDatumId:Oc,Series:Ec,SeriesNodePickMode:Rc,Validate:Cc}=o.m,{Selection:wc,Group:Pc,PointerEvents:_c}=o.i,{Logger:zc}=o.s,Kc=class extends Ec{constructor(e){super({moduleCtx:e,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[Rc.EXACT_SHAPE_MATCH]}),this.properties=new Lc,this._chartTopology=void 0,this.itemGroup=this.contentGroup.appendChild(new Pc({name:"itemGroup"})),this.datumSelection=wc.select(this.itemGroup,(()=>this.nodeFactory())),this.contextNodeData=[]}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}setOptionsData(){}setChartData(){}get hasData(){return!1}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}nodeFactory(){const e=new hh;return e.renderMode=1,e.lineJoin="round",e.pointerEvents=_c.None,e}processData(){return D(this,null,(function*(){const{topology:e}=this;this.topologyBounds=null==e?void 0:e.features.reduce(((e,t)=>{const i=t.geometry;return null==i?e:dh(i,e)}),void 0),null==e&&zc.warnOnce("no topology was provided for [MapShapeBackgroundSeries]; nothing will be rendered.")}))}createNodeData(){return D(this,null,(function*(){const{id:e,topology:t,scale:i}=this;if(null==t)return[];const o=[];return t.features.forEach(((e,t)=>{const{geometry:a}=e,s=null!=a&&null!=i?yh(a,i):void 0;null!=s&&o.push({series:this,itemId:t,datum:e,index:t,projectedGeometry:s})})),[{itemId:e,nodeData:o,labelData:[]}]}))}updateSelections(){return D(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(){return D(this,null,(function*(){const{datumSelection:e}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible;const{nodeData:t}=this.contextNodeData[0];this.datumSelection=yield this.updateDatumSelection({nodeData:t,datumSelection:e}),yield this.updateDatumNodes({datumSelection:e})}))}updateDatumSelection(e){return D(this,null,(function*(){return e.datumSelection.update(e.nodeData,void 0,(e=>Oc(e.index)))}))}updateDatumNodes(e){return D(this,null,(function*(){const{properties:t}=this,{datumSelection:i}=e,{fill:o,fillOpacity:a,stroke:s,strokeOpacity:n,lineDash:r,lineDashOffset:l}=t,h=this.getStrokeWidth(t.strokeWidth);i.each(((e,t)=>{const{projectedGeometry:i}=t;if(null==i)return e.visible=!1,void(e.projectedGeometry=void 0);e.visible=!0,e.projectedGeometry=i,e.fill=o,e.fillOpacity=a,e.stroke=s,e.strokeWidth=h,e.strokeOpacity=n,e.lineDash=r,e.lineDashOffset=l}))}))}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(){return[]}getTooltipHtml(){return""}};Kc.className="MapShapeBackgroundSeries",Kc.type="map-shape-background",f([Cc(Ih,{optional:!0,property:"topology"})],Kc.prototype,"_chartTopology",2);var{DEFAULT_BACKGROUND_COLOUR:Vc,DEFAULT_HIERARCHY_FILLS:jc}=o.a,Fc={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape-background",instanceConstructor:Kc,themeTemplate:{series:{stroke:Vc,strokeWidth:1},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}},paletteFactory:e=>{let{themeTemplateParameters:t}=e;var i;const{properties:o}=t;return{fill:null==(i=o.get(jc))?void 0:i[1]}}};function Bc(e,t){let{aspectRatio:i,precision:o}=t;const a=Ld(e,o,((e,t,o,a)=>{const s=function(e,t,i,o){let a=!1,s=1/0;for(const n of e){let e=n[n.length-1],[r,l]=e;for(const h of n){const[n,d]=h;d>i!=l>i&&t<(r-n)*(i-d)/(l-d)+n&&(a=!a);const c=Uc(e,h,t,i,o);s=Math.min(s,c),e=h,r=n,l=d}}return(a?1:-1)*s}(e,t,o,i),n=s+2*a*i;return{distance:s*Math.SQRT2,maxDistance:n*Math.SQRT2}}));if(null==a)return;const{x:s,y:n,distance:r}=a;return{x:s,y:n,maxWidth:r/Math.SQRT2}}function Uc(e,t,i,o,a){const[s,n]=e,[r,l]=t,h=1/a,d=r-s,c=l-n,[u,p]=n<=l?e:t,[y,g]=s<=r?e:t,[m,x]=n<=l?t:e,[f,v]=s<=r?t:e;let D=1/0;if(0!==d){const e=c/d;for(let t=0;t<=1;t+=1){const a=0===t?h:-h,r=(e*s-n-a*i+o)/(e-a);if(r>=y&&r<=f){const e=2*Math.abs(i-r);D=Math.min(D,e)}}}else for(let k=0;k<=1;k+=1){const e=(0===k?h:-h)*(s-i)+o;if(e>=p&&e<=x){const t=2*Math.abs(o-e)*a;D=Math.min(D,t)}}const M=a,b=Math.abs((u-i)/(p-o)),S=Math.abs((m-i)/(x-o));if(x<o&&S<M){const e=2*Math.abs(o-x)*a;D=Math.min(D,e)}else if(p>o&&b<M){const e=2*Math.abs(o-p)*a;D=Math.min(D,e)}const N=Math.abs((g-o)/(y-i)),I=Math.abs((v-o)/(f-i));if(f<i&&I<h){const e=2*Math.abs(i-f);D=Math.min(D,e)}else if(y>i&&N<h){const e=2*Math.abs(i-y);D=Math.min(D,e)}return D}function Wc(e,t,i){i>=t&&(e.maxX=Math.min(e.maxX,i-t)),i<=t&&(e.minX=Math.max(e.minX,i-t))}function Gc(e,t,i,o,a,s){const n=a-s/2,r=a+s/2,[l,h]=t,[d,c]=i,u=d-l,p=c-h,[y,g]=l<=d?t:i,[m,x]=l<=d?i:t;if(0!==u){const t=p/u;for(let i=0;i<=1;i+=1){const a=((0===i?n:r)-h)/t+l;a>=y&&a<=m&&Wc(e,o,a)}}else Math.max(n,Math.min(h,c))<=Math.min(r,Math.max(h,c))&&Wc(e,o,l);return m<o&&x>=n&&x<=r?Wc(e,o,m):y>o&&g>=n&&g<=r&&Wc(e,o,y),e}var{AND:Yc,ARRAY:Hc,COLOR_STRING:Xc,COLOR_STRING_ARRAY:Qc,FUNCTION:Zc,LINE_DASH:qc,OBJECT:Jc,POSITIVE_NUMBER:$c,RATIO:eu,STRING:tu,Validate:iu,SeriesProperties:ou,SeriesTooltip:au}=o.m,su=class extends ou{constructor(){super(...arguments),this.topology=void 0,this.idKey="",this.idName=void 0,this.topologyIdKey="name",this.labelKey=void 0,this.labelName=void 0,this.colorRange=void 0,this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeOpacity=1,this.strokeWidth=0,this.lineDash=[0],this.lineDashOffset=0,this.padding=0,this.label=new dl,this.tooltip=new au}};f([iu(Ih,{optional:!0})],su.prototype,"topology",2),f([iu(tu,{optional:!0})],su.prototype,"title",2),f([iu(tu,{optional:!0})],su.prototype,"legendItemName",2),f([iu(tu)],su.prototype,"idKey",2),f([iu(tu,{optional:!0})],su.prototype,"idName",2),f([iu(tu)],su.prototype,"topologyIdKey",2),f([iu(tu,{optional:!0})],su.prototype,"labelKey",2),f([iu(tu,{optional:!0})],su.prototype,"labelName",2),f([iu(tu,{optional:!0})],su.prototype,"colorKey",2),f([iu(tu,{optional:!0})],su.prototype,"colorName",2),f([iu(Yc(Qc,Hc.restrict({minLength:1})),{optional:!0})],su.prototype,"colorRange",2),f([iu(Xc)],su.prototype,"fill",2),f([iu(eu)],su.prototype,"fillOpacity",2),f([iu(Xc)],su.prototype,"stroke",2),f([iu(eu)],su.prototype,"strokeOpacity",2),f([iu($c)],su.prototype,"strokeWidth",2),f([iu(qc)],su.prototype,"lineDash",2),f([iu($c)],su.prototype,"lineDashOffset",2),f([iu($c)],su.prototype,"padding",2),f([iu(Zc,{optional:!0})],su.prototype,"formatter",2),f([iu(Jc)],su.prototype,"label",2),f([iu(Jc)],su.prototype,"tooltip",2);var{getMissCount:nu,createDatumId:ru,DataModelSeries:lu,SeriesNodePickMode:hu,valueProperty:du,Validate:cu}=o.m,{ColorScale:uu}=o.d,{Group:pu,Selection:yu,Text:gu,PointerEvents:mu}=o.i,{sanitizeHtml:xu,Logger:fu}=o.s,vu=o.m.MercatorScale.fixedScale(),Du=class extends lu{constructor(e){super({moduleCtx:e,contentGroupVirtual:!1,useLabelLayer:!0,pickModes:[hu.EXACT_SHAPE_MATCH,hu.NEAREST_NODE]}),this.properties=new su,this._chartTopology=void 0,this.colorScale=new uu,this.itemGroup=this.contentGroup.appendChild(new pu({name:"itemGroup"})),this.itemLabelGroup=this.contentGroup.appendChild(new pu({name:"itemLabelGroup"})),this.datumSelection=yu.select(this.itemGroup,(()=>this.nodeFactory())),this.labelSelection=yu.select(this.itemLabelGroup,gu),this.highlightDatumSelection=yu.select(this.highlightGroup,(()=>this.nodeFactory())),this.contextNodeData=[],this.previousLabelLayouts=void 0,this._previousDatumMidPoint=void 0,this.itemLabelGroup.pointerEvents=mu.None}get topology(){var e;return null!=(e=this.properties.topology)?e:this._chartTopology}get hasData(){return super.hasData&&null!=this.topology}setChartTopology(e){this._chartTopology=e,this.topology===e&&(this.nodeDataRefresh=!0)}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(e=>{this.onLegendItemClick(e)})),this.ctx.chartEventManager.addListener("legend-item-double-click",(e=>{this.onLegendItemDoubleClick(e)})))}isLabelEnabled(){return null!=this.properties.labelKey&&this.properties.label.enabled}nodeFactory(){const e=new hh;return e.renderMode=1,e.lineJoin="round",e}processData(e){return D(this,null,(function*(){if(null==this.data||!this.properties.isValid())return;const{data:t,topology:i,colorScale:o}=this,{topologyIdKey:a,idKey:s,colorKey:n,labelKey:r,colorRange:l}=this.properties,h=new Map;null==i||i.features.forEach((e=>{var t;const i=null==(t=e.properties)?void 0:t[a];null==i||!ph(e.geometry,1)||h.set(i,e)}));const{dataModel:d,processedData:c}=yield this.requestDataModel(e,t,{props:[du(this,s,!1,{id:"idValue",includeProperty:!1}),du(this,s,!1,{id:"featureValue",includeProperty:!1,processor:()=>e=>h.get(e)}),...r?[du(this,r,!1,{id:"labelValue"})]:[],...n?[du(this,n,!0,{id:"colorValue"})]:[]]}),u=d.resolveProcessedDataIndexById(this,"featureValue").index;if(this.topologyBounds=c.data.reduce(((e,t)=>{let{values:i}=t;const o=i[u],a=null==o?void 0:o.geometry;return null==a?e:dh(a,e)}),void 0),null!=l&&this.isColorScaleValid()){const e=d.resolveProcessedDataIndexById(this,"colorValue").index;o.domain=c.domain.values[e],o.range=l,o.update()}null==i&&fu.warnOnce("no topology was provided for [MapShapeSeries]; nothing will be rendered.")}))}isColorScaleValid(){const{colorKey:e}=this.properties;if(!e)return!1;const{dataModel:t,processedData:i}=this;if(!t||!i)return!1;const o=t.resolveProcessedDataIndexById(this,"colorValue").index,a=i.data.length,s=nu(this,i.defs.values[o].missing);return!(0===a||a===s)}getLabelLayout(e,t,i,o,a){if(null==t||null==o)return;const{idKey:s,idName:n,colorKey:r,colorName:l,labelKey:h,labelName:d,padding:c,label:u}=this.properties,p=this.getLabelText(u,{value:t,datum:e,idKey:s,idName:n,colorKey:r,colorName:l,labelKey:h,labelName:d});if(null==p)return;const y=gu.getTextSize(String(p),i),g=p.split("\n").length,m=(y.width+2*c)/(g*hl.lineHeight(u.fontSize)+2*c);if((null==a?void 0:a.geometry)===o&&(null==a?void 0:a.labelText)===p&&(null==a?void 0:a.aspectRatio)===m)return a;const x=ch(yh(o,vu));if(null==x)return;const f=Bc(x,{aspectRatio:m,precision:.001});if(null==f)return;const{x:v,y:D,maxWidth:M}=f;return{geometry:o,labelText:p,aspectRatio:m,x:v,y:D,maxWidth:M,fixedPolygon:x}}getLabelDatum(e,t,i,o){const{padding:a,label:s}=this.properties,{labelText:n,aspectRatio:r,x:l,y:h,maxWidth:d,fixedPolygon:c}=e,u={width:Math.ceil(d*t),height:Math.ceil(d*t/r),meta:l},p=ul(n,s,{padding:a},((e,i)=>{if(!i)return u;const o=function(e,t,i,o){const a={minX:-1/0,maxX:1/0};for(const r of e){let e=r[r.length-1];for(const s of r)Gc(a,e,s,t,i,o),e=s}const{minX:s,maxX:n}=a;return Number.isFinite(s)&&Number.isFinite(n)?{x:t+(s+n)/2,width:n-s}:{x:t,width:0}}(c,l,h,e/t);return{width:o.width*t,height:e,meta:o.x}}));if(null==p)return;const[{text:y,fontSize:g,lineHeight:m,width:x},f]=p;return y===gu.ellipsis?void 0:{x:(x>u.width?l:f)*t-i,y:h*t-o,text:y,fontSize:g,lineHeight:m}}createNodeData(){return D(this,null,(function*(){const{id:e,dataModel:t,processedData:i,colorScale:o,properties:a,scale:s,previousLabelLayouts:n}=this,{idKey:r,colorKey:l,labelKey:h,label:d,fill:c}=a;if(null==t||null==i)return[];const u=this.isColorScaleValid(),p=t.resolveProcessedDataIndexById(this,"idValue").index,y=t.resolveProcessedDataIndexById(this,"featureValue").index,g=null!=h?t.resolveProcessedDataIndexById(this,"labelValue").index:void 0,m=null!=l?t.resolveProcessedDataIndexById(this,"colorValue").index:void 0,x=d.getFont(),f=new Map;this.previousLabelLayouts=f;const v=[],D=[],M=[];i.data.forEach((e=>{let{datum:t,values:i}=e;var a;const l=i[p],h=null!=m?i[m]:void 0,d=null!=g?i[g]:void 0,b=null==(a=i[y])?void 0:a.geometry;null==b&&M.push(l);const S=u&&null!=h?o.convert(h):void 0,N=this.getLabelLayout(t,d,x,b,null==n?void 0:n.get(l));null!=N&&f.set(l,N);const I=null!=N&&null!=s?this.getLabelDatum(N,s.scale/vu.scale,s.originX,s.originY):void 0;null!=I&&D.push(I);const k=null!=b&&null!=s?yh(b,s):void 0;v.push({series:this,itemId:r,datum:t,idValue:l,colorValue:h,labelValue:d,fill:null!==S&&void 0!==S?S:c,projectedGeometry:k})}));if(M.length>10){const e=M.length-10;M.length=10,M.push("(+".concat(e," more)"))}return M.length>0&&fu.warnOnce("some data items do not have matches in the provided topology",M),[{itemId:e,nodeData:v,labelData:D}]}))}updateSelections(){return D(this,null,(function*(){this.nodeDataRefresh&&(this.contextNodeData=yield this.createNodeData(),this.nodeDataRefresh=!1)}))}update(){return D(this,null,(function*(){var e,t,i,o,a;const{datumSelection:s,labelSelection:n,highlightDatumSelection:r}=this;yield this.updateSelections(),this.contentGroup.visible=this.visible,this.contentGroup.opacity=this.getOpacity();let l=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight();null!=l&&(l.series!==this||null==l.datum)&&(l=void 0);const h=null!=(i=null==(t=this.contextNodeData[0])?void 0:t.nodeData)?i:[],d=null!=(a=null==(o=this.contextNodeData[0])?void 0:o.labelData)?a:[];this.datumSelection=yield this.updateDatumSelection({nodeData:h,datumSelection:s}),yield this.updateDatumNodes({datumSelection:s,isHighlight:!1}),this.labelSelection=yield this.updateLabelSelection({labelData:d,labelSelection:n}),yield this.updateLabelNodes({labelSelection:n}),this.highlightDatumSelection=yield this.updateDatumSelection({nodeData:null!=l?[l]:[],datumSelection:r}),yield this.updateDatumNodes({datumSelection:r,isHighlight:!0})}))}updateDatumSelection(e){return D(this,null,(function*(){return e.datumSelection.update(e.nodeData,void 0,(e=>ru(e.idValue)))}))}updateDatumNodes(e){return D(this,null,(function*(){const{id:t,properties:i,ctx:{callbackCache:o}}=this,{datumSelection:a,isHighlight:s}=e,{idKey:n,colorKey:r,labelKey:l,fillOpacity:h,stroke:d,strokeOpacity:c,lineDash:u,lineDashOffset:p,formatter:y}=i,g=s?i.highlightStyle.item:void 0,m=this.getStrokeWidth(i.strokeWidth);a.each(((e,i)=>{var a,x,f,v,D,M,b,S,N,I,k,A,T,L;const{projectedGeometry:O}=i;if(null==O)return e.visible=!1,void(e.projectedGeometry=void 0);let E;if(null!=y){const e={seriesId:t,datum:i.datum,itemId:i.itemId,idKey:n,colorKey:r,labelKey:l,fill:i.fill,fillOpacity:h,strokeOpacity:c,stroke:d,strokeWidth:m,lineDash:u,lineDashOffset:p,highlighted:s};E=o.call(y,e)}e.visible=!0,e.projectedGeometry=O,e.fill=null!=(x=null!=(a=null==g?void 0:g.fill)?a:null==E?void 0:E.fill)?x:i.fill,e.fillOpacity=null!=(v=null!=(f=null==g?void 0:g.fillOpacity)?f:null==E?void 0:E.fillOpacity)?v:h,e.stroke=null!=(M=null!=(D=null==g?void 0:g.stroke)?D:null==E?void 0:E.stroke)?M:d,e.strokeWidth=null!=(S=null!=(b=null==g?void 0:g.strokeWidth)?b:null==E?void 0:E.strokeWidth)?S:m,e.strokeOpacity=null!=(I=null!=(N=null==g?void 0:g.strokeOpacity)?N:null==E?void 0:E.strokeOpacity)?I:c,e.lineDash=null!=(A=null!=(k=null==g?void 0:g.lineDash)?k:null==E?void 0:E.lineDash)?A:u,e.lineDashOffset=null!=(L=null!=(T=null==g?void 0:g.lineDashOffset)?T:null==E?void 0:E.lineDashOffset)?L:p}))}))}updateLabelSelection(e){return D(this,null,(function*(){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t)}))}updateLabelNodes(e){return D(this,null,(function*(){const{labelSelection:t}=e,{color:i,fontStyle:o,fontWeight:a,fontFamily:s}=this.properties.label;t.each(((e,t)=>{let{x:n,y:r,text:l,fontSize:h,lineHeight:d}=t;e.visible=!0,e.x=n,e.y=r,e.text=l,e.fill=i,e.fontStyle=o,e.fontWeight=a,e.fontSize=h,e.lineHeight=d,e.fontFamily=s,e.textAlign="center",e.textBaseline="middle"}))}))}onLegendItemClick(e){const{legendItemName:t}=this.properties,{enabled:i,itemId:o,series:a}=e,s=null!=t&&t===e.legendItemName;(a.id===this.id||s)&&this.toggleSeriesItem(o,i)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,{legendItemName:s}=this.properties,n=null!=s&&s===e.legendItemName;o.id===this.id||n||t&&1===a?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}resetAnimation(){}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}pickNodeClosestDatum(e){let t,{x:i,y:o}=e,a=1/0;return this.datumSelection.each(((e,s)=>{const n=e.distanceToPoint(i,o);n<a&&(a=n,t=s)})),null!=t?{datum:t,distance:a}:void 0}datumMidPoint(e){const{_previousDatumMidPoint:t}=this;if((null==t?void 0:t.datum)===e)return t.point;const i=e.projectedGeometry,o=null!=i?ch(i):void 0,a=null!=o?Ed(o,2):void 0,s=null!=a?{x:a[0],y:a[1]}:void 0;return this._previousDatumMidPoint={datum:e,point:s},s}getLegendData(e){var t,i,o,a;const{processedData:s,dataModel:n}=this;if(null==s||null==n)return[];const{title:r,legendItemName:l,idKey:h,idName:d,fill:c,fillOpacity:u,stroke:p,strokeWidth:y,strokeOpacity:g,colorKey:m,colorName:x,colorRange:f,visible:v}=this.properties;if("gradient"===e&&null!=m&&null!=f){const e=s.domain.values[n.resolveProcessedDataIndexById(this,"colorValue").index];return[{legendType:"gradient",enabled:v,seriesId:this.id,colorName:x,colorRange:f,colorDomain:e}]}return"category"===e?[{legendType:"category",id:this.id,itemId:null!=(i=null!=(t=null!==l&&void 0!==l?l:r)?t:d)?i:h,seriesId:this.id,enabled:v,label:{text:null!=(a=null!=(o=null!==l&&void 0!==l?l:r)?o:d)?a:h},marker:{fill:c,fillOpacity:u,stroke:p,strokeWidth:y,strokeOpacity:g},legendItemName:l}]:[]}getTooltipHtml(e){var t,i,o;const{id:a,processedData:s,ctx:{callbackCache:n},properties:r}=this;if(!s||!r.isValid())return"";const{legendItemName:l,idKey:h,idName:d,colorKey:c,colorName:u,labelKey:p,labelName:y,stroke:m,strokeWidth:x,formatter:f,tooltip:v}=r,{datum:D,fill:M,idValue:b,colorValue:S,labelValue:N}=e,I=null!=(i=xu(null!=(t=r.title)?t:l))?i:"",k=[];k.push(xu((null!=d?"".concat(d,": "):"")+b)),null!=S&&k.push(xu((null!==u&&void 0!==u?u:c)+": "+S)),null!=N&&p!==h&&k.push(xu((null!==y&&void 0!==y?y:p)+": "+N));const A=k.join("<br>");let T;f&&(T=n.call(f,{seriesId:a,datum:D,idKey:h,fill:M,stroke:m,strokeWidth:this.getStrokeWidth(x),highlighted:!1}));const L=null!=(o=null==T?void 0:T.fill)?o:M;return v.toTooltipHtml({title:I,content:A,backgroundColor:L},g({seriesId:a,datum:D,idKey:h,title:I,color:L},this.getModuleTooltipParams()))}};Du.className="MapShapeSeries",Du.type="map-shape",f([cu(Ih,{optional:!0,property:"topology"})],Du.prototype,"_chartTopology",2);var{EXTENDS_SERIES_DEFAULTS:Mu,DEFAULT_INVERTED_LABEL_COLOUR:bu,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Su,DEFAULT_BACKGROUND_COLOUR:Nu,singleSeriesPaletteFactory:Iu}=o.a,ku={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["topology"],identifier:"map-shape",instanceConstructor:Du,themeTemplate:{series:{__extends__:Mu,fillOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,padding:2,label:{color:bu,fontWeight:"bold",overflowStrategy:"hide"}},legend:{enabled:!1},gradientLegend:{enabled:!1},tooltip:{range:"exact"}},paletteFactory:e=>{const{takeColors:t,colorsCount:i,userPalette:o,themeTemplateParameters:a}=e,{fill:s}=Iu(e),{properties:n}=a,r=n.get(Su),{fills:l}=t(i);return{fill:s,stroke:n.get(Nu),colorRange:o?[l[0],l[1]]:r}}},{isDefined:Au,ChartAxisDirection:Tu,PolarAxis:Lu,diff:Ou,fixNumericExtent:Eu,groupAccumulativeValueProperty:Ru,keyProperty:Cu,normaliseGroupTo:wu,resetLabelFn:Pu,seriesLabelFadeInAnimation:_u,seriesLabelFadeOutAnimation:zu,valueProperty:Ku,animationValidation:Vu}=o.m,{BandScale:ju}=o.d,{motion:Fu}=o.i,{isNumber:Bu,normalizeAngle360:Uu,sanitizeHtml:Wu}=o.s,Gu=class extends o.m.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},Yu=class extends o.m.PolarSeries{constructor(e,t){let{animationResetFns:i}=t;super({moduleCtx:e,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:m(g({},i),{label:Pu})}),this.NodeEvent=Gu,this.nodeData=[],this.groupScale=new ju,this.circleCache={r:0,cx:0,cy:0}}addChartEventListeners(){var e,t;this.destroyFns.push(null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-click",(e=>this.onLegendItemClick(e))),null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-double-click",(e=>this.onLegendItemDoubleClick(e))))}getSeriesDomain(e){const{axes:t,dataModel:i,processedData:o}=this;if(!o||!i)return[];if(e===Tu.X)return i.getDomain(this,"angleValue","key",o);{const e=t[Tu.Y],a=i.getDomain(this,"radiusValue-end","value",o),s=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return Eu(s,e)}}processData(e){return D(this,null,(function*(){var t;if(!this.properties.isValid())return;const i=this.getStackId(),o="".concat(i,"-trailing"),{angleKey:a,radiusKey:s,normalizedTo:n,visible:r}=this.properties,l=[];Au(n)&&l.push(wu(this,[i,o],Math.abs(n),"range"));const h=!this.ctx.animationManager.isSkipped();h&&this.processedData&&l.push(Ou(this.processedData)),h&&l.push(Vu(this));const d=r||!h?{}:{forceValue:0};yield this.requestDataModel(e,null!=(t=this.data)?t:[],{props:[Cu(this,a,!1,{id:"angleValue"}),Ku(this,s,!0,g({id:"radiusValue-raw",invalidValue:null},d)),...Ru(this,s,!0,"normal","current",g({id:"radiusValue-end",invalidValue:null,groupId:i},d)),...Ru(this,s,!0,"trailing","current",g({id:"radiusValue-start",invalidValue:null,groupId:o},d)),...l],dataVisible:r||h}),this.animationState.transition("updateData")}))}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return(e!==o.r||t!==o.cx||i!==o.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}isRadiusAxisReversed(){var e;return null==(e=this.axes[Tu.Y])?void 0:e.isReversed()}maybeRefreshNodeData(){return D(this,null,(function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:e=[]}={}]=yield this.createNodeData();this.nodeData=e,this.nodeDataRefresh=!1}))}getAxisInnerRadius(){const e=this.axes[Tu.Y];return e instanceof Lu?this.radius*e.innerRadiusRatio:0}createNodeData(){return D(this,null,(function*(){var e;const{processedData:t,dataModel:i,groupScale:o}=this;if(!t||!i||!this.properties.isValid())return[];const a=this.axes[Tu.X],s=this.axes[Tu.Y],n=null==a?void 0:a.scale,r=null==s?void 0:s.scale;if(!n||!r)return[];const l=i.resolveProcessedDataIndexById(this,"radiusValue-start").index,h=i.resolveProcessedDataIndexById(this,"radiusValue-end").index,d=i.resolveProcessedDataIndexById(this,"radiusValue-raw").index;let c=0,u=0;a instanceof ve&&(c=a.groupPaddingInner,u=a.paddingInner);const p=(null!=(e=n.bandwidth)?e:0)*(1-u),{index:y,visibleGroupCount:g}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);o.domain=Array.from({length:g}).map(((e,t)=>String(t))),o.range=[-p/2,p/2],o.paddingInner=g>1?c:0;const m=this.isRadiusAxisReversed(),x=m?this.radius:this.getAxisInnerRadius(),f=m?this.getAxisInnerRadius():this.radius,v=f+x,{angleKey:D,radiusKey:M,angleName:b,radiusName:S,label:N}=this.properties,I=(e,t,i,o)=>{const a=this.getLabelText(N,{value:t,datum:e,angleKey:D,radiusKey:M,angleName:b,radiusName:S},(e=>Bu(e)?e.toFixed(2):String(e)));if(a)return{x:i,y:o,text:a,textAlign:"center",textBaseline:"middle"}},k=t.data.map(((e,t,i)=>{const{datum:a,keys:s,values:c}=e,u=s[0],p=c[d],g=c[l],m=c[h];let D,M;if(1===i.length)D=-.5*Math.PI,M=1.5*Math.PI;else{const e=n.convert(u);D=Uu(e+o.convert(String(y))),M=Uu(D+o.bandwidth)}const b=D+o.bandwidth/2,S=v-r.convert(g),N=v-r.convert(m),k=(S+N)/2,A=Math.cos(b)*k,T=Math.sin(b)*k,L=this.properties.label.enabled?I(a,p,A,T):void 0,O=this.getColumnWidth(D,M);return{series:this,datum:a,point:{x:A,y:T,size:0},midPoint:{x:A,y:T},label:L,angleValue:u,radiusValue:p,innerRadius:S,outerRadius:N,startAngle:D,endAngle:M,axisInnerRadius:x,axisOuterRadius:f,columnWidth:O,index:t}}));return[{itemId:M,nodeData:k,labelData:k}]}))}getColumnWidth(e,t){return NaN}update(e){return D(this,arguments,(function(e){var t=this;let{seriesRect:i}=e;return function*(){const e=t.checkResize(i);yield t.maybeRefreshNodeData(),t.contentGroup.translationX=t.centerX,t.contentGroup.translationY=t.centerY,t.highlightGroup.translationX=t.centerX,t.highlightGroup.translationY=t.centerY,t.labelGroup&&(t.labelGroup.translationX=t.centerX,t.labelGroup.translationY=t.centerY),t.updateSectorSelection(t.itemSelection,!1),t.updateSectorSelection(t.highlightSelection,!0),t.updateLabels(),e&&t.animationState.transition("resize"),t.animationState.transition("update")}()}))}updateSectorSelection(e,t){var i,o,a,s,n;let r=[];if(t){const e=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();null!=e&&e.datum&&e.series===this&&(r=[e])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0,h=null!=(o=null==l?void 0:l.fill)?o:this.properties.fill,d=null!=(a=null==l?void 0:l.fillOpacity)?a:this.properties.fillOpacity,c=null!=(s=null==l?void 0:l.stroke)?s:this.properties.stroke,u=this.properties.strokeOpacity,p=null!=(n=null==l?void 0:l.strokeWidth)?n:this.properties.strokeWidth;e.update(r,void 0,(e=>e.angleValue)).each(((e,i)=>{var o,a,s,n;const r=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:i,fill:h,stroke:c,strokeWidth:p,highlighted:t,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;this.updateItemPath(e,i,t,r),e.fill=null!=(o=null==r?void 0:r.fill)?o:h,e.fillOpacity=null!=(a=null==r?void 0:r.fillOpacity)?a:d,e.stroke=null!=(s=null==r?void 0:r.stroke)?s:c,e.strokeOpacity=u,e.strokeWidth=null!=(n=null==r?void 0:r.strokeWidth)?n:p,e.lineDash=this.properties.lineDash,e.lineJoin="round"}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getColumnTransitionFunctions();Fu.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),_u(this,"labels",this.ctx.animationManager,[e])}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getColumnTransitionFunctions();Fu.fromToMotion(this.id,"datums",t,[e],i),zu(this,"labels",t,[this.labelSelection])}getTooltipHtml(e){var t;const{id:i,axes:o,dataModel:a}=this,{angleKey:s,radiusKey:n,angleName:r,radiusName:l,fill:h,stroke:d,strokeWidth:c,formatter:u,tooltip:p}=this.properties,{angleValue:y,radiusValue:g,datum:m}=e,x=o[Tu.X],f=o[Tu.Y];if(!this.properties.isValid()||!(x&&f&&Bu(g))||!a)return"";const v=x.formatDatum(y),D=f.formatDatum(g),M=Wu(l),b=Wu("".concat(v,": ").concat(D)),{fill:S}=null!=(t=u&&this.ctx.callbackCache.call(u,{seriesId:i,datum:m,fill:h,stroke:d,strokeWidth:c,highlighted:!1,angleKey:s,radiusKey:n}))?t:{fill:h};return p.toTooltipHtml({title:M,backgroundColor:h,content:b},{seriesId:i,datum:m,color:S,title:M,angleKey:s,radiusKey:n,angleName:r,radiusName:l})}getLegendData(e){var t;if(null==(t=this.data)||!t.length||!this.properties.isValid()||"category"!==e)return[];const{radiusKey:i,radiusName:o,fill:a,stroke:s,fillOpacity:n,strokeOpacity:r,strokeWidth:l,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:h,label:{text:null!==o&&void 0!==o?o:i},marker:{fill:null!==a&&void 0!==a?a:"rgba(0, 0, 0, 0)",stroke:null!==s&&void 0!==s?s:"rgba(0, 0, 0, 0)",fillOpacity:null!==n&&void 0!==n?n:1,strokeOpacity:null!==r&&void 0!==r?r:1,strokeWidth:l}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:o}=e;o.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,s=o.id===this.id||t&&1===a;this.toggleSeriesItem(i,s)}computeLabelsBBox(){return null}},{Label:Hu}=o.i,{SeriesProperties:Xu,SeriesTooltip:Qu,Validate:Zu,COLOR_STRING:qu,DEGREE:Ju,FUNCTION:$u,LINE_DASH:ep,NUMBER:tp,OBJECT:ip,POSITIVE_NUMBER:op,RATIO:ap,STRING:sp}=o.m,np=class extends Xu{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new Hu,this.tooltip=new Qu}};f([Zu(sp)],np.prototype,"angleKey",2),f([Zu(sp,{optional:!0})],np.prototype,"angleName",2),f([Zu(sp)],np.prototype,"radiusKey",2),f([Zu(sp,{optional:!0})],np.prototype,"radiusName",2),f([Zu(qu)],np.prototype,"fill",2),f([Zu(ap)],np.prototype,"fillOpacity",2),f([Zu(qu)],np.prototype,"stroke",2),f([Zu(op)],np.prototype,"strokeWidth",2),f([Zu(ap)],np.prototype,"strokeOpacity",2),f([Zu(ep)],np.prototype,"lineDash",2),f([Zu(op)],np.prototype,"lineDashOffset",2),f([Zu($u,{optional:!0})],np.prototype,"formatter",2),f([Zu(Ju)],np.prototype,"rotation",2),f([Zu(sp,{optional:!0})],np.prototype,"stackGroup",2),f([Zu(tp,{optional:!0})],np.prototype,"normalizedTo",2),f([Zu(ip)],np.prototype,"label",2),f([Zu(ip)],np.prototype,"tooltip",2);var{motion:rp}=o.i;function lp(){const e={startAngle:new Map,endAngle:new Map},t=["startAngle","endAngle"],i=(t,i)=>({startAngle:e.startAngle.get(t)[i],endAngle:e.endAngle.get(t)[i]});return{calculate:(i,o,a)=>{t.forEach((t=>{var s,n;const r=e[t];let l=("removed"===a||"updated"===a?i:o)[t],h=("removed"===a?i:o)[t];isNaN(h)&&(h=null!=(n=null==(s=i.previousDatum)?void 0:s[t])?n:NaN);const d=l-h;Math.abs(d)>Math.PI&&(l-=2*Math.sign(d)*Math.PI),r.set(o,{from:l,to:h})}))},from:e=>i(e,"from"),to:e=>i(e,"to")}}function hp(e,t,i){if("updated"===i){if(null==e.previousDatum||isNaN(e.previousDatum.startAngle)||isNaN(e.previousDatum.endAngle))return"added";if(isNaN(t.startAngle)||isNaN(t.endAngle))return"removed"}return"added"===i&&null!=e.previousDatum?"updated":i}function dp(e,t){let{innerRadius:i,outerRadius:o,columnWidth:a,axisInnerRadius:s,axisOuterRadius:n,startAngle:r,endAngle:l}=t;return{innerRadius:i,outerRadius:o,columnWidth:a,axisInnerRadius:s,axisOuterRadius:n,startAngle:r,endAngle:l}}var{motion:cp}=o.i;function up(e,t){let{innerRadius:i,outerRadius:o,startAngle:a,endAngle:s}=t;return{innerRadius:i,outerRadius:o,startAngle:a,endAngle:s}}var{Sector:pp}=o.i,yp=class extends Yu{constructor(e){super(e,{animationResetFns:{item:up}}),this.properties=new np}getStackId(){var e,t;return"nightingale-stack-".concat(null!=(t=null==(e=this.seriesGrouping)?void 0:e.groupIndex)?t:this.id,"-yValues")}nodeFactory(){return new pp}updateItemPath(e,t,i,o){e.centerX=0,e.centerY=0,i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle)}getColumnTransitionFunctions(){return function(e){const t=lp();return{toFn:(i,o,a)=>{const{startAngle:s,endAngle:n}=t.to(o);let r,l;return"removed"===a?(r=e,l=e):(r=isNaN(o.innerRadius)?e:o.innerRadius,l=isNaN(o.outerRadius)?e:o.outerRadius),{innerRadius:r,outerRadius:l,startAngle:s,endAngle:n}},fromFn:(i,o,a)=>{a=hp(i,o,a),t.calculate(i,o,a);const{startAngle:s,endAngle:n}=t.from(o);let r,l;return"removed"===a||"updated"===a?(r=i.innerRadius,l=i.outerRadius):(r=e,l=e),{innerRadius:r,outerRadius:l,startAngle:s,endAngle:n,phase:cp.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}};yp.className="NightingaleSeries",yp.type="nightingale";var gp={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:o.a.DEFAULT_FONT_FAMILY,color:o.a.DEFAULT_LABEL_COLOUR,__overrides__:o.a.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[o.a.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:o.a.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[o.a.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:o.a.POLAR_AXIS_SHAPE.CIRCLE}}},mp={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"nightingale",instanceConstructor:yp,defaultAxes:[{type:o.a.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:o.a.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:gp,paletteFactory(e){let{takeColors:t,userPalette:i}=e;const{fills:[a],strokes:[s]}=t(1);return{fill:a,stroke:i?s:o.a.DEFAULT_POLAR_SERIES_STROKE}},stackable:!0,groupable:!0,stackedByDefault:!0},xp={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,label:{enabled:!1,fontSize:12,fontFamily:o.a.DEFAULT_FONT_FAMILY,color:o.a.DEFAULT_LABEL_COLOUR,__overrides__:o.a.OVERRIDE_SERIES_LABEL_DEFAULTS},marker:{enabled:!0,fillOpacity:1,shape:"circle",size:6,strokeOpacity:1,strokeWidth:0}},axes:{[o.a.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{label:{padding:10}}}},fp=o.m.mergeDefaults({series:{strokeWidth:2}},xp),vp=o.m.mergeDefaults({series:{fillOpacity:.8,strokeWidth:2,marker:{enabled:!1}}},xp),{Label:Dp}=o.i,{SeriesMarker:Mp,SeriesProperties:bp,SeriesTooltip:Sp,Validate:Np,BOOLEAN:Ip,COLOR_STRING:kp,DEGREE:Ap,FUNCTION:Tp,LINE_DASH:Lp,OBJECT:Op,POSITIVE_NUMBER:Ep,RATIO:Rp,STRING:Cp}=o.m,wp=class extends bp{constructor(){super(...arguments),this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.marker=new Mp,this.label=new Dp,this.tooltip=new Sp,this.connectMissingData=!1}};f([Np(Cp)],wp.prototype,"angleKey",2),f([Np(Cp)],wp.prototype,"radiusKey",2),f([Np(Cp,{optional:!0})],wp.prototype,"angleName",2),f([Np(Cp,{optional:!0})],wp.prototype,"radiusName",2),f([Np(kp)],wp.prototype,"stroke",2),f([Np(Ep)],wp.prototype,"strokeWidth",2),f([Np(Rp)],wp.prototype,"strokeOpacity",2),f([Np(Lp)],wp.prototype,"lineDash",2),f([Np(Ep)],wp.prototype,"lineDashOffset",2),f([Np(Tp,{optional:!0})],wp.prototype,"formatter",2),f([Np(Ap)],wp.prototype,"rotation",2),f([Np(Op)],wp.prototype,"marker",2),f([Np(Op)],wp.prototype,"label",2),f([Np(Op)],wp.prototype,"tooltip",2),f([Np(Ip)],wp.prototype,"connectMissingData",2);var{ChartAxisDirection:Pp,PolarAxis:_p,SeriesNodePickMode:zp,valueProperty:Kp,fixNumericExtent:Vp,seriesLabelFadeInAnimation:jp,markerFadeInAnimation:Fp,resetMarkerFn:Bp,animationValidation:Up}=o.m,{BBox:Wp,Group:Gp,Path:Yp,PointerEvents:Hp,Selection:Xp,Text:Qp,getMarker:Zp}=o.i,{extent:qp,isNumber:Jp,isNumberEqual:$p,sanitizeHtml:ey,toFixed:ty}=o.s,iy=class extends o.m.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},oy=class extends o.m.PolarSeries{constructor(e){super({moduleCtx:e,useLabelLayer:!0,pickModes:[zp.NEAREST_NODE,zp.EXACT_SHAPE_MATCH],canHaveAxes:!0,animationResetFns:{item:Bp}}),this.properties=new wp,this.NodeEvent=iy,this.nodeData=[],this.resetInvalidToZero=!1,this.circleCache={r:0,cx:0,cy:0};const t=new Gp;this.contentGroup.append(t),this.lineSelection=Xp.select(t,Yp),t.zIndexSubOrder=[()=>this._declarationOrder,1]}nodeFactory(){const{shape:e}=this.properties.marker;return new(Zp(e))}addChartEventListeners(){var e,t;this.destroyFns.push(null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-click",(e=>this.onLegendItemClick(e))),null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-double-click",(e=>this.onLegendItemDoubleClick(e))))}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];if(e===Pp.X)return t.getDomain(this,"angleValue","value",i);{const e=t.getDomain(this,"radiusValue","value",i),o=qp(0===e.length?e:[0].concat(e));return Vp(o)}}processData(e){return D(this,null,(function*(){var t;if(!this.properties.isValid())return;const{angleKey:i,radiusKey:o}=this.properties,a=[];this.ctx.animationManager.isSkipped()||a.push(Up(this)),yield this.requestDataModel(e,null!=(t=this.data)?t:[],{props:[Kp(this,i,!1,{id:"angleValue"}),Kp(this,o,!1,{id:"radiusValue",invalidValue:void 0}),...a]}),this.animationState.transition("updateData")}))}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return(e!==o.r||t!==o.cx||i!==o.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}getAxisInnerRadius(){const e=this.axes[Pp.Y];return e instanceof _p?this.radius*e.innerRadiusRatio:0}maybeRefreshNodeData(){return D(this,null,(function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:e=[]}={}]=yield this.createNodeData();this.nodeData=e,this.nodeDataRefresh=!1}))}createNodeData(){return D(this,null,(function*(){var e,t;const{processedData:i,dataModel:o}=this;if(!i||!o||!this.properties.isValid())return[];const{angleKey:a,radiusKey:s,angleName:n,radiusName:r,marker:l,label:h}=this.properties,d=null==(e=this.axes[Pp.X])?void 0:e.scale,c=null==(t=this.axes[Pp.Y])?void 0:t.scale;if(!d||!c)return[];const u=o.resolveProcessedDataIndexById(this,"angleValue").index,p=o.resolveProcessedDataIndexById(this,"radiusValue").index,y=this.getAxisInnerRadius(),g=i.data.map((e=>{const{datum:t,values:i}=e,o=i[u],g=i[p],m=d.convert(o),x=this.radius+y-c.convert(g),f=Math.cos(m),v=Math.sin(m),D=f*x,M=v*x;let b;if(h.enabled){const e=this.getLabelText(h,{value:g,datum:t,angleKey:a,radiusKey:s,angleName:n,radiusName:r},(e=>Jp(e)?e.toFixed(2):String(e)));if(e){let t="right";$p(f,0)?t="center":f>0&&(t="left");let i="bottom";$p(v,0)?i="middle":v>0&&(i="top"),b={x:D+f*l.size,y:M+v*l.size,text:e,textAlign:t,textBaseline:i}}}return{series:this,datum:t,point:{x:D,y:M,size:l.size},midPoint:{x:D,y:M},label:b,angleValue:o,radiusValue:g}}));return[{itemId:s,nodeData:g,labelData:g}]}))}update(e){return D(this,arguments,(function(e){var t=this;let{seriesRect:i}=e;return function*(){var e,o;const a=t.checkResize(i),s=!t.ctx.animationManager.isSkipped(),{series:n}=null!=(o=null==(e=t.ctx.highlightManager)?void 0:e.getActiveHighlight())?o:{};t.highlightGroup.visible=(s||t.visible)&&n===t,yield t.maybeRefreshNodeData(),t.contentGroup.translationX=t.centerX,t.contentGroup.translationY=t.centerY,t.highlightGroup.translationX=t.centerX,t.highlightGroup.translationY=t.centerY,t.labelGroup&&(t.labelGroup.translationX=t.centerX,t.labelGroup.translationY=t.centerY),t.updatePathSelections(),t.updateMarkerSelection(),t.updateMarkers(t.itemSelection,!1),t.updateMarkers(t.highlightSelection,!0),t.updateLabels(),a&&t.animationState.transition("resize"),t.animationState.transition("update")}()}))}updatePathSelections(){const e=this.visible?[!0]:[];this.lineSelection.update(e)}updateMarkerSelection(){this.properties.marker.isDirty()&&(this.itemSelection.clear(),this.itemSelection.cleanup(),this.itemSelection=Xp.select(this.itemGroup,(()=>this.nodeFactory()),!1)),this.itemSelection.update(this.properties.marker.enabled?this.nodeData:[])}getMarkerFill(e){var t;return null!=(t=null==e?void 0:e.fill)?t:this.properties.marker.fill}updateMarkers(e,t){var i;const{angleKey:o,radiusKey:a,marker:s,visible:n}=this.properties;let r=[];if(n&&s.shape&&s.enabled)if(t){const e=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();null!=e&&e.datum&&(r=[e])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0;e.update(r).each(((e,i)=>{var r,h,d,c,u,p,y,g,m,x,f,v,D;const M=this.getMarkerFill(l),b=null!=(h=null!=(r=null==l?void 0:l.stroke)?r:s.stroke)?h:this.properties.stroke,S=null!=(u=null!=(c=null!=(d=null==l?void 0:l.strokeWidth)?d:s.strokeWidth)?c:this.properties.strokeWidth)?u:1,N=s.formatter?this.ctx.callbackCache.call(s.formatter,{datum:i.datum,angleKey:o,radiusKey:a,fill:M,stroke:b,strokeWidth:S,size:s.size,highlighted:t,seriesId:this.id}):void 0;e.fill=null!=(p=null==N?void 0:N.fill)?p:M,e.stroke=null!=(y=null==N?void 0:N.stroke)?y:b,e.strokeWidth=null!=(g=null==N?void 0:N.strokeWidth)?g:S,e.fillOpacity=null!=(x=null!=(m=null==l?void 0:l.fillOpacity)?m:s.fillOpacity)?x:1,e.strokeOpacity=null!=(v=null!=(f=s.strokeOpacity)?f:this.properties.strokeOpacity)?v:1,e.size=null!=(D=null==N?void 0:N.size)?D:s.size;const{x:I,y:k}=i.point;e.translationX=I,e.translationY=k,e.visible=n&&e.size>0&&!isNaN(I)&&!isNaN(k)}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}getTooltipHtml(e){var t;if(!this.properties.isValid())return"";const{id:i}=this,{angleKey:o,radiusKey:a,angleName:s,radiusName:n,marker:r,tooltip:l}=this.properties,{datum:h,angleValue:d,radiusValue:c}=e,u="number"==typeof d?ty(d):String(d),p="number"==typeof c?ty(c):String(c),y=ey(n),g=ey("".concat(u,": ").concat(p)),{formatter:m,fill:x,stroke:f,strokeWidth:v,size:D}=r,M=null!==v&&void 0!==v?v:this.properties.strokeWidth,{fill:b}=null!=(t=m&&this.ctx.callbackCache.call(m,{datum:h,angleKey:o,radiusKey:a,fill:x,stroke:f,strokeWidth:M,size:D,highlighted:!1,seriesId:i}))?t:{fill:x};return l.toTooltipHtml({title:y,content:g,backgroundColor:b},{datum:h,angleKey:o,angleName:s,radiusKey:a,radiusName:n,title:y,color:b,seriesId:i})}getLegendData(e){var t,i,o,a,s,n,r,l,h,d;if(null==(t=this.data)||!t.length||!this.properties.isValid()||"category"!==e)return[];const{radiusKey:c,radiusName:u,stroke:p,strokeWidth:y,strokeOpacity:g,lineDash:m,visible:x,marker:f}=this.properties;return[{legendType:"category",id:this.id,itemId:c,seriesId:this.id,enabled:x,label:{text:null!==u&&void 0!==u?u:c},marker:{shape:f.shape,fill:null!=(a=null!=(o=null!=(i=this.getMarkerFill())?i:f.stroke)?o:p)?a:"rgba(0, 0, 0, 0)",stroke:null!=(n=null!=(s=f.stroke)?s:p)?n:"rgba(0, 0, 0, 0)",fillOpacity:null!=(r=f.fillOpacity)?r:1,strokeOpacity:null!=(h=null!=(l=f.strokeOpacity)?l:g)?h:1,strokeWidth:null!=(d=f.strokeWidth)?d:0,enabled:f.enabled||y<=0},line:{stroke:p,strokeOpacity:g,strokeWidth:y,lineDash:m}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:o}=e;o.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,s=o.id===this.id||t&&1===a;this.toggleSeriesItem(i,s)}pickNodeClosestDatum(e){var t,i;const{x:o,y:a}=e,{rootGroup:s,nodeData:n,centerX:r,centerY:l}=this,h=s.transformPoint(o,a),d=this.radius;if(Math.sqrt(p(o-r,2)+p(a-l,2))>d+this.properties.marker.size)return;let c,u=1/0;for(const y of n){const{point:{x:e=NaN,y:t=NaN}={}}=y;if(isNaN(e)||isNaN(t))continue;const i=Math.sqrt(p(h.x-e-r,2)+p(h.y-t-l,2));i<u&&(u=i,c=y)}if(c){return{datum:c,distance:Math.max(u-(null!=(i=null==(t=c.point)?void 0:t.size)?i:0),0)}}}computeLabelsBBox(){return D(this,null,(function*(){const{label:e}=this.properties;yield this.maybeRefreshNodeData();const t=[],i=new Qp;return this.nodeData.forEach((o=>{if(!e.enabled||!o.label)return;i.text=o.label.text,i.x=o.label.x,i.y=o.label.y,i.setFont(e),i.setAlign(o.label);const a=i.computeBBox();t.push(a)})),0===t.length?null:Wp.merge(t)}))}getLineNode(){return this.lineSelection.nodes()[0]}beforePathAnimation(){const e=this.getLineNode();e.fill=void 0,e.lineJoin="round",e.lineCap="round",e.pointerEvents=Hp.None,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset}getLinePoints(){const{nodeData:e,resetInvalidToZero:t}=this,{connectMissingData:i}=this.properties;if(0===e.length)return[];const o=this.axes[Pp.Y],a=this.axes[Pp.X],s=null==a?void 0:a.isReversed(),n=(null==o?void 0:o.isReversed())&&!s?[...e].reverse():e,r=[];let l,h=!1;return n.forEach(((e,o)=>{var a;let{x:s,y:n}=e.point;const d=isNaN(s)||isNaN(n);d||null!==(a=l)&&void 0!==a||(l=e),d&&!i&&(s=0,n=0);const c=0===o||!t&&!i&&(d||h);r.push({x:s,y:n,moveTo:c}),h=d})),void 0!==l&&r.push({x:l.point.x,y:l.point.y,moveTo:!1}),r}animateSinglePath(e,t,i){const{path:o}=e;o.clear({trackChanges:!0});const a=this.getAxisInnerRadius(),s=this.axes[Pp.Y],n=(null==s?void 0:s.isReversed())?this.radius+a-(null==s?void 0:s.scale.convert(0)):a;t.forEach((e=>{const{x:t,y:a,arc:s,radius:r=0,startAngle:l=0,endAngle:h=0,moveTo:d}=e,c=Math.atan2(a,t),u=n*Math.cos(c),p=n*Math.sin(c),y=u*(1-i)+t*i,g=p*(1-i)+a*i;s?o.arc(t,a,r,l,h):d?o.moveTo(y,g):o.lineTo(y,g)})),e.checkPathDirty()}animatePaths(e){const t=this.getLinePoints();this.animateSinglePath(this.getLineNode(),t,e)}animateEmptyUpdateReady(){const{itemSelection:e,labelSelection:t}=this,{animationManager:i}=this.ctx;this.beforePathAnimation(),i.animate({id:"".concat(this.id,"_'path"),groupId:this.id,from:0,to:1,phase:"initial",collapsable:!1,onUpdate:e=>this.animatePaths(e),onStop:()=>this.animatePaths(1)}),Fp(this,i,[e],"added"),jp(this,"labels",i,[t])}animateWaitingUpdateReady(e){super.animateWaitingUpdateReady(e),this.resetPaths()}animateReadyResize(e){super.animateReadyResize(e),this.resetPaths()}resetPaths(){const e=this.getLineNode();if(e){const{path:t}=e,i=this.getLinePoints();e.fill=void 0,e.stroke=this.properties.stroke,e.strokeWidth=this.getStrokeWidth(this.properties.strokeWidth),e.strokeOpacity=this.properties.strokeOpacity,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,t.clear({trackChanges:!0}),i.forEach((e=>{let{x:i,y:o,moveTo:a}=e;a?t.moveTo(i,o):t.lineTo(i,o)})),e.checkPathDirty()}}};oy.className="RadarSeries";var{RATIO:ay,COLOR_STRING:sy,Validate:ny}=o.m,ry=class extends wp{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1}};f([ny(sy)],ry.prototype,"fill",2),f([ny(ay)],ry.prototype,"fillOpacity",2);var{Group:ly,Path:hy,PointerEvents:dy,Selection:cy}=o.i,{ChartAxisDirection:uy}=o.m,py=class extends oy{constructor(e){super(e),this.properties=new ry,this.resetInvalidToZero=!0;const t=new ly;t.zIndexSubOrder=[()=>this._declarationOrder,0],this.contentGroup.append(t),this.areaSelection=cy.select(t,hy)}updatePathSelections(){const e=this.visible?[!0]:[];this.areaSelection.update(e),super.updatePathSelections()}getAreaNode(){return this.areaSelection.nodes()[0]}getMarkerFill(e){var t,i;return null!=(i=null!=(t=null==e?void 0:e.fill)?t:this.properties.marker.fill)?i:this.properties.fill}beforePathAnimation(){super.beforePathAnimation();const e=this.getAreaNode();e.fill=this.properties.fill,e.fillOpacity=this.properties.fillOpacity,e.pointerEvents=dy.None,e.stroke=void 0}animatePaths(e){super.animatePaths(e),this.animateSinglePath(this.getAreaNode(),this.getAreaPoints(),e)}getAreaPoints(){var e,t;const i=this.getLinePoints(),a=e=>{const t=this.axes[e];return t instanceof o.m.PolarAxis?t:void 0},s=a(uy.Y),n=a(uy.X);if(!(null==s?void 0:s.isReversed()))return i;const{points:r=[]}=null!=(t=null==(e=null==n?void 0:n.getAxisLinePoints)?void 0:e.call(n))?t:{};return i.concat(...r)}resetPaths(){super.resetPaths();const e=this.getAreaNode();if(e){const{path:t}=e,i=this.getAreaPoints();e.fill=this.properties.fill,e.fillOpacity=this.properties.fillOpacity,e.stroke=void 0,e.lineDash=this.properties.lineDash,e.lineDashOffset=this.properties.lineDashOffset,e.lineJoin=e.lineCap="round",t.clear({trackChanges:!0}),i.forEach((e=>{let{x:i,y:o,moveTo:a,arc:s,radius:n=0,startAngle:r=0,endAngle:l=0}=e;s?t.arc(i,o,n,r,l):a?t.moveTo(i,o):t.lineTo(i,o)})),t.closePath(),e.checkPathDirty()}}};py.className="RadarAreaSeries",py.type="radar-area";var{markerPaletteFactory:yy}=o.m,gy={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-area",instanceConstructor:py,defaultAxes:[{type:o.a.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:o.a.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:vp,paletteFactory:e=>{const{marker:t}=yy(e);return{stroke:t.stroke,fill:t.fill,marker:t}}},my=class extends oy{updatePathSelections(){this.lineSelection.update(this.visible?[!0]:[])}};my.className="RadarLineSeries",my.type="radar-line";var xy={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radar-line",instanceConstructor:my,defaultAxes:[{type:o.a.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:o.a.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:fp,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[o]}=t(1);return{stroke:i,marker:{fill:i,stroke:o}}}},{Label:fy}=o.i,{SeriesProperties:vy,SeriesTooltip:Dy,Validate:My,COLOR_STRING:by,DEGREE:Sy,FUNCTION:Ny,LINE_DASH:Iy,NUMBER:ky,OBJECT:Ay,POSITIVE_NUMBER:Ty,RATIO:Ly,STRING:Oy}=o.m,Ey=class extends vy{constructor(){super(...arguments),this.fill="black",this.fillOpacity=1,this.stroke="black",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.label=new fy,this.tooltip=new Dy}};f([My(Oy)],Ey.prototype,"angleKey",2),f([My(Oy)],Ey.prototype,"radiusKey",2),f([My(Oy,{optional:!0})],Ey.prototype,"angleName",2),f([My(Oy,{optional:!0})],Ey.prototype,"radiusName",2),f([My(by)],Ey.prototype,"fill",2),f([My(Ly)],Ey.prototype,"fillOpacity",2),f([My(by)],Ey.prototype,"stroke",2),f([My(Ty)],Ey.prototype,"strokeWidth",2),f([My(Ly)],Ey.prototype,"strokeOpacity",2),f([My(Iy)],Ey.prototype,"lineDash",2),f([My(Ty)],Ey.prototype,"lineDashOffset",2),f([My(Ny,{optional:!0})],Ey.prototype,"formatter",2),f([My(Sy)],Ey.prototype,"rotation",2),f([My(Oy,{optional:!0})],Ey.prototype,"stackGroup",2),f([My(ky,{optional:!0})],Ey.prototype,"normalizedTo",2),f([My(Ay)],Ey.prototype,"label",2),f([My(Ay)],Ey.prototype,"tooltip",2);var{motion:Ry}=o.i;function Cy(e){return{toFn:(t,i,o)=>{let a,s,n,r;return"removed"===o?(a=e,s=e,n=i.innerRadius,r=i.outerRadius):(a=i.startAngle,s=i.endAngle,n=isNaN(i.innerRadius)?t.innerRadius:i.innerRadius,r=isNaN(i.outerRadius)?t.outerRadius:i.outerRadius),{startAngle:a,endAngle:s,innerRadius:n,outerRadius:r}},fromFn:(t,i,o)=>{let a,s,n,r;o=function(e,t,i){if("updated"===i){if(null==e.previousDatum||isNaN(e.previousDatum.innerRadius)||isNaN(e.previousDatum.outerRadius))return"added";if(isNaN(t.innerRadius)||isNaN(t.outerRadius))return"removed"}return"added"===i&&null!=e.previousDatum?"updated":i}(t,i,o),"removed"===o||"updated"===o?(a=t.startAngle,s=t.endAngle,n=t.innerRadius,r=t.outerRadius):(a=e,s=e,n=i.innerRadius,r=i.outerRadius);return{startAngle:a,endAngle:s,innerRadius:n,outerRadius:r,phase:Ry.NODE_UPDATE_STATE_TO_PHASE_MAPPING[o]}}}}function wy(e,t){return{centerX:0,centerY:0,innerRadius:t.innerRadius,outerRadius:t.outerRadius,startAngle:t.startAngle,endAngle:t.endAngle}}var{ChartAxisDirection:Py,PolarAxis:_y,diff:zy,isDefined:Ky,groupAccumulativeValueProperty:Vy,keyProperty:jy,normaliseGroupTo:Fy,valueProperty:By,fixNumericExtent:Uy,resetLabelFn:Wy,seriesLabelFadeInAnimation:Gy,seriesLabelFadeOutAnimation:Yy,animationValidation:Hy}=o.m,{BandScale:Xy}=o.d,{Sector:Qy,motion:Zy}=o.i,{angleBetween:qy,isNumber:Jy,sanitizeHtml:$y}=o.s,eg=class extends o.m.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.angleKey=o.properties.angleKey,this.radiusKey=o.properties.radiusKey}},tg=class extends o.m.PolarSeries{constructor(e){super({moduleCtx:e,useLabelLayer:!0,canHaveAxes:!0,animationResetFns:{item:wy,label:Wy}}),this.properties=new Ey,this.NodeEvent=eg,this.nodeData=[],this.groupScale=new Xy,this.circleCache={r:0,cx:0,cy:0}}nodeFactory(){return new Qy}addChartEventListeners(){var e,t;this.destroyFns.push(null==(e=this.ctx.chartEventManager)?void 0:e.addListener("legend-item-click",(e=>this.onLegendItemClick(e))),null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-double-click",(e=>this.onLegendItemDoubleClick(e))))}getSeriesDomain(e){const{axes:t,dataModel:i,processedData:o}=this;if(!o||!i)return[];if(e===Py.X){const e=t[Py.X],a=i.getDomain(this,"angleValue-end","value",o),s=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return Uy(s,e)}return i.getDomain(this,"radiusValue","key",o)}processData(e){return D(this,null,(function*(){var t;if(!this.properties.isValid())return;const i=this.getStackId(),o="".concat(i,"-trailing"),{angleKey:a,radiusKey:s,normalizedTo:n,visible:r}=this.properties,l=[];Ky(n)&&l.push(Fy(this,[i,o],Math.abs(n),"range"));const h=!this.ctx.animationManager.isSkipped();h&&(this.processedData&&l.push(zy(this.processedData)),l.push(Hy(this)));const d=this.visible||!h?{}:{forceValue:0};yield this.requestDataModel(e,null!=(t=this.data)?t:[],{props:[jy(this,s,!1,{id:"radiusValue"}),By(this,a,!0,g({id:"angleValue-raw",invalidValue:null},d)),...Vy(this,a,!0,"normal","current",g({id:"angleValue-end",invalidValue:null,groupId:i},d)),...Vy(this,a,!0,"trailing","current",g({id:"angleValue-start",invalidValue:null,groupId:o},d)),...l],dataVisible:r||h}),this.animationState.transition("updateData")}))}didCircleChange(){const e=this.radius,t=this.centerX,i=this.centerY,o=this.circleCache;return(e!==o.r||t!==o.cx||i!==o.cy)&&(this.circleCache={r:e,cx:t,cy:i},!0)}maybeRefreshNodeData(){return D(this,null,(function*(){if(!this.didCircleChange()&&!this.nodeDataRefresh)return;const[{nodeData:e=[]}={}]=yield this.createNodeData();this.nodeData=e,this.nodeDataRefresh=!1}))}getAxisInnerRadius(){const e=this.axes[Py.Y];return e instanceof _y?this.radius*e.innerRadiusRatio:0}createNodeData(){return D(this,null,(function*(){var e,t;const{processedData:i,dataModel:o}=this;if(!i||!o||!this.properties.isValid())return[];const a=this.axes[Py.X],s=this.axes[Py.Y],n=null==a?void 0:a.scale,r=null==s?void 0:s.scale;if(!n||!r)return[];const l=o.resolveProcessedDataIndexById(this,"angleValue-start").index,h=o.resolveProcessedDataIndexById(this,"angleValue-end").index,d=o.resolveProcessedDataIndexById(this,"angleValue-raw").index;let c=0;s instanceof kt&&(c=s.groupPaddingInner);const{groupScale:u}=this,{index:p,visibleGroupCount:y}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);u.domain=Array.from({length:y}).map(((e,t)=>String(t))),u.range=[0,Math.abs(null!=(e=r.bandwidth)?e:0)],u.paddingInner=y>1?c:0;const g=u.bandwidth>=1?u.bandwidth:u.rawBandwidth,m=null==(t=this.axes[Py.Y])?void 0:t.isReversed(),x=m?this.radius:this.getAxisInnerRadius(),f=(m?this.getAxisInnerRadius():this.radius)+x,{angleKey:v,radiusKey:D,angleName:M,radiusName:b,label:S}=this.properties,N=(e,t,i,o)=>{const a=this.getLabelText(S,{value:t,datum:e,angleKey:v,radiusKey:D,angleName:M,radiusName:b},(e=>Jy(e)?e.toFixed(2):String(e)));if(a)return{x:i,y:o,text:a,textAlign:"center",textBaseline:"middle"}},I=i.data.map(((e,t)=>{const{datum:i,keys:o,values:a}=e,s=o[0],c=a[d],y=a[l],m=a[h];let x=Math.max(n.convert(y),n.range[0]),v=Math.min(n.convert(m),n.range[1]);x>v&&([x,v]=[v,x]),c<0&&([x,v]=[v,x]);const D=f-r.convert(s)+u.convert(String(p)),M=D+g,b=(D+M)/2,S=x+qy(x,v)/2,I=Math.cos(S)*b,k=Math.sin(S)*b;return{series:this,datum:i,point:{x:I,y:k,size:0},midPoint:{x:I,y:k},label:this.properties.label.enabled?N(i,c,I,k):void 0,angleValue:c,radiusValue:s,innerRadius:D,outerRadius:M,startAngle:x,endAngle:v,index:t}}));return[{itemId:D,nodeData:I,labelData:I}]}))}update(e){return D(this,arguments,(function(e){var t=this;let{seriesRect:i}=e;return function*(){const e=t.checkResize(i);yield t.maybeRefreshNodeData(),t.contentGroup.translationX=t.centerX,t.contentGroup.translationY=t.centerY,t.highlightGroup.translationX=t.centerX,t.highlightGroup.translationY=t.centerY,t.labelGroup&&(t.labelGroup.translationX=t.centerX,t.labelGroup.translationY=t.centerY),t.updateSectorSelection(t.itemSelection,!1),t.updateSectorSelection(t.highlightSelection,!0),t.updateLabels(),e&&t.animationState.transition("resize"),t.animationState.transition("update")}()}))}updateSectorSelection(e,t){var i,o,a,s,n;let r=[];if(t){const e=null==(i=this.ctx.highlightManager)?void 0:i.getActiveHighlight();null!=e&&e.datum&&e.series===this&&(r=[e])}else r=this.nodeData;const l=t?this.properties.highlightStyle.item:void 0,h=null!=(o=null==l?void 0:l.fill)?o:this.properties.fill,d=null!=(a=null==l?void 0:l.fillOpacity)?a:this.properties.fillOpacity,c=null!=(s=null==l?void 0:l.stroke)?s:this.properties.stroke,u=this.properties.strokeOpacity,p=null!=(n=null==l?void 0:l.strokeWidth)?n:this.properties.strokeWidth;e.update(r,void 0,(e=>e.radiusValue)).each(((e,i)=>{var o,a,s,n,r;const l=this.properties.formatter?this.ctx.callbackCache.call(this.properties.formatter,{datum:i,fill:h,stroke:c,strokeWidth:p,highlighted:t,angleKey:this.properties.angleKey,radiusKey:this.properties.radiusKey,seriesId:this.id}):void 0;e.fill=null!=(o=null==l?void 0:l.fill)?o:h,e.fillOpacity=null!=(a=null==l?void 0:l.fillOpacity)?a:d,e.stroke=null!=(s=null==l?void 0:l.stroke)?s:c,e.strokeOpacity=u,e.strokeWidth=null!=(n=null==l?void 0:l.strokeWidth)?n:p,e.lineDash=this.properties.lineDash,e.lineJoin="round",e.inset=null!=c?(null!=(r=null==l?void 0:l.strokeWidth)?r:p)/2:0,t&&(e.startAngle=i.startAngle,e.endAngle=i.endAngle,e.innerRadius=i.innerRadius,e.outerRadius=i.outerRadius)}))}updateLabels(){const{label:e}=this.properties;this.labelSelection.update(this.nodeData).each(((t,i)=>{e.enabled&&i.label?(t.x=i.label.x,t.y=i.label.y,t.fill=e.color,t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=i.label.text,t.textAlign=i.label.textAlign,t.textBaseline=i.label.textBaseline,t.visible=!0):t.visible=!1}))}getBarTransitionFunctions(){var e;const t=null==(e=this.axes[Py.X])?void 0:e.scale;let i=0;if(!t)return Cy(i);const o=Math.min(t.domain[0],t.domain[1]),a=Math.max(t.domain[0],t.domain[1]);return o<=0&&a>=0&&(i=t.convert(0)),Cy(i)}animateEmptyUpdateReady(){const{labelSelection:e}=this,t=this.getBarTransitionFunctions();Zy.fromToMotion(this.id,"datums",this.ctx.animationManager,[this.itemSelection],t),Gy(this,"labels",this.ctx.animationManager,[e])}animateClearingUpdateEmpty(){const{itemSelection:e}=this,{animationManager:t}=this.ctx,i=this.getBarTransitionFunctions();Zy.fromToMotion(this.id,"datums",t,[e],i),Yy(this,"labels",t,[this.labelSelection])}getTooltipHtml(e){var t;const{id:i,axes:o,dataModel:a}=this,{angleKey:s,angleName:n,radiusKey:r,radiusName:l,fill:h,stroke:d,strokeWidth:c,formatter:u,tooltip:p}=this.properties,{angleValue:y,radiusValue:g,datum:m}=e,x=o[Py.X],f=o[Py.Y];if(!this.properties.isValid()||!(x&&f&&Jy(y))||!a)return"";const v=x.formatDatum(y),D=f.formatDatum(g),M=$y(n),b=$y("".concat(D,": ").concat(v)),{fill:S}=null!=(t=u&&this.ctx.callbackCache.call(u,{datum:m,fill:h,stroke:d,strokeWidth:c,highlighted:!1,angleKey:s,radiusKey:r,seriesId:i}))?t:{fill:h};return p.toTooltipHtml({title:M,backgroundColor:h,content:b},{seriesId:i,datum:m,color:S,title:M,angleKey:s,radiusKey:r,angleName:n,radiusName:l})}getLegendData(e){var t;if(null==(t=this.data)||!t.length||!this.properties.isValid()||"category"!==e)return[];const{angleKey:i,angleName:o,fill:a,stroke:s,fillOpacity:n,strokeOpacity:r,strokeWidth:l,visible:h}=this.properties;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:h,label:{text:null!==o&&void 0!==o?o:i},marker:{fill:null!==a&&void 0!==a?a:"rgba(0, 0, 0, 0)",stroke:null!==s&&void 0!==s?s:"rgba(0, 0, 0, 0)",fillOpacity:null!==n&&void 0!==n?n:1,strokeOpacity:null!==r&&void 0!==r?r:1,strokeWidth:l}}]}onLegendItemClick(e){const{enabled:t,itemId:i,series:o}=e;o.id===this.id&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:o,numVisibleItems:a}=e,s=o.id===this.id||t&&1===a;this.toggleSeriesItem(i,s)}computeLabelsBBox(){return null}getStackId(){var e,t;return"radialBar-stack-".concat(null!=(t=null==(e=this.seriesGrouping)?void 0:e.groupIndex)?t:this.id,"-xValues")}};tg.className="RadialBarSeries",tg.type="radial-bar";var ig={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:o.a.DEFAULT_FONT_FAMILY,color:o.a.DEFAULT_INVERTED_LABEL_COLOUR,__overrides__:o.a.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[o.a.POLAR_AXIS_TYPE.RADIUS_CATEGORY]:{innerRadiusRatio:.2,groupPaddingInner:.2,paddingInner:.2,paddingOuter:.1}}},og={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-bar",instanceConstructor:tg,defaultAxes:[{type:o.a.POLAR_AXIS_TYPE.ANGLE_NUMBER},{type:o.a.POLAR_AXIS_TYPE.RADIUS_CATEGORY}],themeTemplate:ig,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[o]}=t(1);return{fill:i,stroke:o}},stackable:!0,groupable:!0},{Validate:ag,RATIO:sg}=o.m,ng=class extends np{};f([ag(sg,{optional:!0})],ng.prototype,"columnWidthRatio",2),f([ag(sg,{optional:!0})],ng.prototype,"maxColumnWidthRatio",2);var{ChartAxisDirection:rg,PolarAxis:lg}=o.m,{RadialColumnShape:hg,getRadialColumnWidth:dg}=o.i,cg=class extends Yu{constructor(e){super(e,{animationResetFns:{item:dp}}),this.properties=new ng}getStackId(){var e,t;return"radarColumn-stack-".concat(null!=(t=null==(e=this.seriesGrouping)?void 0:e.groupIndex)?t:this.id,"-yValues")}nodeFactory(){return new hg}getColumnTransitionFunctions(){return function(e){const t=lp();return{toFn:(i,o,a)=>{const{startAngle:s,endAngle:n}=t.to(o);let r,l,h,d,c;return"removed"===a?(r=i.innerRadius,l=i.innerRadius,h=i.columnWidth,d=i.axisInnerRadius,c=i.axisOuterRadius):(r=isNaN(o.innerRadius)?e:o.innerRadius,l=isNaN(o.outerRadius)?e:o.outerRadius,h=isNaN(o.columnWidth)?i.columnWidth:o.columnWidth,d=o.axisInnerRadius,c=o.axisOuterRadius),{innerRadius:r,outerRadius:l,columnWidth:h,axisInnerRadius:d,axisOuterRadius:c,startAngle:s,endAngle:n}},fromFn:(i,o,a)=>{a=hp(i,o,a),t.calculate(i,o,a);const{startAngle:s,endAngle:n}=t.from(o);let r,l,h,d,c;return"removed"===a||"updated"===a?(r=i.innerRadius,l=i.outerRadius,h=i.columnWidth,d=i.axisInnerRadius,c=i.axisOuterRadius):(r=e,l=e,h=o.columnWidth,d=o.axisInnerRadius,c=o.axisOuterRadius),{innerRadius:r,outerRadius:l,columnWidth:h,axisInnerRadius:d,axisOuterRadius:c,startAngle:s,endAngle:n,phase:rp.NODE_UPDATE_STATE_TO_PHASE_MAPPING[a]}}}}(this.isRadiusAxisReversed()?this.radius:this.getAxisInnerRadius())}isRadiusAxisCircle(){const e=this.axes[rg.Y];return e instanceof lg&&"circle"===e.shape}updateItemPath(e,t,i){e.isBeveled=this.isRadiusAxisCircle(),e.isRadiusAxisReversed=this.isRadiusAxisReversed(),i&&(e.innerRadius=t.innerRadius,e.outerRadius=t.outerRadius,e.startAngle=t.startAngle,e.endAngle=t.endAngle,e.columnWidth=t.columnWidth,e.axisInnerRadius=t.axisInnerRadius,e.axisOuterRadius=t.axisOuterRadius)}getColumnWidth(e,t){const{columnWidthRatio:i=.5,maxColumnWidthRatio:o=.5}=this.properties;return dg(e,t,this.radius,i,o)}};cg.className="RadialColumnSeries",cg.type="radial-column";var ug={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,columnWidthRatio:.5,maxColumnWidthRatio:.5,strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:o.a.DEFAULT_FONT_FAMILY,color:o.a.DEFAULT_LABEL_COLOUR,__overrides__:o.a.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[o.a.POLAR_AXIS_TYPE.ANGLE_CATEGORY]:{shape:o.a.POLAR_AXIS_SHAPE.CIRCLE,groupPaddingInner:0,paddingInner:0,label:{padding:10}},[o.a.POLAR_AXIS_TYPE.RADIUS_NUMBER]:{shape:o.a.POLAR_AXIS_SHAPE.CIRCLE,innerRadiusRatio:.5}}},pg={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["polar"],identifier:"radial-column",instanceConstructor:cg,defaultAxes:[{type:o.a.POLAR_AXIS_TYPE.ANGLE_CATEGORY},{type:o.a.POLAR_AXIS_TYPE.RADIUS_NUMBER}],themeTemplate:ug,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[o]}=t(1);return{fill:i,stroke:o}},stackable:!0,groupable:!0},{DropShadow:yg,Label:gg}=o.i,{CartesianSeriesProperties:mg,SeriesMarker:xg,SeriesTooltip:fg,Validate:vg,BOOLEAN:Dg,COLOR_STRING:Mg,LINE_DASH:bg,OBJECT:Sg,PLACEMENT:Ng,POSITIVE_NUMBER:Ig,RATIO:kg,STRING:Ag}=o.m,Tg=class extends gg{constructor(){super(...arguments),this.placement="outside",this.padding=6}};f([vg(Ng)],Tg.prototype,"placement",2),f([vg(Ig)],Tg.prototype,"padding",2);var Lg=class extends mg{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=(new yg).set({enabled:!1}),this.marker=new xg,this.label=new Tg,this.tooltip=new fg,this.connectMissingData=!1}};f([vg(Ag)],Lg.prototype,"xKey",2),f([vg(Ag)],Lg.prototype,"yLowKey",2),f([vg(Ag)],Lg.prototype,"yHighKey",2),f([vg(Ag,{optional:!0})],Lg.prototype,"xName",2),f([vg(Ag,{optional:!0})],Lg.prototype,"yName",2),f([vg(Ag,{optional:!0})],Lg.prototype,"yLowName",2),f([vg(Ag,{optional:!0})],Lg.prototype,"yHighName",2),f([vg(Mg)],Lg.prototype,"fill",2),f([vg(kg)],Lg.prototype,"fillOpacity",2),f([vg(Mg)],Lg.prototype,"stroke",2),f([vg(Ig)],Lg.prototype,"strokeWidth",2),f([vg(kg)],Lg.prototype,"strokeOpacity",2),f([vg(bg)],Lg.prototype,"lineDash",2),f([vg(Ig)],Lg.prototype,"lineDashOffset",2),f([vg(Sg)],Lg.prototype,"shadow",2),f([vg(Sg)],Lg.prototype,"marker",2),f([vg(Sg)],Lg.prototype,"label",2),f([vg(Sg)],Lg.prototype,"tooltip",2),f([vg(Dg)],Lg.prototype,"connectMissingData",2);var{valueProperty:Og,keyProperty:Eg,ChartAxisDirection:Rg,mergeDefaults:Cg,updateLabelNode:wg,fixNumericExtent:Pg,AreaSeriesTag:_g,buildResetPathFn:zg,resetLabelFn:Kg,resetMarkerFn:Vg,resetMarkerPositionFn:jg,pathSwipeInAnimation:Fg,resetMotion:Bg,markerSwipeScaleInAnimation:Ug,seriesLabelFadeInAnimation:Wg,animationValidation:Gg,diff:Yg,updateClipPath:Hg}=o.m,{getMarker:Xg,PointerEvents:Qg}=o.i,{sanitizeHtml:Zg,extent:qg,isNumber:Jg}=o.s,$g=class extends o.m.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},em=class e extends o.m.CartesianSeries{constructor(e){super({moduleCtx:e,hasMarkers:!0,pathsPerSeries:2,directionKeys:{[Rg.X]:["xKey"],[Rg.Y]:["yLowKey","yHighKey"]},directionNames:{[Rg.X]:["xName"],[Rg.Y]:["yLowName","yHighName","yName"]},animationResetFns:{path:zg({getOpacity:()=>this.getOpacity()}),label:Kg,marker:(e,t)=>g(g({},Vg(e)),jg(e,t))}}),this.properties=new Lg,this.NodeEvent=$g}processData(e){return D(this,null,(function*(){var t;if(!this.properties.isValid())return;const{xKey:i,yLowKey:o,yHighKey:a}=this.properties,{isContinuousX:s,isContinuousY:n}=this.isContinuous(),r=[],l=!this.ctx.animationManager.isSkipped();!this.ctx.animationManager.isSkipped()&&this.processedData&&r.push(Yg(this.processedData)),l&&r.push(Gg(this)),yield this.requestDataModel(e,null!=(t=this.data)?t:[],{props:[Eg(this,i,s,{id:"xValue"}),Og(this,o,n,{id:"yLowValue",invalidValue:void 0}),Og(this,a,n,{id:"yHighValue",invalidValue:void 0}),...r],dataVisible:this.visible}),this.animationState.transition("updateData")}))}getSeriesDomain(e){const{processedData:t,dataModel:i,axes:o}=this;if(!t||!i)return[];const{domain:{keys:[a],values:s}}=t;if(e===Rg.X){const e=i.resolveProcessedDataDefById(this,"xValue"),t=o[Rg.X];return"key"===(null==e?void 0:e.def.type)&&"category"===e.def.valueType?a:Pg(qg(a),t)}{const e=s[i.resolveProcessedDataIndexById(this,"yLowValue").index],t=s[i.resolveProcessedDataIndexById(this,"yHighValue").index],o=[e[0]>t[0]?t[0]:e[0],t[1]<e[1]?e[1]:t[1]];return Pg(o)}}createNodeData(){return D(this,null,(function*(){var t,i;const{data:o,dataModel:a,axes:s,visible:n}=this,r=s[Rg.X],l=s[Rg.Y];if(!(o&&n&&r&&l&&a))return[];const h=r.scale,d=l.scale,{xKey:c,yLowKey:u,yHighKey:p,connectMissingData:y,marker:f}=this.properties,D="".concat(u,"-").concat(p),M=(null!=(t=h.bandwidth)?t:0)/2,b=a.resolveProcessedDataDefsByIds(this,["xValue","yHighValue","yLowValue"]),S=(e,t,i)=>{const o=h.convert(e)+M,a=d.convert(t),s=d.convert(i);return[{point:{x:o,y:a},size:f.size,itemId:"high",yValue:t,xValue:e},{point:{x:o,y:s},size:f.size,itemId:"low",yValue:i,xValue:e}]},N=e=>{const t=e,{point:i}=t,o=x(t,["point"]);return m(g({},o),{point:m(g({},i),{moveTo:!0})})},I=[],k=[],A={itemId:D,points:[]},T={itemId:D,points:[]},L={itemId:D,labelData:I,nodeData:k,fillData:T,strokeData:A,scales:v(e.prototype,this,"calculateScaling").call(this),visible:this.visible},O=T.points,E=[],R=A.points,C=[];let w,P=-1/0,_=-1/0;return null==(i=this.processedData)||i.data.forEach(((e,t)=>{let{keys:i,datum:o,values:s}=e;const n=a.resolveProcessedDataDefsValues(b,{keys:i,values:s}),{xValue:r,yHighValue:l,yLowValue:h}=n,d=null==l||null==h?[]:S(r,l,h),g=h>l;d.forEach((e=>{let{point:{x:i,y:a},size:s,itemId:n="",yValue:d}=e;k.push({index:t,series:this,itemId:n,datum:o,midPoint:{x:i,y:a},yHighValue:l,yLowValue:h,xValue:r,xKey:c,yLowKey:u,yHighKey:p,point:{x:i,y:a,size:s}});const y=this.createLabelData({point:{x:i,y:a},value:d,yLowValue:h,yHighValue:l,itemId:n,inverted:g,datum:o,series:this});I.push(y)}));const m=null!=P&&null!=_,x=null!=w&&m,f=null!=r,v=null!=l&&null!=h;let[D,M]=S(r,null!==l&&void 0!==l?l:0,null!==h&&void 0!==h?h:0);if(!y)if(v){if(!m){const[e,t]=S(r,0,0);O.push(e),E.push(t)}}else{const[e,t]=S(w,0,0);O.push(e),E.push(t)}f&&v&&(O.push(D),E.push(M)),f&&v&&!x&&!y&&t>0&&(D=N(D),M=N(M)),f&&v&&(R.push(D),C.push(M)),w=r,P=l,_=h})),O.length>0&&(O[0]=N(O[0])),O.push(...E.reverse()),C.length>0&&(C[0]=N(C[0])),R.push(...C),[L]}))}createLabelData(e){let{point:t,value:i,itemId:o,inverted:a,datum:s,series:n}=e;const{xKey:r,yLowKey:l,yHighKey:h,xName:d,yName:c,yLowName:u,yHighName:p,label:y}=this.properties,{placement:g,padding:m=10}=y;let x=o;a&&(x="low"===o?"high":"low");const f="outside"===g&&"high"===x||"inside"===g&&"low"===x?-1:1;return{x:t.x,y:t.y+m*f,series:n,itemId:o,datum:s,text:this.getLabelText(y,{value:i,datum:s,itemId:o,xKey:r,yLowKey:l,yHighKey:h,xName:d,yLowName:u,yHighName:p,yName:c},(e=>Jg(e)?e.toFixed(2):String(e))),textAlign:"center",textBaseline:-1===f?"bottom":"top"}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(Xg(e))}updatePathNodes(e){return D(this,null,(function*(){const{opacity:t,visible:i}=e,[o,a]=e.paths,s=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({tag:_g.Stroke,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:Qg.None,stroke:this.properties.stroke,strokeWidth:s,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i}),o.setProperties({tag:_g.Fill,stroke:void 0,lineJoin:"round",pointerEvents:Qg.None,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,strokeWidth:s,opacity:t,visible:i}),Hg(this,a),Hg(this,o)}))}updatePaths(e){return D(this,null,(function*(){this.updateAreaPaths([e.paths],[e.contextData])}))}updateAreaPaths(e,t){this.updateFillPath(e,t),this.updateStrokePath(e,t)}updateFillPath(e,t){t.forEach(((t,i)=>{let{fillData:o}=t;const[a]=e[i],{path:s}=a;s.clear({trackChanges:!0});for(const{point:e}of o.points)e.moveTo?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y);s.closePath(),a.checkPathDirty()}))}updateStrokePath(e,t){t.forEach(((t,i)=>{let{strokeData:o}=t;const[,a]=e[i],{path:s}=a;s.clear({trackChanges:!0});for(const{point:e}of o.points)e.moveTo?s.moveTo(e.x,e.y):s.lineTo(e.x,e.y);a.checkPathDirty()}))}updateMarkerSelection(e){return D(this,null,(function*(){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}))}updateMarkerNodes(e){return D(this,null,(function*(){const{markerSelection:t,isHighlight:i}=e,{xKey:o,yLowKey:a,yHighKey:s,marker:n,fill:r,stroke:l,strokeWidth:h,fillOpacity:d,strokeOpacity:c}=this.properties,u=Cg(i&&this.properties.highlightStyle.item,n.getStyle(),{fill:r,fillOpacity:d,stroke:l,strokeWidth:h,strokeOpacity:c});t.each(((e,t)=>{this.updateMarkerStyle(e,n,{datum:t,highlighted:i,xKey:o,yHighKey:s,yLowKey:a},u)})),i||this.properties.marker.markClean()}))}updateLabelSelection(e){return D(this,null,(function*(){const{labelData:t,labelSelection:i}=e;return i.update(t,(e=>{e.tag=_g.Label,e.pointerEvents=Qg.None}))}))}updateLabelNodes(e){return D(this,null,(function*(){e.labelSelection.each(((e,t)=>{wg(e,this.properties.label,t)}))}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}getHighlightData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}getTooltipHtml(e){const t=this.axes[Rg.X],i=this.axes[Rg.Y];if(!this.properties.isValid()||!t||!i)return"";const{id:o}=this,{xKey:a,yLowKey:s,yHighKey:n,xName:r,yName:l,yLowName:h,yHighName:d,fill:c,tooltip:u}=this.properties,{datum:p,itemId:y,xValue:g,yLowValue:m,yHighValue:x}=e,f=null!==c&&void 0!==c?c:"gray",v=Zg(t.formatDatum(g)),D=Zg(i.formatDatum(m)),M=Zg(i.formatDatum(x)),b=null!==r&&void 0!==r?r:a,S=null!==h&&void 0!==h?h:s,N=null!==d&&void 0!==d?d:n,I=Zg(l),k=l?"<b>".concat(Zg(b),"</b>: ").concat(v,"<br><b>").concat(Zg(S),"</b>: ").concat(D,"<br><b>").concat(Zg(N),"</b>: ").concat(M,"<br>"):"".concat(v,": ").concat(D," - ").concat(M);return u.toTooltipHtml({title:I,content:k,backgroundColor:f},{seriesId:o,itemId:y,datum:p,xKey:a,yLowKey:s,yHighKey:n,xName:r,yLowName:h,yHighName:d,yName:l,color:f})}getLegendData(e){var t,i;if("category"!==e)return[];const{yLowKey:o,yHighKey:a,yName:s,yLowName:n,yHighName:r,fill:l,stroke:h,strokeWidth:d,strokeOpacity:c,lineDash:u,visible:p,marker:y}=this.properties,g=null!==s&&void 0!==s?s:"".concat(null!==n&&void 0!==n?n:o," - ").concat(null!==r&&void 0!==r?r:a);return[{legendType:"category",id:this.id,itemId:"".concat(o,"-").concat(a),seriesId:this.id,enabled:p,label:{text:"".concat(g)},marker:{shape:y.shape,fill:null!=(t=y.fill)?t:l,stroke:null!=(i=y.stroke)?i:h,fillOpacity:y.fillOpacity,strokeOpacity:y.strokeOpacity,strokeWidth:y.strokeWidth},line:{stroke:h,strokeOpacity:c,strokeWidth:d,lineDash:u}}]}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}nodeFactory(){return new o.i.Group}animateEmptyUpdateReady(e){const{markerSelections:t,labelSelections:i,contextData:o,paths:a}=e,{animationManager:s}=this.ctx;this.updateAreaPaths(a,o),Fg(this,s,a.flat()),Bg(t,jg),Ug(this,s,t),Wg(this,"labels",s,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{contextData:t,paths:i}=e;super.animateWaitingUpdateReady(e),this.updateAreaPaths(i,t)}};em.className="RangeAreaSeries",em.type="range-area";var tm=em,im={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,fillOpacity:.7,nodeClickRange:"nearest",marker:{__extends__:o.a.EXTENDS_CARTESIAN_MARKER_DEFAULTS,enabled:!1,fillOpacity:1,strokeWidth:2,size:6},label:{enabled:!1,placement:"outside",padding:10,fontSize:12,fontFamily:o.a.DEFAULT_FONT_FAMILY,color:o.a.DEFAULT_LABEL_COLOUR,__overrides__:o.a.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[o.a.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},{markerPaletteFactory:om}=o.m,am={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-area",instanceConstructor:tm,defaultAxes:[{type:o.a.CARTESIAN_AXIS_TYPE.NUMBER,position:o.a.POSITION.LEFT},{type:o.a.CARTESIAN_AXIS_TYPE.CATEGORY,position:o.a.POSITION.BOTTOM}],themeTemplate:im,paletteFactory:e=>{const{marker:t}=om(e);return{fill:t.fill,stroke:t.stroke,marker:t}}},{DropShadow:sm,Label:nm}=o.i,{AbstractBarSeriesProperties:rm,SeriesTooltip:lm,Validate:hm,COLOR_STRING:dm,FUNCTION:cm,LINE_DASH:um,OBJECT:pm,PLACEMENT:ym,POSITIVE_NUMBER:gm,RATIO:mm,STRING:xm}=o.m,fm=class extends nm{constructor(){super(...arguments),this.placement="inside",this.padding=6}};f([hm(ym)],fm.prototype,"placement",2),f([hm(gm)],fm.prototype,"padding",2);var vm=class extends rm{constructor(){super(...arguments),this.fill="#99CCFF",this.fillOpacity=1,this.stroke="#99CCFF",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=(new sm).set({enabled:!1}),this.label=new fm,this.tooltip=new lm}};f([hm(xm)],vm.prototype,"xKey",2),f([hm(xm)],vm.prototype,"yLowKey",2),f([hm(xm)],vm.prototype,"yHighKey",2),f([hm(xm,{optional:!0})],vm.prototype,"xName",2),f([hm(xm,{optional:!0})],vm.prototype,"yName",2),f([hm(xm,{optional:!0})],vm.prototype,"yLowName",2),f([hm(xm,{optional:!0})],vm.prototype,"yHighName",2),f([hm(dm)],vm.prototype,"fill",2),f([hm(mm)],vm.prototype,"fillOpacity",2),f([hm(dm)],vm.prototype,"stroke",2),f([hm(gm)],vm.prototype,"strokeWidth",2),f([hm(mm)],vm.prototype,"strokeOpacity",2),f([hm(um)],vm.prototype,"lineDash",2),f([hm(gm)],vm.prototype,"lineDashOffset",2),f([hm(gm)],vm.prototype,"cornerRadius",2),f([hm(cm,{optional:!0})],vm.prototype,"formatter",2),f([hm(pm)],vm.prototype,"shadow",2),f([hm(pm)],vm.prototype,"label",2),f([hm(pm)],vm.prototype,"tooltip",2);var{SeriesNodePickMode:Dm,valueProperty:Mm,keyProperty:bm,ChartAxisDirection:Sm,getRectConfig:Nm,updateRect:Im,checkCrisp:km,updateLabelNode:Am,SMALLEST_KEY_INTERVAL:Tm,diff:Lm,prepareBarAnimationFunctions:Om,midpointStartingBarPosition:Em,resetBarSelectionsFn:Rm,fixNumericExtent:Cm,seriesLabelFadeInAnimation:wm,resetLabelFn:Pm,animationValidation:_m,createDatumId:zm}=o.m,{Rect:Km,PointerEvents:Vm,motion:jm}=o.i,{sanitizeHtml:Fm,isNumber:Bm,extent:Um}=o.s,{ContinuousScale:Wm,OrdinalTimeScale:Gm}=o.d,Ym=class extends o.m.SeriesNodeEvent{constructor(e,t,i,o){super(e,t,i,o),this.xKey=o.properties.xKey,this.yLowKey=o.properties.yLowKey,this.yHighKey=o.properties.yHighKey}},Hm=class e extends o.m.AbstractBarSeries{constructor(e){super({moduleCtx:e,pickModes:[Dm.EXACT_SHAPE_MATCH],hasHighlightedLabels:!0,directionKeys:{x:["xKey"],y:["yLowKey","yHighKey"]},directionNames:{x:["xName"],y:["yLowName","yHighName","yName"]},datumSelectionGarbageCollection:!1,animationResetFns:{datum:Rm,label:Pm}}),this.properties=new vm,this.NodeEvent=Ym}processData(e){return D(this,null,(function*(){var t,i,o,a,s;if(!this.properties.isValid())return;const{xKey:n,yLowKey:r,yHighKey:l}=this.properties,h=null==(t=this.getCategoryAxis())?void 0:t.scale,d=null==(i=this.getValueAxis())?void 0:i.scale,c=Wm.is(h)||Gm.is(h),u=Wm.is(d)||Gm.is(d),p=Wm.is(h)?"range":"category",y=[];this.ctx.animationManager.isSkipped()||(this.processedData&&y.push(Lm(this.processedData)),y.push(_m(this)));const m=this.visible?{}:{forceValue:0},{processedData:x}=yield this.requestDataModel(e,null!=(o=this.data)?o:[],{props:[bm(this,n,c,{id:"xValue",valueType:p}),Mm(this,r,u,g({id:"yLowValue"},m)),Mm(this,l,u,g({id:"yHighValue"},m)),...c?[Tm]:[],...y],groupByKeys:!0});this.smallestDataInterval={x:null!=(s=null==(a=x.reduced)?void 0:a.smallestKeyInterval)?s:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(e){var t;const{processedData:i,dataModel:o}=this;if(!i||!o)return[];const{domain:{keys:[a],values:s}}=i;if(e===this.getCategoryDirection()){const s=o.resolveProcessedDataDefById(this,"xValue");if("key"===(null==s?void 0:s.def.type)&&"category"===(null==s?void 0:s.def.valueType))return a;const{reduced:{[Tm.property]:n}={}}=i,r=null!=n&&isFinite(n)?n:0,l=null!=(t=Um(a))?t:[NaN,NaN],h=this.getCategoryAxis(),d=null==h?void 0:h.isReversed();if(e===Sm.Y){const e=l[0]+(d?0:-r),t=l[1]+(d?r:0);return Cm([e,t],h)}const c=l[0]+(d?-r:0),u=l[1]+(d?0:r);return Cm([c,u],h)}{const e=s[o.resolveProcessedDataIndexById(this,"yLowValue").index],t=s[o.resolveProcessedDataIndexById(this,"yHighValue").index],i=[e[0]>t[0]?t[0]:e[0],t[1]<e[1]?e[1]:t[1]];return Cm(i)}}createNodeData(){return D(this,null,(function*(){const{data:t,dataModel:i,groupScale:o,processedData:a,properties:{visible:s}}=this,n=this.getCategoryAxis(),r=this.getValueAxis();if(!(t&&s&&n&&r&&i))return[];const l=n.scale,h=r.scale,d=this.getBarDirection()===Sm.X,{xKey:c,yLowKey:u,yHighKey:p,fill:y,stroke:g,strokeWidth:m}=this.properties,x="".concat(u,"-").concat(p),f=[],D=i.resolveProcessedDataIndexById(this,"yLowValue").index,M=i.resolveProcessedDataIndexById(this,"yHighValue").index,b=i.resolveProcessedDataIndexById(this,"xValue").index,{barWidth:S,groupIndex:N}=this.updateGroupScale(n);return null==a||a.data.forEach(((t,i)=>{let{keys:a,datum:s,values:n}=t;n.forEach(((t,n)=>{null!=f[n]||(f[n]={itemId:x,nodeData:[],labelData:[],scales:v(e.prototype,this,"calculateScaling").call(this),visible:this.visible});const r=a[b],I=Math.round(l.convert(r))+o.convert(String(N)),k=t[D],A=t[M],T=Math.min(k,A),L=Math.max(k,A),O=Math.round(h.convert(T)),E=Math.round(h.convert(L)),R=O,C=Math.max(m,Math.abs(R-E)),w={x:d?Math.min(E,R):I,y:d?I:Math.min(E,R),width:d?C:S,height:d?S:C},P={x:w.x+w.width/2,y:w.y+w.height/2},_=this.createLabelData({rect:w,barAlongX:d,yLowValue:T,yHighValue:L,datum:s[n],series:this}),z={index:i,series:this,itemId:x,datum:s[n],xValue:r,yLowValue:k,yHighValue:A,yLowKey:u,yHighKey:p,xKey:c,x:w.x,y:w.y,width:w.width,height:w.height,midPoint:P,fill:y,stroke:g,strokeWidth:m,opacity:1,labels:_};f[n].nodeData.push(z),f[n].labelData.push(..._)}))})),f}))}createLabelData(e){let{rect:t,barAlongX:i,yLowValue:o,yHighValue:a,datum:s,series:n}=e;const{xKey:r,yLowKey:l,yHighKey:h,xName:d,yLowName:c,yHighName:u,yName:p,label:y}=this.properties,m={datum:s,xKey:r,yLowKey:l,yHighKey:h,xName:d,yLowName:c,yHighName:u,yName:p},{placement:x,padding:f}=y,v=f*("outside"===x?1:-1),D={x:t.x+(i?-v:t.width/2),y:t.y+(i?t.height/2:t.height+v),textAlign:i?"left":"center",textBaseline:i?"middle":"bottom",text:this.getLabelText(y,g({itemId:"low",value:o},m),(e=>Bm(e)?e.toFixed(2):"")),itemId:"low",datum:s,series:n},M={x:t.x+(i?t.width+v:t.width/2),y:t.y+(i?t.height/2:-v),textAlign:i?"right":"center",textBaseline:i?"middle":"top",text:this.getLabelText(y,g({itemId:"high",value:a},m),(e=>Bm(e)?e.toFixed(2):"")),itemId:"high",datum:s,series:n};return"outside"===x&&(D.textAlign=i?"right":"center",D.textBaseline=i?"middle":"top",M.textAlign=i?"left":"center",M.textBaseline=i?"middle":"bottom"),[D,M]}nodeFactory(){return new Km}updateDatumSelection(e){return D(this,null,(function*(){const{nodeData:t,datumSelection:i}=e,o=null!==t&&void 0!==t?t:[];return i.update(o,void 0,(e=>this.getDatumId(e)))}))}updateDatumNodes(e){return D(this,null,(function*(){const{datumSelection:t,isHighlight:i}=e,{id:o,ctx:a}=this,{yLowKey:s,yHighKey:n,highlightStyle:{item:r}}=this.properties,l=this.axes[Sm.X],h=km(null==l?void 0:l.visibleRange),d=this.getCategoryDirection()===Sm.X;t.each(((e,t)=>{const{fillOpacity:l,strokeOpacity:c,strokeWidth:u,lineDash:p,lineDashOffset:y,formatter:g,shadow:m}=this.properties,x={fill:t.fill,stroke:t.stroke,fillOpacity:l,strokeOpacity:c,lineDash:p,lineDashOffset:y,fillShadow:m,strokeWidth:this.getStrokeWidth(u),cornerRadius:this.properties.cornerRadius},f=d?t.width>0:t.height>0,v=Nm({datum:t,lowValue:t.yLowValue,highValue:t.yHighValue,isHighlighted:i,style:x,highlightStyle:r,formatter:g,seriesId:o,itemId:t.itemId,ctx:a,yLowKey:s,yHighKey:n});v.crisp=h,v.visible=f,Im({rect:e,config:v})}))}))}getHighlightLabelData(e,t){const i=e.filter((e=>e.datum===t.datum));return i.length>0?i:void 0}updateLabelSelection(e){return D(this,null,(function*(){const t=this.properties.label.enabled?e.labelData:[];return e.labelSelection.update(t,(e=>{e.pointerEvents=Vm.None}))}))}updateLabelNodes(e){return D(this,null,(function*(){e.labelSelection.each(((e,t)=>{Am(e,this.properties.label,t)}))}))}getTooltipHtml(e){var t,i;const{id:o,ctx:{callbackCache:a}}=this,s=this.getCategoryAxis(),n=this.getValueAxis();if(!this.properties.isValid()||!s||!n)return"";const{xKey:r,yLowKey:l,yHighKey:h,xName:d,yLowName:c,yHighName:u,yName:p,fill:y,strokeWidth:g,formatter:m,tooltip:x}=this.properties,{datum:f,itemId:v,xValue:D,yLowValue:M,yHighValue:b}=e;let S;m&&(S=a.call(m,{datum:f,xKey:r,yLowKey:l,yHighKey:h,fill:y,strokeWidth:g,highlighted:!1,seriesId:o,itemId:v}));const N=null!=(i=null!=(t=null==S?void 0:S.fill)?t:y)?i:"gray",I=Fm(s.formatDatum(D)),k=Fm(n.formatDatum(M)),A=Fm(n.formatDatum(b)),T=null!==d&&void 0!==d?d:r,L=null!==c&&void 0!==c?c:l,O=null!==u&&void 0!==u?u:h,E={title:Fm(p),content:p?"<b>".concat(Fm(T),"</b>: ").concat(I,"<br><b>").concat(Fm(L),"</b>: ").concat(k,"<br><b>").concat(Fm(O),"</b>: ").concat(A,"<br>"):"".concat(I,": ").concat(k," - ").concat(A),backgroundColor:N};return x.toTooltipHtml(E,{datum:f,xKey:r,xName:d,yLowKey:l,yLowName:c,yHighKey:h,yHighName:u,yName:p,color:N,seriesId:o,itemId:v})}getLegendData(e){const{id:t,visible:i}=this;if("category"!==e)return[];const{fill:o,stroke:a,strokeWidth:s,fillOpacity:n,strokeOpacity:r,yName:l,yLowName:h,yHighName:d,yLowKey:c,yHighKey:u}=this.properties,p=null!==l&&void 0!==l?l:"".concat(null!==h&&void 0!==h?h:c," - ").concat(null!==d&&void 0!==d?d:u);return[{legendType:"category",id:t,itemId:"".concat(c,"-").concat(u),seriesId:t,enabled:i,label:{text:"".concat(p)},marker:{fill:o,stroke:a,fillOpacity:n,strokeOpacity:r,strokeWidth:s}}]}animateEmptyUpdateReady(e){let{datumSelections:t,labelSelections:i}=e;const o=Om(Em(this.isVertical(),"normal"));jm.fromToMotion(this.id,"datums",this.ctx.animationManager,t,o),wm(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){var t;const{datumSelections:i,labelSelections:o}=e,{processedData:a}=this,s=null==(t=null==a?void 0:a.reduced)?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const n=Om(Em(this.isVertical(),"fade"));jm.fromToMotion(this.id,"datums",this.ctx.animationManager,i,n,((e,t)=>zm(t.xValue)),s),wm(this,"labels",this.ctx.animationManager,o)}getDatumId(e){return"".concat(e.xValue)}isLabelEnabled(){return this.properties.label.enabled}onDataChange(){}};Hm.className="RangeBarSeries",Hm.type="range-bar";var Xm=Hm,Qm={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,direction:"vertical",strokeWidth:0,label:{enabled:!1,fontSize:12,fontFamily:o.a.DEFAULT_FONT_FAMILY,color:o.a.DEFAULT_INSIDE_SERIES_LABEL_COLOUR,placement:"inside",__overrides__:o.a.OVERRIDE_SERIES_LABEL_DEFAULTS}},axes:{[o.a.CARTESIAN_AXIS_TYPE.NUMBER]:{crosshair:{enabled:!0,snap:!1}}}},Zm={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"range-bar",instanceConstructor:Xm,defaultAxes:[{type:o.a.CARTESIAN_AXIS_TYPE.CATEGORY,position:o.a.POSITION.BOTTOM},{type:o.a.CARTESIAN_AXIS_TYPE.NUMBER,position:o.a.POSITION.LEFT}],themeTemplate:Qm,paletteFactory:e=>{let{takeColors:t}=e;const{fills:[i],strokes:[o]}=t(1);return{fill:i,stroke:o}},groupable:!0,swapDefaultAxesCondition:e=>{let{direction:t}=e;return"horizontal"===t}},{HierarchySeriesProperties:qm,HighlightStyle:Jm,SeriesTooltip:$m,Validate:ex,COLOR_STRING:tx,FUNCTION:ix,NUMBER:ox,OBJECT:ax,POSITIVE_NUMBER:sx,RATIO:nx,STRING:rx}=o.m,lx=class extends Jm{constructor(){super(...arguments),this.label=new hl,this.secondaryLabel=new hl}};f([ex(rx,{optional:!0})],lx.prototype,"fill",2),f([ex(nx,{optional:!0})],lx.prototype,"fillOpacity",2),f([ex(tx,{optional:!0})],lx.prototype,"stroke",2),f([ex(sx,{optional:!0})],lx.prototype,"strokeWidth",2),f([ex(nx,{optional:!0})],lx.prototype,"strokeOpacity",2),f([ex(ax)],lx.prototype,"label",2),f([ex(ax)],lx.prototype,"secondaryLabel",2);var hx=class extends qm{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=0,this.strokeOpacity=1,this.highlightStyle=new lx,this.label=new hl,this.secondaryLabel=new dl,this.tooltip=new $m}};f([ex(rx,{optional:!0})],hx.prototype,"sizeName",2),f([ex(rx,{optional:!0})],hx.prototype,"labelKey",2),f([ex(rx,{optional:!0})],hx.prototype,"secondaryLabelKey",2),f([ex(nx)],hx.prototype,"fillOpacity",2),f([ex(sx)],hx.prototype,"strokeWidth",2),f([ex(nx)],hx.prototype,"strokeOpacity",2),f([ex(ox,{optional:!0})],hx.prototype,"sectorSpacing",2),f([ex(ox,{optional:!0})],hx.prototype,"padding",2),f([ex(ix,{optional:!0})],hx.prototype,"formatter",2),f([ex(ax)],hx.prototype,"highlightStyle",2),f([ex(ax)],hx.prototype,"label",2),f([ex(ax)],hx.prototype,"secondaryLabel",2),f([ex(ax)],hx.prototype,"tooltip",2);var{fromToMotion:dx}=o.m,{Sector:cx,Group:ux,Selection:px,Text:yx}=o.i,{sanitizeHtml:gx}=o.s,mx=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*Math.PI/e.sumSize,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Array.from(e,(()=>{})),a=t;for(const s of e.children){const e=a,t=a+s.sumSize*i;o[s.index]={start:e,end:t},mx(s,e,i,o),a=t}return o},xx=class e extends o.m.HierarchySeries{constructor(){super(...arguments),this.properties=new hx,this.groupSelection=px.select(this.contentGroup,ux),this.highlightSelection=px.select(this.highlightGroup,ux),this.angleData=[]}processData(){return D(this,null,(function*(){const{childrenKey:t,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:s,sizeKey:n,sizeName:r}=this.properties;yield v(e.prototype,this,"processData").call(this),this.angleData=mx(this.rootNode);const l=e=>"number"==typeof e?e.toFixed(2):"string"==typeof e?e:"";this.labelData=Array.from(this.rootNode,(e=>{let h,d,{datum:c,depth:u}=e;if(null!=c&&null!=u&&null!=a){const e=c[a];h=this.getLabelText(this.properties.label,{depth:u,datum:c,childrenKey:t,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:s,sizeKey:n,sizeName:r,value:e},l)}if(""===h&&(h=void 0),null!=c&&null!=u&&null!=s){const e=c[s];d=this.getLabelText(this.properties.secondaryLabel,{depth:u,datum:c,childrenKey:t,colorKey:i,colorName:o,labelKey:a,secondaryLabelKey:s,sizeKey:n,sizeName:r,value:e},l)}return""===d&&(d=void 0),null!=h||null!=d?{label:h,secondaryLabel:d}:void 0}))}))}updateSelections(){return D(this,null,(function*(){if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{chart:e}=this;if(null==e||null==e.seriesRect)return;const t=Array.from(this.rootNode),i=e=>{e.append([new cx,new yx({tag:0}),new yx({tag:1})])};this.groupSelection.update(t,i,(e=>this.getDatumId(e))),this.highlightSelection.update(t,i,(e=>this.getDatumId(e)))}))}updateNodes(){return D(this,null,(function*(){var e;const{chart:t,data:i,maxDepth:o,labelData:a}=this;if(null==t||null==i||null==a)return;const{width:s,height:n}=t.seriesRect,{sectorSpacing:r=0,padding:l=0,highlightStyle:h}=this.properties;this.contentGroup.translationX=s/2,this.contentGroup.translationY=n/2,this.highlightGroup.translationX=s/2,this.highlightGroup.translationY=n/2;const d=.5*r,c=Math.min(s,n)/2/(o+1),u=-Math.PI/2,y=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight();(new yx).setFont(this.properties.label),this.rootNode.walk((e=>{const t=this.angleData[e.index];if(null!=e.depth&&null!=t){const i=t.end-t.start,o=(e.depth+.5)*c;e.midPoint.x=Math.cos(i)*o,e.midPoint.y=Math.sin(i)*o}}));const g=(e,t,i)=>{var o,a,s,n,r,l,p,y,g,m;const{depth:x}=e,f=this.angleData[e.index];if(null==x||null==f)return void(t.visible=!1);let v,D,M,b,S;t.visible=!0,i&&(v=h.fill,D=h.fillOpacity,M=h.stroke,b=h.strokeWidth,S=h.strokeOpacity);const N=this.getSectorFormat(e,i),I=null!=(a=null!=(o=null==N?void 0:N.fill)?o:v)?a:e.fill,k=null!=(n=null!=(s=null==N?void 0:N.fillOpacity)?s:D)?n:this.properties.fillOpacity,A=null!=(l=null!=(r=null==N?void 0:N.stroke)?r:M)?l:e.stroke,T=null!=(y=null!=(p=null==N?void 0:N.strokeWidth)?p:b)?y:this.properties.strokeWidth,L=null!=(m=null!=(g=null==N?void 0:N.strokeOpacity)?g:S)?m:this.properties.strokeOpacity;t.fill=I,t.fillOpacity=k,t.stroke=A,t.strokeWidth=T,t.strokeOpacity=L,t.centerX=0,t.centerY=0,t.innerRadius=x*c,t.outerRadius=(x+1)*c,t.angleOffset=u,t.startAngle=f.start,t.endAngle=f.end,t.inset=d+.5*T};this.groupSelection.selectByClass(cx).forEach((e=>{g(e.datum,e,!1)})),this.highlightSelection.selectByClass(cx).forEach((e=>{const t=e.datum,i=y===t;e.visible=i,e.visible&&g(e.datum,e,i)}));const m=Array.from(this.rootNode,((e,t)=>{const{depth:i}=e,o=a[t],s=this.angleData[t];if(null==i||null==s)return;const n=i*c+d,r=(i+1)*c-d,h=n>d?d/n:d,y=r>d?d/r:d,g=s.start+h,m=s.end+h-g,x=s.start+y,f=s.end+y-x,v=yl(null==o?void 0:o.label,this.properties.label,null==o?void 0:o.secondaryLabel,this.properties.secondaryLabel,{padding:l},(t=>{var o;if(0===i&&(null==(o=e.parent)?void 0:o.sumSize)===e.sumSize)return{width:2*Math.sqrt(p(r,2)-p(.5*t,2)),height:t,meta:0};const a=t,s=2*Math.sqrt(p(r,2)-p(n+a,2)),l=m<Math.PI?2*n*Math.tan(.5*m):1/0,h=Math.min(s,l);let d,c;return 0===i?(d=t,c=Math.sqrt(p(r,2)-p(d/2,2))-t/(2*Math.tan(.5*f))):(d=2*n*Math.tan(.5*m),c=Math.sqrt(p(r,2)-p(d/2,2))-n),h>=c?{width:h,height:a,meta:1}:{width:c,height:d,meta:2}}));if(null==v)return;const{width:D,height:M,meta:b,label:S,secondaryLabel:N}=v,I=u+(s.start+s.end)/2,k=(Math.sin(I)>=0?3:12)&(Math.cos(I)>=0?6:9);let A;switch(b){case 0:A=0;break;case 1:{const e=r-.58*(c-M),t=Math.sqrt(p(r-l,2)-p(D/2,2));A=Math.min(e,t);break}case 2:if(0===i){A=.5*(M/(2*Math.tan(.5*m))+.5*D+(Math.sqrt(p(r,2)-p(.5*M,2))-.5*D))}else A=.5*(n+r)}return{width:D,height:M,labelPlacement:b,circleQuarter:k,radius:A,theta:I,label:S,secondaryLabel:N}})),x=(e,t,i,o)=>{var a;const{index:s,depth:n}=e,r=null==m?void 0:m[s],l=0===i?this.properties.label:this.properties.secondaryLabel,h=0===i?null==r?void 0:r.label:null==r?void 0:r.secondaryLabel;if(null==n||null==r||null==h)return void(t.visible=!1);const{height:d,labelPlacement:c,circleQuarter:u,radius:p,theta:y}=r;let g;switch(o&&(g=(0===i?this.properties.highlightStyle.label:this.properties.highlightStyle.secondaryLabel).color),t.text=h.text,t.fontSize=h.fontSize,t.lineHeight=h.lineHeight,t.fontStyle=l.fontStyle,t.fontFamily=l.fontFamily,t.fontWeight=l.fontWeight,t.fill=null!==(a=g)&&void 0!==a?a:l.color,c){case 0:t.textAlign="center",t.textBaseline="top",t.translationX=0,t.translationY=(0===i?0:d-h.height)-.5*d,t.rotation=0;break;case 1:{const e=0!==(3&u),o=0===i==!e?p:p-(d-h.height);t.textAlign="center",t.textBaseline=e?"bottom":"top",t.translationX=Math.cos(y)*o,t.translationY=Math.sin(y)*o,t.rotation=e?y-.5*Math.PI:y+.5*Math.PI;break}case 2:{const e=0!==(6&u),o=0===i==!e?.5*(d-h.height):.5*(h.height-d);t.textAlign="center",t.textBaseline="middle",t.translationX=Math.cos(y)*p+Math.cos(y+Math.PI/2)*o,t.translationY=Math.sin(y)*p+Math.sin(y+Math.PI/2)*o,t.rotation=e?y:y+Math.PI;break}}t.visible=!0};this.groupSelection.selectByClass(yx).forEach((e=>{x(e.datum,e,e.tag,!1)})),this.highlightSelection.selectByClass(yx).forEach((e=>{const t=e.datum,i=y===t;e.visible=i,e.visible&&x(e.datum,e,e.tag,i)}))}))}getSectorFormat(e,t){const{datum:i,fill:o,stroke:a,depth:s}=e,{ctx:{callbackCache:n},properties:{formatter:r}}=this;if(!r||null==i||null==s)return{};const{colorKey:l,labelKey:h,sizeKey:d,strokeWidth:c}=this.properties,u=n.call(r,{seriesId:this.id,depth:s,datum:i,colorKey:l,labelKey:h,sizeKey:d,fill:o,stroke:a,strokeWidth:c,highlighted:t});return null!==u&&void 0!==u?u:{}}getTooltipHtml(e){var t;const{id:i}=this,{tooltip:o,colorKey:a,colorName:s=a,labelKey:n,secondaryLabelKey:r,sizeKey:l,sizeName:h=l}=this.properties,{datum:d,depth:c}=e;if(null==d||null==c)return"";const u=null!=n?d[n]:void 0,p=this.getSectorFormat(e,!1),y=null!=(t=null==p?void 0:p.fill)?t:e.fill;if(!o.renderer&&!u)return"";const g=[],m=null!=r?d[r]:void 0;null!=m&&r!==a&&r!==l&&g.push(gx(m));const x=null!=l?d[l]:void 0;null!=x&&g.push("".concat(h,": ").concat(gx(x)));const f=null!=a?d[a]:void 0;null!=f&&g.push("".concat(s,": ").concat(gx(f)));const v=g.join("<br>"),D={title:u,color:this.properties.label.color,backgroundColor:y,content:v};return o.toTooltipHtml(D,{depth:c,datum:d,colorKey:a,labelKey:n,secondaryLabelKey:r,sizeKey:l,title:u,color:y,seriesId:i})}createNodeData(){return D(this,null,(function*(){return[]}))}animateEmptyUpdateReady(e){let{datumSelections:t}=e;dx(this.id,"nodes",this.ctx.animationManager,t,{toFn:(e,t,i)=>({scalingX:1,scalingY:1}),fromFn:(e,t,i)=>"unknown"===i&&null!=t&&null==e.previousDatum?{scalingX:0,scalingY:0}:{scalingX:1,scalingY:1}})}};xx.className="SunburstSeries",xx.type="sunburst";var fx=xx,{EXTENDS_SERIES_DEFAULTS:vx,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:Dx}=o.a,Mx={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"sunburst",instanceConstructor:fx,solo:!0,themeTemplate:{series:{__extends__:vx,label:{fontSize:14,minimumFontSize:9,color:Dx,overflowStrategy:"ellipsis",wrapping:"never",spacing:2},secondaryLabel:{fontSize:8,minimumFontSize:7,color:Dx,overflowStrategy:"ellipsis",wrapping:"never"},sectorSpacing:2,padding:3,highlightStyle:{label:{color:Dx},secondaryLabel:{color:Dx},stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}},gradientLegend:{enabled:!0}},paletteFactory:e=>{let{takeColors:t,colorsCount:i,themeTemplateParameters:a}=e;const{properties:s}=a,{fills:n,strokes:r}=t(i);return{fills:n,strokes:r,colorRange:s.get(o.a.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE)}}},{Label:bx}=o.i,{BaseProperties:Sx,HierarchySeriesProperties:Nx,HighlightStyle:Ix,SeriesTooltip:kx,Validate:Ax,BOOLEAN:Tx,COLOR_STRING:Lx,FUNCTION:Ox,NUMBER:Ex,OBJECT:Rx,POSITIVE_NUMBER:Cx,RATIO:wx,STRING:Px,STRING_ARRAY:_x,TEXT_ALIGN:zx,VERTICAL_ALIGN:Kx}=o.m,Vx=class extends bx{constructor(){super(...arguments),this.spacing=0}};f([Ax(Ex)],Vx.prototype,"spacing",2);var jx=class extends Sx{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.textAlign="center",this.gap=0,this.padding=0,this.interactive=!0,this.label=new Vx}};f([Ax(Px,{optional:!0})],jx.prototype,"fill",2),f([Ax(wx)],jx.prototype,"fillOpacity",2),f([Ax(Lx,{optional:!0})],jx.prototype,"stroke",2),f([Ax(Cx)],jx.prototype,"strokeWidth",2),f([Ax(wx)],jx.prototype,"strokeOpacity",2),f([Ax(zx)],jx.prototype,"textAlign",2),f([Ax(Cx)],jx.prototype,"gap",2),f([Ax(Cx)],jx.prototype,"padding",2),f([Ax(Tx)],jx.prototype,"interactive",2),f([Ax(Rx)],jx.prototype,"label",2);var Fx=class extends Sx{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.textAlign="center",this.verticalAlign="middle",this.gap=0,this.padding=0,this.label=new hl,this.secondaryLabel=new dl}};f([Ax(Px,{optional:!0})],Fx.prototype,"fill",2),f([Ax(wx)],Fx.prototype,"fillOpacity",2),f([Ax(Lx,{optional:!0})],Fx.prototype,"stroke",2),f([Ax(Cx,{optional:!0})],Fx.prototype,"strokeWidth",2),f([Ax(wx)],Fx.prototype,"strokeOpacity",2),f([Ax(zx)],Fx.prototype,"textAlign",2),f([Ax(Kx)],Fx.prototype,"verticalAlign",2),f([Ax(Cx)],Fx.prototype,"gap",2),f([Ax(Cx)],Fx.prototype,"padding",2),f([Ax(Rx)],Fx.prototype,"label",2),f([Ax(Rx)],Fx.prototype,"secondaryLabel",2);var Bx=class extends Sx{constructor(){super(...arguments),this.label=new hl}};f([Ax(Px,{optional:!0})],Bx.prototype,"fill",2),f([Ax(wx,{optional:!0})],Bx.prototype,"fillOpacity",2),f([Ax(Lx,{optional:!0})],Bx.prototype,"stroke",2),f([Ax(Cx,{optional:!0})],Bx.prototype,"strokeWidth",2),f([Ax(wx,{optional:!0})],Bx.prototype,"strokeOpacity",2),f([Ax(Rx)],Bx.prototype,"label",2);var Ux=class extends Sx{constructor(){super(...arguments),this.label=new hl,this.secondaryLabel=new dl}};f([Ax(Px,{optional:!0})],Ux.prototype,"fill",2),f([Ax(wx,{optional:!0})],Ux.prototype,"fillOpacity",2),f([Ax(Lx,{optional:!0})],Ux.prototype,"stroke",2),f([Ax(Cx,{optional:!0})],Ux.prototype,"strokeWidth",2),f([Ax(wx,{optional:!0})],Ux.prototype,"strokeOpacity",2),f([Ax(Rx)],Ux.prototype,"label",2),f([Ax(Rx)],Ux.prototype,"secondaryLabel",2);var Wx=class extends Ix{constructor(){super(...arguments),this.group=new Bx,this.tile=new Ux}};f([Ax(Rx)],Wx.prototype,"group",2),f([Ax(Rx)],Wx.prototype,"tile",2);var Gx=class extends Nx{constructor(){super(...arguments),this.highlightStyle=new Wx,this.tooltip=new kx,this.group=new jx,this.tile=new Fx,this.undocumentedGroupFills=[],this.undocumentedGroupStrokes=[]}};f([Ax(Px,{optional:!0})],Gx.prototype,"sizeName",2),f([Ax(Px,{optional:!0})],Gx.prototype,"labelKey",2),f([Ax(Px,{optional:!0})],Gx.prototype,"secondaryLabelKey",2),f([Ax(Ox,{optional:!0})],Gx.prototype,"formatter",2),f([Ax(Rx)],Gx.prototype,"highlightStyle",2),f([Ax(Rx)],Gx.prototype,"tooltip",2),f([Ax(Rx)],Gx.prototype,"group",2),f([Ax(Rx)],Gx.prototype,"tile",2),f([Ax(_x)],Gx.prototype,"undocumentedGroupFills",2),f([Ax(_x)],Gx.prototype,"undocumentedGroupStrokes",2);var{Rect:Yx,Group:Hx,BBox:Xx,Selection:Qx,Text:Zx}=o.i,{Color:qx,Logger:Jx,isEqual:$x,sanitizeHtml:ef}=o.s,tf=new Zx;function of(e){if("string"==typeof e&&!qx.validColorString(e)){const t="black";return Jx.warnOnce('invalid Treemap tile colour string "'.concat(e,'". Affected treemap tiles will be coloured ').concat(t,".")),t}return e}function af(e){return e.children.length>0?e.sumSize-e.size:e.size}var sf={left:0,center:.5,right:1},nf={top:0,middle:.5,bottom:1},rf=class e extends o.m.HierarchySeries{constructor(){super(...arguments),this.properties=new Gx,this.groupSelection=Qx.select(this.contentGroup,Hx),this.highlightSelection=Qx.select(this.highlightGroup,Hx)}groupTitleHeight(e,t){var i,o;const a=null==(o=null==(i=this.labelData)?void 0:i[e.index])?void 0:o.label,{label:s}=this.properties.group;if(null!=a){if(s.fontSize>t.width/3||s.fontSize>t.height/3)return;{const{height:e}=function(e,t){const{fontStyle:i,fontWeight:o,fontSize:a,fontFamily:s}=t;tf.setProperties({text:e,fontStyle:i,fontWeight:o,fontSize:a,fontFamily:s,textAlign:"left",textBaseline:"top"});const{width:n,height:r}=tf.computeBBox();return{width:n,height:r}}(a,s);return Math.max(e,s.fontSize)}}}getNodePadding(e,t){if(0===e.index)return{top:0,right:0,bottom:0,left:0};if(0===e.children.length){const{padding:e}=this.properties.tile;return{top:e,right:e,bottom:e,left:e}}const{label:{spacing:i},padding:o}=this.properties.group,a=this.groupTitleHeight(e,t);return{top:o+(null!=a?a+i:0),right:o,bottom:o,left:o}}processData(){return D(this,null,(function*(){var t;yield v(e.prototype,this,"processData").call(this);const{childrenKey:i,colorKey:o,colorName:a,labelKey:s,secondaryLabelKey:n,sizeKey:r,sizeName:l,tile:h,group:d}=this.properties;if(null==(t=this.data)||!t.length)return void(this.labelData=void 0);const c=e=>"number"==typeof e?e.toFixed(2):"string"==typeof e?e:"";this.labelData=Array.from(this.rootNode,(e=>{let{datum:t,depth:u,children:p}=e;const y=0===p.length,g=y?h.label:d.label;let m,x;if(null!=t&&null!=u&&null!=s){const e=t[s];m=this.getLabelText(g,{depth:u,datum:t,childrenKey:i,colorKey:o,colorName:a,labelKey:s,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:e},c)}if(""===m&&(m=void 0),y&&null!=t&&null!=u&&null!=n){const e=t[n];x=this.getLabelText(h.secondaryLabel,{depth:u,datum:t,childrenKey:i,colorKey:o,colorName:a,labelKey:s,secondaryLabelKey:n,sizeKey:r,sizeName:l,value:e},c)}return""===x&&(x=void 0),null!=m||null!=x?{label:m,secondaryLabel:x}:void 0}))}))}squarify(e,t,i){const{index:o,datum:a,children:s}=e;if(t.width<=0||t.height<=0)return void(i[o]=void 0);i[o]=0===o?void 0:t;const n=Array.from(s,((e,t)=>t)).filter((e=>af(s[e])>0)).sort(((e,t)=>af(s[t])-af(s[e]))),r=e=>{const t=n[e];return s[t]},l=n.every((e=>0===s[e].children.length)),h=null!=a?this.getNodePadding(e,t):{top:0,right:0,bottom:0,left:0},d=t.width-h.left-h.right,c=t.height-h.top-h.bottom;if(d<=0||c<=0)return;const u=n.length;let p=0,y=0,g=1/0,m=n.reduce(((e,t)=>e+af(s[t])),0);const x=new Xx(t.x+h.left,t.y+h.top,d,c),f=x.clone();let v=0;for(;v<u;){const e=af(r(v)),t=af(r(y)),o=f.width<f.height;p+=e;const a=o?f.height:f.width,s=o?f.width:f.height,n=s*t/p;let h=a*p/m;const d=Math.max(n,h)/Math.min(n,h),c=Math.abs(1-d);if(c<g){g=c,v++;continue}p-=e,h=a*p/m;let u=o?f.x:f.y;for(let g=y;g<v;g++){const e=r(g),t=af(e),a=o?u:f.x,n=o?f.y:u,d=s*t/p,c=new Xx(a,n,o?d:h,o?h:d);this.applyGap(x,c,l),this.squarify(e,c,i),m-=t,u+=d}o?(f.y+=h,f.height-=h):(f.x+=h,f.width-=h),y=v,p=0,g=1/0}const D=f.width<f.height;let M=D?f.x:f.y;for(let b=y;b<u;b++){const e=r(b),t=D?M:f.x,o=D?f.y:M,a=af(e)/m,s=f.width*(D?a:1),n=f.height*(D?1:a),h=new Xx(t,o,s,n);this.applyGap(x,h,l),this.squarify(e,h,i),M+=D?s:n}}applyGap(e,t,i){const o=i?.5*this.properties.tile.gap:.5*this.properties.group.gap,a=e=>({left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height}),s=a(e),n=a(t);["top","right","bottom","left"].forEach((e=>{$x(s[e],n[e])||t.shrink(o,e)}))}createNodeData(){return D(this,null,(function*(){return[]}))}updateSelections(){return D(this,null,(function*(){var e;if(!this.nodeDataRefresh)return;this.nodeDataRefresh=!1;const{seriesRect:t}=null!=(e=this.chart)?e:{};if(!t)return;const i=Array.from(this.rootNode),o=e=>{e.append([new Yx,new Zx({tag:0}),new Zx({tag:1})])};this.groupSelection.update(i,o,(e=>this.getDatumId(e))),this.highlightSelection.update(i,o,(e=>this.getDatumId(e)))}))}getTileFormat(e,t){var i,o;const{datum:a,depth:s,children:n}=e,{colorKey:r,labelKey:l,secondaryLabelKey:h,sizeKey:d,tile:c,group:u,formatter:p}=this.properties;if(!p||null==a||null==s)return{};const y=0===n.length,g=null!=(i=y?c.fill:u.fill)?i:e.fill,m=null!=(o=y?c.stroke:u.stroke)?o:e.stroke,x=y?c.strokeWidth:u.strokeWidth,f=this.ctx.callbackCache.call(p,{seriesId:this.id,depth:s,datum:a,colorKey:r,labelKey:l,secondaryLabelKey:h,sizeKey:d,fill:g,stroke:m,strokeWidth:x,highlighted:t});return null!==f&&void 0!==f?f:{}}getNodeFill(e){var t,i,o;if(0===e.children.length)return null!=(t=this.properties.tile.fill)?t:e.fill;const{undocumentedGroupFills:a}=this.properties,s=a[Math.min(null!=(i=e.depth)?i:0,a.length)];return null!=(o=this.properties.group.fill)?o:s}getNodeStroke(e){var t,i,o;if(0===e.children.length)return null!=(t=this.properties.tile.stroke)?t:e.stroke;const{undocumentedGroupStrokes:a}=this.properties,s=a[Math.min(null!=(i=e.depth)?i:0,a.length)];return null!=(o=this.properties.group.stroke)?o:s}updateNodes(){return D(this,null,(function*(){var e,t;const{rootNode:i,data:o}=this,{highlightStyle:a,tile:s,group:n}=this.properties,{seriesRect:r}=null!=(e=this.chart)?e:{};if(!r||!o)return;const{width:l,height:h}=r,d=Array.from(this.rootNode,(()=>{}));this.squarify(i,new Xx(0,0,l,h),d);let c=null==(t=this.ctx.highlightManager)?void 0:t.getActiveHighlight();null!=c&&!this.properties.group.interactive&&0!==c.children.length&&(c=void 0),this.updateNodeMidPoint(d);const u=(e,t,i)=>{var o,r,l,h,c,u,p,y,g,m;const x=d[e.index];if(null==x)return void(t.visible=!1);const f=0===e.children.length;let v,D,M,b,S;if(i){const{tile:e,group:t}=a;v=f?e.fill:t.fill,D=f?e.fillOpacity:t.fillOpacity,M=f?e.stroke:t.stroke,b=f?e.strokeWidth:t.strokeWidth,S=f?e.strokeOpacity:t.strokeOpacity}const N=this.getTileFormat(e,i),I=null!=(r=null!=(o=null==N?void 0:N.fill)?o:v)?r:this.getNodeFill(e),k=null!=(h=null!=(l=null==N?void 0:N.fillOpacity)?l:D)?h:f?s.fillOpacity:n.fillOpacity,A=null!=(u=null!=(c=null==N?void 0:N.stroke)?c:M)?u:this.getNodeStroke(e),T=null!=(y=null!=(p=null==N?void 0:N.strokeWidth)?p:b)?y:f?s.strokeWidth:n.strokeWidth,L=null!=(m=null!=(g=null==N?void 0:N.strokeOpacity)?g:S)?m:f?s.strokeOpacity:n.strokeOpacity;t.fill=of(I),t.fillOpacity=k,t.stroke=of(A),t.strokeWidth=T,t.strokeOpacity=L,t.crisp=!0,t.x=x.x,t.y=x.y,t.width=x.width,t.height=x.height,t.visible=!0};this.groupSelection.selectByClass(Yx).forEach((e=>u(e.datum,e,!1))),this.highlightSelection.selectByClass(Yx).forEach((e=>{var t;const i=e.datum===c;e.visible=i||null!=(t=null==c?void 0:c.contains(e.datum))&&t,e.visible&&u(e.datum,e,i)}));const p=Array.from(this.rootNode,(e=>{var t,i,o,a;const{index:r,children:l}=e,h=d[r],c=null==(t=this.labelData)?void 0:t[r];if(null!=h&&null!=c){if(0===l.length){const e={width:h.width,height:h.height,meta:null},t=yl(c.label,this.properties.tile.label,c.secondaryLabel,this.properties.tile.secondaryLabel,{padding:s.padding},(()=>e));if(null==t)return;const{height:a,label:n,secondaryLabel:r}=t,{textAlign:l,verticalAlign:d,padding:u}=s,p=null!=(i=sf[l])?i:.5,y=h.x+u+(h.width-2*u)*p,g=null!=(o=nf[d])?o:.5,m=h.y+u+.5*a+(h.height-2*u-a)*g;return{label:null!=n?{text:n.text,fontSize:n.fontSize,lineHeight:n.lineHeight,style:this.properties.tile.label,x:y,y:m-.5*(a-n.height)}:void 0,secondaryLabel:null!=r?{text:r.text,fontSize:r.fontSize,lineHeight:r.fontSize,style:this.properties.tile.secondaryLabel,x:y,y:m+.5*(a-r.height)}:void 0,verticalAlign:"middle",textAlign:l}}if(null==(null==c?void 0:c.label))return;{const{padding:t,textAlign:i}=n,o=this.groupTitleHeight(e,h);if(null==o)return;const s=h.width-2*t,{text:r}=Zx.wrap(c.label,h.width-2*t,1/0,n.label,"never"),l=null!=(a=sf[i])?a:.5;return{label:{text:r,fontSize:n.label.fontSize,lineHeight:hl.lineHeight(n.label.fontSize),style:this.properties.group.label,x:h.x+t+s*l,y:h.y+t+.5*o},secondaryLabel:void 0,verticalAlign:"middle",textAlign:i}}}})),y=(e,t,i,o)=>{var s;const n=0===e.children.length,r=p[e.index],l=0===i?null==r?void 0:r.label:null==r?void 0:r.secondaryLabel;if(null==r||null==l)return void(t.visible=!1);let h;if(o){const{tile:e,group:t}=a;h=e.secondaryLabel.color,n?0===i&&(h=e.label.color):h=t.label.color}t.text=l.text,t.fontSize=l.fontSize,t.lineHeight=l.lineHeight,t.fontStyle=l.style.fontStyle,t.fontFamily=l.style.fontFamily,t.fontWeight=l.style.fontWeight,t.fill=null!==(s=h)&&void 0!==s?s:l.style.color,t.textAlign=r.textAlign,t.textBaseline=r.verticalAlign,t.x=l.x,t.y=l.y,t.visible=!0};this.groupSelection.selectByClass(Zx).forEach((e=>{y(e.datum,e,e.tag,!1)})),this.highlightSelection.selectByClass(Zx).forEach((e=>{var t;const i=e.datum===c;e.visible=i||null!=(t=null==c?void 0:c.contains(e.datum))&&t,e.visible&&y(e.datum,e,e.tag,i)}))}))}updateNodeMidPoint(e){this.rootNode.walk((t=>{const i=e[t.index];null!=i&&(t.midPoint.x=i.x+i.width/2,t.midPoint.y=i.y)}))}getTooltipHtml(e){var t;const{datum:i,depth:o}=e,{id:a}=this,{tooltip:s,colorKey:n,colorName:r=n,labelKey:l,secondaryLabelKey:h,sizeKey:d,sizeName:c=d}=this.properties,u=0===e.children.length,p=u||this.properties.group.interactive;if(null==i||null==o||!p)return"";const y=null!=l?i[l]:void 0,g=this.getTileFormat(e,!1),m=null!=(t=null==g?void 0:g.fill)?t:this.getNodeFill(e);if(!s.renderer&&!y)return"";const x=[],f=null!=h?i[h]:void 0;null!=f&&h!==n&&h!==d&&x.push(ef(f));const v=null!=d?i[d]:void 0;null!=v&&x.push("".concat(c,": ").concat(ef(v)));const D=null!=n?i[n]:void 0;null!=D&&x.push("".concat(r,": ").concat(ef(D)));const M=x.join("<br>"),b={title:y,color:u?this.properties.tile.label.color:this.properties.group.label.color,backgroundColor:m,content:M};return s.toTooltipHtml(b,{depth:o,datum:i,colorKey:n,labelKey:l,secondaryLabelKey:h,sizeKey:d,title:y,color:m,seriesId:a})}};rf.className="TreemapSeries",rf.type="treemap";var lf=rf,{DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:hf,DEFAULT_FONT_FAMILY:df,DEFAULT_HIERARCHY_FILLS:cf,DEFAULT_HIERARCHY_STROKES:uf,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:pf,EXTENDS_SERIES_DEFAULTS:yf,DEFAULT_LABEL_COLOUR:gf,FONT_WEIGHT:mf}=o.a,xf={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["hierarchy"],identifier:"treemap",instanceConstructor:lf,solo:!0,themeTemplate:{series:{__extends__:yf,group:{label:{enabled:!0,color:gf,fontStyle:void 0,fontWeight:mf.NORMAL,fontSize:12,fontFamily:df,spacing:4},fill:void 0,stroke:void 0,strokeWidth:1,padding:4,gap:2,textAlign:"left"},tile:{label:{enabled:!0,color:pf,fontStyle:void 0,fontWeight:mf.NORMAL,fontSize:18,minimumFontSize:10,fontFamily:df,wrapping:"on-space",overflowStrategy:"ellipsis",spacing:2},secondaryLabel:{enabled:!0,color:pf,fontStyle:void 0,fontWeight:void 0,fontSize:12,minimumFontSize:10,fontFamily:df,wrapping:"never",overflowStrategy:"ellipsis"},fill:void 0,stroke:void 0,strokeWidth:0,padding:3,gap:1},highlightStyle:{group:{label:{color:gf},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},tile:{label:{color:pf},secondaryLabel:{color:pf},fill:void 0,stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2}}},gradientLegend:{enabled:!0}},paletteFactory:e=>{let{takeColors:t,colorsCount:i,themeTemplateParameters:o}=e;const{properties:a}=o,{fills:s,strokes:n}=t(i);return{fills:s,strokes:n,colorRange:a.get(hf),undocumentedGroupFills:a.get(cf),undocumentedGroupStrokes:a.get(uf)}}},{DropShadow:ff,Label:vf}=o.i,{AbstractBarSeriesProperties:Df,BaseProperties:Mf,PropertiesArray:bf,SeriesTooltip:Sf,Validate:Nf,BOOLEAN:If,COLOR_STRING:kf,FUNCTION:Af,LINE_DASH:Tf,NUMBER:Lf,OBJECT:Of,OBJECT_ARRAY:Ef,POSITIVE_NUMBER:Rf,RATIO:Cf,STRING:wf,UNION:Pf}=o.m,_f=class extends Mf{};f([Nf(Pf(["subtotal","total"],"a total type"))],_f.prototype,"totalType",2),f([Nf(Lf)],_f.prototype,"index",2),f([Nf(wf)],_f.prototype,"axisLabel",2);var zf=class extends Mf{};f([Nf(Af,{optional:!0})],zf.prototype,"renderer",2);var Kf=class extends vf{constructor(){super(...arguments),this.placement="end",this.padding=6}};f([Nf(Pf(["start","end","inside"],"a placement"))],Kf.prototype,"placement",2),f([Nf(Rf)],Kf.prototype,"padding",2);var Vf=class extends Mf{constructor(){super(...arguments),this.fill="#c16068",this.stroke="#c16068",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=1,this.cornerRadius=0,this.shadow=(new ff).set({enabled:!1}),this.label=new Kf,this.tooltip=new zf}};f([Nf(wf,{optional:!0})],Vf.prototype,"name",2),f([Nf(kf)],Vf.prototype,"fill",2),f([Nf(kf)],Vf.prototype,"stroke",2),f([Nf(Cf)],Vf.prototype,"fillOpacity",2),f([Nf(Cf)],Vf.prototype,"strokeOpacity",2),f([Nf(Tf)],Vf.prototype,"lineDash",2),f([Nf(Rf)],Vf.prototype,"lineDashOffset",2),f([Nf(Rf)],Vf.prototype,"strokeWidth",2),f([Nf(Rf)],Vf.prototype,"cornerRadius",2),f([Nf(Af,{optional:!0})],Vf.prototype,"formatter",2),f([Nf(Of)],Vf.prototype,"shadow",2),f([Nf(Of)],Vf.prototype,"label",2),f([Nf(Of)],Vf.prototype,"tooltip",2);var jf=class extends Mf{constructor(){super(...arguments),this.enabled=!0,this.stroke="black",this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2}};f([Nf(If)],jf.prototype,"enabled",2),f([Nf(kf)],jf.prototype,"stroke",2),f([Nf(Cf)],jf.prototype,"strokeOpacity",2),f([Nf(Tf)],jf.prototype,"lineDash",2),f([Nf(Rf)],jf.prototype,"lineDashOffset",2),f([Nf(Rf)],jf.prototype,"strokeWidth",2);var Ff=class extends Mf{constructor(){super(...arguments),this.positive=new Vf,this.negative=new Vf,this.total=new Vf}};f([Nf(Of)],Ff.prototype,"positive",2),f([Nf(Of)],Ff.prototype,"negative",2),f([Nf(Of)],Ff.prototype,"total",2);var Bf=class extends Df{constructor(){super(...arguments),this.item=new Ff,this.totals=new bf(_f),this.line=new jf,this.tooltip=new Sf}};f([Nf(wf)],Bf.prototype,"xKey",2),f([Nf(wf)],Bf.prototype,"yKey",2),f([Nf(wf,{optional:!0})],Bf.prototype,"xName",2),f([Nf(wf,{optional:!0})],Bf.prototype,"yName",2),f([Nf(Of)],Bf.prototype,"item",2),f([Nf(Ef)],Bf.prototype,"totals",2),f([Nf(Of)],Bf.prototype,"line",2),f([Nf(Of)],Bf.prototype,"tooltip",2);var{adjustLabelPlacement:Uf,SeriesNodePickMode:Wf,fixNumericExtent:Gf,valueProperty:Yf,keyProperty:Hf,accumulativeValueProperty:Xf,trailingAccumulatedValueProperty:Qf,ChartAxisDirection:Zf,getRectConfig:qf,updateRect:Jf,checkCrisp:$f,updateLabelNode:ev,prepareBarAnimationFunctions:tv,collapsedStartingBarPosition:iv,resetBarSelectionsFn:ov,seriesLabelFadeInAnimation:av,resetLabelFn:sv,animationValidation:nv,DEFAULT_CARTESIAN_DIRECTION_KEYS:rv,DEFAULT_CARTESIAN_DIRECTION_NAMES:lv}=o.m,{Rect:hv,motion:dv}=o.i,{sanitizeHtml:cv,isContinuous:uv,isNumber:pv}=o.s,{ContinuousScale:yv,OrdinalTimeScale:gv}=o.d,mv=class e extends o.m.AbstractBarSeries{constructor(e){super({moduleCtx:e,directionKeys:rv,directionNames:lv,pickModes:[Wf.EXACT_SHAPE_MATCH],pathsPerSeries:1,hasHighlightedLabels:!0,pathsZIndexSubOrderOffset:[-1,-1],animationResetFns:{datum:ov,label:sv}}),this.properties=new Bf,this.seriesItemTypes=new Set(["positive","negative","total"])}processData(e){return D(this,null,(function*(){var t,i,a;const{xKey:s,yKey:n,totals:r}=this.properties,{data:l=[]}=this;if(!this.properties.isValid())return;const h={missingValue:void 0,invalidValue:void 0},d=[],c=r.reduce(((e,t)=>{const i=e.get(t.index);return i?i.push(t):e.set(t.index,[t]),e}),new Map);l.forEach(((e,t)=>{var i;d.push(e),null==(i=c.get(t))||i.forEach((e=>d.push(m(g({},e.toJson()),{[s]:e.axisLabel}))))}));const u=null==(t=this.getCategoryAxis())?void 0:t.scale,p=yv.is(u)||gv.is(u),y=yv.is(u)?"range":"category",x=[];this.ctx.animationManager.isSkipped()||x.push(nv(this));const{processedData:f}=yield this.requestDataModel(e,d,{props:[Hf(this,s,p,{id:"xValue",valueType:y}),Xf(this,n,!0,m(g({},h),{id:"yCurrent"})),Xf(this,n,!0,m(g({},h),{missingValue:0,id:"yCurrentTotal"})),Xf(this,n,!0,m(g({},h),{id:"yCurrentPositive",validation:e=>uv(e)&&Number(e)>=0})),Xf(this,n,!0,m(g({},h),{id:"yCurrentNegative",validation:e=>uv(e)&&Number(e)<0})),Qf(this,n,!0,m(g({},h),{id:"yPrevious"})),Yf(this,n,!0,{id:"yRaw"}),Yf(this,"totalType",!1,{id:"totalTypeValue",missingValue:void 0,validation:e=>"total"===e||"subtotal"===e}),...p?[o.m.SMALLEST_KEY_INTERVAL]:[],...x],dataVisible:this.visible});this.smallestDataInterval={x:null!=(a=null==(i=f.reduced)?void 0:i.smallestKeyInterval)?a:1/0,y:1/0},this.updateSeriesItemTypes(),this.animationState.transition("updateData")}))}getSeriesDomain(e){var t;const{processedData:i,dataModel:a}=this;if(!i||!a)return[];const{domain:{keys:[s],values:n},reduced:{[o.m.SMALLEST_KEY_INTERVAL.property]:r}={}}=i,l=a.resolveProcessedDataDefById(this,"xValue");if(e===this.getCategoryDirection()){if("key"===(null==l?void 0:l.def.type)&&"category"===(null==l?void 0:l.def.valueType))return s;const i=null!=r&&isFinite(r)?r:0,a=null!=(t=o.m.extent(s))?t:[NaN,NaN],n=this.getCategoryAxis(),h=!(null==n||!n.isReversed()),d=e===Zf.Y,c=h===d?0:-i,u=h===d?i:0,p=a[0]+c,y=a[1]+u;return Gf([p,y],n)}{const e=n[a.resolveProcessedDataIndexById(this,"yCurrent").index],t=[Math.min(0,e[0]),Math.max(0,e[1])];return Gf(t)}}createNodeData(){return D(this,null,(function*(){var t,i,o;const{data:a,dataModel:s,smallestDataInterval:n}=this,{visible:r,line:l}=this.properties,h=this.getCategoryAxis(),d=this.getValueAxis();if(!(a&&r&&h&&d&&s))return[];const c=h.scale,u=d.scale,p=h.isReversed(),y=this.getBarDirection()===Zf.X,m=null!=(t=yv.is(c)?c.calcBandwidth(null==n?void 0:n.x):c.bandwidth)?t:10;if("ungrouped"!==(null==(i=this.processedData)?void 0:i.type))return[];const x=[],f=s.resolveProcessedDataIndexById(this,"yRaw").index,D=s.resolveProcessedDataIndexById(this,"xValue").index,M=s.resolveProcessedDataIndexById(this,"totalTypeValue").index,b=new Map,S=[],N=s.resolveProcessedDataIndexById(this,"yCurrent").index,I=s.resolveProcessedDataIndexById(this,"yPrevious").index,k=s.resolveProcessedDataIndexById(this,"yCurrentTotal").index;let A=0;const{xKey:T,yKey:L,xName:O,yName:E}=this.properties;null==(o=this.processedData)||o.data.forEach(((t,i)=>{let{keys:o,datum:a,values:s}=t;const n=s[M],r=this.isSubtotal(n),h=this.isTotal(n),d=h||r,R=o[D],C=Math.round(c.convert(R)),w=s[f],{cumulativeValue:P,trailingValue:_}=function(e,t,i){return e||t?{cumulativeValue:i[k],trailingValue:t?A:0}:{cumulativeValue:i[N],trailingValue:i[I]}}(h,r,s);d&&(A=null!==P&&void 0!==P?P:0);const z=Math.round(u.convert(P)),K=Math.round(u.convert(_)),V=function(e,t,i,o,a){return e?o:t?(null!==o&&void 0!==o?o:0)-(null!==a&&void 0!==a?a:0):i}(h,r,w,P,_),j=(null!==V&&void 0!==V?V:0)>=0,F=this.getSeriesItemType(j,n),{fill:B,stroke:U,strokeWidth:W,label:G}=this.getItemConfig(F),Y=j?z:K,H=j?K:z,X=Math.max(W,Math.abs(H-Y)),Q=F;let Z=b.get(Q);void 0===Z&&(Z=x.length,b.set(Q,Z)),null!=x[Z]||(x[Z]={itemId:Q,nodeData:[],labelData:[],pointData:[],scales:v(e.prototype,this,"calculateScaling").call(this),visible:this.visible});const q={x:y?Math.min(Y,H):C,y:y?C:Math.min(Y,H),width:y?X:m,height:y?m:X},J={x:q.x+q.width/2,y:q.y+q.height/2},$=d?z:K,ee=Math.floor(l.strokeWidth)%2/2,te=p?z:$,ie=p?$:z;let oe,ae;y?(oe={x:te+ee,y:q.y},ae={x:ie+ee,y:q.y+q.height}):(oe={x:q.x,y:te+ee},ae={x:q.x+q.width,y:ie+ee});const se={x:p?ae.x:oe.x,y:p?ae.y:oe.y,x2:p?oe.x:ae.x,y2:p?oe.y:ae.y,size:0};S.push(se);const ne=this.getLabelText(G,{itemId:"subtotal"===Q?"total":Q,value:V,datum:a,xKey:T,yKey:L,xName:O,yName:E},(e=>pv(e)?e.toFixed(2):String(e))),re={index:i,series:this,itemId:Q,datum:a,cumulativeValue:null!==P&&void 0!==P?P:0,xValue:R,yValue:V,yKey:L,xKey:T,x:q.x,y:q.y,width:q.width,height:q.height,midPoint:J,fill:B,stroke:U,strokeWidth:W,opacity:1,label:g({text:ne},Uf({isPositive:(null!==V&&void 0!==V?V:-1)>=0,isVertical:!y,placement:G.placement,padding:G.padding,rect:q}))};x[Z].nodeData.push(re),x[Z].labelData.push(re)}));const R=this.properties.line.enabled;return x.length>0&&void 0!==N&&R&&(x[0].pointData=S),x}))}updateSeriesItemTypes(){var e,t;const{dataModel:i,seriesItemTypes:o,processedData:a}=this;if(!i||!a)return;o.clear();const s=i.resolveProcessedDataIndexById(this,"yCurrentPositive").index,n=i.resolveProcessedDataIndexById(this,"yCurrentNegative").index,r=i.resolveProcessedDataIndexById(this,"totalTypeValue").index,l=null!=(e=a.domain.values[s])?e:[],h=null!=(t=a.domain.values[n])?t:[];l.length>0&&o.add("positive"),h.length>0&&o.add("negative");const d=null==a?void 0:a.domain.values[r];d&&d.forEach((e=>{("total"===e||"subtotal"===e)&&o.add("total")}))}isSubtotal(e){return"subtotal"===e}isTotal(e){return"total"===e}nodeFactory(){return new hv}getSeriesItemType(e,t){return null!==t&&void 0!==t?t:e?"positive":"negative"}getItemConfig(e){switch(e){case"positive":return this.properties.item.positive;case"negative":return this.properties.item.negative;case"subtotal":case"total":return this.properties.item.total}}updateDatumSelection(e){return D(this,null,(function*(){const{nodeData:t,datumSelection:i}=e,o=null!==t&&void 0!==t?t:[];return i.update(o)}))}updateDatumNodes(e){return D(this,null,(function*(){const{datumSelection:t,isHighlight:i}=e,{id:o,ctx:a}=this,{yKey:s,highlightStyle:{item:n}}=this.properties,r=this.getCategoryAxis(),l=$f(null==r?void 0:r.visibleRange),h=this.getCategoryDirection()===Zf.X;t.each(((e,t)=>{const r=t.itemId,{fillOpacity:d,strokeOpacity:c,strokeWidth:u,lineDash:p,lineDashOffset:y,cornerRadius:g,formatter:m,shadow:x}=this.getItemConfig(r),f={fill:t.fill,stroke:t.stroke,fillOpacity:d,strokeOpacity:c,lineDash:p,lineDashOffset:y,fillShadow:x,strokeWidth:this.getStrokeWidth(u),cornerRadius:g},v=h?t.width>0:t.height>0,D=qf({datum:t,isHighlighted:i,style:f,highlightStyle:n,formatter:m,seriesId:o,itemId:t.itemId,ctx:a,value:t.yValue,yKey:s});D.crisp=l,D.visible=v,Jf({rect:e,config:D})}))}))}updateLabelSelection(e){return D(this,null,(function*(){const{labelData:t,labelSelection:i}=e;if(0===t.length)return i.update([]);const o=t[0].itemId,{label:a}=this.getItemConfig(o),s=a.enabled?t:[];return i.update(s)}))}updateLabelNodes(e){return D(this,null,(function*(){e.labelSelection.each(((e,t)=>{ev(e,this.getItemConfig(t.itemId).label,t.label)}))}))}getTooltipHtml(e){var t,i,o;const a=this.getCategoryAxis(),s=this.getValueAxis();if(!this.properties.isValid()||!a||!s)return"";const{id:n}=this,{xKey:r,yKey:l,xName:h,yName:d,tooltip:c}=this.properties,{datum:u,itemId:p,xValue:y,yValue:g}=e,{fill:m,strokeWidth:x,name:f,formatter:v}=this.getItemConfig(p);let D;v&&(D=this.ctx.callbackCache.call(v,{datum:u,value:g,xKey:r,yKey:l,fill:m,strokeWidth:x,highlighted:!1,seriesId:n,itemId:e.itemId}));const M=null!=(i=null!=(t=null==D?void 0:D.fill)?t:m)?i:"gray",b=cv(a.formatDatum(y)),S=cv(s.formatDatum(g)),N=this.isTotal(p),I=this.isSubtotal(p);let k;k=N?"Total":I?"Subtotal":null!=(o=null!==f&&void 0!==f?f:d)?o:l;const A=cv(d),T="<b>".concat(cv(null!==h&&void 0!==h?h:r),"</b>: ").concat(b,"<br/><b>").concat(cv(k),"</b>: ").concat(S);return c.toTooltipHtml({title:A,content:T,backgroundColor:M},{seriesId:n,itemId:p,datum:u,xKey:r,yKey:l,xName:h,yName:d,color:M})}getLegendData(e){if("category"!==e)return[];const{id:t,seriesItemTypes:i}=this,o=[],a=e=>e.charAt(0).toUpperCase()+e.substring(1);return i.forEach((e=>{const{fill:i,stroke:s,fillOpacity:n,strokeOpacity:r,strokeWidth:l,name:h}=this.getItemConfig(e);o.push({legendType:"category",id:t,itemId:e,seriesId:t,enabled:!0,label:{text:null!==h&&void 0!==h?h:a(e)},marker:{fill:i,stroke:s,fillOpacity:n,strokeOpacity:r,strokeWidth:l}})})),o}toggleSeriesItem(){}animateEmptyUpdateReady(e){let{datumSelections:t,labelSelections:i,contextData:o,paths:a}=e;const s=tv(iv(this.isVertical(),this.axes,"normal"));dv.fromToMotion(this.id,"datums",this.ctx.animationManager,t,s),av(this,"labels",this.ctx.animationManager,i),o.forEach(((e,t)=>{let{pointData:i}=e;if(0!==t||!i)return;const[o]=a[t];this.isVertical()?this.animateConnectorLinesVertical(o,i):this.animateConnectorLinesHorizontal(o,i)}))}animateConnectorLinesHorizontal(e,t){const{path:i}=e;this.updateLineNode(e);const a=this.getValueAxis(),s=null==a?void 0:a.isReversed(),n=s?(e,t)=>e<t:(e,t)=>e>t,r=null==a?void 0:a.scale.convert(0),l=t.reduce(((e,t)=>(n(t.x,e)&&(e=t.x),e)),s?1/0:0),h=(e,t,i,o,a)=>(e-t)/(i-t)*(a-o)+o;this.ctx.animationManager.animate({id:"".concat(this.id,"_connectors"),groupId:this.id,phase:"initial",from:r,to:l,ease:o.m.Motion.easeOut,collapsable:!1,onUpdate(o){i.clear({trackChanges:!0}),t.forEach(((e,t)=>{const a=h(o,r,l,r,e.x),s=h(o,r,l,r,e.x2);0!==t&&i.lineTo(a,e.y),i.moveTo(s,e.y2)})),e.checkPathDirty()}})}animateConnectorLinesVertical(e,t){const{path:i}=e;this.updateLineNode(e);const a=this.getValueAxis(),s=null==a?void 0:a.isReversed(),n=s?(e,t)=>e>t:(e,t)=>e<t,r=null==a?void 0:a.scale.convert(0),l=t.reduce(((e,t)=>(n(t.y,e)&&(e=t.y),e)),s?0:1/0),h=(e,t,i,o,a)=>(e-t)/(i-t)*(a-o)+o;this.ctx.animationManager.animate({id:"".concat(this.id,"_connectors"),groupId:this.id,phase:"initial",from:r,to:l,ease:o.m.Motion.easeOut,collapsable:!1,onUpdate(o){i.clear({trackChanges:!0}),t.forEach(((e,t)=>{const a=h(o,r,l,r,e.y),s=h(o,r,l,r,e.y2);0!==t&&i.lineTo(e.x,a),i.moveTo(e.x2,s)})),e.checkPathDirty()}})}animateReadyResize(e){super.animateReadyResize(e),this.resetConnectorLinesPath(e)}updatePaths(e){return D(this,null,(function*(){this.resetConnectorLinesPath({contextData:[e.contextData],paths:[e.paths]})}))}resetConnectorLinesPath(e){let{contextData:t,paths:i}=e;if(0===i.length)return;const[o]=i[0];this.updateLineNode(o);const{path:a}=o;a.clear({trackChanges:!0});const{pointData:s}=t[0];s&&(s.forEach(((e,t)=>{0!==t&&a.lineTo(e.x,e.y),a.moveTo(e.x2,e.y2)})),o.checkPathDirty())}updateLineNode(e){const{stroke:t,strokeWidth:i,strokeOpacity:a,lineDash:s,lineDashOffset:n}=this.properties.line;e.setProperties({fill:void 0,stroke:t,strokeWidth:this.getStrokeWidth(i),strokeOpacity:a,lineDash:s,lineDashOffset:n,lineJoin:"round",pointerEvents:o.i.PointerEvents.None})}isLabelEnabled(){const{positive:e,negative:t,total:i}=this.properties.item;return e.label.enabled||t.label.enabled||i.label.enabled}onDataChange(){}};mv.className="WaterfallSeries",mv.type="waterfall";var xv=mv,fv={strokeWidth:0,label:{enabled:!1,fontStyle:void 0,fontWeight:o.a.FONT_WEIGHT.NORMAL,fontSize:12,fontFamily:o.a.DEFAULT_FONT_FAMILY,color:o.a.DEFAULT_LABEL_COLOUR,formatter:void 0,placement:"inside"}},vv={series:{__extends__:o.a.EXTENDS_SERIES_DEFAULTS,item:{positive:fv,negative:fv,total:fv},line:{stroke:o.a.DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE,strokeOpacity:1,lineDash:[0],lineDashOffset:0,strokeWidth:2}},legend:{enabled:!0,item:{toggleSeriesVisible:!1}}},Dv={type:"series",optionsKey:"series[]",packageType:"enterprise",chartTypes:["cartesian"],identifier:"waterfall",solo:!0,instanceConstructor:xv,defaultAxes:[{type:o.a.CARTESIAN_AXIS_TYPE.CATEGORY,position:o.a.POSITION.BOTTOM},{type:o.a.CARTESIAN_AXIS_TYPE.NUMBER,position:o.a.POSITION.LEFT}],themeTemplate:vv,swapDefaultAxesCondition:e=>{let{direction:t}=e;return"horizontal"===t},paletteFactory:e=>{let{takeColors:t,colorsCount:i,userPalette:a,themeTemplateParameters:s}=e;const{properties:n}=s,{fills:r,strokes:l}=t(i);return a?{item:{positive:{fill:r[0],stroke:l[0]},negative:{fill:r[1],stroke:l[1]},total:{fill:r[2],stroke:l[2]}}}:{item:{positive:n.get(o.a.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS),negative:n.get(o.a.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS),total:n.get(o.a.DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS)}}}};o.m.moduleRegistry.register(De,Ve,Ut,si,_n,el,mr,mi,Gi,qi,ko,Td,Yh,Dc,ku,Fc,Go,Fs,Xl,mp,Ue,gy,xy,og,pg,At,zt,Zm,Zo,am,Mx,ua,xf,Dv,xs),o.m.enterpriseModule.isEnterprise=!0,o.m.enterpriseModule.licenseManager=e=>{var t,i;return new Ys(null!=(i=null==(t=e.container)?void 0:t.ownerDocument)?i:typeof document>"u"?void 0:document)},o.m.enterpriseModule.injectWatermark=Zs}}]);
//# sourceMappingURL=23.f8ffd5a9.chunk.js.map