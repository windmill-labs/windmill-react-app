/*! For license information please see 5576.4e115c2c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[5576],{5576:(t,e,i)=>{i.r(e),i.d(e,{AbstractHeaderCellCtrl:()=>o.$Y_,AdvancedFilterModule:()=>Lt,AgAbstractField:()=>o.JWk,AgAbstractLabel:()=>o.DKR,AgAutocomplete:()=>o.bB5,AgCheckbox:()=>o.Unm,AgDialog:()=>o.fNJ,AgGroupComponent:()=>o.Pk_,AgInputDateField:()=>o.RYS,AgInputNumberField:()=>o.SpC,AgInputRange:()=>o.ycK,AgInputTextArea:()=>o.vXh,AgInputTextField:()=>o.stt,AgMenuItemComponent:()=>o.yuY,AgMenuList:()=>o.i9O,AgMenuPanel:()=>o.qkt,AgPanel:()=>o.LT8,AgPickerField:()=>o.HHt,AgPromise:()=>o.oY$,AgPromiseStatus:()=>o.SEh,AgRadioButton:()=>o.OQA,AgRichSelect:()=>o.pNP,AgSelect:()=>o.Ju4,AgSlider:()=>o.YD7,AgStackComponentsRegistry:()=>o.yOL,AgToggleButton:()=>o.bLJ,AlignedGridsService:()=>o.TYQ,AllCommunityModules:()=>o.UcL,AllEnterpriseModules:()=>uB,AllModules:()=>hB,AnimateShowChangeCellRenderer:()=>o.YEH,AnimateSlideCellRenderer:()=>o.kOq,AnimationFrameService:()=>o.hK9,AutoScrollService:()=>o.MSA,AutoWidthCalculator:()=>o.Qgm,Autowired:()=>o.dsm,BarColumnLabelPlacement:()=>o.fnn,BaseComponentWrapper:()=>o.Cf3,BaseCreator:()=>o.YzF,BaseGridSerializingSession:()=>o.NF5,Bean:()=>o.dR4,BeanStub:()=>o.XQb,Beans:()=>o.MDK,BodyDropPivotTarget:()=>o.R4L,BodyDropTarget:()=>o.LFT,CHART_TOOLBAR_ALLOW_LIST:()=>o.QO,CHART_TOOL_PANEL_ALLOW_LIST:()=>o.wCj,CHART_TOOL_PANEL_MENU_OPTIONS:()=>o.CV1,CellComp:()=>o.ehA,CellCtrl:()=>o.wX9,CellNavigationService:()=>o.aBp,CellPositionUtils:()=>o.HM$,CellRangeType:()=>o.OnL,ChangedPath:()=>o.k$d,CheckboxCellEditor:()=>o.j19,CheckboxCellRenderer:()=>o.tj3,CheckboxSelectionComponent:()=>o.TJD,ClientSideRowModelModule:()=>o.Q90,ClientSideRowModelSteps:()=>o.zOQ,ClipboardModule:()=>Kt,ColDefUtil:()=>o.sVm,Column:()=>o.VPZ,ColumnApi:()=>o.jf3,ColumnFactory:()=>o.tbO,ColumnGroup:()=>o.ock,ColumnKeyCreator:()=>o.a1W,ColumnModel:()=>o.K02,ColumnUtils:()=>o.A55,ColumnsToolPanelModule:()=>ro,Component:()=>o.uAl,ComponentUtil:()=>o.kNx,Context:()=>o.obS,CssClassApplier:()=>o.PC7,CssClassManager:()=>o.hv8,CsvCreator:()=>o.HvL,CsvExportModule:()=>o.n76,CtrlsService:()=>o.GsR,CustomTooltipFeature:()=>o.HjU,DEFAULT_CHART_GROUPS:()=>o.kWo,DataTypeService:()=>o.gvq,DateCellEditor:()=>o.ofN,DateFilter:()=>o.ZvW,DateStringCellEditor:()=>o.tyx,DisplayedGroupCreator:()=>o.HDb,Downloader:()=>o._7R,DragAndDropService:()=>o.WO_,DragService:()=>o.atK,DragSourceType:()=>o.qRA,EnterpriseCoreModule:()=>g,Environment:()=>o.OH$,EventService:()=>o.USV,Events:()=>o.sVA,ExcelExportModule:()=>ur,ExcelFactoryMode:()=>o.FiP,ExpansionService:()=>o.pkb,ExpressionService:()=>o.k4Y,FilterManager:()=>o.qh$,FiltersToolPanelModule:()=>Tr,FloatingFilterMapper:()=>o.aq,FocusService:()=>o.c4$,GROUP_AUTO_COLUMN_ID:()=>o.JPk,Grid:()=>o.xA9,GridApi:()=>o.fAn,GridBodyComp:()=>o.IqQ,GridBodyCtrl:()=>o.m20,GridChartsModule:()=>Iw,GridComp:()=>o.qdQ,GridCoreCreator:()=>o.Ug$,GridCtrl:()=>o.s1r,GridHeaderComp:()=>o.zCV,GridHeaderCtrl:()=>o.vBt,GridOptionsService:()=>o.E3M,GridSerializer:()=>o.pK6,GroupCellRenderer:()=>o.H_$,GroupCellRendererCtrl:()=>o.ihO,GroupInstanceIdCreator:()=>o.uf_,HeaderCellCtrl:()=>o.Lhl,HeaderFilterCellComp:()=>o.rdE,HeaderFilterCellCtrl:()=>o.HiW,HeaderGroupCellCtrl:()=>o.Kb3,HeaderNavigationDirection:()=>o.BFs,HeaderNavigationService:()=>o.Ry8,HeaderPositionUtils:()=>o.CS5,HeaderRowComp:()=>o.Hyp,HeaderRowContainerComp:()=>o.U3q,HeaderRowContainerCtrl:()=>o.OPU,HeaderRowCtrl:()=>o.fRK,HeaderRowType:()=>o.YtK,HorizontalDirection:()=>o.Iu8,HorizontalResizeService:()=>o.QBm,InfiniteRowModelModule:()=>o.Sko,KeyCode:()=>o.DDm,LargeTextCellEditor:()=>o.GPp,LayoutCssClasses:()=>o.gay,LicenseManager:()=>u,LocaleService:()=>o.iH9,Logger:()=>o.VyI,LoggerFactory:()=>o.PLc,ManagedFocusFeature:()=>o.G21,MasterDetailModule:()=>Kw,MenuModule:()=>fE,ModuleNames:()=>o.zsj,ModuleRegistry:()=>o.syG,MouseEventService:()=>o.Rdv,MoveColumnFeature:()=>o.auO,MultiFilter:()=>mE,MultiFilterModule:()=>wE,NavigationService:()=>o.o_p,NumberCellEditor:()=>o.dcM,NumberFilter:()=>o.yLQ,NumberSequence:()=>o.RI_,Optional:()=>o.Xx1,PaginationProxy:()=>o.TOO,PinnedRowModel:()=>o.aP4,PivotDropZonePanel:()=>ci,PopupComponent:()=>o.yGC,PopupEditorWrapper:()=>o.zmE,PopupService:()=>o.OQU,PositionableFeature:()=>o.qyQ,PostConstruct:()=>o.o7C,PreConstruct:()=>o.fK3,PreDestroy:()=>o.yah,PrimaryColsPanel:()=>Ti,PropertyKeys:()=>o.K42,ProvidedColumnGroup:()=>o.D45,ProvidedFilter:()=>o.Q5x,Qualifier:()=>o.Vf_,QuerySelector:()=>o.yLT,RangeSelectionModule:()=>xw,RefSelector:()=>o.PIB,ResizeObserverService:()=>o.kem,RichSelectModule:()=>DE,RowAnimationCssClasses:()=>o.IGk,RowContainerComp:()=>o.B_v,RowContainerCtrl:()=>o.Rlq,RowContainerName:()=>o.lon,RowContainerType:()=>o.uvO,RowCtrl:()=>o.CJG,RowGroupDropZonePanel:()=>si,RowGroupingModule:()=>Ci,RowHighlightPosition:()=>o.m5s,RowNode:()=>o.TUE,RowNodeBlock:()=>o.iEP,RowNodeBlockLoader:()=>o.RRV,RowNodeSorter:()=>o.mE1,RowPositionUtils:()=>o.HLc,RowRenderer:()=>o.k7d,RowType:()=>o.T6X,ScalarFilter:()=>o.TaT,ScrollVisibleService:()=>o.fVA,SelectCellEditor:()=>o.eAL,SelectableService:()=>o.K4S,SelectionHandleType:()=>o.LIk,ServerSideRowModelModule:()=>BO,ServerSideTransactionResultStatus:()=>o.a8A,SetFilter:()=>rD,SetFilterModule:()=>hD,SetLeftFeature:()=>o.uij,SideBarModule:()=>io,SimpleFilter:()=>o.PJL,SortController:()=>o.xSC,SortIndicatorComp:()=>o.pE7,SparklinesModule:()=>dB,StandardMenuFactory:()=>o.Pmj,StatusBarModule:()=>FD,StylingService:()=>o.EJF,TabGuardClassNames:()=>o.pA9,TabGuardComp:()=>o.aJZ,TabGuardCtrl:()=>o.Udn,TabbedLayout:()=>o.LfH,TemplateService:()=>o.IKT,TextCellEditor:()=>o.zIT,TextFilter:()=>o.U$F,TextFloatingFilter:()=>o.U_L,Timer:()=>o.M4G,ToolPanelColDefService:()=>Ji,TooltipFeature:()=>o.CvR,TouchListener:()=>o.MVO,UserComponentFactory:()=>o.xMA,UserComponentRegistry:()=>o.utH,ValueCache:()=>o.YHi,ValueFormatterService:()=>o.RJ3,ValueParserService:()=>o.kh_,ValueService:()=>o.bBw,ValuesDropZonePanel:()=>Oi,VanillaFrameworkOverrides:()=>o.pow,VerticalDirection:()=>o.mqe,ViewportRowModelModule:()=>jD,VirtualList:()=>o.wjn,VirtualListDragFeature:()=>o.ia$,XmlFactory:()=>o.aS7,ZipContainer:()=>o.J1w,_:()=>o._,__FORCE_MODULE_DETECTION:()=>o.JLU,__FORCE_MODULE_DETECTION_AG_GRID_CORE_EXT:()=>Fw,agCharts:()=>Gw,createGrid:()=>o.Dvw,exportMultipleSheetsAsExcel:()=>lr,getMultipleSheetsAsExcel:()=>ar,getRowContainerTypeForName:()=>o.CSq});var o=i(9282),n=function(){function t(){this.ieCompatibility=!1}return t.prototype.init=function(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")},t.prototype.md5cycle=function(t,e){var i=t[0],o=t[1],n=t[2],r=t[3];i=this.ff(i,o,n,r,e[0],7,-680876936),r=this.ff(r,i,o,n,e[1],12,-389564586),n=this.ff(n,r,i,o,e[2],17,606105819),o=this.ff(o,n,r,i,e[3],22,-1044525330),i=this.ff(i,o,n,r,e[4],7,-176418897),r=this.ff(r,i,o,n,e[5],12,1200080426),n=this.ff(n,r,i,o,e[6],17,-1473231341),o=this.ff(o,n,r,i,e[7],22,-45705983),i=this.ff(i,o,n,r,e[8],7,1770035416),r=this.ff(r,i,o,n,e[9],12,-1958414417),n=this.ff(n,r,i,o,e[10],17,-42063),o=this.ff(o,n,r,i,e[11],22,-1990404162),i=this.ff(i,o,n,r,e[12],7,1804603682),r=this.ff(r,i,o,n,e[13],12,-40341101),n=this.ff(n,r,i,o,e[14],17,-1502002290),o=this.ff(o,n,r,i,e[15],22,1236535329),i=this.gg(i,o,n,r,e[1],5,-165796510),r=this.gg(r,i,o,n,e[6],9,-1069501632),n=this.gg(n,r,i,o,e[11],14,643717713),o=this.gg(o,n,r,i,e[0],20,-373897302),i=this.gg(i,o,n,r,e[5],5,-701558691),r=this.gg(r,i,o,n,e[10],9,38016083),n=this.gg(n,r,i,o,e[15],14,-660478335),o=this.gg(o,n,r,i,e[4],20,-405537848),i=this.gg(i,o,n,r,e[9],5,568446438),r=this.gg(r,i,o,n,e[14],9,-1019803690),n=this.gg(n,r,i,o,e[3],14,-187363961),o=this.gg(o,n,r,i,e[8],20,1163531501),i=this.gg(i,o,n,r,e[13],5,-1444681467),r=this.gg(r,i,o,n,e[2],9,-51403784),n=this.gg(n,r,i,o,e[7],14,1735328473),o=this.gg(o,n,r,i,e[12],20,-1926607734),i=this.hh(i,o,n,r,e[5],4,-378558),r=this.hh(r,i,o,n,e[8],11,-2022574463),n=this.hh(n,r,i,o,e[11],16,1839030562),o=this.hh(o,n,r,i,e[14],23,-35309556),i=this.hh(i,o,n,r,e[1],4,-1530992060),r=this.hh(r,i,o,n,e[4],11,1272893353),n=this.hh(n,r,i,o,e[7],16,-155497632),o=this.hh(o,n,r,i,e[10],23,-1094730640),i=this.hh(i,o,n,r,e[13],4,681279174),r=this.hh(r,i,o,n,e[0],11,-358537222),n=this.hh(n,r,i,o,e[3],16,-722521979),o=this.hh(o,n,r,i,e[6],23,76029189),i=this.hh(i,o,n,r,e[9],4,-640364487),r=this.hh(r,i,o,n,e[12],11,-421815835),n=this.hh(n,r,i,o,e[15],16,530742520),o=this.hh(o,n,r,i,e[2],23,-995338651),i=this.ii(i,o,n,r,e[0],6,-198630844),r=this.ii(r,i,o,n,e[7],10,1126891415),n=this.ii(n,r,i,o,e[14],15,-1416354905),o=this.ii(o,n,r,i,e[5],21,-57434055),i=this.ii(i,o,n,r,e[12],6,1700485571),r=this.ii(r,i,o,n,e[3],10,-1894986606),n=this.ii(n,r,i,o,e[10],15,-1051523),o=this.ii(o,n,r,i,e[1],21,-2054922799),i=this.ii(i,o,n,r,e[8],6,1873313359),r=this.ii(r,i,o,n,e[15],10,-30611744),n=this.ii(n,r,i,o,e[6],15,-1560198380),o=this.ii(o,n,r,i,e[13],21,1309151649),i=this.ii(i,o,n,r,e[4],6,-145523070),r=this.ii(r,i,o,n,e[11],10,-1120210379),n=this.ii(n,r,i,o,e[2],15,718787259),o=this.ii(o,n,r,i,e[9],21,-343485551),t[0]=this.add32(i,t[0]),t[1]=this.add32(o,t[1]),t[2]=this.add32(n,t[2]),t[3]=this.add32(r,t[3])},t.prototype.cmn=function(t,e,i,o,n,r){return e=this.add32(this.add32(e,t),this.add32(o,r)),this.add32(e<<n|e>>>32-n,i)},t.prototype.ff=function(t,e,i,o,n,r,s){return this.cmn(e&i|~e&o,t,e,n,r,s)},t.prototype.gg=function(t,e,i,o,n,r,s){return this.cmn(e&o|i&~o,t,e,n,r,s)},t.prototype.hh=function(t,e,i,o,n,r,s){return this.cmn(e^i^o,t,e,n,r,s)},t.prototype.ii=function(t,e,i,o,n,r,s){return this.cmn(i^(e|~o),t,e,n,r,s)},t.prototype.md51=function(t){var e,i=t.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)this.md5cycle(o,this.md5blk(t.substring(e-64,e)));t=t.substring(e-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)n[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(n[e>>2]|=128<<(e%4<<3),e>55)for(this.md5cycle(o,n),e=0;e<16;e++)n[e]=0;return n[14]=8*i,this.md5cycle(o,n),o},t.prototype.md5blk=function(t){for(var e=[],i=0;i<64;i+=4)e[i>>2]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24);return e},t.prototype.rhex=function(t){for(var e="0123456789abcdef".split(""),i="",o=0;o<4;o++)i+=e[t>>8*o+4&15]+e[t>>8*o&15];return i},t.prototype.hex=function(t){for(var e=0;e<t.length;e++)t[e]=this.rhex(t[e]);return t.join("")},t.prototype.md5=function(t){return this.hex(this.md51(t))},t.prototype.add32=function(t,e){return this.ieCompatibility?this.add32Compat(t,e):this.add32Std(t,e)},t.prototype.add32Std=function(t,e){return t+e&4294967295},t.prototype.add32Compat=function(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i},t}(),r=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};function s(t){return null==t||0===t.length}var a={"01":"GRID","02":"CHARTS","0102":"BOTH"},l=function(){function t(t){this.watermarkMessage=void 0,this.document=t,this.md5=new n,this.md5.init()}return t.prototype.validateLicense=function(){var e=this.getLicenseDetails(t.licenseKey);if(e.missing)this.isWebsiteUrl()&&!this.isForceWatermark()||this.outputMissingLicenseKey();else if(e.valid){if(e.isTrial&&e.trialExpired)this.outputExpiredTrialKey(e.expiry);else if(e.expired){var i=t.getGridReleaseDate(),o=t.formatDate(i);this.outputIncompatibleVersion(e.expiry,o)}}else this.outputInvalidLicenseKey(e.incorrectLicenseType,e.licenseType)},t.extractExpiry=function(e){var i=e.substring(e.lastIndexOf("_")+1,e.length);return new Date(parseInt(t.decode(i),10))},t.extractLicenseComponents=function(e){var i=e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),e.length<=32)return{md5:null,license:e,version:null,isTrial:null};var o=i.length-32,n=i.substring(o),s=i.substring(0,o),a=r(t.extractBracketedInformation(i),3);return{md5:n,license:s,version:a[0],isTrial:a[1],type:a[2]}},t.prototype.getLicenseDetails=function(e){if(s(e))return{licenseKey:e,valid:!1,missing:!0};var i=t.getGridReleaseDate(),o=t.extractLicenseComponents(e),n=o.md5,r=o.license,l=o.version,c=o.isTrial,d=o.type,u=n===this.md5.md5(r)&&-1===e.indexOf("For_Trialing_ag-Grid_Only"),h=void 0,p=void 0,f=null,g=void 0,v=void 0;function y(){var t=new Date;h=f<t,p=void 0}if(u&&(f=t.extractExpiry(r),u=!isNaN(f.getTime())))switch(p=i>f,l){case"legacy":case"2":c&&y();break;case"3":s(d)?u=!1:d!==a["01"]&&d!==a["0102"]?(u=!1,g=!0,v=d):c&&y()}return u?{licenseKey:e,valid:u,expiry:t.formatDate(f),expired:p,version:l,isTrial:c,trialExpired:h}:{licenseKey:e,valid:u,incorrectLicenseType:g,licenseType:v}},t.prototype.isDisplayWatermark=function(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!s(this.watermarkMessage)},t.prototype.getWatermarkMessage=function(){return this.watermarkMessage||""},t.prototype.getHostname=function(){var t=(this.document.defaultView||window).location.hostname;return void 0===t?"":t},t.prototype.isForceWatermark=function(){var t=(this.document.defaultView||window).location.pathname;return!!t&&-1!==t.indexOf("forceWatermark")},t.prototype.isWebsiteUrl=function(){return null!==this.getHostname().match(/^((?:\w+\.)?ag-grid\.com)$/)},t.prototype.isLocalhost=function(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)},t.formatDate=function(t){var e=t.getDate(),i=t.getMonth(),o=t.getFullYear();return e+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][i]+" "+o},t.getGridReleaseDate=function(){return new Date(parseInt(t.decode(t.RELEASE_INFORMATION),10))},t.decode=function(e){for(var i,o,n,r,s,a,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",d=0,u=e.replace(/[^A-Za-z0-9+/=]/g,"");d<u.length;)i=l.indexOf(u.charAt(d++))<<2|(r=l.indexOf(u.charAt(d++)))>>4,o=(15&r)<<4|(s=l.indexOf(u.charAt(d++)))>>2,n=(3&s)<<6|(a=l.indexOf(u.charAt(d++))),c+=String.fromCharCode(i),64!=s&&(c+=String.fromCharCode(o)),64!=a&&(c+=String.fromCharCode(n));return c=t.utf8_decode(c)},t.utf8_decode=function(t){t=t.replace(/rn/g,"n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},t.setLicenseKey=function(t){this.licenseKey=t},t.extractBracketedInformation=function(t){if(!t.includes("["))return["legacy",!1,void 0];var e=t.match(/\[(.*?)\]/g).map((function(t){return t.replace("[","").replace("]","")}));if(!e||0===e.length)return["legacy",!1,void 0];var i=1===e.filter((function(t){return"TRIAL"===t})).length,o=e.filter((function(t){return 0===t.indexOf("v")}))[0];return[o?o.replace("v",""):"legacy",i,a[e.filter((function(t){return a[t]}))[0]]]},t.prototype.outputInvalidLicenseKey=function(t,e){var i,o;console.error("*****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License ********************************************"),console.error("********************************************* Invalid License ***************************************************"),void 0===o&&(o=!1),null!=(i=t)&&(""!==i||o)&&t&&"CHARTS"===e&&console.error("* The license supplied is for AG Charts Enterprise Only and does not cover AG Grid Enterprise                   *"),console.error("* Your license for AG Grid Enterprise is not valid - please contact info@ag-grid.com to obtain a valid license. *"),console.error("*****************************************************************************************************************"),console.error("*****************************************************************************************************************"),this.watermarkMessage="Invalid License"},t.prototype.outputExpiredTrialKey=function(t){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("*****************************************   Trial Period Expired.    *******************************************"),console.error("* Your license for AG Grid Enterprise expired on ".concat(t,".                                                *")),console.error("* Please email info@ag-grid.com to purchase a license.                                                         *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="Trial Period Expired"},t.prototype.outputMissingLicenseKey=function(){console.error("****************************************************************************************************************"),console.error("***************************************** AG Grid Enterprise License *******************************************"),console.error("****************************************** License Key Not Found ***********************************************"),console.error("* All AG Grid Enterprise features are unlocked.                                                                *"),console.error("* This is an evaluation only version, it is not licensed for development projects intended for production.     *"),console.error("* If you want to hide the watermark, please email info@ag-grid.com for a trial license.                        *"),console.error("****************************************************************************************************************"),console.error("****************************************************************************************************************"),this.watermarkMessage="For Trial Use Only"},t.prototype.outputIncompatibleVersion=function(t,e){console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),console.error("*                                             AG Grid Enterprise License                                                   *"),console.error("*                           License not compatible with installed version of AG Grid Enterprise.                           *"),console.error("*                                                                                                                          *"),console.error("* Your AG Grid License entitles you to all versions of AG Grid that we release within the time covered by your license     *"),console.error("* - typically we provide one year licenses which entitles you to all releases / updates of AG Grid within that year.       *"),console.error("* Your license has an end (expiry) date which stops the license key working with versions of AG Grid released after the    *"),console.error("* license end date. The license key that you have expires on ".concat(t,", however the version of AG Grid you    *")),console.error("* are trying to use was released on ".concat(e,".                                                               *")),console.error("*                                                                                                                          *"),console.error("* Please contact info@ag-grid.com to renew your subscription to new versions and get a new license key to work with this   *"),console.error("* version of AG Grid.                                                                                                      *"),console.error("****************************************************************************************************************************"),console.error("****************************************************************************************************************************"),this.watermarkMessage="License Expired"},t.RELEASE_INFORMATION="MTcwMTA3MzA3NTIwOQ==",t}(),c=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),d=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return c(e,t),e.prototype.validateLicense=function(){this.licenseManager=new l(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()},e.getLicenseDetails=function(t){return new l(null).getLicenseDetails(t)},e.prototype.isDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},e.prototype.getWatermarkMessage=function(){return this.licenseManager.getWatermarkMessage()},e.setLicenseKey=function(t){l.setLicenseKey(t)},d([o.fK3],e.prototype,"validateLicense",null),e=d([(0,o.dR4)("licenseManager")],e)}(o.XQb),h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),p=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},f=function(t){function e(){return t.call(this,'<div class="ag-watermark">\n                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n            </div>')||this}return h(e,t),e.prototype.postConstruct=function(){var t=this,e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout((function(){return t.addCssClass("ag-opacity-zero")}),0),window.setTimeout((function(){return t.setDisplayed(!1)}),5e3))},e.prototype.shouldDisplayWatermark=function(){return this.licenseManager.isDisplayWatermark()},p([(0,o.dsm)("licenseManager")],e.prototype,"licenseManager",void 0),p([(0,o.PIB)("eLicenseTextRef")],e.prototype,"eLicenseTextRef",void 0),p([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),g={version:"31.0.0",moduleName:o.zsj.EnterpriseCoreModule,beans:[u],agStackComponents:[{componentName:"AgWatermark",componentClass:f}]},v=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),y=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},m=function(t){function e(e){var i=t.call(this,'\n            <div class="ag-advanced-filter-header" role="row">\n            </div>')||this;return i.enabled=e,i}return v(e,t),e.prototype.postConstruct=function(){var t=this;this.setupAdvancedFilter(this.enabled),this.addDestroyFunc((function(){return t.destroyBean(t.eAdvancedFilter)})),this.addManagedListener(this.eventService,o.sVA.EVENT_GRID_COLUMNS_CHANGED,(function(){return t.onGridColumnsChanged()})),this.addGuiEventListener("keydown",(function(e){return t.onKeyDown(e)})),this.addGuiEventListener("focusout",(function(e){t.getFocusableElement().contains(e.relatedTarget)||t.focusService.clearAdvancedFilterColumn()}))},e.prototype.getFocusableElement=function(){var t,e;return null!==(e=null===(t=this.eAdvancedFilter)||void 0===t?void 0:t.getGui())&&void 0!==e?e:this.getGui()},e.prototype.setEnabled=function(t){t!==this.enabled&&this.setupAdvancedFilter(t)},e.prototype.refresh=function(){var t;null===(t=this.eAdvancedFilter)||void 0===t||t.refresh()},e.prototype.getHeight=function(){return this.height},e.prototype.setInputDisabled=function(t){var e;null===(e=this.eAdvancedFilter)||void 0===e||e.setInputDisabled(t)},e.prototype.setupAdvancedFilter=function(t){var e=this.getGui();if(t){this.eAdvancedFilter=this.createBean(new st);var i=this.eAdvancedFilter.getGui();this.eAdvancedFilter.addCssClass("ag-advanced-filter-header-cell"),this.height=this.columnModel.getFloatingFiltersHeight();var n="".concat(this.height,"px");e.style.height=n,e.style.minHeight=n,this.setAriaRowIndex(),o._.setAriaRole(i,"gridcell"),o._.setAriaColIndex(i,1),this.setAriaColumnCount(i),e.appendChild(i)}else o._.clearElement(e),this.destroyBean(this.eAdvancedFilter),this.height=0;o._.setDisplayed(e,t),this.enabled=t},e.prototype.setAriaColumnCount=function(t){o._.setAriaColSpan(t,this.columnModel.getAllGridColumns().length)},e.prototype.setAriaRowIndex=function(){o._.setAriaRowIndex(this.getGui(),this.headerNavigationService.getHeaderRowCount())},e.prototype.onGridColumnsChanged=function(){this.eAdvancedFilter&&(this.setAriaColumnCount(this.eAdvancedFilter.getGui()),this.setAriaRowIndex())},e.prototype.onKeyDown=function(t){switch(t.key){case o.DDm.ENTER:this.hasFocus()&&this.focusService.focusInto(this.getFocusableElement())&&t.preventDefault();break;case o.DDm.ESCAPE:this.hasFocus()||this.getFocusableElement().focus();break;case o.DDm.UP:this.navigateUpDown(!0,t);break;case o.DDm.DOWN:this.navigateUpDown(!1,t);break;case o.DDm.TAB:if(this.hasFocus())this.navigateLeftRight(t);else{var e=this.focusService.findNextFocusableElement(this.getFocusableElement(),null,t.shiftKey);e?(t.preventDefault(),e.focus()):this.navigateLeftRight(t)}}},e.prototype.navigateUpDown=function(t,e){this.hasFocus()&&this.focusService.focusNextFromAdvancedFilter(t)&&e.preventDefault()},e.prototype.navigateLeftRight=function(t){(t.shiftKey?this.focusService.focusLastHeader():this.focusService.focusNextFromAdvancedFilter(!1,!0))&&t.preventDefault()},e.prototype.hasFocus=function(){return this.gridOptionsService.getDocument().activeElement===this.getFocusableElement()},y([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),y([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),y([(0,o.dsm)("headerNavigationService")],e.prototype,"headerNavigationService",void 0),y([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),b=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),S=function(){return S=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},S.apply(this,arguments)},x=function(t){function e(e){var i=t.call(this,S(S({},e),{template:'\n                <div class="ag-picker-field" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return i.params=e,i}return b(e,t),e.prototype.showPicker=function(){var e=this;setTimeout((function(){return t.prototype.showPicker.call(e)}))},e.prototype.hidePicker=function(){var e=this;setTimeout((function(){return t.prototype.hidePicker.call(e)}))},e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.params,i=e.wrapperClassName,n=e.ariaLabel;o._.setDisplayed(this.eDisplayField,!1),i&&this.eWrapper.classList.add(i),o._.setAriaLabelledBy(this.eWrapper,""),o._.setAriaLabel(this.eWrapper,n)},e.prototype.onEnterKeyDown=function(e){o._.stopPropagationForAgGrid(e),this.isPickerDisplayed?t.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},e}(o.pNP),C=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),w=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},E=function(t){function e(e,i){var o=t.call(this)||this;return o.comp=e,o.virtualList=i,o}return C(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new o.ia$(this.comp,this.virtualList,{dragSourceType:o.qRA.AdvancedFilterBuilder,listItemDragStartEvent:e.EVENT_DRAG_STARTED,listItemDragEndEvent:e.EVENT_DRAG_ENDED,eventSource:this,getCurrentDragValue:function(e){return t.getCurrentDragValue(e)},isMoveBlocked:function(){return!1},getNumRows:function(t){return t.getNumItems()},moveItem:function(e,i){return t.moveItem(e,i)}}))},e.prototype.getCurrentDragValue=function(t){return t.item},e.prototype.moveItem=function(t,e){this.comp.moveItem(t,e)},e.EVENT_DRAG_STARTED="advancedFilterBuilderDragStarted",e.EVENT_DRAG_ENDED="advancedFilterBuilderDragEnded",w([o.o7C],e.prototype,"postConstruct",null),e}(o.XQb),O=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),D=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},A=function(t){function e(e,i,o){var n=t.call(this)||this;return n.eGui=e,n.focusWrapper=i,n.eFocusableComp=o,n}return O(e,t),e.prototype.postConstruct=function(){var t=this;this.addManagedListener(this.eGui,"keydown",(function(e){switch(e.key){case o.DDm.TAB:e.defaultPrevented||o._.stopPropagationForAgGrid(e);break;case o.DDm.UP:case o.DDm.DOWN:o._.stopPropagationForAgGrid(e);break;case o.DDm.ESCAPE:if(o._.isStopPropagationForAgGrid(e))return;var i=t.gridOptionsService.getDocument();t.eGui.contains(i.activeElement)&&(e.preventDefault(),o._.stopPropagationForAgGrid(e),t.focusWrapper.focus())}})),this.addManagedListener(this.focusWrapper,"keydown",(function(e){if(e.key===o.DDm.ENTER){if(o._.isStopPropagationForAgGrid(e))return;t.gridOptionsService.getDocument().activeElement===t.focusWrapper&&(e.preventDefault(),o._.stopPropagationForAgGrid(e),t.eFocusableComp.getFocusableElement().focus())}})),this.addManagedListener(this.focusWrapper,"focusin",(function(){t.focusWrapper.classList.add("ag-advanced-filter-builder-virtual-list-item-highlight")})),this.addManagedListener(this.focusWrapper,"focusout",(function(e){t.focusWrapper.contains(e.relatedTarget)||t.focusWrapper.classList.remove("ag-advanced-filter-builder-virtual-list-item-highlight")}))},D([o.o7C],e.prototype,"postConstruct",null),e}(o.XQb);function T(t,e){return{pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderAddField",pickerAriaLabelValue:"Advanced Filter Builder Add Field",pickerType:"ag-list",valueList:[{key:"condition",displayValue:t("advancedFilterBuilderAddCondition")},{key:"join",displayValue:t("advancedFilterBuilderAddJoin")}],valueFormatter:function(t){var e;return null==t?null:null!==(e=t.displayValue)&&void 0!==e?e:t.key},pickerIcon:"advancedFilterBuilderAdd",maxPickerWidth:"".concat(null!==e&&void 0!==e?e:120,"px"),wrapperClassName:"ag-advanced-filter-builder-item-button",ariaLabel:t("advancedFilterBuilderAddButtonTooltip")}}var M=function(){function t(){}return t.EVENT_ADDED="advancedFilterBuilderAdded",t.EVENT_MOVED="advancedFilterBuilderMoved",t.EVENT_REMOVED="advancedFilterBuilderRemoved",t.EVENT_VALUE_CHANGED="advancedFilterBuilderValueChanged",t.EVENT_VALID_CHANGED="advancedFilterBuilderValidChanged",t}(),k=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),R=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},P=function(t){function e(){var e=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this;return e.validationMessage=null,e}return k(e,t),e.prototype.init=function(t){var e=this,i=t.item,o=t.createPill;this.item=i,this.createPill=o,this.filterModel=i.filterModel,this.setupColumnCondition(this.filterModel),this.validate(),this.addDestroyFunc((function(){return e.destroyBeans([e.eColumnPill,e.eOperatorPill,e.eOperandPill])}))},e.prototype.getDragName=function(){return this.filterModel.colId?this.advancedFilterExpressionService.parseColumnFilterModel(this.filterModel):this.getDefaultColumnDisplayValue()},e.prototype.getAriaLabel=function(){return"".concat(this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderFilterItem")," ").concat(this.getDragName())},e.prototype.getValidationMessage=function(){return this.validationMessage},e.prototype.getFocusableElement=function(){return this.eColumnPill.getFocusableElement()},e.prototype.setupColumnCondition=function(t){var e,i=this,n=this.advancedFilterExpressionService.getColumnDetails(t.colId);this.baseCellDataType=n.baseCellDataType,this.column=n.column,this.numOperands=this.getNumOperands(this.getOperatorKey()),this.eColumnPill=this.createPill({key:this.getColumnKey(),displayValue:null!==(e=this.getColumnDisplayValue())&&void 0!==e?e:this.getDefaultColumnDisplayValue(),cssClass:"ag-advanced-filter-builder-column-pill",isSelect:!0,getEditorParams:function(){return{values:i.advancedFilterExpressionService.getColumnAutocompleteEntries()}},update:function(t){return i.setColumnKey(t)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderColumnSelectField",pickerAriaLabelValue:"Advanced Filter Builder Column Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderColumn")}),this.getGui().appendChild(this.eColumnPill.getGui()),o._.exists(this.getColumnKey())&&(this.createOperatorPill(),this.hasOperand()&&this.createOperandPill())},e.prototype.createOperatorPill=function(){var t,e=this;this.eOperatorPill=this.createPill({key:this.getOperatorKey(),displayValue:null!==(t=this.getOperatorDisplayValue())&&void 0!==t?t:this.getDefaultOptionSelectValue(),cssClass:"ag-advanced-filter-builder-option-pill",isSelect:!0,getEditorParams:function(){return{values:e.getOperatorAutocompleteEntries()}},update:function(t){return e.setOperatorKey(t)},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderOptionSelectField",pickerAriaLabelValue:"Advanced Filter Builder Option Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderOption")}),this.eColumnPill.getGui().insertAdjacentElement("afterend",this.eOperatorPill.getGui())},e.prototype.createOperandPill=function(){var t,e=this,i=null!==(t=this.getOperandDisplayValue())&&void 0!==t?t:"";this.eOperandPill=this.createPill({key:i,displayValue:i,baseCellDataType:this.baseCellDataType,cssClass:"ag-advanced-filter-builder-value-pill",isSelect:!1,update:function(t){return e.setOperand(t)},ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderValue")}),this.getGui().appendChild(this.eOperandPill.getGui())},e.prototype.getColumnKey=function(){return this.filterModel.colId},e.prototype.getColumnDisplayValue=function(){return this.advancedFilterExpressionService.getColumnDisplayValue(this.filterModel)},e.prototype.getOperatorKey=function(){return this.filterModel.type},e.prototype.getOperatorDisplayValue=function(){return this.advancedFilterExpressionService.getOperatorDisplayValue(this.filterModel)},e.prototype.getOperandDisplayValue=function(){return this.advancedFilterExpressionService.getOperandDisplayValue(this.filterModel,!0)},e.prototype.hasOperand=function(){return this.numOperands>0},e.prototype.getOperatorAutocompleteEntries=function(){return this.column?this.advancedFilterExpressionService.getOperatorAutocompleteEntries(this.column,this.baseCellDataType):[]},e.prototype.setColumnKey=function(t){this.eOperatorPill||this.createOperatorPill();var e=this.advancedFilterExpressionService.getColumnDetails(t);this.column=e.column;var i=e.baseCellDataType;this.baseCellDataType!==i&&(this.baseCellDataType=i,this.setOperatorKey(void 0),this.eOperatorPill&&(o._.removeFromParent(this.eOperatorPill.getGui()),this.destroyBean(this.eOperatorPill),this.createOperatorPill()),this.validate()),this.filterModel.colId=t,this.filterModel.filterType=this.baseCellDataType},e.prototype.setOperatorKey=function(t){var e=this.getNumOperands(t);e!==this.numOperands&&(this.numOperands=e,0===e?this.destroyOperandPill():(this.createOperandPill(),"number"!==this.baseCellDataType&&this.setOperand(""))),this.filterModel.type=t,this.validate()},e.prototype.setOperand=function(t){var e,i=t;this.column&&(i=null!==(e=this.advancedFilterExpressionService.getOperandModelValue(t,this.baseCellDataType,this.column))&&void 0!==e?e:""),this.filterModel.filter=i,this.validate()},e.prototype.getNumOperands=function(t){var e,i;return null!==(i=null===(e=this.advancedFilterExpressionService.getExpressionOperator(this.baseCellDataType,t))||void 0===e?void 0:e.numOperands)&&void 0!==i?i:0},e.prototype.destroyOperandPill=function(){delete this.filterModel.filter,this.getGui().removeChild(this.eOperandPill.getGui()),this.destroyBean(this.eOperandPill),this.eOperandPill=void 0},e.prototype.validate=function(){var t=null;o._.exists(this.getColumnKey())?o._.exists(this.getOperatorKey())?this.numOperands>0&&!o._.exists(this.getOperandDisplayValue())&&(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationEnterValue")):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectOption"):t=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationSelectColumn"),this.item.valid=!t,t!==this.validationMessage&&(this.validationMessage=t,this.dispatchEvent({type:M.EVENT_VALID_CHANGED}))},e.prototype.getDefaultColumnDisplayValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectColumn")},e.prototype.getDefaultOptionSelectValue=function(){return this.advancedFilterExpressionService.translate("advancedFilterBuilderSelectOption")},R([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),R([(0,o.dsm)("valueParserService")],e.prototype,"valueParserService",void 0),e}(o.uAl),N=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),L=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_=function(t){function e(e){var i=t.call(this,'\n            <div class="ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                <div ref="ePill" class="ag-advanced-filter-builder-pill" role="button">\n                    <span ref="eLabel" class="ag-advanced-filter-builder-pill-display"></span>\n                </div>\n            </div>\n        ')||this;return i.params=e,i.value=e.value,i}return N(e,t),e.prototype.postConstruct=function(){var t=this,e=this.params,i=e.cssClass,n=e.ariaLabel;this.ePill.classList.add(i),this.activateTabIndex([this.ePill]),this.eLabel.id="".concat(this.getCompId()),o._.setAriaDescribedBy(this.ePill,this.eLabel.id),o._.setAriaLabel(this.ePill,n),this.renderValue(),this.addManagedListener(this.ePill,"click",(function(e){e.preventDefault(),t.showEditor()})),this.addManagedListener(this.ePill,"keydown",(function(e){if(e.key===o.DDm.ENTER)e.preventDefault(),o._.stopPropagationForAgGrid(e),t.showEditor()})),this.addDestroyFunc((function(){return t.destroyBean(t.eEditor)}))},e.prototype.getFocusableElement=function(){return this.ePill},e.prototype.showEditor=function(){var t=this;if(!this.eEditor){o._.setDisplayed(this.ePill,!1),this.eEditor=this.createEditorComp(this.params.type),this.eEditor.setValue(this.value);var e=this.eEditor.getGui();this.eEditor.addManagedListener(e,"keydown",(function(e){switch(e.key){case o.DDm.ENTER:e.preventDefault(),o._.stopPropagationForAgGrid(e),t.updateValue(!0);break;case o.DDm.ESCAPE:e.preventDefault(),o._.stopPropagationForAgGrid(e),t.hideEditor(!0)}})),this.eEditor.addManagedListener(e,"focusout",(function(){t.updateValue(!1)})),this.getGui().appendChild(e),this.eEditor.getFocusableElement().focus()}},e.prototype.createEditorComp=function(t){var e;switch(t){case"text":e=new o.stt;break;case"number":e=new o.SpC;break;case"date":e=new o.RYS}return this.createBean(e)},e.prototype.hideEditor=function(t){var e=this.eEditor;e&&(this.eEditor=void 0,this.getGui().removeChild(e.getGui()),this.destroyBean(e),o._.setDisplayed(this.ePill,!0),t&&this.ePill.focus())},e.prototype.renderValue=function(){var t;this.eLabel.classList.remove("ag-advanced-filter-builder-value-empty","ag-advanced-filter-builder-value-number","ag-advanced-filter-builder-value-text"),o._.exists(this.value)?"number"===this.params.type?(t=this.value,this.eLabel.classList.add("ag-advanced-filter-builder-value-number")):(t='"'.concat(this.value,'"'),this.eLabel.classList.add("ag-advanced-filter-builder-value-text")):(t=this.advancedFilterExpressionService.translate("advancedFilterBuilderEnterValue"),this.eLabel.classList.add("ag-advanced-filter-builder-value-empty")),this.eLabel.innerText=t},e.prototype.updateValue=function(t){var e;if(this.eEditor){var i=null!==(e=this.eEditor.getValue())&&void 0!==e?e:"";this.dispatchEvent({type:o.sVA.EVENT_FIELD_VALUE_CHANGED,value:i}),this.value=i,this.renderValue(),this.hideEditor(t)}},L([(0,o.PIB)("ePill")],e.prototype,"ePill",void 0),L([(0,o.PIB)("eLabel")],e.prototype,"eLabel",void 0),L([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),L([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),I=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),F=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},G=function(t){function e(){return t.call(this,'\n            <div class="ag-advanced-filter-builder-item-condition" role="presentation"></div>\n        ')||this}return I(e,t),e.prototype.init=function(t){var e=this,i=t.item,o=t.createPill,n=i.filterModel;this.filterModel=n,this.ePill=o({key:n.type,displayValue:this.advancedFilterExpressionService.parseJoinOperator(n),cssClass:"ag-advanced-filter-builder-join-pill",isSelect:!0,getEditorParams:function(){return{values:e.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries()}},update:function(t){return n.type=t},pickerAriaLabelKey:"ariaLabelAdvancedFilterBuilderJoinSelectField",pickerAriaLabelValue:"Advanced Filter Builder Join Operator Select Field",ariaLabel:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderJoinOperator")}),this.getGui().appendChild(this.ePill.getGui()),this.addDestroyFunc((function(){return e.destroyBean(e.ePill)}))},e.prototype.getDragName=function(){return this.advancedFilterExpressionService.parseJoinOperator(this.filterModel)},e.prototype.getAriaLabel=function(){return"".concat(this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderGroupItem")," ").concat(this.getDragName())},e.prototype.getValidationMessage=function(){return null},e.prototype.getFocusableElement=function(){return this.ePill.getFocusableElement()},F([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),e}(o.uAl),B=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),V=function(){return V=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},V.apply(this,arguments)},j=function(t){function e(e){var i=t.call(this,V(V({},e),{template:'\n                <div class="ag-picker-field ag-advanced-filter-builder-pill-wrapper" role="presentation">\n                    <div ref="eLabel"></div>\n                    <div ref="eWrapper" class="ag-wrapper ag-advanced-filter-builder-pill ag-picker-collapsed">\n                        <div ref="eDisplayField" class="ag-picker-field-display ag-advanced-filter-builder-pill-display"></div>\n                        <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n                        <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n                    </div>\n                </div>'}))||this;return i.params=e,i}return B(e,t),e.prototype.getFocusableElement=function(){return this.eWrapper},e.prototype.showPicker=function(){var e=this;setTimeout((function(){return t.prototype.showPicker.call(e)}))},e.prototype.hidePicker=function(){var e=this;setTimeout((function(){return t.prototype.hidePicker.call(e)}))},e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this);var e=this.params,i=e.wrapperClassName,n=e.ariaLabel;this.eWrapper.classList.add(i),o._.setAriaLabelledBy(this.eWrapper,""),o._.setAriaLabel(this.eWrapper,n)},e.prototype.createPickerComponent=function(){var e;if(!this.values){var i=this.params.getEditorParams().values;this.values=i;var o=this.value.key,n=null!==(e=i.find((function(t){return t.key===o})))&&void 0!==e?e:{key:o,displayValue:this.value.displayValue};this.value=n}return t.prototype.createPickerComponent.call(this)},e.prototype.onEnterKeyDown=function(e){o._.stopPropagationForAgGrid(e),this.isPickerDisplayed?t.prototype.onEnterKeyDown.call(this,e):(e.preventDefault(),this.showPicker())},e}(o.pNP),W=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),z=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},H=function(t){function e(e,i,o){var n=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div ref="eTreeLines" class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true"></div>\n                    <span ref="eDragHandle" class="ag-drag-handle" aria-hidden="true"></span>\n                    <span ref="eValidation" class="ag-advanced-filter-builder-item-button ag-advanced-filter-builder-invalid" aria-hidden="true"></span>\n                </div>\n                <div ref="eButtons" class="ag-advanced-filter-builder-item-buttons">\n                    <span ref="eMoveUpButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <span ref="eMoveDownButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                    <div ref="eAddButton" role="presentation"></div>\n                    <span ref="eRemoveButton" class="ag-advanced-filter-builder-item-button" role="button"></span>\n                </div>\n            </div>\n        ')||this;return n.item=e,n.dragFeature=i,n.focusWrapper=o,n.moveUpDisabled=!1,n.moveDownDisabled=!1,n}return W(e,t),e.prototype.postConstruct=function(){var t=this,e=this.item,i=e.filterModel,n=e.level,r=e.showMove,s="join"===i.filterType;if(this.ePillWrapper=this.createManagedBean(s?new G:new P),this.ePillWrapper.init({item:this.item,createPill:function(e){return t.createPill(e)}}),this.eDragHandle.insertAdjacentElement("afterend",this.ePillWrapper.getGui()),0===n){var a=document.createElement("div");a.classList.add("ag-advanced-filter-builder-item-tree-line-vertical-bottom"),a.classList.add("ag-advanced-filter-builder-item-tree-line-root"),this.eTreeLines.appendChild(a),o._.setDisplayed(this.eDragHandle,!1),o._.setDisplayed(this.eButtons,!1),o._.setAriaExpanded(this.focusWrapper,!0)}else this.setupTreeLines(n),this.eDragHandle.appendChild(o._.createIconNoSpan("advancedFilterBuilderDrag",this.gridOptionsService)),this.setupValidation(),this.setupMoveButtons(r),this.setupAddButton(),this.setupRemoveButton(),this.setupDragging(),this.updateAriaExpanded();o._.setAriaLevel(this.focusWrapper,n+1),this.initialiseTabGuard({}),this.createManagedBean(new A(this.getGui(),this.focusWrapper,this.ePillWrapper)),this.updateAriaLabel(),this.addManagedListener(this.ePillWrapper,M.EVENT_VALUE_CHANGED,(function(){return t.dispatchEvent({type:M.EVENT_VALUE_CHANGED})})),this.addManagedListener(this.ePillWrapper,M.EVENT_VALID_CHANGED,(function(){return t.updateValidity()}))},e.prototype.setState=function(t){if(0!==this.item.level){var e=this.item.showMove,i=t.disableMoveUp,n=t.disableMoveDown,r=t.treeLines,s=t.showStartTreeLine;this.updateTreeLines(r,s),this.updateAriaExpanded(),e&&(this.moveUpDisabled=!!i,this.moveDownDisabled=!!n,this.eMoveUpButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",i),this.eMoveDownButton.classList.toggle("ag-advanced-filter-builder-item-button-disabled",n),o._.setAriaDisabled(this.eMoveUpButton,!!i),o._.setAriaDisabled(this.eMoveDownButton,!!n),this.moveUpTooltipFeature.refreshToolTip(),this.moveDownTooltipFeature.refreshToolTip())}},e.prototype.focusMoveButton=function(t){(t?this.eMoveUpButton:this.eMoveDownButton).focus()},e.prototype.afterAdd=function(){this.ePillWrapper.getFocusableElement().focus()},e.prototype.setupTreeLines=function(t){for(var e=0;e<t;e++){var i=document.createElement("div");this.eTreeLines.appendChild(i)}},e.prototype.updateTreeLines=function(t,e){for(var i=t.length-1,o=this.eTreeLines.children,n=0;n<i;n++){var r=o.item(n);r&&r.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!t[n])}var s=o.item(i);if(s){s.classList.add("ag-advanced-filter-builder-item-tree-line-horizontal");var a=t[i];s.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-top",a),s.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical",!a)}this.eDragHandle.classList.toggle("ag-advanced-filter-builder-item-tree-line-vertical-bottom",e)},e.prototype.setupValidation=function(){var t=this;this.eValidation.appendChild(o._.createIconNoSpan("advancedFilterBuilderInvalid",this.gridOptionsService)),this.validationTooltipFeature=this.createManagedBean(new o.CvR({getGui:function(){return t.eValidation},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.ePillWrapper.getValidationMessage()},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eValidation),this.updateValidity()},e.prototype.setupAddButton=function(){var t,e=this,i=T((function(t){return e.advancedFilterExpressionService.translate(t)}),null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.addSelectWidth),n=this.createManagedBean(new x(i));this.addManagedListener(n,o.sVA.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var i=t.value;return e.dispatchEvent({type:M.EVENT_ADDED,item:e.item,isJoin:"join"===i.key})})),this.eAddButton.appendChild(n.getGui()),this.createManagedBean(new o.CvR({getGui:function(){return e.eAddButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans)).setComp(this.eAddButton)},e.prototype.setupRemoveButton=function(){var t=this;this.eRemoveButton.appendChild(o._.createIconNoSpan("advancedFilterBuilderRemove",this.gridOptionsService)),this.addManagedListener(this.eRemoveButton,"click",(function(){return t.removeItem()})),this.addManagedListener(this.eRemoveButton,"keydown",(function(e){if(e.key===o.DDm.ENTER)e.preventDefault(),o._.stopPropagationForAgGrid(e),t.removeItem()})),this.createManagedBean(new o.CvR({getGui:function(){return t.eRemoveButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")}},this.beans)).setComp(this.eRemoveButton),o._.setAriaLabel(this.eRemoveButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderRemoveButtonTooltip")),this.activateTabIndex([this.eRemoveButton])},e.prototype.setupMoveButtons=function(t){var e=this;t?(this.eMoveUpButton.appendChild(o._.createIconNoSpan("advancedFilterBuilderMoveUp",this.gridOptionsService)),this.addManagedListener(this.eMoveUpButton,"click",(function(){return e.moveItem(!0)})),this.addManagedListener(this.eMoveUpButton,"keydown",(function(t){if(t.key===o.DDm.ENTER)t.preventDefault(),o._.stopPropagationForAgGrid(t),e.moveItem(!0)})),this.moveUpTooltipFeature=this.createManagedBean(new o.CvR({getGui:function(){return e.eMoveUpButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.moveUpDisabled?null:e.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")}},this.beans)),this.moveUpTooltipFeature.setComp(this.eMoveUpButton),o._.setAriaLabel(this.eMoveUpButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveUpButtonTooltip")),this.eMoveDownButton.appendChild(o._.createIconNoSpan("advancedFilterBuilderMoveDown",this.gridOptionsService)),this.addManagedListener(this.eMoveDownButton,"click",(function(){return e.moveItem(!1)})),this.addManagedListener(this.eMoveDownButton,"keydown",(function(t){if(t.key===o.DDm.ENTER)t.preventDefault(),o._.stopPropagationForAgGrid(t),e.moveItem(!1)})),this.moveDownTooltipFeature=this.createManagedBean(new o.CvR({getGui:function(){return e.eMoveDownButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.moveDownDisabled?null:e.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")}},this.beans)),this.moveDownTooltipFeature.setComp(this.eMoveDownButton),o._.setAriaLabel(this.eMoveDownButton,this.advancedFilterExpressionService.translate("advancedFilterBuilderMoveDownButtonTooltip")),this.activateTabIndex([this.eMoveUpButton,this.eMoveDownButton])):(o._.setDisplayed(this.eMoveUpButton,!1),o._.setDisplayed(this.eMoveDownButton,!1))},e.prototype.updateValidity=function(){o._.setVisible(this.eValidation,!this.item.valid),this.validationTooltipFeature.refreshToolTip(),this.updateAriaLabel()},e.prototype.createPill=function(t){var e,i,n=this,r=t.key,s=t.displayValue,a=t.cssClass,l=t.update,c=t.ariaLabel,d=function(t){null!=t&&(l(t),n.dispatchEvent({type:M.EVENT_VALUE_CHANGED}))};if(t.isSelect){var u=t.getEditorParams,h=t.pickerAriaLabelKey,p=t.pickerAriaLabelValue,f=this.gridOptionsService.get("advancedFilterBuilderParams"),g="".concat(null!==(e=null===f||void 0===f?void 0:f.pillSelectMinWidth)&&void 0!==e?e:140,"px"),v="".concat(null!==(i=null===f||void 0===f?void 0:f.pillSelectMaxWidth)&&void 0!==i?i:200,"px"),y=this.createBean(new j({pickerAriaLabelKey:h,pickerAriaLabelValue:p,pickerType:"ag-list",value:{key:r,displayValue:s},valueFormatter:function(t){var e;return null==t?null:null!==(e=t.displayValue)&&void 0!==e?e:t.key},variableWidth:!0,minPickerWidth:g,maxPickerWidth:v,getEditorParams:u,wrapperClassName:a,ariaLabel:c}));return this.addManagedListener(y,o.sVA.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var e=t.value;return d(null===e||void 0===e?void 0:e.key)})),y}y=this.createBean(new _({value:s,cssClass:a,type:this.getInputType(t.baseCellDataType),ariaLabel:c}));return this.addManagedListener(y,o.sVA.EVENT_FIELD_VALUE_CHANGED,(function(t){var e=t.value;return d(e)})),y},e.prototype.getInputType=function(t){switch(t){case"text":case"object":case"boolean":return"text";case"number":return"number";case"date":case"dateString":return"date"}},e.prototype.setupDragging=function(){var t=this,e={type:o.qRA.AdvancedFilterBuilder,eElement:this.eDragHandle,dragItemName:function(){return t.ePillWrapper.getDragName()},getDefaultIconName:function(){return o.WO_.ICON_NOT_ALLOWED},getDragItem:function(){return{}},onDragStarted:function(){return t.dragFeature.dispatchEvent({type:E.EVENT_DRAG_STARTED,item:t.item})},onDragStopped:function(){return t.dragFeature.dispatchEvent({type:E.EVENT_DRAG_ENDED})}};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(e)}))},e.prototype.updateAriaLabel=function(){var t,e=this.ePillWrapper.getAriaLabel(),i="".concat(this.item.level+1),n=this.ePillWrapper.getValidationMessage();t=n?this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItemValidation",[e,i,n]):this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[e,i]),o._.setAriaLabel(this.focusWrapper,t)},e.prototype.updateAriaExpanded=function(){o._.removeAriaExpanded(this.focusWrapper);var t=this.item.filterModel;"join"===(null===t||void 0===t?void 0:t.filterType)&&t.conditions.length&&o._.setAriaExpanded(this.focusWrapper,!0)},e.prototype.removeItem=function(){this.dispatchEvent({type:M.EVENT_REMOVED,item:this.item})},e.prototype.moveItem=function(t){this.dispatchEvent({type:M.EVENT_MOVED,item:this.item,backwards:t})},z([(0,o.PIB)("eTreeLines")],e.prototype,"eTreeLines",void 0),z([(0,o.PIB)("eDragHandle")],e.prototype,"eDragHandle",void 0),z([(0,o.PIB)("eItem")],e.prototype,"eItem",void 0),z([(0,o.PIB)("eButtons")],e.prototype,"eButtons",void 0),z([(0,o.PIB)("eValidation")],e.prototype,"eValidation",void 0),z([(0,o.PIB)("eMoveUpButton")],e.prototype,"eMoveUpButton",void 0),z([(0,o.PIB)("eMoveDownButton")],e.prototype,"eMoveDownButton",void 0),z([(0,o.PIB)("eAddButton")],e.prototype,"eAddButton",void 0),z([(0,o.PIB)("eRemoveButton")],e.prototype,"eRemoveButton",void 0),z([(0,o.dsm)("beans")],e.prototype,"beans",void 0),z([(0,o.dsm)("dragAndDropService")],e.prototype,"dragAndDropService",void 0),z([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),z([o.o7C],e.prototype,"postConstruct",null),e}(o.aJZ),U=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),K=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Y=function(t){function e(e,i){var o=t.call(this,'\n            <div class="ag-advanced-filter-builder-item-wrapper" role="presentation">\n                <div ref="eItem" class="ag-advanced-filter-builder-item" role="presentation">\n                    <div class="ag-advanced-filter-builder-item-tree-lines" aria-hidden="true">\n                        <div class="ag-advanced-filter-builder-item-tree-line-vertical-top ag-advanced-filter-builder-item-tree-line-horizontal"></div>\n                    </div>\n                </div>\n            </div>\n        ')||this;return o.item=e,o.focusWrapper=i,o}return U(e,t),e.prototype.postConstruct=function(){var t,e=this;o._.setAriaLevel(this.focusWrapper,2);var i=T((function(t){return e.advancedFilterExpressionService.translate(t)}),null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.addSelectWidth),n=this.createManagedBean(new x(i));this.addManagedListener(n,o.sVA.EVENT_FIELD_PICKER_VALUE_SELECTED,(function(t){var i=t.value;e.dispatchEvent({type:M.EVENT_ADDED,item:e.item,isJoin:"join"===i.key})})),this.eItem.appendChild(n.getGui()),this.createManagedBean(new o.CvR({getGui:function(){return n.getGui()},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return e.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip")}},this.beans)).setComp(n.getGui()),this.createManagedBean(new A(this.getGui(),this.focusWrapper,n)),o._.setAriaLabel(this.focusWrapper,this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderItem",[this.advancedFilterExpressionService.translate("advancedFilterBuilderAddButtonTooltip"),"".concat(this.item.level+1)]))},e.prototype.afterAdd=function(){},K([(0,o.dsm)("beans")],e.prototype,"beans",void 0),K([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),K([(0,o.PIB)("eItem")],e.prototype,"eItem",void 0),K([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),X=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),$=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},q=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Z=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},J=function(t){function e(){var e=t.call(this,'\n            <div role="presentation" class="ag-advanced-filter-builder" tabindex="-1">\n                <div role="presentation" class="ag-advanced-filter-builder-list" ref="eList"></div>\n                <div role="presentation" class="ag-advanced-filter-builder-button-panel">\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-apply-button" ref="eApplyFilterButton"></button>\n                    <button class="ag-button ag-standard-button ag-advanced-filter-builder-cancel-button" ref="eCancelFilterButton"></button>\n                </div>\n            </div>')||this;return e.validationMessage=null,e}return X(e,t),e.prototype.postConstruct=function(){var t,e=this,i=(null!==(t=this.gridOptionsService.get("advancedFilterBuilderParams"))&&void 0!==t?t:{}).showMoveButtons;this.showMove=!!i,this.addManagedPropertyListener("advancedFilterBuilderParams",(function(t){var i=t.currentValue;e.showMove=!!(null===i||void 0===i?void 0:i.showMoveButtons),e.refreshList(!1)})),this.filterModel=this.setupFilterModel(),this.setupVirtualList(),this.dragFeature=this.createManagedBean(new E(this,this.virtualList)),this.setupButtons()},e.prototype.refresh=function(){var t=this.virtualList.getLastFocusedRow();this.setupFilterModel(),this.validateItems(),this.refreshList(!1),null!=t&&(this.virtualList.getComponentAt(t)||(t=0),this.virtualList.focusRow(t))},e.prototype.getNumItems=function(){return this.items.length},e.prototype.moveItem=function(t,e){e&&t&&this.moveItemToIndex(t,e.rowIndex,e.position)},e.prototype.afterGuiAttached=function(){this.virtualList.focusRow(0)},e.prototype.setupVirtualList=function(){var t=this;this.virtualList=this.createManagedBean(new o.wjn({cssIdentifier:"advanced-filter-builder",ariaRole:"tree",listName:this.advancedFilterExpressionService.translate("ariaAdvancedFilterBuilderList")})),this.virtualList.setComponentCreator(this.createItemComponent.bind(this)),this.virtualList.setComponentUpdater(this.updateItemComponent.bind(this)),this.virtualList.setRowHeight(40),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return t.items.length},getRow:function(e){return t.items[e]},areRowsEqual:function(t,e){return t===e}}),this.buildList(),this.virtualList.refresh()},e.prototype.setupButtons=function(){var t=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",(function(){t.advancedFilterService.setModel(t.filterModel),t.filterManager.onFilterChanged({source:"advancedFilter"}),t.close()})),this.validationTooltipFeature=this.createManagedBean(new o.CvR({getGui:function(){return t.eApplyFilterButton},getLocation:function(){return"advancedFilter"},getTooltipValue:function(){return t.validationMessage},getTooltipShowDelayOverride:function(){return 1e3}},this.beans)),this.validationTooltipFeature.setComp(this.eApplyFilterButton),this.validate(),this.addManagedListener(this.eApplyFilterButton,"mouseenter",(function(){return t.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!0)})),this.addManagedListener(this.eApplyFilterButton,"mouseleave",(function(){return t.addOrRemoveCssClass("ag-advanced-filter-builder-validation",!1)})),this.eCancelFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilderCancel"),this.activateTabIndex([this.eCancelFilterButton]),this.addManagedListener(this.eCancelFilterButton,"click",(function(){return t.close()}))},e.prototype.removeItemFromParent=function(t){var e=t.parent.conditions.indexOf(t.filterModel);return t.parent.conditions.splice(e,1),e},e.prototype.moveItemToIndex=function(t,e,i){var o,n,r=this.items[e],s="join"===(null===(o=r.filterModel)||void 0===o?void 0:o.filterType)&&"bottom"===i,a=s?r.filterModel:r.parent;a&&(this.isChildOrSelf(a,t.filterModel)||r===t||(this.removeItemFromParent(t),s?n=0:-1===(n=a.conditions.indexOf(r.filterModel))?n=a.conditions.length:"bottom"===i&&(n+=1),a.conditions.splice(n,0,t.filterModel),this.refreshList(!1)))},e.prototype.isChildOrSelf=function(t,e){var i=this;return t===e||"join"===e.filterType&&e.conditions.some((function(e){return i.isChildOrSelf(t,e)}))},e.prototype.setupFilterModel=function(){var t=this.formatFilterModel(this.advancedFilterService.getModel());return this.stringifiedModel=JSON.stringify(t),t},e.prototype.formatFilterModel=function(t){return"join"!==(t=null!==t&&void 0!==t?t:{filterType:"join",type:"AND",conditions:[]}).filterType&&(t={filterType:"join",type:"AND",conditions:[t]}),t},e.prototype.buildList=function(){var t=this,e=function(i,o,n,r){o.push({filterModel:i,level:n,parent:r,valid:!0,showMove:t.showMove}),"join"===i.filterType&&(i.conditions.forEach((function(t){return e(t,o,n+1,i)})),0===n&&o.push({filterModel:null,level:n+1,parent:i,valid:!0}))};this.items=[],e(this.filterModel,this.items,0)},e.prototype.refreshList=function(t){if(!t){var e=[];this.items.forEach((function(t){t.valid||e.push(t.filterModel)})),this.buildList(),e.length&&this.items.forEach((function(t){t.filterModel&&e.includes(t.filterModel)&&(t.valid=!1)}))}this.virtualList.refresh(t),this.validate()},e.prototype.updateItemComponent=function(t,e){var i=this,o=this.items.indexOf(t),n=function(t,e){var o=i.items.find((function(e){return e.filterModel===t})),r=null===o||void 0===o?void 0:o.parent;if(r){var s=r.conditions;n(r,e),e.push(s[s.length-1]===t)}},r=[],s=t.filterModel;s&&(n(s,r),r[0]=!1);var a="join"===(null===s||void 0===s?void 0:s.filterType)&&!!s.conditions.length;e.setState({disableMoveUp:1===o,disableMoveDown:!this.canMoveDown(t,o),treeLines:r,showStartTreeLine:a})},e.prototype.createItemComponent=function(t,e){var i=this,o=this.createBean(t.filterModel?new H(t,this.dragFeature,e):new Y(t,e));return o.addManagedListener(o,M.EVENT_REMOVED,(function(t){var e=t.item;return i.removeItem(e)})),o.addManagedListener(o,M.EVENT_VALUE_CHANGED,(function(){return i.validate()})),o.addManagedListener(o,M.EVENT_ADDED,(function(t){var e=t.item,o=t.isJoin;return i.addItem(e,o)})),o.addManagedListener(o,M.EVENT_MOVED,(function(t){var e=t.item,o=t.backwards;return i.moveItemUpDown(e,o)})),o instanceof H&&this.updateItemComponent(t,o),o},e.prototype.addItem=function(t,e){var i,o,n=t.parent,r=t.level,s=t.filterModel,a="join"===(null===s||void 0===s?void 0:s.filterType),l=e?{filterType:"join",type:"AND",conditions:[]}:{},c=a?s:n,d=a?0:c.conditions.indexOf(s);d>=0?(a||(d+=1),c.conditions.splice(d,0,l)):c.conditions.push(l);var u=this.items.indexOf(t),h=u>=0;if(h){t.filterModel&&u++;var p=[{filterModel:l,level:a?r+1:r,parent:c,valid:e,showMove:this.showMove}];(i=this.items).splice.apply(i,Z([u,0],q(p),!1))}this.refreshList(h),h&&(null===(o=this.virtualList.getComponentAt(u))||void 0===o||o.afterAdd())},e.prototype.removeItem=function(t){var e,i=t.parent,o=t.filterModel,n=i.conditions.indexOf(o);i.conditions.splice(n,1);var r="join"===(null===(e=t.filterModel)||void 0===e?void 0:e.filterType),s=this.items.indexOf(t),a=!r&&s>=0;a&&this.items.splice(s,1),this.refreshList(a),s>=0&&this.virtualList.focusRow(s)},e.prototype.moveItemUpDown=function(t,e){var i=this.items.indexOf(t),o=e?i-1:i+1;if(0!==o&&(e||this.canMoveDown(t,i))){var n=this.items[o],r=this.removeItemFromParent(t),s=t.level,a=t.filterModel,l=t.parent,c=n.level,d=n.filterModel,u=n.parent;if(e)if(c===s&&"join"===d.filterType)d.conditions.push(a);else if(c<=s){var h=u.conditions.indexOf(d);u.conditions.splice(h,0,a)}else{l.conditions[r-1].conditions.push(a)}else if(c===s)if("join"===d.filterType)d.conditions.splice(0,0,a);else{var p=u.conditions.indexOf(d);u.conditions.splice(p+1,0,a)}else if(r<l.conditions.length)l.conditions.splice(r+1,0,a);else{var f=this.items.find((function(t){return t.filterModel===l})),g=f.parent.conditions.indexOf(f.filterModel)+1;f.parent.conditions.splice(g,0,a)}this.refreshList(!1);var v=this.items.findIndex((function(t){return t.filterModel===a}));if(v>=0){var y=this.virtualList.getComponentAt(v);y instanceof H&&y.focusMoveButton(e)}}},e.prototype.canMoveDown=function(t,e){return!(1===t.level&&e===this.items.length-2||1===t.level&&t.parent.conditions[t.parent.conditions.length-1]===t.filterModel)},e.prototype.close=function(){this.advancedFilterService.getCtrl().toggleFilterBuilder("ui")},e.prototype.validate=function(){var t=!this.items.every((function(t){return t.valid}));t?this.validationMessage=this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationIncomplete"):(t=JSON.stringify(this.filterModel)===this.stringifiedModel,this.validationMessage=t?this.advancedFilterExpressionService.translate("advancedFilterBuilderValidationAlreadyApplied"):null),o._.setDisabled(this.eApplyFilterButton,t),this.validationTooltipFeature.refreshToolTip()},e.prototype.validateItems=function(){var t=this,e=function(t){t.type=void 0},i=function(t){delete t.filter};this.items.forEach((function(n){if(n.valid&&n.filterModel&&"join"!==n.filterModel.filterType){var r=n.filterModel,s=r.colId,a=t.advancedFilterExpressionService.getColumnAutocompleteEntries().find((function(t){return t.key===s})),l=t.advancedFilterExpressionService.getColumnDetails(r.colId);if(!a||!l.column)return n.valid=!1,r.colId=void 0,e(r),void i(r);var c=t.advancedFilterExpressionService.getDataTypeExpressionOperator(l.baseCellDataType).operators[r.type];if(!c)return n.valid=!1,e(r),void i(r);c.numOperands>0&&!o._.exists(r.filter)&&(n.valid=!1)}}))},$([(0,o.PIB)("eList")],e.prototype,"eList",void 0),$([(0,o.PIB)("eApplyFilterButton")],e.prototype,"eApplyFilterButton",void 0),$([(0,o.PIB)("eCancelFilterButton")],e.prototype,"eCancelFilterButton",void 0),$([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),$([(0,o.dsm)("advancedFilterService")],e.prototype,"advancedFilterService",void 0),$([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),$([(0,o.dsm)("beans")],e.prototype,"beans",void 0),$([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),Q=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),tt=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},et=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},it=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},ot=function(t){function e(e){var i=t.call(this)||this;return i.enabled=e,i}return Q(e,t),e.prototype.postConstruct=function(){var t=this;this.hasAdvancedFilterParent=!!this.gridOptionsService.get("advancedFilterParent"),this.ctrlsService.whenReady((function(){return t.setAdvancedFilterComp()})),this.addManagedListener(this.eventService,o.sVA.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(function(e){var i=e.enabled;return t.onEnabledChanged(i)})),this.addManagedPropertyListener("advancedFilterParent",(function(){return t.updateComps()})),this.addDestroyFunc((function(){t.destroyAdvancedFilterComp(),t.destroyBean(t.eBuilderComp),t.eBuilderDialog&&t.eBuilderDialog.isAlive()&&t.destroyBean(t.eBuilderDialog)}))},e.prototype.setupHeaderComp=function(t){this.eHeaderComp=this.createManagedBean(new m(this.enabled&&!this.hasAdvancedFilterParent)),t.insertAdjacentElement("beforebegin",this.eHeaderComp.getGui())},e.prototype.focusHeaderComp=function(){return!!this.eHeaderComp&&(this.eHeaderComp.getFocusableElement().focus(),!0)},e.prototype.refreshComp=function(){var t,e;null===(t=this.eFilterComp)||void 0===t||t.refresh(),null===(e=this.eHeaderComp)||void 0===e||e.refresh()},e.prototype.refreshBuilderComp=function(){var t;null===(t=this.eBuilderComp)||void 0===t||t.refresh()},e.prototype.getHeaderHeight=function(){var t,e;return null!==(e=null===(t=this.eHeaderComp)||void 0===t?void 0:t.getHeight())&&void 0!==e?e:0},e.prototype.setInputDisabled=function(t){var e,i;null===(e=this.eFilterComp)||void 0===e||e.setInputDisabled(t),null===(i=this.eHeaderComp)||void 0===i||i.setInputDisabled(t)},e.prototype.toggleFilterBuilder=function(t,i){var n=this;if(!(i&&this.eBuilderDialog||!1===i&&!this.eBuilderDialog)){if(this.eBuilderDialog)return this.builderDestroySource=t,void this.destroyBean(this.eBuilderDialog);this.setInputDisabled(!0);var r=this.getBuilderDialogSize(),s=r.width,a=r.height,l=r.minWidth;this.eBuilderComp=this.createBean(new J),this.eBuilderDialog=this.createBean(new o.fNJ({title:this.advancedFilterExpressionService.translate("advancedFilterBuilderTitle"),component:this.eBuilderComp,width:s,height:a,resizable:!0,movable:!0,maximizable:!0,centered:!0,closable:!0,minWidth:l,afterGuiAttached:function(){var t;return null===(t=n.eBuilderComp)||void 0===t?void 0:t.afterGuiAttached()}})),this.dispatchFilterBuilderVisibleChangedEvent(t,!0),this.eBuilderDialog.addEventListener(o.fNJ.EVENT_DESTROYED,(function(){var t;n.destroyBean(n.eBuilderComp),n.eBuilderComp=void 0,n.eBuilderDialog=void 0,n.setInputDisabled(!1),n.dispatchEvent({type:e.EVENT_BUILDER_CLOSED}),n.dispatchFilterBuilderVisibleChangedEvent(null!==(t=n.builderDestroySource)&&void 0!==t?t:"ui",!1),n.builderDestroySource=void 0}))}},e.prototype.dispatchFilterBuilderVisibleChangedEvent=function(t,e){var i={type:o.sVA.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED,source:t,visible:e};this.eventService.dispatchEvent(i)},e.prototype.getBuilderDialogSize=function(){var t,e,i=null!==(e=null===(t=this.gridOptionsService.get("advancedFilterBuilderParams"))||void 0===t?void 0:t.minWidth)&&void 0!==e?e:500,n=this.popupService.getPopupParent(),r=Math.round(o._.getAbsoluteWidth(n))-2,s=Math.round(.75*o._.getAbsoluteHeight(n))-2;return{width:Math.min(Math.max(600,i),r),height:Math.min(600,s),minWidth:i}},e.prototype.onEnabledChanged=function(t){this.enabled=t,this.updateComps()},e.prototype.updateComps=function(){this.setAdvancedFilterComp(),this.setHeaderCompEnabled(),this.eventService.dispatchEvent({type:o.sVA.EVENT_HEADER_HEIGHT_CHANGED})},e.prototype.setAdvancedFilterComp=function(){var t;if(this.destroyAdvancedFilterComp(),this.enabled){var e=this.gridOptionsService.get("advancedFilterParent");if(this.hasAdvancedFilterParent=!!e,e){var i=this.createBean(new st),o=i.getGui(),n=this.environment.getTheme().allThemes;n.length&&(t=o.classList).add.apply(t,it([],et(n),!1)),o.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr"),e.appendChild(o),this.eFilterComp=i}}},e.prototype.setHeaderCompEnabled=function(){var t;null===(t=this.eHeaderComp)||void 0===t||t.setEnabled(this.enabled&&!this.hasAdvancedFilterParent)},e.prototype.destroyAdvancedFilterComp=function(){this.eFilterComp&&(o._.removeFromParent(this.eFilterComp.getGui()),this.destroyBean(this.eFilterComp))},e.EVENT_BUILDER_CLOSED="advancedFilterBuilderClosed",tt([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),tt([(0,o.dsm)("ctrlsService")],e.prototype,"ctrlsService",void 0),tt([(0,o.dsm)("popupService")],e.prototype,"popupService",void 0),tt([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),tt([o.o7C],e.prototype,"postConstruct",null),e}(o.XQb),nt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),rt=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},st=function(t){function e(){var e=t.call(this,'\n            <div class="ag-advanced-filter" role="presentation" tabindex="-1">\n                <ag-autocomplete ref="eAutocomplete"></ag-autocomplete>\n                <button class="ag-button ag-standard-button ag-advanced-filter-apply-button" ref="eApplyFilterButton"></button>\n                <button class="ag-advanced-filter-builder-button" ref="eBuilderFilterButton">\n                    <span ref="eBuilderFilterButtonIcon" aria-hidden="true"></span>\n                    <span class="ag-advanced-filter-builder-button-label" ref="eBuilderFilterButtonLabel"></span>\n                </button>\n            </div>')||this;return e.expressionParser=null,e.isApplyDisabled=!0,e.builderOpen=!1,e}return nt(e,t),e.prototype.postConstruct=function(){var t=this;this.eAutocomplete.setListGenerator((function(e,i){return t.generateAutocompleteListParams(i)})).setValidator((function(){return t.validateValue()})).setForceLastSelection((function(e,i){return t.forceLastSelection(e,i)})).setInputAriaLabel(this.advancedFilterExpressionService.translate("ariaAdvancedFilterInput")).setListAriaLabel(this.advancedFilterExpressionService.translate("ariaLabelAdvancedFilterAutocomplete")),this.refresh(),this.addManagedListener(this.eAutocomplete,o.bB5.EVENT_VALUE_CHANGED,(function(e){var i=e.value;return t.onValueChanged(i)})),this.addManagedListener(this.eAutocomplete,o.bB5.EVENT_VALUE_CONFIRMED,(function(e){var i=e.isValid;return t.onValueConfirmed(i)})),this.addManagedListener(this.eAutocomplete,o.bB5.EVENT_OPTION_SELECTED,(function(e){var i=e.position,o=e.updateEntry,n=e.autocompleteType;return t.onOptionSelected(i,o,n)})),this.addManagedListener(this.eAutocomplete,o.bB5.EVENT_VALID_CHANGED,(function(e){var i=e.isValid,o=e.validationMessage;return t.onValidChanged(i,o)})),this.setupApplyButton(),this.setupBuilderButton()},e.prototype.refresh=function(){var t=this.advancedFilterService.getExpressionDisplayValue();this.eAutocomplete.setValue({value:null!==t&&void 0!==t?t:"",position:null===t||void 0===t?void 0:t.length,updateListOnlyIfOpen:!0})},e.prototype.setInputDisabled=function(t){this.eAutocomplete.setInputDisabled(t),o._.setDisabled(this.eApplyFilterButton,t||this.isApplyDisabled)},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="advancedFilter",e},e.prototype.setupApplyButton=function(){var t=this;this.eApplyFilterButton.innerText=this.advancedFilterExpressionService.translate("advancedFilterApply"),this.activateTabIndex([this.eApplyFilterButton]),this.addManagedListener(this.eApplyFilterButton,"click",(function(){return t.onValueConfirmed(t.eAutocomplete.isValid())})),o._.setDisabled(this.eApplyFilterButton,this.isApplyDisabled)},e.prototype.setupBuilderButton=function(){var t=this;this.eBuilderFilterButtonIcon.appendChild(o._.createIconNoSpan("advancedFilterBuilder",this.gridOptionsService)),this.eBuilderFilterButtonLabel.innerText=this.advancedFilterExpressionService.translate("advancedFilterBuilder"),this.activateTabIndex([this.eBuilderFilterButton]),this.addManagedListener(this.eBuilderFilterButton,"click",(function(){return t.openBuilder()})),this.addManagedListener(this.advancedFilterService.getCtrl(),ot.EVENT_BUILDER_CLOSED,(function(){return t.closeBuilder()}))},e.prototype.onValueChanged=function(t){var e;t=o._.makeNull(t),this.advancedFilterService.setExpressionDisplayValue(t),this.expressionParser=this.advancedFilterService.createExpressionParser(t);var i=null===(e=this.expressionParser)||void 0===e?void 0:e.parseExpression();i&&i!==t&&this.eAutocomplete.setValue({value:i,silent:!0,restoreFocus:!0})},e.prototype.onValueConfirmed=function(t){t&&!this.isApplyDisabled&&(o._.setDisabled(this.eApplyFilterButton,!0),this.advancedFilterService.applyExpression(),this.filterManager.onFilterChanged({source:"advancedFilter"}))},e.prototype.onOptionSelected=function(t,e,i){var o=this.updateExpression(t,e,i),n=o.updatedValue,r=o.updatedPosition,s=o.hideAutocomplete;this.eAutocomplete.setValue({value:n,position:r,updateListOnlyIfOpen:s,restoreFocus:!0})},e.prototype.validateValue=function(){var t,e,i;return(null===(t=this.expressionParser)||void 0===t?void 0:t.isValid())?null:null!==(i=null===(e=this.expressionParser)||void 0===e?void 0:e.getValidationMessage())&&void 0!==i?i:null},e.prototype.onValidChanged=function(t,e){this.isApplyDisabled=!t||this.advancedFilterService.isCurrentExpressionApplied(),o._.setDisabled(this.eApplyFilterButton,this.isApplyDisabled),this.setTooltip(e,1e3)},e.prototype.generateAutocompleteListParams=function(t){return this.expressionParser?this.expressionParser.getAutocompleteListParams(t):this.advancedFilterExpressionService.getDefaultAutocompleteListParams("")},e.prototype.updateExpression=function(t,e,i){var o,n;return this.advancedFilterExpressionService.updateAutocompleteCache(e,i),null!==(n=null===(o=this.expressionParser)||void 0===o?void 0:o.updateExpression(t,e,i))&&void 0!==n?n:this.advancedFilterService.getDefaultExpression(e)},e.prototype.forceLastSelection=function(t,e){var i=t.key,o=t.displayValue;return!!e.toLocaleLowerCase().match("^".concat((null!==o&&void 0!==o?o:i).toLocaleLowerCase(),"\\s*$"))},e.prototype.openBuilder=function(){this.builderOpen||(this.builderOpen=!0,o._.setDisabled(this.eBuilderFilterButton,!0),this.advancedFilterService.getCtrl().toggleFilterBuilder("ui"))},e.prototype.closeBuilder=function(){this.builderOpen&&(this.builderOpen=!1,o._.setDisabled(this.eBuilderFilterButton,!1),this.eBuilderFilterButton.focus())},rt([(0,o.PIB)("eAutocomplete")],e.prototype,"eAutocomplete",void 0),rt([(0,o.PIB)("eApplyFilterButton")],e.prototype,"eApplyFilterButton",void 0),rt([(0,o.PIB)("eBuilderFilterButton")],e.prototype,"eBuilderFilterButton",void 0),rt([(0,o.PIB)("eBuilderFilterButtonIcon")],e.prototype,"eBuilderFilterButtonIcon",void 0),rt([(0,o.PIB)("eBuilderFilterButtonLabel")],e.prototype,"eBuilderFilterButtonLabel",void 0),rt([(0,o.dsm)("advancedFilterService")],e.prototype,"advancedFilterService",void 0),rt([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),rt([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),rt([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),at={ariaAdvancedFilterBuilderItem:function(t){return"".concat(t[0],". Level ").concat(t[1],". Press ENTER to edit.")},ariaAdvancedFilterBuilderItemValidation:function(t){return"".concat(t[0],". Level ").concat(t[1],". ").concat(t[2]," Press ENTER to edit.")},ariaAdvancedFilterBuilderList:"Advanced Filter Builder List",ariaAdvancedFilterBuilderFilterItem:"Filter Condition",ariaAdvancedFilterBuilderGroupItem:"Filter Group",ariaAdvancedFilterBuilderColumn:"Column",ariaAdvancedFilterBuilderOption:"Option",ariaAdvancedFilterBuilderValue:"Value",ariaAdvancedFilterBuilderJoinOperator:"Join Operator",ariaAdvancedFilterInput:"Advanced Filter Input",ariaLabelAdvancedFilterAutocomplete:"Advanced Filter Autocomplete",advancedFilterContains:"contains",advancedFilterNotContains:"does not contain",advancedFilterTextEquals:"equals",advancedFilterTextNotEqual:"does not equal",advancedFilterStartsWith:"begins with",advancedFilterEndsWith:"ends with",advancedFilterBlank:"is blank",advancedFilterNotBlank:"is not blank",advancedFilterEquals:"=",advancedFilterNotEqual:"!=",advancedFilterGreaterThan:">",advancedFilterGreaterThanOrEqual:">=",advancedFilterLessThan:"<",advancedFilterLessThanOrEqual:"<=",advancedFilterTrue:"is true",advancedFilterFalse:"is false",advancedFilterAnd:"AND",advancedFilterOr:"OR",advancedFilterApply:"Apply",advancedFilterBuilder:"Builder",advancedFilterValidationMissingColumn:"Column is missing",advancedFilterValidationMissingOption:"Option is missing",advancedFilterValidationMissingValue:"Value is missing",advancedFilterValidationInvalidColumn:"Column not found",advancedFilterValidationInvalidOption:"Option not found",advancedFilterValidationMissingQuote:"Value is missing an end quote",advancedFilterValidationNotANumber:"Value is not a number",advancedFilterValidationInvalidDate:"Value is not a valid date",advancedFilterValidationMissingCondition:"Condition is missing",advancedFilterValidationJoinOperatorMismatch:"Join operators within a condition must be the same",advancedFilterValidationInvalidJoinOperator:"Join operator not found",advancedFilterValidationMissingEndBracket:"Missing end bracket",advancedFilterValidationExtraEndBracket:"Too many end brackets",advancedFilterValidationMessage:function(t){return"Expression has an error. ".concat(t[0]," - ").concat(t[1],".")},advancedFilterValidationMessageAtEnd:function(t){return"Expression has an error. ".concat(t[0]," at end of expression.")},advancedFilterBuilderTitle:"Advanced Filter",advancedFilterBuilderApply:"Apply",advancedFilterBuilderCancel:"Cancel",advancedFilterBuilderAddButtonTooltip:"Add Filter or Group",advancedFilterBuilderRemoveButtonTooltip:"Remove",advancedFilterBuilderMoveUpButtonTooltip:"Move Up",advancedFilterBuilderMoveDownButtonTooltip:"Move Down",advancedFilterBuilderAddJoin:"Add Group",advancedFilterBuilderAddCondition:"Add Filter",advancedFilterBuilderSelectColumn:"Select a column",advancedFilterBuilderSelectOption:"Select an option",advancedFilterBuilderEnterValue:"Enter a value...",advancedFilterBuilderValidationAlreadyApplied:"Current filter already applied.",advancedFilterBuilderValidationIncomplete:"Not all conditions are complete.",advancedFilterBuilderValidationSelectColumn:"Must select a column.",advancedFilterBuilderValidationSelectOption:"Must select an option.",advancedFilterBuilderValidationEnterValue:"Must enter a value."};function lt(t,e,i){if(!t)return"";var o=i-e;return o?t.slice(0,t.length-o):t}function ct(t,e,i,o,n,r,s){var a=i+(!t.length||s?0:1),l=0;return n&&(" "===t[a]?l=1:(o+=" ",r&&(o+='"'))),{updatedValue:t.slice(0,e)+o+t.slice(a),updatedPosition:e+o.length+l}}function dt(t,e,i,o){for(var n=e,r=!1;n<t.length;){var s=t[n];if("("===s){o&&" "===t[n-1]?r=!0:n-=1;break}if(" "===s||i&&")"===s){n-=1;break}n++}return{endPosition:n,isEmpty:r}}function ut(t,e,i,o){i!==e&&(t.expression=ct(t.expression,o-e.length+1,o,i).updatedValue)}var ht=function(){return ht=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ht.apply(this,arguments)},pt=function(){function t(t,e){this.params=t,this.startPosition=e,this.type="column",this.valid=!0,this.hasStartChar=!1,this.hasEndChar=!1,this.colName=""}return t.prototype.parse=function(t,e){if(t!==vt.COL_START_CHAR||this.colName)if(t===vt.COL_END_CHAR&&this.hasStartChar){if(this.parseColumn(!1,e))return this.hasEndChar=!0,!1;this.colName+=t}else this.colName+=t;else this.hasStartChar=!0},t.prototype.getDisplayValue=function(){return(this.hasStartChar?vt.COL_START_CHAR:"")+this.colName+(this.hasEndChar?vt.COL_END_CHAR:"")},t.prototype.getColId=function(){return this.colId},t.prototype.complete=function(t){this.parseColumn(!0,t)},t.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidColumn"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},t.prototype.parseColumn=function(t,e){var i;this.endPosition=e;var o=this.params.advancedFilterExpressionService.getColId(this.colName);return o&&this.hasStartChar&&(this.colId=o.colId,ut(this.params,this.colName,o.columnName,e-1),this.colName=o.columnName,this.column=this.params.columnModel.getPrimaryColumn(this.colId),this.column)?(this.baseCellDataType=null!==(i=this.params.dataTypeService.getBaseDataType(this.column))&&void 0!==i?i:"text",!0):(t&&(this.valid=!1),this.baseCellDataType="text",!1)},t}(),ft=function(){function t(t,e,i){this.params=t,this.startPosition=e,this.baseCellDataType=i,this.type="operator",this.valid=!0,this.expectedNumOperands=0,this.operator=""}return t.prototype.parse=function(t,e){if(" "===t||")"===t){if(this.parseOperator(!1,e-1))return!0;this.operator+=t}else this.operator+=t},t.prototype.complete=function(t){this.parseOperator(!0,t)},t.prototype.getValidationError=function(){var t;return this.valid?null:{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidOption"),startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}},t.prototype.getDisplayValue=function(){return this.operator},t.prototype.getOperatorKey=function(){return this.parsedOperator},t.prototype.parseOperator=function(t,e){var i=this.params.advancedFilterExpressionService.getDataTypeExpressionOperator(this.baseCellDataType),o=i.findOperator(this.operator);if(this.endPosition=e,o){this.parsedOperator=o;var n=i.operators[o];this.expectedNumOperands=n.numOperands;var r=n.displayValue;return ut(this.params,this.operator,r,e),this.operator=r,!0}return!t&&null===o||(this.valid=!1),!1},t}(),gt=function(){function t(t,e,i,o){this.params=t,this.startPosition=e,this.baseCellDataType=i,this.column=o,this.type="operand",this.valid=!0,this.operand="",this.validationMessage=null}return t.prototype.parse=function(t,e){if(" "===t){if(!this.quotes)return this.parseOperand(!1,e),!0;this.operand+=t}else if(")"===t){if("number"===this.baseCellDataType||!this.quotes)return this.parseOperand(!1,e-1),!0;this.operand+=t}else if(this.operand||this.quotes||"'"!==t&&'"'!==t){if(this.quotes&&t===this.quotes)return this.parseOperand(!1,e),!1;this.operand+=t}else this.quotes=t},t.prototype.complete=function(t){this.parseOperand(!0,t)},t.prototype.getValidationError=function(){var t;return this.validationMessage?{message:this.validationMessage,startPosition:this.startPosition,endPosition:null!==(t=this.endPosition)&&void 0!==t?t:this.params.expression.length-1}:null},t.prototype.getRawValue=function(){return this.operand},t.prototype.getModelValue=function(){return this.modelValue},t.prototype.parseOperand=function(t,e){var i=this.params.advancedFilterExpressionService;if(this.endPosition=e,this.modelValue=this.operand,t&&this.quotes)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingQuote");else if(""===this.modelValue)this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationMissingValue");else{var o=i.getOperandModelValue(this.operand,this.baseCellDataType,this.column);switch(null!=o&&(this.modelValue=o),this.baseCellDataType){case"number":(this.quotes||isNaN(this.modelValue))&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationNotANumber"));break;case"date":case"dateString":null==o&&(this.valid=!1,this.validationMessage=i.translate("advancedFilterValidationInvalidDate"))}}},t}(),vt=function(){function t(t,e){this.params=t,this.startPosition=e,this.isAwaiting=!0}return t.prototype.parseExpression=function(){for(var t,e,i=this.startPosition,o=this.params.expression;i<o.length;){var n=o[i];if(" "===n&&this.isAwaiting);else{if(this.isAwaiting=!1,!this.parser){var r=void 0;this.columnParser?this.operatorParser?(this.operandParser=new gt(this.params,i,this.columnParser.baseCellDataType,this.columnParser.column),r=this.operandParser):(this.operatorParser=new ft(this.params,i,this.columnParser.baseCellDataType),r=this.operatorParser):(this.columnParser=new pt(this.params,i),r=this.columnParser),this.parser=r}var s=this.parser.parse(n,i);if(null!=s){if(this.isComplete())return this.returnEndPosition(s?i-1:i,!0);this.parser=void 0,this.isAwaiting=!0}}i++}return null===(e=null===(t=this.parser)||void 0===t?void 0:t.complete)||void 0===e||e.call(t,i-1),this.returnEndPosition(i)},t.prototype.isValid=function(){return this.isComplete()&&this.columnParser.valid&&this.operatorParser.valid&&(!this.operandParser||this.operandParser.valid)},t.prototype.getValidationError=function(){var t,e,i,o,n,r=null!==(o=null!==(e=null===(t=this.columnParser)||void 0===t?void 0:t.getValidationError())&&void 0!==e?e:null===(i=this.operatorParser)||void 0===i?void 0:i.getValidationError())&&void 0!==o?o:null===(n=this.operandParser)||void 0===n?void 0:n.getValidationError();if(r)return r;var s,a=this.params.expression.length;return this.columnParser?this.operatorParser?this.operatorParser.expectedNumOperands&&!this.operandParser&&(s="advancedFilterValidationMissingValue"):s="advancedFilterValidationMissingOption":s="advancedFilterValidationMissingColumn",s?{message:this.params.advancedFilterExpressionService.translate(s),startPosition:a,endPosition:a}:null},t.prototype.getFunction=function(t){var e,i,o,n=this.columnParser.getColId(),r=n.replace(/(['"])/,"\\$1"),s=null===(e=this.operatorParser)||void 0===e?void 0:e.getOperatorKey(),a=t.operators,l=t.evaluatorParams,c=t.operands,d=this.params.advancedFilterExpressionService.getExpressionOperator(this.columnParser.baseCellDataType,s),u=this.addToListAndGetIndex(a,d),h=this.params.advancedFilterExpressionService.getExpressionEvaluatorParams(n),p=this.addToListAndGetIndex(l,h);if(0===(null===(i=this.operatorParser)||void 0===i?void 0:i.expectedNumOperands))o="";else{var f=this.addToListAndGetIndex(c,this.getOperandValue());o=", params.operands[".concat(f,"]")}return"params.operators[".concat(u,"].evaluator(expressionProxy.getValue('").concat(r,"', node), node, params.evaluatorParams[").concat(p,"]").concat(o,")")},t.prototype.getAutocompleteListParams=function(t){return this.isColumnPosition(t)?this.getColumnAutocompleteListParams(t):this.isOperatorPosition(t)?this.getOperatorAutocompleteListParams(t):this.isBeyondEndPosition(t)?void 0:{enabled:!1}},t.prototype.updateExpression=function(t,e,i){var o,n,r,s,a,l=this.params.expression;if(this.isColumnPosition(t))return ct(this.params.expression,this.startPosition,(null===(o=this.columnParser)||void 0===o?void 0:o.getColId())?this.columnParser.endPosition:dt(l,t).endPosition,this.params.advancedFilterExpressionService.getColumnValue(e),!0);if(this.isOperatorPosition(t)){var c=this.getBaseCellDataTypeFromOperatorAutocompleteType(i),d=this.hasOperand(c,e.key),u=d&&this.doesOperandNeedQuotes(c),h=void 0;if(null!=(null===(n=this.operatorParser)||void 0===n?void 0:n.startPosition)&&t<this.operatorParser.startPosition)h=ct(l,t,t,null!==(r=e.displayValue)&&void 0!==r?r:e.key,d,u);else{var p=void 0,f=!1;if(null===(s=this.operatorParser)||void 0===s?void 0:s.getOperatorKey())p=this.operatorParser.endPosition;else{var g=dt(l,t,!0,!0);p=g.endPosition,f=g.isEmpty}h=ct(l,function(t,e,i){for(var o=e;o<i&&" "===t[o];)o++;return o}(l,this.columnParser.endPosition+1,p),p,null!==(a=e.displayValue)&&void 0!==a?a:e.key,d,u,f)}return ht(ht({},h),{hideAutocomplete:!d})}return null},t.prototype.getModel=function(){var t=this.columnParser.getColId(),e={filterType:this.columnParser.baseCellDataType,colId:t,type:this.operatorParser.getOperatorKey()};return this.operatorParser.expectedNumOperands&&(e.filter=this.operandParser.getModelValue()),e},t.prototype.getOperandValue=function(){var t=this.operandParser.getRawValue(),e=this.columnParser,i=e.baseCellDataType,o=e.column;switch(i){case"number":t=Number(t);break;case"date":case"dateString":t=this.params.valueParserService.parseValue(o,null,t,void 0)}return"dateString"===i?this.params.dataTypeService.getDateParserFunction()(t):t},t.prototype.isComplete=function(){return!(!this.operatorParser||!(!this.operatorParser.expectedNumOperands||this.operatorParser.expectedNumOperands&&this.operandParser))},t.prototype.isColumnPosition=function(t){return!this.columnParser||null==this.columnParser.endPosition||t<=this.columnParser.endPosition+1},t.prototype.isOperatorPosition=function(t){return!this.operatorParser||null==this.operatorParser.endPosition||t<=this.operatorParser.endPosition+1},t.prototype.isBeyondEndPosition=function(t){return this.isComplete()&&null!=this.endPosition&&t>this.endPosition+1&&this.endPosition+1<this.params.expression.length},t.prototype.returnEndPosition=function(t,e){return this.endPosition=e?t:t-1,t},t.prototype.getColumnAutocompleteListParams=function(t){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column",this.getColumnSearchString(t))},t.prototype.getColumnSearchString=function(t){var e,i,o,n,r,s=null!==(i=null===(e=this.columnParser)||void 0===e?void 0:e.getDisplayValue())&&void 0!==i?i:"",a=lt(s,t,null==(null===(o=this.columnParser)||void 0===o?void 0:o.endPosition)?this.params.expression.length:this.columnParser.endPosition+1),l=(null===(n=this.columnParser)||void 0===n?void 0:n.hasStartChar)&&a.length>0,c=(null===(r=this.columnParser)||void 0===r?void 0:r.hasEndChar)&&a.length===s.length+2;return l?a.slice(1,c?-1:void 0):a},t.prototype.getOperatorAutocompleteListParams=function(t){var e,i,o,n,r,s=null===(e=this.columnParser)||void 0===e?void 0:e.column;if(!s)return{enabled:!1};var a=this.columnParser.baseCellDataType,l=null!=(null===(i=this.operatorParser)||void 0===i?void 0:i.startPosition)&&t<this.operatorParser.startPosition?"":lt(null!==(n=null===(o=this.operatorParser)||void 0===o?void 0:o.getDisplayValue())&&void 0!==n?n:"",t,null==(null===(r=this.operatorParser)||void 0===r?void 0:r.endPosition)?this.params.expression.length:this.operatorParser.endPosition+1);return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getOperatorAutocompleteEntries(s,a),"operator-".concat(a),l)},t.prototype.getBaseCellDataTypeFromOperatorAutocompleteType=function(t){return null===t||void 0===t?void 0:t.replace("operator-","")},t.prototype.hasOperand=function(t,e){var i,o;return!t||!e||(null!==(o=null===(i=this.params.advancedFilterExpressionService.getExpressionOperator(t,e))||void 0===i?void 0:i.numOperands)&&void 0!==o?o:0)>0},t.prototype.doesOperandNeedQuotes=function(t){return"number"!==t},t.prototype.addToListAndGetIndex=function(t,e){var i=t.length;return t.push(e),i},t.COL_START_CHAR="[",t.COL_END_CHAR="]",t}(),yt=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s};function mt(t,e,i){var o=!1,n=t.toLocaleLowerCase(),r=n+" ",s=Object.entries(e).find((function(t){var e=yt(t,2);e[0];var s=e[1],a=i(s).toLocaleLowerCase();return a.startsWith(r)&&(o=!0),a===n}));return s?s[0]:o?null:void 0}function bt(t,e){return(null!==e&&void 0!==e?e:Object.keys(t)).map((function(e){return{key:e,displayValue:t[e].displayValue}}))}var St,xt=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return bt(this.operators,t)},t.prototype.findOperator=function(t){return mt(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this,e=this.params.translate;this.operators={contains:{displayValue:e("advancedFilterContains"),evaluator:function(e,i,o,n){return t.evaluateExpression(e,i,o,n,!1,(function(t,e){return t.includes(e)}))},numOperands:1},notContains:{displayValue:e("advancedFilterNotContains"),evaluator:function(e,i,o,n){return t.evaluateExpression(e,i,o,n,!0,(function(t,e){return!t.includes(e)}))},numOperands:1},equals:{displayValue:e("advancedFilterTextEquals"),evaluator:function(e,i,o,n){return t.evaluateExpression(e,i,o,n,!1,(function(t,e){return t===e}))},numOperands:1},notEqual:{displayValue:e("advancedFilterTextNotEqual"),evaluator:function(e,i,o,n){return t.evaluateExpression(e,i,o,n,!0,(function(t,e){return t!=e}))},numOperands:1},startsWith:{displayValue:e("advancedFilterStartsWith"),evaluator:function(e,i,o,n){return t.evaluateExpression(e,i,o,n,!1,(function(t,e){return t.startsWith(e)}))},numOperands:1},endsWith:{displayValue:e("advancedFilterEndsWith"),evaluator:function(e,i,o,n){return t.evaluateExpression(e,i,o,n,!1,(function(t,e){return t.endsWith(e)}))},numOperands:1},blank:{displayValue:e("advancedFilterBlank"),evaluator:function(t){return null==t||"string"===typeof t&&0===t.trim().length},numOperands:0},notBlank:{displayValue:e("advancedFilterNotBlank"),evaluator:function(t){return null!=t&&("string"!==typeof t||t.trim().length>0)},numOperands:0}}},t.prototype.evaluateExpression=function(t,e,i,o,n,r){return null==t?n:i.caseSensitive?r(i.valueConverter(t,e),o):r(i.valueConverter(t,e).toLocaleLowerCase(),o.toLocaleLowerCase())},t}(),Ct=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return bt(this.operators,t)},t.prototype.findOperator=function(t){return mt(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this,e=this.params,i=e.translate,o=e.equals;this.operators={equals:{displayValue:i("advancedFilterEquals"),evaluator:function(e,i,n,r){return t.evaluateSingleOperandExpression(e,i,n,r,!!n.includeBlanksInEquals,o)},numOperands:1},notEqual:{displayValue:i("advancedFilterNotEqual"),evaluator:function(e,i,n,r){return t.evaluateSingleOperandExpression(e,i,n,r,!!n.includeBlanksInEquals,(function(t,e){return!o(t,e)}))},numOperands:1},greaterThan:{displayValue:i("advancedFilterGreaterThan"),evaluator:function(e,i,o,n){return t.evaluateSingleOperandExpression(e,i,o,n,!!o.includeBlanksInGreaterThan,(function(t,e){return t>e}))},numOperands:1},greaterThanOrEqual:{displayValue:i("advancedFilterGreaterThanOrEqual"),evaluator:function(e,i,o,n){return t.evaluateSingleOperandExpression(e,i,o,n,!!o.includeBlanksInGreaterThan,(function(t,e){return t>=e}))},numOperands:1},lessThan:{displayValue:i("advancedFilterLessThan"),evaluator:function(e,i,o,n){return t.evaluateSingleOperandExpression(e,i,o,n,!!o.includeBlanksInLessThan,(function(t,e){return t<e}))},numOperands:1},lessThanOrEqual:{displayValue:i("advancedFilterLessThanOrEqual"),evaluator:function(e,i,o,n){return t.evaluateSingleOperandExpression(e,i,o,n,!!o.includeBlanksInLessThan,(function(t,e){return t<=e}))},numOperands:1},blank:{displayValue:i("advancedFilterBlank"),evaluator:function(t){return null==t},numOperands:0},notBlank:{displayValue:i("advancedFilterNotBlank"),evaluator:function(t){return null!=t},numOperands:0}}},t.prototype.evaluateSingleOperandExpression=function(t,e,i,o,n,r){return null==t?n:r(i.valueConverter(t,e),o)},t}(),wt=function(){function t(t){this.params=t,this.initOperators()}return t.prototype.getEntries=function(t){return bt(this.operators,t)},t.prototype.findOperator=function(t){return mt(t,this.operators,(function(t){return t.displayValue}))},t.prototype.initOperators=function(){var t=this.params.translate;this.operators={true:{displayValue:t("advancedFilterTrue"),evaluator:function(t){return!!t},numOperands:0},false:{displayValue:t("advancedFilterFalse"),evaluator:function(t){return!1===t},numOperands:0},blank:{displayValue:t("advancedFilterBlank"),evaluator:function(t){return null==t},numOperands:0},notBlank:{displayValue:t("advancedFilterNotBlank"),evaluator:function(t){return null!=t},numOperands:0}}},t}(),Et=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ot=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Dt=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},At=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.columnNameToIdMap={},e.columnAutocompleteEntries=null,e.expressionEvaluatorParams={},e}return Et(e,t),e.prototype.postConstruct=function(){this.expressionJoinOperators=this.generateExpressionJoinOperators(),this.expressionOperators=this.generateExpressionOperators()},e.prototype.parseJoinOperator=function(t){var e,i=t.type;return null!==(e=this.expressionJoinOperators[i])&&void 0!==e?e:i},e.prototype.getColumnDisplayValue=function(t){var e,i=t.colId,o=this.getColumnAutocompleteEntries().find((function(t){return t.key===i}));return o?(e=o.displayValue,this.columnNameToIdMap[e.toLocaleUpperCase()]={colId:i,columnName:e}):e=i,e},e.prototype.getOperatorDisplayValue=function(t){var e,i;return null!==(i=null===(e=this.getExpressionOperator(t.filterType,t.type))||void 0===e?void 0:e.displayValue)&&void 0!==i?i:t.type},e.prototype.getOperandModelValue=function(t,e,i){var n;switch(e){case"number":return o._.exists(t)?Number(t):null;case"date":return o._.serialiseDate(this.valueParserService.parseValue(i,null,t,void 0),!1);case"dateString":var r=this.valueParserService.parseValue(i,null,t,void 0);return o._.serialiseDate(null!==(n=this.dataTypeService.getDateParserFunction()(r))&&void 0!==n?n:null,!1)}return t},e.prototype.getOperandDisplayValue=function(t,e){var i,n,r=t,s=r.colId,a=r.filter,l=this.columnModel.getPrimaryColumn(s),c="";if(null!=a){var d=void 0;switch(t.filterType){case"number":d=null!==(i=o._.toStringOrNull(a))&&void 0!==i?i:"";break;case"date":var u=o._.parseDateTimeFromString(a);d=l?this.valueFormatterService.formatValue(l,null,u):null;break;case"dateString":var h=o._.parseDateTimeFromString(a),p=l?this.dataTypeService.getDateFormatterFunction()(null!==h&&void 0!==h?h:void 0):null;d=l?this.valueFormatterService.formatValue(l,null,p):null}"number"!==t.filterType&&(d=null!==(n=null!==d&&void 0!==d?d:o._.toStringOrNull(a))&&void 0!==n?n:"",e||(d='"'.concat(d,'"'))),c=e?d:" ".concat(d)}return c},e.prototype.parseColumnFilterModel=function(t){var e,i,o=null!==(e=this.getColumnDisplayValue(t))&&void 0!==e?e:"",n=null!==(i=this.getOperatorDisplayValue(t))&&void 0!==i?i:"",r=this.getOperandDisplayValue(t);return"[".concat(o,"] ").concat(n).concat(r)},e.prototype.updateAutocompleteCache=function(t,e){if("column"===e){var i=t.key,o=t.displayValue;this.columnNameToIdMap[t.displayValue.toLocaleUpperCase()]={colId:i,columnName:o}}},e.prototype.translate=function(t,e){var i=at[t];return"function"===typeof i&&(i=i(e)),this.localeService.getLocaleTextFunc()(t,i,e)},e.prototype.generateAutocompleteListParams=function(t,e,i){return{enabled:!0,type:e,searchString:i,entries:t}},e.prototype.getColumnAutocompleteEntries=function(){var t,e=this;if(this.columnAutocompleteEntries)return this.columnAutocompleteEntries;var i=null!==(t=this.columnModel.getAllPrimaryColumns())&&void 0!==t?t:[],o=[],n=this.gridOptionsService.get("includeHiddenColumnsInAdvancedFilter");return i.forEach((function(t){t.getColDef().filter&&(n||t.isVisible()||t.isRowGroupActive())&&o.push({key:t.getColId(),displayValue:e.columnModel.getDisplayNameForColumn(t,"advancedFilter")})})),o.sort((function(t,e){var i,o,n=null!==(i=t.displayValue)&&void 0!==i?i:"",r=null!==(o=e.displayValue)&&void 0!==o?o:"";return n<r?-1:r>n?1:0})),o},e.prototype.getOperatorAutocompleteEntries=function(t,e){var i=this.getActiveOperators(t);return this.getDataTypeExpressionOperator(e).getEntries(i)},e.prototype.getJoinOperatorAutocompleteEntries=function(){return Object.entries(this.expressionJoinOperators).map((function(t){var e=Dt(t,2);return{key:e[0],displayValue:e[1]}}))},e.prototype.getDefaultAutocompleteListParams=function(t){return this.generateAutocompleteListParams(this.getColumnAutocompleteEntries(),"column",t)},e.prototype.getDataTypeExpressionOperator=function(t){return this.expressionOperators[t]},e.prototype.getExpressionOperator=function(t,e){var i,o;return null===(o=null===(i=this.getDataTypeExpressionOperator(t))||void 0===i?void 0:i.operators)||void 0===o?void 0:o[e]},e.prototype.getExpressionJoinOperators=function(){return this.expressionJoinOperators},e.prototype.getColId=function(t){var e=t.toLocaleUpperCase(),i=this.columnNameToIdMap[e];if(i)return i;var o=this.getColumnAutocompleteEntries().find((function(t){return t.displayValue.toLocaleUpperCase()===e}));if(o){var n={colId:o.key,columnName:o.displayValue};return this.columnNameToIdMap[e]=n,n}return null},e.prototype.getExpressionEvaluatorParams=function(t){var e=this,i=this.expressionEvaluatorParams[t];if(i)return i;var n=this.columnModel.getPrimaryColumn(t);if(!n)return{valueConverter:function(t){return t}};switch(this.dataTypeService.getBaseDataType(n)){case"dateString":i={valueConverter:this.dataTypeService.getDateParserFunction()};break;case"object":i=n.getColDef().filterValueGetter?{valueConverter:function(t){return t}}:{valueConverter:function(t,i){var o;return null!==(o=e.valueFormatterService.formatValue(n,i,t))&&void 0!==o?o:"function"===typeof t.toString?t.toString():""}};break;case"text":case void 0:i={valueConverter:function(t){return o._.toStringOrNull(t)}};break;default:i={valueConverter:function(t){return t}}}var r=n.getColDef().filterParams;return r&&["caseSensitive","includeBlanksInEquals","includeBlanksInLessThan","includeBlanksInGreaterThan"].forEach((function(t){var e=r[t];e&&(i[t]=e)})),this.expressionEvaluatorParams[t]=i,i},e.prototype.getColumnDetails=function(t){var e,i,o=null!==(e=this.columnModel.getPrimaryColumn(t))&&void 0!==e?e:void 0;return{column:o,baseCellDataType:null!==(i=o?this.dataTypeService.getBaseDataType(o):void 0)&&void 0!==i?i:"text"}},e.prototype.generateExpressionOperators=function(){var t=this,e=function(e,i){return t.translate(e,i)};return{text:new xt({translate:e}),boolean:new wt({translate:e}),object:new xt({translate:e}),number:new Ct({translate:e,equals:function(t,e){return t===e}}),date:new Ct({translate:e,equals:function(t,e){return t.getTime()===e.getTime()}}),dateString:new Ct({translate:e,equals:function(t,e){return t.getTime()===e.getTime()}})}},e.prototype.getColumnValue=function(t){var e=t.displayValue;return"".concat(vt.COL_START_CHAR).concat(e).concat(vt.COL_END_CHAR)},e.prototype.generateExpressionJoinOperators=function(){return{AND:this.translate("advancedFilterAnd"),OR:this.translate("advancedFilterOr")}},e.prototype.getActiveOperators=function(t){var e,i=null===(e=t.getColDef().filterParams)||void 0===e?void 0:e.filterOptions;if(i)return i.every((function(t){return"string"===typeof t}))?i:void 0},e.prototype.resetColumnCaches=function(){this.columnAutocompleteEntries=null,this.columnNameToIdMap={},this.expressionEvaluatorParams={}},Ot([(0,o.dsm)("valueFormatterService")],e.prototype,"valueFormatterService",void 0),Ot([(0,o.dsm)("valueParserService")],e.prototype,"valueParserService",void 0),Ot([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Ot([(0,o.dsm)("dataTypeService")],e.prototype,"dataTypeService",void 0),Ot([o.o7C],e.prototype,"postConstruct",null),e=Ot([(0,o.dR4)("advancedFilterExpressionService")],e)}(o.XQb),Tt=function(){function t(t){this.params=t,this.operators=[],this.operatorStartPositions=[],this.operatorEndPositions=[],this.activeOperator=0,this.validationError=null}return t.prototype.parseExpression=function(t){this.operators.push(""),this.operatorStartPositions.push(t),this.operatorEndPositions.push(void 0);for(var e=this.params.expression;t<e.length;){var i=e[t];if(" "===i){if(this.parseOperator(t-1))return this.activeOperator++,t-1;this.operators[this.activeOperator]+=i}else this.operators[this.activeOperator]+=i;t++}return this.parseOperator(t-1),t},t.prototype.isValid=function(){return!this.validationError&&(!this.operators.length||!!this.parsedOperator)},t.prototype.getValidationError=function(){return this.validationError},t.prototype.getFunction=function(){return"OR"===this.parsedOperator?"||":"&&"},t.prototype.getModel=function(){return"OR"===this.parsedOperator?"OR":"AND"},t.prototype.getAutocompleteListParams=function(t,e){var i,o=this;if(null==e)i="";else{var n=this.operators[e],r=this.operatorEndPositions[e];i=lt(n,t,null==r?this.params.expression.length:r+1)}var s=this.params.advancedFilterExpressionService.getJoinOperatorAutocompleteEntries();return(e||null==e&&this.activeOperator)&&(s=s.filter((function(t){return t.key===o.parsedOperator}))),this.params.advancedFilterExpressionService.generateAutocompleteListParams(s,"join",i)},t.prototype.updateExpression=function(t,e,i){var o,n,r=this.params.expression,s=null!==(o=e.displayValue)&&void 0!==o?o:e.key;if(0===i)for(var a=this.operatorEndPositions.length-1;a>0;a--){var l=this.operatorEndPositions[a];null!=l&&(r=ct(r,this.operatorStartPositions[a],l,s).updatedValue)}return ct(r,this.operatorStartPositions.length>i?this.operatorStartPositions[i]:t,null!==(n=this.operatorEndPositions.length>i?this.operatorEndPositions[i]:void 0)&&void 0!==n?n:dt(r,t,!0).endPosition,s,!0)},t.prototype.getNumOperators=function(){return this.operators.length},t.prototype.getLastOperatorEndPosition=function(){return this.operatorEndPositions[this.operatorEndPositions.length-1]},t.prototype.parseOperator=function(t){var e=this.operators.length>this.activeOperator?this.operators[this.activeOperator]:"",i=this.params.advancedFilterExpressionService.getExpressionJoinOperators(),o=mt(e,i,(function(t){return t}));if(o){this.operatorEndPositions[this.activeOperator]=t;var n=i[o];if(this.activeOperator){if(o!==this.parsedOperator)return this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationJoinOperatorMismatch"),startPosition:t-e.length+1,endPosition:t}),!1}else this.parsedOperator=o;return e!==n&&(ut(this.params,e,n,t),this.operators[this.activeOperator]=n),!0}return null!==o&&(this.validationError||(this.validationError={message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationInvalidJoinOperator"),startPosition:t-e.length+1,endPosition:t}),!0)},t}(),Mt=function(){function t(t,e){this.params=t,this.startPosition=e,this.expectingExpression=!0,this.expectingOperator=!1,this.expressionParsers=[],this.operatorParser=new Tt(this.params),this.missingEndBracket=!1,this.extraEndBracket=!1}return t.prototype.parseExpression=function(){for(var e=this.startPosition,i=this.params.expression;e<i.length;){var o=i[e];if("("!==o||this.expectingOperator){if(")"===o)return this.endPosition=e-1,0===this.startPosition&&(this.extraEndBracket=!0),e;if(" "===o);else if(this.expectingExpression){e=(n=new vt(this.params,e)).parseExpression(),this.expressionParsers.push(n),this.expectingExpression=!1,this.expectingOperator=!0}else this.expectingOperator&&(e=this.operatorParser.parseExpression(e),this.expectingOperator=!1,this.expectingExpression=!0)}else{var n;e=(n=new t(this.params,e+1)).parseExpression(),this.expressionParsers.push(n),this.expectingExpression=!1,this.expectingOperator=!0}e++}return this.startPosition>0&&(this.missingEndBracket=!0),e},t.prototype.isValid=function(){return!this.missingEndBracket&&!this.extraEndBracket&&this.expressionParsers.length===this.operatorParser.getNumOperators()+1&&this.operatorParser.isValid()&&this.expressionParsers.every((function(t){return t.isValid()}))},t.prototype.getValidationError=function(){for(var t,e=this.operatorParser.getValidationError(),i=0;i<this.expressionParsers.length;i++){var o=this.expressionParsers[i].getValidationError();if(o)return e&&e.startPosition<o.startPosition?e:o}return e||(this.extraEndBracket?{message:this.params.advancedFilterExpressionService.translate("advancedFilterValidationExtraEndBracket"),startPosition:this.endPosition+1,endPosition:this.endPosition+1}:(this.expressionParsers.length===this.operatorParser.getNumOperators()?t="advancedFilterValidationMissingCondition":this.missingEndBracket&&(t="advancedFilterValidationMissingEndBracket"),t?{message:this.params.advancedFilterExpressionService.translate(t),startPosition:this.params.expression.length,endPosition:this.params.expression.length}:null))},t.prototype.getFunction=function(t){var e=this.expressionParsers.length>1,i=this.expressionParsers.map((function(e){return e.getFunction(t)})).join(" ".concat(this.operatorParser.getFunction()," "));return e?"(".concat(i,")"):i},t.prototype.getAutocompleteListParams=function(t){if(!(null!=this.endPosition&&t>this.endPosition+1)){if(!this.expressionParsers.length)return this.getColumnAutocompleteListParams();var e=this.getExpressionParserIndex(t);if(null==e)return"("===this.params.expression[t]?{enabled:!1}:this.getColumnAutocompleteListParams();var i=this.expressionParsers[e].getAutocompleteListParams(t);if(!i){if(e<this.expressionParsers.length-1)return this.operatorParser.getAutocompleteListParams(t,e);if(this.expressionParsers.length===this.operatorParser.getNumOperators()){var o=this.operatorParser.getLastOperatorEndPosition();return null==o||t<=o+1?this.operatorParser.getAutocompleteListParams(t,this.operatorParser.getNumOperators()-1):this.getColumnAutocompleteListParams()}return")"===this.params.expression[t-1]?{enabled:!1}:this.operatorParser.getAutocompleteListParams(t)}return i}},t.prototype.updateExpression=function(t,e,i){var o,n=this.params.expression,r=this.getExpressionParserIndex(t);if(null==r){var s="column"===i?this.params.advancedFilterExpressionService.getColumnValue(e):null!==(o=e.displayValue)&&void 0!==o?o:e.key;return ct(n,this.startPosition,this.startPosition,s,!0)}var a=this.expressionParsers[r].updateExpression(t,e,i);return null==a?"column"===i?ct(n,t,n.length-1,this.params.advancedFilterExpressionService.getColumnValue(e),!0):null!=this.endPosition&&t>this.endPosition+1?null:this.operatorParser.updateExpression(t,e,r):a},t.prototype.getModel=function(){return this.expressionParsers.length>1?{filterType:"join",type:this.operatorParser.getModel(),conditions:this.expressionParsers.map((function(t){return t.getModel()}))}:this.expressionParsers[0].getModel()},t.prototype.getColumnAutocompleteListParams=function(){return this.params.advancedFilterExpressionService.generateAutocompleteListParams(this.params.advancedFilterExpressionService.getColumnAutocompleteEntries(),"column","")},t.prototype.getExpressionParserIndex=function(t){for(var e,i=0;i<this.expressionParsers.length;i++){if(this.expressionParsers[i].startPosition>t)break;e=i}return e},t}(),kt=function(){function t(t){this.params=t,this.valid=!1}return t.prototype.parseExpression=function(){this.joinExpressionParser=new Mt(this.params,0);var t=this.joinExpressionParser.parseExpression();return this.valid=t>=this.params.expression.length-1&&this.joinExpressionParser.isValid(),this.params.expression},t.prototype.isValid=function(){return this.valid},t.prototype.getValidationMessage=function(){var t=this.joinExpressionParser.getValidationError();if(!t)return null;var e=t.message,i=t.startPosition,o=t.endPosition;return i<this.params.expression.length?this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessage",[e,this.params.expression.slice(i,o+1).trim()]):this.params.advancedFilterExpressionService.translate("advancedFilterValidationMessageAtEnd",[e])},t.prototype.getFunction=function(){var t={operands:[],operators:[],evaluatorParams:[]};return{functionBody:"return ".concat(this.joinExpressionParser.getFunction(t),";"),params:t}},t.prototype.getAutocompleteListParams=function(t){var e;return null!==(e=this.joinExpressionParser.getAutocompleteListParams(t))&&void 0!==e?e:{enabled:!1}},t.prototype.updateExpression=function(t,e,i){return this.joinExpressionParser.updateExpression(t,e,i)},t.prototype.getModel=function(){return this.isValid()?this.joinExpressionParser.getModel():null},t}(),Rt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Pt=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Nt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.appliedExpression=null,e.expression=null,e.isValid=!0,e}return Rt(e,t),e.prototype.postConstruct=function(){var t=this;this.setEnabled(this.gridOptionsService.get("enableAdvancedFilter"),!0),this.ctrl=this.createManagedBean(new ot(this.enabled)),this.expressionProxy={getValue:function(e,i){var o=t.columnModel.getPrimaryColumn(e);return o?t.valueService.getValue(o,i,!0):void 0}},this.addManagedPropertyListener("enableAdvancedFilter",(function(e){return t.setEnabled(!!e.currentValue)})),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,(function(e){return t.onNewColumnsLoaded(e)})),this.addManagedPropertyListener("includeHiddenColumnsInAdvancedFilter",(function(){return t.updateValidity()}))},e.prototype.isEnabled=function(){return this.enabled},e.prototype.isFilterPresent=function(){return!!this.expressionFunction},e.prototype.doesFilterPass=function(t){return this.expressionFunction(this.expressionProxy,t,this.expressionParams)},e.prototype.getModel=function(){var t,e=this.createExpressionParser(this.appliedExpression);return null===e||void 0===e||e.parseExpression(),null!==(t=null===e||void 0===e?void 0:e.getModel())&&void 0!==t?t:null},e.prototype.setModel=function(t){var e=this,i=function(t,n){if("join"===t.filterType){var r=e.advancedFilterExpressionService.parseJoinOperator(t),s=t.conditions.map((function(t){return i(t)})).filter((function(t){return o._.exists(t)})).join(" ".concat(r," "));return n||t.conditions.length<=1?s:"(".concat(s,")")}return e.advancedFilterExpressionService.parseColumnFilterModel(t)},n=t?i(t,!0):null;this.setExpressionDisplayValue(n),this.applyExpression(),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp()},e.prototype.getExpressionDisplayValue=function(){return this.expression},e.prototype.setExpressionDisplayValue=function(t){this.expression=t},e.prototype.isCurrentExpressionApplied=function(){return this.appliedExpression===this.expression},e.prototype.createExpressionParser=function(t){return t?new kt({expression:t,columnModel:this.columnModel,dataTypeService:this.dataTypeService,valueParserService:this.valueParserService,advancedFilterExpressionService:this.advancedFilterExpressionService}):null},e.prototype.getDefaultExpression=function(t){var e=this.advancedFilterExpressionService.getColumnValue(t)+" ";return{updatedValue:e,updatedPosition:e.length}},e.prototype.isHeaderActive=function(){return!this.gridOptionsService.get("advancedFilterParent")},e.prototype.getCtrl=function(){return this.ctrl},e.prototype.setEnabled=function(t,e){var i=this.enabled,n=this.rowModel.getType(),r="clientSide"===n||"serverSide"===n;if(t&&!n&&o._.warnOnce("Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model."),this.enabled=t&&r,!e&&this.enabled!==i){var s={type:o.sVA.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,enabled:this.enabled};this.eventService.dispatchEvent(s)}},e.prototype.applyExpression=function(){var t=this.createExpressionParser(this.expression);null===t||void 0===t||t.parseExpression(),this.applyExpressionFromParser(t)},e.prototype.applyExpressionFromParser=function(t){if(this.isValid=!t||t.isValid(),!t||!this.isValid)return this.expressionFunction=null,this.expressionParams=null,void(this.appliedExpression=null);var e=t.getFunction(),i=e.functionBody,o=e.params;this.expressionFunction=new Function("expressionProxy","node","params",i),this.expressionParams=o,this.appliedExpression=this.expression},e.prototype.updateValidity=function(){this.advancedFilterExpressionService.resetColumnCaches();var t=this.createExpressionParser(this.expression);null===t||void 0===t||t.parseExpression();var e=(!t||t.isValid())!==this.isValid;return this.applyExpressionFromParser(t),this.ctrl.refreshComp(),this.ctrl.refreshBuilderComp(),e},e.prototype.onNewColumnsLoaded=function(t){var e=this;if("gridInitializing"===t.source&&this.dataTypeService.isPendingInference()){this.ctrl.setInputDisabled(!0);var i=this.addManagedListener(this.eventService,o.sVA.EVENT_DATA_TYPES_INFERRED,(function(){null===i||void 0===i||i(),e.ctrl.setInputDisabled(!1)}))}},Pt([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),Pt([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Pt([(0,o.dsm)("dataTypeService")],e.prototype,"dataTypeService",void 0),Pt([(0,o.dsm)("valueParserService")],e.prototype,"valueParserService",void 0),Pt([(0,o.dsm)("rowModel")],e.prototype,"rowModel",void 0),Pt([(0,o.dsm)("advancedFilterExpressionService")],e.prototype,"advancedFilterExpressionService",void 0),Pt([o.o7C],e.prototype,"postConstruct",null),e=Pt([(0,o.dR4)("advancedFilterService")],e)}(o.XQb),Lt={version:"31.0.0",moduleName:o.zsj.AdvancedFilterModule,beans:[Nt,At],agStackComponents:[{componentName:"agAdvancedFilter",componentClass:st}],dependantModules:[g]},_t=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),It=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ft=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Gt=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Bt=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vt="paste",jt="dragCopy",Wt="clipboard";!function(t){t[t.CellRange=0]="CellRange",t[t.SelectedRows=1]="SelectedRows",t[t.FocusedCell=2]="FocusedCell"}(St||(St={}));var zt,Ht=function(t){return"AG Grid: Unable to use the Clipboard API (navigator.clipboard.".concat(t,"()). ")+"The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API."},Ut=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastPasteOperationTime=0,e.navigatorApiFailed=!1,e}var i;return _t(e,t),i=e,e.prototype.init=function(){var t=this;this.logger=this.loggerFactory.create("ClipboardService"),"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady((function(e){t.gridCtrl=e.gridCtrl}))},e.prototype.pasteFromClipboard=function(){var t=this;this.logger.log("pasteFromClipboard"),!this.gridOptionsService.get("suppressClipboardApi")&&!this.navigatorApiFailed&&navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText().then(this.processClipboardData.bind(this)).catch((function(e){o._.doOnce((function(){console.warn(e),console.warn(Ht("readText"))}),"clipboardApiError"),t.navigatorApiFailed=!0,t.pasteFromClipboardLegacy()})):this.pasteFromClipboardLegacy()},e.prototype.pasteFromClipboardLegacy=function(){var t=this,e=!1,i=function(i){var o=(new Date).getTime();o-t.lastPasteOperationTime<50&&(e=!0,i.preventDefault()),t.lastPasteOperationTime=o};this.executeOnTempElement((function(t){t.addEventListener("paste",i),t.focus({preventScroll:!0})}),(function(o){var n=o.value;e?t.refocusLastFocusedCell():t.processClipboardData(n),o.removeEventListener("paste",i)}))},e.prototype.refocusLastFocusedCell=function(){var t=this.focusService.getFocusedCell();t&&this.focusService.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0})},e.prototype.getClipboardDelimiter=function(){var t=this.gridOptionsService.get("clipboardDelimiter");return o._.exists(t)?t:"\t"},e.prototype.processClipboardData=function(t){var e=this;if(null!=t){var o=i.stringToArray(t,this.getClipboardDelimiter()),n=this.gridOptionsService.getCallback("processDataFromClipboard");if(n&&(o=n({data:o})),null!=o){this.gridOptionsService.get("suppressLastEmptyLineOnPaste")&&this.removeLastLineIfBlank(o);this.doPasteOperation((function(t,i,n,r){e.rangeService&&e.rangeService.isMoreThanOneCell()&&!e.hasOnlyOneValueToPaste(o)?e.pasteIntoActiveRange(o,t,i,r):e.pasteStartingFromFocusedCell(o,t,i,n,r)}))}}},e.stringToArray=function(t,e){void 0===e&&(e=",");var i=[],o=function(t){return"\r"===t||"\n"===t},n=!1;if(""===t)return[[""]];for(var r,s,a,l=function(l,c,d){var u=t[d-1],h=t[d],p=t[d+1],f=function(){i[l]||(i[l]=[]),i[l][c]||(i[l][c]="")};if(f(),'"'===h&&(n?'"'===p?(i[l][c]+='"',d++):n=!1:(void 0===u||u===e||o(u))&&(n=!0)),!n&&'"'!==h){if(h===e)return c++,f(),r=l,s=c,a=d,"continue";if(o(h))return c=0,l++,f(),"\r"===h&&"\n"===p&&d++,r=l,s=c,a=d,"continue"}i[l][c]+=h,r=l,s=c,a=d},c=0,d=0,u=0;u<t.length;u++)l(c,d,u),c=r,d=s,u=a;return i},e.prototype.doPasteOperation=function(t){var e,i=this.gridOptionsService.api,n=this.gridOptionsService.columnApi,r="clipboard";if(this.eventService.dispatchEvent({type:o.sVA.EVENT_PASTE_START,api:i,columnApi:n,source:r}),this.clientSideRowModel){var s=this.gridOptionsService.get("aggregateOnlyChangedColumns");e=new o.k$d(s,this.clientSideRowModel.getRootNode())}var a={},l=[];t(a,l,this.focusService.getFocusedCell(),e);var c=Gt([],Ft(l),!1);e&&(this.clientSideRowModel.doAggregate(e),e.forEachChangedNodeDepthFirst((function(t){c.push(t)}))),this.rowRenderer.refreshCells({rowNodes:c}),this.dispatchFlashCells(a),this.fireRowChanged(l),this.refocusLastFocusedCell();var d={type:o.sVA.EVENT_PASTE_END,source:r};this.eventService.dispatchEvent(d)},e.prototype.pasteIntoActiveRange=function(t,e,i,o){var n=this,r=this.getRangeSize()%t.length!=0,s=0,a=0;this.iterateActiveRanges(!1,(function(l,c,d,u){if(u-s>=t.length){if(r)return;s+=a,a=0}var h=t[u-s];i.push(c);var p=n.gridOptionsService.getCallback("processCellFromClipboard");d.forEach((function(t,i){if(t.isCellEditable(c)&&!t.isSuppressPaste(c)){i>=h.length&&(i%=h.length);var r=n.processCell(c,t,h[i],jt,p,!0);c.setDataValue(t,r,Vt),o&&o.addParentNode(c.parent,[t]);var s=l.rowIndex,a=l.rowPinned,d=n.cellPositionUtils.createIdFromValues({rowIndex:s,column:t,rowPinned:a});e[d]=!0}})),a++}))},e.prototype.pasteStartingFromFocusedCell=function(t,e,i,o,n){if(o){var r={rowIndex:o.rowIndex,rowPinned:o.rowPinned},s=this.columnModel.getDisplayedColumnsStartingAt(o.column);this.isPasteSingleValueIntoRange(t)?this.pasteSingleValueIntoRange(t,i,e,n):this.pasteMultipleValues(t,r,i,s,e,Wt,n)}},e.prototype.isPasteSingleValueIntoRange=function(t){return this.hasOnlyOneValueToPaste(t)&&null!=this.rangeService&&!this.rangeService.isEmpty()},e.prototype.pasteSingleValueIntoRange=function(t,e,i,o){var n=this,r=t[0][0];this.iterateActiveRanges(!1,(function(t,s,a){e.push(s),a.forEach((function(t){return n.updateCellValue(s,t,r,i,Wt,o)}))}))},e.prototype.hasOnlyOneValueToPaste=function(t){return 1===t.length&&1===t[0].length},e.prototype.copyRangeDown=function(){var t=this;if(this.rangeService&&!this.rangeService.isEmpty()){var e=[];this.doPasteOperation((function(i,o,n,r){var s=t.gridOptionsService.getCallback("processCellForClipboard"),a=t.gridOptionsService.getCallback("processCellFromClipboard");t.iterateActiveRanges(!0,(function(n,l,c){e.length?(o.push(l),c.forEach((function(o,s){if(o.isCellEditable(l)&&!o.isSuppressPaste(l)){var c=t.processCell(l,o,e[s],jt,a,!0);l.setDataValue(o,c,Vt),r&&r.addParentNode(l.parent,[o]);var d=n.rowIndex,u=n.rowPinned,h=t.cellPositionUtils.createIdFromValues({rowIndex:d,column:o,rowPinned:u});i[h]=!0}}))):c.forEach((function(i){var o=t.processCell(l,i,t.valueService.getValue(i,l),jt,s,!1,!0);e.push(o)}))}))}))}},e.prototype.removeLastLineIfBlank=function(t){var e=o._.last(t);if(e&&1===e.length&&""===e[0]){if(1===t.length)return;o._.removeFromArray(t,e)}},e.prototype.fireRowChanged=function(t){var e=this;"fullRow"===this.gridOptionsService.get("editType")&&t.forEach((function(t){var i={type:o.sVA.EVENT_ROW_VALUE_CHANGED,node:t,data:t.data,rowIndex:t.rowIndex,rowPinned:t.rowPinned};e.eventService.dispatchEvent(i)}))},e.prototype.pasteMultipleValues=function(t,e,i,o,n,r,s){var a=this,l=e,c=null!=this.clientSideRowModel&&!this.gridOptionsService.get("enableGroupEdit")&&!this.gridOptionsService.get("treeData");t.forEach((function(t){var e=function(){for(;;){if(!l)return null;var t=a.rowPositionUtils.getRowNode(l);if(l=a.cellNavigationService.getRowBelow({rowPinned:l.rowPinned,rowIndex:l.rowIndex}),null==t)return null;if(!(t.detail||t.footer||c&&t.group))return t}}();e&&(t.forEach((function(t,i){return a.updateCellValue(e,o[i],t,n,r,s)})),i.push(e))}))},e.prototype.updateCellValue=function(t,e,i,o,n,r){if(t&&e&&e.isCellEditable(t)&&!e.isSuppressPaste(t)&&(!t.group||!e.isValueActive())){var s=this.processCell(t,e,i,n,this.gridOptionsService.getCallback("processCellFromClipboard"),!0);t.setDataValue(e,s,Vt);var a=t.rowIndex,l=t.rowPinned;o[this.cellPositionUtils.createIdFromValues({rowIndex:a,column:e,rowPinned:l})]=!0,r&&r.addParentNode(t.parent,[e])}},e.prototype.copyToClipboard=function(t){void 0===t&&(t={}),this.copyOrCutToClipboard(t)},e.prototype.cutToClipboard=function(t,e){if(void 0===t&&(t={}),void 0===e&&(e="api"),!this.gridOptionsService.get("suppressCutToClipboard")){var i={type:o.sVA.EVENT_CUT_START,source:e};this.eventService.dispatchEvent(i),this.copyOrCutToClipboard(t,!0);var n={type:o.sVA.EVENT_CUT_END,source:e};this.eventService.dispatchEvent(n)}},e.prototype.copyOrCutToClipboard=function(t,e){var i=t.includeHeaders,o=t.includeGroupHeaders;this.logger.log("copyToClipboard: includeHeaders = ".concat(i)),null==i&&(i=this.gridOptionsService.get("copyHeadersToClipboard")),null==o&&(o=this.gridOptionsService.get("copyGroupHeadersToClipboard"));var n={includeHeaders:i,includeGroupHeaders:o},r=!this.gridOptionsService.get("suppressCopyRowsToClipboard"),s=null;!this.rangeService||this.rangeService.isEmpty()||this.shouldSkipSingleCellRange()?r&&!this.selectionService.isEmpty()?(this.copySelectedRowsToClipboard(n),s=St.SelectedRows):this.focusService.isAnyCellFocused()&&(this.copyFocusedCellToClipboard(n),s=St.FocusedCell):(this.copySelectedRangeToClipboard(n),s=St.CellRange),e&&null!==s&&this.clearCellsAfterCopy(s)},e.prototype.clearCellsAfterCopy=function(t){if(this.eventService.dispatchEvent({type:o.sVA.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),t===St.CellRange)this.rangeService.clearCellRangeCellValues({cellEventSource:"clipboardService"});else if(t===St.SelectedRows)this.clearSelectedRows();else{var e=this.focusService.getFocusedCell();if(null==e)return;var i=this.rowPositionUtils.getRowNode(e);i&&this.clearCellValue(i,e.column)}this.eventService.dispatchEvent({type:o.sVA.EVENT_KEY_SHORTCUT_CHANGED_CELL_END})},e.prototype.clearSelectedRows=function(){var t,e,i,o,n=this.selectionService.getSelectedNodes(),r=this.columnModel.getAllDisplayedColumns();try{for(var s=Bt(n),a=s.next();!a.done;a=s.next()){var l=a.value;try{for(var c=(i=void 0,Bt(r)),d=c.next();!d.done;d=c.next()){var u=d.value;this.clearCellValue(l,u)}}catch(h){i={error:h}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}}catch(p){t={error:p}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}},e.prototype.clearCellValue=function(t,e){e.isCellEditable(t)&&t.setDataValue(e,null,"clipboardService")},e.prototype.shouldSkipSingleCellRange=function(){return this.gridOptionsService.get("suppressCopySingleCellRanges")&&!this.rangeService.isMoreThanOneCell()},e.prototype.iterateActiveRanges=function(t,e,i){var o=this;if(this.rangeService&&!this.rangeService.isEmpty()){var n=this.rangeService.getCellRanges();t?this.iterateActiveRange(n[0],e,i,!0):n.forEach((function(t,r){return o.iterateActiveRange(t,e,i,r===n.length-1)}))}},e.prototype.iterateActiveRange=function(t,e,i,o){if(this.rangeService){var n=this.rangeService.getRangeStartRow(t),r=this.rangeService.getRangeEndRow(t);i&&t.columns&&i(t.columns);for(var s=0,a=!1;!a&&null!=n;){var l=this.rowPositionUtils.getRowNode(n);a=this.rowPositionUtils.sameRow(n,r),e(n,l,t.columns,s++,a&&o),n=this.cellNavigationService.getRowBelow(n)}}},e.prototype.copySelectedRangeToClipboard=function(t){if(void 0===t&&(t={}),this.rangeService&&!this.rangeService.isEmpty()){var e=this.rangeService.areAllRangesAbleToMerge()?this.buildDataFromMergedRanges(t):this.buildDataFromRanges(t),i=e.data,o=e.cellsToFlash;this.copyDataToClipboard(i),this.dispatchFlashCells(o)}},e.prototype.buildDataFromMergedRanges=function(t){var e=this,i=new Set,o=this.rangeService.getCellRanges(),n=new Map,r=[],s={};o.forEach((function(t){t.columns.forEach((function(t){return i.add(t)}));var o=e.getRangeRowPositionsAndCellsToFlash(t),a=o.rowPositions,l=o.cellsToFlash;a.forEach((function(t){var e="".concat(t.rowIndex,"-").concat(t.rowPinned||"null");n.get(e)||(n.set(e,!0),r.push(t))})),Object.assign(s,l)}));var a=this.columnModel.getAllDisplayedColumns(),l=Array.from(i);return l.sort((function(t,e){return a.indexOf(t)-a.indexOf(e)})),{data:this.buildExportParams({columns:l,rowPositions:r,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}),cellsToFlash:s}},e.prototype.buildDataFromRanges=function(t){var e=this,i=this.rangeService.getCellRanges(),o=[],n={};return i.forEach((function(i){var r=e.getRangeRowPositionsAndCellsToFlash(i),s=r.rowPositions,a=r.cellsToFlash;Object.assign(n,a),o.push(e.buildExportParams({columns:i.columns,rowPositions:s,includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders}))})),{data:o.join("\n"),cellsToFlash:n}},e.prototype.getRangeRowPositionsAndCellsToFlash=function(t){for(var e=this,i=[],o={},n=this.rangeService.getRangeStartRow(t),r=this.rangeService.getRangeEndRow(t),s=n;s&&(i.push(s),t.columns.forEach((function(t){var i=s,n=i.rowIndex,r=i.rowPinned,a=e.cellPositionUtils.createIdFromValues({rowIndex:n,column:t,rowPinned:r});o[a]=!0})),!this.rowPositionUtils.sameRow(s,r));)s=this.cellNavigationService.getRowBelow(s);return{rowPositions:i,cellsToFlash:o}},e.prototype.copyFocusedCellToClipboard=function(t){var e;void 0===t&&(t={});var i=this.focusService.getFocusedCell();if(null!=i){var o=this.cellPositionUtils.createId(i),n={rowPinned:i.rowPinned,rowIndex:i.rowIndex},r=i.column,s=this.buildExportParams({columns:[r],rowPositions:[n],includeHeaders:t.includeHeaders,includeGroupHeaders:t.includeGroupHeaders});this.copyDataToClipboard(s),this.dispatchFlashCells(((e={})[o]=!0,e))}},e.prototype.copySelectedRowsToClipboard=function(t){void 0===t&&(t={});var e=t.columnKeys,i=t.includeHeaders,o=t.includeGroupHeaders,n=this.buildExportParams({columns:e,includeHeaders:i,includeGroupHeaders:o});this.copyDataToClipboard(n)},e.prototype.buildExportParams=function(t){var e=this,i=t.columns,o=t.rowPositions,n=t.includeHeaders,r=void 0!==n&&n,s=t.includeGroupHeaders,a={columnKeys:i,rowPositions:o,skipColumnHeaders:!r,skipColumnGroupHeaders:!(void 0!==s&&s),suppressQuotes:!0,columnSeparator:this.getClipboardDelimiter(),onlySelected:!o,processCellCallback:this.gridOptionsService.getCallback("processCellForClipboard"),processRowGroupCallback:function(t){return e.processRowGroupCallback(t)},processHeaderCallback:this.gridOptionsService.getCallback("processHeaderForClipboard"),processGroupHeaderCallback:this.gridOptionsService.getCallback("processGroupHeaderForClipboard")};return this.csvCreator.getDataAsCsv(a,!0)},e.prototype.processRowGroupCallback=function(t){var e=this,i=t.node,o=i.key,n=null!=o?o:"";if(t.node.footer){var r="";o&&o.length&&(r=" ".concat(o)),n="Total".concat(r)}var s=this.gridOptionsService.getCallback("processCellForClipboard");if(s){var a=i.rowGroupColumn;return!a&&i.footer&&-1===i.level&&(a=this.columnModel.getRowGroupColumns()[0]),s({value:n,node:i,column:a,type:"clipboard",formatValue:function(t){var o;return null!==(o=e.valueFormatterService.formatValue(a,i,t))&&void 0!==o?o:t},parseValue:function(t){return e.valueParserService.parseValue(a,i,t,e.valueService.getValue(a,i))}})}return n},e.prototype.dispatchFlashCells=function(t){var e=this;window.setTimeout((function(){var i={type:o.sVA.EVENT_FLASH_CELLS,cells:t};e.eventService.dispatchEvent(i)}),0)},e.prototype.processCell=function(t,e,i,o,n,r,s){var a,l=this;if(n){var c={column:e,node:t,value:i,type:o,formatValue:function(i){var o;return null!==(o=l.valueFormatterService.formatValue(e,null!==t&&void 0!==t?t:null,i))&&void 0!==o?o:i},parseValue:function(i){return l.valueParserService.parseValue(e,null!==t&&void 0!==t?t:null,i,l.valueService.getValue(e,t))}};return n(c)}return r&&!1!==e.getColDef().useValueParserForImport?this.valueParserService.parseValue(e,null!==t&&void 0!==t?t:null,i,this.valueService.getValue(e,t)):s&&!1!==e.getColDef().useValueFormatterForExport&&null!==(a=this.valueFormatterService.formatValue(e,null!==t&&void 0!==t?t:null,i))&&void 0!==a?a:i},e.prototype.copyDataToClipboard=function(t){var e=this,i=this.gridOptionsService.getCallback("sendToClipboard");i?i({data:t}):!this.gridOptionsService.get("suppressClipboardApi")&&navigator.clipboard?navigator.clipboard.writeText(t).catch((function(i){o._.doOnce((function(){console.warn(i),console.warn(Ht("writeText"))}),"clipboardApiError"),e.copyDataToClipboardLegacy(t)})):this.copyDataToClipboardLegacy(t)},e.prototype.copyDataToClipboardLegacy=function(t){var e=this;this.executeOnTempElement((function(i){var o=e.gridOptionsService.getDocument(),n=o.activeElement;i.value=t||" ",i.select(),i.focus({preventScroll:!0}),o.execCommand("copy")||console.warn("AG Grid: Browser did not allow document.execCommand('copy'). Ensure api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons."),null!=n&&null!=n.focus&&n.focus({preventScroll:!0})}))},e.prototype.executeOnTempElement=function(t,e){var i=this.gridOptionsService.getDocument(),o=i.createElement("textarea");o.style.width="1px",o.style.height="1px",o.style.top=i.documentElement.scrollTop+"px",o.style.left=i.documentElement.scrollLeft+"px",o.style.position="absolute",o.style.opacity="0";var n=this.gridCtrl.getGui();n.appendChild(o);try{t(o)}catch(r){console.warn("AG Grid: Browser does not support document.execCommand('copy') for clipboard operations")}e?window.setTimeout((function(){e(o),n.removeChild(o)}),100):n.removeChild(o)},e.prototype.getRangeSize=function(){var t=this.rangeService.getCellRanges(),e=0,i=0;return t.length>0&&(e=this.rangeService.getRangeStartRow(t[0]).rowIndex,i=this.rangeService.getRangeEndRow(t[0]).rowIndex),e-i+1},It([(0,o.dsm)("csvCreator")],e.prototype,"csvCreator",void 0),It([(0,o.dsm)("loggerFactory")],e.prototype,"loggerFactory",void 0),It([(0,o.dsm)("selectionService")],e.prototype,"selectionService",void 0),It([(0,o.Xx1)("rangeService")],e.prototype,"rangeService",void 0),It([(0,o.dsm)("rowModel")],e.prototype,"rowModel",void 0),It([(0,o.dsm)("ctrlsService")],e.prototype,"ctrlsService",void 0),It([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),It([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),It([(0,o.dsm)("rowRenderer")],e.prototype,"rowRenderer",void 0),It([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),It([(0,o.dsm)("cellNavigationService")],e.prototype,"cellNavigationService",void 0),It([(0,o.dsm)("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),It([(0,o.dsm)("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),It([(0,o.dsm)("valueFormatterService")],e.prototype,"valueFormatterService",void 0),It([(0,o.dsm)("valueParserService")],e.prototype,"valueParserService",void 0),It([o.o7C],e.prototype,"init",null),e=i=It([(0,o.dR4)("clipboardService")],e)}(o.XQb),Kt={version:"31.0.0",moduleName:o.zsj.ClipboardModule,beans:[Ut],dependantModules:[g,o.n76]},Yt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Xt=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t[t.EXPANDED=0]="EXPANDED",t[t.COLLAPSED=1]="COLLAPSED",t[t.INDETERMINATE=2]="INDETERMINATE"}(zt||(zt={}));var $t=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Yt(e,t),e.prototype.postConstruct=function(){var t=this;this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",(function(e){e.key===o.DDm.SPACE&&(e.preventDefault(),t.onExpandClicked())})),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.addManagedPropertyListener("functionsReadOnly",(function(){return t.onFunctionsReadOnlyPropChanged()})),this.eFilterTextField.setAutoComplete(!1).onValueChange((function(){return t.onFilterTextChanged()})),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));var e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])},e.prototype.onFunctionsReadOnlyPropChanged=function(){var t=this.gridOptionsService.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",t)},e.prototype.init=function(t){this.params=t;var e=this.gridOptionsService.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e),this.columnModel.isReady()&&this.showOrHideOptions()},e.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=o._.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=o._.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=o._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService)),this.setExpandState(zt.EXPANDED)},e.prototype.showOrHideOptions=function(){var t=!this.params.suppressColumnFilter,e=!this.params.suppressColumnSelectAll,i=!this.params.suppressColumnExpandAll,n=this.columnModel.isPrimaryColumnGroupsPresent(),r=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(r("searchOoo","Search...")),o._.setDisplayed(this.eFilterTextField.getGui(),t),o._.setDisplayed(this.eSelect.getGui(),e),o._.setDisplayed(this.eExpand,i&&n)},e.prototype.onFilterTextChanged=function(){var t=this;this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=o._.debounce((function(){var e=t.eFilterTextField.getValue();t.dispatchEvent({type:"filterChanged",filterText:e})}),e.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()},e.prototype.onMiniFilterKeyDown=function(t){var i=this;t.key===o.DDm.ENTER&&setTimeout((function(){return i.onSelectClicked()}),e.DEBOUNCE_DELAY)},e.prototype.onSelectClicked=function(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})},e.prototype.onExpandClicked=function(){this.dispatchEvent({type:this.expandState===zt.EXPANDED?"collapseAll":"expandAll"})},e.prototype.setExpandState=function(t){this.expandState=t,o._.setDisplayed(this.eExpandChecked,this.expandState===zt.EXPANDED),o._.setDisplayed(this.eExpandUnchecked,this.expandState===zt.COLLAPSED),o._.setDisplayed(this.eExpandIndeterminate,this.expandState===zt.INDETERMINATE)},e.prototype.setSelectionState=function(t){this.selectState=t,this.eSelect.setValue(this.selectState)},e.DEBOUNCE_DELAY=300,e.TEMPLATE='<div class="ag-column-select-header" role="presentation">\n            <div ref="eExpand" class="ag-column-select-header-icon"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',Xt([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Xt([(0,o.PIB)("eExpand")],e.prototype,"eExpand",void 0),Xt([(0,o.PIB)("eSelect")],e.prototype,"eSelect",void 0),Xt([(0,o.PIB)("eFilterTextField")],e.prototype,"eFilterTextField",void 0),Xt([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),qt=function(){function t(t,e,i,n,r){void 0===n&&(n=!1),this.eventService=new o.USV,this.displayName=t,this.dept=i,this.group=n,n?(this.columnGroup=e,this.expanded=r,this.children=[]):this.column=e}return t.prototype.isGroup=function(){return this.group},t.prototype.getDisplayName=function(){return this.displayName},t.prototype.getColumnGroup=function(){return this.columnGroup},t.prototype.getColumn=function(){return this.column},t.prototype.getDept=function(){return this.dept},t.prototype.isExpanded=function(){return!!this.expanded},t.prototype.getChildren=function(){return this.children},t.prototype.isPassesFilter=function(){return this.passesFilter},t.prototype.setExpanded=function(e){e!==this.expanded&&(this.expanded=e,this.eventService.dispatchEvent({type:t.EVENT_EXPANDED_CHANGED}))},t.prototype.setPassesFilter=function(t){this.passesFilter=t},t.prototype.addEventListener=function(t,e){this.eventService.addEventListener(t,e)},t.prototype.removeEventListener=function(t,e){this.eventService.removeEventListener(t,e)},t.EVENT_EXPANDED_CHANGED="expandedChanged",t}(),Zt=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Jt=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Qt=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},te=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},ee=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ie=function(t){function e(e,i,o){var n=t.call(this,'<div class="ag-menu"></div>')||this;return n.column=e,n.mouseEvent=i,n.parentEl=o,n.displayName=null,n}return Zt(e,t),e.prototype.postConstruct=function(){if(this.initializeProperties(this.column),this.buildMenuItemMap(),this.column instanceof o.VPZ?this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.displayName=this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()){this.mouseEvent.preventDefault();var t=this.getMappedMenuItems();if(0===t.length)return;this.displayContextMenu(t)}},e.prototype.initializeProperties=function(t){t instanceof o.D45?this.columns=t.getLeafColumns():this.columns=[t],this.allowGrouping=this.columns.some((function(t){return t.isPrimary()&&t.isAllowRowGroup()})),this.allowValues=this.columns.some((function(t){return t.isPrimary()&&t.isAllowValue()})),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some((function(t){return t.isPrimary()&&t.isAllowPivot()}))},e.prototype.buildMenuItemMap=function(){var t=this,e=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:function(e){return e.isPrimary()&&e.isAllowRowGroup()&&!t.columnModel.isColumnGroupingLocked(e)},activeFunction:function(t){return t.isRowGroupActive()},activateLabel:function(){return"".concat(e("groupBy","Group by")," ").concat(t.displayName)},deactivateLabel:function(){return"".concat(e("ungroupBy","Un-Group by")," ").concat(t.displayName)},activateFunction:function(){var e=t.columnModel.getRowGroupColumns();t.columnModel.setRowGroupColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getRowGroupColumns();t.columnModel.setRowGroupColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:function(t){return t.isPrimary()&&t.isAllowValue()},activeFunction:function(t){return t.isValueActive()},activateLabel:function(){return e("addToValues","Add ".concat(t.displayName," to values"),[t.displayName])},deactivateLabel:function(){return e("removeFromValues","Remove ".concat(t.displayName," from values"),[t.displayName])},activateFunction:function(){var e=t.columnModel.getValueColumns();t.columnModel.setValueColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getValueColumns();t.columnModel.setValueColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:function(e){return t.columnModel.isPivotMode()&&e.isPrimary()&&e.isAllowPivot()},activeFunction:function(t){return t.isPivotActive()},activateLabel:function(){return e("addToLabels","Add ".concat(t.displayName," to labels"),[t.displayName])},deactivateLabel:function(){return e("removeFromLabels","Remove ".concat(t.displayName," from labels"),[t.displayName])},activateFunction:function(){var e=t.columnModel.getPivotColumns();t.columnModel.setPivotColumns(t.addColumnsToList(e),"toolPanelUi")},deActivateFunction:function(){var e=t.columnModel.getPivotColumns();t.columnModel.setPivotColumns(t.removeColumnsFromList(e),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})},e.prototype.addColumnsToList=function(t){return te([],Qt(t),!1).concat(this.columns.filter((function(e){return-1===t.indexOf(e)})))},e.prototype.removeColumnsFromList=function(t){var e=this;return t.filter((function(t){return-1===e.columns.indexOf(t)}))},e.prototype.displayContextMenu=function(t){var e=this,i=this.getGui(),n=this.createBean(new o.i9O),r=this.localeService.getLocaleTextFunc(),s=function(){};i.appendChild(n.getGui()),n.addMenuItems(t),n.addManagedListener(n,o.yuY.EVENT_MENU_ITEM_SELECTED,(function(){e.parentEl.focus(),s()}));var a=this.popupService.addPopup({modal:!0,eChild:i,closeOnEsc:!0,afterGuiAttached:function(){return e.focusService.focusInto(n.getGui())},ariaLabel:r("ariaLabelContextMenu","Context Menu"),closedCallback:function(t){t instanceof KeyboardEvent&&e.parentEl.focus(),e.destroyBean(n)}});a&&(s=a.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:i})},e.prototype.isActive=function(){return this.allowGrouping||this.allowValues||this.allowPivoting},e.prototype.getMappedMenuItems=function(){var t,e,i=[],n=function(t){var e=r.columns.some((function(e){return t.allowedFunction(e)&&!t.activeFunction(e)})),n=r.columns.some((function(e){return t.allowedFunction(e)&&t.activeFunction(e)}));e&&i.push({name:t.activateLabel(r.displayName),icon:o._.createIconNoSpan(t.addIcon,r.gridOptionsService,null),action:function(){return t.activateFunction()}}),n&&i.push({name:t.deactivateLabel(r.displayName),icon:o._.createIconNoSpan(t.removeIcon,r.gridOptionsService,null),action:function(){return t.deActivateFunction()}})},r=this;try{for(var s=ee(this.menuItemMap.values()),a=s.next();!a.done;a=s.next()){n(a.value)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return i},Jt([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Jt([(0,o.dsm)("popupService")],e.prototype,"popupService",void 0),Jt([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),Jt([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),oe=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ne=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},re=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.modelItem=e,r.allowDragging=i,r.eventType=o,r.focusWrapper=n,r.processingColumnStateChange=!1,r.modelItem=e,r.columnGroup=e.getColumnGroup(),r.columnDept=e.getDept(),r.displayName=e.getDisplayName(),r.allowDragging=i,r}return oe(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE),this.eDragHandle=o._.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");var i=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();i.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,o.sVA.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,qt.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),o.PC7.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup).forEach((function(e){return t.addOrRemoveCssClass(e,!0)}))},e.prototype.getColumns=function(){return this.columnGroup.getLeafColumns()},e.prototype.setupTooltip=function(){var t=this,e=this.columnGroup.getColGroupDef();if(e){var i=function(){var i=e.headerTooltip;t.setTooltip(i)};i(),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,i)}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumnGroup",e},e.prototype.handleKeyDown=function(t){switch(t.key){case o.DDm.LEFT:t.preventDefault(),this.modelItem.setExpanded(!1);break;case o.DDm.RIGHT:t.preventDefault(),this.modelItem.setExpanded(!0);break;case o.DDm.SPACE:t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}},e.prototype.onContextMenu=function(t){var e=this,i=this.columnGroup;if(!this.gridOptionsService.get("functionsReadOnly")){var o=this.createBean(new ie(i,t,this.focusWrapper));this.addDestroyFunc((function(){o.isAlive()&&e.destroyBean(o)}))}},e.prototype.addVisibilityListenersToAllChildren=function(){var t=this;this.columnGroup.getLeafColumns().forEach((function(e){t.addManagedListener(e,o.VPZ.EVENT_VISIBLE_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,o.VPZ.EVENT_VALUE_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,o.VPZ.EVENT_PIVOT_CHANGED,t.onColumnStateChanged.bind(t)),t.addManagedListener(e,o.VPZ.EVENT_ROW_GROUP_CHANGED,t.onColumnStateChanged.bind(t))}))},e.prototype.setupDragging=function(){var t=this;if(this.allowDragging){var e=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),i={type:o.qRA.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return e?o.WO_.ICON_HIDE:o.WO_.ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},onDragStarted:function(){e=!t.gridOptionsService.get("suppressDragLeaveHidesColumns");var i={type:o.sVA.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:t.columnGroup};t.eventService.dispatchEvent(i)},onDragStopped:function(){var e={type:o.sVA.EVENT_COLUMN_PANEL_ITEM_DRAG_END};t.eventService.dispatchEvent(e)},onGridEnter:function(i){e&&t.modelItemUtils.updateColumns({columns:t.columnGroup.getLeafColumns(),visibleState:null===i||void 0===i?void 0:i.visibleState,pivotState:null===i||void 0===i?void 0:i.pivotState,eventType:t.eventType})},onGridExit:function(){e&&t.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(i)}))}else o._.setDisplayed(this.eDragHandle,!1)},e.prototype.createDragItem=function(){var t=this,e=this.columnGroup.getLeafColumns(),i={},o={};return e.forEach((function(e){var n=e.getId();i[n]=e.isVisible(),o[n]=t.modelItemUtils.createPivotState(e)})),{columns:e,visibleState:i,pivotState:o}},e.prototype.setupExpandContract=function(){this.eGroupClosedIcon.appendChild(o._.createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(o._.createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));var t=new o.MVO(this.eColumnGroupIcons,!0);this.addManagedListener(t,o.MVO.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(t.destroy.bind(t))},e.prototype.onLabelClicked=function(){var t=!this.cbSelect.getValue();this.onChangeCommon(t)},e.prototype.onCheckboxChanged=function(t){this.onChangeCommon(t.selected)},e.prototype.getVisibleLeafColumns=function(){var t=[],e=function(i){i.forEach((function(i){i.isPassesFilter()&&(i.isGroup()?e(i.getChildren()):t.push(i.getColumn()))}))};return e(this.modelItem.getChildren()),t},e.prototype.onChangeCommon=function(t){this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),t,this.eventType)},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumnGroup","Column Group"),i=this.cbSelect.getValue(),n=void 0===i?t("ariaIndeterminate","indeterminate"):i?t("ariaVisible","visible"):t("ariaHidden","hidden"),r=t("ariaToggleVisibility","Press SPACE to toggle visibility");o._.setAriaLabel(this.focusWrapper,"".concat(this.displayName," ").concat(e)),this.cbSelect.setInputAriaLabel("".concat(r," (").concat(n,")")),o._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},e.prototype.onColumnStateChanged=function(){var t=this.workOutSelectedValue(),e=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(t),this.cbSelect.setReadOnly(e),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",e),this.processingColumnStateChange=!1},e.prototype.workOutSelectedValue=function(){var t=this,e=this.columnModel.isPivotMode(),i=this.getVisibleLeafColumns(),o=0,n=0;if(i.forEach((function(i){!e&&i.getColDef().lockVisible||(t.isColumnChecked(i,e)?o++:n++)})),!(o>0&&n>0))return o>0},e.prototype.workOutReadOnlyValue=function(){var t=this.columnModel.isPivotMode(),e=0;return this.columnGroup.getLeafColumns().forEach((function(i){t?i.isAnyFunctionAllowed()&&e++:i.getColDef().lockVisible||e++})),0===e},e.prototype.isColumnChecked=function(t,e){if(e){var i=t.isPivotActive(),o=t.isRowGroupActive(),n=t.isValueActive();return i||o||n}return t.isVisible()},e.prototype.onExpandOrContractClicked=function(){var t=this.modelItem.isExpanded();this.modelItem.setExpanded(!t)},e.prototype.onExpandChanged=function(){this.setOpenClosedIcons(),this.refreshAriaExpanded()},e.prototype.setOpenClosedIcons=function(){var t=this.modelItem.isExpanded();o._.setDisplayed(this.eGroupClosedIcon,!t),o._.setDisplayed(this.eGroupOpenedIcon,t)},e.prototype.refreshAriaExpanded=function(){o._.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.onSelectAllChanged=function(t){var e=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(t&&!e||!t&&e)&&this.cbSelect.toggle()},e.prototype.isSelected=function(){return this.cbSelect.getValue()},e.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},e.prototype.setSelected=function(t){this.cbSelect.setValue(t,!0)},e.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',ne([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),ne([(0,o.dsm)("dragAndDropService")],e.prototype,"dragAndDropService",void 0),ne([(0,o.dsm)("modelItemUtils")],e.prototype,"modelItemUtils",void 0),ne([(0,o.PIB)("cbSelect")],e.prototype,"cbSelect",void 0),ne([(0,o.PIB)("eLabel")],e.prototype,"eLabel",void 0),ne([(0,o.PIB)("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),ne([(0,o.PIB)("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),ne([(0,o.PIB)("eColumnGroupIcons")],e.prototype,"eColumnGroupIcons",void 0),ne([o.o7C],e.prototype,"init",null),e}(o.uAl),se=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ae=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},le=function(t){function e(e,i){var o=t.call(this)||this;return o.comp=e,o.virtualList=i,o}return se(e,t),e.prototype.postConstruct=function(){var t=this;this.createManagedBean(new o.ia$(this.comp,this.virtualList,{dragSourceType:o.qRA.ToolPanel,listItemDragStartEvent:o.sVA.EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:o.sVA.EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:function(e){return t.getCurrentDragValue(e)},isMoveBlocked:function(e){return t.isMoveBlocked(e)},getNumRows:function(t){return t.getDisplayedColsList().length},moveItem:function(e,i){return t.moveItem(e,i)}}))},e.prototype.getCurrentDragValue=function(t){return t.column},e.prototype.isMoveBlocked=function(t){return!!this.gridOptionsService.get("suppressMovableColumns")||!!this.getCurrentColumns(t).find((function(t){var e=t.getColDef();return!!e.suppressMovable||!!e.lockPosition}))},e.prototype.moveItem=function(t,e){var i=this.getTargetIndex(t,e),o=this.getCurrentColumns(t);null!=i&&this.columnModel.moveColumns(o,i,"toolPanelUi")},e.prototype.getMoveDiff=function(t,e){var i=this.columnModel.getAllGridColumns(),o=this.getCurrentColumns(t),n=o[0],r=o.length;return i.indexOf(n)<e?r:0},e.prototype.getCurrentColumns=function(t){return t instanceof o.D45?t.getLeafColumns():[t]},e.prototype.getTargetIndex=function(t,e){if(!e)return null;var i,o=e.component,n="top"===e.position;o instanceof re?(i=o.getColumns()[0],n=!0):i=o.getColumn();if(-1!==this.getCurrentColumns(t).indexOf(i))return null;var r=this.columnModel.getAllGridColumns().indexOf(i),s=n?r:r+1;return s-this.getMoveDiff(t,s)},ae([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),ae([(0,o.dsm)("gridOptionsService")],e.prototype,"gridOptionsService",void 0),ae([o.o7C],e.prototype,"postConstruct",null),e}(o.XQb),ce=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),de=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ue=function(t){function e(e,i,o,n){var r=t.call(this)||this;return r.allowDragging=i,r.groupsExist=o,r.focusWrapper=n,r.processingColumnStateChange=!1,r.column=e.getColumn(),r.columnDept=e.getDept(),r.displayName=e.getDisplayName(),r}return ce(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE),this.eDragHandle=o._.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");var i=this.cbSelect.getGui(),n=this.cbSelect.getInputElement();i.insertAdjacentElement("afterend",this.eDragHandle),n.setAttribute("tabindex","-1");var r=o._.escapeString(this.displayName);this.eLabel.innerHTML=r;var s=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass("ag-column-select-indent-".concat(s)),this.setupDragging(),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,o.VPZ.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,o.VPZ.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,o.VPZ.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,o.VPZ.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,o.sVA.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),o.PC7.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null).forEach((function(e){return t.addOrRemoveCssClass(e,!0)}))},e.prototype.getColumn=function(){return this.column},e.prototype.setupTooltip=function(){var t=this,e=function(){var e=t.column.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,e)},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e},e.prototype.onContextMenu=function(t){var e=this,i=this.column;if(!this.gridOptionsService.get("functionsReadOnly")){var o=this.createBean(new ie(i,t,this.focusWrapper));this.addDestroyFunc((function(){o.isAlive()&&e.destroyBean(o)}))}},e.prototype.handleKeyDown=function(t){t.key===o.DDm.SPACE&&(t.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))},e.prototype.onLabelClicked=function(){if(!this.gridOptionsService.get("functionsReadOnly")){var t=!this.cbSelect.getValue();this.onChangeCommon(t)}},e.prototype.onCheckboxChanged=function(t){this.onChangeCommon(t.selected)},e.prototype.onChangeCommon=function(t){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),this.processingColumnStateChange||this.modelItemUtils.setColumn(this.column,t,"toolPanelUi"))},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumn","Column"),i=this.cbSelect.getValue()?t("ariaVisible","visible"):t("ariaHidden","hidden"),n=t("ariaToggleVisibility","Press SPACE to toggle visibility");o._.setAriaLabel(this.focusWrapper,"".concat(this.displayName," ").concat(e)),this.cbSelect.setInputAriaLabel("".concat(n," (").concat(i,")")),o._.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)},e.prototype.setupDragging=function(){var t=this;if(this.allowDragging){var e=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),i={type:o.qRA.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:function(){return e?o.WO_.ICON_HIDE:o.WO_.ICON_NOT_ALLOWED},getDragItem:function(){return t.createDragItem()},onDragStarted:function(){e=!t.gridOptionsService.get("suppressDragLeaveHidesColumns");var i={type:o.sVA.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:t.column};t.eventService.dispatchEvent(i)},onDragStopped:function(){var e={type:o.sVA.EVENT_COLUMN_PANEL_ITEM_DRAG_END};t.eventService.dispatchEvent(e)},onGridEnter:function(i){e&&t.modelItemUtils.updateColumns({columns:[t.column],visibleState:null===i||void 0===i?void 0:i.visibleState,pivotState:null===i||void 0===i?void 0:i.pivotState,eventType:"toolPanelUi"})},onGridExit:function(){e&&t.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(i,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(i)}))}else o._.setDisplayed(this.eDragHandle,!1)},e.prototype.createDragItem=function(){var t,e,i=this.column.getColId(),o=((t={})[i]=this.column.isVisible(),t),n=((e={})[i]=this.modelItemUtils.createPivotState(this.column),e);return{columns:[this.column],visibleState:o,pivotState:n}},e.prototype.onColumnStateChanged=function(){this.processingColumnStateChange=!0;var t=this.columnModel.isPivotMode();if(t){var e=this.column.isAnyFunctionActive();this.cbSelect.setValue(e)}else this.cbSelect.setValue(this.column.isVisible());var i=!0,o=!0;if(t){var n=this.gridOptionsService.get("functionsReadOnly"),r=!this.column.isAnyFunctionAllowed();o=i=!n&&!r}else{var s=this.column.getColDef(),a=s.enableRowGroup,l=s.enableValue,c=s.lockPosition,d=s.suppressMovable;i=!s.lockVisible,o=!!a||!!l||!(!!c||!!d)}this.cbSelect.setReadOnly(!i),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!o),this.addOrRemoveCssClass("ag-column-select-column-readonly",!o&&!i);var u=t&&this.gridOptionsService.get("functionsPassive");this.cbSelect.setPassive(u),this.processingColumnStateChange=!1},e.prototype.getDisplayName=function(){return this.displayName},e.prototype.onSelectAllChanged=function(t){t!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())},e.prototype.isSelected=function(){return this.cbSelect.getValue()},e.prototype.isSelectable=function(){return!this.cbSelect.isReadOnly()},e.prototype.isExpandable=function(){return!1},e.prototype.setExpanded=function(t){console.warn("AG Grid: can not expand a column item that does not represent a column group header")},e.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',de([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),de([(0,o.dsm)("dragAndDropService")],e.prototype,"dragAndDropService",void 0),de([(0,o.dsm)("modelItemUtils")],e.prototype,"modelItemUtils",void 0),de([(0,o.PIB)("eLabel")],e.prototype,"eLabel",void 0),de([(0,o.PIB)("cbSelect")],e.prototype,"cbSelect",void 0),de([o.o7C],e.prototype,"init",null),e}(o.uAl),he=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),pe=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},fe=function(){function t(t){this.items=t}return t.prototype.getRowCount=function(){return this.items.length},t.prototype.getRow=function(t){return this.items[t]},t}(),ge=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.destroyColumnItemFuncs=[],i.hasLoadedInitialState=!1,i.isInitialState=!1,i}return he(e,t),e.prototype.destroyColumnTree=function(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach((function(t){return t()})),this.destroyColumnItemFuncs=[]},e.prototype.init=function(t,e,i){var n=this;this.params=t,this.allowDragging=e,this.eventType=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[o.sVA.EVENT_COLUMN_PIVOT_CHANGED,o.sVA.EVENT_COLUMN_PIVOT_MODE_CHANGED,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,o.sVA.EVENT_COLUMN_VALUE_CHANGED,o.sVA.EVENT_COLUMN_VISIBLE,o.sVA.EVENT_NEW_COLUMNS_LOADED].forEach((function(t){n.addManagedListener(n.eventService,t,n.fireSelectionChangedEvent.bind(n))})),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new o.wjn({cssIdentifier:"column-select",ariaRole:"tree"})),this.appendChild(this.virtualList.getGui());var r=this.virtualList.getAriaElement();o._.setAriaLive(r,"assertive"),o._.setAriaAtomic(r,!1),o._.setAriaRelevant(r,"text"),this.virtualList.setComponentCreator((function(t,e){return o._.setAriaLevel(e,t.getDept()+1),n.createComponentFromItem(t,e)})),this.columnModel.isReady()&&this.onColumnsChanged(),this.params.suppressColumnMove||(this.colsListPanelItemDragFeature=this.createManagedBean(new le(this,this.virtualList)))},e.prototype.createComponentFromItem=function(t,e){if(t.isGroup()){var i=new re(t,this.allowDragging,this.eventType,e);return this.getContext().createBean(i),i}var o=new ue(t,this.allowDragging,this.groupsExist,e);return this.getContext().createBean(o),o},e.prototype.onColumnsChanged=function(){this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);var t=this.getExpandedStates(),e=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!e?this.buildTreeFromWhatGridIsDisplaying():this.buildTreeFromProvidedColumnDefs(),this.setExpandedStates(t),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1},e.prototype.getDisplayedColsList=function(){return this.displayedColsList},e.prototype.getExpandedStates=function(){var t={};return this.isInitialState?(this.params.initialState.expandedGroupIds.forEach((function(e){t[e]=!0})),t):this.allColsTree?(this.forEachItem((function(e){if(e.isGroup()){var i=e.getColumnGroup();i&&(t[i.getId()]=e.isExpanded())}})),t):{}},e.prototype.setExpandedStates=function(t){if(this.allColsTree){var e=this.isInitialState;this.forEachItem((function(i){if(i.isGroup()){var o=i.getColumnGroup();if(o){var n=t[o.getId()];(null!=n||e)&&i.setExpanded(!!n)}}}))}},e.prototype.buildTreeFromWhatGridIsDisplaying=function(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))},e.prototype.setColumnLayout=function(t){var e=this.colDefService.createColumnTree(t);this.buildListModel(e),this.groupsExist=t.some((function(t){return t&&"undefined"!==typeof t.children})),this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.buildTreeFromProvidedColumnDefs=function(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()},e.prototype.buildListModel=function(t){var e=this,i=this.onColumnExpanded.bind(this),n=function(t,e,i){t.forEach((function(t){t instanceof o.D45?r(t,e,i):s(t,e,i)}))},r=function(t,o,r){var s=t.getColGroupDef();if(!(s&&s.suppressColumnsToolPanel))if(t.isPadding())n(t.getChildren(),o,r);else{var a=e.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"columnToolPanel"),l=new qt(a,t,o,!0,e.expandGroupsByDefault);r.push(l),function(t){t.addEventListener(qt.EVENT_EXPANDED_CHANGED,i);var o=t.removeEventListener.bind(t,qt.EVENT_EXPANDED_CHANGED,i);e.destroyColumnItemFuncs.push(o)}(l),n(t.getChildren(),o+1,l.getChildren())}},s=function(t,i,o){if(!(t.getColDef()&&t.getColDef().suppressColumnsToolPanel)){var n=e.columnModel.getDisplayNameForColumn(t,"columnToolPanel");o.push(new qt(n,t,i))}};this.destroyColumnTree(),n(t,0,this.allColsTree)},e.prototype.onColumnExpanded=function(){this.flattenAndFilterModel()},e.prototype.flattenAndFilterModel=function(){var t=this;this.displayedColsList=[];var e=function(i){i.isPassesFilter()&&(t.displayedColsList.push(i),i.isGroup()&&i.isExpanded()&&i.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new fe(this.displayedColsList));var i=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=i&&this.focusRowIfAlive(i),this.notifyListeners(),this.refreshAriaLabel()},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaColumnPanelList","Column List"),i=t("columns","Columns"),n=this.displayedColsList.length;o._.setAriaLabel(this.virtualList.getAriaElement(),"".concat(e," ").concat(n," ").concat(i))},e.prototype.focusRowIfAlive=function(t){var e=this;window.setTimeout((function(){e.isAlive()&&e.virtualList.focusRow(t)}),0)},e.prototype.forEachItem=function(t){var e=function(i){i.forEach((function(i){t(i),i.isGroup()&&e(i.getChildren())}))};e(this.allColsTree)},e.prototype.doSetExpandedAll=function(t){this.forEachItem((function(e){e.isGroup()&&e.setExpanded(t)}))},e.prototype.setGroupsExpanded=function(t,e){if(e){var i=[];this.forEachItem((function(o){if(o.isGroup()){var n=o.getColumnGroup().getId();e.indexOf(n)>=0&&(o.setExpanded(t),i.push(n))}}));var n=e.filter((function(t){return!o._.includes(i,t)}));n.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",n)}else this.doSetExpandedAll(t)},e.prototype.getExpandState=function(){var t=0,e=0;return this.forEachItem((function(i){i.isGroup()&&(i.isExpanded()?t++:e++)})),t>0&&e>0?zt.INDETERMINATE:e>0?zt.COLLAPSED:zt.EXPANDED},e.prototype.doSetSelectedAll=function(t){this.modelItemUtils.selectAllChildren(this.allColsTree,t,this.eventType)},e.prototype.getSelectionState=function(){var t=0,e=0,i=this.columnModel.isPivotMode();if(this.forEachItem((function(o){if(!o.isGroup()&&o.isPassesFilter()){var n,r=o.getColumn(),s=r.getColDef();if(i){if(!r.isAllowPivot()&&!r.isAllowRowGroup()&&!r.isAllowValue())return;n=r.isValueActive()||r.isPivotActive()||r.isRowGroupActive()}else{if(s.lockVisible)return;n=r.isVisible()}n?t++:e++}})),!(t>0&&e>0))return!(0===t||e>0)},e.prototype.setFilterText=function(t){this.filterText=o._.exists(t)?t.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()},e.prototype.markFilteredColumns=function(){var t=this,e=function(e){if(!o._.exists(t.filterText))return!0;var i=e.getDisplayName();return null==i||-1!==i.toLowerCase().indexOf(t.filterText)},i=function(t,o){var n=!1;if(t.isGroup()){var r=e(t);t.getChildren().forEach((function(t){var e=i(t,r||o);e&&(n=e)}))}var s=!(!o&&!n)||e(t);return t.setPassesFilter(s),s};this.allColsTree.forEach((function(t){return i(t,!1)}))},e.prototype.notifyListeners=function(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()},e.prototype.fireGroupExpandedEvent=function(){var t=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:t})},e.prototype.fireSelectionChangedEvent=function(){if(this.allColsTree){var t=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:t})}},e.prototype.getExpandedGroups=function(){var t=[];return this.allColsTree?(this.forEachItem((function(e){e.isGroup()&&e.isExpanded()&&t.push(e.getColumnGroup().getId())})),t):t},e.TEMPLATE='<div class="'.concat("ag-column-select-list",'" role="presentation"></div>'),pe([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),pe([(0,o.dsm)("toolPanelColDefService")],e.prototype,"colDefService",void 0),pe([(0,o.dsm)("modelItemUtils")],e.prototype,"modelItemUtils",void 0),pe([o.yah],e.prototype,"destroyColumnTree",null),e}(o.uAl),ve=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ye=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},me=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ve(e,t),e.prototype.createTemplate=function(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'},e.prototype.init=function(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());var t=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(t("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,o.sVA.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))},e.prototype.onBtPivotMode=function(){var t=!!this.cbPivotMode.getValue();if(t!==this.columnModel.isPivotMode()){this.columnModel.setPivotMode(t,"toolPanelUi");var e=this.gridOptionsService.api;e&&e.refreshHeader()}},e.prototype.onPivotModeChanged=function(){var t=this.columnModel.isPivotMode();this.cbPivotMode.setValue(t)},ye([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),ye([(0,o.PIB)("cbPivotMode")],e.prototype,"cbPivotMode",void 0),ye([o.fK3],e.prototype,"init",null),e}(o.uAl),be=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Se=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return be(e,t),e.prototype.execute=function(t){var e=o._.missingOrEmpty(this.columnModel.getValueColumns()),i=!this.gridOptionsService.getCallback("getGroupRowAgg"),n=t.changedPath&&t.changedPath.isActive();if(!(e&&i&&n)){var r=this.createAggDetails(t);this.recursivelyCreateAggData(r)}},e.prototype.createAggDetails=function(t){var e=this.columnModel.isPivotActive(),i=this.columnModel.getValueColumns(),o=e?this.columnModel.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gridOptionsService.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),changedPath:t.changedPath,valueColumns:i,pivotColumns:o,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gridOptionsService.getCallback("getGroupRowAgg")}},e.prototype.isSuppressAggFilteredOnly=function(){return void 0!==this.gridOptionsService.getGroupAggFiltering()||this.gridOptionsService.get("suppressAggFilteredOnly")},e.prototype.recursivelyCreateAggData=function(t){var e=this;t.changedPath.forEachChangedNodeDepthFirst((function(i){if(!i.hasChildren())i.aggData&&i.setAggData(null);else{if(-1===i.level&&!t.groupIncludeTotalFooter){var o=!e.columnModel.isPivotMode();if(!t.alwaysAggregateAtRootLevel&&o)return void i.setAggData(null)}e.aggregateRowNode(i,t)}}),!0)},e.prototype.aggregateRowNode=function(t,e){var i,o=0===e.valueColumns.length,n=0===e.pivotColumns.length;i=e.userAggFunc?e.userAggFunc({nodes:t.childrenAfterFilter}):o?null:n?this.aggregateRowNodeUsingValuesOnly(t,e):this.aggregateRowNodeUsingValuesAndPivot(t),t.setAggData(i),t.sibling&&t.sibling.setAggData(i)},e.prototype.aggregateRowNodeUsingValuesAndPivot=function(t){var e,i=this,n={},r=null!==(e=this.columnModel.getSecondaryColumns())&&void 0!==e?e:[];return r.forEach((function(e){var r=e.getColDef(),s=r.pivotValueColumn,a=r.pivotTotalColumnIds,l=r.colId,c=r.pivotKeys;if(!o._.exists(a)){var d,u=null!==c&&void 0!==c?c:[];d=t.leafGroup?i.getValuesFromMappedSet(t.childrenMapped,u,s):i.getValuesPivotNonLeaf(t,l),n[l]=i.aggregateValues(d,s.getAggFunc(),s,t,e)}})),r.forEach((function(e){var r=e.getColDef(),s=r.pivotValueColumn,a=r.pivotTotalColumnIds,l=r.colId;if(o._.exists(a)){var c=[];a&&a.length&&(a.forEach((function(t){c.push(n[t])})),n[l]=i.aggregateValues(c,s.getAggFunc(),s,t,e))}})),n},e.prototype.aggregateRowNodeUsingValuesOnly=function(t,e){var i=this,o={},n=e.changedPath.isActive()?e.changedPath.getValueColumnsForNode(t,e.valueColumns):e.valueColumns,r=e.changedPath.isActive()?e.changedPath.getNotValueColumnsForNode(t,e.valueColumns):null,s=this.getValuesNormal(t,n,e.filteredOnly),a=t.aggData;return n.forEach((function(e,n){o[e.getId()]=i.aggregateValues(s[n],e.getAggFunc(),e,t)})),r&&a&&r.forEach((function(t){o[t.getId()]=a[t.getId()]})),o},e.prototype.getValuesPivotNonLeaf=function(t,e){var i=[];return t.childrenAfterFilter.forEach((function(t){var o=t.aggData[e];i.push(o)})),i},e.prototype.getValuesFromMappedSet=function(t,e,i){var o=this,n=t;if(e.forEach((function(t){return n=n?n[t]:null})),!n)return[];var r=[];return n.forEach((function(t){var e=o.valueService.getValue(i,t);r.push(e)})),r},e.prototype.getValuesNormal=function(t,e,i){var o=[];e.forEach((function(){return o.push([])}));for(var n=e.length,r=i?t.childrenAfterFilter:t.childrenAfterGroup,s=r.length,a=0;a<s;a++)for(var l=r[a],c=0;c<n;c++){var d=e[c],u=this.valueService.getValue(d,l);o[c].push(u)}return o},e.prototype.aggregateValues=function(t,e,i,o,n){var r="string"===typeof e?this.aggFuncService.getAggFunc(e):e;return"function"!==typeof r?(console.error("AG Grid: unrecognised aggregation function ".concat(e)),null):r({values:t,column:i,colDef:i?i.getColDef():void 0,pivotResultColumn:n,rowNode:o,data:o?o.data:void 0,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context})},Se([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Se([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),Se([(0,o.dsm)("aggFuncService")],e.prototype,"aggFuncService",void 0),e=Se([(0,o.dR4)("aggregationStage")],e)}(o.XQb),Ce=function(){function t(){this.allSets={},this.allParents=[]}return t.prototype.removeFromChildrenAfterGroup=function(t,e){this.getSet(t).removeFromChildrenAfterGroup[e.id]=!0},t.prototype.isRemoveFromAllLeafChildren=function(t,e){return!!this.getSet(t).removeFromAllLeafChildren[e.id]},t.prototype.preventRemoveFromAllLeafChildren=function(t,e){delete this.getSet(t).removeFromAllLeafChildren[e.id]},t.prototype.removeFromAllLeafChildren=function(t,e){this.getSet(t).removeFromAllLeafChildren[e.id]=!0},t.prototype.getSet=function(t){return this.allSets[t.id]||(this.allSets[t.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(t)),this.allSets[t.id]},t.prototype.getAllParents=function(){return this.allParents},t.prototype.flush=function(){var t=this;this.allParents.forEach((function(e){var i=t.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter((function(t){return!i.removeFromChildrenAfterGroup[t.id]})),e.allLeafChildren=e.allLeafChildren.filter((function(t){return!i.removeFromAllLeafChildren[t.id]})),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)})),this.allSets={},this.allParents.length=0},t}(),we=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ee=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Oe=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},De=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return we(e,t),e.prototype.execute=function(t){var e=this.createGroupingDetails(t);if(e.transactions)this.handleTransaction(e);else{var i=!0===t.afterColumnsChanged;this.shotgunResetEverything(e,i)}e.usingTreeData||(this.positionLeafsAndGroups(t.changedPath),this.orderGroups(e)),this.selectableService.updateSelectableAfterGrouping()},e.prototype.positionLeafsAndGroups=function(t){t.forEachChangedNodeDepthFirst((function(t){if(t.childrenAfterGroup){var e,i=[],o=[];t.childrenAfterGroup.forEach((function(t){var n;(null===(n=t.childrenAfterGroup)||void 0===n?void 0:n.length)?""!==t.key||e?o.push(t):e=t:i.push(t)})),e&&o.push(e),t.childrenAfterGroup=De(De([],Oe(i),!1),Oe(o),!1)}}),!1)},e.prototype.createGroupingDetails=function(t){var e,i=t.rowNode,o=t.changedPath,n=t.rowNodeTransactions,r=t.rowNodeOrder,s=this.gridOptionsService.get("treeData"),a=s?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsService.get("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.get("groupDefaultExpanded"),groupedCols:a,rootNode:i,pivotMode:this.columnModel.isPivotMode(),groupedColCount:s||!a?0:a.length,rowNodeOrder:r,transactions:n,changedPath:o,groupAllowUnbalanced:this.gridOptionsService.get("groupAllowUnbalanced"),isGroupOpenByDefault:this.gridOptionsService.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gridOptionsService.getCallback("initialGroupOrderComparator"),usingTreeData:s,suppressGroupMaintainValueType:this.gridOptionsService.get("suppressGroupMaintainValueType"),getDataPath:s?this.gridOptionsService.get("getDataPath"):void 0,keyCreators:null!==(e=null===a||void 0===a?void 0:a.map((function(t){return t.getColDef().keyCreator})))&&void 0!==e?e:[]}},e.prototype.handleTransaction=function(t){var e=this;t.transactions.forEach((function(i){var n=t.usingTreeData?void 0:new Ce;if(o._.existsAndNotEmpty(i.remove)&&e.removeNodes(i.remove,t,n),o._.existsAndNotEmpty(i.update)&&e.moveNodesInWrongPath(i.update,t,n),o._.existsAndNotEmpty(i.add)&&e.insertNodes(i.add,t,!1),n){var r=n.getAllParents().slice();n.flush(),e.removeEmptyGroups(r,t)}})),t.rowNodeOrder&&this.sortChildren(t)},e.prototype.sortChildren=function(t){t.changedPath.forEachChangedNodeDepthFirst((function(e){e.childrenAfterGroup&&(o._.sortRowNodesByOrder(e.childrenAfterGroup,t.rowNodeOrder)&&t.changedPath.addParentNode(e))}),!1,!0)},e.prototype.orderGroups=function(t){var e=t.initialGroupOrderComparator;o._.exists(e)&&function t(i){o._.exists(i.childrenAfterGroup)&&!i.leafGroup&&(i.childrenAfterGroup.sort((function(t,i){return e({nodeA:t,nodeB:i})})),i.childrenAfterGroup.forEach((function(e){return t(e)})))}(t.rootNode)},e.prototype.getExistingPathForNode=function(t,e){for(var i=[],o=e.usingTreeData?t:t.parent;o&&o!==e.rootNode;)i.push({key:o.key,rowGroupColumn:o.rowGroupColumn,field:o.field}),o=o.parent;return i.reverse(),i},e.prototype.moveNodesInWrongPath=function(t,e,i){var n=this;t.forEach((function(t){e.changedPath.isActive()&&e.changedPath.addParentNode(t.parent);var r=function(t){return t.key},s=n.getExistingPathForNode(t,e).map(r),a=n.getGroupInfo(t,e).map(r);o._.areEqual(s,a)||n.moveNode(t,e,i)}))},e.prototype.moveNode=function(t,e,i){if(this.removeNodesInStages([t],e,i),this.insertOneNode(t,e,!0,i),t.setData(t.data),e.changedPath.isActive()){var o=t.parent;e.changedPath.addParentNode(o)}},e.prototype.removeNodes=function(t,e,i){this.removeNodesInStages(t,e,i),e.changedPath.isActive()&&t.forEach((function(t){return e.changedPath.addParentNode(t.parent)}))},e.prototype.removeNodesInStages=function(t,e,i){if(this.removeNodesFromParents(t,e,i),e.usingTreeData){this.postRemoveCreateFillerNodes(t,e);var o=t.map((function(t){return t.parent}));this.removeEmptyGroups(o,e)}},e.prototype.forEachParentGroup=function(t,e,i){for(var o=e;o&&o!==t.rootNode;)i(o),o=o.parent},e.prototype.removeNodesFromParents=function(t,e,i){var o=this,n=null==i,r=i||new Ce;t.forEach((function(t){o.removeFromParent(t,r),o.forEachParentGroup(e,t.parent,(function(e){r.removeFromAllLeafChildren(e,t)}))})),n&&r.flush()},e.prototype.postRemoveCreateFillerNodes=function(t,e){var i=this;t.forEach((function(t){if(t.hasChildren()){var o=i.getExistingPathForNode(t,e),n=i.findParentForNode(t,o,e);n.expanded=t.expanded,n.allLeafChildren=t.allLeafChildren,n.childrenAfterGroup=t.childrenAfterGroup,n.childrenMapped=t.childrenMapped,n.updateHasChildren(),n.childrenAfterGroup.forEach((function(t){return t.parent=n}))}}))},e.prototype.removeEmptyGroups=function(t,e){for(var i=this,o=!0,n=function(){o=!1;var n=new Ce;t.forEach((function(t){i.forEachParentGroup(e,t,(function(t){(function(t){var e=i.getChildrenMappedKey(t.key,t.rowGroupColumn),o=t.parent;return!(!o||!o.childrenMapped||!o.childrenMapped[e])&&!!t.isEmptyRowGroupNode()})(t)&&(o=!0,i.removeFromParent(t,n),t.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))}))})),n.flush()};o;)n()},e.prototype.removeFromParent=function(t,e){t.parent&&(e?e.removeFromChildrenAfterGroup(t.parent,t):(o._.removeFromArray(t.parent.childrenAfterGroup,t),t.parent.updateHasChildren()));var i=this.getChildrenMappedKey(t.key,t.rowGroupColumn);t.parent&&t.parent.childrenMapped&&(t.parent.childrenMapped[i]=void 0),t.setRowTop(null),t.setRowIndex(null)},e.prototype.addToParent=function(t,e){var i=this.getChildrenMappedKey(t.key,t.rowGroupColumn);e&&(null!=e.childrenMapped&&(e.childrenMapped[i]=t),e.childrenAfterGroup.push(t),e.updateHasChildren())},e.prototype.areGroupColsEqual=function(t,e){return null!=t&&null!=e&&t.pivotMode===e.pivotMode&&(o._.areEqual(t.groupedCols,e.groupedCols)&&o._.areEqual(t.keyCreators,e.keyCreators))},e.prototype.checkAllGroupDataAfterColsChanged=function(t){var e=this,i=function(o){o&&o.forEach((function(o){if(!(!t.usingTreeData&&!o.group)){var n={field:o.field,key:o.key,rowGroupColumn:o.rowGroupColumn,leafNode:o.allLeafChildren[0]};e.setGroupData(o,n,t),i(o.childrenAfterGroup)}}))};i(t.rootNode.childrenAfterGroup)},e.prototype.shotgunResetEverything=function(t,e){if(!this.noChangeInGroupingColumns(t,e)){this.selectionService.filterFromSelection((function(t){return t&&!t.group}));var i=t.rootNode,o=t.groupedCols;i.leafGroup=!t.usingTreeData&&0===o.length,i.childrenAfterGroup=[],i.childrenMapped={},i.updateHasChildren();var n=i.sibling;n&&(n.childrenAfterGroup=i.childrenAfterGroup,n.childrenMapped=i.childrenMapped),this.insertNodes(i.allLeafChildren,t,!1)}},e.prototype.noChangeInGroupingColumns=function(t,e){var i=!1,o=this.columnModel.getGroupDisplayColumns(),n=o?o.map((function(t){return t.getId()})).join("-"):"";return e&&(i=t.usingTreeData||this.areGroupColsEqual(t,this.oldGroupingDetails),this.oldGroupDisplayColIds!==n&&this.checkAllGroupDataAfterColsChanged(t)),this.oldGroupingDetails=t,this.oldGroupDisplayColIds=n,i},e.prototype.insertNodes=function(t,e,i){var o=this;t.forEach((function(t){o.insertOneNode(t,e,i),e.changedPath.isActive()&&e.changedPath.addParentNode(t.parent)}))},e.prototype.insertOneNode=function(t,e,i,o){var n=this.getGroupInfo(t,e),r=this.findParentForNode(t,n,e,o);r.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[r.data,t.data]),e.usingTreeData?this.swapGroupWithUserNode(r,t,i):(t.parent=r,t.level=n.length,r.childrenAfterGroup.push(t),r.updateHasChildren())},e.prototype.findParentForNode=function(t,e,i,o){var n=this,r=i.rootNode;return e.forEach((function(e,s){r=n.getOrCreateNextNode(r,e,s,i),(null===o||void 0===o?void 0:o.isRemoveFromAllLeafChildren(r,t))?null===o||void 0===o||o.preventRemoveFromAllLeafChildren(r,t):r.allLeafChildren.push(t)})),r},e.prototype.swapGroupWithUserNode=function(t,e,i){e.parent=t.parent,e.key=t.key,e.field=t.field,e.groupData=t.groupData,e.level=t.level,i||(e.expanded=t.expanded),e.leafGroup=t.leafGroup,e.rowGroupIndex=t.rowGroupIndex,e.allLeafChildren=t.allLeafChildren,e.childrenAfterGroup=t.childrenAfterGroup,e.childrenMapped=t.childrenMapped,e.sibling=t.sibling,e.updateHasChildren(),this.removeFromParent(t),e.childrenAfterGroup.forEach((function(t){return t.parent=e})),this.addToParent(e,t.parent)},e.prototype.getOrCreateNextNode=function(t,e,i,o){var n=this.getChildrenMappedKey(e.key,e.rowGroupColumn),r=t.childrenMapped?t.childrenMapped[n]:void 0;return r||(r=this.createGroup(e,t,i,o),this.addToParent(r,t)),r},e.prototype.createGroup=function(t,e,i,n){var r=new o.TUE(this.beans);return r.group=!0,r.field=t.field,r.rowGroupColumn=t.rowGroupColumn,this.setGroupData(r,t,n),r.key=t.key,r.id=this.createGroupId(r,e,n.usingTreeData,i),r.level=i,r.leafGroup=!n.usingTreeData&&i===n.groupedColCount-1,r.allLeafChildren=[],r.setAllChildrenCount(0),r.rowGroupIndex=n.usingTreeData?null:i,r.childrenAfterGroup=[],r.childrenMapped={},r.updateHasChildren(),r.parent=n.includeParents?e:null,this.setExpandedInitialValue(n,r),r},e.prototype.createGroupId=function(t,e,i,n){var r;return r=i?function(t,e,i){if(i<0)return null;var o=e?r(e,e.parent,i-1):null;return"".concat(null==o?"":o+"-").concat(i,"-").concat(t.key)}:function(t,e){if(!t.rowGroupColumn)return null;var i=e?r(e,e.parent,0):null;return"".concat(null==i?"":i+"-").concat(t.rowGroupColumn.getColId(),"-").concat(t.key)},o.TUE.ID_PREFIX_ROW_GROUP+r(t,e,n)},e.prototype.setGroupData=function(t,e,i){var o=this;t.groupData={},this.columnModel.getGroupDisplayColumns().forEach((function(n){if(i.usingTreeData)t.groupData[n.getColId()]=e.key;else{var r=t.rowGroupColumn;null!==r&&n.isRowGroupDisplayed(r.getId())&&(i.suppressGroupMaintainValueType?t.groupData[n.getColId()]=e.key:t.groupData[n.getColId()]=o.valueService.getValue(r,e.leafNode))}}))},e.prototype.getChildrenMappedKey=function(t,e){return e?e.getId()+"-"+t:t},e.prototype.setExpandedInitialValue=function(t,e){if(t.pivotMode&&e.leafGroup)e.expanded=!1;else{var i=t.isGroupOpenByDefault;if(i){var o={rowNode:e,field:e.field,key:e.key,level:e.level,rowGroupColumn:e.rowGroupColumn};e.expanded=1==i(o)}else{var n=t.expandByDefault;-1!==t.expandByDefault?e.expanded=e.level<n:e.expanded=!0}}},e.prototype.getGroupInfo=function(t,e){return e.usingTreeData?this.getGroupInfoFromCallback(t,e):this.getGroupInfoFromGroupColumns(t,e)},e.prototype.getGroupInfoFromCallback=function(t,e){var i=e.getDataPath?e.getDataPath(t.data):null;null!==i&&void 0!==i&&0!==i.length||o._.warnOnce("getDataPath() should not return an empty path for data ".concat(t.data));return i?i.map((function(t){return{key:t,field:null,rowGroupColumn:null}})):[]},e.prototype.getGroupInfoFromGroupColumns=function(t,e){var i=this,o=[];return e.groupedCols.forEach((function(n){var r=i.valueService.getKeyForNode(n,t),s=null!==r&&void 0!==r&&""!==r;if((e.pivotMode||!e.groupAllowUnbalanced)&&!s&&(r="",s=!0),s){var a={key:r,field:n.getColDef().field,rowGroupColumn:n,leafNode:t};o.push(a)}})),o},Ee([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Ee([(0,o.dsm)("selectableService")],e.prototype,"selectableService",void 0),Ee([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),Ee([(0,o.dsm)("beans")],e.prototype,"beans",void 0),Ee([(0,o.dsm)("selectionService")],e.prototype,"selectionService",void 0),e=Ee([(0,o.dR4)("groupStage")],e)}(o.XQb),Te=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Me=function(){return Me=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Me.apply(this,arguments)},ke=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Re=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Pe=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Ne=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return Te(e,t),i=e,e.prototype.init=function(){var t=this,e=function(){var e;return null!==(e=t.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==e?e:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",(function(){t.fieldSeparator=e()}));var i=function(){return t.gos.get("pivotDefaultExpanded")};this.pivotDefaultExpanded=i(),this.addManagedPropertyListener("pivotDefaultExpanded",(function(){t.pivotDefaultExpanded=i()}))},e.prototype.createPivotColumnDefs=function(t){var e=this.createPivotColumnsFromUniqueValues(t);var i=function t(e,i){return void 0===i&&(i=[]),e.forEach((function(e){void 0!==e.children?t(e.children,i):i.push(e)})),i}(e);return this.addRowGroupTotals(e,i),this.addExpandablePivotGroups(e,i),this.addPivotTotalsToGroups(e,i),{pivotColumnGroupDefs:e,pivotColumnDefs:i.map((function(t){return o._.cloneObject(t)}))}},e.prototype.createPivotColumnsFromUniqueValues=function(t){var e=this.columnModel.getPivotColumns(),i=e.length;return this.recursivelyBuildGroup(0,t,[],i,e)},e.prototype.recursivelyBuildGroup=function(t,e,i,n,r){var s=this,a=this.columnModel.getValueColumns();if(t>=n)return this.buildMeasureCols(i);var l=r[t].getColDef(),c=this.headerNameComparator.bind(this,l.pivotComparator);if(1===a.length&&this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&t===n-1){var d=[];return o._.iterateObject(e,(function(t){var e=Pe(Pe([],Re(i),!1),[t],!1),o=s.createColDef(a[0],t,e);o.columnGroupShow="open",d.push(o)})),d.sort(c),d}var u=[];return o._.iterateObject(e,(function(e,o){var a=-1===s.pivotDefaultExpanded||t<s.pivotDefaultExpanded,l=Pe(Pe([],Re(i),!1),[e],!1);u.push({children:s.recursivelyBuildGroup(t+1,o,l,n,r),headerName:e,pivotKeys:l,columnGroupShow:"open",openByDefault:a,groupId:s.generateColumnGroupId(l)})})),u.sort(c),u},e.prototype.buildMeasureCols=function(t){var e=this,i=this.columnModel.getValueColumns();return 0===i.length?[this.createColDef(null,"-",t)]:i.map((function(i){var o=e.columnModel.getDisplayNameForColumn(i,"header");return Me(Me({},e.createColDef(i,o,t)),{columnGroupShow:"open"})}))},e.prototype.addExpandablePivotGroups=function(t,e){var i=this;if(!this.gridOptionsService.get("suppressExpandablePivotGroups")&&!this.gridOptionsService.get("pivotColumnGroupTotals")){var o=function(t,e,n){var r=t;if(r.children){var s=new Map;r.children.forEach((function(t){o(t,e,s)}));var a=!r.children.some((function(t){return t.children}));i.columnModel.getValueColumns().forEach((function(o){var n=i.columnModel.getDisplayNameForColumn(o,"header"),r=i.createColDef(o,n,t.pivotKeys);(r.pivotTotalColumnIds=s.get(o.getColId()),r.columnGroupShow="closed",r.aggFunc=o.getAggFunc(),a)||(t.children.push(r),e.push(r))})),i.merge(n,s)}else{var l=t;if(!l.pivotValueColumn)return;var c=l.pivotValueColumn.getColId(),d=n.has(c)?n.get(c):[];d.push(l.colId),n.set(c,d)}};t.forEach((function(t){o(t,e,new Map)}))}},e.prototype.addPivotTotalsToGroups=function(t,e){var i=this;if(this.gridOptionsService.get("pivotColumnGroupTotals")){var o="after"===this.gridOptionsService.get("pivotColumnGroupTotals"),n=this.columnModel.getValueColumns(),r=n.map((function(t){return t.getAggFunc()}));if(r&&!(r.length<1)&&this.sameAggFuncs(r)){var s=n[0];t.forEach((function(t){i.recursivelyAddPivotTotal(t,e,s,o)}))}}},e.prototype.recursivelyAddPivotTotal=function(t,e,i,o){var n=this,r=t;if(!r.children){var s=t;return s.colId?[s.colId]:null}var a=[];if(r.children.forEach((function(t){var r=n.recursivelyAddPivotTotal(t,e,i,o);r&&(a=a.concat(r))})),r.children.length>1){var l=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),c=this.createColDef(i,l,t.pivotKeys,!0);c.pivotTotalColumnIds=a,c.aggFunc=i.getAggFunc();var d=t.children;o?d.push(c):d.unshift(c),e.push(c)}return a},e.prototype.addRowGroupTotals=function(t,e){var i=this;if(this.gridOptionsService.get("pivotRowTotals"))for(var o="after"===this.gridOptionsService.get("pivotRowTotals"),n=this.columnModel.getValueColumns(),r=o?n.slice():n.slice().reverse(),s=function(n){var s=r[n],l=[];t.forEach((function(t){l=l.concat(i.extractColIdsForValueColumn(t,s))}));var c=r.length>1||!a.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn");a.createRowGroupTotal(t,e,s,l,o,c)},a=this,l=0;l<r.length;l++)s(l)},e.prototype.extractColIdsForValueColumn=function(t,e){var i=this,o=t;if(!o.children){var n=o;return n.pivotValueColumn===e&&n.colId?[n.colId]:[]}var r=[];return o.children.forEach((function(t){i.extractColIdsForValueColumn(t,e);var o=i.extractColIdsForValueColumn(t,e);r=r.concat(o)})),r},e.prototype.createRowGroupTotal=function(t,e,o,n,r,s){var a;if(0===this.columnModel.getValueColumns().length)a=this.createColDef(null,"-",[]);else{var l=this.columnModel.getDisplayNameForColumn(o,"header");(a=this.createColDef(o,l,[])).pivotTotalColumnIds=n}a.colId=i.PIVOT_ROW_TOTAL_PREFIX+a.colId,e.push(a);var c=s?{children:[a],pivotKeys:[],groupId:"".concat(i.PIVOT_ROW_TOTAL_PREFIX,"_pivotGroup_").concat(o.getColId())}:a;r?t.push(c):t.unshift(c)},e.prototype.createColDef=function(t,e,i,o){void 0===o&&(o=!1);var n={};if(t){var r=t.getColDef();Object.assign(n,r),n.hide=!1}return n.headerName=e,n.colId=this.generateColumnId(i||[],t&&!o?t.getColId():""),n.field=n.colId,n.valueGetter=function(t){var e;return null===(e=t.data)||void 0===e?void 0:e[t.colDef.field]},n.pivotKeys=i,n.pivotValueColumn=t,!0===n.filter&&(n.filter="agNumberColumnFilter"),n},e.prototype.sameAggFuncs=function(t){if(1==t.length)return!0;for(var e=1;e<t.length;e++)if(t[e]!==t[0])return!1;return!0},e.prototype.headerNameComparator=function(t,e,i){return t?t(e.headerName,i.headerName):e.headerName&&!i.headerName?1:!e.headerName&&i.headerName?-1:e.headerName&&i.headerName?e.headerName<i.headerName?-1:e.headerName>i.headerName?1:0:0},e.prototype.merge=function(t,e){e.forEach((function(e,i,o){var n=t.has(i)?t.get(i):[],r=Pe(Pe([],Re(n),!1),Re(e),!1);t.set(i,r)}))},e.prototype.generateColumnGroupId=function(t){var e=this.columnModel.getPivotColumns().map((function(t){return t.getColId()}));return"pivotGroup_".concat(e.join("-"),"_").concat(t.join("-"))},e.prototype.generateColumnId=function(t,e){var i=this.columnModel.getPivotColumns().map((function(t){return t.getColId()}));return"pivot_".concat(i.join("-"),"_").concat(t.join("-"),"_").concat(e)},e.prototype.createColDefsFromFields=function(t){for(var e=this,i={},o=0;o<t.length;o++)for(var n=t[o].split(this.fieldSeparator),r=i,s=0;s<n.length;s++){var a=n[s];null==r[a]&&(r[a]={}),r=r[a]}var l=function(t,i,o,n){var r,s=[];for(var a in o){var c=o[a],d=l("".concat(t).concat(e.fieldSeparator).concat(a),a,c,n+1);s.push(d)}if(0===s.length){var u={colId:t,headerName:i,valueGetter:function(e){var i;return null===(i=e.data)||void 0===i?void 0:i[t]}},h=e.columnModel.getPrimaryColumn(i);return h&&(u.headerName=null!==(r=e.columnModel.getDisplayNameForColumn(h,"header"))&&void 0!==r?r:i,u.aggFunc=h.getAggFunc(),u.pivotValueColumn=h),u}return e.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&1===s.length&&"colId"in s[0]?(s[0].headerName=i,s[0]):{openByDefault:-1===e.pivotDefaultExpanded||n<e.pivotDefaultExpanded,groupId:t,headerName:i,children:s}},c=[];for(var d in i){var u=l(d,d,i[d],0);c.push(u)}return c},e.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",ke([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),ke([(0,o.dsm)("gridOptionsService")],e.prototype,"gos",void 0),ke([o.o7C],e.prototype,"init",null),e=i=ke([(0,o.dR4)("pivotColDefService")],e)}(o.XQb),Le=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_e=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ie=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.uniqueValues={},e}return Le(e,t),e.prototype.execute=function(t){var e=t.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(e):this.executePivotOff(e)},e.prototype.executePivotOff=function(t){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),t&&t.setInactive())},e.prototype.executePivotOn=function(t){var e=this.bucketUpRowNodes(t),i=this.setUniqueValues(e),o=this.columnModel.getValueColumns(),n=o.map((function(t){return"".concat(t.getId(),"-").concat(t.getColDef().headerName)})).join("#"),r=o.map((function(t){return t.getAggFunc().toString()})).join("#"),s=this.aggregationColumnsHashLastTime!==n,a=this.aggregationFuncsHashLastTime!==r;this.aggregationColumnsHashLastTime=n,this.aggregationFuncsHashLastTime=r;var l=this.columnModel.getRowGroupColumns().map((function(t){return t.getId()})).join("#"),c=l!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=l;var d=this.gridOptionsService.get("pivotRowTotals"),u=this.gridOptionsService.get("pivotColumnGroupTotals"),h=this.gridOptionsService.get("suppressExpandablePivotGroups"),p=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn"),f=d!==this.pivotRowTotalsLastTime||u!==this.pivotColumnGroupTotalsLastTime||h!==this.suppressExpandablePivotGroupsLastTime||p!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=d,this.pivotColumnGroupTotalsLastTime=u,this.suppressExpandablePivotGroupsLastTime=h,this.removePivotHeaderRowWhenSingleValueColumnLastTime=p,i||s||c||a||f){var g=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues),v=g.pivotColumnGroupDefs,y=g.pivotColumnDefs;this.pivotColumnDefs=y,this.columnModel.setSecondaryColumns(v,"rowModelUpdated"),t&&t.setInactive()}},e.prototype.setUniqueValues=function(t){return!!(JSON.stringify(t)!==JSON.stringify(this.uniqueValues))&&(this.uniqueValues=t,!0)},e.prototype.bucketUpRowNodes=function(t){var e=this,i={};t.forEachChangedNodeDepthFirst((function(t){t.leafGroup&&(t.childrenMapped=null)}));var o=function(t){var n;t.leafGroup?e.bucketRowNode(t,i):null===(n=t.childrenAfterFilter)||void 0===n||n.forEach(o)};return t.executeFromRootNode(o),i},e.prototype.bucketRowNode=function(t,e){var i=this.columnModel.getPivotColumns();0===i.length?t.childrenMapped=null:t.childrenMapped=this.bucketChildren(t.childrenAfterFilter,i,0,e),t.sibling&&(t.sibling.childrenMapped=t.childrenMapped)},e.prototype.bucketChildren=function(t,e,i,n){var r=this,s={},a=e[i];if(t.forEach((function(t){var e=r.valueService.getKeyForNode(a,t);o._.missing(e)&&(e=""),n[e]||(n[e]={}),s[e]||(s[e]=[]),s[e].push(t)})),i===e.length-1)return s;var l={};return o._.iterateObject(s,(function(t,o){l[t]=r.bucketChildren(o,e,i+1,n[t])})),l},e.prototype.getPivotColumnDefs=function(){return this.pivotColumnDefs},_e([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),_e([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),_e([(0,o.dsm)("pivotColDefService")],e.prototype,"pivotColDefService",void 0),e=_e([(0,o.dR4)("pivotStage")],e)}(o.XQb),Fe=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ge=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Be="undefined"===typeof BigInt?null:BigInt,Ve={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"},je=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.aggFuncsMap={},e.initialised=!1,e}var i;return Fe(e,t),i=e,e.prototype.init=function(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsService.get("aggFuncs")))},e.prototype.initialiseWithDefaultAggregations=function(){this.aggFuncsMap[i.AGG_SUM]=We,this.aggFuncsMap[i.AGG_FIRST]=ze,this.aggFuncsMap[i.AGG_LAST]=He,this.aggFuncsMap[i.AGG_MIN]=Ue,this.aggFuncsMap[i.AGG_MAX]=Ke,this.aggFuncsMap[i.AGG_COUNT]=Ye,this.aggFuncsMap[i.AGG_AVG]=Xe,this.initialised=!0},e.prototype.isAggFuncPossible=function(t,e){var i=this.getFuncNames(t),n=o._.includes(i,e),r=o._.exists(this.aggFuncsMap[e]);return n&&r},e.prototype.getDefaultFuncLabel=function(t){var e;return null!==(e=Ve[t])&&void 0!==e?e:t},e.prototype.getDefaultAggFunc=function(t){var e=t.getColDef().defaultAggFunc;if(o._.exists(e)&&this.isAggFuncPossible(t,e))return e;if(this.isAggFuncPossible(t,i.AGG_SUM))return i.AGG_SUM;var n=this.getFuncNames(t);return o._.existsAndNotEmpty(n)?n[0]:null},e.prototype.addAggFuncs=function(t){o._.iterateObject(t,this.addAggFunc.bind(this))},e.prototype.addAggFunc=function(t,e){this.init(),this.aggFuncsMap[t]=e},e.prototype.getAggFunc=function(t){return this.init(),this.aggFuncsMap[t]},e.prototype.getFuncNames=function(t){var e=t.getColDef().allowedAggFuncs;return null==e?Object.keys(this.aggFuncsMap).sort():e},e.prototype.clear=function(){this.aggFuncsMap={}},e.AGG_SUM="sum",e.AGG_FIRST="first",e.AGG_LAST="last",e.AGG_MIN="min",e.AGG_MAX="max",e.AGG_COUNT="count",e.AGG_AVG="avg",Ge([o.o7C],e.prototype,"init",null),e=i=Ge([(0,o.dR4)("aggFuncService")],e)}(o.XQb);function We(t){for(var e=t.values,i=null,o=0;o<e.length;o++){var n=e[o];"number"===typeof n?null===i?i=n:i+=Be?"number"===typeof i?n:Be(n):n:"bigint"===typeof n&&(i=null===i?n:("bigint"===typeof i?i:Be(i))+n)}return i}function ze(t){return t.values.length>0?t.values[0]:null}function He(t){return t.values.length>0?o._.last(t.values):null}function Ue(t){for(var e=t.values,i=null,o=0;o<e.length;o++){var n=e[o];"number"!==typeof n&&"bigint"!==typeof n||!(null===i||i>n)||(i=n)}return i}function Ke(t){for(var e=t.values,i=null,o=0;o<e.length;o++){var n=e[o];"number"!==typeof n&&"bigint"!==typeof n||!(null===i||i<n)||(i=n)}return i}function Ye(t){for(var e,i,o=t.values,n=0,r=0;r<o.length;r++){var s=o[r];n+=null!=s&&"number"===typeof s.value?s.value:1}var a=null===(i=null===(e=t.rowNode)||void 0===e?void 0:e.aggData)||void 0===i?void 0:i[t.column.getColId()];return a&&a.value===n?a:{value:n,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function Xe(t){for(var e,i,o,n=t.values,r=0,s=0,a=0;a<n.length;a++){var l=n[a],c=null;"number"===typeof l||"bigint"===typeof l?(c=l,s++):null==l||"number"!==typeof l.value&&"bigint"!==typeof l.value||"number"!==typeof l.count||(c=Be?l.value*("number"===typeof l.value?l.count:Be(l.count)):l.value*l.count,s+=l.count),"number"===typeof c?r+=Be?"number"===typeof r?c:Be(c):c:"bigint"===typeof c&&(r=("bigint"===typeof r?r:Be(r))+c)}var d=null;s>0&&(d=Be?r/("number"===typeof r?s:Be(s)):r/s);var u=null===(i=null===(e=t.rowNode)||void 0===e?void 0:e.aggData)||void 0===i?void 0:i[null===(o=t.column)||void 0===o?void 0:o.getColId()];return u&&u.count===s&&u.value===d?u:{count:s,value:d,toString:function(){return"number"===typeof this.value||"bigint"===typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}var $e=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qe=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ze=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.column=e,s.dragSourceDropTarget=i,s.ghost=o,s.dropZonePurpose=n,s.horizontal=r,s.popupShowing=!1,s}return $e(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE);var i=this.getGui(),n=this.gridOptionsService.get("functionsReadOnly");this.addElementClasses(i),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(o._.createIconNoSpan("columnDrag",this.gridOptionsService)),this.eButton.appendChild(o._.createIconNoSpan("cancel",this.gridOptionsService)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),this.ghost||n||this.addDragSource(),this.setupAria(),this.addManagedListener(this.eventService,o.VPZ.EVENT_SORT_CHANGED,(function(){t.setupAria()})),this.setupTooltip(),this.activateTabIndex();var r=function(){var e=t.isGroupingAndLocked();o._.setDisplayed(t.eButton,!e&&!t.gridOptionsService.get("functionsReadOnly")),t.eDragHandle.classList.toggle("ag-column-select-column-readonly",e),t.setupAria()};r(),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",(function(){return r()}))},e.prototype.setupAria=function(){var t=this.localeService.getLocaleTextFunc(),e=this.getColumnAndAggFuncName(),i=e.name,n=e.aggFuncName,r=t("ariaDropZoneColumnComponentAggFuncSeparator"," of "),s={asc:t("ariaDropZoneColumnComponentSortAscending","ascending"),desc:t("ariaDropZoneColumnComponentSortDescending","descending")},a=this.column.getSort(),l=this.gridOptionsService.get("rowGroupPanelSuppressSort"),c=[[n&&"".concat(n).concat(r),i,this.isGroupingZone()&&!l&&a&&", ".concat(s[a])].filter((function(t){return!!t})).join("")],d=this.gridOptionsService.get("functionsReadOnly");if(this.isAggregationZone()&&!d){var u=t("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");c.push(u)}if(this.isGroupingZone()&&this.column.isSortable()&&!l){var h=t("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");c.push(h)}if(!this.isGroupingAndLocked()){var p=t("ariaDropZoneColumnComponentDescription","Press DELETE to remove");c.push(p)}o._.setAriaLabel(this.getGui(),c.join(". "))},e.prototype.setupTooltip=function(){var t=this,e=function(){var e=t.column.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,e)},e.prototype.setupSort=function(){var t=this,e=this.column.isSortable(),i=this.isGroupingZone();if(e&&i&&!this.gridOptionsService.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);var n=function(e){e.preventDefault();var i="ctrl"===t.gridOptionsService.get("multiSortKey")?e.ctrlKey||e.metaKey:e.shiftKey;t.sortController.progressSort(t.column,i,"uiColumnSorted")};this.addGuiEventListener("click",n),this.addGuiEventListener("keydown",(function(e){e.key===o.DDm.ENTER&&t.isGroupingZone()&&n(e)}))}},e.prototype.addDragSource=function(){var t=this,e={type:o.qRA.ToolPanel,eElement:this.eDragHandle,getDefaultIconName:function(){return o.WO_.ICON_HIDE},getDragItem:function(){return t.createDragItem()},dragItemName:this.displayName,dragSourceDropTarget:this.dragSourceDropTarget};this.dragAndDropService.addDragSource(e,!0),this.addDestroyFunc((function(){return t.dragAndDropService.removeDragSource(e)}))},e.prototype.createDragItem=function(){var t={};return t[this.column.getId()]=this.column.isVisible(),{columns:[this.column],visibleState:t}},e.prototype.setupComponents=function(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsService.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))},e.prototype.isGroupingAndLocked=function(){return this.isGroupingZone()&&this.columnModel.isColumnGroupingLocked(this.column)},e.prototype.setupRemove=function(){var t=this;o._.setDisplayed(this.eButton,!this.isGroupingAndLocked()&&!this.gridOptionsService.get("functionsReadOnly"));var i={type:e.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",(function(e){var n=e.key===o.DDm.ENTER;e.key===o.DDm.DELETE&&(t.isGroupingAndLocked()||(e.preventDefault(),t.dispatchEvent(i))),n&&t.isAggregationZone()&&!t.gridOptionsService.get("functionsReadOnly")&&(e.preventDefault(),t.onShowAggFuncSelection())})),this.addManagedListener(this.eButton,"click",(function(e){t.dispatchEvent(i),e.stopPropagation()}));var n=new o.MVO(this.eButton);this.addManagedListener(n,o.MVO.EVENT_TAP,(function(){t.dispatchEvent(i)})),this.addDestroyFunc(n.destroy.bind(n))},e.prototype.getColumnAndAggFuncName=function(){var t=this.displayName,e="";if(this.isAggregationZone()){var i=this.column.getAggFunc(),o="string"===typeof i?i:"agg";e=this.localeService.getLocaleTextFunc()(o,o)}return{name:t,aggFuncName:e}},e.prototype.setTextValue=function(){var t=this.getColumnAndAggFuncName(),e=t.name,i=t.aggFuncName,n=this.isAggregationZone()?"".concat(i,"(").concat(e,")"):e,r=o._.escapeString(n);this.eText.innerHTML=r},e.prototype.onShowAggFuncSelection=function(){var t=this;if(!this.popupShowing){this.popupShowing=!0;var e=new o.wjn({cssIdentifier:"select-agg-func"}),i=this.aggFuncService.getFuncNames(this.column),n=this.getGui(),r=e.getGui();e.setModel({getRow:function(t){return i[t]},getRowCount:function(){return i.length}}),this.getContext().createBean(e);var s=o._.loadTemplate('<div class="ag-select-agg-func-popup"></div>');s.style.top="0px",s.style.left="0px",s.appendChild(r),s.style.width="".concat(n.clientWidth,"px");var a=this.addManagedListener(s,"focusout",(function(t){!s.contains(t.relatedTarget)&&c&&c.hideFunc()})),l=this.localeService.getLocaleTextFunc(),c=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:function(i){t.destroyBean(e),t.popupShowing=!1,"Escape"===(null===i||void 0===i?void 0:i.key)&&n.focus(),a&&a()},ariaLabel:l("ariaLabelAggregationFunction","Aggregation Function")});c&&e.setComponentCreator(this.createAggSelect.bind(this,c.hideFunc)),e.addGuiEventListener("keydown",(function(t){if(t.key===o.DDm.ENTER||t.key===o.DDm.SPACE){var i=e.getLastFocusedRow();if(null==i)return;var n=e.getComponentAt(i);n&&n.selectItem()}})),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:n,ePopup:s,keepWithinBounds:!0,column:this.column,position:"under"}),e.refresh();var d=i.findIndex((function(e){return e===t.column.getAggFunc()}));-1===d&&(d=0),e.focusRow(d)}},e.prototype.createAggSelect=function(t,e){var i=this,n=this.localeService.getLocaleTextFunc(),r=e.toString(),s=n(r,r);return new Je((function(){if(t(),i.gridOptionsService.get("functionsPassive")){var n={type:o.sVA.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[i.column],aggFunc:e};i.eventService.dispatchEvent(n)}else i.columnModel.setColumnAggFunc(i.column,e,"toolPanelDragAndDrop")}),s)},e.prototype.addElementClasses=function(t,e){e=e?"-".concat(e):"";var i=this.horizontal?"horizontal":"vertical";t.classList.add("ag-column-drop-cell".concat(e),"ag-column-drop-".concat(i,"-cell").concat(e))},e.prototype.isAggregationZone=function(){return"aggregation"===this.dropZonePurpose},e.prototype.isGroupingZone=function(){return"rowGroup"===this.dropZonePurpose},e.EVENT_COLUMN_REMOVE="columnRemove",e.TEMPLATE='<span role="option">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',qe([(0,o.dsm)("dragAndDropService")],e.prototype,"dragAndDropService",void 0),qe([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),qe([(0,o.dsm)("popupService")],e.prototype,"popupService",void 0),qe([(0,o.Xx1)("aggFuncService")],e.prototype,"aggFuncService",void 0),qe([(0,o.dsm)("sortController")],e.prototype,"sortController",void 0),qe([(0,o.PIB)("eText")],e.prototype,"eText",void 0),qe([(0,o.PIB)("eDragHandle")],e.prototype,"eDragHandle",void 0),qe([(0,o.PIB)("eButton")],e.prototype,"eButton",void 0),qe([(0,o.PIB)("eSortIndicator")],e.prototype,"eSortIndicator",void 0),qe([o.o7C],e.prototype,"init",null),e}(o.uAl),Je=function(t){function e(e,i){var o=t.call(this,'<div class="ag-select-agg-func-item"/>')||this;return o.selectItem=e,o.getGui().innerText=i,o.addGuiEventListener("click",o.selectItem),o}return $e(e,t),e}(o.uAl),Qe=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ti=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ei=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},ii=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},oi=function(t){function e(i,n){var r=t.call(this,'<div class="ag-unselectable" role="presentation"></div>')||this;return r.horizontal=i,r.dropZonePurpose=n,r.state=e.STATE_NOT_DRAGGING,r.guiDestroyFunctions=[],r.childColumnComponents=[],r.resizeEnabled=!1,r.addElementClasses(r.getGui()),r.eColumnDropList=document.createElement("div"),r.addElementClasses(r.eColumnDropList,"list"),o._.setAriaRole(r.eColumnDropList,"listbox"),r}return Qe(e,t),e.prototype.isHorizontal=function(){return this.horizontal},e.prototype.toggleResizable=function(t){this.positionableFeature.setResizable(!!t&&{bottom:!0}),this.resizeEnabled=t},e.prototype.setBeans=function(t){this.beans=t},e.prototype.destroy=function(){this.destroyGui(),t.prototype.destroy.call(this)},e.prototype.destroyGui=function(){this.guiDestroyFunctions.forEach((function(t){return t()})),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,o._.clearElement(this.getGui()),o._.clearElement(this.eColumnDropList)},e.prototype.init=function(t){this.params=t,this.createManagedBean(new o.G21(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new o.qyQ(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),o._.setAriaLabel(this.eColumnDropList,this.getAriaLabel())},e.prototype.handleKeyDown=function(t){var e=!this.horizontal,i=t.key===o.DDm.DOWN,n=t.key===o.DDm.UP;if(!e){var r=this.gridOptionsService.get("enableRtl");i=!r&&t.key===o.DDm.RIGHT||r&&t.key===o.DDm.LEFT,n=!r&&t.key===o.DDm.LEFT||r&&t.key===o.DDm.RIGHT}if(i||n){var s=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,n);s&&(t.preventDefault(),s.focus())}},e.prototype.addElementClasses=function(t,e){e=e?"-".concat(e):"";var i=this.horizontal?"horizontal":"vertical";t.classList.add("ag-column-drop".concat(e),"ag-column-drop-".concat(i).concat(e))},e.prototype.setupDropTarget=function(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)},e.prototype.isInterestedIn=function(t){return t===o.qRA.HeaderCell||t===o.qRA.ToolPanel},e.prototype.minimumAllowedNewInsertIndex=function(){var t=this.gridOptionsService.get("groupLockGroupColumns"),e=this.colModel.getRowGroupColumns().length;return-1===t?e:Math.min(t,e)},e.prototype.checkInsertIndex=function(t){var e=this.getNewInsertIndex(t);if(e<0)return!1;var i=this.minimumAllowedNewInsertIndex(),o=Math.max(i,e),n=o!==this.insertIndex;return n&&(this.insertIndex=o),n},e.prototype.getNewInsertIndex=function(t){var e=this,i=t.event,o=this.horizontal?i.clientX:i.clientY,n=this.childColumnComponents.map((function(t){return t.getGui().getBoundingClientRect()})),r=n.findIndex((function(t){return e.horizontal?t.right>o&&t.left<o:t.top<o&&t.bottom>o}));if(-1===r){var s=this.beans.gridOptionsService.get("enableRtl");return n.every((function(t){return o>(e.horizontal?t.right:t.bottom)}))?s&&this.horizontal?0:this.childColumnComponents.length:n.every((function(t){return o<(e.horizontal?t.left:t.top)}))?s&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=r?r+1:r},e.prototype.checkDragStartedBySelf=function(t){this.state===e.STATE_NOT_DRAGGING&&(this.state=e.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=t.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(t),this.refreshGui())},e.prototype.onDragging=function(t){this.checkDragStartedBySelf(t),this.checkInsertIndex(t)&&this.refreshGui()},e.prototype.onDragEnter=function(t){var i=t.dragSource.getDragItem().columns||[];this.state=e.STATE_NEW_COLUMNS_IN;var o=i.filter(this.isColumnDroppable.bind(this));if(o.length>0){if(this.isRowGroupPanel()&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&!t.fromNudge){var n=t.dragSource.getDragItem().columns;this.setColumnsVisible(n,!1,"uiColumnDragged")}this.potentialDndColumns=o,this.checkInsertIndex(t),this.refreshGui()}},e.prototype.setColumnsVisible=function(t,e,i){if(void 0===i&&(i="api"),t){var o=t.filter((function(t){return!t.getColDef().lockVisible}));this.colModel.setColumnsVisible(o,e,i)}},e.prototype.isPotentialDndColumns=function(){return o._.existsAndNotEmpty(this.potentialDndColumns)},e.prototype.isRowGroupPanel=function(){return"rowGroup"===this.dropZonePurpose},e.prototype.onDragLeave=function(t){if(this.state===e.STATE_REARRANGE_COLUMNS){var i=t.dragSource.getDragItem().columns||[];this.removeColumns(i)}if(this.isPotentialDndColumns()){if(this.isRowGroupPanel()&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&!t.fromNudge){var o=t.dragSource.getDragItem();this.setColumnsVisible(o.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=e.STATE_NOT_DRAGGING},e.prototype.onDragStop=function(){if(this.isPotentialDndColumns()){var t=!1;this.state===e.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),t=!0):t=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],this.beans.gridOptionsService.get("functionsPassive")&&t||this.refreshGui()}this.state=e.STATE_NOT_DRAGGING},e.prototype.removeColumns=function(t){var e=this.getExistingColumns().filter((function(e){return!o._.includes(t,e)}));this.updateColumns(e)},e.prototype.addColumns=function(t){if(t){var e=this.getExistingColumns().slice(),i=t.filter((function(t){return e.indexOf(t)<0}));o._.insertArrayIntoArray(e,i,this.insertIndex),this.updateColumns(e)}},e.prototype.rearrangeColumns=function(t){var e=this.getNonGhostColumns().slice();return o._.insertArrayIntoArray(e,t,this.insertIndex),!o._.areEqual(e,this.getExistingColumns())&&(this.updateColumns(e),!0)},e.prototype.refreshGui=function(){var t=this.eColumnDropList.scrollTop,e=this.resizeEnabled,i=this.getFocusedItem(),o=this.focusService.findNextFocusableElement();o||(o=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=t),e&&this.toggleResizable(e),this.focusService.isKeyboardMode()&&this.restoreFocus(i,o)},e.prototype.getFocusedItem=function(){var t=this.getGui(),e=this.gridOptionsService.getDocument().activeElement;return t.contains(e)?Array.from(t.querySelectorAll(".ag-column-drop-cell")).indexOf(e):-1},e.prototype.restoreFocus=function(t,e){var i=this.getGui(),o=Array.from(i.querySelectorAll(".ag-column-drop-cell"));if(-1!==t){0===o.length&&e.focus();var n=o[Math.min(o.length-1,t)];n&&n.focus()}},e.prototype.getNonGhostColumns=function(){var t=this,e=this.getExistingColumns();return this.isPotentialDndColumns()?e.filter((function(e){return!o._.includes(t.potentialDndColumns,e)})):e},e.prototype.addColumnsToGui=function(){var t=this,e=this.getNonGhostColumns().map((function(e){return t.createColumnComponent(e,!1)}));if(this.isPotentialDndColumns()){var i=this.potentialDndColumns.map((function(e){return t.createColumnComponent(e,!0)}));this.insertIndex>=e.length?e.push.apply(e,ii([],ei(i),!1)):e.splice.apply(e,ii([this.insertIndex,0],ei(i),!1))}this.appendChild(this.eColumnDropList),e.forEach((function(e,i){i>0&&t.addArrow(t.eColumnDropList),t.eColumnDropList.appendChild(e.getGui())})),this.addAriaLabelsToComponents()},e.prototype.addAriaLabelsToComponents=function(){var t=this;this.childColumnComponents.forEach((function(e,i){var n=e.getGui();o._.setAriaPosInSet(n,i+1),o._.setAriaSetSize(n,t.childColumnComponents.length)}))},e.prototype.createColumnComponent=function(t,e){var i=this,o=new Ze(t,this.dropTarget,e,this.dropZonePurpose,this.horizontal);return o.addEventListener(Ze.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[t])),this.beans.context.createBean(o),this.guiDestroyFunctions.push((function(){return i.destroyBean(o)})),e||this.childColumnComponents.push(o),o},e.prototype.addIconAndTitleToGui=function(){var t=this.params.icon,e=document.createElement("div");if(o._.setAriaHidden(e,!0),this.addElementClasses(e,"title-bar"),this.addElementClasses(t,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),e.appendChild(t),!this.horizontal){var i=document.createElement("span");this.addElementClasses(i,"title"),i.innerHTML=this.params.title,e.appendChild(i)}this.appendChild(e)},e.prototype.isExistingColumnsEmpty=function(){return 0===this.getExistingColumns().length},e.prototype.addEmptyMessageToGui=function(){if(this.isExistingColumnsEmpty()&&!this.isPotentialDndColumns()){var t=document.createElement("span");t.innerHTML=this.params.emptyMessage,this.addElementClasses(t,"empty-message"),this.eColumnDropList.appendChild(t)}},e.prototype.addArrow=function(t){if(this.horizontal){var e=this.beans.gridOptionsService.get("enableRtl"),i=o._.createIconNoSpan(e?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(i,"cell-separator"),t.appendChild(i)}},e.STATE_NOT_DRAGGING="notDragging",e.STATE_NEW_COLUMNS_IN="newColumnsIn",e.STATE_REARRANGE_COLUMNS="rearrangeColumns",ti([(0,o.dsm)("columnModel")],e.prototype,"colModel",void 0),ti([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),e}(o.uAl),ni=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ri=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},si=function(t){function e(e){return t.call(this,e,"rowGroup")||this}return ni(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),i=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),n=e("groups","Row Groups");t.prototype.init.call(this,{dragAndDropIcon:o.WO_.ICON_GROUP,icon:o._.createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:i,title:n}),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="rowGroupColumnsList",e},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.get("functionsReadOnly")||!t.isPrimary())&&(t.isAllowRowGroup()&&!t.isRowGroupActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.get("functionsPassive")){var e={type:o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setRowGroupColumns(t,"toolPanelUi")},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?o.WO_.ICON_GROUP:o.WO_.ICON_NOT_ALLOWED},e.prototype.getExistingColumns=function(){return this.columnModel.getRowGroupColumns()},ri([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),ri([(0,o.dsm)("loggerFactory")],e.prototype,"loggerFactory",void 0),ri([(0,o.dsm)("dragAndDropService")],e.prototype,"dragAndDropService",void 0),ri([o.o7C],e.prototype,"passBeansUp",null),e}(oi),ai=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),li=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ci=function(t){function e(e){return t.call(this,e,"pivot")||this}return ai(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),i=e("pivotColumnsEmptyMessage","Drag here to set column labels"),n=e("pivots","Column Labels");t.prototype.init.call(this,{dragAndDropIcon:o.WO_.ICON_GROUP,icon:o._.createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:i,title:n}),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="pivotColumnsList",e},e.prototype.refresh=function(){this.checkVisibility(),this.refreshGui()},e.prototype.checkVisibility=function(){var t=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(t);break;case"onlyWhenPivoting":var e=this.columnModel.isPivotActive();this.setDisplayed(t&&e);break;default:this.setDisplayed(!1)}else this.setDisplayed(t)},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.get("functionsReadOnly")||!t.isPrimary())&&(t.isAllowPivot()&&!t.isPivotActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.get("functionsPassive")){var e={type:o.sVA.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setPivotColumns(t,"toolPanelUi")},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?o.WO_.ICON_PIVOT:o.WO_.ICON_NOT_ALLOWED},e.prototype.getExistingColumns=function(){return this.columnModel.getPivotColumns()},li([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),li([(0,o.dsm)("loggerFactory")],e.prototype,"loggerFactory",void 0),li([(0,o.dsm)("dragAndDropService")],e.prototype,"dragAndDropService",void 0),li([o.o7C],e.prototype,"passBeansUp",null),e}(oi),di=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ui=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},hi=function(t){function e(){return t.call(this)||this}return di(e,t),e.prototype.postConstruct=function(){var t=this;this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.onRowGroupChanged()})),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,(function(){return t.onRowGroupChanged()})),this.addManagedPropertyListener("rowGroupPanelShow",(function(){return t.onRowGroupChanged()})),this.addManagedPropertyListener("pivotPanelShow",(function(){return t.onPivotPanelShow()})),this.onRowGroupChanged()},e.prototype.createNorthPanel=function(){var t=this,e=document.createElement("div");return e.classList.add("ag-column-drop-wrapper"),o._.setAriaRole(e,"presentation"),this.rowGroupComp=new si(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new ci(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,o.uAl.EVENT_DISPLAYED_CHANGED,(function(){return t.onDropPanelVisible()})),this.addManagedListener(this.pivotComp,o.uAl.EVENT_DISPLAYED_CHANGED,(function(){return t.onDropPanelVisible()})),this.onDropPanelVisible(),e},e.prototype.onDropPanelVisible=function(){var t=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",t)},e.prototype.onRowGroupChanged=function(){if(this.rowGroupComp){var t=this.gridOptionsService.get("rowGroupPanelShow");if("always"===t)this.rowGroupComp.setDisplayed(!0);else if("onlyWhenGrouping"===t){var e=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(e)}else this.rowGroupComp.setDisplayed(!1)}},e.prototype.onPivotPanelShow=function(){if(this.pivotComp){var t=this.gridOptionsService.get("pivotPanelShow");if("always"===t)this.pivotComp.setDisplayed(!0);else if("onlyWhenPivoting"===t){var e=this.columnModel.isPivotActive();this.pivotComp.setDisplayed(e)}else this.pivotComp.setDisplayed(!1)}},ui([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),ui([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),pi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),fi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},gi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pi(e,t),e.prototype.execute=function(t){var e=this,i=this.columnModel.isPivotMode(),o=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),n=this.gridOptionsService.getGroupAggFiltering()||(i?function(t){return t.node.leafGroup}:function(t){return!t.node.group}),r=t.changedPath,s=function(t,i){void 0===i&&(i=!1),t.childrenAfterFilter&&(t.childrenAfterAggFilter=t.childrenAfterFilter,i&&t.childrenAfterAggFilter.forEach((function(t){return s(t,i)})),e.setAllChildrenCount(t)),t.sibling&&(t.sibling.childrenAfterAggFilter=t.childrenAfterAggFilter)};r.forEachChangedNodeDepthFirst(o?function(t){var i;t.childrenAfterAggFilter=(null===(i=t.childrenAfterFilter)||void 0===i?void 0:i.filter((function(t){var i;if(n({node:t})&&e.filterManager.doesRowPassAggregateFilters({rowNode:t}))return s(t,!0),!0;return null===(i=t.childrenAfterAggFilter)||void 0===i?void 0:i.length})))||null,e.setAllChildrenCount(t),t.sibling&&(t.sibling.childrenAfterAggFilter=t.childrenAfterAggFilter)}:s,!0)},e.prototype.setAllChildrenCountTreeData=function(t){var e=0;t.childrenAfterAggFilter.forEach((function(t){e++,e+=t.allChildrenCount})),t.setAllChildrenCount(e)},e.prototype.setAllChildrenCountGridGrouping=function(t){var e=0;t.childrenAfterAggFilter.forEach((function(t){t.group?e+=t.allChildrenCount:e++})),t.setAllChildrenCount(e)},e.prototype.setAllChildrenCount=function(t){t.hasChildren()?this.gridOptionsService.get("treeData")?this.setAllChildrenCountTreeData(t):this.setAllChildrenCountGridGrouping(t):t.setAllChildrenCount(null)},fi([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),fi([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),e=fi([(0,o.dR4)("filterAggregatesStage")],e)}(o.XQb),vi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),yi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mi=function(t){function e(){return t.call(this,'\n            <div class="ag-group-filter">\n                <div ref="eGroupField"></div>\n                <div ref="eUnderlyingFilter"></div>\n            </div>\n        ')||this}return vi(e,t),e.prototype.postConstruct=function(){this.initialiseTabGuard({})},e.prototype.init=function(t){var e=this;return this.params=t,this.validateParams(),this.updateGroups().then((function(){e.addManagedListener(e.eventService,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.onColumnRowGroupChanged()}))}))},e.prototype.validateParams=function(){var t=this.params.colDef;t.field&&o._.warnOnce('Group Column Filter does not work with the colDef property "field". This property will be ignored.'),t.filterValueGetter&&o._.warnOnce('Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.'),t.filterParams&&o._.warnOnce('Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')},e.prototype.updateGroups=function(){var t=this.updateGroupField();return this.getUnderlyingFilters(t)},e.prototype.getSourceColumns=function(){if(this.groupColumn=this.params.column,this.gridOptionsService.get("treeData"))return o._.warnOnce("Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter."),[];var t=this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn);return t||(o._.warnOnce("Group Column Filter only works on group columns. Please use a different filter."),[])},e.prototype.updateGroupField=function(){var t=this;o._.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);var e=this.getSourceColumns(),i=e.filter((function(t){return t.isFilterAllowed()}));return i.length?(1===e.length?(this.selectedColumn=i[0],o._.setDisplayed(this.eGroupField,!1)):(this.selectedColumn&&i.some((function(e){return e.getId()===t.selectedColumn.getId()}))||(this.selectedColumn=i[0]),this.createGroupFieldSelectElement(i),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(o._.loadTemplate('<div class="ag-filter-separator"></div>')),o._.setDisplayed(this.eGroupField,!0)),i):(this.selectedColumn=void 0,o._.setDisplayed(this.eGroupField,!1),null)},e.prototype.createGroupFieldSelectElement=function(t){var e=this;this.eGroupFieldSelect=this.createManagedBean(new o.Ju4);var i=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(i("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(t.map((function(t){var i;return{value:t.getId(),text:null!==(i=e.columnModel.getDisplayNameForColumn(t,"groupFilter",!1))&&void 0!==i?i:void 0}}))),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange((function(t){return e.updateSelectedColumn(t)})),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),1===t.length&&this.eGroupFieldSelect.setDisabled(!0)},e.prototype.getUnderlyingFilters=function(t){var e=this;if(!t)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),o.oY$.resolve();var i=[],n=[];return t.forEach((function(t){var o=e.filterManager.getOrCreateFilterWrapper(t,"COLUMN_MENU");(null===o||void 0===o?void 0:o.filterPromise)&&i.push(o.filterPromise.then((function(i){return i&&n.push({filter:i,column:t}),t.getId()===e.selectedColumn.getId()&&(e.selectedFilter=null!==i&&void 0!==i?i:void 0),i})))})),o.oY$.all(i).then((function(){e.filterColumnPairs=n,e.groupColumn.setFilterActive(e.isFilterActive(),"columnRowGroupChanged")}))},e.prototype.addUnderlyingFilterElement=function(){var t=this;if(o._.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return o.oY$.resolve();var e=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");return e?e.guiPromise.then((function(i){var o;t.eUnderlyingFilter.appendChild(i),null===(o=e.filterPromise)||void 0===o||o.then((function(e){var i,o;null===(i=null===e||void 0===e?void 0:e.afterGuiAttached)||void 0===i||i.call(e,t.afterGuiAttachedParams),(null===(o=t.afterGuiAttachedParams)||void 0===o?void 0:o.suppressFocus)||!t.eGroupFieldSelect||t.eGroupFieldSelect.isDisabled()||t.eGroupFieldSelect.getFocusableElement().focus()}))})):o.oY$.resolve()},e.prototype.updateSelectedColumn=function(t){var i,o;if(t){null===(o=null===(i=this.selectedFilter)||void 0===i?void 0:i.afterGuiDetached)||void 0===o||o.call(i);var n=this.getFilterColumnPair(t);this.selectedColumn=null===n||void 0===n?void 0:n.column,this.selectedFilter=null===n||void 0===n?void 0:n.filter,this.dispatchEvent({type:e.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}},e.prototype.isFilterActive=function(){var t;return!!(null===(t=this.filterColumnPairs)||void 0===t?void 0:t.some((function(t){return t.filter.isFilterActive()})))},e.prototype.doesFilterPass=function(){return!0},e.prototype.getModel=function(){return null},e.prototype.setModel=function(){return o.oY$.resolve()},e.prototype.afterGuiAttached=function(t){this.afterGuiAttachedParams=t,this.addUnderlyingFilterElement()},e.prototype.afterGuiDetached=function(){var t,e;o._.clearElement(this.eUnderlyingFilter),null===(e=null===(t=this.selectedFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===e||e.call(t)},e.prototype.onColumnRowGroupChanged=function(){var t=this;this.updateGroups().then((function(){t.dispatchEvent({type:e.EVENT_COLUMN_ROW_GROUP_CHANGED}),t.eventService.dispatchEvent({type:"filterAllowedUpdated"})}))},e.prototype.getFilterColumnPair=function(t){var e;if(t)return null===(e=this.filterColumnPairs)||void 0===e?void 0:e.find((function(e){return e.column.getId()===t}))},e.prototype.getSelectedFilter=function(){return this.selectedFilter},e.prototype.getSelectedColumn=function(){return this.selectedColumn},e.prototype.isFilterAllowed=function(){return!!this.selectedColumn},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",e.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",yi([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),yi([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),yi([(0,o.PIB)("eGroupField")],e.prototype,"eGroupField",void 0),yi([(0,o.PIB)("eUnderlyingFilter")],e.prototype,"eUnderlyingFilter",void 0),yi([o.o7C],e.prototype,"postConstruct",null),e}(o.aJZ),bi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Si=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},xi=function(t){function e(){var e=t.call(this,'\n            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        ')||this;return e.haveAddedColumnListeners=!1,e}return bi(e,t),e.prototype.init=function(t){var e=this;this.params=t;var i="multipleColumns"===this.gridOptionsService.get("groupDisplayType");return new o.oY$((function(t){e.params.parentFilterInstance((function(o){e.parentFilterInstance=o,i?e.setupUnderlyingFloatingFilterElement().then((function(){return t()})):(e.setupReadOnlyFloatingFilterElement(),t())}))})).then((function(){e.addManagedListener(e.parentFilterInstance,mi.EVENT_SELECTED_COLUMN_CHANGED,(function(){return e.onSelectedColumnChanged()})),e.addManagedListener(e.parentFilterInstance,mi.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return e.onColumnRowGroupChanged()}))}))},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams()},e.prototype.setParams=function(){var t,e=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),i=this.localeService.getLocaleTextFunc();null===(t=this.eFloatingFilterText)||void 0===t||t.setInputAriaLabel("".concat(e," ").concat(i("ariaFilterInput","Filter Input")))},e.prototype.setupReadOnlyFloatingFilterElement=function(){var t=this;this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new o.stt),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(function(){return t.params.showParentFilter()})),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())},e.prototype.setupUnderlyingFloatingFilterElement=function(){var t=this;this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,o._.clearElement(this.eFloatingFilter);var e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){var i=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(i)return this.compDetails=i,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(e,o.VPZ.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(e,o.VPZ.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),i.newAgStackInstance().then((function(e){var i,o;t.underlyingFloatingFilter=e,null===(i=t.underlyingFloatingFilter)||void 0===i||i.onParentModelChanged(null===(o=t.parentFilterInstance.getSelectedFilter())||void 0===o?void 0:o.getModel()),t.appendChild(e.getGui()),t.showingUnderlyingFloatingFilter=!0}))}return this.setupReadOnlyFloatingFilterElement(),o.oY$.resolve()},e.prototype.onColumnVisibleChanged=function(){this.setupUnderlyingFloatingFilterElement()},e.prototype.onColDefChanged=function(t){var e,i;if(t.column){var o=this.filterManager.getFloatingFilterCompDetails(t.column,this.params.showParentFilter);o&&(null===(i=null===(e=this.underlyingFloatingFilter)||void 0===e?void 0:e.onParamsUpdated)||void 0===i||i.call(e,o.params))}},e.prototype.onParentModelChanged=function(t,e){var i,o;this.showingUnderlyingFloatingFilter?null===(i=this.underlyingFloatingFilter)||void 0===i||i.onParentModelChanged(null===(o=this.parentFilterInstance.getSelectedFilter())||void 0===o?void 0:o.getModel(),e):this.updateDisplayedValue()},e.prototype.updateDisplayedValue=function(){if(this.parentFilterInstance&&this.eFloatingFilterText){var t=this.parentFilterInstance.getSelectedFilter();if(!t)return this.eFloatingFilterText.setValue(""),void this.eFloatingFilterText.setDisplayed(!1);if(this.eFloatingFilterText.setDisplayed(!0),t.getModelAsString){var e=t.getModel();this.eFloatingFilterText.setValue(null==e?"":t.getModelAsString(e))}else this.eFloatingFilterText.setValue("")}},e.prototype.onSelectedColumnChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},e.prototype.onColumnRowGroupChanged=function(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},Si([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Si([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),Si([(0,o.PIB)("eFloatingFilter")],e.prototype,"eFloatingFilter",void 0),e}(o.uAl),Ci={version:"31.0.0",moduleName:o.zsj.RowGroupingModule,beans:[xe,gi,Ae,Ne,Ie,je],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:hi}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:mi},{componentName:"agGroupColumnFloatingFilter",componentClass:xi}],dependantModules:[g]},wi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ei=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Oi=function(t){function e(e){return t.call(this,e,"aggregation")||this}return wi(e,t),e.prototype.passBeansUp=function(){t.prototype.setBeans.call(this,{gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});var e=this.localeService.getLocaleTextFunc(),i=e("valueColumnsEmptyMessage","Drag here to aggregate"),n=e("values","Values");t.prototype.init.call(this,{dragAndDropIcon:o.WO_.ICON_AGGREGATE,icon:o._.createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:i,title:n}),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))},e.prototype.getAriaLabel=function(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="valueColumnsList",e},e.prototype.getIconName=function(){return this.isPotentialDndColumns()?o.WO_.ICON_AGGREGATE:o.WO_.ICON_NOT_ALLOWED},e.prototype.isColumnDroppable=function(t){return!(this.gridOptionsService.get("functionsReadOnly")||!t.isPrimary())&&(t.isAllowValue()&&!t.isValueActive())},e.prototype.updateColumns=function(t){if(this.gridOptionsService.get("functionsPassive")){var e={type:o.sVA.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:t};this.eventService.dispatchEvent(e)}else this.columnModel.setValueColumns(t,"toolPanelUi")},e.prototype.getExistingColumns=function(){return this.columnModel.getValueColumns()},Ei([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Ei([(0,o.dsm)("loggerFactory")],e.prototype,"loggerFactory",void 0),Ei([(0,o.dsm)("dragAndDropService")],e.prototype,"dragAndDropService",void 0),Ei([o.o7C],e.prototype,"passBeansUp",null),e}(oi),Di=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ai=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ti=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return Di(e,t),e.prototype.init=function(t,e,i){this.allowDragging=t,this.params=e,this.eventType=i,this.primaryColsHeaderPanel.init(this.params);var n=this.params.suppressColumnFilter,r=this.params.suppressColumnSelectAll;this.params.suppressColumnExpandAll&&n&&r&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new o.qyQ(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)},e.prototype.toggleResizable=function(t){this.positionableFeature.setResizable(!!t&&{bottom:!0})},e.prototype.onExpandAll=function(){this.primaryColsListPanel.doSetExpandedAll(!0)},e.prototype.onCollapseAll=function(){this.primaryColsListPanel.doSetExpandedAll(!1)},e.prototype.expandGroups=function(t){this.primaryColsListPanel.setGroupsExpanded(!0,t)},e.prototype.collapseGroups=function(t){this.primaryColsListPanel.setGroupsExpanded(!1,t)},e.prototype.setColumnLayout=function(t){this.primaryColsListPanel.setColumnLayout(t)},e.prototype.onFilterChanged=function(t){this.primaryColsListPanel.setFilterText(t.filterText)},e.prototype.syncLayoutWithGrid=function(){this.primaryColsListPanel.onColumnsChanged()},e.prototype.onSelectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!0)},e.prototype.onUnselectAll=function(){this.primaryColsListPanel.doSetSelectedAll(!1)},e.prototype.onGroupExpanded=function(t){this.primaryColsHeaderPanel.setExpandState(t.state),this.params.onStateUpdated()},e.prototype.onSelectionChange=function(t){this.primaryColsHeaderPanel.setSelectionState(t.state)},e.prototype.getExpandedGroups=function(){return this.primaryColsListPanel.getExpandedGroups()},e.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',Ai([(0,o.PIB)("primaryColsHeaderPanel")],e.prototype,"primaryColsHeaderPanel",void 0),Ai([(0,o.PIB)("primaryColsListPanel")],e.prototype,"primaryColsListPanel",void 0),e}(o.uAl),Mi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ki=function(){return ki=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ki.apply(this,arguments)},Ri=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Pi=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.initialised=!1,i.childDestroyFuncs=[],i}return Mi(e,t),e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.init=function(t){var e=this,i={suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi};if(this.params=ki(ki(ki({},i),t),{context:this.gridOptionsService.context}),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new me),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotModePanel)})),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new Ti),this.childDestroyFuncs.push((function(){return e.destroyBean(e.primaryColsPanel)})),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new si(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.rowGroupDropZonePanel)})),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new Oi(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.valuesDropZonePanel)})),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new ci(!1)),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotDropZonePanel)})),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();var n=this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){e.resetChildrenHeight(),e.setLastVisible()}));this.childDestroyFuncs.push((function(){return n()}))}this.initialised=!0},e.prototype.setPivotModeSectionVisible=function(t){var e=this;this.isRowGroupingModuleLoaded()&&(this.pivotModePanel?this.pivotModePanel.setDisplayed(t):t&&(this.pivotModePanel=this.createBean(new me),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push((function(){return e.destroyBean(e.pivotModePanel)}))),this.setLastVisible())},e.prototype.setRowGroupsSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(t):t&&(this.rowGroupDropZonePanel=this.createManagedBean(new si(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())},e.prototype.setValuesSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(t):t&&(this.valuesDropZonePanel=this.createManagedBean(new Oi(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())},e.prototype.setPivotSectionVisible=function(t){this.isRowGroupingModuleLoaded()&&(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(t):t&&(this.pivotDropZonePanel=this.createManagedBean(new ci(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(t)),this.setLastVisible())},e.prototype.setResizers=function(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach((function(t){if(t){var e=t.getGui();t.toggleResizable(!e.classList.contains("ag-last-column-drop")&&!e.classList.contains("ag-hidden"))}}))},e.prototype.setLastVisible=function(){var t=this.getGui();Array.prototype.slice.call(t.querySelectorAll(".ag-column-drop")).forEach((function(t){return t.classList.remove("ag-last-column-drop")}));var e=t.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),i=o._.last(e);i&&i.classList.add("ag-last-column-drop"),this.setResizers()},e.prototype.resetChildrenHeight=function(){for(var t=this.getGui().children,e=0;e<t.length;e++){var i=t[e];i.style.removeProperty("height"),i.style.removeProperty("flex")}},e.prototype.isRowGroupingModuleLoaded=function(){return o.syG.__assertRegistered(o.zsj.RowGroupingModule,"Row Grouping",this.context.getGridId())},e.prototype.expandColumnGroups=function(t){this.primaryColsPanel.expandGroups(t)},e.prototype.collapseColumnGroups=function(t){this.primaryColsPanel.collapseGroups(t)},e.prototype.setColumnLayout=function(t){this.primaryColsPanel.setColumnLayout(t)},e.prototype.syncLayoutWithGrid=function(){this.primaryColsPanel.syncLayoutWithGrid()},e.prototype.destroyChildren=function(){this.childDestroyFuncs.forEach((function(t){return t()})),this.childDestroyFuncs.length=0,o._.clearElement(this.getGui())},e.prototype.refresh=function(){this.destroyChildren(),this.init(this.params)},e.prototype.getState=function(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}},e.prototype.destroy=function(){this.destroyChildren(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-column-panel"></div>',Ri([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),Ri([(0,o.dsm)("columnApi")],e.prototype,"columnApi",void 0),e}(o.uAl),Ni=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Li=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},_i=function(t){function e(){var e=t.call(this,'<div class="ag-tool-panel-horizontal-resize"></div>')||this;return e.minWidth=100,e.maxWidth=null,e}return Ni(e,t),e.prototype.setElementToResize=function(t){this.elementToResize=t},e.prototype.postConstruct=function(){var t=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(t),this.setInverted(this.gridOptionsService.get("enableRtl"))},e.prototype.dispatchResizeEvent=function(t,e,i){var n={type:o.sVA.EVENT_TOOL_PANEL_SIZE_CHANGED,width:i,started:t,ended:e};this.eventService.dispatchEvent(n)},e.prototype.onResizeStart=function(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)},e.prototype.onResizeEnd=function(t){return this.onResizing(t,!0)},e.prototype.onResizing=function(t,e){void 0===e&&(e=!1);var i=this.inverted?-1:1,o=Math.max(this.minWidth,Math.floor(this.startingWidth-t*i));null!=this.maxWidth&&(o=Math.min(this.maxWidth,o)),this.elementToResize.style.width="".concat(o,"px"),this.dispatchResizeEvent(!1,e,o)},e.prototype.setInverted=function(t){this.inverted=t},e.prototype.setMaxWidth=function(t){this.maxWidth=t},e.prototype.setMinWidth=function(t){this.minWidth=null!=t?t:100},Li([(0,o.dsm)("horizontalResizeService")],e.prototype,"horizontalResizeService",void 0),Li([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),Ii=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Fi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Gi=function(t){function e(e){var i=t.call(this)||this;return i.toolPanelDef=e,i}return Ii(e,t),e.prototype.getToolPanelId=function(){return this.toolPanelDef.id},e.prototype.postConstruct=function(){var t=this.createTemplate();this.setTemplate(t),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id","ag-".concat(this.getCompId(),"-button"))},e.prototype.createTemplate=function(){return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span ref ="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>'},e.prototype.setLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=this.toolPanelDef,i=t(e.labelKey,e.labelDefault);this.eLabel.innerText=i},e.prototype.setIcon=function(){this.eIconWrapper.insertAdjacentElement("afterbegin",o._.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))},e.prototype.onButtonPressed=function(){this.dispatchEvent({type:e.EVENT_TOGGLE_BUTTON_CLICKED})},e.prototype.setSelected=function(t){this.addOrRemoveCssClass("ag-selected",t),o._.setAriaExpanded(this.eToggleButton,t)},e.prototype.getButtonElement=function(){return this.eToggleButton},e.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",Fi([(0,o.PIB)("eToggleButton")],e.prototype,"eToggleButton",void 0),Fi([(0,o.PIB)("eIconWrapper")],e.prototype,"eIconWrapper",void 0),Fi([(0,o.PIB)("eLabel")],e.prototype,"eLabel",void 0),Fi([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),Bi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ji=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.buttonComps=[],i}return Bi(e,t),e.prototype.postConstruct=function(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))},e.prototype.handleKeyDown=function(t){if(t.key===o.DDm.TAB&&t.shiftKey){var e=o._.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(e,!0)&&t.preventDefault()}},e.prototype.setActiveButton=function(t){this.buttonComps.forEach((function(e){e.setSelected(t===e.getToolPanelId())}))},e.prototype.addButtonComp=function(t){var i=this,o=this.createBean(new Gi(t));return this.buttonComps.push(o),this.appendChild(o),o.addEventListener(Gi.EVENT_TOGGLE_BUTTON_CLICKED,(function(){i.dispatchEvent({type:e.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:t.id})})),o},e.prototype.clearButtons=function(){this.buttonComps=this.destroyBeans(this.buttonComps),o._.clearElement(this.getGui())},e.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",e.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',Vi([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),Vi([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Vi([o.o7C],e.prototype,"postConstruct",null),Vi([o.yah],e.prototype,"clearButtons",null),e}(o.uAl),Wi=function(){function t(){}return t.parse=function(e){if(e){if(!0===e)return{toolPanels:[t.DEFAULT_COLUMN_COMP,t.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"===typeof e)return t.parse([e]);if(Array.isArray(e)){var i=[];if(e.forEach((function(e){var o=t.DEFAULT_BY_KEY[e];o?i.push(o):console.warn("AG Grid: the key ".concat(e," is not a valid key for specifying a tool panel, valid keys are: ").concat(Object.keys(t.DEFAULT_BY_KEY).join(",")))})),0===i.length)return;return{toolPanels:i,defaultToolPanel:i[0].id}}return{toolPanels:t.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}},t.parseComponents=function(e){var i=[];return e?(e.forEach((function(e){var o=null;if("string"===typeof e){var n=t.DEFAULT_BY_KEY[e];if(!n)return void console.warn("AG Grid: the key ".concat(e," is not a valid key for specifying a tool panel, valid keys are: ").concat(Object.keys(t.DEFAULT_BY_KEY).join(",")));o=n}else o=e;i.push(o)})),i):i},t.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},t.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},t.DEFAULT_BY_KEY={columns:t.DEFAULT_COLUMN_COMP,filters:t.DEFAULT_FILTER_COMP},t}(),zi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Hi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ui=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return zi(e,t),e.prototype.setupResize=function(){var t=this.getGui(),e=this.resizeBar=this.createManagedBean(new _i);t.setAttribute("id","ag-".concat(this.getCompId())),e.setElementToResize(t),this.appendChild(e)},e.prototype.getToolPanelId=function(){return this.toolPanelId},e.prototype.setToolPanelDef=function(t,e){var i=t.id,o=t.minWidth,n=t.maxWidth,r=t.width;this.toolPanelId=i,this.width=r;var s=this.userComponentFactory.getToolPanelCompDetails(t,e).newAgStackInstance();null!=s?(s.then(this.setToolPanelComponent.bind(this)),null!=o&&this.resizeBar.setMinWidth(o),null!=n&&this.resizeBar.setMaxWidth(n)):console.warn("AG Grid: error processing tool panel component ".concat(i,". You need to specify 'toolPanel'"))},e.prototype.setToolPanelComponent=function(t){var e=this;this.toolPanelCompInstance=t,this.appendChild(t.getGui()),this.addDestroyFunc((function(){e.destroyBean(t)})),this.width&&(this.getGui().style.width="".concat(this.width,"px"))},e.prototype.getToolPanelInstance=function(){return this.toolPanelCompInstance},e.prototype.setResizerSizerSide=function(t){var e="left"===t,i=this.gridOptionsService.get("enableRtl")?e:!e;this.resizeBar.setInverted(i)},e.prototype.refresh=function(){this.toolPanelCompInstance.refresh()},e.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',Hi([(0,o.dsm)("userComponentFactory")],e.prototype,"userComponentFactory",void 0),Hi([o.o7C],e.prototype,"setupResize",null),e}(o.uAl),Ki=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Yi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xi=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$i=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.toolPanelWrappers=[],i}return Ki(e,t),e.prototype.postConstruct=function(){var t,e=this;this.sideBarButtonsComp.addEventListener(ji.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this));var i=(null!==(t=this.gridOptionsService.get("initialState"))&&void 0!==t?t:{}).sideBar;this.setSideBarDef(i),this.addManagedPropertyListener("sideBar",(function(){e.clearDownUi(),e.setSideBarDef()})),this.sideBarService.registerSideBarComp(this),this.createManagedBean(new o.G21(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))},e.prototype.onTabKeyDown=function(t){if(!t.defaultPrevented){var e=this.focusService,i=this.sideBarButtonsComp,o=this.getGui(),n=i.getGui(),r=this.gridOptionsService.getDocument().activeElement,s=o.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),a=t.target;if(s)if(n.contains(r))e.focusInto(s,t.shiftKey)&&t.preventDefault();else if(t.shiftKey){var l=null;s.contains(r)?l=this.focusService.findNextFocusableElement(s,void 0,!0):e.isTargetUnderManagedComponent(s,a)&&t.shiftKey&&(l=this.focusService.findFocusableElementBeforeTabGuard(s,a)),l||(l=n.querySelector(".ag-selected button")),l&&(t.preventDefault(),l.focus())}}},e.prototype.handleKeyDown=function(t){var e=this.gridOptionsService.getDocument();if(this.sideBarButtonsComp.getGui().contains(e.activeElement)){var i=this.sideBarButtonsComp.getGui(),n=Array.prototype.slice.call(i.querySelectorAll(".ag-side-button")),r=e.activeElement,s=n.findIndex((function(t){return t.contains(r)})),a=null;switch(t.key){case o.DDm.LEFT:case o.DDm.UP:a=Math.max(0,s-1);break;case o.DDm.RIGHT:case o.DDm.DOWN:a=Math.min(s+1,n.length-1)}if(null!==a){var l=n[a].querySelector("button");l&&(l.focus(),t.preventDefault())}}},e.prototype.onToolPanelButtonClicked=function(t){var e=t.toolPanelId;this.openedItem()===e?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(e,"sideBarButtonClicked")},e.prototype.clearDownUi=function(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()},e.prototype.setSideBarDef=function(t){this.setDisplayed(!1);var e=this.gridOptionsService.get("sideBar");if(this.sideBar=Wi.parse(e),this.sideBar&&this.sideBar.toolPanels){var i=this.sideBar.toolPanels;if(this.createToolPanelsAndSideButtons(i,t),!this.toolPanelWrappers.length)return;var o=t?t.visible:!this.sideBar.hiddenByDefault;if(this.setDisplayed(o),this.setSideBarPosition(t?t.position:this.sideBar.position),o)if(t){var n=t.openToolPanel;n&&this.openToolPanel(n,"sideBarInitializing")}else this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}},e.prototype.getDef=function(){return this.sideBar},e.prototype.setSideBarPosition=function(t){t||(t="right"),this.position=t;var e="left"===t,i=e?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",e),this.addOrRemoveCssClass("ag-side-bar-right",!e),this.toolPanelWrappers.forEach((function(t){t.setResizerSizerSide(i)})),this.eventService.dispatchEvent({type:o.sVA.EVENT_SIDE_BAR_UPDATED}),this},e.prototype.setDisplayed=function(e,i){t.prototype.setDisplayed.call(this,e,i),this.eventService.dispatchEvent({type:o.sVA.EVENT_SIDE_BAR_UPDATED})},e.prototype.getState=function(){var t={};return this.toolPanelWrappers.forEach((function(e){var i,o;t[e.getToolPanelId()]=null===(o=(i=e.getToolPanelInstance()).getState)||void 0===o?void 0:o.call(i)})),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:t}},e.prototype.createToolPanelsAndSideButtons=function(t,e){var i,o,n;try{for(var r=Xi(t),s=r.next();!s.done;s=r.next()){var a=s.value;this.createToolPanelAndSideButton(a,null===(n=null===e||void 0===e?void 0:e.toolPanels)||void 0===n?void 0:n[a.id])}}catch(l){i={error:l}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}},e.prototype.validateDef=function(t){if(null==t.id)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if("agColumnsToolPanel"===t.toolPanel&&!o.syG.__assertRegistered(o.zsj.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId()))return!1;if("agFiltersToolPanel"===t.toolPanel){if(!o.syG.__assertRegistered(o.zsj.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))return!1;if(this.filterManager.isAdvancedFilterEnabled())return o._.warnOnce("Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled."),!1}return!0},e.prototype.createToolPanelAndSideButton=function(t,e){var i=this;if(this.validateDef(t)){var n=this.sideBarButtonsComp.addButtonComp(t),r=this.getContext().createBean(new Ui);r.setToolPanelDef(t,{initialState:e,onStateUpdated:function(){return i.eventService.dispatchEvent({type:o.sVA.EVENT_SIDE_BAR_UPDATED})}}),r.setDisplayed(!1);var s=r.getGui();this.appendChild(s),this.toolPanelWrappers.push(r),o._.setAriaControls(n.getButtonElement(),s)}},e.prototype.refresh=function(){this.toolPanelWrappers.forEach((function(t){return t.refresh()}))},e.prototype.openToolPanel=function(t,e){void 0===e&&(e="api");var i=this.openedItem();i!==t&&(this.toolPanelWrappers.forEach((function(e){var i=t===e.getToolPanelId();e.setDisplayed(i)})),i!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(t),this.raiseToolPanelVisibleEvent(t,null!==i&&void 0!==i?i:void 0,e)))},e.prototype.getToolPanelInstance=function(t){var e=this.toolPanelWrappers.filter((function(e){return e.getToolPanelId()===t}))[0];if(e)return e.getToolPanelInstance();console.warn("AG Grid: unable to lookup Tool Panel as invalid key supplied: ".concat(t))},e.prototype.raiseToolPanelVisibleEvent=function(t,e,i){var n=!!t&&!!e;if(e){var r={type:o.sVA.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:i,key:e,visible:!1,switchingToolPanel:n};this.eventService.dispatchEvent(r)}if(t){var s={type:o.sVA.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:i,key:t,visible:!0,switchingToolPanel:n};this.eventService.dispatchEvent(s)}},e.prototype.close=function(t){void 0===t&&(t="api"),this.openToolPanel(void 0,t)},e.prototype.isToolPanelShowing=function(){return!!this.openedItem()},e.prototype.openedItem=function(){var t=null;return this.toolPanelWrappers.forEach((function(e){e.isDisplayed()&&(t=e.getToolPanelId())})),t},e.prototype.destroyToolPanelWrappers=function(){var t=this;this.toolPanelWrappers.forEach((function(e){o._.removeFromParent(e.getGui()),t.destroyBean(e)})),this.toolPanelWrappers.length=0},e.prototype.destroy=function(){this.destroyToolPanelWrappers(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',Yi([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),Yi([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),Yi([(0,o.dsm)("sideBarService")],e.prototype,"sideBarService",void 0),Yi([(0,o.PIB)("sideBarButtons")],e.prototype,"sideBarButtonsComp",void 0),Yi([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),qi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Zi=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ji=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isColGroupDef=function(t){return t&&"undefined"!==typeof t.children},e.getId=function(t){return e.isColGroupDef(t)?t.groupId:t.colId},e}return qi(e,t),e.prototype.createColumnTree=function(t){var e=this,i=[],n=function(t,r){if(e.isColGroupDef(t)){var s=t,a="undefined"!==typeof s.groupId?s.groupId:s.headerName,l=new o.D45(s,a,!1,r),c=[];return s.children.forEach((function(t){var e=n(t,r+1);e&&c.push(e)})),l.setChildren(c),l}var d=t,u=d.colId?d.colId:d.field,h=e.columnModel.getPrimaryColumn(u);return h||i.push(d),h},r=[];return t.forEach((function(t){var e=n(t,0);e&&r.push(e)})),i.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",i),r},e.prototype.syncLayoutWithGrid=function(t){var e=this.getLeafPathTrees();t(this.mergeLeafPathTrees(e))},e.prototype.getLeafPathTrees=function(){var t=function(e,i){var n;if(e instanceof o.D45)if(e.isPadding())n=i;else{var r=Object.assign({},e.getColGroupDef());r.groupId=e.getGroupId(),r.children=[i],n=r}else{var s=Object.assign({},e.getColDef());s.colId=e.getColId(),n=s}var a=e.getOriginalParent();return a?t(a,n):n};return this.columnModel.getAllGridColumns().filter((function(t){var e=t.getColDef();return t.isPrimary()&&!e.showRowGroup})).map((function(e){return t(e,e.getColDef())}))},e.prototype.mergeLeafPathTrees=function(t){for(var e,i,o=this,n=function(t,e){if(!o.isColGroupDef(e))return t;var i=t,r=e;if(r.children&&r.groupId&&o.addChildrenToGroup(i,r.groupId,r.children[0]))return i;return r.children.forEach((function(t){return n(i,t)})),i},r=[],s=1;s<=t.length;s++){var a=t[s-1],l=t[s];e=a,i=l,o.isColGroupDef(e)&&o.isColGroupDef(i)&&o.getId(e)===o.getId(i)?t[s]=n(a,l):r.push(a)}return r},e.prototype.addChildrenToGroup=function(t,e,i){var n=this;if(!this.isColGroupDef(t))return!0;var r=t,s=i;if(function(t,e){var i=t.children.map(n.getId),r=o._.includes(i,n.getId(e)),s=o._.last(t.children),a=s&&n.getId(s)!==n.getId(e);return r&&a}(r,s))return r.children.push(s),!0;if(r.groupId===e){var a=r.children.map(this.getId);if(!o._.includes(a,this.getId(s)))return r.children.push(s),!0}return r.children.forEach((function(t){return n.addChildrenToGroup(t,e,i)})),!1},Zi([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),e=Zi([(0,o.dR4)("toolPanelColDefService")],e)}(o.XQb),Qi=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),to=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qi(e,t),e.prototype.registerSideBarComp=function(t){this.sideBarComp=t},e.prototype.getSideBarComp=function(){return this.sideBarComp},e=to([(0,o.dR4)("sideBarService")],e)}(o.XQb),io={version:"31.0.0",moduleName:o.zsj.SideBarModule,beans:[Ji,eo],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:_i},{componentName:"AgSideBar",componentClass:$i},{componentName:"AgSideBarButtons",componentClass:ji}],dependantModules:[g]},oo=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},no=function(){function t(){}return t.prototype.selectAllChildren=function(t,e,i){var o=this.extractAllLeafColumns(t);this.setAllColumns(o,e,i)},t.prototype.setColumn=function(t,e,i){this.setAllColumns([t],e,i)},t.prototype.setAllColumns=function(t,e,i){this.columnModel.isPivotMode()?this.setAllPivot(t,e,i):this.setAllVisible(t,e,i)},t.prototype.extractAllLeafColumns=function(t){var e=[],i=function(t){t.forEach((function(t){t.isPassesFilter()&&(t.isGroup()?i(t.getChildren()):e.push(t.getColumn()))}))};return i(t),e},t.prototype.setAllVisible=function(t,e,i){var o=[];t.forEach((function(t){t.getColDef().lockVisible||t.isVisible()!=e&&o.push({colId:t.getId(),hide:!e})})),o.length>0&&this.columnModel.applyColumnState({state:o},i)},t.prototype.setAllPivot=function(t,e,i){this.gridOptionsService.get("functionsPassive")?this.setAllPivotPassive(t,e):this.setAllPivotActive(t,e,i)},t.prototype.setAllPivotPassive=function(t,e){var i=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),r=this.columnModel.getRowGroupColumns().slice(),s=!1,a=!1,l=!1,c=e?function(t){t.isAnyFunctionActive()||(t.isAllowValue()?(n.push(t),a=!0):t.isAllowRowGroup()?(r.push(t),s=!0):t.isAllowPivot()&&(i.push(t),l=!0))}:function(t){t.isAnyFunctionActive()&&(i.indexOf(t)>=0&&(o._.removeFromArray(i,t),s=!0),n.indexOf(t)>=0&&(o._.removeFromArray(n,t),a=!0),r.indexOf(t)>=0&&(o._.removeFromArray(r,t),l=!0))};if(t.forEach(c),s){var d={type:o.sVA.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:i};this.eventService.dispatchEvent(d)}if(l){var u={type:o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(u)}if(a){var h={type:o.sVA.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:r};this.eventService.dispatchEvent(h)}},t.prototype.setAllPivotActive=function(t,e,i){var o=this,n=[],r=e?function(t){if(!t.isAnyFunctionActive())if(t.isAllowValue()){var e="string"===typeof t.getAggFunc()?t.getAggFunc():o.aggFuncService.getDefaultAggFunc(t);n.push({colId:t.getId(),aggFunc:e})}else t.isAllowRowGroup()?n.push({colId:t.getId(),rowGroup:!0}):t.isAllowPivot()&&n.push({colId:t.getId(),pivot:!0})}:function(t){(t.isPivotActive()||t.isRowGroupActive()||t.isValueActive())&&n.push({colId:t.getId(),pivot:!1,rowGroup:!1,aggFunc:null})};t.forEach(r),n.length>0&&this.columnModel.applyColumnState({state:n},i)},t.prototype.updateColumns=function(t){var e=this,i=t.columns,o=t.visibleState,n=t.pivotState,r=t.eventType,s=i.map((function(t){var i=t.getColId();if(e.columnModel.isPivotMode()){var r=null===n||void 0===n?void 0:n[i];return{colId:i,pivot:null===r||void 0===r?void 0:r.pivot,rowGroup:null===r||void 0===r?void 0:r.rowGroup,aggFunc:null===r||void 0===r?void 0:r.aggFunc}}return{colId:i,hide:!(null===o||void 0===o?void 0:o[i])}}));this.columnModel.applyColumnState({state:s},r)},t.prototype.createPivotState=function(t){return{pivot:t.isPivotActive(),rowGroup:t.isRowGroupActive(),aggFunc:t.isValueActive()?t.getAggFunc():void 0}},oo([(0,o.dsm)("aggFuncService")],t.prototype,"aggFuncService",void 0),oo([(0,o.dsm)("columnModel")],t.prototype,"columnModel",void 0),oo([(0,o.dsm)("gridOptionsService")],t.prototype,"gridOptionsService",void 0),oo([(0,o.dsm)("eventService")],t.prototype,"eventService",void 0),t=oo([(0,o.dR4)("modelItemUtils")],t)}(),ro={version:"31.0.0",moduleName:o.zsj.ColumnsToolPanelModule,beans:[no],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:$t},{componentName:"AgPrimaryColsList",componentClass:ge},{componentName:"AgPrimaryCols",componentClass:Ti}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:Pi}],dependantModules:[g,Ci,io]},so=function(t){var e=(new Date).toJSON();return{name:"cp:coreProperties",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{cp:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",xsi:"http://www.w3.org/2001/XMLSchema-instance"}}]},children:[{name:"dc:creator",textNode:t},{name:"dc:title",textNode:"Workbook"},{name:"dcterms:created",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e},{name:"dcterms:modified",properties:{rawMap:{"xsi:type":"dcterms:W3CDTF"}},textNode:e}]}},ao=function(t){var e=t.name,i=t.ContentType;return{name:e,properties:{rawMap:{Extension:t.Extension,PartName:t.PartName,ContentType:i}}}},lo=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},co=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},uo=function(t){var e=new Array(t).fill(void 0).map((function(t,e){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",PartName:"/xl/worksheets/sheet".concat(e+1,".xml")}})),i=Jn.worksheetImages.size,o={};Jn.workbookImageIds.forEach((function(t){o[t.type]=!0}));var n=new Array(i).fill(void 0).map((function(t,e){return{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.drawing+xml",PartName:"/xl/drawings/drawing".concat(e+1,".xml")}})),r=Object.keys(o).map((function(t){return{name:"Default",ContentType:"image/".concat(t),Extension:t}}));return{name:"Types",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"}},children:co(co(co(co(co(co([],lo(r),!1),[{name:"Default",Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"},{name:"Default",ContentType:"application/xml",Extension:"xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",PartName:"/xl/workbook.xml"}],!1),lo(e),!1),[{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.theme+xml",PartName:"/xl/theme/theme1.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",PartName:"/xl/styles.xml"},{name:"Override",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",PartName:"/xl/sharedStrings.xml"}],!1),lo(n),!1),[{name:"Override",ContentType:"application/vnd.openxmlformats-package.core-properties+xml",PartName:"/docProps/core.xml"}],!1).map((function(t){return ao(t)}))}},ho={0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49},po=function(t){return Math.ceil(9525*t)},fo=function(t,e){if(e){var i,o;if("number"===typeof e)i=e;else i=e({rowIndex:t});return o=i,Math.round(72*o/96)}},go=function(t){var e=o.aS7.createHeader({encoding:"UTF-8",standalone:"yes"}),i=o.aS7.createXml(t);return"".concat(e).concat(i)},vo=function(t){var e=String.fromCharCode,i=Math.floor(t/26),o=t%26;return i&&26!==t?o?i<26?e(65+i-1)+e(65+o-1):vo(i)+e(65+o-1):vo(i-1)+"Z":e(65+t-1)},yo=function(t,e){return{name:"xdr:".concat(t),children:[{name:"xdr:col",textNode:e.col.toString()},{name:"xdr:colOff",textNode:e.offsetX.toString()},{name:"xdr:row",textNode:e.row.toString()},{name:"xdr:rowOff",textNode:e.offsetY.toString()}]}},mo=function(t){var e=[{name:"a:ext",properties:{rawMap:{uri:"{FF2B5EF4-FFF2-40B4-BE49-F238E27FC236}"}},children:[{name:"a16:creationId",properties:{rawMap:{id:"{822E6D20-D7BC-2841-A643-D49A6EF008A2}","xmlns:a16":"http://schemas.microsoft.com/office/drawing/2014/main"}}}]}];switch(t.recolor&&t.recolor.toLowerCase()){case"grayscale":case"sepia":case"washout":e.push({name:"a:ext",properties:{rawMap:{uri:"{C183D7F6-B498-43B3-948B-1728B52AA6E4}"}},children:[{name:"adec:decorative",properties:{rawMap:{val:"0","xmlns:adec":"http://schemas.microsoft.com/office/drawing/2017/decorative"}}}]})}return{name:"a:extLst",children:e}},bo=function(t,e){return{name:"xdr:nvPicPr",children:[{name:"xdr:cNvPr",properties:{rawMap:{id:e,name:t.id,descr:null!=t.altText?t.altText:void 0}},children:[mo(t)]},{name:"xdr:cNvPicPr",properties:{rawMap:{preferRelativeResize:"0"}},children:[{name:"a:picLocks"}]}]}},So=function(t){if(t.saturation||t.tint){var e=[];return t.saturation&&e.push({name:"a:satMod",properties:{rawMap:{val:1e3*t.saturation}}}),t.tint&&e.push({name:"a:tint",properties:{rawMap:{val:1e3*t.tint}}}),e}},xo=function(t,e){var i,o,n;if(t.transparency){var r=Math.min(Math.max(t.transparency,0),100);i=[{name:"a:alphaModFix",properties:{rawMap:{amt:1e5-Math.round(1e3*r)}}}]}if(t.recolor)switch(i||(i=[]),t.recolor.toLocaleLowerCase()){case"grayscale":i.push({name:"a:grayscl"});break;case"sepia":i.push((n={color:"D9C3A5",tint:50,saturation:180},{name:"a:duotone",children:[{name:"a:prstClr",properties:{rawMap:{val:(o={color:"black"}).color}},children:So(o)},{name:"a:srgbClr",properties:{rawMap:{val:n.color}},children:So(n)}]}));break;case"washout":i.push({name:"a:lum",properties:{rawMap:{bright:"70000",contrast:"-70000"}}})}return{name:"xdr:blipFill",children:[{name:"a:blip",properties:{rawMap:{cstate:"print","r:embed":"rId".concat(e),"xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}},children:i},{name:"a:stretch",children:[{name:"a:fillRect"}]}]}},Co=function(t,e){var i={name:"a:xfrm",children:[{name:"a:off",properties:{rawMap:{x:0,y:0}}},{name:"a:ext",properties:{rawMap:{cx:e.width,cy:e.height}}}]};if(t.rotation){var o=t.rotation;i.properties={rawMap:{rot:6e4*Math.min(Math.max(o,0),360)}}}return{name:"xdr:spPr",children:[i,{name:"a:prstGeom",properties:{rawMap:{prst:"rect"}},children:[{name:"a:avLst"}]}]}},wo=function(t,e,i,o){return{name:"xdr:pic",children:[bo(t,e+1),xo(t,i+1),Co(t,o)]}},Eo=function(t){var e=t.sheetIndex,i=Jn.worksheetImages.get(e),o=Jn.worksheetImageIds.get(e);return{name:"xdr:wsDr",properties:{rawMap:{"xmlns:a":"http://schemas.openxmlformats.org/drawingml/2006/main","xmlns:xdr":"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"}},children:i.map((function(t,e){var i=function(t){t.fitCell=!!t.fitCell||!t.width||!t.height;var e=t.position,i=void 0===e?{}:e,o=t.fitCell,n=t.width,r=void 0===n?0:n,s=t.height,a=void 0===s?0:s,l=t.totalHeight,c=t.totalWidth,d=i.offsetX,u=void 0===d?0:d,h=i.offsetY,p=void 0===h?0:h,f=i.row,g=void 0===f?1:f,v=i.rowSpan,y=void 0===v?1:v,m=i.column,b=void 0===m?1:m,S=i.colSpan,x=void 0===S?1:S;return{from:{row:g-1,col:b-1,offsetX:po(u),offsetY:po(p)},to:{row:g-1+(o?1:y-1),col:b-1+(o?1:x-1),offsetX:po(r+u),offsetY:po(a+p)},height:po(l||a),width:po(c||r)}}(t);return{name:"xdr:twoCellAnchor",properties:{rawMap:{editAs:"absolute"}},children:[yo("from",i.from),yo("to",i.to),wo(t,e,o.get(t.id).index,i),{name:"xdr:clientData"}]}}))}},Oo=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Do=function(t){var e=Oo(t,4),i=e[0],o=e[1],n=e[2],r=e[3];return{name:"a:".concat(i),children:[{name:"a:".concat(o),properties:{rawMap:{val:n,lastClr:r}}}]}},Ao=function(){return{name:"a:clrScheme",properties:{rawMap:{name:"Office"}},children:[Do(["dk1","sysClr","windowText","000000"]),Do(["lt1","sysClr","window","FFFFFF"]),Do(["dk2","srgbClr","44546A"]),Do(["lt2","srgbClr","E7E6E6"]),Do(["accent1","srgbClr","4472C4"]),Do(["accent2","srgbClr","ED7D31"]),Do(["accent3","srgbClr","A5A5A5"]),Do(["accent4","srgbClr","FFC000"]),Do(["accent5","srgbClr","5B9BD5"]),Do(["accent6","srgbClr","70AD47"]),Do(["hlink","srgbClr","0563C1"]),Do(["folHlink","srgbClr","954F72"])]}},To=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Mo=function(t){var e=To(t,4),i=e[0],o=e[1],n=e[2],r=e[3];return{name:"a:".concat(i),properties:{rawMap:{script:n,typeface:o,panose:r}}}},ko=function(){var t=o._.utf8_encode;return{name:"a:fontScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:majorFont",children:[Mo(["latin","Calibri Light",void 0,"020F0302020204030204"]),Mo(["ea",""]),Mo(["cs",""]),Mo(["font",t("\u6e38\u30b4\u30b7\u30c3\u30af Light"),"Jpan"]),Mo(["font",t("\ub9d1\uc740 \uace0\ub515"),"Hang"]),Mo(["font",t("\u7b49\u7ebf Light"),"Hans"]),Mo(["font",t("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),Mo(["font","Times New Roman","Arab"]),Mo(["font","Times New Roman","Hebr"]),Mo(["font","Tahoma","Thai"]),Mo(["font","Nyala","Ethi"]),Mo(["font","Vrinda","Beng"]),Mo(["font","Shruti","Gujr"]),Mo(["font","MoolBoran","Khmr"]),Mo(["font","Tunga","Knda"]),Mo(["font","Raavi","Guru"]),Mo(["font","Euphemia","Cans"]),Mo(["font","Plantagenet Cherokee","Cher"]),Mo(["font","Microsoft Yi Baiti","Yiii"]),Mo(["font","Microsoft Himalaya","Tibt"]),Mo(["font","MV Boli","Thaa"]),Mo(["font","Mangal","Deva"]),Mo(["font","Gautami","Telu"]),Mo(["font","Latha","Taml"]),Mo(["font","Estrangelo Edessa","Syrc"]),Mo(["font","Kalinga","Orya"]),Mo(["font","Kartika","Mlym"]),Mo(["font","DokChampa","Laoo"]),Mo(["font","Iskoola Pota","Sinh"]),Mo(["font","Mongolian Baiti","Mong"]),Mo(["font","Times New Roman","Viet"]),Mo(["font","Microsoft Uighur","Uigh"]),Mo(["font","Sylfaen","Geor"]),Mo(["font","Arial","Armn"]),Mo(["font","Leelawadee UI","Bugi"]),Mo(["font","Microsoft JhengHei","Bopo"]),Mo(["font","Javanese Text","Java"]),Mo(["font","Segoe UI","Lisu"]),Mo(["font","Myanmar Text","Mymr"]),Mo(["font","Ebrima","Nkoo"]),Mo(["font","Nirmala UI","Olck"]),Mo(["font","Ebrima","Osma"]),Mo(["font","Phagspa","Phag"]),Mo(["font","Estrangelo Edessa","Syrn"]),Mo(["font","Estrangelo Edessa","Syrj"]),Mo(["font","Estrangelo Edessa","Syre"]),Mo(["font","Nirmala UI","Sora"]),Mo(["font","Microsoft Tai Le","Tale"]),Mo(["font","Microsoft New Tai Lue","Talu"]),Mo(["font","Ebrima","Tfng"])]},{name:"a:minorFont",children:[Mo(["latin","Calibri",void 0,"020F0502020204030204"]),Mo(["ea",""]),Mo(["cs",""]),Mo(["font",t("\u6e38\u30b4\u30b7\u30c3\u30af"),"Jpan"]),Mo(["font",t("\ub9d1\uc740 \uace0\ub515"),"Hang"]),Mo(["font",t("\u7b49\u7ebf"),"Hans"]),Mo(["font",t("\u65b0\u7d30\u660e\u9ad4"),"Hant"]),Mo(["font","Arial","Arab"]),Mo(["font","Arial","Hebr"]),Mo(["font","Tahoma","Thai"]),Mo(["font","Nyala","Ethi"]),Mo(["font","Vrinda","Beng"]),Mo(["font","Shruti","Gujr"]),Mo(["font","DaunPenh","Khmr"]),Mo(["font","Tunga","Knda"]),Mo(["font","Raavi","Guru"]),Mo(["font","Euphemia","Cans"]),Mo(["font","Plantagenet Cherokee","Cher"]),Mo(["font","Microsoft Yi Baiti","Yiii"]),Mo(["font","Microsoft Himalaya","Tibt"]),Mo(["font","MV Boli","Thaa"]),Mo(["font","Mangal","Deva"]),Mo(["font","Gautami","Telu"]),Mo(["font","Latha","Taml"]),Mo(["font","Estrangelo Edessa","Syrc"]),Mo(["font","Kalinga","Orya"]),Mo(["font","Kartika","Mlym"]),Mo(["font","DokChampa","Laoo"]),Mo(["font","Iskoola Pota","Sinh"]),Mo(["font","Mongolian Baiti","Mong"]),Mo(["font","Arial","Viet"]),Mo(["font","Microsoft Uighur","Uigh"]),Mo(["font","Sylfaen","Geor"]),Mo(["font","Arial","Armn"]),Mo(["font","Leelawadee UI","Bugi"]),Mo(["font","Microsoft JhengHei","Bopo"]),Mo(["font","Javanese Text","Java"]),Mo(["font","Segoe UI","Lisu"]),Mo(["font","Myanmar Text","Mymr"]),Mo(["font","Ebrima","Nkoo"]),Mo(["font","Nirmala UI","Olck"]),Mo(["font","Ebrima","Osma"]),Mo(["font","Phagspa","Phag"]),Mo(["font","Estrangelo Edessa","Syrn"]),Mo(["font","Estrangelo Edessa","Syrj"]),Mo(["font","Estrangelo Edessa","Syre"]),Mo(["font","Nirmala UI","Sora"]),Mo(["font","Microsoft Tai Le","Tale"]),Mo(["font","Microsoft New Tai Lue","Talu"]),Mo(["font","Ebrima","Tfng"])]}]}},Ro=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Po=function(t,e,i){return{name:"a:".concat(t),properties:{rawMap:{val:e}},children:i}},No=function(t){var e=Ro(t,6),i=e[0],o=e[1],n=e[2],r=e[3],s=e[4],a=e[5],l=[];return l.push(Po("satMod",n)),r&&l.push(Po("lumMod",r)),s&&l.push(Po("tint",s)),a&&l.push(Po("shade",a)),{name:"a:gs",properties:{rawMap:{pos:i}},children:[{name:"a:schemeClr",properties:{rawMap:{val:o}},children:l}]}},Lo=function(t,e){return{name:"a:solidFill",children:[Po("schemeClr",t,e)]}},_o=function(t){var e=Ro(t,5),i=e[0],o=e[1],n=e[2],r=e[3],s=e[4],a=Ro(s,2),l=a[0],c=a[1];return{name:"a:gradFill",properties:{rawMap:{rotWithShape:i}},children:[{name:"a:gsLst",children:[No(o),No(n),No(r)]},{name:"a:lin",properties:{rawMap:{ang:l,scaled:c}}}]}},Io=function(t){var e=Ro(t,4);return{name:"a:ln",properties:{rawMap:{w:e[0],cap:e[1],cmpd:e[2],algn:e[3]}},children:[Lo("phClr"),Po("prstDash","solid"),{name:"a:miter",properties:{rawMap:{lim:"800000"}}}]}},Fo=function(t){var e=[];if(t){var i=Ro(t,5),o=i[0],n=i[1],r=i[2],s=i[3],a=i[4];e.push({name:"a:outerShdw",properties:{rawMap:{blurRad:o,dist:n,dir:r,algn:s,rotWithShape:a}},children:[Po("srgbClr","000000",[Po("alpha","63000")])]})}return{name:"a:effectStyle",children:[Object.assign({},{name:"a:effectLst"},e.length?{children:e}:{})]}},Go=function(){return{name:"a:fmtScheme",properties:{rawMap:{name:"Office"}},children:[{name:"a:fillStyleLst",children:[Lo("phClr"),_o(["1",["0","phClr","105000","110000","67000"],["50000","phClr","103000","105000","73000"],["100000","phClr","109000","105000","81000"],["5400000","0"]]),_o(["1",["0","phClr","103000","102000","94000"],["50000","phClr","110000","100000",void 0,"100000"],["100000","phClr","120000","99000",void 0,"78000"],["5400000","0"]])]},{name:"a:lnStyleLst",children:[Io(["6350","flat","sng","ctr"]),Io(["12700","flat","sng","ctr"]),Io(["19050","flat","sng","ctr"])]},{name:"a:effectStyleLst",children:[Fo(),Fo(),Fo(["57150","19050","5400000","ctr","0"])]},{name:"a:bgFillStyleLst",children:[Lo("phClr"),Lo("phClr",[Po("tint","95000"),Po("satMod","170000")]),_o(["1",["0","phClr","150000","102000","93000","98000"],["50000","phClr","130000","103000","98000","90000"],["100000","phClr","120000",void 0,void 0,"63000"],["5400000","0"]])]}]}},Bo=function(){return{name:"a:themeElements",children:[Ao(),ko(),Go()]}},Vo=function(){return{name:"a:theme",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{a:"http://schemas.openxmlformats.org/drawingml/2006/main"}}],rawMap:{name:"Office Theme"}},children:[Bo(),{name:"a:objectDefaults"},{name:"a:extraClrSchemeLst"}]}},jo=function(t){var e=[];return t.forEach((function(t,i){var n=i.toString(),r={name:"t",textNode:o._.utf8_encode(o._.escapeString(n))};n.trim().length!==n.length&&(r.properties={rawMap:{"xml:space":"preserve"}}),e.push({name:"si",children:[r]})})),e},Wo=function(t){return{name:"sst",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",count:t.size,uniqueCount:t.size}},children:jo(t)}};var zo,Ho,Uo,Ko,Yo,Xo,$o,qo,Zo,Jo,Qo=function(t){var e=t.formatCode,i=t.numFmtId;return e.length&&(e=function(t){for(var e=t.split(/(\[[^\]]*\])/),i=0;i<e.length;i++){var n=e[i];n.length&&(n.startsWith("[")||(n=n.replace(/\$/g,'"$"')),e[i]=o._.escapeString(n))}return e.join("")}(e)),{name:"numFmt",properties:{rawMap:{formatCode:e,numFmtId:i}}}},tn=function(t){return{name:"numFmts",properties:{rawMap:{count:t.length}},children:t.map((function(t){return Qo(t)}))}},en=function(t){var e=t.size,i=t.colorTheme,o=t.color,n=void 0===o?"FF000000":o,r=t.fontName,s=void 0===r?"Calibri":r,a=t.family,l=t.scheme,c=t.italic,d=t.bold,u=t.strikeThrough,h=t.outline,p=t.shadow,f=t.underline,g=t.verticalAlign,v=[{name:"sz",properties:{rawMap:{val:e}}},{name:"color",properties:{rawMap:{theme:i,rgb:n}}},{name:"name",properties:{rawMap:{val:s}}}];return a&&v.push({name:"family",properties:{rawMap:{val:a}}}),l&&v.push({name:"scheme",properties:{rawMap:{val:l}}}),c&&v.push({name:"i"}),d&&v.push({name:"b"}),u&&v.push({name:"strike"}),h&&v.push({name:"outline"}),p&&v.push({name:"shadow"}),f&&v.push({name:"u",properties:{rawMap:{val:f}}}),g&&v.push({name:"vertAlign",properties:{rawMap:{val:g}}}),{name:"font",children:v}},on=function(t){return{name:"fonts",properties:{rawMap:{count:t.length}},children:t.map((function(t){return en(t)}))}},nn=function(t){var e=t.patternType,i=t.fgTheme,o=t.fgTint,n=t.fgRgb,r=t.bgRgb,s=t.bgIndexed,a={name:"patternFill",properties:{rawMap:{patternType:e}}};return(i||o||n)&&(a.children=[{name:"fgColor",properties:{rawMap:{theme:i,tint:o,rgb:n}}}]),(s||r)&&(a.children||(a.children=[]),a.children.push({name:"bgColor",properties:{rawMap:{indexed:s,rgb:r}}})),{name:"fill",children:[a]}},rn=function(t){return{name:"fills",properties:{rawMap:{count:t.length}},children:t.map((function(t){return nn(t)}))}},sn={None:"None",Dot:"Dotted",Dash:"Dashed",Double:"Double",DashDot:"DashDot",DashDotDot:"DashDotDot",SlantDashDot:"SlantDashDot"},an=["Dashed","DashDot","DashDotDot"],ln={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinDiagStripe:"lightUp",ThinHorzCross:"lightGrid",ThinDiagCross:"lightTrellis",Gray125:"gray125",Gray0625:"gray0625"},cn={Automatic:"general",Left:"left",Center:"center",Right:"right",Fill:"fill",Justify:"justify",CenterAcrossSelection:"centerContinuous",Distributed:"distributed",JustifyDistributed:"justify"},dn={Automatic:void 0,Top:"top",Bottom:"bottom",Center:"center",Justify:"justify",Distributed:"distributed",JustifyDistributed:"justify"},un=function(t){return void 0==t?t:("#"===t.charAt(0)&&(t=t.substring(1)),6===t.length?"FF"+t:t)},hn=function(t,e){if(!t)return"thin";var i=function(t){switch(t){case 1:return"thin";case 2:return"medium";case 3:return"thick";default:return"hair"}}(e),o=sn[t];return"Continuous"===t?i:"medium"===i&&-1!==an.indexOf(o)?"medium".concat(o):o.charAt(0).toLowerCase()+o.substring(1)},pn=function(t){return cn[t]||"general"},fn=function(t){return dn[t]||void 0},gn=function(t){return{name:"color",properties:{rawMap:{rgb:un(t||"#000000")}}}},vn=function(t){var e=t.left,i=t.right,o=t.top,n=t.bottom,r=t.diagonal,s=e?[gn(e.color)]:void 0,a=i?[gn(i.color)]:void 0,l=o?[gn(o.color)]:void 0,c=n?[gn(n.color)]:void 0,d=r?[gn(r.color)]:void 0;return{name:"border",children:[{name:"left",properties:{rawMap:{style:e&&e.style}},children:s},{name:"right",properties:{rawMap:{style:i&&i.style}},children:a},{name:"top",properties:{rawMap:{style:o&&o.style}},children:l},{name:"bottom",properties:{rawMap:{style:n&&n.style}},children:c},{name:"diagonal",properties:{rawMap:{style:r&&r.style}},children:d}]}},yn=function(t){return{name:"borders",properties:{rawMap:{count:t.length}},children:t.map((function(t){return vn(t)}))}},mn=function(t){var e=["Context","LeftToRight","RightToLeft"].indexOf(t);return Math.max(e,0)},bn=function(t){var e=t.horizontal,i=t.indent,o=t.readingOrder,n=t.rotate,r=t.shrinkToFit,s=t.vertical,a=t.wrapText;return{name:"alignment",properties:{rawMap:{horizontal:e&&pn(e),indent:i,readingOrder:o&&mn(o),textRotation:n,shrinkToFit:r,vertical:s&&fn(s),wrapText:a}}}},Sn=function(t){var e=!1===t.protected?0:1;return{name:"protection",properties:{rawMap:{hidden:!0===t.hideFormula?1:0,locked:e}}}},xn=function(t){var e=t.alignment,i=t.borderId,o=t.fillId,n=t.fontId,r=t.numFmtId,s=t.protection,a=t.xfId,l=[];return e&&l.push(bn(e)),s&&l.push(Sn(s)),{name:"xf",properties:{rawMap:{applyAlignment:e?1:void 0,applyProtection:s?1:void 0,applyBorder:i?1:void 0,applyFill:o?1:void 0,borderId:i,fillId:o,applyFont:n?1:void 0,fontId:n,applyNumberFormat:r?1:void 0,numFmtId:r,xfId:a}},children:l.length?l:void 0}},Cn=function(t){return{name:"cellStyleXfs",properties:{rawMap:{count:t.length}},children:t.map((function(t){return xn(t)}))}},wn=function(t){return{name:"cellXfs",properties:{rawMap:{count:t.length}},children:t.map((function(t){return xn(t)}))}},En=function(t){return{name:"cellStyle",properties:{rawMap:{builtinId:t.builtinId,name:t.name,xfId:t.xfId}}}},On=function(t){return{name:"cellStyles",properties:{rawMap:{count:t.length}},children:t.map((function(t){return En(t)}))}},Dn=function(){return Dn=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Dn.apply(this,arguments)},An=function(t,e){return-1!==t.indexOf("mixedStyle")&&e>1&&(t+="_".concat(e)),t},Tn=function(){zo={base:0},Ho=[],Uo=[{fontName:"Calibri",colorTheme:"1",family:"2",scheme:"minor"}],Ko=[{patternType:"none"},{patternType:"gray125"}],Yo=[{left:void 0,right:void 0,top:void 0,bottom:void 0,diagonal:void 0}],Xo=[{borderId:0,fillId:0,fontId:0,numFmtId:0}],$o=[{borderId:0,fillId:0,fontId:0,numFmtId:0,xfId:0}],qo=[{builtinId:0,name:"Normal",xfId:0}]},Mn=function(t){var e,i=(e=t.pattern)?ln[e]||e:"none",o=un(t.color),n=un(t.patternColor),r=Ko.findIndex((function(t){var e=t.patternType,r=t.fgRgb,s=t.bgRgb;return e==i&&r==o&&s==n}));return-1===r&&(r=Ko.length,Ko.push({patternType:i,fgRgb:o,bgRgb:n})),r},kn=function(t){var e=t.fontName,i=void 0===e?"Calibri":e,n=t.color,r=t.size,s=t.bold,a=t.italic,l=t.outline,c=t.shadow,d=t.strikeThrough,u=t.underline,h=t.family,p=t.verticalAlign,f=i?o._.utf8_encode(i):i,g=un(n),v=function(t){if(void 0!==t){var e=["Automatic","Roman","Swiss","Modern","Script","Decorative"].indexOf(t||"Automatic");return Math.max(e,0)}}(h),y=u?u.toLocaleLowerCase():void 0,m=p?p.toLocaleLowerCase():void 0,b=Uo.findIndex((function(t){return t.fontName==f&&t.color==g&&t.size==r&&t.bold==s&&t.italic==a&&t.outline==l&&t.shadow==c&&t.strikeThrough==d&&t.underline==y&&t.verticalAlign==m&&t.family==v}));return-1===b&&(b=Uo.length,Uo.push({fontName:f,color:g,size:r,bold:s,italic:a,outline:l,shadow:c,strikeThrough:d,underline:y,verticalAlign:m,family:null!=v?v.toString():void 0})),b},Rn=function(t){var e=t.alignment,i=t.borders,n=t.font,r=t.interior,s=t.numberFormat,a=t.protection,l=t.id,c=0,d=0,u=0,h=0;l&&(l=An(l,Zo),void 0==zo[l]&&(r&&(c=Mn(r)),i&&(d=function(t){var e,i,o,n,r,s,a,l,c=t.borderBottom,d=t.borderTop,u=t.borderLeft,h=t.borderRight;u&&(o=hn(u.lineStyle,u.weight),a=un(u.color)),h&&(n=hn(h.lineStyle,h.weight),l=un(h.color)),c&&(e=hn(c.lineStyle,c.weight),r=un(c.color)),d&&(i=hn(d.lineStyle,d.weight),s=un(d.color));var p=Yo.findIndex((function(t){var c=t.left,d=t.right,u=t.top,h=t.bottom;if(!c&&(o||a))return!1;if(!d&&(n||l))return!1;if(!u&&(i||s))return!1;if(!h&&(e||r))return!1;var p=c||{},f=p.style,g=p.color,v=d||{},y=v.style,m=v.color,b=u||{},S=b.style,x=b.color,C=h||{},w=C.style,E=C.color;return f==o&&g==a&&y==n&&m==l&&S==i&&x==s&&w==e&&E==r}));return-1===p&&(p=Yo.length,Yo.push({left:{style:o,color:a},right:{style:n,color:l},top:{style:i,color:s},bottom:{style:e,color:r},diagonal:{style:void 0,color:void 0}})),p}(i)),n&&(u=kn(n)),s&&(h=function(t){if(t=o._.utf8_encode(t),ho[t])return ho[t];var e=Ho.findIndex((function(e){return e.formatCode===t}));return-1===e?(e=Ho.length+164,Ho.push({formatCode:t,numFmtId:e})):e=Ho[e].numFmtId,e}(s.format)),zo[l]=$o.length,$o.push({alignment:e,borderId:d||0,fillId:c||0,fontId:u||0,numFmtId:h||0,protection:a,xfId:0})))},Pn=function(t){var e=tn(Ho),i=on(Uo.map((function(e){return Dn(Dn({},e),{size:null!=e.size?e.size:t})}))),o=rn(Ko),n=yn(Yo),r=Cn(Xo),s=wn($o),a=On(qo);return Tn(),{name:"styleSheet",properties:{rawMap:{"mc:Ignorable":"x14ac x16r2 xr",xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:mc":"http://schemas.openxmlformats.org/markup-compatibility/2006","xmlns:x14ac":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac","xmlns:x16r2":"http://schemas.microsoft.com/office/spreadsheetml/2015/02/main","xmlns:xr":"http://schemas.microsoft.com/office/spreadsheetml/2014/revision"}},children:[e,i,o,n,r,s,a,{name:"tableStyles",properties:{rawMap:{count:0,defaultPivotStyle:"PivotStyleLight16",defaultTableStyle:"TableStyleMedium2"}}}]}},Nn=function(t,e){return zo[An(t,e)]||0},Ln=function(t,e){var i=(e+1).toString();return{name:"sheet",properties:{rawMap:{name:t,sheetId:i,"r:id":"rId".concat(i)}}}},_n=function(t){return{name:"sheets",children:t.map((function(t,e){return Ln(t,e)}))}},In=function(t){return{name:"workbook",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:[_n(t)]}},Fn=function(t){var e=t.min,i=t.max,o=t.outlineLevel,n=t.s,r=t.width,s=t.hidden,a=t.bestFit,l=1,c="0";return r>1&&(l=function(t){return Math.ceil((t-12)/7+1)}(r),c="1"),{name:"col",properties:{rawMap:{min:e,max:i,outlineLevel:null!=o?o:void 0,width:l,style:n,hidden:s?"1":"0",bestFit:a?"1":"0",customWidth:c}}}},Gn=function(t,e,i){var n=t.ref,r=t.data,s=t.styleId,a=r||{type:"empty",value:null},l=a.type,c=a.value,d=l;"f"===l?d="str":l.charAt(0)===l.charAt(0).toUpperCase()&&(d=function(t){var e=t.charAt(0).toLowerCase();return"s"===e?"inlineStr":e}(l));var u,h={name:"c",properties:{rawMap:{r:n,t:"empty"===d?void 0:d,s:s?Nn(s,i):void 0}}};return"empty"===d?h:(u="str"===d&&"f"===l?[{name:"f",textNode:o._.escapeString(o._.utf8_encode(c))}]:"inlineStr"===d?[{name:"is",children:[{name:"t",textNode:o._.escapeString(o._.utf8_encode(c))}]}]:[{name:"v",textNode:c}],Object.assign({},h,{children:u}))},Bn=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Vn=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},jn=function(t){var e;return""!==(null===(e=t.data)||void 0===e?void 0:e.value)||void 0!==t.styleId},Wn=function(t,e,i){var o=t.collapsed,n=t.hidden,r=t.height,s=t.outlineLevel,a=t.cells,l=void 0===a?[]:a;!function(t,e){for(var i=[],o=0,n=0;n<t.length;n++)(s=t[n]).mergeAcross&&(i.push({pos:n,excelPos:o}),o+=s.mergeAcross),o++;if(i.length)for(n=i.length-1;n>=0;n--){for(var r=[],s=t[i[n].pos],a=1;a<=s.mergeAcross;a++)r.push({ref:"".concat(vo(i[n].excelPos+1+a)).concat(e+1),styleId:s.styleId,data:{type:"empty",value:null}});r.length&&t.splice.apply(t,Vn([i[n].pos+1,0],Bn(r),!1))}}(l,e);var c=l.filter(jn).map((function(t,e){return Gn(t,e,i)}));return{name:"row",properties:{rawMap:{r:e+1,collapsed:o?"1":"0",hidden:n?"1":"0",ht:r,customHeight:null!=r?"1":"0",spans:"1:1",outlineLevel:s||void 0}},children:c}},zn=function(t){return{name:"mergeCell",properties:{rawMap:{ref:t}}}},Hn=function(t){if(null==t)return 1;var e=["Letter","Letter Small","Tabloid","Ledger","Legal","Statement","Executive","A3","A4","A4 Small","A5","A6","B4","B5","Folio","Envelope","Envelope DL","Envelope C5","Envelope B5","Envelope C3","Envelope C4","Envelope C6","Envelope Monarch","Japanese Postcard","Japanese Double Postcard"].indexOf(t);return-1===e?1:e+1},Un=function(t){return t.reduce((function(t,e){var i,n,r,s,a="Center"===(i=e.position)?"C":"Right"===i?"R":"L",l=(n="".concat(t,"&amp;").concat(a),(r=e.font)?(n+="&amp;&quot;",n+=r.fontName||"Calibri",r.bold!==r.italic?n+=r.bold?",Bold":",Italic":r.bold?n+=",Bold Italic":n+=",Regular",n+="&quot;",r.size&&(n+="&amp;".concat(r.size)),r.strikeThrough&&(n+="&amp;S"),r.underline&&(n+="&amp;".concat("Double"===r.underline?"E":"U")),r.color&&(n+="&amp;K".concat(r.color.replace("#","").toUpperCase())),n):n);return"".concat(l).concat(o._.escapeString(o._.utf8_encode((s=e.value,o._.iterateObject({"&[Page]":"&P","&[Pages]":"&N","&[Date]":"&D","&[Time]":"&T","&[Tab]":"&A","&[Path]":"&Z","&[File]":"&F"},(function(t,e){s=s.replace(t,e)})),s))))}),"")},Kn=function(t){var e=[];return["all","first","even"].forEach((function(i){var n=t[i],r="all"===i?"odd":i;n&&(n.header||n.footer)&&o._.iterateObject(n,(function(t,i){var o="".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));i&&e.push({name:"".concat(r).concat(o),properties:{rawMap:{"xml:space":"preserve"}},textNode:Un(i)})}))})),e},Yn=function(t){var e,i=t.worksheet,n=t.currentSheet,r=t.config,s=r.margins,a=void 0===s?{}:s,l=r.pageSetup,c=r.headerFooterConfig,d=r.suppressColumnOutline,u=i.table,h=u.rows,p=u.columns,f=p&&p.length?function(t,e,i){var o=[],n=[];t.forEach((function(t,i){var r,s=t.cells,a=0;s.forEach((function(t,s){var l=s+a+1,c=vo(l),d=i+1;if(t.mergeAcross){a+=t.mergeAcross;var u=vo(s+a+1);o.push("".concat(c).concat(d,":").concat(u).concat(d))}e[l-1]||(e[l-1]={});var h=t.collapsibleRanges;h&&h.forEach((function(t){n.push([l+t[0],l+t[1]])})),(r=e[l-1]).min=l,r.max=l,t.ref="".concat(c).concat(d)}))})),n.sort((function(t,e){return t[0]!==e[0]?t[0]-e[0]:e[1]-t[1]}));var r=new Map,s=new Map;return n.filter((function(t){var e=t.toString();return!r.get(e)&&(r.set(e,!0),!0)})).forEach((function(t){var o=e.find((function(e){return e.min==t[0]&&e.max==t[1]})),n=s.get(t[0]);e.push({min:t[0],max:t[1],outlineLevel:i?void 0:n||1,width:(o||{width:100}).width}),s.set(t[0],(n||0)+1)})),o}(h,p,!!d):[],g=o._.compose((function(t){return t.push({name:"sheetPr",children:[{name:"outlinePr",properties:{rawMap:{summaryBelow:0}}}]}),t}),function(t){return function(e){var i=t.reduce((function(t,e){return e.outlineLevel&&e.outlineLevel>t?e.outlineLevel:t}),0);return e.push({name:"sheetFormatPr",properties:{rawMap:{baseColWidth:10,defaultRowHeight:16,outlineLevelRow:i||void 0}}}),e}}(h),function(t){return function(e){return t.length&&e.push({name:"cols",children:t.map((function(t){return Fn(t)}))}),e}}(p),function(t,e){return function(i){return t.length&&i.push({name:"sheetData",children:t.map((function(t,i){return Wn(t,i,e)}))}),i}}(h,n+1),(e=f,function(t){return e.length&&t.push({name:"mergeCells",properties:{rawMap:{count:e.length}},children:e.map((function(t){return zn(t)}))}),t}),function(t){return function(e){var i=t.top,o=void 0===i?.75:i,n=t.right,r=void 0===n?.7:n,s=t.bottom,a=void 0===s?.75:s,l=t.left,c=void 0===l?.7:l,d=t.header,u=void 0===d?.3:d,h=t.footer,p=void 0===h?.3:h;return e.push({name:"pageMargins",properties:{rawMap:{bottom:a,footer:p,header:u,left:c,right:r,top:o}}}),e}}(a),function(t){return function(e){var i;return t&&e.push({name:"pageSetup",properties:{rawMap:{horizontalDpi:0,verticalDpi:0,orientation:(i=t.orientation,!i||"Portrait"!==i&&"Landscape"!==i?"portrait":i.toLocaleLowerCase()),paperSize:Hn(t.pageSize)}}}),e}}(l),function(t){return function(e){if(!t)return e;var i=null!=t.first?1:0,o=null!=t.even?1:0;return e.push({name:"headerFooter",properties:{rawMap:{differentFirst:i,differentOddEven:o}},children:Kn(t)}),e}}(c),function(t){return function(e){return Jn.worksheetImages.get(t)&&e.push({name:"drawing",properties:{rawMap:{"r:id":"rId1"}}}),e}}(n));return{name:"worksheet",properties:{prefixedAttributes:[{prefix:"xmlns:",map:{r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}}],rawMap:{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"}},children:g([])}},Xn=function(t){return{name:"Relationship",properties:{rawMap:{Id:t.Id,Type:t.Type,Target:t.Target}}}},$n=function(t){return{name:"Relationships",properties:{rawMap:{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"}},children:t.map((function(t){return Xn(t)}))}},qn=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Zn=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Jn=function(){function t(){}return t.createExcel=function(t,e,i){return this.addSheetName(e),function(t,e){1===(Zo=e)&&Tn(),t.forEach(Rn)}(t,this.sheetNames.length),this.createWorksheet(e,i)},t.buildImageMap=function(t,e,i,o,n){var r=this.sheetNames.length,s=this.images.get(t.id);t.position&&t.position.row&&t.position.column||(t.position||(t.position={}),t.position=Object.assign({},t.position,{row:e,column:o.indexOf(i)+1}));var a=t;if(function(t,e){var i=t.position,o=i.colSpan,n=i.column;if(t.width)if(o)for(var r=e.slice(n-1,n+o-1),s=0,a=0;a<r.length;a++){var l=r[a].getActualWidth();if(t.width<s+l){t.position.colSpan=a+1,t.totalWidth=t.width,t.width=t.totalWidth-s;break}s+=l}else t.totalWidth=t.width}(a,o),function(t,e){var i,o=t.position,n=o.rowSpan,r=o.row;if(t.height)if(n)for(var s=0,a=0,l=r;l<r+n;l++){var c=(i=fo(l,e)||20,Math.round(96*i/72));if(t.height<s+c){t.position.rowSpan=a+1,t.totalHeight=t.height,t.height=t.totalHeight-s;break}s+=c,a++}else t.totalHeight=t.height}(a,n),s){var l=s.find((function(t){return t.sheetId===r}));l?l.image.push(a):s.push({sheetId:r,image:[a]})}else this.images.set(a.id,[{sheetId:r,image:[a]}]),this.workbookImageIds.set(a.id,{type:a.imageType,index:this.workbookImageIds.size});this.buildSheetImageMap(r,a)},t.buildSheetImageMap=function(t,e){var i=this.worksheetImageIds.get(t);i||(i=new Map,this.worksheetImageIds.set(t,i));var o=this.worksheetImages.get(t);o?(o.push(e),i.get(e.id)||i.set(e.id,{index:i.size,type:e.imageType})):(this.worksheetImages.set(t,[e]),i.set(e.id,{index:0,type:e.imageType}))},t.addSheetName=function(t){for(var e=o._.escapeString(t.name)||"",i="";-1!==this.sheetNames.indexOf("".concat(e).concat(i));)if(""===i)i="_1";else{var n=parseInt(i.slice(1),10);i="_".concat(n+1)}t.name="".concat(e).concat(i),this.sheetNames.push(t.name)},t.getStringPosition=function(t){return this.sharedStrings.has(t)?this.sharedStrings.get(t):(this.sharedStrings.set(t,this.sharedStrings.size),this.sharedStrings.size-1)},t.resetFactory=function(){this.sharedStrings=new Map,this.images=new Map,this.worksheetImages=new Map,this.workbookImageIds=new Map,this.worksheetImageIds=new Map,this.sheetNames=[],this.factoryMode=o.FiP.SINGLE_SHEET},t.createWorkbook=function(){return go(In(this.sheetNames))},t.createStylesheet=function(t){return go(Pn(t))},t.createSharedStrings=function(){return go(Wo(this.sharedStrings))},t.createCore=function(t){return go(so(t))},t.createContentTypes=function(t){return go(uo(t))},t.createRels=function(){var t=$n([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",Target:"xl/workbook.xml"},{Id:"rId2",Type:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",Target:"docProps/core.xml"}]);return go(t)},t.createTheme=function(){return go(Vo())},t.createWorkbookRels=function(t){var e=new Array(t).fill(void 0).map((function(t,e){return{Id:"rId".concat(e+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:"worksheets/sheet".concat(e+1,".xml")}})),i=$n(Zn(Zn([],qn(e),!1),[{Id:"rId".concat(t+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",Target:"theme/theme1.xml"},{Id:"rId".concat(t+2),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"},{Id:"rId".concat(t+3),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}],!1));return go(i)},t.createDrawing=function(t){return go(Eo({sheetIndex:t}))},t.createDrawingRel=function(t){var e=this,i=this.worksheetImageIds.get(t),o=[];return i.forEach((function(t,i){o.push({Id:"rId".concat(t.index+1),Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",Target:"../media/image".concat(e.workbookImageIds.get(i).index+1,".").concat(t.type)})})),go($n(o))},t.createWorksheetDrawingRel=function(t){var e=$n([{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",Target:"../drawings/drawing".concat(t+1,".xml")}]);return go(e)},t.createWorksheet=function(t,e){return go(Yn({worksheet:t,currentSheet:this.sheetNames.length-1,config:e}))},t.sharedStrings=new Map,t.sheetNames=[],t.images=new Map,t.worksheetImages=new Map,t.workbookImageIds=new Map,t.worksheetImageIds=new Map,t.factoryMode=o.FiP.SINGLE_SHEET,t}(),Qn=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),tr=function(){return tr=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},tr.apply(this,arguments)},er=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},ir=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},or=function(t){function e(e){var i=t.call(this,e)||this;return i.mixedStyles={},i.mixedStyleCounter=0,i.rows=[],i.config=Object.assign({},e),i.stylesByIds={},i.config.baseExcelStyles.forEach((function(t){i.stylesByIds[t.id]=t})),i.excelStyles=ir([],er(i.config.baseExcelStyles),!1),i}return Qn(e,t),e.prototype.addCustomContent=function(t){var e=this;t.forEach((function(t){var i,o=e.rows.length+1;e.config.suppressRowOutline||null==t.outlineLevel||(i=t.outlineLevel);var n={height:fo(o,t.height||e.config.rowHeight),cells:(t.cells||[]).map((function(t,i){var n,r,s,a=e.addImage(o,e.columnsToExport[i],null===(n=t.data)||void 0===n?void 0:n.value),l=null;t.styleId&&(l="string"===typeof t.styleId?[t.styleId]:t.styleId);var c=e.getStyleId(l);if(a)return e.createCell(c,e.getDataTypeForValue(a.value),null==a.value?"":a.value);var d=null!==(s=null===(r=t.data)||void 0===r?void 0:r.value)&&void 0!==s?s:"",u=e.getDataTypeForValue(d);return t.mergeAcross?e.createMergedCell(c,u,d,t.mergeAcross):e.createCell(c,u,d)})),outlineLevel:i};null!=t.collapsed&&(n.collapsed=t.collapsed),null!=t.hidden&&(n.hidden=t.hidden),e.rows.push(n)}))},e.prototype.onNewHeaderGroupingRow=function(){var t=this,e=[];return this.rows.push({cells:e,height:fo(this.rows.length+1,this.config.headerRowHeight)}),{onColumn:function(i,n,r,s,a){var l=t.config.styleLinker({rowType:o.T6X.HEADER_GROUPING,rowIndex:1,value:"grouping-".concat(n),columnGroup:i});e.push(tr(tr({},t.createMergedCell(t.getStyleId(l),t.getDataTypeForValue("string"),n,s)),{collapsibleRanges:a}))}}},e.prototype.onNewHeaderRow=function(){return this.onNewRow(this.onNewHeaderColumn,this.config.headerRowHeight)},e.prototype.onNewBodyRow=function(t){var e=this.onNewRow(this.onNewBodyColumn,this.config.rowHeight);return t&&this.addRowOutlineIfNecessary(t),e},e.prototype.prepare=function(e){var i=this;t.prototype.prepare.call(this,e),this.columnsToExport=ir([],er(e),!1),this.cols=e.map((function(t,e){return i.convertColumnToExcel(t,e)}))},e.prototype.parse=function(){for(var t=this.rows.reduce((function(t,e){return Math.max(t,e.cells.length)}),0);this.cols.length<t;)this.cols.push(this.convertColumnToExcel(null,this.cols.length+1));var e={name:this.config.sheetName,table:{columns:this.cols,rows:this.rows}};return this.createExcel(e)},e.prototype.addRowOutlineIfNecessary=function(t){var e=this.config,i=e.gridOptionsService,n=e.suppressRowOutline,r=e.rowGroupExpandState,s=void 0===r?"expanded":r;if(!i.get("groupHideOpenParents")&&!n&&null!=t.level){var a=t.footer?1:0,l=o._.last(this.rows);if(l.outlineLevel=t.level+a,"expanded"!==s){var c="collapsed"===s;if(t.isExpandable()){var d=!c&&t.expanded;l.collapsed=!d}l.hidden=!!t.parent&&-1!==t.parent.level&&(c||this.isAnyParentCollapsed(t.parent))}}},e.prototype.isAnyParentCollapsed=function(t){for(;t&&-1!==t.level;){if(!t.expanded)return!0;t=t.parent}return!1},e.prototype.convertColumnToExcel=function(t,e){var i=this.config.columnWidth;if(i)return"number"===typeof i?{width:i}:{width:i({column:t,index:e})};if(t){return{width:Math.max(t.getActualWidth(),75)}}return{}},e.prototype.onNewHeaderColumn=function(t,e){var i=this;return function(n,r){var s=i.extractHeaderValue(n),a=i.config.styleLinker({rowType:o.T6X.HEADER,rowIndex:t,value:s,column:n});e.push(i.createCell(i.getStyleId(a),i.getDataTypeForValue("string"),s))}},e.prototype.onNewBodyColumn=function(t,e){var i=this,n=0;return function(r,s,a){if(n>0)n-=1;else{var l=i.extractRowCellValue(r,s,t,"excel",a),c=l.value,d=l.valueFormatted,u=i.config.styleLinker({rowType:o.T6X.BODY,rowIndex:t,value:c,column:r,node:a}),h=i.getStyleId(u),p=r.getColSpan(a),f=i.addImage(t,r,c);f?e.push(i.createCell(h,i.getDataTypeForValue(f.value),null==f.value?"":f.value)):p>1?(n=p-1,e.push(i.createMergedCell(h,i.getDataTypeForValue(c),c,p-1))):e.push(i.createCell(h,i.getDataTypeForValue(c),c,d))}}},e.prototype.onNewRow=function(t,e){var i=[];return this.rows.push({cells:i,height:fo(this.rows.length+1,e)}),{onColumn:t.bind(this,this.rows.length,i)()}},e.prototype.createExcel=function(t){var e=this.excelStyles,i=this.config;return Jn.createExcel(e,t,i)},e.prototype.getDataTypeForValue=function(t){return void 0===t?"empty":this.isNumerical(t)?"n":"s"},e.prototype.getType=function(t,e,i){if(this.isFormula(i))return"f";if(e&&e.dataType)switch(e.dataType.toLocaleLowerCase()){case"formula":return"f";case"string":return"s";case"number":return"n";case"datetime":return"d";case"error":return"e";case"boolean":return"b";default:console.warn("AG Grid: Unrecognized data type for excel export [".concat(e.id,".dataType=").concat(e.dataType,"]"))}return t},e.prototype.addImage=function(t,e,i){if(this.config.addImageToCell){var o=this.config.addImageToCell(t,e,i);if(o)return Jn.buildImageMap(o.image,t,e,this.columnsToExport,this.config.rowHeight),o}},e.prototype.createCell=function(t,e,i,o){var n=this.getStyleById(t);!(null===n||void 0===n?void 0:n.dataType)&&"s"===e&&o&&(i=o);var r=this.getType(e,n,i)||e;return{styleId:n?t:void 0,data:{type:r,value:this.getCellValue(r,i)}}},e.prototype.createMergedCell=function(t,e,i,o){var n=null==i?"":i;return{styleId:this.getStyleById(t)?t:void 0,data:{type:e,value:"s"===e?Jn.getStringPosition(n).toString():i},mergeAcross:o}},e.prototype.getCellValue=function(t,e){if(null==e)return Jn.getStringPosition("").toString();switch(t){case"s":return""===e?"":Jn.getStringPosition(e).toString();case"f":return e.slice(1);case"n":return Number(e).toString();default:return e}},e.prototype.getStyleId=function(t){if(!t||!t.length)return null;if(1===t.length)return t[0];var e=t.join("-");return this.mixedStyles[e]||this.addNewMixedStyle(t),this.mixedStyles[e].excelID},e.prototype.addNewMixedStyle=function(t){var e=this;this.mixedStyleCounter+=1;var i="mixedStyle".concat(this.mixedStyleCounter),n={};t.forEach((function(t){e.excelStyles.forEach((function(e){e.id===t&&o._.mergeDeep(n,o._.deepCloneObject(e))}))})),n.id=i,n.name=i;var r=t.join("-");this.mixedStyles[r]={excelID:i,key:r,result:n},this.excelStyles.push(n),this.stylesByIds[i]=n},e.prototype.isFormula=function(t){return null!=t&&(this.config.autoConvertFormulas&&t.toString().startsWith("="))},e.prototype.isNumerical=function(t){return"bigint"===typeof t||isFinite(t)&&""!==t&&!isNaN(parseFloat(t))},e.prototype.getStyleById=function(t){return null==t?null:this.stylesByIds[t]||null},e}(o.NF5),nr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),rr=function(){return rr=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},rr.apply(this,arguments)},sr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ar=function(t){var e=t.data,i=t.fontSize,n=void 0===i?11:i,r=t.author,s=void 0===r?"AG Grid":r,a=Jn.images.size>0;if(o.J1w.addFolders(["_rels/","docProps/","xl/","xl/theme/","xl/_rels/","xl/worksheets/"]),a){o.J1w.addFolders(["xl/worksheets/_rels","xl/drawings/","xl/drawings/_rels","xl/media/"]);var l=0;Jn.images.forEach((function(t){var e=t[0].image[0],i=e.imageType;o.J1w.addFile("xl/media/image".concat(++l,".").concat(i),e.base64,!0)}))}if(!e||0===e.length)return console.warn("AG Grid: Invalid params supplied to getMultipleSheetsAsExcel() - `ExcelExportParams.data` is empty."),void Jn.resetFactory();var c=e.length,d=0;e.forEach((function(t,e){o.J1w.addFile("xl/worksheets/sheet".concat(e+1,".xml"),t),a&&Jn.worksheetImages.get(e)&&cr(e,d++)})),o.J1w.addFile("xl/workbook.xml",Jn.createWorkbook()),o.J1w.addFile("xl/styles.xml",Jn.createStylesheet(n)),o.J1w.addFile("xl/sharedStrings.xml",Jn.createSharedStrings()),o.J1w.addFile("xl/theme/theme1.xml",Jn.createTheme()),o.J1w.addFile("xl/_rels/workbook.xml.rels",Jn.createWorkbookRels(c)),o.J1w.addFile("docProps/core.xml",Jn.createCore(s)),o.J1w.addFile("[Content_Types].xml",Jn.createContentTypes(c)),o.J1w.addFile("_rels/.rels",Jn.createRels()),Jn.resetFactory();var u=t.mimeType||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";return o.J1w.getContent(u)},lr=function(t){var e=t.fileName,i=void 0===e?"export.xlsx":e,n=ar(t);n&&o._7R.download(i,n)},cr=function(t,e){var i="xl/drawings",n="".concat(i,"/drawing").concat(e+1,".xml"),r="".concat(i,"/_rels/drawing").concat(e+1,".xml.rels"),s="xl/worksheets/_rels/sheet".concat(t+1,".xml.rels");o.J1w.addFile(r,Jn.createDrawingRel(t)),o.J1w.addFile(n,Jn.createDrawing(t)),o.J1w.addFile(s,Jn.createWorksheetDrawingRel(e))},dr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nr(e,t),e.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},e.prototype.getMergedParams=function(t){var e=this.gridOptionsService.get("defaultExcelExportParams");return Object.assign({},e,t)},e.prototype.export=function(t){if(this.isExportSuppressed())return console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration."),"";var e=this.getMergedParams(t),i=this.getData(e),n={data:[i],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType},r=this.packageFile(n);return r&&o._7R.download(this.getFileName(e.fileName),r),i},e.prototype.exportDataAsExcel=function(t){return this.export(t)},e.prototype.getDataAsExcel=function(t){var e=this.getMergedParams(t),i={data:[this.getData(e)],fontSize:e.fontSize,author:e.author,mimeType:e.mimeType};return this.packageFile(i)},e.prototype.setFactoryMode=function(t){Jn.factoryMode=t},e.prototype.getFactoryMode=function(){return Jn.factoryMode},e.prototype.getSheetDataForExcel=function(t){var e=this.getMergedParams(t);return this.getData(e)},e.prototype.getMultipleSheetsAsExcel=function(t){return ar(t)},e.prototype.exportMultipleSheetsAsExcel=function(t){return lr(t)},e.prototype.getDefaultFileExtension=function(){return"xlsx"},e.prototype.createSerializingSession=function(t){var e=this,i=e.columnModel,n=e.valueService,r=e.gridOptionsService,s=e.valueFormatterService,a=e.valueParserService,l="ag-grid";null!=t.sheetName&&(l=o._.utf8_encode(String(t.sheetName).substring(0,31)));var c=rr(rr({},t),{sheetName:l,columnModel:i,valueService:n,gridOptionsService:r,valueFormatterService:s,valueParserService:a,suppressRowOutline:t.suppressRowOutline||t.skipRowGroups,headerRowHeight:t.headerRowHeight||t.rowHeight,baseExcelStyles:this.gridOptionsService.get("excelStyles")||[],styleLinker:this.styleLinker.bind(this)});return new or(c)},e.prototype.styleLinker=function(t){var e=t.rowType,i=t.rowIndex,n=t.value,r=t.column,s=t.columnGroup,a=t.node,l=e===o.T6X.HEADER,c=e===o.T6X.HEADER_GROUPING,d=l?r:s,u=[];if(l||c)return u.push("header"),c&&u.push("headerGroup"),d&&(u=u.concat(o.PC7.getHeaderClassesFromColDef(d.getDefinition(),this.gridOptionsService,r||null,s||null))),u;var h=this.gridOptionsService.get("excelStyles"),p=["cell"];if(!h||!h.length)return p;var f=h.map((function(t){return t.id}));return this.stylingService.processAllCellClasses(r.getDefinition(),{value:n,data:a.data,node:a,colDef:r.getDefinition(),column:r,rowIndex:i,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context},(function(t){f.indexOf(t)>-1&&p.push(t)})),p.sort((function(t,e){return f.indexOf(t)<f.indexOf(e)?-1:1}))},e.prototype.isExportSuppressed=function(){return this.gridOptionsService.get("suppressExcelExport")},e.prototype.packageFile=function(t){return ar(t)},sr([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),sr([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),sr([(0,o.dsm)("stylingService")],e.prototype,"stylingService",void 0),sr([(0,o.dsm)("gridSerializer")],e.prototype,"gridSerializer",void 0),sr([(0,o.dsm)("gridOptionsService")],e.prototype,"gridOptionsService",void 0),sr([(0,o.dsm)("valueFormatterService")],e.prototype,"valueFormatterService",void 0),sr([(0,o.dsm)("valueParserService")],e.prototype,"valueParserService",void 0),sr([o.o7C],e.prototype,"postConstruct",null),e=sr([(0,o.dR4)("excelCreator")],e)}(o.YzF),ur={version:"31.0.0",moduleName:o.zsj.ExcelExportModule,beans:[dr,o.pK6,o.HvL],dependantModules:[o.n76,g]},hr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),pr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};!function(t){t[t.EXPANDED=0]="EXPANDED",t[t.COLLAPSED=1]="COLLAPSED",t[t.INDETERMINATE=2]="INDETERMINATE"}(Jo||(Jo={}));var fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return hr(e,t),e.prototype.preConstruct=function(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')},e.prototype.postConstruct=function(){var t=this.localeService.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(t("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(Jo.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))},e.prototype.init=function(t){this.params=t,this.columnModel.isReady()&&this.showOrHideOptions()},e.prototype.createExpandIcons=function(){this.eExpand.appendChild(this.eExpandChecked=o._.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=o._.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=o._.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))},e.prototype.showOrHideOptions=function(){var t=!this.params.suppressFilterSearch,e=!this.params.suppressExpandAll,i=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(i("searchOoo","Search..."));var n=this.columnModel.getAllGridColumns().some((function(t){return t.getOriginalParent()&&t.isFilterAllowed()}));o._.setDisplayed(this.eFilterTextField.getGui(),t),o._.setDisplayed(this.eExpand,e&&n)},e.prototype.onSearchTextChanged=function(){var t=this;this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=o._.debounce((function(){t.dispatchEvent({type:"searchChanged",searchText:t.eFilterTextField.getValue()})}),300)),this.onSearchTextChangedDebounced()},e.prototype.onExpandClicked=function(){var t=this.currentExpandState===Jo.EXPANDED?{type:"collapseAll"}:{type:"expandAll"};this.dispatchEvent(t)},e.prototype.setExpandState=function(t){this.currentExpandState=t,o._.setDisplayed(this.eExpandChecked,this.currentExpandState===Jo.EXPANDED),o._.setDisplayed(this.eExpandUnchecked,this.currentExpandState===Jo.COLLAPSED),o._.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===Jo.INDETERMINATE)},pr([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),pr([(0,o.PIB)("eExpand")],e.prototype,"eExpand",void 0),pr([(0,o.PIB)("eFilterTextField")],e.prototype,"eFilterTextField",void 0),pr([o.fK3],e.prototype,"preConstruct",null),pr([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),gr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),vr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},yr=function(t){function e(i,o){var n=t.call(this,e.TEMPLATE)||this;return n.expandedCallback=o,n.expanded=!1,n.hideHeader=i,n}return gr(e,t),e.prototype.postConstruct=function(){this.eExpandChecked=o._.createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=o._.createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)},e.prototype.setColumn=function(t){var e=this;this.column=t,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",(function(t){t.key!==o.DDm.ENTER&&t.key!==o.DDm.SPACE||(t.preventDefault(),e.toggleExpanded())})),this.addManagedListener(this.eventService,o.sVA.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),o._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),o._.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(o._.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,o.VPZ.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))},e.prototype.getColumn=function(){return this.column},e.prototype.getColumnFilterName=function(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)},e.prototype.addCssClassToTitleBar=function(t){this.eFilterToolPanelHeader.classList.add(t)},e.prototype.addInIcon=function(t,e,i){if(null!=e){var n=o._.createIconNoSpan(t,this.gridOptionsService,i);e.appendChild(n)}},e.prototype.isFilterActive=function(){return this.filterManager.isFilterActive(this.column)},e.prototype.onFilterChanged=function(){o._.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:o.VPZ.EVENT_FILTER_CHANGED})},e.prototype.onFilterDestroyed=function(t){this.expanded&&"api"===t.source&&t.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement())},e.prototype.toggleExpanded=function(){this.expanded?this.collapse():this.expand()},e.prototype.expand=function(){this.expanded||(this.expanded=!0,o._.setAriaExpanded(this.eFilterToolPanelHeader,!0),o._.setDisplayed(this.eExpandChecked,!0),o._.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())},e.prototype.addFilterElement=function(){var t=this,e=o._.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),i=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(i){var n=i.filterPromise,r=i.guiPromise;null===n||void 0===n||n.then((function(i){t.underlyingFilter=i,i&&r.then((function(o){o&&e.appendChild(o),t.agFilterToolPanelBody.appendChild(e),i.afterGuiAttached&&i.afterGuiAttached({container:"toolPanel"})}))}))}},e.prototype.collapse=function(){var t,e;this.expanded&&(this.expanded=!1,o._.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),o._.setDisplayed(this.eExpandChecked,!1),o._.setDisplayed(this.eExpandUnchecked,!0),null===(e=null===(t=this.underlyingFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===e||e.call(t),this.expandedCallback())},e.prototype.removeFilterElement=function(){o._.clearElement(this.agFilterToolPanelBody)},e.prototype.isExpanded=function(){return this.expanded},e.prototype.refreshFilter=function(t){var e;if(this.expanded){var i=this.underlyingFilter;i&&(t?"function"===typeof i.refreshVirtualList&&i.refreshVirtualList():null===(e=i.afterGuiDetached)||void 0===e||e.call(i))}},e.prototype.onFilterOpened=function(t){"COLUMN_MENU"===t.source&&t.column===this.column&&this.expanded&&this.collapse()},e.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',vr([(0,o.PIB)("eFilterToolPanelHeader")],e.prototype,"eFilterToolPanelHeader",void 0),vr([(0,o.PIB)("eFilterName")],e.prototype,"eFilterName",void 0),vr([(0,o.PIB)("agFilterToolPanelBody")],e.prototype,"agFilterToolPanelBody",void 0),vr([(0,o.PIB)("eFilterIcon")],e.prototype,"eFilterIcon",void 0),vr([(0,o.PIB)("eExpand")],e.prototype,"eExpand",void 0),vr([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),vr([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),vr([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),mr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),br=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Sr=function(t){function e(e,i,o,n,r){var s=t.call(this)||this;return s.columnGroup=e,s.childFilterComps=i,s.depth=n,s.expandedCallback=o,s.showingColumn=r,s}return mr(e,t),e.prototype.preConstruct=function(){this.setTemplate(e.TEMPLATE,{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}})},e.prototype.init=function(){var t=this;this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass("ag-filter-toolpanel-group-level-".concat(this.depth)),this.filterGroupComp.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(this.depth,"-header")),this.childFilterComps.forEach((function(e){t.filterGroupComp.addItem(e),e.addCssClassToTitleBar("ag-filter-toolpanel-group-level-".concat(t.depth+1,"-header"))})),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()},e.prototype.setupTooltip=function(){var t=this;if(this.showingColumn){var e=function(){var e=t.columnGroup.getColDef().headerTooltip;t.setTooltip(e)};e(),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,e)}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="filterToolPanelColumnGroup",e},e.prototype.addCssClassToTitleBar=function(t){this.filterGroupComp.addCssClassToTitleBar(t)},e.prototype.refreshFilters=function(t){this.childFilterComps.forEach((function(i){i instanceof e?i.refreshFilters(t):i.refreshFilter(t)}))},e.prototype.isColumnGroup=function(){return this.columnGroup instanceof o.D45},e.prototype.isExpanded=function(){return this.filterGroupComp.isExpanded()},e.prototype.getChildren=function(){return this.childFilterComps},e.prototype.getFilterGroupName=function(){return this.filterGroupName?this.filterGroupName:""},e.prototype.getFilterGroupId=function(){return this.columnGroup.getId()},e.prototype.hideGroupItem=function(t,e){this.filterGroupComp.hideItem(t,e)},e.prototype.hideGroup=function(t){this.setDisplayed(!t)},e.prototype.forEachToolPanelFilterChild=function(t){this.childFilterComps.forEach((function(e){e instanceof yr&&t(e)}))},e.prototype.addExpandCollapseListeners=function(){var t=this,e=this.isColumnGroup()?function(){return t.expandedCallback()}:function(){return t.forEachToolPanelFilterChild((function(t){return t.expand()}))},i=this.isColumnGroup()?function(){return t.expandedCallback()}:function(){return t.forEachToolPanelFilterChild((function(t){return t.collapse()}))};this.addManagedListener(this.filterGroupComp,o.Pk_.EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,o.Pk_.EVENT_COLLAPSED,i)},e.prototype.getColumns=function(){return this.columnGroup instanceof o.D45?this.columnGroup.getLeafColumns():[this.columnGroup]},e.prototype.addFilterChangedListeners=function(){var t=this;this.getColumns().forEach((function(e){t.addManagedListener(e,o.VPZ.EVENT_FILTER_CHANGED,(function(){return t.refreshFilterClass()}))})),this.columnGroup instanceof o.D45||this.addManagedListener(this.eventService,o.sVA.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))},e.prototype.refreshFilterClass=function(){var t=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",t.some((function(t){return t.isFilterActive()})))},e.prototype.onFilterOpened=function(t){"COLUMN_MENU"===t.source&&t.column===this.columnGroup&&this.isExpanded()&&this.collapse()},e.prototype.expand=function(){this.filterGroupComp.toggleGroupExpand(!0)},e.prototype.collapse=function(){this.filterGroupComp.toggleGroupExpand(!1)},e.prototype.setGroupTitle=function(){this.filterGroupName=this.columnGroup instanceof o.D45?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")},e.prototype.getColumnGroupName=function(t){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,t,"filterToolPanel")},e.prototype.getColumnName=function(t){return this.columnModel.getDisplayNameForColumn(t,"filterToolPanel",!1)},e.prototype.destroyFilters=function(){this.childFilterComps=this.destroyBeans(this.childFilterComps),o._.clearElement(this.getGui())},e.prototype.destroy=function(){this.destroyFilters(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',br([(0,o.PIB)("filterGroupComp")],e.prototype,"filterGroupComp",void 0),br([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),br([o.fK3],e.prototype,"preConstruct",null),br([o.o7C],e.prototype,"init",null),e}(o.uAl),xr=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Cr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},wr=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.initialised=!1,i.hasLoadedInitialState=!1,i.isInitialState=!1,i.filterGroupComps=[],i}return xr(e,t),e.prototype.init=function(t){var e=this;this.initialised=!0;var i={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridApi,columnApi:this.columnApi,context:this.gridOptionsService.context};o._.mergeDeep(i,t),this.params=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_MOVED,(function(){return e.onColumnsChanged()})),this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,(function(){return e.onColumnsChanged()})),this.addManagedListener(this.eventService,o.sVA.EVENT_TOOL_PANEL_VISIBLE_CHANGED,(function(t){"filters"===t.key&&e.refreshFilters(t.visible)})),this.columnModel.isReady()&&this.onColumnsChanged();var n=this.getAriaElement();o._.setAriaLive(n,"assertive"),o._.setAriaAtomic(n,!1),o._.setAriaRelevant(n,"text")},e.prototype.onColumnsChanged=function(){var t=this.columnModel.isPivotMode();!this.params.suppressSyncLayoutWithGrid&&!t?this.syncFilterLayout():this.buildTreeFromProvidedColumnDefs(),this.refreshAriaLabel()},e.prototype.syncFilterLayout=function(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this)),this.refreshAriaLabel()},e.prototype.buildTreeFromProvidedColumnDefs=function(){var t=this.columnModel.getPrimaryColumnTree();this.recreateFilters(t)},e.prototype.setFiltersLayout=function(t){var e=this.toolPanelColDefService.createColumnTree(t);this.recreateFilters(e)},e.prototype.recreateFilters=function(t){var e=this,i=this.gridOptionsService.getDocument().activeElement;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);var n=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(t,0,n);var r=this.filterGroupComps.length;r&&(this.filterGroupComps.forEach((function(t){return e.appendChild(t)})),this.setFirstAndLastVisible(0,r-1)),o._.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(i)&&i.focus(),this.isInitialState=!1,this.refreshAriaLabel()},e.prototype.recursivelyAddComps=function(t,e,i){var n=this;return o._.flatten(t.map((function(t){if(t instanceof o.D45)return o._.flatten(n.recursivelyAddFilterGroupComps(t,e,i));var r=t;if(!n.shouldDisplayFilter(r))return[];var s=new yr(0===e,(function(){return n.onFilterExpanded()}));if(n.createBean(s),s.setColumn(r),i.get(r.getId())&&s.expand(),e>0)return s;var a=n.createBean(new Sr(r,[s],n.onGroupExpanded.bind(n),e,!0));return a.addCssClassToTitleBar("ag-filter-toolpanel-header"),i.get(a.getFilterGroupId())||a.collapse(),a})))},e.prototype.refreshAriaLabel=function(){var t=this.localeService.getLocaleTextFunc(),e=t("ariaFilterPanelList","Filter List"),i=t("filters","Filters"),n=this.getGui().querySelectorAll("".concat(".ag-filter-toolpanel-group-item",":not(").concat(".ag-filter-toolpanel-group-wrapper",", ").concat(".ag-hidden",")")).length;o._.setAriaLabel(this.getAriaElement(),"".concat(e," ").concat(n," ").concat(i))},e.prototype.recursivelyAddFilterGroupComps=function(t,e,i){if(this.filtersExistInChildren(t.getChildren())){var n=t.getColGroupDef();if(n&&n.suppressFiltersToolPanel)return[];var r=t.isPadding()?e:e+1,s=o._.flatten(this.recursivelyAddComps(t.getChildren(),r,i));if(t.isPadding())return s;var a=new Sr(t,s,this.onGroupExpanded.bind(this),e,!1);this.createBean(a),a.addCssClassToTitleBar("ag-filter-toolpanel-header");var l=i.get(a.getFilterGroupId());return(this.isInitialState&&!l||!1===l)&&a.collapse(),[a]}},e.prototype.filtersExistInChildren=function(t){var e=this;return t.some((function(t){return t instanceof o.D45?e.filtersExistInChildren(t.getChildren()):e.shouldDisplayFilter(t)}))},e.prototype.shouldDisplayFilter=function(t){var e=t.getColDef()&&t.getColDef().suppressFiltersToolPanel;return t.isFilterAllowed()&&!e},e.prototype.getExpansionState=function(){var t=new Map;if(this.isInitialState){var e=this.params.initialState,i=e.expandedColIds,o=e.expandedGroupIds;return i.forEach((function(e){return t.set(e,!0)})),o.forEach((function(e){return t.set(e,!0)})),t}var n=function(e){t.set(e.getFilterGroupId(),e.isExpanded()),e.getChildren().forEach((function(e){e instanceof Sr?n(e):t.set(e.getColumn().getId(),e.isExpanded())}))};return this.filterGroupComps.forEach(n),t},e.prototype.refresh=function(){},e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.expandFilterGroups=function(t,e){var i=[],n=function(r){var s=r.getFilterGroupId();(!e||o._.includes(e,s))&&(t&&r.isColumnGroup()?r.expand():r.collapse(),i.push(s)),r.getChildren().forEach((function(t){t instanceof Sr&&n(t)}))};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),e){var r=e.filter((function(t){return i.indexOf(t)<0}));r.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",r)}},e.prototype.expandFilters=function(t,e){var i=[],n=function(r){if(r instanceof Sr){var s=!1;return r.getChildren().forEach((function(e){n(e)&&(t?(r.expand(),s=!0):r.isColumnGroup()||r.collapse())})),s}var a=r.getColumn().getColId(),l=!e||o._.includes(e,a);return l&&(t?r.expand():r.collapse(),i.push(a)),l};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),e){var r=e.filter((function(t){return i.indexOf(t)<0}));r.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",r)}},e.prototype.onGroupExpanded=function(){this.fireExpandedEvent()},e.prototype.onFilterExpanded=function(){this.dispatchEvent({type:"filterExpanded"})},e.prototype.fireExpandedEvent=function(){var t,e=0,i=0,o=function(t){t.isColumnGroup()&&(t.isExpanded()?e++:i++,t.getChildren().forEach((function(t){t instanceof Sr&&o(t)})))};this.filterGroupComps.forEach(o),t=e>0&&i>0?Jo.INDETERMINATE:i>0?Jo.COLLAPSED:Jo.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:t})},e.prototype.performFilterSearch=function(t){this.searchFilterText=o._.exists(t)?t.toLowerCase():null,this.searchFilters(this.searchFilterText)},e.prototype.searchFilters=function(t){var e,i,n=function(e){return!o._.exists(t)||-1!==e.toLowerCase().indexOf(t)},r=function(t,e){if(!(t instanceof Sr))return n(t.getColumnFilterName()||"");var i=t.getChildren(),o=n(t.getFilterGroupName()),s=e||o;if(s){t.hideGroup(!1);for(var a=0;a<i.length;a++)r(i[a],s),t.hideGroupItem(!1,a);return!0}var l=!1;return i.forEach((function(i,o){var n=r(i,e);t.hideGroupItem(!n,o),n&&(l=!0)})),t.hideGroup(!l),l};this.filterGroupComps.forEach((function(t,o){r(t,!1),void 0===e?t.containsCssClass("ag-hidden")||(e=o,i=o):t.containsCssClass("ag-hidden")||i===o||(i=o)})),this.setFirstAndLastVisible(e,i),this.refreshAriaLabel()},e.prototype.setFirstAndLastVisible=function(t,e){this.filterGroupComps.forEach((function(i,o){i.removeCssClass("ag-first-group-visible"),i.removeCssClass("ag-last-group-visible"),o===t&&i.addCssClass("ag-first-group-visible"),o===e&&i.addCssClass("ag-last-group-visible")}))},e.prototype.refreshFilters=function(t){this.filterGroupComps.forEach((function(e){return e.refreshFilters(t)}))},e.prototype.getExpandedFiltersAndGroups=function(){var t=[],e=new Set,i=function(o){if(o instanceof Sr){o.getChildren().forEach((function(t){return i(t)}));var n=o.getFilterGroupId();o.isExpanded()&&!e.has(n)&&t.push(n)}else o.isExpanded()&&e.add(o.getColumn().getColId())};return this.filterGroupComps.forEach(i),{expandedGroupIds:t,expandedColIds:Array.from(e)}},e.prototype.destroyFilters=function(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),o._.clearElement(this.getGui())},e.prototype.destroy=function(){this.destroyFilters(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-list-panel"></div>',Cr([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),Cr([(0,o.dsm)("columnApi")],e.prototype,"columnApi",void 0),Cr([(0,o.dsm)("toolPanelColDefService")],e.prototype,"toolPanelColDefService",void 0),Cr([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),e}(o.uAl),Er=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Or=function(){return Or=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Or.apply(this,arguments)},Dr=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ar=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.initialised=!1,i.listenerDestroyFuncs=[],i}return Er(e,t),e.prototype.init=function(t){this.initialised&&(this.listenerDestroyFuncs.forEach((function(t){return t()})),this.listenerDestroyFuncs=[]),this.initialised=!0;var e={suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi};this.params=Or(Or(Or({},e),t),{context:this.gridOptionsService.context}),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params);var i=this.params.suppressExpandAll,o=this.params.suppressFilterSearch;i&&o&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"filterExpanded",this.onFilterExpanded.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))},e.prototype.setVisible=function(e){t.prototype.setDisplayed.call(this,e),e&&!this.initialised&&this.init(this.params)},e.prototype.onExpandAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!0)},e.prototype.onCollapseAll=function(){this.filtersToolPanelListPanel.expandFilterGroups(!1)},e.prototype.onSearchChanged=function(t){this.filtersToolPanelListPanel.performFilterSearch(t.searchText)},e.prototype.setFilterLayout=function(t){this.filtersToolPanelListPanel.setFiltersLayout(t)},e.prototype.onFilterExpanded=function(){this.params.onStateUpdated()},e.prototype.onGroupExpanded=function(t){this.filtersToolPanelHeaderPanel.setExpandState(t.state),this.params.onStateUpdated()},e.prototype.expandFilterGroups=function(t){this.filtersToolPanelListPanel.expandFilterGroups(!0,t)},e.prototype.collapseFilterGroups=function(t){this.filtersToolPanelListPanel.expandFilterGroups(!1,t)},e.prototype.expandFilters=function(t){this.filtersToolPanelListPanel.expandFilters(!0,t)},e.prototype.collapseFilters=function(t){this.filtersToolPanelListPanel.expandFilters(!1,t)},e.prototype.syncLayoutWithGrid=function(){this.filtersToolPanelListPanel.syncFilterLayout()},e.prototype.refresh=function(){this.init(this.params)},e.prototype.getState=function(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',Dr([(0,o.PIB)("filtersToolPanelHeaderPanel")],e.prototype,"filtersToolPanelHeaderPanel",void 0),Dr([(0,o.PIB)("filtersToolPanelListPanel")],e.prototype,"filtersToolPanelListPanel",void 0),e}(o.uAl),Tr={version:"31.0.0",moduleName:o.zsj.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:fr},{componentName:"AgFiltersToolPanelList",componentClass:wr}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:Ar}],dependantModules:[io,g]};class Mr{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var o;const n=null===(o=this._rangeCallback)||void 0===o?void 0:o.call(this,t,e),r=this._encode(i?this.floor(t):this.ceil(t)),s=this._encode(i?this.ceil(e):this.floor(e));if(s<r)return[];const a=[];for(let l=r;l<=s;l++){const t=this._decode(l);a.push(t)}return null===n||void 0===n||n(),a}}class kr extends Mr{getOffset(t,e){const i="number"===typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,o=0;const{snapTo:n="start"}=null!==e&&void 0!==e?e:{};if("string"===typeof n){const e=o;i=(i,r)=>{const s="start"===n?i:r;return o=this.getOffset(s,t),()=>o=e}}else"number"===typeof n?o=this.getOffset(new Date(n),t):n instanceof Date&&(o=this.getOffset(n,t));return new Mr((e=>{const i=this._encode(e);return Math.floor((i-o)/t)}),(e=>this._decode(e*t+o)),i)}}const Rr=new kr((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();const Pr=1e3,Nr=6e4,Lr=36e5,_r=864e5,Ir=6048e5,Fr=2592e6,Gr=31536e6,Br=(new Date).getTimezoneOffset()*Nr;const Vr=new kr((function(t){return Math.floor((t.getTime()-Br)/Pr)}),(function(t){return new Date(Br+t*Pr)})),jr=(new Date).getTimezoneOffset()*Nr;const Wr=new kr((function(t){return Math.floor((t.getTime()-jr)/Nr)}),(function(t){return new Date(jr+t*Nr)})),zr=(new Date).getTimezoneOffset()*Nr;const Hr=new kr((function(t){return Math.floor((t.getTime()-zr)/Lr)}),(function(t){return new Date(zr+t*Lr)}));const Ur=new kr((function(t){const e=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-e)/_r)}),(function(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}));function Kr(t){const e=new Date(2023,0,1+t).getTime();return new kr((function(t){const i=t.getTime();return Math.floor((i-e)/Ir)}),(function(t){const i=new Date(e);return i.setDate(i.getDate()+7*t),i}))}const Yr=Kr(0),Xr=Kr(1),$r=Kr(2),qr=Kr(3),Zr=Kr(4),Jr=Kr(5),Qr=Kr(6);const ts=new kr((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));const es=new kr((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));const is=new kr((function(t){return Math.floor(t.getTime()/Nr)}),(function(t){return new Date(t*Nr)}));const os=new kr((function(t){return Math.floor(t.getTime()/Lr)}),(function(t){return new Date(t*Lr)}));const ns=new kr((function(t){return Math.floor(t.getTime()/_r)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));const rs=new kr((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))}));const ss=new kr((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}));var as=Object.freeze({__proto__:null,millisecond:Rr,second:Vr,minute:Wr,hour:Hr,day:Ur,sunday:Yr,monday:Xr,tuesday:$r,wednesday:qr,thursday:Zr,friday:Jr,saturday:Qr,month:ts,year:es,utcMinute:is,utcHour:os,utcDay:ns,utcMonth:rs,utcYear:ss});function ls(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i}function cs(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function ds(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function us(t,e,i,o){return new(i||(i=Promise))((function(n,r){function s(t){try{l(o.next(t))}catch(e){r(e)}}function a(t){try{l(o.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))}"function"===typeof SuppressedError&&SuppressedError;const hs={isEnterprise:!1};class ps{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const fs=[];function gs(t){const e=fs.find((e=>t.type===e.type&&t.optionsKey===e.optionsKey&&t.identifier===e.identifier));if(e){if("enterprise"===t.packageType&&"community"===e.packageType){const i=fs.indexOf(e);fs.splice(i,1,t)}}else fs.push(t)}function vs(){return fs.some((t=>"enterprise"===t.packageType))}const ys=new Map;function ms(t){const{length:e}=t;if(0===e)return;let i=1/0,o=-1/0;for(let r=0;r<e;r++){let e=t[r];e instanceof Date&&(e=e.getTime()),"number"===typeof e&&(e<i&&(i=e),e>o&&(o=e))}const n=[i,o];return n.some((t=>!isFinite(t)))?void 0:n}function bs(t,e,i){var o;let n=!1;return t.length>2&&(t=null!==(o=ms(t))&&void 0!==o?o:[NaN,NaN]),isNaN(e)||(n||(n=e>t[0]),t=[e,t[1]]),isNaN(i)||(n||(n=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:n}}function Ss(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!Ss(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function xs(t){return"undefined"===typeof t?[]:Array.isArray(t)?t:[t]}const Cs={};function ws(t,e){Cs[e]||(t(),Cs[e]=!0)}const Es={log(){console.log(...arguments)},warn(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];console.warn(`AG Charts - ${t}`,...i)},error(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];"object"===typeof t?console.error("AG Charts error",t,...i):console.error(`AG Charts - ${t}`,...i)},table(){console.table(...arguments)},warnOnce(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];ws((()=>Es.warn(t,...i)),`Logger.warn: ${t}`)},errorOnce(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];ws((()=>Es.error(t,...i)),`Logger.warn: ${t}`)}};function Os(t){const e="undefined"!==typeof window?window:void 0;return null===e||void 0===e?void 0:e[t]}let Ds=Date.now();const As={create(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];As.check(...e)&&("function"===typeof i[0]&&(i=xs(i[0]())),(()=>{const t=Date.now()-Ds;if(t>2e3){const e=(Math.floor(t/100)/10).toFixed(1);Es.log(`**** ${e}s since last log message ****`)}Ds=Date.now()})(),Es.log(...i))}},check(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];0===e.length&&e.push(!0);return xs(Os("agChartsDebug")).some((t=>e.includes(t)))}},Ts=Symbol("BREAK"),Ms="__decorator_config";function ks(t,e){return(i,o)=>{const n=o.toString(),r=`__${n}`,{getters:s,setters:a}=function(t,e,i,o){null==Object.getOwnPropertyDescriptor(t,Ms)&&Object.defineProperty(t,Ms,{value:{}});const n=t[Ms];if(null!=n[i])return n[i];n[i]={setters:[],getters:[]};const r=Object.getOwnPropertyDescriptor(t,e),s=null===r||void 0===r?void 0:r.set,a=null===r||void 0===r?void 0:r.get;return Object.defineProperty(t,e,{set:function(t){var r,l;const c=null!==(l=null===(r=n[i])||void 0===r?void 0:r.setters)&&void 0!==l?l:[];let d;c.some((t=>t.length>2))&&(d=a?a.call(this):this[o]);for(const i of c)if((t=i(this,e,t,d))===Ts)return;s?s.call(this,t):this[o]=t},get:function(){var t,r;let s=a?a.call(this):this[o];for(const o of null!==(r=null===(t=n[i])||void 0===t?void 0:t.getters)&&void 0!==r?r:[])if(s=o(this,e,s),s===Ts)return;return s},enumerable:!0,configurable:!1}),n[i]}(i,o,n,r);a.push(t),e&&s.unshift(e)}}function Rs(t){return"undefined"!==typeof t&&Ms in t}function Ps(t){const e=new Set;for(;Rs(t);)e.add(null===t||void 0===t?void 0:t[Ms]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap((t=>Object.keys(t)))}const Ns="class-instance";function Ls(t,e){const i=js(t),o=js(e);if("array"===o){const o=e;return"array"!==i||t.length!==o.length||o.some(((e,i)=>null!=Ls(null===t||void 0===t?void 0:t[i],e)))?[...o]:null}if("primitive"===o)return"primitive"!==i?Object.assign({},e):t!==e?e:null;const n=t||{},r=e||{},s=new Set([...Object.keys(n),...Object.keys(r)]);let a=0;const l={};for(const c of s){if(n[c]===r[c])continue;const t=t=>{l[c]=t,a++},e=js(n[c]),i=js(r[c]);if(e!==i){t(r[c]);continue}if("primitive"===i||null===i){t(r[c]);continue}if("array"===i&&n[c].length!==r[c].length){t(r[c]);continue}if(i===Ns){t(r[c]);continue}if("function"===i&&n[c]!==r[c]){t(r[c]);continue}const o=Ls(n[c],r[c]);null!==o&&t(o)}return 0===a?null:l}const _s=Symbol("<delete-property>"),Is=Symbol("<unspecified-property>");function Fs(t,e){var i;const o=null!==(i=null===e||void 0===e?void 0:e.avoidDeepClone)&&void 0!==i?i:[];if(t.map((t=>js(t))).some((t=>"array"===t))){const i=t[t.length-1];return Array.isArray(i)?i.map((t=>{const i=js(t);return"array"===i?Fs([[],t],e):"object"===i?Fs([{},t],e):t})):i}const n={},r=new Set(t.map((t=>null!=t?Object.keys(t):[])).reduce(((t,e)=>t.concat(e)),[]));for(const s of r){const i=t.map((t=>null!=t&&"object"===typeof t&&s in t?t[s]:Is)).filter((t=>t!==Is));if(0===i.length)continue;const r=i[i.length-1];if(r===_s)continue;const a=i.map((t=>js(t))),l=a[0];a.some((t=>t!==l))?n[s]=r:"array"!==l&&"object"!==l||o.includes(s)?n[s]="array"===l?[...r]:r:n[s]=Fs(i,e)}return n}function Gs(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o,n,r;const{path:s,matcherPath:a=(s?s.replace(/(\[[0-9+]+])/i,"[]"):void 0),skip:l=[],constructors:c={},constructedArrays:d=new WeakMap,allowedTypes:u={},idx:h}=i;if(null==t)throw new Error(`AG Charts - target is uninitialised: ${null!==s&&void 0!==s?s:"<root>"}`);if(null==e)return t;const p=t;null!=h&&"_declarationOrder"in p&&(p._declarationOrder=h);const f=js(t);for(const v in e){const h=`${a?a+".":""}${v}`;if(l.indexOf(h)>=0)continue;const y=e[v],m=`${s?s+".":""}${v}`,b=p.constructor,S=p[v];let x=null!==(o=c[h])&&void 0!==o?o:c[v];try{const e=js(S),o=js(y);if(f===Ns&&!(v in t)&&!Object.prototype.hasOwnProperty.call(p,v)){Es.warn(`unable to set [${m}] in ${null===b||void 0===b?void 0:b.name} - property is unknown`);continue}const s=null!==(n=u[h])&&void 0!==n?n:[e];if(e===Ns&&"object"===o);else if(null!=e&&null!=o&&!s.includes(o)){Es.warn(`unable to set [${m}] in ${null===b||void 0===b?void 0:b.name} - can't apply type of [${o}], allowed types are: [${s}]`);continue}if("array"===o)if(x=null!==(r=null!==x&&void 0!==x?x:d.get(S))&&void 0!==r?r:c[`${h}[]`],null!=x){const t=y;p[v]=t.map(((t,e)=>Gs(new x,t,Object.assign(Object.assign({},i),{path:m,matcherPath:h+"[]",idx:e}))))}else p[v]=y;else o===Ns?p[v]=y:"object"===o?null!=S?Gs(S,y,Object.assign(Object.assign({},i),{path:m,matcherPath:h,idx:void 0})):p[v]=null!=x?Gs(new x,y,Object.assign(Object.assign({},i),{path:m,matcherPath:h,idx:void 0})):y:p[v]=y}catch(g){Es.warn(`unable to set [${m}] in [${null===b||void 0===b?void 0:b.name}]; nested error is: ${g.message}`)}}return t}function Bs(t,e,i){for(var o=arguments.length,n=new Array(o>3?o-3:0),r=3;r<o;r++)n[r-3]=arguments[r];const s=js(t),{skip:a=[]}=null!==i&&void 0!==i?i:{};if("array"===s)return e(s,t,...n),void t.forEach(((t,o)=>{Bs(t,e,i,...(null!==n&&void 0!==n?n:[]).map((t=>null===t||void 0===t?void 0:t[o])))}));if("object"===s){e(s,t,...n);for(const o in t){if(a.includes(o))continue;const r=t[o],s=null===n||void 0===n?void 0:n.map((t=>null===t||void 0===t?void 0:t[o])),l=js(r);"object"!==l&&"array"!==l||Bs(r,e,i,...s)}}}const Vs="undefined"!==typeof window;function js(t){return null==t?null:Vs&&t instanceof HTMLElement?"primitive":Array.isArray(t)?"array":t instanceof Date?"primitive":"object"===typeof t&&t.constructor===Object?"object":"function"===typeof t?"function":"object"===typeof t&&null!=t.constructor?Ns:"primitive"}const Ws=2*Math.PI;function zs(t){return t%=Ws,t+=Ws,t%=Ws}function Hs(t){return(t%=Ws)<-Math.PI?t+=Ws:t>=Math.PI&&(t-=Ws),t}function Us(t){return t/180*Math.PI}function Ks(t,e,i){return Math.max(e,Math.min(i,t))}class Ys{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some((e=>this[e]!==t[e])))&&(this.cache={},this.cacheProps.forEach((t=>this.cache[t]=this[t])),!0)}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach((t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)})),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter(((t,i)=>i%e===0))}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex((e=>e===t));return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=Ks(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=Ks(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=Ks(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,o=this._paddingOuter,[n,r]=this.range,s=r-n,a=s/Math.max(1,t+2*o-i),l=e?Math.floor(a):a,c=n+(s-l*(t-i))/2,d=e?Math.round(c):c,u=l*(1-i),h=e?Math.round(u):u,p=a*(1-i),f=[];for(let g=0;g<t;g++)f.push(d+l*g);this._bandwidth=h,this._rawBandwidth=p,this.ordinalRange=f}}function Xs(t,e,i){return Math.min(i,Math.max(t,e))}function $s(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return Math.abs(t-e)<i}function qs(t){return Math.sign(t)<0||Object.is(t,-0)}function Zs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=Math.pow(10,e);return Math.round(t*i)/i}function Js(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function Qs(t,e){return t>=0?Math.floor(t%e):Math.floor(t%e+e)}class ta{constructor(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=Xs(0,t||0,1),this.g=Xs(0,e||0,1),this.b=Xs(0,i||0,1),this.a=Xs(0,o||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!ta.parseHex(t):t.indexOf("rgb")>=0?!!ta.stringToRgba(t):!!ta.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return ta.fromHexString(t);const e=ta.nameToHex[t.toLowerCase()];if(e)return ta.fromHexString(e);if(t.indexOf("rgb")>=0)return ta.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return ta.fromString(t)}catch(e){return Es.warnOnce(`invalid color string: '${t}'.`),ta.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map((t=>parseInt(t,16))).map((t=>t+16*t))}if((null===e||void 0===e?void 0:e.length)>=3&&e.every((t=>t>=0)))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=ta.parseHex(t);if(e){const[t,i,o,n]=e;return new ta(t/255,i/255,o/255,n/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let s=0;s<t.length;s++){const o=t[s];if(e||"("!==o){if(")"===o){i=s;break}}else e=s}const o=e&&i&&t.substring(e+1,i);if(!o)return;const n=o.split(","),r=[];for(let s=0;s<n.length;s++){const t=n[s];let e=parseFloat(t);if(isNaN(e))return;t.indexOf("%")>=0?(e=Math.max(0,Math.min(100,e)),e/=100):3===s?e=Math.max(0,Math.min(1,e)):(e=Math.max(0,Math.min(255,e)),e/=255),r.push(e)}return r}static fromRgbaString(t){const e=ta.stringToRgba(t);if(e){if(3===e.length)return new ta(e[0],e[1],e[2]);if(4===e.length)return new ta(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new ta(t[0],t[1],t[2],t[3]);if(3===t.length)return new ta(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=ta.HSBtoRGB(t,e,i);return new ta(n[0],n[1],n[2],o)}static fromHSL(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=ta.HSLtoRGB(t,e,i);return new ta(n[0],n[1],n[2],o)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+ta.padHex(Math.round(255*this.r).toString(16))+ta.padHex(Math.round(255*this.g).toString(16))+ta.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=ta.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return ta.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSL(t,e,i){const o=Math.min(t,e,i),n=Math.max(t,e,i),r=(n+o)/2;let s,a;if(n===o)s=NaN,a=0;else{const l=n-o;a=r>.5?l/(2-n-o):l/(n+o),s=n===t?(e-i)/l+(e<i?6:0):n===e?(i-t)/l+2:(t-e)/l+4,s*=60}return[s,a,r]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const o=i<.5?i*(1+e):i+e-i*e,n=2*i-o;function r(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(o-n)*t:t<.5?o:t<2/3?n+(o-n)*(2/3-t)*6:n}return[r(t/360+1/3),r(t/360),r(t/360-1/3)]}static RGBtoHSB(t,e,i){const o=Math.min(t,e,i),n=Math.max(t,e,i);let r=NaN;if(o!==n){const s=n-o,a=(n-t)/s,l=(n-e)/s,c=(n-i)/s;r=t===n?c-l:e===n?2+a-c:4+l-a,r/=6,r<0&&(r+=1)}return[360*r,0!==n?(n-o)/n:0,n]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let o=0,n=0,r=0;if(0===e)o=n=r=i;else{const s=6*(t-Math.floor(t)),a=s-Math.floor(s),l=i*(1-e),c=i*(1-e*a),d=i*(1-e*(1-a));switch(s|0){case 0:o=i,n=d,r=l;break;case 1:o=c,n=i,r=l;break;case 2:o=l,n=i,r=d;break;case 3:o=l,n=c,r=i;break;case 4:o=d,n=l,r=i;break;case 5:o=i,n=l,r=c}}return[o,n,r]}derive(t,e,i,o){const n=ta.RGBtoHSB(this.r,this.g,this.b);let r=n[2];0==r&&i>1&&(r=.05);const s=((n[0]+t)%360+360)%360,a=Math.max(Math.min(n[1]*e,1),0);r=Math.max(Math.min(r*i,1),0);const l=Math.max(Math.min(this.a*o,1),0),c=ta.HSBtoRGB(s,a,r);return c.push(l),ta.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=ta.tryParseFromString(t),o=ta.tryParseFromString(e);return t=>{const e=(e,i)=>e*(1-t)+i*t;return new ta(e(i.r,o.r),e(i.g,o.g),e(i.b,o.b),e(i.a,o.a)).toString()}}}function ea(t){return ks(((e,i,o)=>{var n,r,s;if(t(o,{target:e}))return o;const a=i.toString().replace(/^_*/,"");let l=null!==(r=null===(n=e.constructor)||void 0===n?void 0:n.className)&&void 0!==r?r:null===(s=e.constructor)||void 0===s?void 0:s.name;(null===l||void 0===l?void 0:l.length)<3&&(l=null);const c=l?`of [${l}] `:"";return t.message?Es.warn(`Property [${a}] ${c}cannot be set to [${ia(o)}]; ${t.message}, ignoring.`):Es.warn(`Property [${a}] ${c}cannot be set to [${ia(o)}], ignoring.`),Ts}))}function ia(t){return"number"===typeof t&&isNaN(t)?"NaN":t===1/0?"Infinity":t===-1/0?"-Infinity":JSON.stringify(t)}function oa(t,e){return t.message=e,t}ta.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const na=(t,e,i)=>void 0===t||i(t,e),ra=(t,e)=>oa(((i,o)=>Array.isArray(i)&&(!t||i.length===t)&&(!e||i.every((t=>e(t,o))))),"expecting an Array"),sa=t=>oa(((e,i)=>na(e,i,ra(t))),"expecting an optional Array");oa((t=>Array.isArray(t)&&t.length>0),"expecting a non-empty Array");const aa=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return oa(((t,i)=>e.every((e=>e(t,i)))),e.map((t=>t.message)).filter((t=>null!=t)).join(" AND "))},la=t=>null!=t&&!isNaN(t),ca=t=>oa(((e,i)=>!la(e)||!la(i.target[t])||e<i.target[t]),`expected to be less than ${t}`),da=t=>oa(((e,i)=>!la(e)||!la(i.target[t])||e>i.target[t]),`expected to be greater than ${t}`),ua=oa((t=>"function"===typeof t),"expecting a Function"),ha=oa(((t,e)=>na(t,e,ua)),"expecting an optional Function"),pa=oa((t=>!0===t||!1===t),"expecting a Boolean"),fa=oa(((t,e)=>na(t,e,pa)),"expecting an optional Boolean"),ga=oa((t=>"string"===typeof t),"expecting a String"),va=oa(((t,e)=>na(t,e,ga)),"expecting an optional String"),ya=oa((t=>t instanceof Date&&!isNaN(+t)),"expecting a Date object"),ma=oa(((t,e)=>na(t,e,ya)),"expecting an optional Date");oa(ra(void 0,ya),"expecting an Array of Date objects");const ba=Aa(0),Sa=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return oa(((t,i)=>e.some((e=>e(t,i)))),e.map((t=>t.message)).filter((t=>null!=t)).join(" OR "))}(ma,oa(((t,e)=>na(t,e,ba)),"expecting an optional number")),xa="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Ca=oa((t=>"string"===typeof t&&ta.validColorString(t)),`expecting a color String. ${xa}`),wa=oa(((t,e)=>na(t,e,Ca)),`expecting an optional color String. ${xa}`),Ea=oa(ra(void 0,Ca),`expecting an Array of color strings. ${xa}`),Oa=oa(((t,e)=>na(t,e,Ea)),`expecting an optional Array of color strings. ${xa}`);function Da(){let t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"expecting a finite Number";return void 0!==t&&void 0!==e?i+=` between ${t} and ${e} inclusive`:void 0!==t?i+=` greater than or equal to ${t}`:void 0!==e&&(i+=` less than or equal to ${e}`),i}function Aa(t,e){return oa((i=>"number"===typeof i&&Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e)),Da(void 0,t,e))}function Ta(t,e){return oa(((i,o)=>na(i,o,Aa(t,e))),Da("expecting an optional finite Number",t,e))}function Ma(t,e){return oa((i=>"number"===typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e))),Da(void 0,t,e))}const ka=oa(ra(void 0,Aa()),"expecting an Array of numbers"),Ra=oa(((t,e)=>na(t,e,ka)),"expecting an optional Array of numbers"),Pa=oa(ra(void 0,ga),"expecting an Array of strings");function Na(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return oa((t=>"string"===typeof t&&e.indexOf(t)>=0),`expecting one of: ${e.join(", ")}`)}oa(((t,e)=>na(t,e,Pa)),"expecting an optional Array of strings");const La=oa(ra(void 0,pa),"expecting an Array of boolean values");oa(((t,e)=>na(t,e,La)),"expecting an optional Array of boolean values");const _a=["normal","bold","bolder","lighter"],Ia=oa((t=>"normal"===t||"italic"===t||"oblique"===t),"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),Fa=oa(((t,e)=>na(t,e,Ia)),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),Ga=oa((t=>_a.includes(t)||"number"===typeof t&&isFinite(t)),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Ba=oa(((t,e)=>na(t,e,Ga)),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),Va=oa(ra(void 0,Aa(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),ja=oa(((t,e)=>na(t,e,Va)),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),Wa=["butt","round","square"],za=oa((t=>Wa.includes(t)),"expecting a line cap keyword such as 'butt', 'round' or 'square'");oa(((t,e)=>na(t,e,za)),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const Ha=["round","bevel","miter"],Ua=oa((t=>Ha.includes(t)),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");oa(((t,e)=>na(t,e,Ua)),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const Ka=["top","right","bottom","left"],Ya=oa((t=>Ka.includes(t)),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),Xa=["exact","nearest"],$a=oa((t=>"number"===typeof t&&Number.isFinite(t)||Xa.includes(t)),"expecting an interaction range of 'exact', 'nearest' or a number"),qa=["never","always","hyphenate","on-space"],Za=oa((t=>qa.includes(t)),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', or 'on-space'"),Ja=["ellipsis","hide"];oa((t=>Ja.includes(t)),"expecting an overflow strategy keyword such as 'ellipsis', or 'hide'");const Qa=["left","center","right"];oa((t=>Qa.includes(t)),"expecting a text align keyword such as 'left', 'center', or 'right'");const tl=["top","middle","bottom"];oa((t=>tl.includes(t)),"expecting a text align keyword such as 'top', 'middle', or 'bottom'");const el=["horizontal","vertical"],il=oa((t=>el.includes(t)),"expecting a direction keyword such as 'horizontal' or 'vertical'");var ol,nl;oa(((t,e)=>na(t,e,il)),"expecting an optional direction keyword such as 'horizontal' or 'vertical'"),function(t){t.X="x",t.Y="y"}(ol||(ol={})),function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(nl||(nl={}));const rl=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function sl(t){const{changeCb:e,convertor:i}=null!==t&&void 0!==t?t:{};return function(o,n){const r=`__${n}`;o[n]||(rl&&null==e&&null==i?function(t,e,i,o){const{redraw:n=nl.TRIVIAL,type:r="normal",checkDirtyOnAssignment:s=!1}=null!==o&&void 0!==o?o:{},a=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===r?`this.markDirty(this, ${n});`:""}\n            ${"transform"===r?`this.markDirtyTransform(${n});`:""}\n            ${"path"===r?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===r?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${s?`if (value != null && value._dirty > ${nl.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}(o,n,r,t):function(t,e,i,o){const{redraw:n=nl.TRIVIAL,type:r="normal",changeCb:s,convertor:a,checkDirtyOnAssignment:l=!1}=null!==o&&void 0!==o?o:{},c=function(t){const e=this[i];(t=a?a(t):t)!==e&&(this[i]=t,"normal"===r&&this.markDirty(this,n),"transform"===r&&this.markDirtyTransform(n),"path"!==r||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,n)),"font"!==r||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,n)),s&&s(this)),l&&null!=t&&t._dirty>nl.NONE&&this.markDirty(t,t._dirty)},d=function(){return this[i]};Object.defineProperty(t,e,{set:c,get:d,enumerable:!0,configurable:!0})}(o,n,r,t))}}class al{constructor(){this._dirty=nl.MAJOR}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nl.TRIVIAL;this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=nl.NONE}isDirty(){return this._dirty>nl.NONE}}const ll={};function cl(t){var e;const i=t.constructor,o=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!o)throw new Error(`The ${i} is missing the 'className' property.`);const n=(null!==(e=ll[o])&&void 0!==e?e:0)+1;return ll[o]=n,o+"-"+n}function dl(t,e){const i={nearest:void 0,distanceSquared:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0};for(const o of e){const e=o.distanceSquared(t);if(0===e)return{nearest:o,distanceSquared:0};e<i.distanceSquared&&(i.nearest=o,i.distanceSquared=e)}return i}class ul{constructor(t,e,i,o){this.x=t,this.y=e,this.width=i,this.height=o}clone(){const{x:t,y:e,width:i,height:o}=this;return new ul(t,e,i,o)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(t){if(this.containsPoint(t.x,t.y))return 0;const e=t.x-Math.max(this.x,Math.min(t.x,this.x+this.width)),i=t.y-Math.max(this.y,Math.min(t.y,this.y+this.height));return e*e+i*i}static nearestBox(t,e){return dl(t,e)}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"===typeof t?i(e,t):Object.entries(t).forEach((t=>{let[e,o]=t;return i(e,o)})),this}grow(t,e){if("number"===typeof t)this.shrink(-t,e);else{const e=Object.assign({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(t){let e=1/0,i=1/0,o=-1/0,n=-1/0;return t.forEach((t=>{t.x<e&&(e=t.x),t.y<i&&(i=t.y),t.x+t.width>o&&(o=t.x+t.width),t.y+t.height>n&&(n=t.y+t.height)})),new ul(e,i,o-e,n-i)}}ul.zero=new ul(0,0,0,0);class hl{get e(){return[...this.elements]}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,1,0,0];this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const o=t[0]*e[0]+t[2]*e[1],n=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!==i&&void 0!==i?i:t)[0]=o,i[1]=n,i[2]=r,i[3]=s,i[4]=a,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new hl(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],o=t[2],n=t[3];const r=t[4],s=t[5],a=1/(e*n-i*o);return e*=a,i*=a,o*=a,n*=a,new hl([n,-i,-o,e,o*s-n*r,i*r-e*s])}inverseTo(t){const e=this.elements;let i=e[0],o=e[1],n=e[2],r=e[3];const s=e[4],a=e[5],l=1/(i*r-o*n);return i*=l,o*=l,n*=l,r*=l,t.setElements([r,-o,-n,i,n*a-r*s,o*s-i*a]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],o=t[2],n=t[3];const r=t[4],s=t[5],a=1/(e*n-i*o);return e*=a,i*=a,o*=a,n*=a,t[0]=n,t[1]=-i,t[2]=-o,t[3]=e,t[4]=o*s-n*r,t[5]=i*r-e*s,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,o=i[0],n=i[1],r=i[2],s=i[3],a=.5*t.width,l=.5*t.height,c=t.x+a,d=t.y+l,u=Math.abs(a*o)+Math.abs(l*r),h=Math.abs(a*n)+Math.abs(l*s);return e||(e=new ul(0,0,0,0)),e.x=c*o+d*r+i[4]-u,e.y=c*n+d*s+i[5]-h,e.width=u+u,e.height=h+h,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return hl.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,o,n,r,s){const[a,l]=[0,0],c=e,d=i;let u,h;1===c&&1===d?(u=0,h=0):(u=null==(null===s||void 0===s?void 0:s.scalingCenterX)?a:null===s||void 0===s?void 0:s.scalingCenterX,h=null==(null===s||void 0===s?void 0:s.scalingCenterY)?l:null===s||void 0===s?void 0:s.scalingCenterY);const p=o,f=Math.cos(p),g=Math.sin(p);let v,y;0===p?(v=0,y=0):(v=null==(null===s||void 0===s?void 0:s.rotationCenterX)?a:null===s||void 0===s?void 0:s.rotationCenterX,y=null==(null===s||void 0===s?void 0:s.rotationCenterY)?l:null===s||void 0===s?void 0:s.rotationCenterY);const m=n,b=r,S=u*(1-c)-v,x=h*(1-d)-y;return t.setElements([f*c,g*c,-g*d,f*d,f*S-g*x+v+m,g*S+f*x+y+b]),t}static fromContext(t){const e=t.getTransform();return new hl([e.a,e.b,e.c,e.d,e.e,e.f])}}var pl;hl.instance=new hl,function(t){t[t.All=0]="All",t[t.None=1]="None"}(pl||(pl={}));const fl=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()};class gl extends al{get datum(){var t,e;return null!==(t=this._datum)&&void 0!==t?t:null===(e=this._parent)||void 0===e?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null===t||void 0===t?void 0:t.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const t=[...this._children];for(const e of this._virtualChildren)t.push(...e.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=null!==e&&void 0!==e?e:Object.keys(t);for(const o of i)this[o]=t[o];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,nl.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,nl.MAJOR),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=hl.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,nl.MAJOR)}constructor(){let{isVirtual:t,tag:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.serialNumber=gl._nextSerialNumber++,this.id=cl(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new hl,this.inverseMatrix=new hl,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=pl.All,this.isVirtual=null!==t&&void 0!==t&&t,this.tag=null!==e&&void 0!==e?e:NaN}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===pl.None||!this.containsPoint(t,e))return;const o=this.children;if(o.length>1e3)for(let n=o.length-1;n>=0;n--){const r=o[n],s=(null===(i=r.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?r.pickNode(t,e):void 0;if(s)return s}else if(o.length)for(let n=o.length-1;n>=0;n--){const i=o[n].pickNode(t,e);if(i)return i}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const o=i.findNodes(t);o&&e.push(...o)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=hl.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:o,translationX:n,translationY:r,scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}=this;hl.updateTransformMatrix(t,e,i,o,n,r,{scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=nl.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:o,width:n,height:r}=e,s=this.transformPoint(i,o),a=this.transformPoint(i+n,o+r);t.clearRect(s.x,s.y,a.x-s.x,a.y-s.y)}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nl.TRIVIAL,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!==t&&void 0!==t?t:{};if(this._dirty!==nl.NONE||e){if(this._dirty=nl.NONE,!1!==i)for(const t of this._virtualChildren)t.markClean({force:e});if(!0===i)for(const t of this._children)t.markClean({force:e})}}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=nl.NONE||this.dirtyTransform?1:0,i=this.visible?1:0;const o=o=>{const{count:n,visibleCount:r,dirtyCount:s}=o.nodeCount;t+=n,i+=r,e+=s};for(const n of this._children)o(n);for(const n of this._virtualChildren)o(n);return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}gl._nextSerialNumber=0,cs([sl({type:"transform"}),ds("design:type",Number)],gl.prototype,"scalingX",void 0),cs([sl({type:"transform"}),ds("design:type",Number)],gl.prototype,"scalingY",void 0),cs([sl({type:"transform"}),ds("design:type",Object)],gl.prototype,"scalingCenterX",void 0),cs([sl({type:"transform"}),ds("design:type",Object)],gl.prototype,"scalingCenterY",void 0),cs([sl({type:"transform"}),ds("design:type",Object)],gl.prototype,"rotationCenterX",void 0),cs([sl({type:"transform"}),ds("design:type",Object)],gl.prototype,"rotationCenterY",void 0),cs([sl({type:"transform"}),ds("design:type",Number)],gl.prototype,"rotation",void 0),cs([sl({type:"transform"}),ds("design:type",Number)],gl.prototype,"translationX",void 0),cs([sl({type:"transform"}),ds("design:type",Number)],gl.prototype,"translationY",void 0),cs([sl({redraw:nl.MAJOR,changeCb:t=>t.visibilityChanged()}),ds("design:type",Boolean)],gl.prototype,"visible",void 0),cs([sl({redraw:nl.TRIVIAL,changeCb:fl}),ds("design:type",Number)],gl.prototype,"zIndex",void 0),cs([sl({redraw:nl.TRIVIAL,changeCb:fl}),ds("design:type",Array)],gl.prototype,"zIndexSubOrder",void 0);class vl extends al{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}cs([ea(pa),sl({redraw:nl.MAJOR}),ds("design:type",Object)],vl.prototype,"enabled",void 0),cs([ea(Ca),sl({redraw:nl.MAJOR}),ds("design:type",Object)],vl.prototype,"color",void 0),cs([ea(Aa()),sl({redraw:nl.MAJOR}),ds("design:type",Object)],vl.prototype,"xOffset",void 0),cs([ea(Aa()),sl({redraw:nl.MAJOR}),ds("design:type",Object)],vl.prototype,"yOffset",void 0),cs([ea(Aa(0)),sl({redraw:nl.MAJOR}),ds("design:type",Object)],vl.prototype,"blur",void 0);const yl=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function ml(){if("undefined"===typeof navigator)return!0;const t=navigator.userAgent;return!yl.some((e=>e.test(t)))}class bl{constructor(t){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:e,window:i,width:o=600,height:n=300,domLayer:r=!1,zIndex:s=0,name:a,overrideDevicePixelRatio:l}=t;this.document=e,this.window=i,bl.document=e,this.element=e.createElement("canvas"),this.element.width=o,this.element.height=n,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:c}=this.element;c.userSelect="none",c.display="block",r&&(c.position="absolute",c.zIndex=String(s),c.top="0",c.left="0",c.pointerEvents="none",c.opacity="1",a&&(this.element.id=a)),this.context=this.setPixelRatio(l),this.resize(o,n)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";t=(null!==t&&void 0!==t?t:"").trim()||"image";const i=this.getDataURL(e),o=this.document,n=o.createElement("a");n.href=i,n.download=t,n.style.display="none",o.body.appendChild(n),n.click(),o.body.removeChild(n)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!==t&&void 0!==t?t:this.window.devicePixelRatio;return ml()||(e=1),this._pixelRatio=e,bl.overrideScale(this.realContext,e)}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:o,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),i.style.width=t+"px",i.style.height=e+"px",o.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=this.document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t="undefined"===typeof navigator||navigator.userAgent.indexOf("Chrome")>-1,e="undefined"!==typeof navigator&&navigator.userAgent.indexOf("Firefox")>-1,i=!t&&"undefined"!==typeof navigator&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,o){const n=this.textMeasuringContext;return n.font=e,n.textBaseline=i,n.textAlign=o,n.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const o=i.measureText(t);return{width:o.width,height:o.actualBoundingBoxAscent+o.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,o=i[e];if(o){const e=o[t];if(e)return e}else i[e]={};const n=this.svgText;n.style.font=e,n.textContent=t;const r=n.getBBox(),s={width:r.width,height:r.height};return i[e][t]=s,s}static overrideScale(t,e){let i=0;const o={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,o,n,r,s){"object"===typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,o*e,n*e,r*e,s*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t["$"+n]||(t["$"+n]=t[n]),t[n]=o[n]);return t}}bl.document=globalThis.document,bl.textSizeCache={};class Sl{constructor(){this.stops=[]}}class xl extends Sl{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:o}=this,n=zs(Us(o+90)),r=Math.cos(n),s=Math.sin(n),a=e.width,l=e.height,c=e.x+.5*a,d=e.y+.5*l;if(a>0&&l>0){const e=Math.sqrt(l*l+a*a)/2,o=Math.atan2(l,a);let u;u=n<Math.PI/2?n:n<Math.PI?Math.PI-n:n<3*Math.PI/2?n-Math.PI:2*Math.PI-n;const h=e*Math.abs(Math.cos(u-o)),p=t.createLinearGradient(c+r*h,d+s*h,c-r*h,d-s*h);return i.forEach((t=>{p.addColorStop(t.offset,t.color)})),p}return"black"}}const Cl=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class wl extends gl{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=wl.defaultStyles.fill,this.stroke=wl.defaultStyles.stroke,this.strokeWidth=wl.defaultStyles.strokeWidth,this.lineDash=wl.defaultStyles.lineDash,this.lineDashOffset=wl.defaultStyles.lineDashOffset,this.lineCap=wl.defaultStyles.lineCap,this.lineJoin=wl.defaultStyles.lineJoin,this.opacity=wl.defaultStyles.opacity,this.fillShadow=wl.defaultStyles.fillShadow}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,o=e.length;i<o;i++){const o=e[i];this[o]=t[o]}}updateGradient(){const{fill:t}=this;let e;if((null===t||void 0===t?void 0:t.startsWith("linear-gradient"))&&(e=Cl.exec(t))){const t=parseFloat(e[1]),i=[],o=e[2],n=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let r;for(;r=n.exec(o);)i.push(r[0]);this.gradient=new xl,this.gradient.angle=t,this.gradient.stops=i.map(((t,e)=>({offset:e/(i.length-1),color:t})))}else this.gradient=void 0}align(t,e){var i,o,n;const r=null!==(n=null===(o=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===o?void 0:o.pixelRatio)&&void 0!==n?n:1,s=Math.round(t*r)/r;return void 0==e?s:0===e?0:e<1?Math.ceil(e*r)/r:Math.round((e+t)*r)/r-s}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const o=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,n=this.fillShadow;(null===n||void 0===n?void 0:n.enabled)&&(t.shadowColor=n.color,t.shadowOffsetX=n.xOffset*o,t.shadowOffsetY=n.yOffset*o,t.shadowBlur=n.blur*o)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}wl.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),cs([sl({redraw:nl.MINOR}),ds("design:type",Number)],wl.prototype,"fillOpacity",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Number)],wl.prototype,"strokeOpacity",void 0),cs([sl({redraw:nl.MINOR,changeCb:t=>t.updateGradient()}),ds("design:type",Object)],wl.prototype,"fill",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Object)],wl.prototype,"stroke",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Number)],wl.prototype,"strokeWidth",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Object)],wl.prototype,"lineDash",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Number)],wl.prototype,"lineDashOffset",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",String)],wl.prototype,"lineCap",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",String)],wl.prototype,"lineJoin",void 0),cs([sl({redraw:nl.MINOR,convertor:t=>Math.min(1,Math.max(0,t))}),ds("design:type",Number)],wl.prototype,"opacity",void 0),cs([sl({redraw:nl.MINOR,checkDirtyOnAssignment:!0}),ds("design:type",Object)],wl.prototype,"fillShadow",void 0);function El(t){const{redraw:e=nl.MAJOR,changeCb:i}=null!==t&&void 0!==t?t:{};return sl({redraw:e,type:"font",changeCb:i})}class Ol extends wl{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=Ol.defaultStyles.textAlign,this.textBaseline=Ol.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=Rl(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Dl(this)),this._font}computeBBox(){return bl.has.textMetrics?Tl(this.lines,this.x,this.y,this):Ml(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(bl.has.textMetrics){const o=bl.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=o.fontBoundingBoxAscent)&&void 0!==e?e:o.emHeightAscent)+(null!==(i=o.fontBoundingBoxDescent)&&void 0!==i?i:o.emHeightDescent)}return bl.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),o=this.computeBBox();return!!o&&o.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:o}=t;if(this.dirty===nl.NONE&&!i)return void(o&&(o.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:n,stroke:r,strokeWidth:s}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const a=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null===t||void 0===t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*a,e.shadowOffsetY=t.yOffset*a,e.shadowBlur=t.blur*a),this.renderLines(((t,i,o)=>e.fillText(t,i,o)))}if(r&&s){e.strokeStyle=r,e.lineWidth=s,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:o,lineJoin:n}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),o&&(e.lineCap=o),n&&(e.lineJoin=n),this.renderLines(((t,i,o)=>e.strokeText(t,i,o)))}super.render(t)}renderLines(t){const{lines:e,x:i,y:o}=this,n=this.lines.map((t=>this.getLineHeight(t)));let r=-(n.reduce(((t,e)=>t+e),0)-n[0])*kl(this.textBaseline);for(let s=0;s<e.length;s++)t(e[s],i,o+r),r+=n[s]}static wrap(t,e,i,o,n){var r;const s="hide"!==(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"ellipsis"),a=function(t){const e=new Map,i=e=>bl.getTextSize(e,t),o=t=>{if(e.has(t))return e.get(t);const{width:o}=i(t);return e.set(t,o),o};return{size:i,width:o}}(Dl(o)),l=t.split(/\r?\n/g);if(0===l.length)return"";if("never"===n)return null!==(r=Ol.truncateLine(l[0],e,a,s?"auto":"never"))&&void 0!==r?r:"";const c=[];let d=0;for(const u of l){const t=Ol.wrapLine(u,e,i,a,o,n,d,s);if(null==t)return"";if(c.push(t.result),d=t.cumulativeHeight,t.truncated)break}return c.join("\n").trim()}static wrapLine(t,e,i,o,n,r,s,a){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:s};const l=o.size(t);if(l.width<=e)return{result:t,truncated:!1,cumulativeHeight:s+l.height};if(l.height>i||o.width("W")>e)return a?{result:"",truncated:!0,cumulativeHeight:s}:void 0;const c=t.split(/\s+/g),d=Ol.wrapLineSequentially(c,e,i,o,n,r,s,a);if(null==d)return;s=d.cumulativeHeight;let{lines:u}=d;if(!d.wordsBrokenOrTruncated&&!d.linesTruncated){const t=d.lines.length,i=Ol.wrapLineBalanced(c,e,o,t);i.length===u.length&&(u=i)}return{result:u.map((t=>t.join(" "))).join("\n"),truncated:d.linesTruncated,cumulativeHeight:s}}static breakWord(t,e,i,o,n){const r=e=>Ol.punctuationMarks.includes(t[e]),s=o?n.width("-"):0,a=[];let l=0,c=0;for(let h=0;h<t.length;h++){const o=t[h],r=n.width(o);l+r+s>(0===c?e:i)&&(a.push(h),l=0,c++),l+=r}const d=[];let u=0;for(const h of a){let e=t.substring(u,h);o&&e.length>0&&!r(h-1)&&!r(h)&&(e+="-"),d.push(e),u=h}return d.push(t.substring(u)),d}static truncateLine(t,e,i,o){t=t.trimEnd();const n=i.width(t);if(n>e&&"never"===o)return;if(n<=e&&"force"!==o)return t;const r=i.width("\u2026");let s=t,a=n;for(;s.length>0&&a+r>e;)s=s.slice(0,-1).trimEnd(),a=i.width(s);return a+r<=e?`${s}\u2026`:void 0}static wrapLineSequentially(t,e,i,o,n,r,s,a){const{fontSize:l=0,lineHeight:c=l*Ol.defaultLineHeightRatio}=n,d="always"===r||"hyphenate"===r,u="hyphenate"===r,h=o.width(" ");let p=!1,f=!1;const g=[];let v=[],y=0;const m=()=>({lines:g,linesTruncated:f,wordsBrokenOrTruncated:p,cumulativeHeight:s}),b=()=>{if(!a)return;const t=v.join(" "),i=Ol.truncateLine(t,e,o,"force");return null!=i?(v.splice(0,v.length,i),f=!0,m()):void 0},S=()=>{const t=s+c;return!(t>=i)&&(v=[],y=0,s=t,g.push(v),!0)};if(!S())return b();for(let x=0;x<t.length;x++){const i=t[x],n=o.width(i),r=0===v.length?0:h,s=y+r+n;if(s<=e)v.push(i),y=s;else if(n<=e){if(!S())return b();v.push(i),y=n}else{if(p=!0,!d){if(a){if(!S())return b();const n=Ol.truncateLine(i,e,o,"force");if(null==n)return;v.push(n),x<t.length-1&&(f=!0);break}return}{const t=e-y-r,n=Ol.breakWord(i,t,e,u,o);for(let e=0;e<n.length;e++){const t=n[e];if(t&&v.push(t),e===n.length-1)y=o.width(t);else if(!S())return b()}}}}return m()}static wrapLineBalanced(t,e,i,o){const n=t.reduce(((t,e)=>t+i.width(e)),0),r=i.width(" "),s=(n+r*(t.length-o-2))/o,a=[];let l=[],c=i.width(t[0]),d=!0;for(const u of t){const t=i.width(u);if(d){l=[],l.push(u),c=t,d=!1,a.push(l);continue}const o=c+r+t;o<=s?(l.push(u),c=o):o<=e?(l.push(u),d=!0):(l=[u],c=t,a.push(l))}return a}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}}function Dl(t){const{fontFamily:e,fontSize:i,fontStyle:o,fontWeight:n}=t;return[null!==o&&void 0!==o?o:"",null!==n&&void 0!==n?n:"",i+"px",e].join(" ").trim()}function Al(t,e,i,o){return bl.has.textMetrics?Tl(t,e,i,o):Ml(t,e,i,o)}function Tl(t,e,i,o){var n,r;let s=0,a=0,l=0,c=0,d=0;const u=Dl(o),{lineHeight:h,textBaseline:p=Ol.defaultStyles.textBaseline,textAlign:f=Ol.defaultStyles.textAlign}=o;for(let g=0;g<t.length;g++){const e=bl.measureText(t[g],u,p,f);s=Math.max(s,e.actualBoundingBoxLeft),l=Math.max(l,e.width),0==g?(a+=e.actualBoundingBoxAscent,c+=e.actualBoundingBoxAscent):d+=null!==(n=e.fontBoundingBoxAscent)&&void 0!==n?n:e.emHeightAscent,g==t.length-1?c+=e.actualBoundingBoxDescent:d+=null!==(r=e.fontBoundingBoxDescent)&&void 0!==r?r:e.emHeightDescent}return void 0!==h&&(d=(t.length-1)*h),c+=d,a+=d*kl(p),new ul(e-s,i-a,l,c)}function Ml(t,e,i,o){let n=0,r=0,s=0;const a=Dl(o),{lineHeight:l,textBaseline:c=Ol.defaultStyles.textBaseline,textAlign:d=Ol.defaultStyles.textAlign}=o;if(t.length>0){const e=bl.getTextSize(t[0],a);n=e.width,r=e.height}for(let u=1;u<t.length;u++){const e=bl.getTextSize(t[u],a);n=Math.max(n,e.width),s+=null!==l&&void 0!==l?l:e.height}switch(d){case"end":case"right":e-=n;break;case"center":e-=n/2}switch(c){case"alphabetic":i-=.7*r+.5*s;break;case"middle":i-=.45*r+.5*s;break;case"ideographic":case"bottom":i-=r+s;break;case"hanging":i-=.2*r+.5*s}return new ul(e,i,n,r+s)}function kl(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function Rl(t){return"string"===typeof t?t.split(/\r?\n/g):[]}function Pl(t,e){return ks(((i,o,n)=>(i[t][null!==e&&void 0!==e?e:o]=n,n)))}function Nl(t){const{newValue:e,oldValue:i,changeValue:o}=t;return ks(((t,n,r,s)=>(r!==s&&(void 0!==s&&(null===i||void 0===i||i.call(t,s)),void 0!==r&&(null===e||void 0===e||e.call(t,r)),null===o||void 0===o||o.call(t,r,s)),r)))}Ol.className="Text",Ol.defaultLineHeightRatio=1.15,Ol.defaultStyles=Object.assign({},wl.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),Ol.ellipsis="\u2026",Ol.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],Ol.prototype,"x",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],Ol.prototype,"y",void 0),cs([sl({redraw:nl.MAJOR,changeCb:t=>t._setLines()}),ds("design:type",String)],Ol.prototype,"text",void 0),cs([El(),ds("design:type",String)],Ol.prototype,"fontStyle",void 0),cs([El(),ds("design:type",String)],Ol.prototype,"fontWeight",void 0),cs([El(),ds("design:type",Number)],Ol.prototype,"fontSize",void 0),cs([El(),ds("design:type",String)],Ol.prototype,"fontFamily",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",String)],Ol.prototype,"textAlign",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",String)],Ol.prototype,"textBaseline",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],Ol.prototype,"lineHeight",void 0);class Ll{constructor(){this.node=new Ol,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=pl.None}computeTextWrap(t,e){var i,o;const{text:n,wrapping:r}=this,s=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),a=null!==(o=this.maxHeight)&&void 0!==o?o:e;if(!isFinite(s)&&!isFinite(a))return void(this.node.text=n);const l=Ol.wrap(null!==n&&void 0!==n?n:"",s,a,this,r);this.node.text=l}}Ll.SMALL_PADDING=10,Ll.LARGE_PADDING=20,cs([ea(pa),ds("design:type",Object)],Ll.prototype,"enabled",void 0),cs([ea(va),Pl("node"),ds("design:type",String)],Ll.prototype,"text",void 0),cs([ea(Fa),Pl("node"),ds("design:type",Object)],Ll.prototype,"fontStyle",void 0),cs([ea(Ba),Pl("node"),ds("design:type",Object)],Ll.prototype,"fontWeight",void 0),cs([ea(Aa(0)),Pl("node"),ds("design:type",Number)],Ll.prototype,"fontSize",void 0),cs([ea(ga),Pl("node"),ds("design:type",String)],Ll.prototype,"fontFamily",void 0),cs([ea(wa),Pl("node","fill"),ds("design:type",Object)],Ll.prototype,"color",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Ll.prototype,"spacing",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Ll.prototype,"lineHeight",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Ll.prototype,"maxWidth",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Ll.prototype,"maxHeight",void 0),cs([ea(Za),ds("design:type",String)],Ll.prototype,"wrapping",void 0);class _l{constructor(){this.enabled=!1,this.text=void 0,this.spacing=Ll.SMALL_PADDING,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.formatter=void 0}}function Il(t,e){const i={};if(Array.isArray(e))for(let o=0;o<t.length;o++)i[`${t[o]}`]=e[o];else for(let o=0;o<t.length;o++)i[`${t[o]}`]=e;return i}function Fl(t,e){return i=>Number(t)*(1-i)+Number(e)*i}cs([ea(pa),ds("design:type",Object)],_l.prototype,"enabled",void 0),cs([ea(va),ds("design:type",String)],_l.prototype,"text",void 0),cs([ea(Ta(0)),ds("design:type",Number)],_l.prototype,"spacing",void 0),cs([ea(Fa),ds("design:type",String)],_l.prototype,"fontStyle",void 0),cs([ea(Ba),ds("design:type",String)],_l.prototype,"fontWeight",void 0),cs([ea(Aa(0)),ds("design:type",Number)],_l.prototype,"fontSize",void 0),cs([ea(ga),ds("design:type",String)],_l.prototype,"fontFamily",void 0),cs([ea(wa),ds("design:type",String)],_l.prototype,"color",void 0),cs([ea(Za),ds("design:type",String)],_l.prototype,"wrapping",void 0),cs([ea(ha),ds("design:type",Function)],_l.prototype,"formatter",void 0);const Gl=t=>t,Bl=t=>Math.sin(t*Math.PI/2),Vl=t=>-(Math.cos(t*Math.PI)-1)/2;var jl=Object.freeze({__proto__:null,linear:Gl,easeIn:t=>1-Math.cos(t*Math.PI/2),easeOut:Bl,easeInOut:Vl,easeInQuad:t=>t*t,easeOutQuad:t=>1-Math.pow(1-t,2),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2});const Wl={animationDuration:.2,animationDelay:1};var zl;function Hl(t){return t.every((t=>t instanceof gl))}!function(t){t.Loop="loop",t.Reverse="reverse"}(zl||(zl={}));class Ul{constructor(t){var e,i,o,n,r,s,a,l,c,d;this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null===(e=t.autoplay)||void 0===e||e,this.delay=null!==(i=t.delay)&&void 0!==i?i:0,this.duration=null!==(o=t.duration)&&void 0!==o?o:1e3,this.ease=null!==(n=t.ease)&&void 0!==n?n:Gl,this.repeat=null!==(r=t.repeat)&&void 0!==r?r:0,this.repeatType=null!==(s=t.repeatType)&&void 0!==s?s:zl.Loop,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onRepeat=t.onRepeat,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),!0===t.skip?(null===(a=this.onUpdate)||void 0===a||a.call(this,t.to,!1,this),null===(l=this.onStop)||void 0===l||l.call(this,this),null===(c=this.onComplete)||void 0===c||c.call(this,this)):this.autoplay&&(this.play(),null===(d=this.onUpdate)||void 0===d||d.call(this,t.from,!0,this))}play(){var t;return this.isPlaying||(this.isPlaying=!0,null===(t=this.onPlay)||void 0===t||t.call(this,this)),this}pause(){return this.isPlaying&&(this.isPlaying=!1),this}stop(){var t;return this.isPlaying&&(this.isPlaying=!1,null===(t=this.onStop)||void 0===t||t.call(this,this)),this}reset(t){const e=this.interpolate(this.isReverse?1-this.delta:this.delta);return this.interpolate=this.createInterpolator(e,t.to),this.elapsed=0,this.iteration=0,"number"===typeof t.delay&&(this.delay=t.delay),"number"===typeof t.duration&&(this.duration=t.duration),"function"===typeof t.ease&&(this.ease=t.ease),this}update(t){var e,i,o;if(this.elapsed+=t,this.elapsed<=this.delay)return this;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);return null===(e=this.onUpdate)||void 0===e||e.call(this,n,!1,this),this.elapsed-this.delay>=this.duration&&(this.iteration<this.repeat?(this.iteration++,this.elapsed=(this.elapsed-this.delay)%this.duration+this.delay,this.repeatType===zl.Reverse&&(this.isReverse=!this.isReverse),null===(i=this.onRepeat)||void 0===i||i.call(this,this)):(this.stop(),null===(o=this.onComplete)||void 0===o||o.call(this,this))),this}get delta(){return this.ease(Xs(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!==typeof e)return this.interpolateValue(t,e);const i=Object.keys(e).map((i=>[i,this.interpolateValue(t[i],e[i])]));return t=>{const e={};for(const[o,n]of i)e[o]=n(t);return e}}interpolateValue(t,e){try{switch(typeof t){case"number":return Fl(t,e);case"string":return function(t,e){if("string"===typeof t)try{t=ta.fromString(t)}catch(s){t=ta.fromArray([0,0,0])}if("string"===typeof e)try{e=ta.fromString(e)}catch(s){e=ta.fromArray([0,0,0])}const i=Fl(t.r,e.r),o=Fl(t.g,e.g),n=Fl(t.b,e.b),r=Fl(t.a,e.a);return t=>ta.fromArray([i(t),o(t),n(t),r(t)]).toRgbaString()}(t,e)}}catch(i){}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}const Kl={added:{animationDuration:.25,animationDelay:.75},updated:{animationDuration:.5,animationDelay:.25},removed:{animationDuration:.25,animationDelay:0},unknown:{animationDuration:1,animationDelay:0}};function Yl(t,e,i,o,n,r,s){const{defaultDuration:a}=i,{fromFn:l,toFn:c,intermediateFn:d}=n,u=Hl(o),h=u?o:[],p=u?[]:o,f={added:{},removed:{}};r&&s&&(f.added=Il(s.added,!0),f.removed=Il(s.removed,!0));const g=(o,n)=>{var u,h;let p,g=0,v=0;for(const y of n){const m=o[g]===y,b={last:v>=n.length-1,lastLive:g>=o.length-1,prev:n[v-1],prevFromProps:p,prevLive:o[g-1],next:n[v+1],nextLive:o[g+(m?1:0)]},S=`${t}_${e}_${y.id}`;i.stopByAnimationId(S);let x="unknown";m?r&&s&&(x=$l(y,y.datum,r,f)):x="removed";const C=l(y,y.datum,x,b),{animationDelay:w,animationDuration:E,start:O={},finish:D={}}=C,A=ls(C,["animationDelay","animationDuration","start","finish"]),T=c(y,y.datum,x,b),{animationDelay:M,animationDuration:k,start:R={},finish:P={}}=T,N=ls(T,["animationDelay","animationDuration","start","finish"]);i.animate({id:S,groupId:t,from:A,to:N,ease:Bl,onPlay:()=>{y.setProperties(Object.assign(Object.assign({},O),R))},onUpdate(t){y.setProperties(t),d&&y.setProperties(d(y,y.datum,x,b))},onStop:()=>{y.setProperties(Object.assign(Object.assign(Object.assign({},N),D),P))},duration:(null!==(u=null!==E&&void 0!==E?E:k)&&void 0!==u?u:1)*a,delay:(null!==(h=null!==w&&void 0!==w?w:M)&&void 0!==h?h:0)*a}),m&&g++,v++,p=A}};let v=0;for(const y of p){const o=y.nodes();g(o.filter((t=>!y.isGarbage(t))),o),i.animate({id:`${t}_${e}_selection_${v}`,groupId:t,from:0,to:1,ease:Bl,onStop(){y.cleanup()}}),v++}g(h,h)}function Xl(t,e,i,o,n,r){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};const a=Hl(o),l=a?o:[],c=a?[]:o,{animationDelay:d=0,animationDuration:u=1,start:h={},finish:p={}}=s,{defaultDuration:f}=i;i.animate({id:`${t}_${e}`,groupId:t,from:n,to:r,ease:Bl,onPlay:()=>{for(const t of l)t.setProperties(h);for(const t of c)for(const e of t.nodes())e.setProperties(h)},onUpdate(t){for(const e of l)e.setProperties(t);for(const e of c)for(const i of e.nodes())i.setProperties(t)},onStop:()=>{for(const t of l)t.setProperties(Object.assign(Object.assign({},r),p));for(const t of c)for(const e of t.nodes())e.setProperties(Object.assign(Object.assign({},r),p))},duration:u*f,delay:d*f})}function $l(t,e,i,o){const n=i(t,e);return o.added[n]?"added":o.removed[n]?"removed":"updated"}var ql=Object.freeze({__proto__:null,NODE_UPDATE_PHASES:["removed","updated","added"],FROM_TO_MIXINS:Kl,fromToMotion:Yl,staticFromToMotion:Xl});const Zl=t=>`(${t})`,Jl=t=>`${Zl(t)}?`,Ql=t=>Jl(`?:${t}`),tc=new RegExp(["^",Ql(`${Jl(".")}${Zl("[<>=^]")}`),Jl("[+\\-( ]"),Jl("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),Jl("0"),Jl("\\d+"),Jl(","),Ql(`\\.${Zl("\\d+")}`),Jl("~"),Jl("[%a-z]"),"$"].join(""),"i"),ec=new RegExp(["^",Zl(".*?"),`#\\{${Zl(".+?")}\\}`,Zl(".*?"),"$"].join(""));function ic(t){let e,i;const o=ec.exec(t);o&&([,e,t,i]=o);const n=tc.exec(t);if(!n)throw new Error(`The number formatter is invalid: ${t}`);const[,r,s,a,l,c,d,u,h,p,f]=n;return{fill:r,align:s,sign:a,symbol:l,zero:c,width:parseInt(d),comma:u,precision:parseInt(h),trim:Boolean(p),type:f,prefix:e,suffix:i}}function oc(t){const e="string"===typeof t?ic(t):t,{fill:i,align:o,sign:n="-",symbol:r,zero:s,width:a,comma:l,type:c,prefix:d="",suffix:u="",precision:h}=e;let{trim:p}=e;const f=void 0===h||isNaN(h);let g,v;if(c)if(c in sc&&c in rc)g=f?rc[c]:sc[c];else if(c in sc)g=sc[c];else{if(!(c in rc))throw new Error(`The number formatter type is invalid: ${c}`);g=rc[c]}else g=sc.g,p=!0;return v=null==h||f?c?6:12:h,t=>{let e=g(t,v);return p&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const o=t.substring(0,i).split(""),n=t.substring(i);for(let r=o.length-3;r>0;r-=3)o.splice(r,0,e);return`${o.join("")}${n}`}(e,l)),e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("("===i)return t>=0?e:`(${e})`;const o="+"===i?"+":"";return`${t>=0?o:uc}${e}`}(t,e,n),r&&"#"!==r&&(e=`${r}${e}`),"#"===r&&"x"===c&&(e=`0x${e}`),"s"===c&&(e=`${e}${function(t){return dc[ac(t)]}(t)}`),"%"!==c&&"p"!==c||(e=`${e}%`),null==a||isNaN(a)||(e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:">",n=t;if(">"!==o&&o){if("<"===o)n=n.padEnd(e,i);else if("^"===o){const t=Math.max(0,e-n.length),o=Math.ceil(t/2),r=Math.floor(t/2);n=n.padStart(o+n.length,i),n=n.padEnd(r+n.length,i)}}else n=n.padStart(e,i);return n}(e,a,null!==i&&void 0!==i?i:s,o)),e=`${d}${e}${u}`,e}}const nc=t=>Math.floor(Math.abs(t)),rc={b:t=>nc(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>nc(t).toString(8),x:t=>nc(t).toString(16),X:t=>rc.x(t).toUpperCase(),n:t=>rc.d(t),"%":t=>`${nc(100*t).toFixed(0)}`},sc={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>sc.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>sc.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),o=Math.floor(Math.log10(i));return o>=-4&&o<e?i.toFixed(e-1-o):i.toExponential(e-1)},G:(t,e)=>sc.g(t,e).toUpperCase(),n:(t,e)=>sc.g(t,e),p:(t,e)=>sc.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),o=Math.floor(Math.log10(i))-(e-1);if(o<=0)return i.toFixed(-o);const n=Math.pow(10,o);return(Math.round(i/n)*n).toFixed()},s:(t,e)=>{const i=ac(t);return sc.r(t/Math.pow(10,i),e)},"%":(t,e)=>sc.f(100*t,e)};function ac(t){const e=Math.log10(Math.abs(t)),i=3*Math.floor(e/3);return Math.max(lc,Math.min(cc,i))}const lc=-24,cc=24,dc={[lc]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[cc]:"Y"},uc="\u2212";function hc(t,e){const i=ic(null!==e&&void 0!==e?e:",f"),{precision:o}=i;(null==o||isNaN(o))&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map((t=>{if("number"!==typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),o=i.type?6:12,n=t.toExponential(o-1).replace(/\.?0+e/,"e"),r=n.indexOf(".");if(r<0)return e>=0?0:-e;const s=n.indexOf("e")-r;return Math.max(0,s-e-1)}))):i.type&&!(i.type in sc)||(i.precision=Math.max(...t.map((t=>{if("number"!==typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length})))));const n=oc(i);return t=>n(Number(t))}function pc(t,e,i,o,n){if(i<2)return yc(t,e,e-t);const r=gc(t,e,i,o,n);return isNaN(r)?new vc(0):yc(t=Math.ceil(t/r)*r,e=Math.floor(e/r)*r,r)}const fc=[1,2,5,10];function gc(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const r=(e-t)/i,s=Math.floor(Math.log10(r)),a=Math.pow(10,s),l=fc.map((r=>{const s=r*a,l=Math.ceil((e-t)/s);return{multiplier:r,isWithinBounds:l>=o&&l<=n,diffCount:Math.abs(l-i)}})).sort(((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount))[0].multiplier;return!l||isNaN(l)?NaN:l*a}class vc extends Array{constructor(t,e){if(super(),e)for(let i=0,o=e.length;i<o;i++)this[i]=e[i];this.fractionDigits=t}}function yc(t,e,i){const o=(t=>{var e,i;const o=t.split("e");return Math.max((null!==(i=null===(e=o[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==i?i:0)-Number(o[1]),0)})((i%1).toExponential()),n=Math.pow(10,o),r=Math.ceil((e-t)/i),s=new vc(o);for(let a=0;a<=r;a++){const e=t+i*a;s.push(Math.round(e*n)/n)}return s}class mc{static is(t){return t instanceof mc}constructor(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=mc.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(t){return t}transformInvert(t){return t}calcBandwidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=this.getDomain(),i=Math.max(...this.range),o=(e[1]-e[0])/t+1,n=Math.floor(i),r=Math.min(o,n);return i/Math.max(1,r)}fromDomain(t){return"number"===typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,e){var i;const o=null!==(i=null===e||void 0===e?void 0:e.clampMode)&&void 0!==i?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const n=this.getDomain().map((t=>this.transform(t))),[r,s]=n,{range:a}=this,[l,c]=a;if(t=this.transform(t),"clamped"===o){if(t<r)return l;if(t>s)return c}return r===s?(l+c)/2:t===r?l:t===s?c:l+(this.fromDomain(t)-this.fromDomain(r))/(this.fromDomain(s)-this.fromDomain(r))*(c-l)}invert(t){this.refresh();const e=this.getDomain().map((t=>this.transform(t))),[i,o]=e,{range:n}=this,[r,s]=n,a=r>s;let l;return t<(a?s:r)?a?o:i:t>(a?r:s)?a?i:o:(l=r===s?this.toDomain((this.fromDomain(i)+this.fromDomain(o))/2):this.toDomain(this.fromDomain(i)+(t-r)/(s-r)*(this.fromDomain(o)-this.fromDomain(i))),this.transformInvert(l))}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some((e=>this[e]!==t[e])))&&(this.cache={},this.cacheProps.forEach((t=>this.cache[t]=this[t])),!0)}refresh(){this.didChange()&&this.update()}getPixelRange(){const t=this.range.slice().sort(((t,e)=>t-e));return t[1]-t[0]}isDenseInterval(t){let{start:e,stop:i,interval:o,count:n}=t;return null!==n&&void 0!==n||(n=(i-e)/("number"===typeof o?o:1)),n>=this.getPixelRange()&&(Es.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}mc.defaultTickCount=5,mc.defaultMaxTickCount=6;class bc extends mc{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:mc.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some((t=>!isFinite(t))))return[];this.refresh();const[i,o]=this.getDomain(),{interval:n}=this;if(n){const t=Math.abs(n);if(!this.isDenseInterval({start:i,stop:o,interval:t}))return yc(i,o,t)}return pc(i,o,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,o;const n=null!==(i=this.tickCount)&&void 0!==i?i:mc.defaultTickCount;return null!==(o=this.interval)&&void 0!==o?o:gc(t,e,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:mc.defaultTickCount;let[i,o]=this.domain;if(e<1)return void(this.niceDomain=[i,o]);if(1===e)return void(this.niceDomain=function(t,e){const i=Math.floor(Math.log10(e-t)),o=Math.pow(10,i);return fc.map((i=>{const n=i*o,r=Math.floor(t/n)*n,s=Math.ceil(e/n)*n;return{error:1-(e-t)/(s-r),domain:[r,s]}})).sort(((t,e)=>t.error-e.error))[0].domain}(i,o));let n=i,r=o;for(let s=0;s<4;s++){const t=this.getTickStep(i,o),[e,s]=this.domain;if(t>=1)i=Math.floor(e/t)*t,o=Math.ceil(s/t)*t;else{const n=1/t;i=Math.floor(e*n)/n,o=Math.ceil(s*n)/n}if(i===n&&o===r)break;n=i,r=o}this.niceDomain=[i,o]}tickFormat(t){let{ticks:e,specifier:i}=t;return hc(null!==e&&void 0!==e?e:this.ticks(),i)}}function Sc(t,e){let i=0;return"number"===typeof t&&"number"===typeof e?i=t-e:"string"===typeof t&&"string"===typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function xc(t,e,i){const o=t=>"function"===typeof t?t():t;for(const n in t){const r=i(o(t[n]),o(e[n]));if(0!==r)return r}return 0}class Cc extends gl{zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}constructor(t){var e;super({isVirtual:null===t||void 0===t?void 0:t.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:o}=null!==t&&void 0!==t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==o&&(this.zIndexSubOrder=o),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null===(e=this.opts)||void 0===e?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:o,name:n}=null!==(i=this.opts)&&void 0!==i?i:{},r=()=>this.getComputedOpacity(),s=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:o,name:n,getComputedOpacity:r,getVisibility:s})}}getComputedOpacity(){let t=1,e=this;do{e instanceof Cc&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nl.TRIVIAL;if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<nl.MINOR||null!=this.layer)&&(i=nl.TRIVIAL),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),Cc.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:o}={},_debug:n=()=>{}}=this,{dirty:r,dirtyZIndex:s,layer:a,children:l,clipRect:c,dirtyTransform:d}=this;let{ctx:u,forceRender:h,clipBBox:p}=t;const{resized:f,stats:g}=t,v=u.getTransform(),y=r>=nl.MINOR||s||f;let m=y,b=!1;for(const E of l)if(m||(m=null==E.layerManager&&E.dirty>=nl.TRIVIAL),b||(b=null!=E.layerManager&&E.dirty>=nl.TRIVIAL),m)break;if(o&&n({name:o,group:this,isDirty:y,isChildDirty:m,dirtyTransform:d,renderCtx:t,forceRender:h}),d)h="dirtyTransform";else if(a){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)||(h="dirtyTransform",this.lastBBox=t)}if(!y&&!m&&!b&&!h)return o&&g&&n({name:o,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),a&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const S=this.visible;if(a){if(u=a.context,u.save(),u.resetTransform(),"dirtyTransform"!==h&&(h=m||s),h&&a.clear(),p){const{width:e,height:i,x:r,y:s}=p;n((()=>({name:o,clipBBox:p,ctxTransform:u.getTransform(),renderCtx:t,group:this}))),this.clipCtx(u,r,s,e,i)}u.setTransform(v)}else u.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(u),c){const{x:e,y:i,width:r,height:s}=c;u.save(),n((()=>({name:o,clipRect:c,ctxTransform:u.getTransform(),renderCtx:t,group:this}))),this.clipCtx(u,e,i,r,s),p=this.matrix.transformBBox(c)}const x=this.hasVirtualChildren();s?(this.sortChildren(l),"dirtyTransform"!==h&&(h=!0)):x&&this.sortChildren(l);const C=h!==t.forceRender||p!==t.clipBBox||u!==t.ctx?Object.assign(Object.assign({},t),{ctx:u,forceRender:h,clipBBox:p}):t;let w=0;for(const E of l)E.visible&&S?h||E.dirty!==nl.NONE?(u.save(),E.render(C),u.restore()):g&&(w+=E.nodeCount.count):(E.markClean(),g&&(w+=E.nodeCount.count));if(g&&(g.nodesSkipped+=w),super.render(t),c&&u.restore(),x)for(const E of this.virtualChildren)E.markClean({recursive:"virtual"});a&&(g&&g.layersRendered++,u.restore(),h&&a.snapshot(),null===(i=(e=a.context).verifyDepthZero)||void 0===i||i.call(e)),o&&g&&n({name:o,result:"rendered",skipped:w,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort(((t,e)=>{var i,o;return xc([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!==(o=e.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],e.serialNumber],Sc)}))}clipCtx(t,e,i,o,n){t.beginPath(),t.moveTo(e,i),t.lineTo(e+o,i),t.lineTo(e+o,i+n),t.lineTo(e,i+n),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,o=1/0,n=-1/0;return t.forEach((t=>{if(!t.visible)return;const r=t.computeTransformedBBox();if(!r)return;const s=r.x,a=r.y;s<e&&(e=s),a<o&&(o=a),s+r.width>i&&(i=s+r.width),a+r.height>n&&(n=a+r.height)})),new ul(e,o,i-e,n-o)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}Cc.className="Group",cs([sl({redraw:nl.MAJOR,convertor:t=>Math.min(1,Math.max(0,t))}),ds("design:type",Number)],Cc.prototype,"opacity",void 0);class wc{static select(t,e){return new wc(t,e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}static selectAll(t,e){const i=[],o=t=>{e(t)&&i.push(t),t.children.forEach(o)};return o(t),i}static selectByClass(t,e){return wc.selectAll(t,(t=>t instanceof e))}static selectByTag(t,e){return wc.selectAll(t,(t=>t.tag===e))}constructor(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=As.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(gl,e)?()=>new e:e}createNode(t,e,i){const o=this.nodeFactory(t);return o.datum=t,null===e||void 0===e||e(o),null!=i?this._nodes.splice(i,0,o):this._nodes.push(o),this.parentNode.appendChild(o),o}update(t,e,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${t}`),i){const o=new Map(t.map(((t,e)=>[i(t),[t,e]])));for(const[t,e]of this._nodesMap.entries())if(o.has(e)){const[i]=o.get(e);t.datum=i,this.garbageBin.delete(t),o.delete(e)}else this.garbageBin.add(t);for(const[t,[i,n]]of o.entries())this._nodesMap.set(this.createNode(i,e,n),t)}else{const i=Math.max(t.length,this.data.length);for(let o=0;o<i;o++)o>=t.length?this.garbageBin.add(this._nodes[o]):o>=this._nodes.length?this.createNode(t[o],e):(this._nodes[o].datum=t[o],this.garbageBin.delete(this._nodes[o]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter((t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1)))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){return this._nodes.forEach(((e,i)=>t(e,e.datum,i))),this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(t){return wc.selectAll(this.parentNode,t)}selectByClass(t){return wc.selectByClass(this.parentNode,t)}selectByTag(t){return wc.selectByTag(this.parentNode,t)}nodes(){return this._nodes}}class Ec extends wl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new ul(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:o}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,o)}return!1}render(t){var e;const{ctx:i,forceRender:o,stats:n}=t;if(this.dirty===nl.NONE&&!o)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:s,x2:a,y2:l}=this;if(r===a){const t=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=t,a=t}else if(s===l){const t=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=t,l=t}i.beginPath(),i.moveTo(r,s),i.lineTo(a,l),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function Oc(t,e,i,o){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const o=e*e-4*t*i,n=[];if(0===o){const i=-e/(2*t);i>=0&&i<=1&&n.push(i)}else if(o>0){const i=Math.sqrt(o),r=(-e-i)/(2*t),s=(-e+i)/(2*t);r>=0&&r<=1&&n.push(r),s>=0&&s<=1&&n.push(s)}return n}(e,i,o);const n=e/t,r=i/t,s=(3*r-n*n)/9,a=(9*n*r-27*(o/t)-2*n*n*n)/54,l=s*s*s+a*a,c=1/3,d=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(a+t)*Math.pow(Math.abs(a+t),c),i=Math.sign(a-t)*Math.pow(Math.abs(a-t),c),o=Math.abs(Math.sqrt(3)*(e-i)/2),r=-c*n+(e+i);if(r>=0&&r<=1&&d.push(r),0===o){const t=-c*n-(e+i)/2;t>=0&&t<=1&&d.push(t)}}else{const t=Math.acos(a/Math.sqrt(-s*s*s)),e=c*n,i=2*Math.sqrt(-s),o=i*Math.cos(c*t)-e,r=i*Math.cos(c*(t+2*Math.PI))-e,l=i*Math.cos(c*(t+4*Math.PI))-e;o>=0&&o<=1&&d.push(o),r>=0&&r<=1&&d.push(r),l>=0&&l<=1&&d.push(l)}return d}function Dc(t,e,i,o,n,r,s,a){const l=(i-t)*(a-r)-(o-e)*(s-n);if(0===l)return null;const c=((s-n)*(e-r)-(t-n)*(a-r))/l,d=((i-t)*(e-r)-(o-e)*(t-n))/l;return c>=0&&c<=1&&d>=0&&d<=1?{x:t+c*(i-t),y:e+c*(o-e)}:null}function Ac(t,e,i,o,n,r,s,a,l,c,d,u){const h=[],p=c-u,f=d-l,g=l*(u-c)-c*(d-l),v=Tc(t,i,n,s),y=Tc(e,o,r,a),m=Oc(p*v[0]+f*y[0],p*v[1]+f*y[1],p*v[2]+f*y[2],p*v[3]+f*y[3]+g);for(const b of m){const t=b*b,e=b*t,i=v[0]*e+v[1]*t+v[2]*b+v[3],o=y[0]*e+y[1]*t+y[2]*b+y[3];let n;n=l!==d?(i-l)/(d-l):(o-c)/(u-c),n>=0&&n<=1&&h.push({x:i,y:o})}return h}function Tc(t,e,i,o){return[3*e-t-3*i+o,3*t-6*e+3*i,-3*t+3*e,t]}function Mc(t,e,i,o,n,r,s,a,l,c){const d=(c-a)/(l-s),u=a-d*s,h=Math.pow(d,2)+1,p=2*(d*(u-e)-t),f=Math.pow(t,2)+Math.pow(u-e,2)-Math.pow(i,2),g=Math.pow(p,2)-4*h*f;if(g<0)return[];const v=(-p+Math.sqrt(g))/2/h,y=(-p-Math.sqrt(g))/2/h,m=[];return[v,y].forEach((t=>{if(!(t>=Math.min(s,l)&&t<=Math.max(s,l)))return;const e=d*t+u,i=zs(o);let a=zs(n),c=zs(Math.atan2(e,t));a<=i&&(a+=2*Math.PI),c<i&&(c+=2*Math.PI),r!==(c>=i&&c<=a)&&m.push({x:t,y:e})})),m}function kc(t,e,i){const o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:r}=i;if(i.startAngle===i.endAngle||o<Math.min(n,r)||o>Math.max(n,r))return!1;const s=Hs(i.startAngle),a=Hs(i.endAngle),l=Math.atan2(e,t);return s<a?l<=a&&l>=s:l<=a&&l>=-Math.PI||l>=s&&l<=Math.PI}function Rc(t,e){const{startAngle:i,endAngle:o,innerRadius:n,outerRadius:r}=e,s={x:r*Math.cos(i),y:r*Math.sin(i)},a={x:r*Math.cos(o),y:r*Math.sin(o)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=0===n?{x:0,y:0}:{x:n*Math.cos(o),y:n*Math.sin(o)};return null!=Dc(t.start.x,t.start.y,t.end.x,t.end.y,s.x,s.y,l.x,l.y)||null!=Dc(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,c.x,c.y)||Mc(0,0,r,i,o,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var Pc;Ec.className="Line",Ec.defaultStyles=Object.assign({},wl.defaultStyles,{fill:void 0,strokeWidth:1}),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],Ec.prototype,"x1",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],Ec.prototype,"y1",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],Ec.prototype,"x2",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],Ec.prototype,"y2",void 0),function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}(Pc||(Pc={}));class Nc{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let o=0;t.beginPath();for(const n of e)switch(n){case Pc.Move:t.moveTo(i[o++],i[o++]);break;case Pc.Line:t.lineTo(i[o++],i[o++]);break;case Pc.Curve:t.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case Pc.Arc:t.arc(i[o++],i[o++],i[o++],i[o++],i[o++],1===i[o++]);break;case Pc.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(Pc.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(Pc.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,o){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+o),this.lineTo(t,e+o),this.closePath()}arc(t,e,i,o,n){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=t+i*Math.cos(n),a=e+i*Math.sin(n);this.xy?(this.xy[0]=s,this.xy[1]=a):this.xy=[s,a],this.commands.push(Pc.Arc),this.params.push(t,e,i,o,n,r?1:0)}cubicCurveTo(t,e,i,o,n,r){this.xy||this.moveTo(t,e),this.commands.push(Pc.Curve),this.params.push(t,e,i,o,n,r),this.xy&&(this.xy[0]=n,this.xy[1]=r)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(Pc.ClosePath),this._closedPath=!0)}clear(){let{trackChanges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{trackChanges:!1};t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,o=this.params,n=i.length,r=-1e4,s=-1e4;let a=NaN,l=NaN,c=0,d=0,u=0;for(let h=0,p=0;h<n;h++)switch(i[h]){case Pc.Move:!isNaN(a)&&Dc(a,l,c,d,r,s,t,e)&&u++,c=o[p++],a=c,d=o[p++],l=d;break;case Pc.Line:Dc(c,d,o[p++],o[p++],r,s,t,e)&&u++,c=o[p-2],d=o[p-1];break;case Pc.Curve:u+=Ac(c,d,o[p++],o[p++],o[p++],o[p++],o[p++],o[p++],r,s,t,e).length,c=o[p-2],d=o[p-1];break;case Pc.Arc:const i=o[p++],n=o[p++],h=o[p++],f=o[p++],g=o[p++];u+=Mc(i,n,h,f,g,Boolean(o[p++]),r,s,t,e).length,c=i+Math.cos(g)*h,d=n+Math.sin(g)*h;break;case Pc.ClosePath:!isNaN(a)&&Dc(a,l,c,d,r,s,t,e)&&u++}return u%2===1}getPoints(){const{commands:t,params:e}=this,i=[];let o=0;for(let n=0;n<t.length;n++)switch(t[n]){case Pc.Move:case Pc.Line:i.push({x:e[o++],y:e[o++]});break;case Pc.Curve:o+=4,i.push({x:e[o++],y:e[o++]});break;case Pc.Arc:i.push({x:e[o++],y:e[o++]}),o+=4;case Pc.ClosePath:}return i}}function Lc(t){const{redraw:e=nl.MAJOR,changeCb:i,convertor:o}=null!==t&&void 0!==t?t:{};return sl({redraw:e,type:"path",convertor:o,changeCb:i})}class _c extends wl{constructor(){super(...arguments),this.path=new Nc,this.clipScalingX=1,this.clipScalingY=1,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,nl.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,o;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e||null!==(o=null===(i=this.clipPath)||void 0===i?void 0:i.isDirty())&&void 0!==o&&o)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}clip(t,e){const i=t.getTransform(),o=1!==this.clipScalingX||1!==this.clipScalingY;o&&t.scale(this.clipScalingX,this.clipScalingY),e(),o&&t.setTransform(i)}render(t){var e;const{ctx:i,forceRender:o,stats:n}=t;this.dirty!==nl.NONE||o?(this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath&&null!=this.clipMode?(i.save(),"normal"===this.clipMode&&this.clip(i,(()=>{var t;null===(t=this.clipPath)||void 0===t||t.draw(i),i.clip()})),this.clipScalingX>0&&this.clipScalingY>0&&(this.path.draw(i),this.fillStroke(i)),"punch-out"===this.clipMode&&this.clip(i,(()=>{var t,e;null===(t=this.clipPath)||void 0===t||t.draw(i),i.clip();const{x:o=-1e4,y:n=-1e4,width:r=2e4,height:s=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};i.clearRect(o,n,r,s)})),i.restore()):(this.path.draw(i),this.fillStroke(i)),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)):n&&(n.nodesSkipped+=this.nodeCount.count)}}_c.className="Path",cs([Lc(),ds("design:type",Nc)],_c.prototype,"clipPath",void 0),cs([Lc(),ds("design:type",String)],_c.prototype,"clipMode",void 0),cs([Lc(),ds("design:type",Object)],_c.prototype,"clipScalingX",void 0),cs([Lc(),ds("design:type",Object)],_c.prototype,"clipScalingY",void 0);class Ic extends _c{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const t=this.outerRadius;return new ul(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,{angleOffset:e,inset:i}=this,o=this.startAngle+e,n=this.endAngle+e,r=Math.abs(this.endAngle-this.startAngle)>=2*Math.PI,s=this.centerX,a=this.centerY;if(t.clear(),r){const e=this.innerRadius<=0?0:this.innerRadius+i,r=Math.min(e,this.outerRadius-i),l=Math.max(e,this.outerRadius-i);t.arc(s,a,l,o,n),r>0&&(t.moveTo(s+r*Math.cos(n),a+r*Math.sin(n)),t.arc(s,a,r,n,o,!0))}else{const e=Math.min(this.innerRadius+i,this.outerRadius-i),r=Math.max(this.innerRadius+i,this.outerRadius-i),l=e>0?i/e:0,c=r>0?i/r:0,d=Math.abs(n-o);if(d<2*c)return;const u=e<=i||d<2*l;if(u){const l=Math.abs(d)<.5*Math.PI?i*(1+Math.cos(d))/Math.sin(d):NaN;let c;c=l>0&&l<r?Math.max(Math.hypot(i,l),e):e;const u=.5*(o+n);t.moveTo(s+c*Math.cos(u),a+c*Math.sin(u))}else t.moveTo(s+e*Math.cos(o+l),a+e*Math.sin(o+l));t.arc(s,a,r,o+c,n-c),u||(e>0?t.arc(s,a,e,n-l,o+l,!0):t.lineTo(s,a))}t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,o=this.startAngle+i,n=this.endAngle+i,r=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(t,e);return kc(a.x,a.y,{startAngle:o,endAngle:n,innerRadius:r,outerRadius:s})}}function Fc(t,e){if(Vc(t)&&Vc(e)){const i={};return Object.keys(t).forEach((o=>{i[o]=o in e?Fc(t[o],e[o]):t[o]})),Object.keys(e).forEach((o=>{o in t||(i[o]=e[o])})),i}return Array.isArray(t)&&!Array.isArray(e)||Gc(t)&&!Gc(e)?t:e}function Gc(t){return"object"===typeof t&&null!==t}function Bc(t){return Gc(t)&&!Array.isArray(t)}function Vc(t){return Bc(t)&&t.constructor===Object}function jc(){var t;const e={};for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];for(const r of o){if(!r)continue;const i=Rs(r)?Ps(r):Object.keys(r);for(const o of i)Bc(e[o])&&Bc(r[o])?e[o]=jc(e[o],r[o]):null!==(t=e[o])&&void 0!==t||(e[o]=r[o])}return e}Ic.className="Sector",cs([Lc(),ds("design:type",Number)],Ic.prototype,"centerX",void 0),cs([Lc(),ds("design:type",Number)],Ic.prototype,"centerY",void 0),cs([Lc(),ds("design:type",Number)],Ic.prototype,"innerRadius",void 0),cs([Lc(),ds("design:type",Number)],Ic.prototype,"outerRadius",void 0),cs([Lc(),ds("design:type",Number)],Ic.prototype,"startAngle",void 0),cs([Lc(),ds("design:type",Number)],Ic.prototype,"endAngle",void 0),cs([Lc(),ds("design:type",Number)],Ic.prototype,"angleOffset",void 0),cs([Lc(),ds("design:type",Number)],Ic.prototype,"inset",void 0);let Wc=null;function zc(t){if(null!=t)return""===t?"":(null!==Wc&&void 0!==Wc||(Wc=document.createElement("div")),Wc.textContent=String(t),Wc.innerHTML)}const Hc=t=>"string"===typeof t,Uc=t=>!!t&&Object.prototype.hasOwnProperty.call(t,"toString")&&Hc(t.toString());function Kc(t){return Hc(t)||Uc(t)}function Yc(t){return $c(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&$c(e.valueOf())||(t=>t instanceof Date&&!isNaN(+t))(t);var e}function Xc(t,e){return e&&Yc(t)?t:e?void 0:Kc(t)?t:String(t)}const $c=t=>"number"===typeof t&&Number.isFinite(t),qc=new Map;function Zc(t,e){var i,o,n;const r=JSON.stringify(t,null,0);return qc.has(e)||qc.set(e,new Map),(null===(i=qc.get(e))||void 0===i?void 0:i.has(r))||null===(o=qc.get(e))||void 0===o||o.set(r,e(t)),null===(n=qc.get(e))||void 0===n?void 0:n.get(r)}const Jc={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;const i=(arguments.length>1?arguments[1]:void 0).keys[0],o=Math.abs(i-t);return t=i,!isNaN(o)&&o>0&&o<e?o:e}}},Qc={type:"processor",property:"sortedGroupDomain",calculate:t=>{let{domain:{groups:e}}=t;if(null!=e)return[...e].sort(((t,e)=>{for(let i=0;i<t.length;i++){const o=t[i]-e[i];if(0!==o)return o}return 0}))}};function td(t){let{normaliseTo:e,mode:i}=t;const o=(t,i)=>{const o=t*e/i;return o>=0?Math.min(e,o):Math.max(-e,o)};return()=>()=>(t,e)=>{const n=[0,0];for(const o of e){const e=t[o],r=e<0?0:1;"sum"===i?n[r]+=e:n[r]=0===r?Math.min(n[r],e):Math.max(n[r],e)}const r=Math.max(Math.abs(n[0]),n[1]);for(const i of e)t[i]=o(t[i],r)}}function ed(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sum";return{scopes:[t.id],type:"group-value-processor",matchGroupIds:e,adjust:Zc({normaliseTo:i,mode:o},td)}}function id(t){let{normaliseTo:e,zeroDomain:i,rangeMin:o,rangeMax:n}=t;const r=e[1]-e[0],s=(t,o,n)=>{const s=e[0]+(t-o)/n*r;return 0===n?i:s>=e[1]?e[1]:s<e[0]?e[0]:s};return()=>(t,i)=>{let[r,a]=t.domain.values[i];null!=o&&(r=o),null!=n&&(a=n);const l=a-r;t.domain.values[i]=[e[0],e[1]];for(const e of t.data){let o=e.values;"ungrouped"===t.type&&(o=[o]);for(const t of o)t[i]=s(t[i],r,l)}}}function od(t,e,i,o,n,r){return{scopes:[t.id],type:"property-value-processor",property:e,adjust:Zc({normaliseTo:i,rangeMin:n,rangeMax:r,zeroDomain:o},id)}}function nd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:"processor",scopes:[t.id],property:"animationValidation",calculate(i){var o;const{keys:n,values:r}=i.defs,{input:s,data:a}=i;let l=!0,c=!0;const d=[];for(let h=0;h<r.length;h++)(null===(o=r[h].scopes)||void 0===o?void 0:o.some((e=>e===t.id)))&&e.some((t=>r[h].id===t))&&d.push([h,r[h]]);const u=(t,e,o)=>{var n;if("category"===e.valueType){const e=i.domain[o][t];return void(l&&(l=e.length===s.count))}let r=null===(n=a[0])||void 0===n?void 0:n[o][t];for(let i=1;(l||c)&&i<a.length;i++){const e=a[i][o][t];c&&(c=r<=e),l&&(l=r!==e),r=e}};for(let t=0;(l||c)&&t<n.length;t++)u(t,n[t],"keys");for(let t=0;(l||c)&&t<d.length;t++){const[e,i]=d[t];u(e,i,"values")}return{uniqueKeys:l,orderedKeys:c}}}}function rd(t){let{mode:e,separateNegative:i}=t;return()=>()=>(t,o)=>{const n=[0,0];for(const r of o){const o=t[r],s=qs(o)&&i?0:1;"number"!==typeof o||isNaN(o)||("normal"===e&&(n[s]+=o),t[r]=n[s],"trailing"===e&&(n[s]+=o))}}}function sd(t){let{mode:e,sum:i}=t;return()=>{const t=[];let o=!0;return()=>(n,r)=>{let s=0;for(const a of r){const r=n[a],l=o&&"current"===i?0:t[a];t[a]=r;const c="current"===i?r:l;"number"!==typeof r||isNaN(r)?n[a]=s:"number"!==typeof l||isNaN(l)?n[a]=s:("normal"===e&&(s+=c),n[a]=s,"trailing"===e&&(s+=c))}o=!1}}}function ad(t,e,i,o){let n,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i.startsWith("window")){n=Zc({mode:i.endsWith("-trailing")?"trailing":"normal",sum:o},sd)}else n=Zc({mode:i,separateNegative:r},rd);return{scopes:[t.id],type:"group-value-processor",matchGroupIds:[e],adjust:n}}function ld(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"processor",property:"diff",calculate:i=>{const o={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,r=new Map,s=new Map,a=new Map,l=new Map,c=new Map,d=new Map;for(let u=0;u<Math.max(t.data.length,i.data.length);u++){const o=t.data[u],h=i.data[u],p=o?cd(o.keys):"",f=h?cd(h.keys):"";p!==f?(a.has(f)?(!e&&Ss(a.get(f).values,h.values)||(s.set(f,h),c.set(f,u),n.set(f,h)),a.delete(f),d.delete(f)):h&&(r.set(f,h),l.set(f,u)),r.has(p)?(!e&&Ss(r.get(p).values,o.values)||(s.set(p,o),c.set(p,u),n.set(p,o)),r.delete(p),l.delete(p)):o&&(s.delete(p),c.delete(p),a.set(p,o),d.set(p,u))):Ss(o.values,h.values)||(s.set(f,h),c.set(f,u))}return o.added=Array.from(r.keys()),o.updated=Array.from(s.keys()),o.removed=Array.from(a.keys()),o.moved=Array.from(n.keys()),o.addedIndices=Array.from(l.values()),o.updatedIndices=Array.from(c.values()),o.removedIndices=Array.from(d.values()),o.changed=o.added.length>0||o.updated.length>0||o.removed.length>0,o}}}function cd(t){return t.join("___")}class dd{constructor(){this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Dl(this)}}function ud(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,o=t.rotation?zs(Us(t.rotation)):0,n=!o&&e>=0&&e<=Math.PI?-1:1,r=!o&&i>=0&&i<=Math.PI?-1:1;let s=0;return t.parallel?s=n*Math.PI/2:-1===r&&(s=Math.PI),{configuredRotation:o,defaultRotation:s,parallelFlipFlag:n,regularFlipFlag:r}}function hd(t,e,i,o,n){const r=e>0&&e<=Math.PI,s=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(o*(r||s?-1:1)===-1)return"end"}else if(o*n===-1)return"end";return"start"}function pd(t,e,i,o,n){const{width:r,height:s}=e,a=new ul(i,o,0,0);n.transformBBox(a,e);const{x:l=0,y:c=0}=e;return e.width=r,e.height=s,{point:{x:l,y:c,size:0},label:{width:r,height:s,text:t}}}var fd;cs([ea(pa),ds("design:type",Object)],dd.prototype,"enabled",void 0),cs([ea(Ca),ds("design:type",Object)],dd.prototype,"color",void 0),cs([ea(Fa),ds("design:type",String)],dd.prototype,"fontStyle",void 0),cs([ea(Ba),ds("design:type",String)],dd.prototype,"fontWeight",void 0),cs([ea(Aa(0)),ds("design:type",Object)],dd.prototype,"fontSize",void 0),cs([ea(ga),ds("design:type",Object)],dd.prototype,"fontFamily",void 0),cs([ea(ha),ds("design:type",Function)],dd.prototype,"formatter",void 0),function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=750]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(fd||(fd={}));class gd extends _c{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,o=i/2;return new ul(t-o,e-o,i,i)}applyPath(t,e){const{path:i}=this;let{x:o,y:n}=this;i.clear();for(const{x:r,y:s,t:a}of e)o+=r*t,n+=s*t,"move"===a?i.moveTo(o,n):i.lineTo(o,n);i.closePath()}}cs([Lc(),ds("design:type",Number)],gd.prototype,"x",void 0),cs([Lc(),ds("design:type",Number)],gd.prototype,"y",void 0),cs([Lc({convertor:Math.abs}),ds("design:type",Number)],gd.prototype,"size",void 0);class vd extends gd{updatePath(){const{x:t,y:e,path:i,size:o}=this,n=o/2;i.clear(),i.arc(t,e,n,0,2*Math.PI),i.closePath()}}vd.className="Circle";const yd={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},md={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"};class bd{constructor(t){this.modules={},this.parent=t}destroy(){for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this.parent[t]}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(t.optionsKey in this.parent)throw new Error(`AG Charts - class already has option key '${t.optionsKey}'`);null==this.moduleContext&&(this.moduleContext=this.parent.createModuleContext());const e=new t.instanceConstructor(Object.assign({},this.moduleContext));this.modules[t.optionsKey]={instance:e},this.parent[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this.parent[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}*[Symbol.iterator](){for(const{instance:t}of Object.values(this.modules))yield t}}class Sd{constructor(){this.registeredListeners=new Map}addListener(t,e,i){const o={symbol:Symbol(t),handler:e,meta:i};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(o):this.registeredListeners.set(t,[o]),()=>this.removeListener(o.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const o=i.findIndex((e=>e.symbol===t));if(o>=0){i.splice(o,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t){const e=new class{constructor(){this.results=void 0}push(t){var e;void 0!==t&&(null!==(e=this.results)&&void 0!==e||(this.results=[]),this.results.push(t))}};for(var i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];for(const s of this.getListenersByType(t))try{e.push(s.handler(...o))}catch(r){Es.errorOnce(r)}return e.results}dispatchWrapHandlers(t,e){for(var i=arguments.length,o=new Array(i>2?i-2:0),n=2;n<i;n++)o[n-2]=arguments[n];for(const s of this.getListenersByType(t))try{e(s.handler,s.meta,...o)}catch(r){Es.errorOnce(r)}}getListenersByType(t){var e;return null!==(e=this.registeredListeners.get(t))&&void 0!==e?e:[]}}class xd{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!==typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null===(i=this.eventListeners.get(t))||void 0===i||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null===(e=this.eventListeners.get(t.type))||void 0===e||e.forEach((e=>e(t)))}}function Cd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/0,-1/0];for(const i of t)"number"===typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function wd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];for(const i of t)"number"===typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function Ed(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,o;return e[0]+=null!==(i=null===t||void 0===t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(o=null===t||void 0===t?void 0:t[1])&&void 0!==o?o:0,e}}}function Od(t,e,i,o){const n={id:e,scopes:[t.id],matchGroupIds:o?[o]:void 0,type:"aggregate",aggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const o=e[1]-e[0];return i.aggregateFunction(t).map((t=>t/o))}};return i.groupAggregateFunction&&(n.groupAggregateFunction=i.groupAggregateFunction),n}function Dd(t){return()=>{let e=0;return i=>"number"!==typeof i||isNaN(i)?i:(e+=t?Math.max(0,i):i,e)}}var Ad,Td;function Md(t){return null!=Xc(t,!0)}function kd(t){return null!=Xc(t,!1)}function Rd(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object.assign({scopes:[t.id],property:e,type:"key",valueType:i?"range":"category",validation:i?Md:kd},o)}function Pd(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object.assign({scopes:[t.id],property:e,type:"value",valueType:i?"range":"category",validation:i?Md:kd},o)}function Nd(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{onlyPositive:n}=o,r=ls(o,["onlyPositive"]);return Object.assign(Object.assign({},Pd(t,e,i,r)),{processor:Dd(n)})}function Ld(t,e,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"current",r=arguments.length>5?arguments[5]:void 0;return[Pd(t,e,i,r),ad(t,r.groupId,o,n,r.separateNegative)]}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(Ad||(Ad={}));class _d{constructor(t,e,i,o){let{datum:n}=i;this.type=t,this.event=e,this.datum=n,this.seriesId=o.id}}class Id{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.lineDashOffset=void 0}}cs([ea(wa),ds("design:type",String)],Id.prototype,"fill",void 0),cs([ea(Ta(0,1)),ds("design:type",Number)],Id.prototype,"fillOpacity",void 0),cs([ea(wa),ds("design:type",String)],Id.prototype,"stroke",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Id.prototype,"strokeWidth",void 0),cs([ea(Ta(0,1)),ds("design:type",Number)],Id.prototype,"strokeOpacity",void 0),cs([ea(ja),ds("design:type",Array)],Id.prototype,"lineDash",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Id.prototype,"lineDashOffset",void 0);class Fd{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}cs([ea(Ta(0)),ds("design:type",Number)],Fd.prototype,"strokeWidth",void 0),cs([ea(Ta(0,1)),ds("design:type",Number)],Fd.prototype,"dimOpacity",void 0),cs([ea(fa),ds("design:type",Boolean)],Fd.prototype,"enabled",void 0);class Gd{constructor(){this.color="black"}}cs([ea(wa),ds("design:type",String)],Gd.prototype,"color",void 0);class Bd{constructor(){this.item=new Id,this.series=new Fd,this.text=new Gd}}!function(t){t[t.None=0]="None",t[t.This=1]="This",t[t.Other=2]="Other"}(Td||(Td={}));class Vd extends xd{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.onDataChange()}get data(){var t;return null!==(t=this._data)&&void 0!==t?t:this._chartData}onDataChange(){this.nodeDataRefresh=!0}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}onSeriesGroupingChange(t,e){const{id:i,type:o,visible:n,rootGroup:r,highlightGroup:s,annotationGroup:a}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:o}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:o,visible:n,seriesGrouping:e}),null!=this.rootGroup.parent&&this.ctx.seriesLayerManager.changeGroup({id:i,type:o,rootGroup:r,highlightGroup:s,annotationGroup:a,getGroupZIndexSubOrder:t=>this.getGroupZIndexSubOrder(t),seriesGrouping:e,oldGrouping:t})}getBandScalePadding(){return{inner:1,outer:0}}constructor(t){super(),this.NodeClickEvent=_d,this.id=cl(this),this.rootGroup=new Cc({name:"seriesRoot",isVirtual:!0}),this.axes={[ol.X]:void 0,[ol.Y]:void 0},this.directions=[ol.X,ol.Y],this.nodeDataRefresh=!0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.seriesGrouping=void 0,this._declarationOrder=-1,this.seriesListeners=new Sd,this.highlightStyle=new Bd,this.moduleMap=new bd(this),this.nodeDataDependencies={},this.ctx=t.moduleCtx;const{useLabelLayer:e=!1,pickModes:i=[Ad.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:o={},directionNames:n={},contentGroupVirtual:r=!0,canHaveAxes:s=!1}=t;this.directionKeys=o,this.directionNames=n,this.canHaveAxes=s,this.contentGroup=this.rootGroup.appendChild(new Cc({name:`${this.id}-content`,layer:!r,isVirtual:r,zIndex:fd.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new Cc({name:`${this.id}-highlight`,layer:!r,isVirtual:r,zIndex:fd.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new Cc({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new Cc({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new Cc({name:`${this.id}-series-labels`,layer:e,zIndex:fd.SERIES_LABEL_ZINDEX})),this.annotationGroup=new Cc({name:`${this.id}-annotation`,layer:!r,isVirtual:r,zIndex:fd.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}getGroupZIndexSubOrder(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){return this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),o=null===e||void 0===e?void 0:e[i],n=[];if(!o)return n;const r=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const o of e)Array.isArray(o)?r(...o):"object"===typeof o?r(...Object.values(o)):n.push(o)};return r(...o.map((t=>this[t]))),n}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){var e;const i=this.getSeriesDomain(t);return(null!==(e=this.dispatch("data-getDomain",{direction:t}))&&void 0!==e?e:[]).reduce(((t,e)=>t.concat(e)),i)}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:e=!0}=this.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case Td.None:case Td.This:return 1;case Td.Other:default:return t}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case Td.This:return e;case Td.None:case Td.Other:return t}}isItemIdHighlighted(){var t,e;const{series:i}=null!==(e=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight())&&void 0!==e?e:{};return null==i?Td.None:i!==this?Td.Other:Td.This}getModuleTooltipParams(t){var e;return(null!==(e=this.dispatch("tooltip-getParams",{datum:t}))&&void 0!==e?e:[]).reduce(((t,e)=>Object.assign(Object.assign({},e),t)),{})}pickNode(t,e){const{pickModes:i,visible:o,rootGroup:n}=this;if(o&&n.visible)for(const r of i){if(e&&!e.includes(r))continue;let i;switch(r){case Ad.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(t);break;case Ad.NEAREST_BY_MAIN_AXIS_FIRST:case Ad.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(t,r===Ad.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case Ad.NEAREST_NODE:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:r,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",t,e,this))}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Object.assign(Object.assign({},this.ctx),{series:this})}getLabelText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String;var o;return t.formatter&&null!==(o=this.ctx.callbackCache.call(t.formatter,Object.assign({seriesId:this.id},e)))&&void 0!==o?o:i(e.value)}getMarkerStyle(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getStyle();var o,n;const r=jc({size:null!==(n=null===(o=e.datum.point)||void 0===o?void 0:o.size)&&void 0!==n?n:0},i);if(t.formatter){return jc(this.ctx.callbackCache.call(t.formatter,Object.assign(Object.assign(Object.assign({seriesId:this.id},r),e),{datum:e.datum.datum})),r)}return r}updateMarkerStyle(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getStyle(),{applyTranslation:n=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{point:r}=i.datum,s=this.getMarkerStyle(e,i,o),a=this.visible&&s.size>0&&r&&!isNaN(r.x)&&!isNaN(r.y);n?t.setProperties(Object.assign(Object.assign({visible:a},s),{translationX:null===r||void 0===r?void 0:r.x,translationY:null===r||void 0===r?void 0:r.y})):t.setProperties(Object.assign({visible:a},s)),"function"!==typeof e.shape||t.dirtyPath||(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}getMinRect(){}checkResize(t){const e={seriesRectWidth:null===t||void 0===t?void 0:t.width,seriesRectHeight:null===t||void 0===t?void 0:t.height},i=null!=Ls(this.nodeDataDependencies,e);return i&&(this.nodeDataDependencies=e,this.markNodeDataDirty()),i}}function jd(t,e,i,o){let{id:n}=t;Xl(n,e,i,o,{opacity:0},{opacity:1},Wl)}function Wd(t,e,i,o){let{id:n}=t;Xl(n,e,i,o,{opacity:1},{opacity:0},Wl)}function zd(t){return{opacity:1}}Vd.highlightedZIndex=1e12,cs([ea(ga),ds("design:type",Object)],Vd.prototype,"id",void 0),cs([ea(pa),ds("design:type",Object)],Vd.prototype,"_visible",void 0),cs([ea(pa),ds("design:type",Object)],Vd.prototype,"showInLegend",void 0),cs([ea(ga),ds("design:type",Object)],Vd.prototype,"cursor",void 0),cs([ea($a),ds("design:type",Object)],Vd.prototype,"nodeClickRange",void 0),cs([Nl({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}}),ds("design:type",Object)],Vd.prototype,"seriesGrouping",void 0);const Hd={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Ud(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(t.getFullYear(),0,1);const i=t.getTimezoneOffset()-e.getTimezoneOffset(),o=t.getTime()-e.getTime()+6e4*i;return Math.floor(o/864e5)}function Kd(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,o=new Date(t.getFullYear(),0,i+1);return o<=t?Math.floor(Ud(t,o)/7)+1:0}function Yd(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getFullYear();const i=new Date(e,0,1).getDay(),o=new Date(e,0,(4-i+7)%7-3+1);return o<=t?Math.floor(Ud(t,o)/7)+1:Yd(t,e-1)}const Xd={a:t=>Hd.shortDays[t.getDay()],A:t=>Hd.days[t.getDay()],b:t=>Hd.shortMonths[t.getMonth()],B:t=>Hd.months[t.getMonth()],c:"%x, %X",d:(t,e)=>qd(t.getDate(),2,null!==e&&void 0!==e?e:"0"),e:"%_d",f:(t,e)=>qd(1e3*t.getMilliseconds(),6,null!==e&&void 0!==e?e:"0"),H:(t,e)=>qd(t.getHours(),2,null!==e&&void 0!==e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":qd(i,2,null!==e&&void 0!==e?e:"0")},j:(t,e)=>qd(Ud(t)+1,3,null!==e&&void 0!==e?e:"0"),m:(t,e)=>qd(t.getMonth()+1,2,null!==e&&void 0!==e?e:"0"),M:(t,e)=>qd(t.getMinutes(),2,null!==e&&void 0!==e?e:"0"),L:(t,e)=>qd(t.getMilliseconds(),3,null!==e&&void 0!==e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>qd(t.getSeconds(),2,null!==e&&void 0!==e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>qd(Kd(t,0),2,null!==e&&void 0!==e?e:"0"),V:(t,e)=>qd(Yd(t),2,null!==e&&void 0!==e?e:"0"),w:(t,e)=>qd(t.getDay(),2,null!==e&&void 0!==e?e:"0"),W:(t,e)=>qd(Kd(t,1),2,null!==e&&void 0!==e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>qd(t.getFullYear()%100,2,null!==e&&void 0!==e?e:"0"),Y:(t,e)=>qd(t.getFullYear(),4,null!==e&&void 0!==e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${qd(Math.floor(i/60),2,"0")}${qd(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},$d={_:" ",0:"0","-":""};function qd(t,e,i){const o=String(Math.floor(t));return o.length>=e?o:`${i.repeat(e-o.length)}${o}`}function Zd(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const o=i>0?t.substring(0,i):t;e.push(o)}if(i<0)break;const o=t[i+1],n=$d[o];null!=n&&i++;const r=t[i+1],s=Xd[r];if("function"===typeof s)e.push([s,n]);else if("string"===typeof s){const t=Zd(s);e.push([t,n])}else e.push(`${null!==n&&void 0!==n?n:""}${r}`);t=t.substring(i+2)}return t=>{const i="number"===typeof t?new Date(t):t;return e.map((t=>"string"===typeof t?t:t[0](i,t[1]))).join("")}}const Jd=/(#\{(.*?)\})/g;function Qd(t,e,i){return t.replace(Jd,(function(){const t=arguments.length<=2?void 0:arguments[2],[o,n]=t.split(":"),r=e[o];if("number"===typeof r){const t=n&&i&&i[n];if(t){const{locales:e,options:i}=t;return r.toLocaleString(e,i)}return String(r)}if(r instanceof Date){const t=n&&i&&i[n];if("string"===typeof t){return Zd(t)(r)}return r.toDateString()}return"string"===typeof r||(null===r||void 0===r?void 0:r.toString)?String(r):""}))}function tu(t,e){const i=t.createElement("style");i.innerHTML=e,t.head.insertBefore(i,t.head.querySelector("style"))}const eu="ag-chart-tooltip",iu="ag-chart-dark-tooltip",ou=`\n.${eu} {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.${eu}-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.${eu}-no-animation {\n    transition: none !important;\n}\n\n.${eu}-hidden {\n    visibility: hidden;\n}\n\n.${eu}-title {\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n}\n\n.${eu}-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.${eu}-content {\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n}\n\n.${eu}-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${eu}-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${eu}.${iu} {\n    color: white;\n    background: #15181c;\n}\n\n.${eu}.${iu} .${eu}-content {\n    border-color: rgba(255, 255, 255, 0.15);\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n`;function nu(t,e){var i,o,n;if("string"===typeof t)return t;const{content:r=(null!==(i=null===e||void 0===e?void 0:e.content)&&void 0!==i?i:""),title:s=(null===e||void 0===e?void 0:e.title),color:a=(null!==(o=null===e||void 0===e?void 0:e.color)&&void 0!==o?o:"white"),backgroundColor:l=(null!==(n=null===e||void 0===e?void 0:e.backgroundColor)&&void 0!==n?n:"#888")}=t;return`${s?`<div class="${eu}-title"\n        style="color: ${a}; background-color: ${l}">${s}</div>`:""}${r?`<div class="${eu}-content">${r}</div>`:""}`}const ru=["pointer","node"],su=oa((t=>ru.includes(t)),"expecting a position type keyword such as 'pointer' or 'node'");class au{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}cs([ea(su),ds("design:type",String)],au.prototype,"type",void 0),cs([ea(Aa()),ds("design:type",Number)],au.prototype,"xOffset",void 0),cs([ea(Aa()),ds("design:type",Number)],au.prototype,"yOffset",void 0);class lu{constructor(t,e,i,o){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.lastVisibilityChange=Date.now(),this.position=new au,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=o,this.window=i;const n=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(n),this.element.classList.add(eu),this.canvasElement=t,"undefined"!==typeof IntersectionObserver){const t=new IntersectionObserver((t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)}),{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}lu.tooltipDocuments.indexOf(e)<0&&(tu(e,ou),lu.tooltipDocuments.push(e))}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains(eu+"-hidden")}updateClass(t,e){const{element:i,class:o,lastClass:n,enableInteraction:r,lastVisibilityChange:s}=this,a=this.isVisible(),l=!!t;let c=1/0;if(a!==l){const t=Date.now();c=t-s,this.lastVisibilityChange=t}const d=(t,e)=>{const o=`${eu}-${t}`;e?i.classList.add(o):i.classList.remove(o)};c>5&&d("no-animation",!a&&l&&c>100),d("no-interaction",!r),d("hidden",!t),d("arrow",!!e),o!==n&&(n&&i.classList.remove(n),o&&i.classList.add(o),this.lastClass=o)}show(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o,n,r,s,a,l,c;const{element:d,canvasElement:u}=this;if(void 0!==e)d.innerHTML=e;else if(!d.innerHTML)return void this.toggle(!1);const h=(t,e,i)=>Math.max(Math.min(e,i),t),p=null!==(n=null===(o=t.position)||void 0===o?void 0:o.xOffset)&&void 0!==n?n:0,f=null!==(s=null===(r=t.position)||void 0===r?void 0:r.yOffset)&&void 0!==s?s:0,g=u.getBoundingClientRect(),v=g.left+t.offsetX-d.clientWidth/2+p,y=g.top+t.offsetY-d.clientHeight-8+f,m=this.getWindowBoundingBox(),b=m.x+m.width-d.clientWidth-1,S=m.y+m.height-d.clientHeight,x=h(m.x,v,b),C=h(m.y,y,S),w=!(x!==v||C!==y)&&!p&&!f,E=null!==(l=null!==(a=t.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==l?l:w;if(this.updateShowArrow(E),d.style.transform=`translate(${Math.round(x)}px, ${Math.round(C)}px)`,this.enableInteraction=null!==(c=t.enableInteraction)&&void 0!==c&&c,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=this.window.setTimeout((()=>{this.toggle(!0)}),this.delay));this.toggle(!0)}getWindowBoundingBox(){return new ul(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(t){t||this.window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,o=Boolean(["","-title","-content"].filter((t=>null===i||void 0===i?void 0:i.contains(`${eu}${t}`))));return void 0!==i&&o}updateShowArrow(t){this._showArrow=t}}lu.tooltipDocuments=[],cs([ea(pa),ds("design:type",Boolean)],lu.prototype,"enabled",void 0),cs([ea(fa),ds("design:type",Boolean)],lu.prototype,"showArrow",void 0),cs([ea(va),ds("design:type",String)],lu.prototype,"class",void 0),cs([ea(Aa(0)),ds("design:type",Number)],lu.prototype,"delay",void 0),cs([ea($a),ds("design:type",Object)],lu.prototype,"range",void 0);class cu{constructor(){this.enabled=!1}}cs([ea(pa),ds("design:type",Object)],cu.prototype,"enabled",void 0);class du{constructor(){this.enabled=!0,this.showArrow=void 0,this.format=void 0,this.renderer=void 0,this.interaction=new cu,this.position=new au}toTooltipHtml(t,e,i){var o,n;const r=null!==(o=null===i||void 0===i?void 0:i.format)&&void 0!==o?o:this.format,s=null!==(n=null===i||void 0===i?void 0:i.renderer)&&void 0!==n?n:this.renderer;return r?nu({content:Qd(r,e)},t):s?nu(s(e),t):nu(t)}}function uu(t,e,i,o){const n=[i.convert(0),i.convert(1)],r=[o.convert(0),o.convert(1)],s=Math.PI/-2+Us(e);return{nodes:{toFn:(t,e,i,o)=>{let{prevLive:r}=o;var a,l;let{startAngle:c,endAngle:d,innerRadius:u,outerRadius:h}=e;const{stroke:p,fill:f}=e.sectorFormat;if("removed"===i&&r?(c=null===(a=r.datum)||void 0===a?void 0:a.endAngle,d=null===(l=r.datum)||void 0===l?void 0:l.endAngle):"removed"!==i||r||(c=s,d=s),"removed"===i){const t=(t=>{let{radius:e}=t;return{innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*e}})(e);u=t.innerRadius,h=t.outerRadius}return{startAngle:c,endAngle:d,outerRadius:h,innerRadius:u,stroke:p,fill:f}},fromFn:(e,i,o,n)=>{let{prevFromProps:a}=n;var l,c,d,u,h,p;let{startAngle:f,endAngle:g,innerRadius:v,outerRadius:y}=e,{fill:m,stroke:b}=i.sectorFormat;if("unknown"===o||"added"===o&&!a?(f=s,g=s,v=i.innerRadius,y=i.outerRadius):"added"===o&&a&&(f=null!==(l=a.endAngle)&&void 0!==l?l:s,g=null!==(c=a.endAngle)&&void 0!==c?c:s,v=null!==(d=a.innerRadius)&&void 0!==d?d:i.innerRadius,y=null!==(u=a.outerRadius)&&void 0!==u?u:i.outerRadius),"added"===o&&!t){const t=(t=>{let{radius:e}=t;return{innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*e}})(i);v=t.innerRadius,y=t.outerRadius}return"updated"===o&&(m=null!==(h=e.fill)&&void 0!==h?h:m,b=null!==(p=e.stroke)&&void 0!==p?p:b),{startAngle:f,endAngle:g,innerRadius:v,outerRadius:y,fill:m,stroke:b}}},innerCircle:{fromFn:(t,e)=>{var i,o,n;return{size:null!==(n=null!==(o=null===(i=t.previousDatum)||void 0===i?void 0:i.radius)&&void 0!==o?o:t.size)&&void 0!==n?n:0}},toFn:(t,e)=>{var i;return{size:null!==(i=e.radius)&&void 0!==i?i:0}}}}}function hu(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function pu(t,e){const i=Hl(t),o=i?t:[],n=i?[]:t;for(const r of n){for(const t of r.nodes()){const i=e(t,t.datum);t.setProperties(i)}r.cleanup()}for(const r of o){const t=e(r,r.datum);r.setProperties(t)}}cs([ea(pa),ds("design:type",Object)],du.prototype,"enabled",void 0),cs([ea(fa),ds("design:type",Boolean)],du.prototype,"showArrow",void 0),cs([ea(va),ds("design:type",String)],du.prototype,"format",void 0),cs([ea(ha),ds("design:type",Function)],du.prototype,"renderer",void 0);var fu,gu=Object.freeze({__proto__:null,resetMotion:pu});class vu{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=As.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,o;const n=this.states[this.state],r=null===n||void 0===n?void 0:n[t];if(!r)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");let s=this.state;return"string"===typeof r?s=r:"object"===typeof r&&(s=r.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${s}`,"color: green"),null===(i=this.preTransitionCb)||void 0===i||i.call(this,this.state,s),this.state=s,"function"===typeof r?r(e):"object"===typeof r&&(null===(o=r.action)||void 0===o||o.call(r,e)),this.state}}class yu extends Vd{isContinuous(){var t,e;return{isContinuousX:mc.is(null===(t=this.axes[ol.X])||void 0===t?void 0:t.scale),isContinuousY:mc.is(null===(e=this.axes[ol.Y])||void 0===e?void 0:e.scale)}}requestDataModel(t,e,i){var o;return us(this,void 0,void 0,(function*(){const n=i.props,r=null!==(o=this.dispatch("data-prerequest",this.isContinuous()))&&void 0!==o?o:[];for(const t of r)n.push(...t);const{dataModel:s,processedData:a}=yield t.request(this.id,null!==e&&void 0!==e?e:[],Object.assign(Object.assign({},i),{props:n}));return this.dataModel=s,this.processedData=a,this.dispatch("data-processed",{dataModel:s,processedData:a}),{dataModel:s,processedData:a}}))}isProcessedDataAnimatable(){var t,e;const i=null===(e=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===e?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:o,uniqueKeys:n}=i;return!!o&&!!n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}}class mu extends yu{constructor(t){var{useLabelLayer:e=!1,pickModes:i=[Ad.EXACT_SHAPE_MATCH],canHaveAxes:o=!1,animationResetFns:n}=t,r=ls(t,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(Object.assign(Object.assign({},r),{useLabelLayer:e,pickModes:i,contentGroupVirtual:!1,directionKeys:{[ol.X]:["angleKey"],[ol.Y]:["radiusKey"]},directionNames:{[ol.X]:["angleName"],[ol.Y]:["radiusName"]},canHaveAxes:o})),this.sectorGroup=this.contentGroup.appendChild(new Cc),this.itemSelection=wc.select(this.sectorGroup,(()=>this.nodeFactory()),!1),this.labelSelection=wc.select(this.labelGroup,Ol,!1),this.highlightSelection=wc.select(this.highlightGroup,(()=>this.nodeFactory())),this.centerX=0,this.centerY=0,this.radius=0,this.sectorGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=n,this.animationState=new vu("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},(()=>this.checkProcessedDataAnimatable()))}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&pu([this.itemSelection,this.highlightSelection],e),i&&pu([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};i&&pu([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}}class bu extends _d{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.angleKey,this.radiusKey=o.radiusKey,this.calloutLabelKey=o.calloutLabelKey,this.sectorLabelKey=o.sectorLabelKey}}!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}(fu||(fu={}));class Su extends dd{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}}cs([ea(Aa(0)),ds("design:type",Object)],Su.prototype,"offset",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Su.prototype,"minAngle",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Su.prototype,"minSpacing",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Su.prototype,"maxCollisionOffset",void 0),cs([ea(pa),ds("design:type",Object)],Su.prototype,"avoidCollisions",void 0);class xu extends dd{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}}cs([ea(Aa()),ds("design:type",Object)],xu.prototype,"positionOffset",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],xu.prototype,"positionRatio",void 0);class Cu{constructor(){this.length=10,this.strokeWidth=1}}cs([ea(Oa),ds("design:type",Array)],Cu.prototype,"colors",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Cu.prototype,"length",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Cu.prototype,"strokeWidth",void 0);class wu extends Ll{constructor(){super(...arguments),this.showInLegend=!1}}cs([ea(pa),ds("design:type",Object)],wu.prototype,"showInLegend",void 0);class Eu extends dd{constructor(){super(...arguments),this.text="",this.margin=2}}cs([ea(ga),ds("design:type",Object)],Eu.prototype,"text",void 0),cs([ea(Aa()),ds("design:type",Object)],Eu.prototype,"margin",void 0);class Ou{constructor(){this.fill="transparent",this.fillOpacity=1}}cs([ea(Ca),ds("design:type",Object)],Ou.prototype,"fill",void 0),cs([ea(Ta(0,1)),ds("design:type",Object)],Ou.prototype,"fillOpacity",void 0);class Du extends mu{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:hu,label:zd}}),this.previousRadiusScale=new bc,this.radiusScale=new bc,this.backgroundGroup=this.rootGroup.appendChild(new Cc({name:`${this.id}-background`,layer:!0,zIndex:fd.SERIES_BACKGROUND_ZINDEX})),this.innertCircleGroup=this.backgroundGroup.appendChild(new Cc({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new Su,this.sectorLabel=new xu,this.calloutLine=new Cu,this.tooltip=new du,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=Object.values(yd),this.strokes=Object.values(md),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new Bd,this.surroundingRadius=void 0,this.NodeClickEvent=bu,this.angleScale=new bc,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((t=>t+Math.PI/2));const e=new Cc({name:"pieCalloutLabels"}),i=new Cc({name:"pieSectorLabels"}),o=new Cc({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(o),this.calloutLabelSelection=wc.select(e,Cc),this.sectorLabelSelection=wc.select(i,Ol),this.innerLabelsSelection=wc.select(o,Ol),this.innerCircleSelection=wc.select(this.innertCircleGroup,vd)}addChartEventListeners(){var t;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",(t=>this.onLegendItemClick(t)))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=null===e||void 0===e?void 0:e.map((()=>i)))&&void 0!==t?t:[]}nodeFactory(){return new Ic}getSeriesDomain(t){return t===ol.X?this.angleScale.domain:this.radiusScale.domain}processData(t){var e,i;return us(this,void 0,void 0,(function*(){let{data:o}=this;const{angleKey:n,radiusKey:r,calloutLabelKey:s,sectorLabelKey:a,legendItemKey:l,seriesItemEnabled:c}=this;if(null==n||null==o)return;const d=!this.ctx.animationManager.isSkipped(),u=[],h=[];l?u.push(Rd(this,l,!1,{id:"legendItemKey"})):s?u.push(Rd(this,s,!1,{id:"calloutLabelKey"})):a&&u.push(Rd(this,a,!1,{id:"sectorLabelKey"})),r&&h.push(function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{min:o=-1/0,max:n=1/0}=i,r=ls(i,["min","max"]);return Object.assign({scopes:[t.id],type:"value",property:e,valueType:"range",validation:Md,processor:()=>t=>"number"!==typeof t||isNaN(t)?t:Math.min(Math.max(t,o),n)},r)}(this,r,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),Pd(this,r,!0,{id:"radiusRaw"}),od(this,{id:"radiusValue"},[0,1],1,null!==(i=this.radiusMin)&&void 0!==i?i:0,this.radiusMax)),s&&h.push(Pd(this,s,!1,{id:"calloutLabelValue"})),a&&h.push(Pd(this,a,!1,{id:"sectorLabelValue"})),l&&h.push(Pd(this,l,!1,{id:"legendItemValue"})),d&&this.processedData&&u.length>0&&h.push(ld(this.processedData)),h.push(nd(this)),o=o.map(((t,e)=>c[e]?t:Object.assign(Object.assign({},t),{[n]:0}))),yield this.requestDataModel(t,o,{props:[...u,Nd(this,n,!0,{id:"angleValue",onlyPositive:!0}),Pd(this,n,!0,{id:"angleRaw"}),od(this,{id:"angleValue"},[0,1],0,0),...h]}),this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return us(this,void 0,void 0,(function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return us(this,void 0,void 0,(function*(){const{id:t,processedData:e,dataModel:i,rotation:o,angleScale:n}=this;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:r,radiusIdx:s,calloutLabelIdx:a,sectorLabelIdx:l,legendItemIdx:c}=this.getProcessedDataIndexes(i);let d=0;const u=e.data.map(((t,e)=>{var i;const{datum:u,values:h}=t,p=h[r],f=n.convert(d)+Us(o);d=p;const g=n.convert(d)+Us(o),v=Math.abs(g-f),y=f+v/2,m=h[r+1],b=s>=0&&null!==(i=h[s])&&void 0!==i?i:1,S=s>=0?h[s+1]:void 0,x=c>=0?h[c]:void 0,C=this.getLabels(u,y,v,!0,h[a],h[l],x),w=this.getSectorFormat(u,e,!1);return Object.assign({itemId:e,series:this,datum:u,index:e,angleValue:m,midAngle:y,midCos:Math.cos(y),midSin:Math.sin(y),startAngle:f,endAngle:g,sectorFormat:w,radiusValue:S,radius:b,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(b),0),legendItemValue:x},C)}));return[{itemId:t,nodeData:u,labelData:u}]}))}getLabels(t,e,i,o,n,r,s){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this,d=!o||a.enabled?this.calloutLabelKey:void 0,u=!o||l.enabled?this.sectorLabelKey:void 0;if(!d&&!u&&!c)return{};const h={datum:t,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName,legendItemKey:this.legendItemKey},p={};return d&&i>Us(a.minAngle)&&(p.calloutLabel=Object.assign(Object.assign({},this.getTextAlignment(e)),{text:this.getLabelText(a,Object.assign(Object.assign({},h),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,Object.assign(Object.assign({},h),{value:r}))}),null!=c&&null!=s&&(p.legendItem={key:c,text:s}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Hs(t)- -3*Math.PI/4;return e[Qs(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var o,n,r,s,a;const{angleKey:l,radiusKey:c,fills:d,strokes:u,formatter:h,id:p,ctx:{callbackCache:f,highlightManager:g}}=this,v=g.getActiveHighlight(),y=i&&(null===v||void 0===v?void 0:v.series)===this&&e===v.itemId,{fill:m,fillOpacity:b,stroke:S,strokeWidth:x,strokeOpacity:C}=jc(y&&this.highlightStyle.item,{fill:d[e%d.length],fillOpacity:this.fillOpacity,stroke:u[e%u.length],strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.getOpacity()});let w;return h&&(w=f.call(h,{datum:t,angleKey:l,radiusKey:c,fill:m,stroke:S,fills:d,strokes:u,strokeWidth:x,highlighted:y,seriesId:p})),{fill:null!==(o=null===w||void 0===w?void 0:w.fill)&&void 0!==o?o:m,fillOpacity:null!==(n=null===w||void 0===w?void 0:w.fillOpacity)&&void 0!==n?n:b,stroke:null!==(r=null===w||void 0===w?void 0:w.stroke)&&void 0!==r?r:S,strokeWidth:null!==(s=null===w||void 0===w?void 0:w.strokeWidth)&&void 0!==s?s:x,strokeOpacity:null!==(a=null===w||void 0===w?void 0:w.strokeOpacity)&&void 0!==a?a:C}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,o=t*e+i;return o===t||o<0?0:o}getOuterRadius(){return Math.max(this.radius*this.outerRadiusRatio+this.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map((t=>{var{radius:e}=t,i=ls(t,["radius"]);return Object.assign(Object.assign({},i),{radius:e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e),0)})}))}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update(t){let{seriesRect:e}=t;return us(this,void 0,void 0,(function*(){const{title:t}=this,i={seriesRectWidth:null===e||void 0===e?void 0:e.width,seriesRectHeight:null===e||void 0===e?void 0:e.height},o=null!=Ls(this.nodeDataDependencies,i);if(o&&(this.nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(o),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const e=this.getTitleTranslationY(),i=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(i,0,e),t.node.translationY=isFinite(e)?e:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)}))}updateTitleNodes(){var t,e;const{title:i,oldTitle:o}=this;o!==i&&(o&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(o.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach((t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}}))}updateSelections(){return us(this,void 0,void 0,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return us(this,void 0,void 0,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:o,innerLabelsSelection:n}=this,r=(t,e)=>{let i=this.nodeData;e&&(i=i.map((t=>Object.assign(Object.assign({},t),{sectorFormat:Object.assign({},t.sectorFormat)})))),t.update(i),this.ctx.animationManager.isSkipped()&&t.cleanup()};r(t,!1),r(e,!0),i.update(this.nodeData,(t=>{const e=new Ec;e.tag=fu.Callout,e.pointerEvents=pl.None,t.appendChild(e);const i=new Ol;i.tag=fu.Label,i.pointerEvents=pl.None,t.appendChild(i)})),o.update(this.nodeData,(t=>{t.pointerEvents=pl.None})),n.update(this.innerLabels,(t=>{t.pointerEvents=pl.None}))}))}updateInnerCircleSelection(){const{innerCircle:t}=this;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),o=1;e=Math.ceil(2*t+o)}const o=t?[{radius:e}]:[];this.innerCircleSelection.update(o)}updateNodes(t){return us(this,void 0,void 0,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null===e||void 0===e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((t,e)=>{let{radius:i}=e;var o,n;t.setProperties({fill:null===(o=this.innerCircle)||void 0===o?void 0:o.fill,opacity:null===(n=this.innerCircle)||void 0===n?void 0:n.fillOpacity,size:i})}));const o=(t,e,i,o)=>{const n=this.getSectorFormat(e.datum,e.itemId,o);e.sectorFormat.fill=n.fill,e.sectorFormat.stroke=n.stroke;const r=this.ctx.animationManager.isSkipped();r&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(o||r)&&(t.fill=n.fill,t.stroke=n.stroke),t.strokeWidth=n.strokeWidth,t.fillOpacity=n.fillOpacity,t.strokeOpacity=this.strokeOpacity,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=this.shadow,t.lineJoin="round"};this.itemSelection.each(((t,e,i)=>o(t,e,0,!1))),this.highlightSelection.each(((t,i,n)=>{const r=(null===e||void 0===e?void 0:e.series)===this&&t.datum.itemId===e.itemId;o(t,i,0,r),t.visible=r})),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this,i=e.length,o=e.strokeWidth,n=null!==(t=e.colors)&&void 0!==t?t:this.strokes,{offset:r}=this.calloutLabel;this.calloutLabelSelection.selectByTag(fu.Callout).forEach(((t,e)=>{const s=t.datum,{calloutLabel:a,outerRadius:l}=s;if((null===a||void 0===a?void 0:a.text)&&!a.hidden&&0!==l){t.visible=!0,t.strokeWidth=o,t.stroke=n[e%n.length],t.fill=void 0;const c=s.midCos*l,d=s.midSin*l;let u=s.midCos*(l+i),h=s.midSin*(l+i);if((a.collisionTextAlign||0!==a.collisionOffsetY)&&null!=a.box){const t=a.box;let e=u,i=h;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),h<t.y?i=t.y:h>t.y+t.height&&(i=t.y+t.height);const o=e-u,n=i-h,s=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),l=s-r;l>0&&(u+=o*l/s,h+=n*l/s)}t.x1=c,t.y1=d,t.x2=u,t.y2=h}else t.visible=!1}))}getLabelOverflow(t,e,i){const o=i.x-this.centerX,n=i.x+i.width-this.centerX,r=i.y-this.centerY,s=i.y+i.height-this.centerY;let a=1;e.x+1<o?a=(e.x+e.width-o)/e.width:e.x+e.width-1>n&&(a=(n-e.x)/e.width);const l=e.y+1<r||e.y+e.height-1>s;return{textLength:1===a?t.length:Math.floor(t.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{surroundingRadius:o}=this;if(null==o)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],r=Math.pow(o,2);return n.some((t=>Math.pow(t.x,2)+Math.pow(t.y,2)>r))}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:o,minSpacing:n}=e,r=t.convert(0),s=this.nodeData,a=this.nodeData.filter((t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e}));if(a.forEach((t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),a.length<=1)return;const l=a.filter((t=>t.midCos<0)).sort(((t,e)=>t.midSin-e.midSin)),c=a.filter((t=>t.midCos>=0)).sort(((t,e)=>t.midSin-e.midSin)),d=a.filter((t=>{var e;return t.midSin<0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),u=a.filter((t=>{var e;return t.midSin>=0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),h=new Ol,p=t=>{var e;const n=t.calloutLabel;if(null==n)return new ul(0,0,0,0);const r=t.outerRadius+i.length+o,s=t.midCos*r,a=t.midSin*r+n.collisionOffsetY;return h.text=n.text,h.x=s,h.y=a,h.setFont(this.calloutLabel),h.setAlign({textAlign:null!==(e=n.collisionTextAlign)&&void 0!==e?e:n.textAlign,textBaseline:n.textBaseline}),h.computeBBox()},f=(t,e,i)=>{const o=p(t).grow(n/2),r=p(e).grow(n/2);if(o.x<r.x+r.width&&o.x+o.width>r.x&&("to-top"===i?o.y<r.y+r.height:o.y+o.height>r.y)){const t="to-top"===i?o.y-r.y-r.height:o.y+o.height-r.y;e.calloutLabel.collisionOffsetY=t}},g=t=>{const e=t.slice().sort(((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin)))[0],i=t.indexOf(e);for(let o=i-1;o>=0;o--){const e=t[o+1],i=t[o];f(e,i,"to-top")}for(let o=i+1;o<t.length;o++){const e=t[o-1],i=t[o];f(e,i,"to-bottom")}},v=t=>{const e=a.some((t=>0!==t.calloutLabel.collisionOffsetY)),i=t.map((t=>p(t))),o=i.map((t=>t.clone().grow(n/2)));let l=!1;for(let n=0;n<o.length&&!l;n++){const e=o[n];for(let i=n+1;i<t.length;i++){const t=o[i];if(e.collidesBBox(t)){l=!0;break}}}const c=s.map((t=>{const{startAngle:e,endAngle:i,outerRadius:o}=t;return{startAngle:e,endAngle:i,innerRadius:r,outerRadius:o}})),d=i.some((t=>c.some((e=>function(t,e){const i={x:t.x,y:t.y},o={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},r={x:t.x+t.width,y:t.y+t.height};return Rc({start:i,end:o},e)||Rc({start:n,end:r},e)}(t,e)))));(l||e||d)&&t.filter((t=>"center"===t.calloutLabel.textAlign)).forEach((t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};g(l),g(c),v(d),v(u)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:o}=this,n=o.length,{offset:r,color:s}=i,a=new Ol;this.calloutLabelSelection.selectByTag(fu.Label).forEach((o=>{var l;const{datum:c}=o,d=c.calloutLabel,u=e.convert(c.radius),h=Math.max(0,u);if(!(null===d||void 0===d?void 0:d.text)||0===h||d.hidden)return void(o.visible=!1);const p=h+n+r,f=c.midCos*p,g=c.midSin*p+d.collisionOffsetY,v={textAlign:null!==(l=d.collisionTextAlign)&&void 0!==l?l:d.textAlign,textBaseline:d.textBaseline};a.text=d.text,a.x=f,a.y=g,a.setFont(this.calloutLabel),a.setAlign(v);const y=a.computeBBox();let m=d.text,b=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(d.text,y,t);m=d.text.length===e?d.text:`${d.text.substring(0,e)}\u2026`,b=!i}o.text=m,o.x=f,o.y=g,o.setFont(this.calloutLabel),o.setAlign(v),o.fill=s,o.visible=b}))}computeLabelsBBox(t,e){var i;return us(this,void 0,void 0,(function*(){const{calloutLabel:o,calloutLine:n}=this,r=n.length,{offset:s,maxCollisionOffset:a,minSpacing:l}=o;if(!o.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const c=[],d=new Ol;let u;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(d.text=this.title.text,d.x=0,d.y=t,d.setFont(this.title),d.setAlign({textBaseline:"bottom",textAlign:"center"}),u=d.computeBBox(),c.push(u))}return this.nodeData.forEach((i=>{var o;const n=i.calloutLabel;if(!n||0===i.outerRadius)return null;const h=i.outerRadius+r+s,p=i.midCos*h,f=i.midSin*h+n.collisionOffsetY;d.text=n.text,d.x=p,d.y=f,d.setFont(this.calloutLabel),d.setAlign({textAlign:null!==(o=n.collisionTextAlign)&&void 0!==o?o:n.textAlign,textBaseline:n.textBaseline});const g=d.computeBBox();if(n.box=g,Math.abs(n.collisionOffsetY)>a)n.hidden=!0;else{if(u){const t=e.y-this.centerY,i=new ul(u.x-l,t,u.width+2*l,u.y+u.height+l-t);if(g.collidesBBox(i))return void(n.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:o}=this.getLabelOverflow(n.text,g,e),r=n.text.length>2&&t<2;if(i||r||o)return void(n.hidden=!0)}n.hidden=!1,c.push(g)}})),0===c.length?null:ul.merge(c)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:o,fontWeight:n,fontFamily:r,positionOffset:s,positionRatio:a,color:l}=this.sectorLabel,c=e>0,d=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each(((t,u)=>{const{sectorLabel:h,outerRadius:p}=u;let f=!1;if(h&&0!==p){const g=e*(1-a)+p*a+s;t.fill=l,t.fontStyle=o,t.fontWeight=n,t.fontSize=i,t.fontFamily=r,t.text=h.text;!c&&d?(t.x=0,t.y=0):(t.x=u.midCos*g,t.y=u.midSin*g),t.textAlign="center",t.textBaseline="middle";const v=t.computeBBox(),y=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:m,endAngle:b}=u,S={startAngle:m,endAngle:b,innerRadius:e,outerRadius:p};y.every((t=>{let[e,i]=t;return kc(e,i,S)}))&&(f=!0)}t.visible=f}))}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each(((i,o)=>{const{fontStyle:n,fontWeight:r,fontSize:s,fontFamily:a,color:l}=o;i.fontStyle=n,i.fontWeight=r,i.fontSize=s,i.fontFamily=a,i.text=o.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(o.margin)}));const i=t=>0===t?0:e[t],o=t=>t===e.length-1?0:e[t],n=t.reduce(((t,e,n)=>t+e.height+i(n)+o(n)),0),r=Math.max(...t.map((t=>t.width))),s=this.getInnerRadius(),a=Math.sqrt(Math.pow(r/2,2)+Math.pow(n/2,2))<=(s>0?s:this.getOuterRadius()),l=[];for(let c=0,d=-n/2;c<t.length;c++){const e=t[c].height+d+i(c);l.push(e),d=e+o(c)}this.innerLabelsSelection.each(((t,e,i)=>{t.y=l[i],t.visible=a}))}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:o,legendItemKey:n}=this,{sectorLabel:r,calloutLabel:s,legendItem:a}=t;return n&&void 0!==a?a.text:i&&i!==e&&void 0!==(null===s||void 0===s?void 0:s.text)?s.text:o&&o!==e&&void 0!==(null===r||void 0===r?void 0:r.text)?r.text:void 0}getTooltipHtml(t){var e;if(!this.angleKey)return"";const{datum:i,angleValue:o,sectorFormat:{fill:n}}=t,r=zc(null===(e=this.title)||void 0===e?void 0:e.text),s=$c(o)?Js(o):String(o),a=this.getDatumLegendName(t);return this.tooltip.toTooltipHtml({title:null!==r&&void 0!==r?r:a,content:r&&a?`${a}: ${s}`:s,backgroundColor:n},{datum:i,title:r,color:n,seriesId:this.id,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName})}getLegendData(t){var e,i,o,n,r;const{processedData:s,angleKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:d,id:u,dataModel:h}=this;if(!h||!s||0===s.data.length||"category"!==t)return[];if(!d&&(!l||l===a)&&(!c||c===a))return[];const{calloutLabelIdx:p,sectorLabelIdx:f,legendItemIdx:g}=this.getProcessedDataIndexes(h),v=(null===(e=this.title)||void 0===e?void 0:e.showInLegend)&&this.title.text,y=[];for(let m=0;m<s.data.length;m++){const{datum:t,values:e}=s.data[m],h=[];v&&h.push(v);const b=this.getLabels(t,2*Math.PI,2*Math.PI,!1,e[p],e[f],e[g]);if(d&&void 0!==b.legendItem?h.push(b.legendItem.text):l&&l!==a&&void 0!==(null===(i=b.calloutLabel)||void 0===i?void 0:i.text)?h.push(null===(o=b.calloutLabel)||void 0===o?void 0:o.text):c&&c!==a&&void 0!==(null===(n=b.sectorLabel)||void 0===n?void 0:n.text)&&h.push(null===(r=b.sectorLabel)||void 0===r?void 0:r.text),0===h.length)continue;const S=this.getSectorFormat(t,m,!1);y.push({legendType:"category",id:u,itemId:m,seriesId:u,enabled:this.seriesItemEnabled[m],label:{text:h.join(" - ")},marker:{fill:S.fill,stroke:S.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity,strokeWidth:this.strokeWidth}})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:o}=t;o.id===this.id?this.toggleSeriesItem(i,e):"pie"===o.type&&this.toggleOtherSeriesItems(o,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var o,n;const{legendItemKey:r,dataModel:s}=this;if(!r||!s)return;const a=t.legendItemKey&&(null===(o=t.data)||void 0===o?void 0:o.find(((t,i)=>i===e))[t.legendItemKey]);if(!a)return;const l=s.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(n=this.processedData)||void 0===n||n.data.forEach(((t,e)=>{let{values:o}=t;o[l]===a&&this.toggleSeriesItem(e,i)}))}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=uu(!0,this.rotation,this.radiusScale,this.previousRadiusScale);Yl(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),Yl(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),jd(this,"callout",e,[this.calloutLabelSelection]),jd(this,"sector",e,[this.sectorLabelSelection]),jd(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,o,n,r;const{itemSelection:s,highlightSelection:a,processedData:l,radiusScale:c,previousRadiusScale:d}=this,{animationManager:u}=this.ctx,h=null===(t=null===l||void 0===l?void 0:l.reduced)||void 0===t?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!==(e=null===h||void 0===h?void 0:h.moved.length)&&void 0!==e?e:0)&&(null===h||void 0===h?void 0:h.addedIndices.every((t=>!h.removedIndices.includes(t)))),f=(null!==(i=null===l||void 0===l?void 0:l.defs.keys.length)&&void 0!==i?i:0)>0,g=null===(r=null===(n=null===(o=null===l||void 0===l?void 0:l.reduced)||void 0===o?void 0:o.animationValidation)||void 0===n?void 0:n.uniqueKeys)||void 0===r||r;p&&f&&g||this.ctx.animationManager.skipCurrentBatch();const v=uu(!1,this.rotation,c,d);Yl(this.id,"nodes",u,[s,a],v.nodes,((t,e)=>this.getDatumId(e)),h),Yl(this.id,"innerCircle",u,[this.innerCircleSelection],v.innerCircle),jd(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),jd(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),jd(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:o}=this,{animationManager:n}=this.ctx,r=uu(!1,this.rotation,i,o);Yl(this.id,"nodes",n,[t,e],r.nodes),Yl(this.id,"innerCircle",n,[this.innerCircleSelection],r.innerCircle),Wd(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Wd(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Wd(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,o;const{calloutLabelKey:n,sectorLabelKey:r,legendItemKey:s}=this;if(null===(o=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.animationValidation)||void 0===o?void 0:o.uniqueKeys)return s?t[s]:n?t[n]:r?t[r]:void 0}getDatumId(t){var e;const{index:i}=t;return null!==(e=this.getDatumIdFromData(t.datum))&&void 0!==e?e:`${i}`}onDataChange(){this.processSeriesItemEnabled()}}Du.className="PieSeries",Du.type="pie",cs([ea(ga),ds("design:type",Object)],Du.prototype,"angleKey",void 0),cs([ea(ga),ds("design:type",Object)],Du.prototype,"angleName",void 0),cs([ea(va),ds("design:type",String)],Du.prototype,"radiusKey",void 0),cs([ea(va),ds("design:type",String)],Du.prototype,"radiusName",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Du.prototype,"radiusMin",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Du.prototype,"radiusMax",void 0),cs([ea(va),ds("design:type",String)],Du.prototype,"calloutLabelKey",void 0),cs([ea(va),ds("design:type",String)],Du.prototype,"calloutLabelName",void 0),cs([ea(va),ds("design:type",String)],Du.prototype,"sectorLabelKey",void 0),cs([ea(va),ds("design:type",String)],Du.prototype,"sectorLabelName",void 0),cs([ea(va),ds("design:type",String)],Du.prototype,"legendItemKey",void 0),cs([ea(Ea),ds("design:type",Array)],Du.prototype,"fills",void 0),cs([ea(Ea),ds("design:type",Array)],Du.prototype,"strokes",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],Du.prototype,"fillOpacity",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],Du.prototype,"strokeOpacity",void 0),cs([ea(ja),ds("design:type",Array)],Du.prototype,"lineDash",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Du.prototype,"lineDashOffset",void 0),cs([ea(ha),ds("design:type",Function)],Du.prototype,"formatter",void 0),cs([ea(Aa(-360,360)),ds("design:type",Object)],Du.prototype,"rotation",void 0),cs([ea(Aa()),ds("design:type",Object)],Du.prototype,"outerRadiusOffset",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Du.prototype,"outerRadiusRatio",void 0),cs([ea(Aa()),ds("design:type",Object)],Du.prototype,"innerRadiusOffset",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Du.prototype,"innerRadiusRatio",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Du.prototype,"strokeWidth",void 0);const Au={constructors:{},constructedArrays:new WeakMap};const Tu={constructors:{title:Ll,subtitle:Ll,footnote:Ll,shadow:vl,innerCircle:Ou,"axes[].title":_l,"series[].innerLabels[]":Eu},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"series[].marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}};function Mu(){return{constructors:Object.assign(Object.assign({},Tu.constructors),Au.constructors),constructedArrays:Au.constructedArrays,allowedTypes:Object.assign({},Tu.allowedTypes)}}class ku extends wl{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new ul(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:o,stats:n}=t;if(this.dirty===nl.NONE&&!o)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:s,x2:a,y2:l}=this;r=this.align(r),s=this.align(s),a=this.align(a),l=this.align(l);const{fill:c,opacity:d,isRange:u}=this;if(!(!u||!c)){const{fillOpacity:t}=this;i.fillStyle=c,i.globalAlpha=d*t,i.beginPath(),i.moveTo(r,s),i.lineTo(a,s),i.lineTo(a,l),i.lineTo(r,l),i.closePath(),i.fill()}const{stroke:h,strokeWidth:p,startLine:f,endLine:g}=this;if(!(!f&&!g||!h||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:o,lineCap:n,lineJoin:c}=this;i.strokeStyle=h,i.globalAlpha=d*t,i.lineWidth=p,e&&i.setLineDash(e),o&&(i.lineDashOffset=o),n&&(i.lineCap=n),c&&(i.lineJoin=c),i.beginPath(),f&&(i.moveTo(r,s),i.lineTo(a,s)),g&&(i.moveTo(a,l),i.lineTo(r,l)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}ku.className="Range",ku.defaultStyles=Object.assign(Object.assign({},wl.defaultStyles),{strokeWidth:1}),cs([sl({redraw:nl.MINOR}),ds("design:type",Number)],ku.prototype,"x1",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Number)],ku.prototype,"y1",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Number)],ku.prototype,"x2",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Number)],ku.prototype,"y2",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Boolean)],ku.prototype,"startLine",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Boolean)],ku.prototype,"endLine",void 0),cs([sl({redraw:nl.MINOR}),ds("design:type",Boolean)],ku.prototype,"isRange",void 0);const Ru={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},Pu={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function Nu(t){let{yDirection:e,padding:i=0,position:o="top",bbox:n}=t;const r=e?Ru:Pu,{xTranslationDirection:s,yTranslationDirection:a}=r[o];return{xTranslation:s*(i+(e?n.width:n.height)/2),yTranslation:a*(i+(e?n.height:n.width)/2)}}const Lu=t=>{let{yDirection:e,xEnd:i,yStart:o,yEnd:n}=t;return e?{x:i/2,y:o}:{x:i,y:isNaN(n)?o:(o+n)/2}},_u=t=>{let{yDirection:e,xStart:i,xEnd:o,yStart:n,yEnd:r}=t;return e?{x:i,y:isNaN(r)?n:(n+r)/2}:{x:o/2,y:n}},Iu=t=>{let{yDirection:e,xEnd:i,yStart:o,yEnd:n}=t;return e?{x:i,y:isNaN(n)?o:(o+n)/2}:{x:i/2,y:isNaN(n)?o:n}},Fu=t=>{let{yDirection:e,xStart:i,xEnd:o,yStart:n,yEnd:r}=t;return e?{x:o/2,y:isNaN(r)?n:r}:{x:i,y:isNaN(r)?n:(n+r)/2}},Gu=t=>{let{yDirection:e,xStart:i,xEnd:o,yStart:n}=t;return e?{x:i/2,y:n}:{x:o,y:n}},Bu=t=>{let{yDirection:e,xStart:i,yStart:o,yEnd:n}=t;return e?{x:i,y:isNaN(n)?o:n}:{x:i,y:o}},Vu=t=>{let{yDirection:e,xEnd:i,yStart:o,yEnd:n}=t;return e?{x:i,y:o}:{x:i,y:isNaN(n)?o:n}},ju=t=>{let{yDirection:e,xStart:i,xEnd:o,yStart:n,yEnd:r}=t;return e?{x:o,y:isNaN(r)?n:r}:{x:i,y:isNaN(r)?n:r}},Wu={top:{c:Lu},bottom:{c:Fu},left:{c:_u},right:{c:Iu},topLeft:{c:Gu},topRight:{c:Vu},bottomLeft:{c:Bu},bottomRight:{c:ju},inside:{c:t=>{let{xEnd:e,yStart:i,yEnd:o}=t;return{x:e/2,y:isNaN(o)?i:(i+o)/2}}},insideLeft:{c:_u},insideRight:{c:Iu},insideTop:{c:Lu},insideBottom:{c:Fu},insideTopLeft:{c:Gu},insideBottomLeft:{c:Bu},insideTopRight:{c:Vu},insideBottomRight:{c:ju}},zu=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],Hu=oa(((t,e)=>na(t,e,(t=>zu.includes(t)))),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),Uu=oa(((t,e)=>na(t,e,(t=>"range"===t||"line"===t))),"expecting a crossLine type keyword such as 'range' or 'line'");class Ku{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}cs([ea(fa),ds("design:type",Boolean)],Ku.prototype,"enabled",void 0),cs([ea(va),ds("design:type",String)],Ku.prototype,"text",void 0),cs([ea(Fa),ds("design:type",String)],Ku.prototype,"fontStyle",void 0),cs([ea(Ba),ds("design:type",String)],Ku.prototype,"fontWeight",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Ku.prototype,"fontSize",void 0),cs([ea(ga),ds("design:type",String)],Ku.prototype,"fontFamily",void 0),cs([ea(Aa()),ds("design:type",Number)],Ku.prototype,"padding",void 0),cs([ea(wa),ds("design:type",String)],Ku.prototype,"color",void 0),cs([ea(Hu),ds("design:type",String)],Ku.prototype,"position",void 0),cs([ea(Ta(-360,360)),ds("design:type",Number)],Ku.prototype,"rotation",void 0),cs([ea(fa),ds("design:type",Boolean)],Ku.prototype,"parallel",void 0);class Yu{constructor(){this.id=cl(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new Ku,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=ol.X,this.group=new Cc({name:`${this.id}`,layer:!0,zIndex:Yu.LINE_LAYER_ZINDEX}),this.crossLineRange=new ku,this.crossLineLabel=new Ol,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=pl.None}update(t){this.enabled&&t&&0!==this.data.length?(this.group.visible=!0,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()):this.group.visible=!1}calculateLayout(t){if(!t)return;if(!this.createNodeData())return;const{sideFlag:e,gridLength:i,data:o}=this,n=[],r=e*i,s=o[0],a=o[1],l=new ul(Math.min(0,r),Math.min(s,a),Math.abs(0-r),Math.abs(s-a));n.push(l);const c=this.computeLabelBBox();return c&&n.push(c),ul.merge(n)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:o,sideFlag:n,direction:r,label:{position:s="top"},clippedRange:a,strokeWidth:l=0}=this;if(this.data=[],!i)return!1;const c=null!==(t=i.bandwidth)&&void 0!==t?t:0,d=t=>Math.max(Math.min(...a),Math.min(Math.max(...a),t)),[u,h]=[0,n*o];let[p,f]=this.getRange(),[g,v]=[Number(i.convert(p,{clampMode:"clamped"})),i.convert(f,{clampMode:"clamped"})+c];g=d(g),v=d(v),[p,f]=[Number(i.convert(p)),i.convert(f)+c];const y=!isNaN(g)&&!isNaN(v)&&(p===g||f===v||g!==v)&&Math.abs(v-g)>0;if(y){g!==Math.min(g,v)&&([g,v]=[Math.min(g,v),Math.max(g,v)],[p,f]=[f,p])}if(this.isRange=y,this.startLine=!isNaN(p)&&l>0&&p===g,this.endLine=!isNaN(f)&&l>0&&f===v,!y&&!this.startLine&&!this.endLine)return!1;if(this.data=[g,v],this.label.enabled){const t=r===ol.Y,{c:i=Lu}=null!==(e=Wu[s])&&void 0!==e?e:{},{x:o,y:n}=i({yDirection:t,xStart:u,xEnd:h,yStart:g,yEnd:v});this.labelPoint={x:o,y:n}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:o,data:n,startLine:r,endLine:s,isRange:a,fill:l,fillOpacity:c,stroke:d,strokeWidth:u,lineDash:h}=this;e.x1=0,e.x2=i*o,e.y1=n[0],e.y2=n[1],e.startLine=r,e.endLine=s,e.isRange=a,e.fill=l,e.fillOpacity=null!==c&&void 0!==c?c:1,e.stroke=d,e.strokeWidth=null!==u&&void 0!==u?u:1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=h}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:o,rotation:n,position:r="top",padding:s=0},direction:a,parallelFlipRotation:l,regularFlipRotation:c}=this;if(void 0===e||void 0===i)return;const{defaultRotation:d,configuredRotation:u}=ud({rotation:n,parallel:o,regularFlipRotation:c,parallelFlipRotation:l});t.rotation=d+u,t.textBaseline="middle",t.textAlign="center";const h=t.computeTransformedBBox();if(!h)return;const p=a===ol.Y,{xTranslation:f,yTranslation:g}=Nu({yDirection:p,padding:s,position:r,bbox:h});t.translationX=e+f,t.translationY=i+g}getZIndex(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Yu.RANGE_LAYER_ZINDEX:Yu.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,o=mc.is(i);let[n,r]=null!==e&&void 0!==e?e:[t,void 0];return o||void 0!==r||(r=n),n=null!=Xc(n,o)?n:void 0,r=null!=Xc(r,o)?r:void 0,o&&n===r&&(r=void 0),void 0===n&&void 0!==r&&(n=r,r=void 0),[n,r]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new Ol;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:o}={},label:{parallel:n,rotation:r,position:s="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:d}=this;if(void 0===i||void 0===o)return;const{configuredRotation:u}=ud({rotation:r,parallel:n,regularFlipRotation:d,parallelFlipRotation:c});e.rotation=u,e.textBaseline="middle",e.textAlign="center";const h=e.computeTransformedBBox();if(!h)return;const p=l===ol.Y,{xTranslation:f,yTranslation:g}=Nu({yDirection:p,padding:a,position:s,bbox:h});return e.translationX=i+f,e.translationY=o+g,e.computeTransformedBBox()}calculatePadding(t){var e,i,o,n,r,s,a,l;const{isRange:c,startLine:d,endLine:u,direction:h,label:{padding:p=0,position:f="top"}}=this;if(!c&&!d&&!u)return;const g=this.computeLabelBBox(),v=null===g||void 0===g?void 0:g.x,y=null===g||void 0===g?void 0:g.y;if(!g||void 0==v||void 0==y)return;const m=function(t){let{yDirection:e,bbox:i,padding:o=0,position:n="top"}=t;const r={};return n.startsWith("inside")||("top"!==n||e?"bottom"!==n||e?"left"===n&&e?r.left=o+i.width:"right"===n&&e&&(r.right=o+i.width):r.bottom=o+i.height:r.top=o+i.height),r}({yDirection:h===ol.Y,padding:p,position:f,bbox:g});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=m.left)&&void 0!==i?i:0),t.right=Math.max(null!==(o=t.right)&&void 0!==o?o:0,null!==(n=m.right)&&void 0!==n?n:0),t.top=Math.max(null!==(r=t.top)&&void 0!==r?r:0,null!==(s=m.top)&&void 0!==s?s:0),t.bottom=Math.max(null!==(a=t.bottom)&&void 0!==a?a:0,null!==(l=m.bottom)&&void 0!==l?l:0)}}Yu.LINE_LAYER_ZINDEX=fd.SERIES_CROSSLINE_LINE_ZINDEX,Yu.RANGE_LAYER_ZINDEX=fd.SERIES_CROSSLINE_RANGE_ZINDEX,Yu.className="CrossLine",cs([ea(fa),ds("design:type",Boolean)],Yu.prototype,"enabled",void 0),cs([ea(Uu),ds("design:type",String)],Yu.prototype,"type",void 0),cs([ea(sa(2)),ds("design:type",Array)],Yu.prototype,"range",void 0),cs([ea(wa),ds("design:type",String)],Yu.prototype,"fill",void 0),cs([ea(Ta(0,1)),ds("design:type",Number)],Yu.prototype,"fillOpacity",void 0),cs([ea(wa),ds("design:type",String)],Yu.prototype,"stroke",void 0),cs([ea(Ta()),ds("design:type",Number)],Yu.prototype,"strokeWidth",void 0),cs([ea(Ta(0,1)),ds("design:type",Number)],Yu.prototype,"strokeOpacity",void 0),cs([ea(ja),ds("design:type",Array)],Yu.prototype,"lineDash",void 0);const Xu=t=>t;class $u extends mc{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=Xu,this.basePow=Xu,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=t=>Math.log(t)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?$u.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),o=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,o]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[o,n]=this.getDomain();let r=this.log(o),s=this.log(n);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(s-r),i=yc(r,s,Math.min(e,t)).map((t=>this.pow(t))).filter((t=>t>=o&&t<=n));if(!this.isDenseInterval({start:o,stop:n,interval:t,count:i.length}))return i}if(!(i%1===0)||s-r>=e)return pc(r,s,Math.min(s-r,e)).map((t=>this.pow(t)));const a=[],l=o>0;r=Math.floor(r)-1,s=Math.round(s)+1;const c=Math.min(...this.range),d=(Math.max(...this.range)-c)/e;let u=1/0;for(let h=r;h<=s;h++){const t=this.convert(this.pow(h+1));for(let e=1;e<i;e++){const r=l?e:i-e+1,s=this.pow(h)*r,c=this.convert(s),p=Math.abs(u-c),f=Math.abs(c-t);s>=o&&s<=n&&(1===e||p>=d&&f>=d)&&(a.push(s),u=c)}}return a}tickFormat(t){let{count:e,ticks:i,specifier:o}=t;const{base:n}=this;return null==o&&(o=10===n?".0e":","),"string"===typeof o&&(o=oc(o)),e===1/0?o:(null==i&&this.ticks(),t=>o(t))}}var qu;cs([ea(Aa(0)),ds("design:type",Object)],$u.prototype,"base",void 0),function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(qu||(qu={}));const Zu={[qu.MILLISECOND]:".%L",[qu.SECOND]:":%S",[qu.MINUTE]:"%I:%M",[qu.HOUR]:"%I %p",[qu.WEEK_DAY]:"%a",[qu.SHORT_MONTH]:"%b %d",[qu.MONTH]:"%B",[qu.SHORT_YEAR]:"%y",[qu.YEAR]:"%Y"};function Ju(t){return t instanceof Date?t.getTime():t}class Qu extends mc{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=es,this.month=ts,this.week=Yr,this.day=Ur,this.hour=Hr,this.minute=Wr,this.second=Vr,this.millisecond=Rr,this.tickIntervals=[[this.second,1,Pr],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,Nr],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,Lr],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,_r],[this.day,2,1728e5],[this.week,1,Ir],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,Fr],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,Gr]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=qu.YEAR;const i=t=>{t<e&&(e=t)};for(const a of t){i(this.getLowestGranularityFormat(a))}const o=Ju(t[0]),n=Ju(t[t.length-1]),r=new Date(o).getFullYear(),s=new Date(n).getFullYear()-r>0;return this.buildFormatString(e,s)}buildFormatString(t,e){let i=[Zu[t]],o=0;const n=this.getDomain(),r=Math.min(...n.map(Ju)),s=Math.max(...n.map(Ju))-r;switch(t){case qu.SECOND:s/Nr>1&&i.push(Zu[qu.MINUTE]);case qu.MINUTE:s/Lr>1&&i.push(Zu[qu.HOUR]);case qu.HOUR:o=i.length,s/_r>1&&i.push(Zu[qu.WEEK_DAY]);case qu.WEEK_DAY:if(s/Ir>1||e){const t=i.indexOf(Zu[qu.WEEK_DAY]);t>-1&&i.splice(t,1,Zu[qu.SHORT_MONTH])}case qu.SHORT_MONTH:case qu.MONTH:(s/Gr>1||e)&&i.push(Zu[qu.YEAR])}return o<i.length&&(i=[...i.slice(0,o),i.slice(o).join(" ")]),o>0&&(i=[...i.slice(0,o).reverse(),...i.slice(o)],o<i.length&&i.splice(o,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?qu.MILLISECOND:this.minute.floor(t)<t?qu.SECOND:this.hour.floor(t)<t?qu.MINUTE:this.day.floor(t)<t?qu.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?qu.WEEK_DAY:qu.SHORT_MONTH:this.year.floor(t)<t?qu.MONTH:qu.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>Zd(e)(t)}getTickInterval(t){let{start:e,stop:i,count:o,minCount:n,maxCount:r}=t;const{tickIntervals:s}=this;let a,l;const c=null!==o&&void 0!==o?o:mc.defaultTickCount,d=Math.abs(i-e)/Math.max(c,1);let u=0;for(;u<s.length&&d>s[u][2];)u++;if(0===u)l=Math.max(gc(e,i,c,n,r),1),a=this.millisecond;else if(u===s.length){l=gc(e/Gr,i/Gr,c,n,r),a=this.year}else{const t=d-s[u-1][2]<s[u][2]-d?u-1:u;[a,l]=s[t]}return a.every(l)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(Ju);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks(t){let{start:e,stop:i}=t;const o=this.getTickInterval({start:e,stop:i,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return o?o.range(new Date(e),new Date(i)):[]}getTicksForInterval(t){let{start:e,stop:i}=t;const{interval:o,tickIntervals:n}=this;if(!o)return[];if(o instanceof Mr){const t=o.range(new Date(e),new Date(i));return this.isDenseInterval({start:e,stop:i,interval:o,count:t.length})?this.getDefaultTicks({start:e,stop:i}):t}const r=Math.abs(o);if(this.isDenseInterval({start:e,stop:i,interval:r}))return this.getDefaultTicks({start:e,stop:i});const s=[...n];s.reverse();const a=s.find((t=>r%t[2]===0));if(a){return a[0].every(r/(a[2]/a[1])).range(new Date(e),new Date(i))}let l=new Date(e);const c=new Date(i),d=[];for(;l<=c;)d.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+r);return d}tickFormat(t){let{ticks:e,specifier:i}=t;return void 0==i?this.defaultTickFormat(e):Zd(i)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,o]=this.niceDomain;if(Ju(t)===Ju(i)&&Ju(e)===Ju(o))break;t=i,e=o}}updateNiceDomainIteration(t,e){const i=Ju(t),o=Ju(e),{interval:n}=this;let r;if(n instanceof Mr)r=n;else{const t="number"===typeof n?(o-i)/Math.max(n,1):this.tickCount;r=this.getTickInterval({start:i,stop:o,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const i=r.range(t,e,!0),o=i[0],n=i[i.length-1];this.niceDomain=[o,n]}}}class th{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;this.top=t,this.right=e,this.bottom=i,this.left=o}clear(){this.top=this.right=this.bottom=this.left=0}}cs([ea(Aa(0)),ds("design:type",Number)],th.prototype,"top",void 0),cs([ea(Aa(0)),ds("design:type",Number)],th.prototype,"right",void 0),cs([ea(Aa(0)),ds("design:type",Number)],th.prototype,"bottom",void 0),cs([ea(Aa(0)),ds("design:type",Number)],th.prototype,"left",void 0);var eh=Object.freeze({__proto__:null,extent:ms,normalisedExtent:function(t,e,i){return bs(t,e,i).extent},normalisedExtentWithMetadata:bs,toFixed:Js,isNumberEqual:$s,tickFormat:hc,interpolateString:Qd,ticks:pc,tickStep:gc,range:yc,Color:ta,isString:Hc,isStringObject:Uc,isDate:t=>t instanceof Date&&!isNaN(+t),isDiscrete:Kc,isContinuous:Yc,checkDatum:Xc,isNumber:$c,resetIds:function(){for(const t in ll)delete ll[t]},createId:cl,Padding:th,jsonDiff:Ls,DELETE:_s,jsonMerge:Fs,jsonApply:Gs,jsonWalk:Bs,normalizeAngle360:zs,normalizeAngle360Inclusive:function(t){return t%=Ws,(t+=Ws)!==Ws&&(t%=Ws),t},normalizeAngle180:Hs,toRadians:Us,toDegrees:function(t){return t/Math.PI*180},angleBetween:function(t,e){return t=zs(t),(e=zs(e))-t+(t>e?2*Math.PI:0)},zipObject:Il,clamp:Xs,isEqual:$s,isNegative:qs,round:Zs,mod:Qs,sanitizeHtml:zc,Logger:Es});function ih(t,e){return t.length===e.length&&t.every(((t,i)=>Number(t)===Number(e[i])))}function oh(t,e,i,o,n){let r=t.x;t.x<e?r=e:t.x>e+o&&(r=e+o);let s=t.y;t.y<i?s=i:t.y>i+n&&(s=i+n);const a=t.x-r,l=t.y-s;return Math.sqrt(a*a+l*l)<=.5*t.size}function nh(t,e,i,o,n){const r=t.x+t.width>e&&t.x<e+o,s=t.y+t.height>i&&t.y<i+n;return r&&s}const rh=["stroke","lineDash"],sh=oa(ra(void 0,(t=>{for(const e in t)if(!rh.includes(e))return!1;return!0})),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");class ah{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}}function lh(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[void 0];return ks(((i,o,n)=>e.includes(n)?t:n))}cs([ea(pa),ds("design:type",Object)],ah.prototype,"enabled",void 0),cs([ea(Aa(0)),ds("design:type",Number)],ah.prototype,"width",void 0),cs([ea(sh),ds("design:type",Array)],ah.prototype,"style",void 0);class ch{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return Dl(this)}}cs([ea(pa),ds("design:type",Object)],ch.prototype,"enabled",void 0),cs([ea(fa),ds("design:type",Boolean)],ch.prototype,"autoWrap",void 0),cs([ea(Ta(0)),ds("design:type",Number)],ch.prototype,"maxWidth",void 0),cs([ea(Ta(0)),ds("design:type",Number)],ch.prototype,"maxHeight",void 0),cs([ea(Fa),ds("design:type",String)],ch.prototype,"fontStyle",void 0),cs([ea(Ba),ds("design:type",String)],ch.prototype,"fontWeight",void 0),cs([ea(Aa(1)),ds("design:type",Number)],ch.prototype,"fontSize",void 0),cs([ea(ga),ds("design:type",String)],ch.prototype,"fontFamily",void 0),cs([ea(Aa(0)),ds("design:type",Number)],ch.prototype,"padding",void 0),cs([ea(Ma()),lh(NaN),ds("design:type",Number)],ch.prototype,"minSpacing",void 0),cs([ea(wa),ds("design:type",String)],ch.prototype,"color",void 0),cs([ea(Ta(-360,360)),ds("design:type",Number)],ch.prototype,"rotation",void 0),cs([ea(pa),ds("design:type",Boolean)],ch.prototype,"avoidCollisions",void 0),cs([ea(pa),ds("design:type",Boolean)],ch.prototype,"mirrored",void 0),cs([ea(pa),ds("design:type",Boolean)],ch.prototype,"parallel",void 0),cs([ea(va),ds("design:type",String)],ch.prototype,"format",void 0);class dh{constructor(){this.enabled=!0,this.width=1,this.color=void 0}}cs([ea(pa),ds("design:type",Object)],dh.prototype,"enabled",void 0),cs([ea(Aa(0)),ds("design:type",Number)],dh.prototype,"width",void 0),cs([ea(wa),ds("design:type",String)],dh.prototype,"color",void 0);const uh=oa(((t,e)=>na(t,e,((t,e)=>0!==t&&Aa(0)(t,e)||t instanceof Mr))),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");class hh{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}function ph(t){const e=Math.min(...t.range),i=Math.max(...t.range),o=Math.floor(e),n=Math.ceil(i);return{min:o,max:n,visible:o!==n}}cs([ea(pa),ds("design:type",Object)],hh.prototype,"enabled",void 0),cs([ea(Aa(0)),ds("design:type",Number)],hh.prototype,"width",void 0),cs([ea(Aa(0)),ds("design:type",Number)],hh.prototype,"size",void 0),cs([ea(wa),ds("design:type",String)],hh.prototype,"color",void 0),cs([ea(uh),ds("design:type",Object)],hh.prototype,"interval",void 0),cs([ea(sa()),ds("design:type",Array)],hh.prototype,"values",void 0),cs([ea(aa(Ma(1),ca("maxSpacing"))),lh(NaN),ds("design:type",Number)],hh.prototype,"minSpacing",void 0);const fh=2*Math.PI,gh=fh/2;function vh(t){const e=e=>{var i,o;const n=Math.min(...null!==(i=e.range)&&void 0!==i?i:[t.min]),r=Math.max(...null!==(o=e.range)&&void 0!==o?o:[t.max]),s=Math.round(e.translationY);return s<n||s>r},i=(t,i,o)=>{const n={translationY:Math.round(t.translationY),opacity:t.opacity};return o=((t,i,o)=>"removed"!==o&&e(t)?"removed":"added"!==o&&e(i)?"added":o)(i,t.datum,o),"added"===o&&(n.translationY=Math.round(i.translationY),n.opacity=0),Object.assign(Object.assign({},n),Kl[o])},o=(t,e,i)=>{const o={translationY:Math.round(e.translationY),opacity:1};return"removed"===i&&(o.opacity=0),o};return{tick:{fromFn:i,toFn:o,intermediateFn:(t,i,o)=>({visible:!e(t)})},line:{fromFn:(t,e)=>{var i,o;return Object.assign(Object.assign({},null!==(o=null!==(i=t.previousDatum)&&void 0!==i?i:e)&&void 0!==o?o:{y:t.y,x1:t.x1,x2:t.x2}),Kl.updated)},toFn:(t,e)=>Object.assign({},e)},label:{fromFn:(t,e,o)=>{var n;const r=null!==(n=t.previousDatum)&&void 0!==n?n:e;let s=r.rotation;return"added"!==o&&"removed"!==o||(s=e.rotation),Object.assign(Object.assign({},i(t,e,o)),{x:r.x,y:r.y,rotation:s,rotationCenterX:r.rotationCenterX})},toFn:(t,e,i)=>{var n,r;let s;var a,l;return"added"===i||"removed"===i?s=e.rotation:(a=null!==(r=null===(n=t.previousDatum)||void 0===n?void 0:n.rotation)&&void 0!==r?r:e.rotation,l=e.rotation,s=Math.abs(l-a)<gh?l:a>l?l+fh:l-fh),Object.assign(Object.assign({},o(0,e,i)),{x:e.x,y:e.y,rotation:s,rotationCenterX:e.rotationCenterX,finish:{rotation:e.rotation}})}},group:{fromFn:(t,e)=>{const{rotation:i,translationX:o,translationY:n}=t;return Object.assign({rotation:i,translationX:o,translationY:n},Kl.updated)},toFn:(t,e)=>{const{rotation:i,translationX:o,translationY:n}=e;return{rotation:i,translationX:o,translationY:n}}}}}var yh,mh,bh;!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(yh||(yh={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(mh||(mh={}));class Sh{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach((t=>this.detachCrossLine(t))),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach((t=>{this.attachCrossLine(t),this.initCrossLine(t)}))}get crossLines(){return this._crossLines}constructor(t,e){let i;this.moduleCtx=t,this.scale=e,this.id=cl(this),this.nice=!0,this.dataDomain={domain:[],clipped:!1},this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new Cc({name:`${this.id}-axis`,zIndex:fd.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new Ec),this.tickLineGroup=this.axisGroup.appendChild(new Cc({name:`${this.id}-Axis-tick-lines`,zIndex:fd.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new Cc({name:`${this.id}-Axis-tick-labels`,zIndex:fd.AXIS_ZINDEX})),this.crossLineGroup=new Cc({name:`${this.id}-CrossLines`}),this.gridGroup=new Cc({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new Cc({name:`${this.id}-gridLines`,zIndex:fd.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=wc.select(this.tickLineGroup,Ec,!1),this.tickLabelGroupSelection=wc.select(this.tickLabelGroup,Ol,!1),this.gridLineGroupSelection=wc.select(this.gridLineGroup,Ec,!1),this.line=new dh,this.tick=this.createTick(),this.gridLine=new ah,this.label=this.createLabel(),this.defaultTickMinSpacing=Sh.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new Ll,this._gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new bd(this),this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(t.interactionManager.addListener("hover",(t=>this.checkAxisHover(t)))),this.animationManager=t.animationManager,this.animationState=new vu("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()}},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes()}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines),this.destroyFns.push(t.layoutService.addListener("layout-complete",(t=>{null!=i&&null!=Ls(t.chart,i)&&this.animationState.transition("resize"),i=Object.assign({},t.chart)}))),this.destroyFns.push(t.updateService.addListener("update-complete",(t=>{this.minRect=t.minRect})))}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach((t=>t()))}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach((t=>{this.initCrossLine(t)}))}updateRange(){var t;const{range:e,visibleRange:i,scale:o}=this,n=(e[1]-e[0])/(i[1]-i[0]),r=n*i[0],s=e[0]-r;o.range=[s,s+n],null===(t=this.crossLines)||void 0===t||t.forEach((t=>{t.clippedRange=[e[0],e[1]]}))}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=Math.min(...this.range),n=Math.max(...this.range);return t+e>=o-i&&t<=n+i}onLabelFormatChange(t,e){const{scale:i,fractionDigits:o}=this,n=!(i instanceof $u)&&o>0?t=>"number"===typeof t?t.toFixed(o):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(r){this.labelFormatter=n,Es.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=n}setDomain(){var t;const{scale:e,dataDomain:{domain:i},tick:{values:o}}=this;if(o&&mc.is(e)){const[n,r]=null!==(t=ms(o))&&void 0!==t?t:[1/0,-1/0],s=Math.min(e.fromDomain(i[0]),n),a=Math.max(e.fromDomain(i[1]),r);e.domain=[e.toDomain(s),e.toDomain(a)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:o}=this;if(t&&mc.is(o))return"number"===typeof t?(o.tickCount=t,o.minTickCount=null!==e&&void 0!==e?e:0,void(o.maxTickCount=null!==i&&void 0!==i?i:1/0)):void(o instanceof Qu&&this.setTickInterval(t))}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&this.gridLineGroupSelection.clear(),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach((t=>{this.initCrossLine(t)}))}get gridLength(){return this._gridLength}createTick(){return new hh}createLabel(){return new ch}checkAxisHover(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t){if(!this.tickGenerationResult)return;const{rotation:e,parallelFlipRotation:i,regularFlipRotation:o}=this.calculateRotations(),n=this.label.getSideFlag();this.updatePosition();const r=this.getAxisLineCoordinates(),s=this.tickGenerationResult,{tickData:a,combinedRotation:l,textBaseline:c,textAlign:d}=s,u=ls(s,["tickData","combinedRotation","textBaseline","textAlign"]),h=this.tickLabelGroupSelection.nodes().map((t=>t.datum.tickId));if(this.updateSelections(r,a.ticks,{combinedRotation:l,textAlign:d,textBaseline:c,range:this.scale.range}),this.animationManager.isSkipped())this.resetSelectionNodes();else{const t=this.calculateUpdateDiff(h,a);this.animationState.transition("update",t)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(n),this.updateTickLines(),this.updateTitle({anyTickVisible:a.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:o}),this.updateLayoutState(),u.primaryTickCount}getAxisLineCoordinates(){const{range:[t,e]}=this;return{x:0,y1:Math.min(t,e),y2:Math.max(t,e)}}getTickLineCoordinates(t){const{tick:e,label:i}=this,o=i.getSideFlag()*e.size,n=Math.min(0,o);return{x1:n,x2:n+Math.abs(o),y:Math.round(t.translationY)}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:o,textBaseline:n,textAlign:r,range:s}=e,a=t.tickLabel,l=i.getSideFlag()*(this.tick.size+i.padding+this.seriesAreaPadding),c=""!==a&&void 0!=a;return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:o,rotationCenterX:l,text:a,textAlign:r,textBaseline:n,visible:c,x:l,y:0,range:s}}setTitleProps(t,e){var i;const{title:o}=this;if(o){if(t.color=o.color,t.fontFamily=o.fontFamily,t.fontSize=o.fontSize,t.fontStyle=o.fontStyle,t.fontWeight=o.fontWeight,t.enabled=o.enabled,t.wrapping=o.wrapping,o.enabled){const n=t.node,{tickSpace:r}=e,s=(null!==(i=o.spacing)&&void 0!==i?i:0)+r,a=this.label.getSideFlag(),l=zs(this.rotation),c=-1===a&&l>Math.PI&&l<2*Math.PI?-1:1,d=c*a*Math.PI/2,u=1===c?"bottom":"top",{range:h}=this,p=Math.floor(c*a*(h[0]+h[1])/2),f=-1===a?Math.floor(c*-s):Math.floor(-s),{callbackCache:g}=this.moduleCtx,{formatter:v=t=>t.defaultValue}=o,y=g.call(v,this.getTitleFormatterParams());n.setProperties({rotation:d,text:y,textBaseline:u,visible:!0,x:p,y:f})}}else t.enabled=!1}calculateLayout(t){var e;const{rotation:i,parallelFlipRotation:o,regularFlipRotation:n}=this.calculateRotations(),r=this.label.getSideFlag(),s=r*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:o,regularFlipRotation:n,labelX:s,sideFlag:r});const a=this.tickGenerationResult,{tickData:l,combinedRotation:c,textBaseline:d,textAlign:u}=a,h=ls(a,["tickData","combinedRotation","textBaseline","textAlign"]),p=[],{x:f,y1:g,y2:v}=this.getAxisLineCoordinates(),y=new ul(f,g,0,v-g);p.push(y);const{tick:m}=this;m.enabled&&l.ticks.forEach((t=>{const{x1:e,x2:i,y:o}=this.getTickLineCoordinates(t),n=new ul(e,o,i-e,0);p.push(n)}));const{label:b}=this;if(b.enabled){const t=new Ol;l.ticks.forEach((e=>{const i=this.getTickLabelProps(e,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range});if(!i.visible)return;t.setProperties(Object.assign(Object.assign({},i),{translationY:Math.round(e.translationY)}));const o=t.computeTransformedBBox();o&&p.push(o)}))}const{title:S}=this;if(null===S||void 0===S?void 0:S.enabled){const t=new Ll;let e=0;if(l.ticks.length>0){const t=ul.merge(p).width;isFinite(t)&&(e+=t)}this.setTitleProps(t,{tickSpace:e});const i=t.node.computeTransformedBBox();i&&p.push(i)}const x=(t=>{const e=new hl,{rotation:i,translationX:o,translationY:n,rotationCenterX:r,rotationCenterY:s}=this.getAxisTransform();return hl.updateTransformMatrix(e,1,1,i,o,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:s}),e.transformBBox(t)})(ul.merge(p)),C=this.isAnySeriesActive();return null===(e=this.crossLines)||void 0===e||e.forEach((t=>{var e;t.sideFlag=-r,t.direction=i===-Math.PI/2?ol.X:ol.Y,t instanceof Yu&&(t.label.parallel=null!==(e=t.label.parallel)&&void 0!==e?e:this.label.parallel),t.parallelFlipRotation=o,t.regularFlipRotation=n,t.calculateLayout(C)})),this.updateLayoutState(),{primaryTickCount:t=h.primaryTickCount,bbox:x}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;mc.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=Us(this.rotation);return{rotation:t,parallelFlipRotation:zs(t),regularFlipRotation:zs(t-Math.PI/2)}}generateTicks(t){let{primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:o,labelX:n,sideFlag:r}=t;var s;const{scale:a,tick:l,label:{parallel:c,rotation:d,fontFamily:u,fontSize:h,fontStyle:p,fontWeight:f}}=this,g=void 0!==e,{defaultRotation:v,configuredRotation:y,parallelFlipFlag:m,regularFlipFlag:b}=ud({rotation:d,parallel:c,regularFlipRotation:o,parallelFlipRotation:i}),S=y+v,x=new hl,{maxTickCount:C}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!==(s=l.maxSpacing)&&void 0!==s?s:NaN}),w=!mc.is(a)||isNaN(C)?10:C;let E=hd(c,y,0,r,b);const O=function(t,e,i,o){return t&&!e?i*o===-1?"hanging":"bottom":"middle"}(c,y,r,m),D={fontFamily:u,fontSize:h,fontStyle:p,fontWeight:f,textBaseline:O,textAlign:E};let A={rawTicks:[],ticks:[],labelCount:0},T=0,M=0,k=!0,R=!1;for(;k&&T<=w&&!R;){M=0,E=hd(c,y,0,r,b);const t=this.getTickStrategies({secondaryAxis:g,index:T});for(const i of t){({tickData:A,index:T,autoRotation:M,terminate:R}=i({index:T,tickData:A,textProps:D,labelOverlap:k,terminate:R,primaryTickCount:e}));const t=0!==y||0!==M,o=S+M;E=hd(c,y,M,r,b),k=this.checkLabelOverlap(o,t,x,A.ticks,n,Object.assign(Object.assign({},D),{textAlign:E}))}}const P=v+y+M;return!g&&A.rawTicks.length>0&&(e=A.rawTicks.length),{tickData:A,primaryTickCount:e,combinedRotation:P,textBaseline:O,textAlign:E}}getTickStrategies(t){let{index:e,secondaryAxis:i}=t;const{scale:o,label:n,tick:r}=this,s=mc.is(o),a=n.enabled&&n.avoidCollisions,l=!s&&0!==e&&a,c=!0===n.autoRotate&&void 0===n.rotation,d=[];let u;u=this.tick.values?mh.VALUES:i?mh.CREATE_SECONDARY:l?mh.FILTER:mh.CREATE;if(d.push((t=>{let{index:e,tickData:i,primaryTickCount:o,terminate:n}=t;return this.createTickData(u,e,i,n,o)})),!s&&!isNaN(r.minSpacing)){const t=t=>{let{index:e,tickData:i,primaryTickCount:o,terminate:n}=t;return this.createTickData(mh.FILTER,e,i,n,o)};d.push(t)}if(!a)return d;if(n.autoWrap){const t=t=>{let{index:e,tickData:i,textProps:o}=t;return this.wrapLabels(i,e,o)};d.push(t)}else if(c){const t=t=>{let{index:e,tickData:i,labelOverlap:o,terminate:n}=t;return{index:e,tickData:i,autoRotation:this.getAutoRotation(o),terminate:n}};d.push(t)}return d}createTickData(t,e,i,o,n){var r;const{scale:s,tick:a}=this,{maxTickCount:l,minTickCount:c,defaultTickCount:d}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(r=a.maxSpacing)&&void 0!==r?r:NaN}),u=mc.is(s),h=!u||isNaN(l)?10:l;let p=u?Math.max(d-e,c):l;const f=void 0===a.interval&&void 0===a.values&&p>c&&(u||t===mh.FILTER);let g=!0;for(;g&&e<=h;){const o=i.rawTicks;p=u?Math.max(d-e,c):l;const{rawTicks:r,ticks:s,labelCount:a}=this.getTicks({tickGenerationType:t,previousTicks:o,tickCount:p,minTickCount:c,maxTickCount:l,primaryTickCount:n});i.rawTicks=r,i.ticks=s,i.labelCount=a,g=!!f&&ih(r,o),e++}const v=void 0!==a.interval||void 0!==a.values;return o||(o=v),{tickData:i,index:e,autoRotation:0,terminate:o}}checkLabelOverlap(t,e,i,o,n,r){hl.updateTransformMatrix(i,1,1,t,0,0);const s=this.createLabelData(o,n,r,i),a=function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e);return function(t,e){const i=[];for(let o=0;o<t.length;o++){const n=t[o],{point:{x:r,y:s},label:{text:a}}=n;let{label:{width:l,height:c}}=n;if(l+=null!==e&&void 0!==e?e:0,c+=null!==e&&void 0!==e?e:0,i.some((t=>nh(t,r,s,l,c))))return!0;i.push({index:o,text:a,x:r,y:s,width:l,height:c,datum:n})}return!1}(s,a)}createLabelData(t,e,i,o){const n=[];for(const r of t){const{tickLabel:t,translationY:s}=r;if(""===t||void 0==t)continue;const a=Rl(t),{width:l,height:c}=Al(a,e,s,i),d=pd(t,new ul(e,s,l,c),e,s,o);n.push(d)}return n}getAutoRotation(t){var e;return t?zs(Us(null!==(e=this.label.autoRotateAngle)&&void 0!==e?e:0)):0}getTicks(t){let{tickGenerationType:e,previousTicks:i,tickCount:o,minTickCount:n,maxTickCount:r,primaryTickCount:s}=t;var a;const{range:l,scale:c,visibleRange:d}=this;let u=[];switch(e){case mh.VALUES:u=this.tick.values;break;case mh.CREATE_SECONDARY:u=this.updateSecondaryAxisTicks(s);break;case mh.FILTER:u=this.filterTicks(i,o);break;default:u=this.createTicks(o,n,r)}this.onLabelFormatChange(u,this.label.format),this.fractionDigits=u.fractionDigits>=0?u.fractionDigits:0;const h=(null!==(a=c.bandwidth)&&void 0!==a?a:0)/2,p=[];let f=0;const g=new Map,v=Math.max(0,Math.floor(d[0]*u.length)),y=Math.min(u.length,Math.ceil(d[1]*u.length));for(let m=v;m<y;m++){const t=u[m],e=c.convert(t)+h;if(l.length>0&&!this.inRange(e,0,.001))continue;const i=this.formatTick(t,m);let o=i;if(g.has(o)){const t=g.get(o);g.set(o,t+1),o=`${o}_${t}`}else g.set(o,1);p.push({tick:t,tickId:o,tickLabel:i,translationY:e}),""!==i&&void 0!=i&&f++}return{rawTicks:u,ticks:p,labelCount:f}}filterTicks(t,e){var i;const o=!isNaN(this.tick.minSpacing)||!isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?Math.ceil(t.length/e):2;return t.filter(((t,e)=>e%o===0))}createTicks(t,e,i){var o,n,r;return this.setTickCount(t,e,i),null!==(r=null===(n=(o=this.scale).ticks)||void 0===n?void 0:n.call(o))&&void 0!==r?r:[]}estimateTickCount(t){let{minSpacing:e,maxSpacing:i}=t;const{minRect:o}=this,n=this.calculateRangeWithBleed(),r=Math.max(this.defaultTickMinSpacing,n/mc.defaultMaxTickCount);let s=!isNaN(i);isNaN(e)&&(e=r),isNaN(i)&&(i=n),e>i&&(e===r?e=i:i=e);const a=o?this.direction===ol.X?o.width:o.height:1;s&&(s=a<r);const l=Xs(1,Math.floor(n/e),s?Math.floor(n/a):1/0),c=Math.min(l,Math.ceil(n/i));return{minTickCount:c,maxTickCount:l,defaultTickCount:Xs(c,mc.defaultTickCount,l)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines(t){let{rotation:e,parallelFlipRotation:i,regularFlipRotation:o}=t;var n;const r=this.label.getSideFlag(),s=this.isAnySeriesActive();null===(n=this.crossLines)||void 0===n||n.forEach((t=>{var n;t.sideFlag=-r,t.direction=e===-Math.PI/2?ol.X:ol.Y,t instanceof Yu&&(t.label.parallel=null!==(n=t.label.parallel)&&void 0!==n?n:this.label.parallel),t.parallelFlipRotation=i,t.regularFlipRotation=o,t.update(s)}))}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each((e=>{e.strokeWidth=t.width,e.stroke=t.color,e.x1=i*t.size,e.x2=0,e.y1=0,e.y2=0}))}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateRangeWithBleed(){const{visibleRange:t}=this,e=1/(t[1]-t[0]);return Zs(this.calculateAvailableRange()*e,2)}calculateDomain(){if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const t=this.boundSeries.filter((t=>this.includeInvisibleDomains||t.isEnabled())).flatMap((t=>t.getDomain(this.direction)));this.dataDomain=this.normaliseDataDomain(t)}}getAxisTransform(){return{rotation:Us(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:this.translation.x,translationY:this.translation.y}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:o,gridLineGroupSelection:n,gridPadding:r,gridLength:s}=this,{rotation:a}=this.calculateRotations(),l=this.label.getSideFlag(),c=Math.floor(o.x),d=Math.floor(o.y);t.setProperties({rotation:a,translationX:c,translationY:d}),e.datum=this.getAxisTransform(),i.setProperties({rotation:a,translationX:c,translationY:d}),n.each((t=>{t.x1=r,t.x2=-l*s+r,t.y=0}))}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],(t=>t.append(new Ec({tag:yh.GridLine}))),(t=>t.tickId)),this.tickLineGroupSelection.update(e,(t=>t.appendChild(new Ec({tag:yh.TickLine}))),(t=>t.tickId)),this.tickLabelGroupSelection.update(e.map((t=>this.getTickLabelProps(t,i))),(t=>t.appendChild(new Ol({tag:yh.TickLabel}))),(t=>t.tickId))}updateAxisLine(){const{line:t}=this,e=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:e})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:o,gridLength:n}=this;0!==n&&0!==e.length&&this.gridLineGroupSelection.each(((r,s,a)=>{const{stroke:l,lineDash:c}=e[a%e.length];r.setProperties({x1:o,x2:-t*n+o,y:0,fill:void 0,stroke:l,strokeWidth:i,lineDash:c})}))}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each(((t,e)=>{t.setProperties(e,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])}))}wrapLabels(t,e,i){const{parallel:o,maxWidth:n,maxHeight:r}=this.label;let s=this.maxThickness,a=Math.round(this.calculateAvailableRange()/t.labelCount);return o&&([s,a]=[a,s]),t.ticks.forEach((t=>{t.tickLabel=Ol.wrap(t.tickLabel,null!==n&&void 0!==n?n:s,null!==r&&void 0!==r?r:a,i,"hyphenate")})),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:o,lineNode:n,tickLineGroup:r,tickLabelGroup:s}=this;if(!i)return void(o.enabled=!1);let a=0;const{anyTickVisible:l}=t;if(i.enabled&&l){const t=Cc.computeBBox([r,s,n]),i=0===e?t.width:t.height;Math.abs(i)<1/0&&(a+=i)}this.setTitleProps(o,{tickSpace:a})}formatTick(t,e){var i,o;const{label:n,labelFormatter:r,fractionDigits:s,moduleCtx:{callbackCache:a}}=this;if(n.formatter){const o=s>0?t:String(t);return null!==(i=a.call(n.formatter,{value:o,index:e,fractionDigits:s,formatter:r}))&&void 0!==i?i:o}return r&&null!==(o=a.call(r,t))&&void 0!==o?o:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some((t=>this.includeInvisibleDomains||t.isEnabled()))}clipTickLines(t,e,i,o){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new ul(t,e,i,o))}clipGrid(t,e,i,o){this.gridGroup.setClipRectInGroupCoordinateSpace(new ul(t,e,i,o))}calculatePadding(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce(((t,e)=>{const i=e.getKeys(this.direction),o=e.getNames(this.direction);for(let n=0;n<i.length;n++)t.push({key:i[n],name:o[n]});return t}),[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}normaliseDataDomain(t){return{domain:t,clipped:!1}}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var t;return null!==(t=this.axisContext)&&void 0!==t||(this.axisContext=this.createAxisContext()),Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:mc.is(this.scale),keys:()=>this.boundSeries.flatMap((t=>t.getKeys(this.direction))),scaleValueFormatter:t=>{var e,i;return null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t})},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,i=vh(ph(this));Yl(this.id,"axis-group",e,[this.axisGroup],i.group),Yl(this.id,"line",e,[this.lineNode],i.line),Yl(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,((t,e)=>e.tickId),t),Yl(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,((t,e)=>e.tickId),t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:o}=this,n=ph(this);pu([this.axisGroup],((t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY}))),pu([t,e],function(t){const{visible:e,min:i,max:o}=t;return(t,n)=>{const r=Math.round(n.translationY);return{translationY:r,opacity:1,visible:e&&r>=i&&r<=o}}}(n)),pu([i],((t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX}))),pu([o],((t,e)=>Object.assign({},e)))}calculateUpdateDiff(t,e){const i=new Set,o=new Set,n=Math.max(t.length,e.ticks.length);for(let r=0;r<n;r++){const n=e.ticks[r],s=t[r],a=null===n||void 0===n?void 0:n.tickId;s!==a&&(o.has(a)?o.delete(a):a&&i.add(a),i.has(s)?i.delete(s):s&&o.add(s))}return{changed:i.size>0||o.size>0,added:[...i.values()],removed:[...o.values()]}}}Sh.defaultTickMinSpacing=50,cs([ea(pa),ds("design:type",Boolean)],Sh.prototype,"nice",void 0),cs([ea(Pa),ds("design:type",Array)],Sh.prototype,"keys",void 0);class xh extends ch{constructor(){super(...arguments),this.autoRotateAngle=335}}cs([ea(fa),ds("design:type",Boolean)],xh.prototype,"autoRotate",void 0),cs([ea(Aa(-360,360)),ds("design:type",Number)],xh.prototype,"autoRotateAngle",void 0);class Ch extends Sh{constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?ol.X:ol.Y}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){return this.updateDirection(),super.update(t)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return Object.assign(Object.assign({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){!function(t,e){var i;null===(i=Au.constructedArrays)||void 0===i||i.set(t,e)}(t,Yu)}createLabel(){return new xh}}cs([ea(Aa(0)),ds("design:type",Number)],Ch.prototype,"thickness",void 0),cs([ea(Ya),ds("design:type",String)],Ch.prototype,"position",void 0);class wh extends Ch{constructor(t){super(t,new Ys),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const o of t){const t=o instanceof Date?o.getTime():o;i.has(t)||(i.add(t),e.push(o))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map((t=>{var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)})).filter((t=>null!=t));t.length>0&&(this.scale.paddingInner=Math.min(...t.map((t=>t.inner))),this.scale.paddingOuter=Math.max(...t.map((t=>t.outer))))}return super.calculateDomain()}}wh.className="CategoryAxis",wh.type="category",cs([ea(Aa(0,1)),ds("design:type",Number)],wh.prototype,"groupPaddingInner",void 0);class Eh{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter(((t,e)=>e!==this.number)):[]}}function Oh(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new Eh;let o=0;return e&&t.forEach((t=>o=Math.max(o,t.labels.length))),t.forEach((t=>{if(e)for(;t.labels.length<o;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),o=i.length-1;i.forEach(((e,i)=>{const n=t.children,r=n.find((t=>t.label===e)),s=i!==o;if(r&&s)t=r;else{const i=new Eh(e,t);i.number=n.length,n.push(i),s&&(t=i)}}))}(i,t)})),i}function Dh(t,e,i){const o=i/(e.number-t.number);e.change-=o,e.shift+=i,t.change+=o,e.prelim+=i,e.mod+=i}function Ah(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function Th(t,e){const i=t.children;if(i.length){let o=i[0];i.forEach((t=>{Th(t,e),o=function(t,e,i){const o=t.getLeftSibling();if(o){let n=t,r=t,s=o,a=r.getLeftmostSibling(),l=r.mod,c=n.mod,d=s.mod,u=a.mod;for(;s.nextRight()&&r.nextLeft();){s=s.nextRight(),r=r.nextLeft(),a=a.nextLeft(),n=n.nextRight(),n.ancestor=t;const o=s.prelim+d-(r.prelim+l)+i;o>0&&(Dh(Ah(s,t,e),t,o),l+=o,c+=o),d+=s.mod,l+=r.mod,u+=a.mod,c+=n.mod}s.nextRight()&&!n.nextRight()?(n.thread=s.nextRight(),n.mod+=d-c):(r.nextLeft()&&!a.nextLeft()&&(a.thread=r.nextLeft(),a.mod+=l-u),e=t)}return e}(t,o,e)})),function(t){const e=t.children;if(e){let t=0,i=0;for(let o=e.length-1;o>=0;o--){const n=e[o];n.prelim+=t,n.mod+=t,i+=n.change,t+=n.shift+i}}}(t);const n=(i[0].prelim+i[i.length-1].prelim)/2,r=t.getLeftSibling();r?(t.prelim=r.prelim+e,t.mod=t.prelim-n):t.prelim=n}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}class Mh{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:o}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),o>this.bottom&&(this.bottom=o),o<this.top&&(this.top=o)}}function kh(t,e,i){t.x=t.prelim+e,t.y=t.depth,i.update(t),t.children.forEach((o=>kh(o,e+t.mod,i)))}function Rh(t){const e=t.children;let i=0;e.forEach((t=>{Rh(t),t.children.length?i+=t.leafCount:i++})),t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function Ph(t){const e=new Nh;return Th(t,1),kh(t,-t.prelim,e),Rh(t),e}class Nh{constructor(){this.dimensions=new Mh,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,(t=>({x:t.x,y:t.y}))),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this.leafCount-1,s=this.depth,a=this.dimensions;let l=1,c=1;if(t>0&&r){const e=(a.right-a.left)/r;l=t/r/e,n&&(l=-l)}if(e>0&&s){const t=(a.bottom-a.top)/s;c=e/s/t}const d=new Mh;this.nodes.forEach((t=>{t.screenX=t.x*l,t.screenY=t.y*c,d.update(t,(t=>({x:t.screenX,y:t.screenY})))}));const u=-d.left,h=-d.top;this.nodes.forEach((t=>{t.screenX+=u+i,t.screenY+=h+o}))}}class Lh extends ch{constructor(){super(...arguments),this.grid=!1}}cs([ea(pa),ds("design:type",Boolean)],Lh.prototype,"grid",void 0);class _h extends Ch{constructor(t){super(t,new Ys),this.tickScale=new Ys,this.line=new dh,this.label=new Lh,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:o,tickScale:n,scale:r}=this;r.paddingOuter=.1,r.paddingInner=2*r.paddingOuter,this.range=r.range.slice(),this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=wc.select(o,Ec),this.axisLineSelection=wc.select(e,Ec),this.separatorSelection=wc.select(e,Ec),this.labelSelection=wc.select(i,Ol)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,o=(t[1]-t[0])/(e[1]-e[0]),n=o*e[0],r=t[0]-n;this.tickScale.range=i.range=[r,r+o],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,o=this.tickTreeLayout,n=this.lineHeight;o&&o.resize(Math.abs(i[1]-i[0]),o.depth*n,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-o.depth*n,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e}=this,i=[];let o;this.boundSeries.filter((t=>t.visible)).forEach((t=>{if(e===ol.X)if(void 0===o){const n=t.getDomain(e);i.push(n),o="number"===typeof n[0]}else o&&i.push(t.getDomain(e));else i.push(t.getDomain(e))}));const n=(new Array).concat(...i),r=null!==(t=ms(n))&&void 0!==t?t:n;this.dataDomain=this.normaliseDataDomain(r),this.scale.domain=this.dataDomain.domain}normaliseDataDomain(t){const e=t.filter(((t,e,i)=>i.indexOf(t)===e)),i=Oh(e);this.tickTreeLayout=Ph(i);const o=e.slice();return o.push(""),this.tickScale.domain=o,this.resizeTickTree(),{domain:e,clipped:!1}}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each(((t,e)=>{t.setProperties(e)}))}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each(((t,i)=>{t.x1=i.x1,t.x2=i.x2,t.y1=i.y,t.y2=i.y,t.visible=i.y>=e[0]-1e-7&&i.y<=e[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1}))}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each(((t,e)=>{t.setProperties(Object.assign(Object.assign({},e),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=e.x,t.x2=e.x,t.y1=e.y1,t.y2=e.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color}))}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:o,tickScale:n}=this,r=n.ticks(),s=i.getSideFlag(),a=this.gridLineSelection.update(t?r:[]);if(t){const{width:i,style:r}=e,l=r.length;a.each(((e,a,c)=>{const d=Math.round(n.convert(a));e.x1=0,e.x2=-s*t,e.y1=d,e.y2=d,e.visible=d>=o[0]&&d<=o[1];const{stroke:u,lineDash:h}=r[c%l];e.stroke=u,e.strokeWidth=i,e.lineDash=h,e.fill=void 0}))}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:o},range:n,title:r,title:{formatter:s=t=>t.defaultValue}={}}=this,a=t.range[0],l=t.range[1],c=Math.abs(l-a)/t.domain.length||0,d=Us(this.rotation),u=Math.abs(Math.cos(d))<1e-8,h=e.getSideFlag(),p=this.lineHeight,f=this.tickTreeLayout,g=t.ticks(),v=f?f.nodes:[],y=!!f&&f.depth>1,{defaultRotation:m,configuredRotation:b,parallelFlipFlag:S}=ud({rotation:e.rotation,parallel:i,regularFlipRotation:zs(d-Math.PI/2),parallelFlipRotation:zs(d)}),x=[],C=new Map;let w=0;const E=new Ol,O=(t,i)=>{var a;if(E.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===S?"bottom":"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX}),0===i){if(!((null===r||void 0===r?void 0:r.enabled)&&g.length>0))return!1;const i=o.call(s,this.getTitleFormatterParams());E.setProperties({fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:i,textBaseline:"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX})}else{if(!(t.screenX>=n[0]&&t.screenX<=n[1]))return!1;e.formatter?E.text=null!==(a=o.call(e.formatter,{value:String(t.label),index:i}))&&void 0!==a?a:String(t.label):E.text=String(t.label)}return!0};v.forEach(((t,e)=>{if(O(t,e)){const t=E.computeTransformedBBox();t&&(C.set(e,t),t.width>w&&(w=t.width))}}));const D=h*e.padding,A=this.label.grid,T=[];v.forEach(((t,e)=>{let i=O(t,e);const o=e;E.x=D,E.rotationCenterX=D;const n=!t.children.length;if(n){E.rotation=b,E.textAlign="end",E.textBaseline="middle";const t=C.get(o);t&&t.height>c&&(i=!1,C.delete(o))}else{E.translationX-=w-p+this.label.padding;const e=t.leafCount*c,n=C.get(o);n&&n.width>e?(i=!1,C.delete(o)):E.rotation=u?m:-Math.PI/2}if(t.parent&&y){const e=n?t.screenX-c/2:t.screenX-t.leafCount*c/2;if(n)(t.number!==t.children.length-1||A)&&T.push({y:e,x1:0,x2:-w-2*this.label.padding});else{const i=-w-2*this.label.padding+t.screenY;T.push({y:e,x1:i+p,x2:i})}}let r;if(i){const t=E.computeTransformedBBox();t&&C.set(e,t),r=Object.assign(Object.assign({},{fill:(s=E).fill,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,rotation:s.rotation,rotationCenterX:s.rotationCenterX,rotationCenterY:s.rotationCenterY,text:s.text,textAlign:s.textAlign,textBaseline:s.textBaseline,translationX:s.translationX,translationY:s.translationY,visible:s.visible,x:s.x,y:s.y}),{visible:i})}else C.delete(e),r={visible:i};var s;x.push(r)}));let M=0;T.forEach((t=>M=Math.min(M,t.x2))),T.push({y:Math.max(a,l),x1:0,x2:M});const k=[],R=[];T.forEach((t=>{if(t.y>=n[0]-1e-7&&t.y<=n[1]+1e-7){const{x1:e,x2:i,y:o}=t,n=new ul(Math.min(e,i),o,Math.abs(e-i),0);R.push(n),k.push({x1:e,x2:i,y:o})}}));const P=[],N=[],L=f?f.depth+1:1;for(let I=0;I<L;I++){const t=g.length>0&&(0===I||A&&y),e=I>0?-w-2*this.label.padding-(I-1)*p:0,i=new ul(e,Math.min(...n),0,Math.abs(n[1]-n[0]));N.push(i),P.push({x:e,y1:n[0],y2:n[1],visible:t})}const _=(t=>{const e=new hl,{rotation:i,translationX:o,translationY:n,rotationCenterX:r,rotationCenterY:s}=this.getAxisTransform();return hl.updateTransformMatrix(e,1,1,i,o,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:s}),e.transformBBox(t)})(ul.merge([...C.values(),...R,...N]));return{bbox:_,tickLabelLayout:x,separatorLayout:k,axisLineLayout:P}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:o}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:o,primaryTickCount:void 0}}}_h.className="GroupedCategoryAxis",_h.type="grouped-category",cs([ea(wa),ds("design:type",String)],_h.prototype,"labelColor",void 0);class Ih{static isSupported(){return"undefined"!==typeof OffscreenCanvas&&null!=OffscreenCanvas.prototype.transferToImageBitmap}constructor(t){let{width:e=600,height:i=300,overrideDevicePixelRatio:o}=t;this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(e,i),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(o),this.resize(e,i)}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!==t&&void 0!==t?t:window.devicePixelRatio;return ml()||(e=1),this._pixelRatio=e,bl.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:o,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),o.resetTransform(),this._width=t,this._height=e}}!function(t){t.SCENE="scene",t.SCENE_STATS="scene:stats",t.SCENE_STATS_VERBOSE="scene:stats:verbose",t.SCENE_DIRTY_TREE="scene:dirtyTree"}(bh||(bh={}));const Fh="adv-composite",Gh="dom-composite";class Bh{constructor(t){var e;this.id=cl(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=As.create(!0,bh.SCENE);const{document:i,window:o,mode:n=(null!==(e=Os("agChartsSceneRenderModel"))&&void 0!==e?e:Fh),width:r,height:s,overrideDevicePixelRatio:a}=t;this.overrideDevicePixelRatio=a,this.opts={document:i,window:o,mode:n},this.canvas=new bl({document:i,window:o,width:r,height:s,overrideDevicePixelRatio:a})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,o=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||o||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite",Gh,Fh].includes(i))return;const{zIndex:o=this._nextZIndex++,name:n,zIndexSubOrder:r,getComputedOpacity:s,getVisibility:a}=t,{width:l,height:c,overrideDevicePixelRatio:d}=this,u=i===Gh,h=i===Fh&&Ih.isSupported()?new Ih({width:l,height:c,overrideDevicePixelRatio:d}):new bl({document:this.opts.document,window:this.opts.window,width:l,height:c,domLayer:u,zIndex:o,name:n,overrideDevicePixelRatio:d}),p={id:this._nextLayerId++,name:n,zIndex:o,zIndexSubOrder:r,canvas:h,getComputedOpacity:s,getVisibility:a};if(o>=this._nextZIndex&&(this._nextZIndex=o+1),this.layers.push(p),this.sortLayers(),u){const t=this.layers.map((t=>t.canvas)).filter((t=>t instanceof bl)),i=t.findIndex((t=>t===h));(null!==(e=t[i-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",h.element)}return this.debug("Scene.addLayer() - layers",this.layers),p.canvas}removeLayer(t){const e=this.layers.findIndex((e=>e.canvas===t));e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(t,e,i){const o=this.layers.find((e=>e.canvas===t));o&&(o.zIndex=e,o.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort(((t,e)=>{var i,o;return xc([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.id],[e.zIndex,...null!==(o=e.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],e.id],Sc)}))}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){var e,i=this;t!==this._root&&(null===(e=this._root)||void 0===e||e._setLayerManager(),this._root=t,t&&t._setLayerManager({addLayer:t=>this.addLayer(t),moveLayer:function(){return i.moveLayer(...arguments)},removeLayer:function(){return i.removeLayer(...arguments)},markDirty:()=>this.markDirty(),canvas:this.canvas,debug:As.create(bh.SCENE)}),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){var e,i;return us(this,void 0,void 0,(function*(){const{debugSplitTimes:o={start:performance.now()},extraDebugStats:n={}}=null!==t&&void 0!==t?t:{},{canvas:r,canvas:{context:s},root:a,layers:l,pendingSize:c,opts:{mode:d}}=this;if(c&&(this.canvas.resize(...c),this.layers.forEach((t=>t.canvas.resize(...c))),this.pendingSize=void 0),a&&!a.visible)return void(this._dirty=!1);if(a&&!this.dirty)return this.debug("Scene.render() - no-op",{redrawType:nl[a.dirty],tree:this.buildTree(a)}),void this.debugStats(o,s,void 0,n);const u={ctx:s,devicePixelRatio:null!==(e=this.canvas.pixelRatio)&&void 0!==e?e:1,forceRender:!0,resized:!!c,debugNodes:{}};As.check(bh.SCENE_STATS_VERBOSE)&&(u.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let h=!1;if((!a||a.dirty>=nl.TRIVIAL)&&(h=!0,r.clear()),a){const{dirtyTree:t,paths:e}=this.buildDirtyTree(a);As.create(bh.SCENE_DIRTY_TREE)("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}a&&h&&(this.debug("Scene.render() - before",{redrawType:nl[a.dirty],canvasCleared:h,tree:this.buildTree(a)}),a.visible&&(s.save(),a.render(u),s.restore())),o["\u270d\ufe0f"]=performance.now(),d!==Gh&&l.length>0&&h&&(this.sortLayers(),s.save(),s.setTransform(1/r.pixelRatio,0,0,1/r.pixelRatio,0,0),l.forEach((t=>{let{canvas:{imageSource:e,enabled:i},getComputedOpacity:o,getVisibility:n}=t;i&&n()&&(s.globalAlpha=o(),s.drawImage(e,0,0))})),s.restore(),o["\u26d9"]=performance.now()),null===(i=s.verifyDepthZero)||void 0===i||i.call(s),this._dirty=!1,this.debugStats(o,s,u.stats,n),this.debugSceneNodeHighlight(s,u.debugNodes),a&&this.debug("Scene.render() - after",{redrawType:nl[a.dirty],canvasCleared:h,tree:this.buildTree(a)})}))}debugStats(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(As.check(bh.SCENE_STATS,bh.SCENE_STATS_VERBOSE)){const n=performance.now(),r=t.start;t.end=performance.now();const s=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},a=(t,e,i)=>`${t}: ${Math.round(100*(i-e))/100}ms`,{layersRendered:l=0,layersSkipped:c=0,nodesRendered:d=0,nodesSkipped:u=0}=null!==i&&void 0!==i?i:{};let h=0;const p=Object.entries(t).filter((t=>{let[e]=t;return"end"!==e})).map(((t,e)=>{let[i,o]=t;const n=e>0?a(i,h,o):null;return h=o,n})).filter((t=>null!=t)).join(" + "),f=Object.entries(o).map((t=>{let[e,i]=t;return`${e}: ${i}`})).join(" ; "),g=As.check(bh.SCENE_STATS_VERBOSE),v=[`${a("\u23f1\ufe0f",r,n)} (${p})`,`${f}`,`Layers: ${g?s(l,c):this.layers.length}`,g?`Nodes: ${s(d,u)}`:null].filter((t=>null!=t)).map((t=>[t,bl.getTextSize(t,e.font)])),y=Math.max(...v.map((t=>{let[,{width:e}]=t;return e}))),m=v.reduce(((t,e)=>{let[,{height:i}]=e;return t+i}),0);e.save(),e.fillStyle="white",e.fillRect(0,0,y,m),e.fillStyle="black";let b=0;for(const[t,i]of v)b+=i.height,e.fillText(t,2,b);e.restore()}}debugSceneNodeHighlight(t,e){var i;const o=t=>e=>!!t.test(e.id)||e instanceof Cc&&null!=e.name&&t.test(e.name),n=t=>e=>t===e.id||e instanceof Cc&&null!=e.name&&t===e.name,r=xs(Os("agChartsSceneDebug")).flatMap((t=>"layout"===t?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:t));for(const s of r){if("string"===typeof s&&null!=e[s])continue;const t="string"===typeof s?n(s):o(s),r=null===(i=this.root)||void 0===i?void 0:i.findNodes(t);if(r&&0!==r.length)for(const i of r)i instanceof Cc&&i.name?e[i.name]=i:e[i.id]=i;else Es.log(`Scene.render() - no debugging node with id [${s}] in scene graph.`)}t.save();for(const[s,a]of Object.entries(e)){const e=a.computeTransformedBBox();e?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(s,e.x,e.y,e.width),t.fillText(s,e.x,e.y,e.width)):Es.log(`Scene.render() - no bbox for debugged node [${s}].`)}t.restore()}buildTree(t){var e,i;const o=null!==(e=t instanceof Cc?t.name:null)&&void 0!==e?e:t.id;return Object.assign(Object.assign({name:o,node:t,dirty:nl[t.dirty]},(null===(i=t.parent)||void 0===i?void 0:i.isVirtual)?{virtualParentDirty:nl[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map((t=>this.buildTree(t))).reduce(((t,e)=>{let{name:i}=e;const{node:{visible:o,opacity:n,zIndex:r,zIndexSubOrder:s},node:a,virtualParent:l}=e;(!o||n<=0)&&(i=`(${i})`),a instanceof Cc&&a.isLayer()&&(i=`*${i}*`);const c=[`${null!==i&&void 0!==i?i:"<unknown>"}`,`z: ${r}`,s&&`zo: ${s.map((t=>"function"===typeof t?`${t()} (fn)`:t)).join(" / ")}`,l&&"(virtual parent)"].filter((t=>!!t)).join(" ");let d=c,u=1;for(;null!=t[d]&&u<100;)d=`${c} (${u++})`;return t[d]=e,t}),{}))}buildDirtyTree(t){var e;if(t.dirty===nl.NONE)return{dirtyTree:{},paths:[]};const i=t.children.map((t=>this.buildDirtyTree(t))).filter((t=>t.paths.length>0)),o=null!==(e=t instanceof Cc?t.name:null)&&void 0!==e?e:t.id,n=0===i.length?[o]:i.map((t=>t.paths)).reduce(((t,e)=>t.concat(e)),[]).map((t=>`${o}.${t}`));return{dirtyTree:Object.assign({name:o,node:t,dirty:nl[t.dirty]},i.map((t=>t.dirtyTree)).filter((t=>void 0!==t.dirty)).reduce(((t,e)=>{var i;return t[null!==(i=e.name)&&void 0!==i?i:"<unknown>"]=e,t}),{})),paths:n}}}function Vh(t){return new Promise((e=>{setTimeout((()=>e(void 0)),t)}))}Bh.className="Scene";class jh{constructor(){this.cache=new WeakMap}call(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];let n,r=this.cache.get(t);const s=()=>{try{const e=t(...i);return r&&null!=n&&r.set(n,e),e}catch(e){return void Es.warnOnce("User callback errored, ignoring",e)}};try{n=JSON.stringify(i)}catch(a){return s()}return null==r&&(r=new Map,this.cache.set(t,r)),r.has(n)?r.get(n):s()}invalidateCache(){this.cache=new WeakMap}}class Wh{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise((e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext()}))}acquireImmediately(t){return us(this,void 0,void 0,(function*(){return!!this.available&&(yield this.acquire(t),!0)}))}waitForClearAcquireQueue(){return us(this,void 0,void 0,(function*(){return this.acquire((()=>us(this,void 0,void 0,(function*(){}))))}))}dispatchNext(){var t,e;return us(this,void 0,void 0,(function*(){this.available=!1;let[i,o]=null!==(t=this.acquireQueue.shift())&&void 0!==t?t:[];for(;i;){try{yield i(),null===o||void 0===o||o()}catch(n){Es.error("mutex callback error",n),null===o||void 0===o||o()}[i,o]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[]}this.available=!0}))}}function zh(t,e){let i,o,n=0,r=!1;const s=()=>r,a=()=>{r=!1,null===o||void 0===o||o(),o=void 0,i=void 0,n>0&&t(l)},l=()=>{const t=n;n=0,r=!0;const i=e({count:t});i?i.then(a).catch(a):a()};return{schedule(e){0!==n||s()||t(l,e),n++},await(){return us(this,void 0,void 0,(function*(){if(s())for(null==i&&(i=new Promise((t=>{o=t})));s();)yield i}))}}}class Hh{static init(t){if("undefined"!==typeof ResizeObserver)this.resizeObserver=new ResizeObserver((t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}}));else{const t=()=>{this.elements.forEach(((t,e)=>{this.checkClientSize(e,t)}))};this.pollerHandler=window.setInterval(t,100)}this.ready=!0,this.documentReady="loading"!==t.readyState,this.documentReady||(this.readyEventFn=()=>{const e="loading"!==t.readyState,i=this.documentReady;if(this.documentReady=e,e&&e!==i){for(const[t,e]of this.queuedObserveRequests)this.observe(t,e);this.queuedObserveRequests.length=0}},t.addEventListener("DOMContentLoaded",this.readyEventFn))}static destroy(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),this.readyEventFn&&(document.removeEventListener("DOMContentLoaded",this.readyEventFn),this.readyEventFn=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1}static checkSize(t,e,i,o){t&&(t.size&&i===t.size.width&&o===t.size.height||(t.size={width:i,height:o},t.cb(t.size,e)))}static observe(t,e){this.ready||this.init(t.ownerDocument),this.documentReady?(this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}static unobserve(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),this.queuedObserveRequests=this.queuedObserveRequests.filter((e=>{let[i]=e;return i===t})),e&&0===this.elements.size&&this.destroy()}static checkClientSize(t,e){const i=t.clientWidth?t.clientWidth:0,o=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,i,o)}}Hh.elements=new Map,Hh.ready=!1,Hh.documentReady=!1,Hh.queuedObserveRequests=[];class Uh{constructor(){this.range="tooltip"}}var Kh;cs([ea(Na("tooltip","node")),ds("design:type",String)],Uh.prototype,"range",void 0),function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(Kh||(Kh={}));class Yh{constructor(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}}function Xh(t){return t.map((t=>null==t||"number"===typeof t||"string"===typeof t||"boolean"===typeof t?t:"object"===typeof t?JSON.stringify(t):t)).join("-")}function $h(t){const e=1e4;return Number.isInteger(t)?t:Math.abs(t)>e?Math.trunc(t):Math.round(t*e)/e}function qh(t,e){var i;const o=function(t){if(void 0===t)return[];let[e,i]=t;return e=+e,i=+i,0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),$c(e)&&$c(i)?[e,i]:[])}(t);if(0===o.length)return o;let[n,r]=o;if(n===r){const[t,o]=null!==(i=null===e||void 0===e?void 0:e.calculatePadding(n,r))&&void 0!==i?i:[1,1];n-=t,r+=o}return[n,r]}const Zh=Symbol("invalid");class Jh{constructor(t){const{props:e,mode:i="standalone"}=t;this.mode=i;let o=!0;for(const s of e){if("key"===s.type&&!o)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===s.type&&o&&(o=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=e.filter((t=>"key"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:0}))),this.values=e.filter((t=>"value"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:0}))),this.aggregates=e.filter((t=>"aggregate"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))),this.groupProcessors=e.filter((t=>"group-value-processor"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))),this.propertyProcessors=e.filter((t=>"property-value-processor"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))),this.reducers=e.filter((t=>"reducer"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))),this.processors=e.filter((t=>"processor"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e})));for(const s of this.values)if(null==s.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(s)}`);const n=t=>{let{matchGroupIds:e}=t;for(const i of null!==e&&void 0!==e?e:[])if(!this.values.some((t=>t.groupId===i)))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${i}).`)},r=t=>{let{matchIds:e}=t;for(const i of null!==e&&void 0!==e?e:[])if(!this.values.some((t=>{var e;return null===(e=t.ids)||void 0===e?void 0:e.some((t=>{let[e,o]=t;return e===i[0]&&o===i[1]}))})))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${i}).`)};for(const s of[...this.groupProcessors,...this.aggregates])r(s),n(s)}resolveProcessedDataIndexById(t,e){var i;const{index:o,def:n}=null!==(i=this.resolveProcessedDataDefById(t,e))&&void 0!==i?i:{};return{index:o,def:n}}resolveProcessedDataIndicesById(t,e){return this.resolveProcessedDataDefsById(t,e).map((t=>{let{index:e,def:i}=t;return{index:e,def:i}}))}resolveProcessedDataDefById(t,e){return this.resolveProcessedDataDefsById(t,e)[0]}resolveProcessedDataDefsByIds(t,e){const i=[];for(const o of e)i.push([o,this.resolveProcessedDataDefsById(t,o)]);return i}resolveProcessedDataDefsValues(t,e){let{keys:i,values:o}=e;const n={};for(const[r,[{index:s,def:a}]]of t){const t="key"===a.type?i:o;n[r]=t[s]}return n}resolveProcessedDataDefsById(t,e){const{keys:i,values:o,aggregates:n,groupProcessors:r,reducers:s}=this,a=i=>{const{ids:o,scopes:n}=i;return null!=o&&(!(null!=t&&!(null===n||void 0===n?void 0:n.some((e=>e===t.id))))&&o.some((i=>{let[o,n]=i;return o===t.id&&("string"===typeof e?n===e:e.test(n))})))},l=[i,o,n,r,s],c=[];for(const d of l)c.push(...d.filter(a).map((t=>({index:t.index,def:t}))));if(c.length>0)return c;throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`)}getDomain(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",o=arguments.length>3?arguments[3]:void 0;var n,r,s,a;let l,c;try{l=this.resolveProcessedDataIndicesById(t,e)}catch(h){if("string"!==typeof e&&/didn't find property definition/.test(h.message))return[];throw h}switch(i){case"key":c="keys";break;case"value":c="values";break;case"aggregate":c="aggValues";break;case"group-value-processor":c="groups";break;default:return[]}const d=null!==(r=null===(n=o.domain[c])||void 0===n?void 0:n[l[0].index])&&void 0!==r?r:[];if(1===l.length)return d;const u=[...d];for(const p of l.slice(1))Cd(null!==(a=null===(s=o.domain[c])||void 0===s?void 0:s[p.index])&&void 0!==a?a:[],u);return u}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:o,groupProcessors:n,reducers:r,processors:s,propertyProcessors:a}=this,l=performance.now();for(const u of[...this.keys,...this.values])u.missing=0;if(e&&0===this.keys.length)return;let c=this.extractData(t);e?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),n.length>0&&this.postProcessGroups(c),o.length>0&&this.aggregateData(c),a.length>0&&this.postProcessProperties(c),r.length>0&&this.reduceData(c),s.length>0&&this.postProcessData(c);for(const u of[...this.keys,...this.values])t.length>0&&u.missing>=t.length&&Es.warnOnce(`the key '${u.property}' was not found in any data element.`);const d=performance.now();return c.time=d-l,As.check(!0,"data-model")&&function(t){var e,i;const o=(t,e)=>{e.length>0&&(Es.log(`DataModel.processData() - ${t}`),Es.table(e))};if(Es.log("DataModel.processData() - processedData",t),o("Key Domains",t.domain.keys),o("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),o("Value Domains",t.domain.values),o("Aggregate Domains",null!==(i=t.domain.aggValues)&&void 0!==i?i:[]),"grouped"===t.type){const e=t.data.reduce(((t,e)=>{var i,o;const n=null!==(i=e.keys)&&void 0!==i?i:[],r=null!==(o=e.aggValues)&&void 0!==o?o:[],s=e.keys.map((()=>{})),a=null===r||void 0===r?void 0:r.map((()=>{}));return t.push(...e.values.map(((t,e)=>[...0===e?n:s,...null!==t&&void 0!==t?t:[],...0==e?r:a]))),t}),[]);o("Values",e)}else{const e=t.data.reduce(((t,e)=>{var i;const o=null!==(i=e.aggValues)&&void 0!==i?i:[];return t.push([...e.keys,...e.values,...o]),t}),[]);o("Values",e)}}(c),c}valueGroupIdxLookup(t){let{matchGroupIds:e,matchIds:i}=t;return this.values.map(((t,e)=>({def:t,index:e}))).filter((t=>{let{def:o}=t;return!(e&&(null==o.groupId||!e.includes(o.groupId)))&&(!i||null!=o.ids&&i.some((t=>{let[e,i]=t;var n;return null===(n=o.ids)||void 0===n?void 0:n.some((t=>{let[o,n]=t;return o===e&&n===i}))})))})).map((t=>{let{index:e}=t;return e}))}valueIdxLookup(t,e){const i=null==t||0===t.length,o=e=>{if(null==e)return!0;const o=null==e||0===e.length;return i===o||(null===e||void 0===e?void 0:e.some((e=>t.includes(e))))},n="string"===typeof e?e:e.id,r=this.values.findIndex((t=>{var e;return o(t.scopes)&&((null===(e=t.ids)||void 0===e?void 0:e.some((t=>(t=>{let[e,i]=t;return o([e])&&i===n})(t))))||t.property===n||t.id===n)}));if(r>=0)return r;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`)}extractData(t){var e;const{keys:i,values:o,opts:{dataVisible:n}}=this,{dataDomain:r,processValue:s,scopes:a,allScopesHaveSameDefs:l}=this.initDataDomainProcessor(),c=new Array(n?t.length:0);let d=0,u=0;for(const p of t){const t=a.size>0?new Set(a):void 0,r=n?new Array(i.length):void 0;let h,f=0;for(const e of i){if(h=s(e,p,h),h===Zh)break;r&&(r[f++]=h)}if(h===Zh)continue;const g=n&&o.length>0?new Array(o.length):void 0;let v,y=0;for(const i of o)if(v=s(i,p,v),v===Zh){if(l)break;for(const o of null!==(e=i.scopes)&&void 0!==e?e:a)null===t||void 0===t||t.delete(o);if(y++,0===(null===t||void 0===t?void 0:t.size))break}else g&&(g[y++]=v);if((v!==Zh||!l)&&(0!==(null===t||void 0===t?void 0:t.size)&&n)){const e={datum:p,keys:r,values:g};!l&&t&&t.size<a.size&&(u++,e.validScopes=[...t]),c[d++]=e}}c.length=d;const h=t=>{const e=r.get(t).getDomain();return Array.isArray(e)&&e[0]>e[1]?[]:[...e]};return{type:"ungrouped",input:{count:t.length},data:c,domain:{keys:i.map((t=>h(t))),values:o.map((t=>h(t)))},defs:{allScopesHaveSameDefs:l,keys:i,values:o},partialValidDataCount:u,time:0}}groupData(t,e){var i,o,n,r;const s=new Map;for(const d of t.data){const{keys:t,values:a,datum:l,validScopes:c}=d,u=e?e(d):t,h=Xh(u);if(s.has(h)){const t=s.get(h);if(t.values.push(a),t.datum.push(l),null!=c)for(let e=0;e<(null!==(o=null===(i=t.validScopes)||void 0===i?void 0:i.length)&&void 0!==o?o:0);e++){const i=null===(n=t.validScopes)||void 0===n?void 0:n[e];c.some((t=>t===i))||(null===(r=t.validScopes)||void 0===r||r.splice(e,1))}}else s.set(h,{keys:u,values:[a],datum:[l],validScopes:c})}const a=new Array(s.size),l=new Array(s.size);let c=0;for(const[,{keys:d,values:u,datum:h,validScopes:p}]of s.entries())0!==(null===p||void 0===p?void 0:p.length)&&(l[c]=d,a[c++]={keys:d,values:u,datum:h,validScopes:p});return Object.assign(Object.assign({},t),{type:"grouped",data:a,domain:Object.assign(Object.assign({},t.domain),{groups:l})})}aggregateData(t){var e,i,o,n,r,s,a,l;const{aggregates:c}=this;if(!c)return;const d=c.map((()=>[1/0,-1/0])),u=c.map((t=>this.valueGroupIdxLookup(t))),h=c.map((t=>t.aggregateFunction)),p=c.map((t=>t.groupAggregateFunction)),f=c.map((t=>t.finalFunction));for(const g of t.data){let{values:v}=g;const{validScopes:y}=g;null!==(e=g.aggValues)&&void 0!==e||(g.aggValues=new Array(u.length)),"ungrouped"===t.type&&(v=[v]);let m=0;for(const t of u){const e=null===(i=null===y||void 0===y?void 0:y.some((t=>{var e;return null===(e=c[m].matchScopes)||void 0===e?void 0:e.some((e=>t===e))})))||void 0===i||i;if(!e){m++;continue}let u=null!==(n=null===(o=p[m])||void 0===o?void 0:o.call(p))&&void 0!==n?n:Cd([]);for(const i of v){const e=t.map((t=>i[t])),o=h[m](e,g.keys);o&&(u=null!==(s=null===(r=p[m])||void 0===r?void 0:r.call(p,o,u))&&void 0!==s?s:Cd(o,u))}const b=(null!==(l=null===(a=f[m])||void 0===a?void 0:a.call(f,u))&&void 0!==l?l:u).map((t=>$h(t)));Cd(b,d[m]),g.aggValues[m++]=b}}t.domain.aggValues=d}postProcessGroups(t){var e,i,o,n,r;const{groupProcessors:s}=this;if(!s)return;const a=new Set,l=new Map,c=new Map,d=new Map;for(const h of s){const t=this.valueGroupIdxLookup(h);c.set(h,t),d.set(h,h.adjust());for(const e of t){const t=this.values[e];a.add(e),l.set(e,new Yh("category"===t.valueType?"discrete":"continuous"))}}const u=t=>{var e;for(const i of a)null===(e=l.get(i))||void 0===e||e.extend(t[i])};for(const h of t.data){for(const a of s){if(!(null===(i=null===(e=h.validScopes)||void 0===e?void 0:e.some((t=>{var e;return null===(e=a.matchScopes)||void 0===e?void 0:e.some((e=>t===e))})))||void 0===i||i))continue;const s=null!==(o=c.get(a))&&void 0!==o?o:[],l=null!==(r=null===(n=d.get(a))||void 0===n?void 0:n())&&void 0!==r?r:()=>{};if("grouped"!==t.type)h.values&&l(h.values,s);else for(const t of h.values)t&&l(t,s)}if("grouped"===t.type)for(const t of h.values)u(t);else u(h.values)}for(const[h,p]of l)t.domain.values[h]=[...p.getDomain()]}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:o,scopes:n}of e)i()(t,this.valueIdxLookup(null!==n&&void 0!==n?n:[],o))}reduceData(t){var e,i,o;const{reducers:n}=this,r=n.map((t=>t.scopes)),s=n.map((t=>t.reducer())),a=n.map((t=>t.initialValue));for(const l of t.data){let t=0;for(const o of s){null===(i=null===(e=l.validScopes)||void 0===e?void 0:e.some((e=>{var i;return null===(i=r[t])||void 0===i?void 0:i.some((t=>e===t))})))||void 0===i||i?(a[t]=o(a[t],l),t++):t++}}for(let l=0;l<a.length;l++)null!==(o=t.reduced)&&void 0!==o||(t.reduced={}),t.reduced[n[l].property]=a[l]}postProcessData(t){var e;const{processors:i}=this;for(const o of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[o.property]=o.calculate(t)}initDataDomainProcessor(){var t;const{keys:e,values:i}=this,o=new Set;for(const u of i)for(const e of null!==(t=u.scopes)&&void 0!==t?t:[])o.add(e);const n=o.size,r=new Map,s=new Map;let a=!0;const l=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;var o;"category"===e?i.set(t,new Yh("discrete")):(i.set(t,new Yh("continuous")),a&&(a=(null!==(o=t.scopes)&&void 0!==o?o:[]).length===n))},c=()=>{e.forEach((t=>l(t,t.valueType))),i.forEach((t=>l(t,t.valueType)))};c();const d=this.buildAccessors(...e,...i);return{dataDomain:r,processValue:(t,e,i)=>{var o,n,a,l;let u,h=!1;if(t.property in d){try{u=d[t.property](e)}catch(p){}h=void 0!==u}else h=t.property in e,u=h?e[t.property]:t.missingValue;if(null!=t.forceValue){u=h&&qs(u)?-1*t.forceValue:t.forceValue,h=!0}if(h||"missingValue"in t||t.missing++,r.has(t)||c(),h){if(!(null===(n=null===(o=t.validation)||void 0===o?void 0:o.call(t,u,e))||void 0===n||n)){if(!("invalidValue"in t))return Zh;u=t.invalidValue}}return t.processor&&(s.has(t)||s.set(t,t.processor()),u=null===(a=s.get(t))||void 0===a?void 0:a(u,i!==Zh?i:void 0)),null===(l=r.get(t))||void 0===l||l.extend(u),u},initDataDomain:c,scopes:o,allScopesHaveSameDefs:a}}buildAccessors(){const t={};if("integrated"===this.mode)return t;for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];for(const n of i){if(!(n.property.indexOf(".")>=0||n.property.indexOf("[")>=0))continue;let e;e=n.property.startsWith("[")?`return datum${n.property};`:`return datum.${n.property};`,t[n.property]=new Function("datum",e)}return t}}class Qh{constructor(t){this.mode=t,this.debug=As.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return us(this,void 0,void 0,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise(((o,n)=>{this.requested.push({id:t,opts:i,data:e,resultCb:o,reject:n})}))}))}execute(){return us(this,void 0,void 0,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.mergeRequested();this.debug("DataController.execute() - merged",t);const e=As.check(!0,"data-model");e&&(window.processedData=[]);for(const{opts:o,data:n,resultCbs:r,rejects:s,ids:a}of t)try{const t=new Jh(Object.assign(Object.assign({},o),{mode:this.mode})),i=t.processData(n);e&&window.processedData.push(i),i&&0===i.partialValidDataCount?r.forEach((e=>e({dataModel:t,processedData:i}))):i?this.splitResult(t,i,a,r):s.forEach((t=>t(new Error("AG Charts - no processed data generated"))))}catch(i){s.forEach((t=>t(i)))}}))}mergeRequested(){const t=[],e=t=>t.filter((t=>"key"===t.type)).map((t=>t.property)).join(";"),i=t=>{let{opts:i,data:o}=t;return t=>t[0].data===o&&t[0].opts.groupByKeys===i.groupByKeys&&t[0].opts.dataVisible===i.dataVisible&&t[0].opts.groupByFn===i.groupByFn&&e(t[0].opts.props)===e(i.props)},o=t=>e=>{var i;if(e.type!==t.type)return!1;const o=null!==(i=Ls(e,t))&&void 0!==i?i:{};return delete o.scopes,delete o.id,delete o.ids,0===Object.keys(o).length};for(const n of this.requested){const e=t.find(i(n));e?e.push(n):t.push([n])}return t.map((t=>{return{ids:t.map((t=>{let{id:e}=t;return e})),resultCbs:t.map((t=>{let{resultCb:e}=t;return e})),rejects:t.map((t=>{let{reject:e}=t;return e})),data:t[0].data,opts:(e=t.map((t=>{let{opts:e}=t;return e})),Object.assign(Object.assign({},e[0]),{props:e.reduce(((t,e)=>{var i,n,r,s,a,l;for(const c of e.props){null!=c.id&&(null!==(i=c.ids)&&void 0!==i||(c.ids=[]),null===(n=c.scopes)||void 0===n||n.forEach((t=>{var e;return null===(e=c.ids)||void 0===e?void 0:e.push([t,c.id])})));const e=t.find(o(c));e?(null!==(r=e.scopes)&&void 0!==r||(e.scopes=[]),e.scopes.push(...null!==(s=c.scopes)&&void 0!==s?s:[]),"key"!==e.type&&"value"!==e.type||null===(a=e.ids)||void 0===a||a.push(...null!==(l=c.ids)&&void 0!==l?l:[])):t.push(c)}return t}),[])}))};var e}))}splitResult(t,e,i,o){for(let n=0;n<i.length;n++){const r=i[n];(0,o[n])({dataModel:t,processedData:Object.assign(Object.assign({},e),{data:e.data.filter((t=>{let{validScopes:e}=t;return null==e||e.some((t=>t===r))}))})})}}}class tp{constructor(t){this.getSeries=t}}class ep{constructor(){this.listeners=new Sd}addListener(t,e,i){return this.listeners.addListener(t,e,i)}removeListener(t){this.listeners.removeListener(t)}}const ip=[!0,"animation"];class op extends ep{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new np,this.debug=As.create(...ip),this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i,{disableInteractions:o=!0,immutable:n=!0}=t,r=ls(t,["disableInteractions","immutable"]);const{batch:s}=this;try{if(null!=r.id&&s.controllers.has(r.id)){if(!n)return s.controllers.get(r.id).reset(r);s.controllers.get(r.id).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${r.id}`),this.batch.skip()}}catch(c){return void this.failsafeOnError(c)}const a=null!==(e=r.id)&&void 0!==e?e:Math.random().toString(),l=this.isSkipped();return l&&this.debug("AnimationManager - skipping animation"),new Ul(Object.assign(Object.assign({},r),{id:a,skip:l,autoplay:!!this.isPlaying&&r.autoplay,duration:null!==(i=r.duration)&&void 0!==i?i:this.defaultDuration,onPlay:t=>{var e;s.controllers.set(a,t),this.requestAnimation(),o&&this.interactionManager.pause("animation"),null===(e=r.onPlay)||void 0===e||e.call(t,t)},onStop:t=>{var e;s.controllers.delete(a),o&&this.interactionManager.resume("animation"),null===(e=r.onStop)||void 0===e||e.call(t,t)}}))}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");for(const e of this.batch.controllers.values())try{e.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");for(const e of this.batch.controllers.values())try{e.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()");for(const e of this.batch.controllers.values())try{e.stop()}catch(t){this.failsafeOnError(t,!1)}}stopByAnimationId(t){var e;try{null!=t&&this.batch.controllers.has(t)&&(null===(e=this.batch.controllers.get(t))||void 0===e||e.stop())}catch(i){return void this.failsafeOnError(i)}}stopByAnimationGroupId(t){for(const e of this.batch.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.skipAnimations=t}isSkipped(){return this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){As.check(...ip)&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}requestAnimation(){if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>us(this,void 0,void 0,(function*(){const o=()=>us(this,void 0,void 0,(function*(){const e=i-(null!==t&&void 0!==t?t:i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.controllers.size});for(const t of this.batch.controllers.values())try{t.update(e)}catch(o){this.failsafeOnError(o)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:e})}));this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(o):yield this.chartUpdateMutex.acquire(o),this.batch.isActive()&&this.scheduleAnimationFrame(e)}));this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Es.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new np,!0===t&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.controllers.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1)}}class np{constructor(){this.controllers=new Map,this.skipAnimations=!1}isActive(){return this.controllers.size>0}skip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===this.skipAnimations&&!0===t){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}isSkipped(){return this.skipAnimations}destroy(){}}class rp extends ep{legendItemClick(t,e,i,o){const n={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:o};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,o,n){const r={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:n,numVisibleItems:o};this.listeners.dispatch("legend-item-double-click",r)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}}class sp{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach((e=>{let[i,{style:o}]=e;return t=o})),this.element.style.cursor=t}getCursor(){return this.element.style.cursor}}class ap extends ep{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(t,e){this.highlightStates.delete(t),null!=e&&this.highlightStates.set(t,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.delete(t),null!=e&&this.pickedStates.set(t,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:t}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,t)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:t})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(t,e){return t===e||(null===t||void 0===t?void 0:t.series)===(null===e||void 0===e?void 0:e.series)&&(null===t||void 0===t?void 0:t.itemId)===(null===e||void 0===e?void 0:e.itemId)&&(null===t||void 0===t?void 0:t.datum)===(null===e||void 0===e?void 0:e.datum)}}const lp=["pagehide","mousemove","mouseup"],cp=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"];class dp extends ep{constructor(t,e,i){super(),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.pausers={animation:0,"context-menu":0},this.rootElement=e.body,this.element=t,this.window=i;for(const o of cp)o.startsWith("touch")?t.addEventListener(o,this.eventHandler,{passive:!0}):"wheel"===o?t.addEventListener(o,this.eventHandler,{passive:!1}):t.addEventListener(o,this.eventHandler);for(const o of lp)this.window.addEventListener(o,this.eventHandler);dp.interactionDocuments.includes(e)||(tu(e,"\n.ag-chart-wrapper {\n    touch-action: none;\n}\n"),dp.interactionDocuments.push(e))}destroy(){for(const t of lp)this.window.removeEventListener(t,this.eventHandler);for(const t of cp)this.element.removeEventListener(t,this.eventHandler)}resume(t){this.pausers[t]--}pause(t){this.pausers[t]++}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch((t=>Es.errorOnce(t)))}dispatchEvent(t,e){return us(this,void 0,void 0,(function*(){const i=this.calculateCoordinates(t);if(null==i)return;const o=Object.entries(this.pausers).filter((t=>{let[,e]=t;return e>0})).map((t=>{let[e]=t;return e}));for(const n of e)this.listeners.dispatchWrapHandlers(n,((t,e,i)=>{var n;o.length>0&&!(null===(n=null===e||void 0===e?void 0:e.bypassPause)||void 0===n?void 0:n.some((t=>o.includes(t))))||i.consumed||t(i)}),this.buildEvent(Object.assign({type:n,event:t,pauses:o},i)))}))}decideInteractionEventTypes(t){const e="drag-start";switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,[e];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,[e];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const i=t instanceof MouseEvent&&1===(1&t.buttons);return this.mouseDown!==i?(this.mouseDown=i,[i?e:"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:e,clientY:i,pageX:o,pageY:n,offsetX:r,offsetY:s}=t;return this.fixOffsets(t,{clientX:e,clientY:i,pageX:o,pageY:n,offsetX:r,offsetY:s})}if("undefined"!==typeof TouchEvent&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:o,clientY:n,pageX:r,pageY:s}=i;return Object.assign(Object.assign({},dp.NULL_COORDS),{clientX:o,clientY:n,pageX:r,pageY:s})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return dp.NULL_COORDS}}fixOffsets(t,e){const i=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const o=i(this.dragStartElement),n=i(t.target);e.offsetX-=o.x-n.x,e.offsetY-=o.y-n.y}return e}buildEvent(t){const{type:e,event:i,clientX:o,clientY:n,pauses:r}=t;let{offsetX:s,offsetY:a,pageX:l,pageY:c}=t;if(!$c(s)||!$c(a)){const t=this.element.getBoundingClientRect();s=o-t.left,a=n-t.top}if(!$c(l)||!$c(c)){const t=this.rootElement.getBoundingClientRect();l=o-t.left,c=n-t.top}const d={type:e,offsetX:s,offsetY:a,pageX:l,pageY:c,sourceEvent:i,consumed:!1,pauses:r,consume(){d.consumed=!0}};return d}}dp.interactionDocuments=[],dp.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class up{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t,this.destroyFns.push(e.addListener("hover",(t=>this.checkExclusiveRects(t))))}getRange(){return this.tooltip.range}updateTooltip(t,e,i){var o;null==i&&(i=null===(o=this.states[t])||void 0===o?void 0:o.content),this.states[t]={content:i,meta:e},this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,o]of Object.entries(this.exclusiveAreas))if(o.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,o;if(e.reverse(),e.slice(0,1).forEach((t=>{var e;const{content:n,meta:r}=null!==(e=this.states[t])&&void 0!==e?e:{};i=n,o=r})),void 0===o||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(o,void 0,t)}else this.tooltip.show(o,i);this.appliedState={content:i,meta:o}}static makeTooltipMeta(t,e,i,o){var n,r,s,a;const{pageX:l,pageY:c,offsetX:d,offsetY:u}=t,h={xOffset:i.series.tooltip.position.xOffset,yOffset:i.series.tooltip.position.yOffset},p={pageX:l,pageY:c,offsetX:d,offsetY:u,event:t,showArrow:i.series.tooltip.showArrow,position:h},f=null!==(r=null===(n=i.yBar)||void 0===n?void 0:n.upperPoint)&&void 0!==r?r:i.midPoint;if("node"===i.series.tooltip.position.type&&f){const{x:t,y:n}=f,r=i.series.contentGroup.inverseTransformPoint(t,n),s=e.element.getBoundingClientRect();return Object.assign(Object.assign({},p),{pageX:Math.round(s.left+o.scrollX+r.x),pageY:Math.round(s.top+o.scrollY+r.y),offsetX:Math.round(r.x),offsetY:Math.round(r.y)})}return p.enableInteraction=null!==(a=null===(s=i.series.tooltip.interaction)||void 0===s?void 0:s.enabled)&&void 0!==a&&a,p}}class hp extends ep{constructor(){super(...arguments),this.axes={}}updateAxes(t){var e;const i=new Set(Object.keys(this.axes));t.forEach((t=>{var e,o,n;i.delete(t.id),null!==(e=(o=this.axes)[n=t.id])&&void 0!==e||(o[n]=new pp(t))})),i.forEach((t=>{delete this.axes[t]})),(null===(e=this.initialZoom)||void 0===e?void 0:e.newZoom)&&this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0}updateZoom(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach((i=>{i.updateZoom(t,null===e||void 0===e?void 0:e[i.getDirection()])})),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}}updateAxisZoom(t,e,i){var o;null===(o=this.axes[e])||void 0===o||o.updateZoom(t,i),this.applyStates()}getZoom(){let t,e;if(Object.values(this.axes).forEach((i=>{i.getDirection()===ol.X?t=i.getZoom():i.getDirection()===ol.Y&&(e=i.getZoom())})),t||e)return{x:t,y:e}}getAxisZoom(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()}getAxisZooms(){const t={};for(const[e,i]of Object.entries(this.axes))t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyStates(){if(!Object.values(this.axes).map((t=>t.applyStates())).some(Boolean))return;const t=this.getZoom(),e={};for(const[i,o]of Object.entries(this.axes))e[i]=o.getZoom();this.listeners.dispatch("zoom-change",Object.assign(Object.assign({type:"zoom-change"},null!==t&&void 0!==t?t:{}),{axes:e}))}}class pp{constructor(t){this.states={},this.axis=t;const[e=0,i=1]=t.visibleRange;this.currentZoom={min:e,max:i},this.states.__initial__=this.currentZoom}getDirection(){return this.axis.direction}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e))}getZoom(){return this.currentZoom}applyStates(){var t,e;const i=this.currentZoom,o=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Object.assign({},this.states[o]),(null===i||void 0===i?void 0:i.min)!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||(null===i||void 0===i?void 0:i.max)!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)}}class fp extends Sd{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error(`AG Charts - unsupported listener type: ${t}`)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce(((t,e)=>{try{return e.handler(t)}catch(i){return Es.errorOnce(i),t}}),e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}}function gp(t){let{orientation:e,bboxes:i,maxHeight:o,maxWidth:n,itemPaddingY:r=0,itemPaddingX:s=0,forceResult:a=!1}=t;const l="horizontal"===e,c={max:l?n:o,fn:l?t=>t.width:t=>t.height,padding:l?s:r},d={max:l?o:n,fn:l?t=>t.height:t=>t.width,padding:l?r:s};let u=0;const h=[];for(;u<i.length;){const t=vp(i.slice(u),u,c,d,a);if(!t)return;u+=t.processedBBoxCount,h.push(t.pageIndices)}return function(t,e,i,o,n){let r=0,s=0;const a=t.map((t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach(((t,i)=>{t.forEach(((t,o)=>{e[o][i]=t}))})),e}(t));let a=0;const l=t.map((t=>{const e=t.map((t=>(a=Math.max(t,a),i[t])));let r=0,s=0;return e.forEach((t=>{r+=t.height+o,s=Math.max(s,t.width+n)})),{indices:t,bboxes:e,columnHeight:Math.ceil(r),columnWidth:Math.ceil(s)}}));let c=0,d=0;return l.forEach((t=>{c+=t.columnWidth,d=Math.max(d,t.columnHeight)})),r=Math.max(c,r),s=Math.max(d,s),{columns:l,startIndex:t[0][0],endIndex:a,pageWidth:c,pageHeight:d}}));return{pages:a,maxPageWidth:r,maxPageHeight:s}}(h,e,i,r,s)}function vp(t,e,i,o,n){let r=function(t,e){const i=t.length;let o=0;for(let n=0;n<i;n++)if(o+=e.fn(t[n])+e.padding,o>e.max){return i/n<2?Math.ceil(i/2):n}return i}(t,i);if(r<1){if(!n)return;r=1}for(let s=r;s>=1;s--){const r=yp(t,e,s,i,o,n);if(null==r&&s<=1)return;if(null==r)continue;if("number"===typeof r){if(r<=1)return;s=r<s&&r>1?r:s;continue}return{processedBBoxCount:r.length*r[0].length,pageIndices:r}}}function yp(t,e,i,o,n,r){var s;const a=[];let l=0,c=0,d=[];const u=[];for(let h=0;h<t.length;h++){const p=(h+i)%i;0===p&&(l+=c,c=0,d.length>0&&a.push(d),d=[]);const f=o.fn(t[h])+o.padding;u[p]=Math.max(null!==(s=u[p])&&void 0!==s?s:0,f),c=Math.max(c,n.fn(t[h])+n.padding);const g=l+c,v=!r||a.length>0;if(g>n.max&&v){d=[];break}if(u.reduce(((t,e)=>t+e),0)>o.max&&!r)return u.length<i?u.length:void 0;d.push(h+e)}return d.length>0&&a.push(d),a.length>0?a:void 0}class mp extends gd{updatePath(){const t=this.size/4.2;super.applyPath(t,mp.moves)}}mp.className="Cross",mp.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class bp extends gd{updatePath(){const t=this.size/2;super.applyPath(t,bp.moves)}}bp.className="Diamond",bp.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class Sp extends gd{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:o}=this,n=i/4,r=this.y+n/2;e.clear(),e.arc(t-n,r-n,n,o(130),o(330)),e.arc(t+n,r-n,n,o(220),o(50)),e.lineTo(t,r+n),e.closePath()}}Sp.className="Heart";class xp extends gd{updatePath(){const t=this.size/3;super.applyPath(t,xp.moves)}}xp.className="Plus",xp.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class Cp extends gd{updatePath(){const{path:t,x:e,y:i}=this,o=this.size/2;t.clear(),t.moveTo(this.align(e-o),this.align(i-o)),t.lineTo(this.align(e+o),this.align(i-o)),t.lineTo(this.align(e+o),this.align(i+o)),t.lineTo(this.align(e-o),this.align(i+o)),t.closePath()}}Cp.className="Square";class wp extends gd{updatePath(){const t=1.1*this.size;super.applyPath(t,wp.moves)}}wp.className="Triangle",wp.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];const Ep={circle:vd,cross:mp,diamond:bp,heart:Sp,plus:xp,square:Cp,triangle:wp},Op=Object.keys(Ep);function Dp(t){return Op.includes(t)}function Ap(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cp;return Dp(t)?Ep[t]:"function"===typeof t?t:Cp}class Tp extends Cc{constructor(){super({name:"markerLabelGroup"}),this.label=new Ol,this._marker=new Cp,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=bl.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}Tp.className="MarkerLabel",cs([Pl("label"),ds("design:type",String)],Tp.prototype,"text",void 0),cs([Pl("label"),ds("design:type",String)],Tp.prototype,"fontStyle",void 0),cs([Pl("label"),ds("design:type",String)],Tp.prototype,"fontWeight",void 0),cs([Pl("label"),ds("design:type",Number)],Tp.prototype,"fontSize",void 0),cs([Pl("label"),ds("design:type",String)],Tp.prototype,"fontFamily",void 0),cs([Pl("label","fill"),ds("design:type",String)],Tp.prototype,"color",void 0),cs([Pl("marker","fill"),ds("design:type",String)],Tp.prototype,"markerFill",void 0),cs([Pl("marker","stroke"),ds("design:type",String)],Tp.prototype,"markerStroke",void 0),cs([Pl("marker","strokeWidth"),ds("design:type",Number)],Tp.prototype,"markerStrokeWidth",void 0),cs([Pl("marker","fillOpacity"),ds("design:type",Number)],Tp.prototype,"markerFillOpacity",void 0),cs([Pl("marker","strokeOpacity"),ds("design:type",Number)],Tp.prototype,"markerStrokeOpacity",void 0);class Mp{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}cs([ea(Ca),ds("design:type",String)],Mp.prototype,"color",void 0),cs([ea(Fa),ds("design:type",String)],Mp.prototype,"fontStyle",void 0),cs([ea(Ba),ds("design:type",String)],Mp.prototype,"fontWeight",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Mp.prototype,"fontSize",void 0),cs([ea(ga),ds("design:type",String)],Mp.prototype,"fontFamily",void 0);class kp{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}cs([ea(Aa(0)),ds("design:type",Object)],kp.prototype,"size",void 0),cs([ea(wa),ds("design:type",String)],kp.prototype,"fill",void 0),cs([ea(Ta(0,1)),ds("design:type",Number)],kp.prototype,"fillOpacity",void 0),cs([ea(wa),ds("design:type",String)],kp.prototype,"stroke",void 0),cs([ea(Aa(0)),ds("design:type",Number)],kp.prototype,"strokeWidth",void 0),cs([ea(Aa(0,1)),ds("design:type",Number)],kp.prototype,"strokeOpacity",void 0);class Rp{constructor(t){this.parent=t,this.shape=wp,this.size=15,this.padding=8}}cs([Nl({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}}),ds("design:type",Object)],Rp.prototype,"shape",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Rp.prototype,"size",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Rp.prototype,"padding",void 0);class Pp{constructor(t,e,i,o){this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=i,this.cursorManager=o,this.id=cl(this),this.group=new Cc({name:"pagination"}),this.labelNode=new Ol,this.marker=new Rp(this),this.activeStyle=new kp,this.inactiveStyle=new kp,this.highlightStyle=new kp,this.label=new Mp,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new wp,this._previousButton=new wp;const{labelNode:n}=this;n.textBaseline="middle",n.fontSize=12,n.fontFamily="Verdana, sans-serif",n.fill="black",n.y=bl.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,n]),this.interactionManager.addListener("click",(t=>this.onPaginationClick(t))),this.interactionManager.addListener("hover",(t=>this.onPaginationMouseMove(t))),this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){if(this._orientation=t,"horizontal"===t)this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:o,fontStyle:n,fontWeight:r,fontSize:s,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=o,i.fontStyle=n,i.fontWeight=r,i.fontSize=s,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:o,activeStyle:n,inactiveStyle:r,highlightStyle:s,highlightActive:a}=this,l=(t,e)=>e?r:t===a?s:n;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",o))}updateMarker(t,e){var i;const{size:o}=this.marker;t.size=o,t.fill=e.fill,t.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,o=t===e-1,n=0===t;this.nextButtonDisabled=o||i,this.previousButtonDisabled=n||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(Kh.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=Ap(this.marker.shape||wp);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(Kh.SCENE_RENDER)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}}Pp.className="Pagination";const Np=["horizontal","vertical"],Lp=oa(((t,e)=>na(t,e,(t=>Np.includes(t)))),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class _p{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}cs([ea(Ta(0)),ds("design:type",Number)],_p.prototype,"maxLength",void 0),cs([ea(Ca),ds("design:type",String)],_p.prototype,"color",void 0),cs([ea(Fa),ds("design:type",String)],_p.prototype,"fontStyle",void 0),cs([ea(Ba),ds("design:type",String)],_p.prototype,"fontWeight",void 0),cs([ea(Aa(0)),ds("design:type",Number)],_p.prototype,"fontSize",void 0),cs([ea(ga),ds("design:type",String)],_p.prototype,"fontFamily",void 0),cs([ea(ha),ds("design:type",Function)],_p.prototype,"formatter",void 0);class Ip{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=void 0}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}cs([ea(Aa(0)),ds("design:type",Object)],Ip.prototype,"size",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Ip.prototype,"padding",void 0),cs([ea(Ta(0)),ds("design:type",Object)],Ip.prototype,"strokeWidth",void 0);class Fp{constructor(){this.marker=new Ip,this.label=new _p,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}cs([ea(Ta(0)),ds("design:type",Number)],Fp.prototype,"maxWidth",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Fp.prototype,"paddingX",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Fp.prototype,"paddingY",void 0),cs([ea(pa),ds("design:type",Boolean)],Fp.prototype,"toggleSeriesVisible",void 0);class Gp{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}cs([ea(ha),ds("design:type",Function)],Gp.prototype,"legendItemClick",void 0);class Bp{set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}constructor(t){this.ctx=t,this.id=cl(this),this.group=new Cc({name:"legend",layer:!0,zIndex:fd.LEGEND_ZINDEX}),this.itemSelection=wc.select(this.group,Tp),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new Fp,this.listeners=new Gp,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Pp((e=>t.updateService.update(e)),(t=>this.updatePageNumber(t)),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("click",(t=>this.checkLegendClick(t)),e),t.interactionManager.addListener("dblclick",(t=>this.checkLegendDoubleClick(t)),e),t.interactionManager.addListener("hover",(t=>this.handleLegendMouseMove(t))),t.layoutService.addListener("start-layout",(t=>this.positionLegend(t.shrinkRect))),(()=>this.detachLegend()))}destroy(){this.destroyFns.forEach((t=>t()))}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,nl.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":bl.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:o,label:n,maxWidth:r,marker:{size:s,padding:a,shape:l},label:{maxLength:c=1/0,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p}}=this.item,f=[...this.data];this.reverseOrder&&f.reverse(),this.itemSelection.update(f);const g=[],v=Dl(n),y=null!==r&&void 0!==r?r:.8*t,m=s+a+i;if(this.itemSelection.each(((t,e)=>{var i;const o=Ap(null!==l&&void 0!==l?l:e.marker.shape);t.marker&&t.marker instanceof o||(t.marker=new o),t.markerSize=s,t.spacing=a,t.fontStyle=d,t.fontWeight=u,t.fontSize=h,t.fontFamily=p;const n=null!==(i=e.itemId)&&void 0!==i?i:e.id,r=this.getItemLabel(e),f=(null!==r&&void 0!==r?r:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(f,c,y,m,v,n),g.push(t.computeBBox())})),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const b=this.size,S=this.oldSize;b[0]=t,b[1]=e,b[0]===S[0]&&b[1]===S[1]||(S[0]=b[0],S[1]=b[1]);const{pages:x,maxPageHeight:C,maxPageWidth:w}=this.updatePagination(g,t,e);this.pages=x,this.maxPageSize=[w-i,C-o];const E=this.pagination.currentPage,O=this.pages[E];this.pages.length<1||!O?this.visible=!1:(this.visible=!0,this.updatePositions(E),this.update())}truncate(t,e,i,o,n,r){const s=t.split("");let a=!1;t.length>e&&(t=`${t.substring(0,e)}`,a=!0);if(Math.floor(o+bl.getTextSize(t,n).width)>i){let e="";const r=this.getCharacterWidths(n);let l=o+r["..."];for(const t of s){if(r[t]||(r[t]=bl.getTextSize(t,n).width),l+=r[t],l>i)break;e+=t}t=e,a=!0}return a?(t+="...",this.truncatedItems.add(r)):this.truncatedItems.delete(r),t}updatePagination(t,e,i){const o=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=o,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:r,maxPageHeight:s,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),d=r.findIndex((t=>t.endIndex>=n));this.pagination.currentPage=Math.min(Math.max(d,0),r.length-1);const{paddingX:u,paddingY:h}=this.item,p=a-u,f=s-h;let g=0,v=-l.y-this.item.marker.size/2;return c?v+=f+8:(g+=-l.x+p+8,v+=(f-l.height)/2),this.pagination.translationX=g,this.pagination.translationY=v,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:s,maxPageWidth:a,pages:r}}calculatePagination(t,e,i){var o,n,r;const{paddingX:s,paddingY:a}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position);let d=this.pagination.computeBBox(),u=new ul(0,0,0,0),h=[],p=0,f=0,g=0;const v=t=>{const{width:e,height:i}=t;return e===d.width&&i===d.height},y=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(g++>10){Es.warn("unable to find stable legend layout.");break}d=u;const v=e-(c?0:d.width),m=gp({orientation:l,bboxes:t,maxHeight:i-(c?d.height:0),maxWidth:v,itemPaddingY:a,itemPaddingX:s,forceResult:y});h=null!==(o=null===m||void 0===m?void 0:m.pages)&&void 0!==o?o:[],p=null!==(n=null===m||void 0===m?void 0:m.maxPageWidth)&&void 0!==n?n:0,f=null!==(r=null===m||void 0===m?void 0:m.maxPageHeight)&&void 0!==r?r:0;const b=h.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!v(u));return{maxPageWidth:p,maxPageHeight:f,pages:h,paginationBBox:d,paginationVertical:c}}updatePositions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{item:{paddingY:e},itemSelection:i,pages:o}=this;if(o.length<1||!o[t])return;const{columns:n,startIndex:r,endIndex:s}=o[t];let a=0,l=0;const c=n.length,d=n[0].indices.length,u="horizontal"===this.getOrientation(),h=n[0].bboxes[0].height+e,p=[];i.each(((t,e,i)=>{var o,f;if(i<r||i>s)return void(t.visible=!1);const g=i-r;let v=0,y=0;u?(v=g%c,y=Math.floor(g/c)):(v=Math.floor(g/d),y=g%d),t.visible=!0;const m=n[v];m&&(l=h*y,a=null!==(o=p[y])&&void 0!==o?o:0,p[y]=(null!==(f=p[y])&&void 0!==f?f:0)+m.columnWidth,t.translationX=Math.floor(a),t.translationY=Math.floor(l))}))}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:o}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=o:this.paginationTrackingIndex=Math.floor((i+o)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(Kh.SCENE_RENDER)}update(){const{label:{color:t},marker:e}=this.item;this.itemSelection.each(((i,o)=>{var n;const r=o.marker;i.markerFill=r.fill,i.markerStroke=r.stroke,i.markerStrokeWidth=null!==(n=e.strokeWidth)&&void 0!==n?n:Math.min(2,r.strokeWidth),i.markerFillOpacity=r.fillOpacity,i.markerStrokeOpacity=r.strokeOpacity,i.opacity=o.enabled?1:.5,i.color=t}))}getDatumForPoint(t,e){const i=[],o={dist:1/0,datum:void 0};for(const n of this.group.children){if(!n.visible)continue;if(!(n instanceof Tp))continue;const r=n.computeBBox();if(r.grow(this.item.paddingX/2,"horizontal"),r.grow(this.item.paddingY/2,"vertical"),r.containsPoint(t,e))return n.datum;const s=t-r.x-this.item.paddingX/2,a=e-r.y-this.item.paddingY/2,l=Math.pow(s,2)+Math.pow(a,2);s>=0&&a>=0&&l<o.dist&&(o.dist=l,o.datum=n.datum),i.push(r)}if(ul.merge(i).containsPoint(t,e))return o.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:o},item:{toggleSeriesVisible:n}}=this,{offsetX:r,offsetY:s}=t,a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,s),c=this.getDatumForPoint(r,s);if(!l||!c)return;const{id:d,itemId:u,enabled:h}=c,p=i.getSeries().find((t=>t.id===d));if(!p)return;t.consume();let f=h;n&&(f=!h,this.ctx.chartEventManager.legendItemClick(p,u,f,c.legendItemName)),f?o.updateHighlight(this.id,{series:p,itemId:u,datum:void 0}):o.updateHighlight(this.id),this.ctx.updateService.update(Kh.PROCESS_DATA,{forceNodeDataRefresh:!0}),null===e||void 0===e||e({type:"click",enabled:f,itemId:u,seriesId:p.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:o},item:{toggleSeriesVisible:n}}=this,{offsetX:r,offsetY:s}=t;if("integrated"===this.ctx.mode)return;const a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,s),c=this.getDatumForPoint(r,s);if(!l||!c)return;const{id:d,itemId:u,seriesId:h}=c,p=o.getSeries(),f=p.find((t=>t.id===d));if(f){if(t.consume(),n){const t={},i=p.flatMap((t=>t.getLegendData("category")));i.forEach((e=>{var i,o;null!==(i=t[o=e.seriesId])&&void 0!==i||(t[o]=0),e.enabled&&t[e.seriesId]++}));const o=i.find((t=>t.itemId===u&&t.seriesId===h));this.ctx.chartEventManager.legendItemDoubleClick(f,u,null!==(e=null===o||void 0===o?void 0:o.enabled)&&void 0!==e&&e,t,null===o||void 0===o?void 0:o.legendItemName)}this.ctx.updateService.update(Kh.PROCESS_DATA,{forceNodeDataRefresh:!0}),null===i||void 0===i||i({type:"dblclick",enabled:!0,itemId:u,seriesId:f.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:o},listeners:n}=this;if(!i)return;const r=this.computeBBox(),{pageX:s,pageY:a,offsetX:l,offsetY:c}=t,d=this.group.visible&&r.containsPoint(l,c);if(!d)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const u=this.getDatumForPoint(l,c);if(!(d&&void 0!==u))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const h=u?this.ctx.dataService.getSeries().find((t=>t.id===(null===u||void 0===u?void 0:u.id))):void 0;u&&this.truncatedItems.has(null!==(e=u.itemId)&&void 0!==e?e:u.id)?this.ctx.tooltipManager.updateTooltip(this.id,{pageX:s,pageY:a,offsetX:l,offsetY:c,event:t,showArrow:!1},nu({content:this.getItemLabel(u)})):this.ctx.tooltipManager.removeTooltip(this.id),(o||null!=n.legendItemClick||null!=n.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null===u||void 0===u?void 0:u.enabled)&&h?this.ctx.highlightManager.updateHighlight(this.id,{series:h,itemId:null===u||void 0===u?void 0:u.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,o]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,o);const n=this.computePagedBBox(),r=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-n.height;default:return t.width-n.width}};if(this.visible){let i,o;switch(this.position){case"top":case"bottom":i=(t.width-n.width)/2,o=r(),e.shrink(n.height,this.position);break;default:i=r(),o=(t.height-n.height)/2,e.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+t.x+i),this.group.translationY=Math.floor(-n.y+t.y+o)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=n.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,o=e/i;let n,r;switch(this.position){case"top":case"bottom":const t=o<1?Math.min(.5,1/o*.2):.2;n=this.maxWidth?Math.min(this.maxWidth,e):e,r=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;default:const s=o>1?Math.min(.5,.25*o):.25;n=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*s),r=this.maxHeight?Math.min(this.maxHeight,i):i}return[n,r]}}Bp.className="Legend",cs([ea(pa),ds("design:type",Object)],Bp.prototype,"_enabled",void 0),cs([ea(Ya),ds("design:type",String)],Bp.prototype,"position",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Bp.prototype,"maxWidth",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Bp.prototype,"maxHeight",void 0),cs([ea(fa),ds("design:type",Boolean)],Bp.prototype,"reverseOrder",void 0),cs([ea(Lp),ds("design:type",String)],Bp.prototype,"orientation",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Bp.prototype,"spacing",void 0);class Vp{constructor(t,e,i){this.text=void 0,this.className=t,this.parentElement=e,this.document=i}show(t){var e,i;let o=this.element;if(o||(o=this.document.createElement("div"),o.className=this.className,this.element=o),o.style.position="absolute",o.style.left=`${t.x}px`,o.style.top=`${t.y}px`,o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,this.renderer)o.innerHTML=this.renderer();else{const t=this.document.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",o.append(t)}null===(i=this.parentElement)||void 0===i||i.append(o)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}cs([ea(ha),ds("design:type",Function)],Vp.prototype,"renderer",void 0),cs([ea(va),ds("design:type",String)],Vp.prototype,"text",void 0);class jp{constructor(t){this.noData=new Vp("ag-chart-no-data-overlay",t,t.ownerDocument)}}class Wp{constructor(t){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=t}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,o,n;const{id:r,type:s,rootGroup:a,highlightGroup:l,annotationGroup:c,seriesGrouping:d}=t,{groupIndex:u=r}=null!==d&&void 0!==d?d:{};if(null!=this.series[r])throw new Error(`AG Charts - series already has an allocated layer: ${this.series[r]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!==(e=(o=this.groups)[s])&&void 0!==e||(o[s]={});const h=this.lookupIdx(u);let p=this.groups[s][h];return p||(p=null!==(i=(n=this.groups[s])[h])&&void 0!==i?i:n[h]={seriesIds:[],group:this.rootGroup.appendChild(new Cc({name:`${s}-content`,layer:!0,zIndex:fd.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new Cc({name:`${s}-highlight`,layer:!0,zIndex:fd.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new Cc({name:`${s}-annotation`,layer:!0,zIndex:fd.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[r]={layerState:p,seriesConfig:t},p.seriesIds.push(r),p.group.appendChild(a),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(t){var e,i;const{id:o,seriesGrouping:n,type:r,rootGroup:s,highlightGroup:a,annotationGroup:l,oldGrouping:c}=t,{groupIndex:d=o}=null!==n&&void 0!==n?n:{};(null===(i=null===(e=this.groups[r])||void 0===e?void 0:e[d])||void 0===i?void 0:i.seriesIds.includes(o))||(null!=this.series[o]&&this.releaseGroup({id:o,seriesGrouping:c,type:r,rootGroup:s,highlightGroup:a,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,o,n,r;const{id:s,seriesGrouping:a,rootGroup:l,highlightGroup:c,annotationGroup:d,type:u}=t,{groupIndex:h=s}=null!==a&&void 0!==a?a:{};if(null==this.series[s])throw new Error(`AG Charts - series doesn't have an allocated layer: ${s}`);const p=this.lookupIdx(h),f=null!==(i=null===(e=this.groups[u])||void 0===e?void 0:e[p])&&void 0!==i?i:null===(o=this.series[s])||void 0===o?void 0:o.layerState;if(f&&(f.seriesIds=f.seriesIds.filter((t=>t!==s)),f.group.removeChild(l),f.highlight.removeChild(c),f.annotation.removeChild(d)),0===(null===f||void 0===f?void 0:f.seriesIds.length))this.rootGroup.removeChild(f.group),this.rootGroup.removeChild(f.highlight),this.rootGroup.removeChild(f.annotation),delete this.groups[u][p],delete this.groups[u][s];else if((null===f||void 0===f?void 0:f.seriesIds.length)>0){const t=null===(r=this.series[null===(n=null===f||void 0===f?void 0:f.seriesIds)||void 0===n?void 0:n[0]])||void 0===r?void 0:r.seriesConfig;f.group.zIndexSubOrder=null===t||void 0===t?void 0:t.getGroupZIndexSubOrder("data"),f.highlight.zIndexSubOrder=null===t||void 0===t?void 0:t.getGroupZIndexSubOrder("highlight"),f.annotation.zIndexSubOrder=null===t||void 0===t?void 0:t.getGroupZIndexSubOrder("annotation")}delete this.series[s]}lookupIdx(t){return"normal"===this.mode?t:"string"!==typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(t/this.expectedSeriesCount,1),0)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}}class zp{constructor(){this.groups={}}registerSeries(t){let{id:e,seriesGrouping:i,visible:o,type:n}=t;var r,s;i&&(null!==(r=(s=this.groups)[n])&&void 0!==r||(s[n]={}),this.groups[n][e]={grouping:i,visible:o})}deregisterSeries(t){let{id:e,type:i}=t;this.groups[i]&&delete this.groups[i][e],this.groups[i]&&0===Object.keys(this.groups[i]).length&&delete this.groups[i]}getVisiblePeerGroupIndex(t){let{type:e,seriesGrouping:i}=t;var o;if(!i)return{visibleGroupCount:1,index:0};const n=[...Object.entries(null!==(o=this.groups[e])&&void 0!==o?o:{}).filter((t=>{let[e,i]=t;return i.visible})).reduce(((t,e)=>{let[i,o]=e;return o.visible&&t.add(o.grouping.groupIndex),t}),new Set).values()];return n.sort(((t,e)=>t-e)),{visibleGroupCount:n.length,index:n.indexOf(i.groupIndex)}}}class Hp{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",(t=>this.layoutComplete(t))),this.layoutService.addListener("start-layout",(t=>this.positionPadding(t.shrinkRect))),this.layoutService.addListener("start-layout",(t=>this.positionCaptions(t.shrinkRect))))}destroy(){this.destroyFns.forEach((t=>t()))}layoutComplete(t){let{clipSeries:e,series:{paddedRect:i}}=t;const{seriesArea:o,seriesRoot:n}=this.chartLike;o.clip||e?n.setClipRectInGroupCoordinateSpace(i):n.setClipRectInGroupCoordinateSpace()}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i,o,n;const{title:r,subtitle:s,footnote:a}=this.chartLike,l=t.clone(),c=e=>{var i;const o=t.height/10,n=null!==(i=e.lineHeight)&&void 0!==i?i:e.fontSize*Ol.defaultLineHeightRatio,r=t.width,s=Math.max(n,o);e.computeTextWrap(r,s)},d=(t,e)=>{const i=l.y;t.node.x=l.x+l.width/2,t.node.y=i,t.node.textBaseline="top",c(t);const o=t.node.computeBBox(),n=Math.ceil(o.y-i+o.height+e);l.shrink(n,"top")};if(s&&(s.node.visible=null!==(e=s.enabled)&&void 0!==e&&e),r&&(r.node.visible=r.enabled,r.node.visible)){const t=(null===s||void 0===s?void 0:s.node.visible)?Ll.SMALL_PADDING:Ll.LARGE_PADDING;d(r,null!==(i=r.spacing)&&void 0!==i?i:t)}return s&&s.node.visible&&d(s,null!==(o=s.spacing)&&void 0!==o?o:0),a&&(a.node.visible=a.enabled,a.node.visible&&((t,e)=>{const i=l.y+l.height;t.node.x=l.x+l.width/2,t.node.y=i,t.node.textBaseline="bottom",c(t);const o=t.node.computeBBox(),n=Math.ceil(i-o.y+e);l.shrink(n,"bottom")})(a,null!==(n=a.spacing)&&void 0!==n?n:0)),{shrinkRect:l}}}class Up extends Sd{constructor(t){super(),this.updateCallback=t}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kh.FULL,{forceNodeDataRefresh:e=!1,skipAnimations:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateCallback(t,{forceNodeDataRefresh:e,skipAnimations:i})}dispatchUpdateComplete(t){const e={type:"update-complete",minRect:t};this.dispatch("update-complete",e)}}function Kp(t){let e,o;if(null!=t.window)e=t.window;else if("undefined"!==typeof window)e=window;else{if("undefined"===typeof i.g)throw new Error("AG Charts - unable to resolve global window");e=i.g.window}if(null!=t.document)o=t.document;else if("undefined"!==typeof document)o=document;else{if("undefined"===typeof i.g)throw new Error("AG Charts - unable to resolve global document");o=i.g.document}return{document:o,window:e,overrideDevicePixelRatio:t.overrideDevicePixelRatio,sceneMode:t.sceneMode}}class Yp{constructor(){this.clip=void 0,this.padding=new th(0)}}cs([ea(fa),ds("design:type",Boolean)],Yp.prototype,"clip",void 0);class Xp extends xd{getOptions(){var t;const{queuedUserOptions:e}=this;return Fs([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}constructor(t,e){var i,o;super(),i=this,this.id=cl(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new Cc({name:`${this.id}-Series-root`}),this.debug=As.create(),this.extraDebugStats={},this.container=void 0,this.data=[],this._firstAutoSize=!0,this.padding=new th(20),this.seriesArea=new Yp,this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this._destroyFns=[],this.modules={},this.legendModules={},this.processors=[],this.legends=new Map,this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateType=Kh.NONE,this._performUpdateSkipAnimations=!1,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new Wh,this.updateRequestors={},this.performUpdateTrigger=zh((function(t){return setTimeout(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}),(t=>{let{count:e}=t;return us(this,void 0,void 0,(function*(){this._destroyed||this.updateMutex.acquire((()=>us(this,void 0,void 0,(function*(){try{yield this.performUpdate(e)}catch(t){this._lastPerformUpdateError=t,Es.error("update error",t)}}))))}))})),this._axes=[],this._series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return zh(((t,e)=>requestAnimationFrame(t)),t)}((()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0})),this.onSeriesNodeClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)},this.specialOverrides=Kp(t);const{window:n,document:r}=this.specialOverrides,s=null===e||void 0===e?void 0:e.scene,a=null!==(o=null===e||void 0===e?void 0:e.element)&&void 0!==o?o:r.createElement("div"),l=null===e||void 0===e?void 0:e.container,c=new Cc({name:"root"});c.visible=!1,c.append(this.seriesRoot),this.axisGridGroup=new Cc({name:"Axes-Grids",layer:!0,zIndex:fd.AXIS_GRID_ZINDEX}),c.appendChild(this.axisGridGroup),this.axisGroup=new Cc({name:"Axes",layer:!0,zIndex:fd.AXIS_ZINDEX}),c.appendChild(this.axisGroup),this.element=a,a.classList.add("ag-chart-wrapper"),a.style.position="relative",this.scene=null!==s&&void 0!==s?s:new Bh(this.specialOverrides),this.scene.root=c,this.scene.container=a,this.autoSize=!0,this.chartEventManager=new rp,this.cursorManager=new sp(a),this.highlightManager=new ap,this.interactionManager=new dp(a,r,n),this.zoomManager=new hp,this.dataService=new tp((()=>this.series)),this.layoutService=new fp,this.updateService=new Up((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kh.FULL,{forceNodeDataRefresh:e,skipAnimations:o}=arguments.length>1?arguments[1]:void 0;return i.update(t,{forceNodeDataRefresh:e,skipAnimations:o})})),this.seriesStateManager=new zp,this.seriesLayerManager=new Wp(this.seriesRoot),this.callbackCache=new jh,this.animationManager=new op(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.processors=[new Hp(this,this.layoutService)],this.tooltip=new lu(this.scene.canvas.element,r,n,r.body),this.tooltipManager=new up(this.tooltip,this.interactionManager),this.overlays=new jp(this.element),this.highlight=new Uh,this.container=l,Hh.observe(this.element,(t=>this.rawResize(t))),this._destroyFns.push(this.interactionManager.addListener("click",(t=>this.onClick(t))),this.interactionManager.addListener("dblclick",(t=>this.onDoubleClick(t))),this.interactionManager.addListener("hover",(t=>this.onMouseMove(t))),this.interactionManager.addListener("leave",(t=>this.onLeave(t))),this.interactionManager.addListener("page-left",(()=>this.destroy())),this.interactionManager.addListener("wheel",(()=>this.disablePointer())),this.interactionManager.addListener("drag-start",(()=>this.disablePointer())),this.animationManager.addListener("animation-frame",(t=>{this.update(Kh.SCENE_RENDER)})),this.highlightManager.addListener("highlight-change",(t=>this.changeHighlightDatum(t))),this.zoomManager.addListener("zoom-change",(t=>this.update(Kh.PROCESS_DATA,{forceNodeDataRefresh:!0,skipAnimations:!0})))),this.legend=this.attachLegend("category",Bp)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e;null===(e=this.modules[t.optionsKey])||void 0===e||e.instance.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}attachLegend(t,e){const i=new e(this.getModuleContext());return this.legends.set(t,i),i.attachLegend(this.scene.root),i}addLegendModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=this.attachLegend(t.identifier,t.instanceConstructor);this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeLegendModule(t){this.legends.delete(t.identifier),this.removeModule(t)}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:o,highlightManager:n,interactionManager:r,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:d,seriesStateManager:u,seriesLayerManager:h,mode:p,callbackCache:f,specialOverrides:{window:g,document:v}}=this;return{window:g,document:v,scene:t,animationManager:e,chartEventManager:i,cursorManager:o,highlightManager:n,interactionManager:r,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:d,mode:p,seriesStateManager:u,seriesLayerManager:h,callbackCache:f}}destroy(t){if(this._destroyed)return;const e=null===t||void 0===t?void 0:t.keepTransferableResources;let i;this._performUpdateType=Kh.NONE,this._destroyFns.forEach((t=>t())),this.processors.forEach((t=>t.destroy())),this.tooltipManager.destroy(),this.tooltip.destroy(),Object.values(this.legends).forEach((t=>t.destroy())),this.legends.clear(),this.overlays.noData.hide(),Hh.unobserve(this.element);for(const o of Object.keys(this.modules))this.removeModule({optionsKey:o});return this.interactionManager.destroy(),this.animationManager.stop(),e?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach((t=>t.destroy())),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,i}disablePointer(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){this._pendingFactoryUpdatesCount++,this.updateMutex.acquire((()=>us(this,void 0,void 0,(function*(){yield t(),this._pendingFactoryUpdatesCount--}))))}get performUpdateType(){return this._performUpdateType}get lastPerformUpdateError(){return this._lastPerformUpdateError}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kh.FULL,e=arguments.length>1?arguments[1]:void 0;var i,o;const{forceNodeDataRefresh:n=!1,skipAnimations:r,seriesToUpdate:s=this.series,newAnimationBatch:a}=null!==e&&void 0!==e?e:{};n&&this.series.forEach((t=>t.markNodeDataDirty()));for(const l of s)this.seriesToUpdate.add(l);if(r&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),a&&(this.animationManager.isActive()?this._performUpdateSkipAnimations=!0:null!==(i=this._performUpdateSkipAnimations)&&void 0!==i||(this._performUpdateSkipAnimations=!1)),As.check(!0)){let e=null!==(o=(new Error).stack)&&void 0!==o?o:"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule(null===e||void 0===e?void 0:e.backOffMs))}performUpdate(t){var e;return us(this,void 0,void 0,(function*(){const{_performUpdateType:i,extraDebugStats:o}=this,n=[...this.seriesToUpdate];this._performUpdateType=Kh.NONE,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&i<Kh.SCENE_RENDER&&this.animationManager.startBatch(this._performUpdateSkipAnimations),this.debug("Chart.performUpdate() - start",Kh[i]);const r={start:performance.now()};switch(i){case Kh.FULL:case Kh.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),r["\ud83c\udfed"]=performance.now();case Kh.PERFORM_LAYOUT:if(this.checkUpdateShortcut(Kh.PERFORM_LAYOUT))break;if(!this.checkFirstAutoSize(n))break;yield this.processLayout(),r["\u2316"]=performance.now();case Kh.SERIES_UPDATE:if(this.checkUpdateShortcut(Kh.SERIES_UPDATE))break;const{seriesRect:t}=this,s=[...n].map((e=>e.update({seriesRect:t})));yield Promise.all(s),r["\ud83e\udd14"]=performance.now();case Kh.TOOLTIP_RECALCULATION:if(this.checkUpdateShortcut(Kh.TOOLTIP_RECALCULATION))break;const a=this.tooltipManager.getTooltipMeta(this.id),l="hover"===(null===(e=null===a||void 0===a?void 0:a.event)||void 0===e?void 0:e.type);i<=Kh.SERIES_UPDATE&&l&&this.handlePointer(a.event),r["\u2196"]=performance.now();case Kh.SCENE_RENDER:if(this.checkUpdateShortcut(Kh.SCENE_RENDER))break;o.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:r,extraDebugStats:o}),this.extraDebugStats={};case Kh.NONE:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=void 0,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const s=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(s-r.start))/100,count:t,performUpdateType:Kh[i]})}))}checkUpdateShortcut(t){return this.updateShortcutCount>3?(Es.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=10*(2^e);if(e<8)return this.update(Kh.PERFORM_LAYOUT,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(t){const e=new Set;this._axes.forEach((t=>{t.detachAxis(this.axisGroup,this.axisGridGroup),e.add(t)})),this._axes=t.filter((t=>!t.linkedTo)).concat(t.filter((t=>t.linkedTo))),this._axes.forEach((t=>{t.attachAxis(this.axisGroup,this.axisGridGroup),e.delete(t)})),this.zoomManager.updateAxes(this._axes),e.forEach((t=>t.destroy()))}get axes(){return this._axes}set series(t){this.removeAllSeries(),this.seriesLayerManager.setSeriesCount(t.length),t.forEach((t=>this.addSeries(t)))}get series(){return this._series}addSeries(t){const{series:e}=this;return!!(e.indexOf(t)<0)&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)}initSeries(t){const e=this;t.chart={get mode(){return e.mode},get seriesRect(){return e.seriesRect},placeLabels:()=>e.placeLabels()},t.setChartData(this.data),this.addSeriesListeners(t),t.addChartEventListeners()}removeAllSeries(){this.series.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.destroy(),t.chart=void 0})),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)}))}assignSeriesToAxes(){this.axes.forEach((t=>{t.boundSeries=this.series.filter((e=>e.axes[t.direction]===t))}))}assignAxesToSeries(){const t={};this.axes.forEach((e=>{var i;const o=e.direction;(null!==(i=t[o])&&void 0!==i?i:t[o]=[]).push(e)})),this.series.forEach((e=>{e.directions.forEach((i=>{const o=t[i];if(!o)return void Es.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const n=e.getKeys(i),r=this.findMatchingAxis(o,n);r?e.axes[i]=r:Es.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`)}))}))}findMatchingAxis(t,e){for(const i of t){const t=i.keys;if(!t.length)return i;if(e)for(const o of e)if(t.indexOf(o)>=0)return i}}rawResize(t){var e;let{width:i,height:o}=t;if(i=Math.floor(i),o=Math.floor(o),!this.autoSize)return;if(0===i&&0===o)return;const[n=0,r=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];n===i&&r===o||(this._lastAutoSize=[i,o],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var o,n,r,s;if(null!==t&&void 0!==t||(t=null!==(o=this.width)&&void 0!==o?o:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),null!==e&&void 0!==e||(e=null!==(r=this.height)&&void 0!==r?r:this.autoSize?null===(s=this._lastAutoSize)||void 0===s?void 0:s[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${i}`,{width:t,height:e,stack:(new Error).stack}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)){this.disablePointer(),this.animationManager.reset();let t=!0;this.autoSize&&this._firstAutoSize&&(t=!1,this._firstAutoSize=!1),this.update(Kh.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:t})}}processData(){return us(this,void 0,void 0,(function*(){this.series.some((t=>t.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new Qh(this.mode),e=this.series.map((e=>e.processData(t)));yield t.execute(),yield Promise.all(e),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const r of this.series){if(!r.visible)continue;const o=r.getLabelData();o&&(null!=(i=o[0])&&"object"===typeof i.point&&"object"===typeof i.label)&&(e.push(o),t.push(r))}var i;const{seriesRect:o}=this,n=o&&e.length>0?function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const o=[];t=t.map((t=>t.slice().sort(((t,e)=>e.point.size-t.point.size))));for(let l=0;l<t.length;l++){const c=o[l]=[],d=t[l];if((null===d||void 0===d?void 0:d.length)&&d[0].label)for(let l=0,u=d.length;l<u;l++){const u=d[l],h=u.label,p=.5*u.point.size,f=u.point.x-.5*h.width,g=u.point.y-p-h.height-i,{width:v,height:y}=h;if(e&&(s=g,a=y,!((r=f)+v<(n=e).x+n.width&&r>n.x&&s>n.y&&s+a<n.y+n.height)))continue;const m=t.some((t=>t.some((t=>oh(t.point,f,g,v,y)))));if(m)continue;const b=o.some((t=>t.some((t=>nh(t,f,g,v,y)))));b||c.push({index:l,text:h.text,x:f,y:g,width:v,height:y,datum:u})}}var n,r,s,a;return o}(e,{x:0,y:0,width:o.width,height:o.height}):[];return new Map(n.map(((e,i)=>[t[i],e])))}updateLegend(){return us(this,void 0,void 0,(function*(){this.legends.forEach(((t,e)=>{const i=this.series.filter((t=>t.showInLegend)).flatMap((t=>t.getLegendData(e)));i.every((t=>"category"===t.legendType))&&this.validateCategoryLegendData(i),t.data=i}))}))}validateCategoryLegendData(t){const e={};t.forEach((t=>{var i,o,n,r,s;const a=null===(i=this.series.find((e=>e.id===t.seriesId)))||void 0===i?void 0:i.type;a&&(null!==(o=e[a])&&void 0!==o||(e[a]={}),null!==(n=(r=e[a])[s=t.label.text])&&void 0!==n||(r[s]=new Set),null!=t.marker.fill&&e[a][t.label.text].add(t.marker.fill))}));for(const i of Object.values(e))for(const[t,e]of Object.entries(i))e.size>1&&Es.warnOnce(`legend item '${t}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){var t;return us(this,void 0,void 0,(function*(){const e=this.animationRect;yield this.performLayout(),e&&!(null===(t=this.animationRect)||void 0===t?void 0:t.equals(e))&&this.animationManager.skipCurrentBatch(),this.handleNoDataOverlay(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}))}performLayout(){return us(this,void 0,void 0,(function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:t,height:e}=this.scene;let i={shrinkRect:new ul(0,0,t,e)};return i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i),i.shrinkRect}))}pickSeriesNode(t,e,i){var o,n;const r=performance.now(),s=e?[Ad.EXACT_SHAPE_MATCH]:void 0,a=[...this.series].reverse();let l;for(const c of a){if(!c.visible||!c.rootGroup.visible)continue;const{match:e,distance:n}=null!==(o=c.pickNode(t,s))&&void 0!==o?o:{};if(e&&null!=n&&((!l||l.distance>n)&&n<=(null!==i&&void 0!==i?i:1/0)&&(l={series:c,distance:n,datum:e}),0===n))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(n=this.extraDebugStats.pickSeriesNode)&&void 0!==n?n:0)+(performance.now()-r)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(Kh.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){var e=this;const{lastPick:i,hoverRect:o}=this,{offsetX:n,offsetY:r}=t,s=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i&&e.disablePointer(t)};(null===o||void 0===o?void 0:o.containsPoint(n,r))?(this.handlePointerTooltip(t,s),this.handlePointerNode(t)):s()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:o}=this,{range:n}=o,{offsetX:r,offsetY:s}=t;let a;"number"===typeof n&&Number.isFinite(n)&&(a=n);const l=this.pickSeriesNode({x:r,y:s},"exact"===n,a);if(!l)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const c="node"===this.highlight.range||!i||i.datum!==l.datum;let d;c?(d=l.series.getTooltipHtml(l.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,l.datum)):i&&(i.event=t.sourceEvent);const u=null!=a,h=this.tooltip.enabled&&l.series.tooltip.enabled,p="exact"===n&&0===l.distance,f=h&&("nearest"===n||u||p)&&(!c||void 0!==d),g=up.makeTooltipMeta(t,this.scene.canvas,l.datum,this.specialOverrides.window);f&&this.tooltipManager.updateTooltip(this.id,g,d)}handlePointerNode(t){this.checkSeriesNodeRange(t,((t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)}))||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(Kh.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(Kh.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,((e,i)=>e.fireNodeClickEvent(t.sourceEvent,i)))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,((e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i)))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),o=null===i||void 0===i?void 0:i.datum,n=null===o||void 0===o?void 0:o.series.nodeClickRange;let r;"number"===typeof n&&Number.isFinite(n)&&(r=n);let s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(s?this.highlightManager.updatePicked(this.id,s.datum):this.highlightManager.updatePicked(this.id),o&&"nearest"===n)return e(o.series,o),!0;if("exact"!==n&&(s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,r)),!s)return!1;const a=null!=r,l="exact"===n&&0===s.distance;return!(!a&&!l)&&(e(s.series,s.datum),!0)}changeHighlightDatum(t){var e,i;const o=new Set,{series:n,datum:r}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:s,datum:a}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};s&&o.add(s),n&&o.add(n),(null===s||void 0===s?void 0:s.cursor)&&a&&this.cursorManager.updateCursor(s.id),(null===n||void 0===n?void 0:n.cursor)&&r&&this.cursorManager.updateCursor(n.id,n.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;null==n||null==s?this.update(Kh.SERIES_UPDATE):this.update(Kh.SERIES_UPDATE,{seriesToUpdate:o})}waitForUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return us(this,void 0,void 0,(function*(){const e=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this._performUpdateType!==Kh.NONE;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield Vh(5)}yield this.updateMutex.waitForClearAcquireQueue()}))}handleNoDataOverlay(){!this.series.some((t=>t.hasData()))&&this.seriesRect?this.overlays.noData.show(this.seriesRect):this.overlays.noData.hide()}getMinRect(){const t=this.series.map((t=>t.getMinRect())).filter((t=>void 0!==t));if(t.length)return new ul(0,0,t.reduce(((t,e)=>Math.max(t,e.width)),0),t.reduce(((t,e)=>Math.max(t,e.height)),0))}}var $p;cs([Nl({newValue(t){this.destroyed||t.appendChild(this.element)},oldValue(t){t.removeChild(this.element)}}),ds("design:type",Object)],Xp.prototype,"container",void 0),cs([Nl({newValue(t){var e;null===(e=this.series)||void 0===e||e.forEach((e=>{e.setChartData(t)}))}}),ds("design:type",Object)],Xp.prototype,"data",void 0),cs([Nl({newValue(t){this.resize(t,void 0,"width option")}}),ds("design:type",Number)],Xp.prototype,"width",void 0),cs([Nl({newValue(t){this.resize(void 0,t,"height option")}}),ds("design:type",Number)],Xp.prototype,"height",void 0),cs([Nl({changeValue(t){this.autoSizeChanged(t)}}),ea(pa),ds("design:type",Object)],Xp.prototype,"autoSize",void 0),cs([Nl({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),ds("design:type",Function)],Xp.prototype,"title",void 0),cs([Nl({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),ds("design:type",Function)],Xp.prototype,"subtitle",void 0),cs([Nl({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),ds("design:type",Function)],Xp.prototype,"footnote",void 0),cs([ea(Na("standalone","integrated")),ds("design:type",String)],Xp.prototype,"mode",void 0),function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}($p||($p={}));class qp extends _c{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=$p.Open,this.restoreOwnStyles()}get fullPie(){return $s(zs(this.startAngle),zs(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===$p.Chord?t.closePath():this.type!==$p.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new ul(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),o=this.computeBBox();return this.type!==$p.Open&&o.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}qp.className="Arc",qp.defaultStyles=Object.assign({},wl.defaultStyles,{lineWidth:1,fillStyle:null}),cs([Lc(),ds("design:type",Number)],qp.prototype,"centerX",void 0),cs([Lc(),ds("design:type",Number)],qp.prototype,"centerY",void 0),cs([Lc(),ds("design:type",Number)],qp.prototype,"radius",void 0),cs([Lc(),ds("design:type",Number)],qp.prototype,"startAngle",void 0),cs([Lc(),ds("design:type",Number)],qp.prototype,"endAngle",void 0),cs([Lc(),ds("design:type",Boolean)],qp.prototype,"counterClockwise",void 0),cs([Lc(),ds("design:type",Number)],qp.prototype,"type",void 0);const Zp=t=>{const e=ta.fromString(t),[i,o,n]=ta.RGBtoHSL(e.r,e.g,e.b);return{h:i,s:o,l:n,a:e.a}};class Jp{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Zp)}update(){const{domain:t,range:e}=this;t.length<2&&(Es.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let i=1;i<t.length;i++){if(t[i-1]>=t[i]){Es.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort(((t,e)=>t-e));break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(Zp)}convert(t){const{domain:e,range:i,parsedRange:o}=this,n=e[0],r=e[e.length-1],s=i[0],a=i[i.length-1];if(t<=n)return s;if(t>=r)return a;let l,c;if(2===e.length){const e=(t-n)/(r-n),o=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),c=(e-l*o)/o}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];c=(t-i)/(e[l+1]-i)}return((t,e,i)=>{let o,n;if(i=Math.min(Math.max(i,0),1),Number.isNaN(t.h)&&Number.isNaN(e.h))o=0,n=0;else if(Number.isNaN(t.h))o=e.h,n=e.s;else if(Number.isNaN(e.h))o=t.h,n=t.s;else{const r=t.h;let s=e.h;const a=e.h-t.h;a>180?s-=360:a<-180&&(s+=360),o=r*(1-i)+s*i,n=t.s*(1-i)+e.s*i}const r=t.l*(1-i)+e.l*i,s=t.a*(1-i)+e.a*i;return ta.fromHSL(o,n,r,s)})(o[l],o[l+1],c).toRgbaString()}}class Qp extends wl{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,o;return null!==(o=null===(i=this.mask)||void 0===i?void 0:i.isPointInPath(t,e))&&void 0!==o&&o}computeBBox(){var t;return null===(t=this.mask)||void 0===t?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:o,devicePixelRatio:n}=t,r=1/n,s=null===e||void 0===e?void 0:e.computeTransformedBBox();if(null==e||null==i||null==s)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),o.save(),o.beginPath(),e.path.draw(o),o.clip(),o.resetTransform();const a=Math.floor(s.x),l=Math.ceil(s.x+s.width),c=Math.floor(s.y),d=Math.ceil(s.y+s.height),u=new Jp,[h,p]="to-right"===this.direction?[a,l]:[c,d];if(u.domain=i.map(((t,e)=>h+(p-h)*e/(i.length-1))),u.range=i,u.update(),"to-right"===this.direction){const t=d-c;for(let e=a;e<=l;e+=r)o.fillStyle=u.convert(e),o.fillRect(e,c,r,t)}else{const t=l-a;for(let e=c;e<=d;e+=r)o.fillStyle=u.convert(e),o.fillRect(a,e,t,r)}o.restore()}}cs([sl({redraw:nl.MAJOR}),ds("design:type",String)],Qp.prototype,"direction",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Array)],Qp.prototype,"stops",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Function)],Qp.prototype,"_mask",void 0);class tf extends _c{constructor(){super(...arguments),this.borderPath=new Nc,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=wl.defaultStyles.strokeWidth,this.effectiveStrokeWidth=wl.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))}updatePath(){var t,e,i;const{path:o,borderPath:n,crisp:r}=this;let{x:s,y:a,width:l,height:c,strokeWidth:d}=this;const u=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let h=1;if(o.clear({trackChanges:!0}),n.clear({trackChanges:!0}),r&&(l<=u&&(h*=l/u),c<=u&&(h*=c/u),l=this.align(s,l),c=this.align(a,c),s=this.align(s),a=this.align(a)),d)if(l<u){const t=s+u/2;n.moveTo(t,a),n.lineTo(t,a+c),d=u,this.borderClipPath=void 0}else if(c<u){const t=a+u/2;n.moveTo(s,t),n.lineTo(s+l,t),d=u,this.borderClipPath=void 0}else if(d<l&&d<c){const t=d/2;s+=t,a+=t,l-=d,c-=d,this.borderClipPath=void 0,o.rect(s,a,l,c),n.rect(s,a,l,c)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new Nc,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(s,a,l,c),n.rect(s,a,l,c);else this.borderClipPath=void 0,o.rect(s,a,l,c);this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=h}computeBBox(){const{x:t,y:e,width:i,height:o}=this;return new ul(t,e,i,o)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:o}=this,{globalAlpha:n}=t;t.globalAlpha=n*o*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:o,borderClipPath:n,opacity:r,microPixelEffectOpacity:s}=this;if(!!e&&!!i){const{strokeOpacity:a,lineDash:l,lineDashOffset:c,lineCap:d,lineJoin:u}=this;n&&(n.draw(t),t.clip()),o.draw(t);const{globalAlpha:h}=t;t.strokeStyle=e,t.globalAlpha=h*r*a*s,t.lineWidth=i,l&&t.setLineDash(l),c&&(t.lineDashOffset=c),d&&(t.lineCap=d),u&&(t.lineJoin=u),t.stroke(),t.globalAlpha=h}}}tf.className="Rect",cs([Lc(),ds("design:type",Number)],tf.prototype,"x",void 0),cs([Lc(),ds("design:type",Number)],tf.prototype,"y",void 0),cs([Lc(),ds("design:type",Number)],tf.prototype,"width",void 0),cs([Lc(),ds("design:type",Number)],tf.prototype,"height",void 0),cs([Lc(),ds("design:type",Number)],tf.prototype,"radius",void 0),cs([Lc(),ds("design:type",Boolean)],tf.prototype,"crisp",void 0);class ef extends gl{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:o}=t;if(this.dirty===nl.NONE&&!i)return void(o&&o.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const n=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(t)}}cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],ef.prototype,"x",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],ef.prototype,"y",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],ef.prototype,"width",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],ef.prototype,"height",void 0),cs([sl({redraw:nl.MAJOR}),ds("design:type",Number)],ef.prototype,"opacity",void 0);const of=Object.assign(Object.assign({},ql),gu);var nf=Object.freeze({__proto__:null,motion:of,Caption:Ll,DropShadow:vl,Group:Cc,Scene:Bh,Node:gl,get PointerEvents(){return pl},get RedrawType(){return nl},SceneChangeDetection:sl,Selection:wc,Arc:qp,Line:Ec,LinearGradientFill:Qp,Path:_c,ScenePathChangeDetection:Lc,Rect:tf,Sector:Ic,Shape:wl,Text:Ol,getFont:Dl,ContinuousScale:mc,BandScale:Ys,LinearScale:bc,toRadians:Us,Label:dd,Marker:gd,getMarker:Ap,Circle:vd,Diamond:bp,Square:Cp,Triangle:wp,Tooltip:lu,toTooltipHtml:nu,BBox:ul,nearestSquared:dl,nearestSquaredInContainer:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const o=e.transformPoint(t.x,t.y),n={nearest:void 0,distanceSquared:i};for(const r of e.children){const{nearest:t,distanceSquared:e}=r.nearestSquared(o,n.distanceSquared);if(0===e)return{nearest:t,distanceSquared:e};e<n.distanceSquared&&(n.nearest=t,n.distanceSquared=e)}return n},HdpiCanvas:bl,Image:ef,Path2D:Nc,easing:jl});const rf={[ol.X]:["xKey"],[ol.Y]:["yKey"]},sf={[ol.X]:["xName"],[ol.Y]:["yName"]};class af extends _d{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.xKey,this.yKey=o.yKey}}class lf extends yu{get contextNodeData(){return this._contextNodeData.slice()}constructor(t){var{pathsPerSeries:e=1,hasMarkers:i=!1,hasHighlightedLabels:o=!1,pathsZIndexSubOrderOffset:n=[],directionKeys:r=rf,directionNames:s=sf,datumSelectionGarbageCollection:a=!0,markerSelectionGarbageCollection:l=!0,animationResetFns:c}=t,d=ls(t,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationResetFns"]);super(Object.assign({directionKeys:r,directionNames:s,useSeriesGroupLayer:!0,canHaveAxes:!0},d)),this.legendItemName=void 0,this._contextNodeData=[],this.NodeClickEvent=af,this.highlightSelection=wc.select(this.highlightNode,(()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory())),this.highlightLabelSelection=wc.select(this.highlightLabel,Ol),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=As.create(),this.opts={pathsPerSeries:e,hasMarkers:i,hasHighlightedLabels:o,pathsZIndexSubOrderOffset:n,directionKeys:r,directionNames:s,animationResetFns:c,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:l},this.animationState=new vu("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},(()=>this.checkProcessedDataAnimatable()))}addChartEventListeners(){this.ctx.chartEventManager.addListener("legend-item-click",(t=>this.onLegendItemClick(t))),this.ctx.chartEventManager.addListener("legend-item-double-click",(t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update(t){let{seriesRect:e}=t;var i,o;return us(this,void 0,void 0,(function*(){const{visible:t,_contextNodeData:n}=this,{series:r}=null!==(o=null===(i=this.ctx.highlightManager)||void 0===i?void 0:i.getActiveHighlight())&&void 0!==o?o:{},s=r?r===this:void 0,a=this.checkResize(e),l=yield this.updateHighlightSelection(s);yield this.updateSelections(t),yield this.updateNodes(l,s,t);const c=this.getAnimationData(e,n);a&&this.animationState.transition("resize",c),this.animationState.transition("update",c)}))}updateSelections(t){return us(this,void 0,void 0,(function*(){if((t||!this.ctx.animationManager.isSkipped())&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData.forEach((e=>{var i;null!==(i=e.animationValid)&&void 0!==i||(e.animationValid=t)})),yield this.updateSeriesGroups();const{dataModel:e,processedData:i}=this;void 0!==e&&void 0!==i&&this.dispatch("data-update",{dataModel:e,processedData:i})}yield Promise.all(this.subGroups.map(((t,e)=>this.updateSeriesGroupSelections(t,e))))}}))}updateSeriesGroupSelections(t,e,i){return us(this,void 0,void 0,(function*(){const{datumSelection:o,labelSelection:n,markerSelection:r,paths:s}=t,a=this._contextNodeData[e],{nodeData:l,labelData:c,itemId:d}=a;yield this.updatePaths({seriesHighlighted:i,itemId:d,contextData:a,paths:s,seriesIdx:e}),t.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:o,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:c,labelSelection:n,seriesIdx:e}),r&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:r,seriesIdx:e}))}))}markerFactory(){return new(Ap())}updateSeriesGroups(){return us(this,void 0,void 0,(function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:o,hasMarkers:n,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:s}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach((t=>{let{dataNodeGroup:i,markerGroup:o,labelGroup:n,paths:r}=t;e.removeChild(i),o&&e.removeChild(o),n&&e.removeChild(n);for(const s of r)e.removeChild(s)}));const a=t.length;for(;a>i.length;){const t=!1,a=this.subGroupId++,l=new Cc({name:`${this.id}-series-sub${a}-dataNodes`,layer:t,zIndex:fd.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",a)}),c=n?new Cc({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:t,zIndex:fd.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",a)}):void 0,d=new Cc({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:t,zIndex:fd.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",a)});e.appendChild(l),e.appendChild(d),c&&e.appendChild(c);const u=[];for(let i=0;i<o;i++)u[i]=new _c,u[i].zIndex=fd.SERIES_LAYER_ZINDEX,u[i].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",i),e.appendChild(u[i]);i.push({paths:u,dataNodeGroup:l,markerGroup:c,labelGroup:d,labelSelection:wc.select(d,Ol),datumSelection:wc.select(l,(()=>this.nodeFactory()),r),markerSelection:c?wc.select(c,(()=>this.markerFactory()),s):void 0})}}))}getGroupZIndexSubOrder(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var i;const o=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const t=null!==(i=this.opts.pathsZIndexSubOrderOffset[e])&&void 0!==i?i:0,n=o[0];o[0]="function"===typeof n?()=>+n()+t:+n+t}return o}updateNodes(t,e,i){var o;return us(this,void 0,void 0,(function*(){const{highlightSelection:n,highlightLabelSelection:r,opts:{hasMarkers:s,hasHighlightedLabels:a}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&(null===(o=this._contextNodeData)||void 0===o?void 0:o.length)>0&&i;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&!!e;const d=this.getOpacity();s?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),a&&(yield this.updateLabelNodes({labelSelection:r,seriesIdx:-1})),yield Promise.all(this.subGroups.map(((i,o)=>us(this,void 0,void 0,(function*(){const{dataNodeGroup:n,markerGroup:r,datumSelection:a,labelSelection:u,markerSelection:h,paths:p,labelGroup:f}=i,{itemId:g}=this.contextNodeData[o],v=c;n.opacity=d,n.visible=l||v,f.visible=v,r&&(r.opacity=d,r.zIndex=n.zIndex>=fd.SERIES_LAYER_ZINDEX?n.zIndex:n.zIndex+1,r.visible=v),f&&(f.opacity=d),yield this.updatePathNodes({seriesHighlighted:e,itemId:g,paths:p,seriesIdx:o,opacity:d,visible:v,animationEnabled:l}),n.visible&&(yield this.updateDatumNodes({datumSelection:a,highlightedItems:t,isHighlight:!1,seriesIdx:o}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:o}),s&&h&&(yield this.updateMarkerNodes({markerSelection:h,isHighlight:!1,seriesIdx:o})))})))))}))}getHighlightLabelData(t,e){const i=t.find((t=>t.datum===e.datum&&t.itemId===e.itemId));return i?[i]:void 0}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){var e;return us(this,void 0,void 0,(function*(){const{highlightSelection:i,highlightLabelSelection:o,_contextNodeData:n}=this,r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=t&&(null===r||void 0===r?void 0:r.datum)?r:void 0;let a,l;if(null!=s){const t=this.isLabelEnabled();for(const{labelData:e,nodeData:i}of n)if(l=this.getHighlightData(i,s),a=t?this.getHighlightLabelData(e,s):void 0,(!t||null!=a)&&null!=l)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:o}),l}))}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:o,y:n}=t,{opts:{hasMarkers:r}}=this;for(const{dataNodeGroup:s,markerGroup:a}of this.subGroups){let t=s.pickNode(o,n);if(!t&&r&&(t=null===a||void 0===a?void 0:a.pickNode(o,n)),t)break}for(const s of this.moduleMap){const{datum:i}=null!==(e=s.pickNodeExact(t))&&void 0!==e?e:{};if(void 0!==i)return{datum:i,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:o,y:n}=t,{axes:r,rootGroup:s,_contextNodeData:a}=this,l=r[ol.X],c=r[ol.Y],d=s.transformPoint(o,n);let u,h=1/0;for(const p of a)for(const t of p.nodeData){const{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i))continue;if(!((null===l||void 0===l?void 0:l.inRange(e))&&(null===c||void 0===c?void 0:c.inRange(i))))continue;const o=Math.max(Math.pow(d.x-e,2)+Math.pow(d.y-i,2),0);o<h&&(h=o,u=t)}for(const p of this.moduleMap){const e=p.pickNodeNearest(t);if(void 0!==e&&e.distanceSquared<h){h=e.distanceSquared,u=e.datum;break}}if(u){return{datum:u,distance:Math.max(Math.sqrt(h)-(null!==(i=null===(e=u.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,o;const{x:n,y:r}=t,{axes:s,rootGroup:a,_contextNodeData:l}=this,c=s[ol.X],d=s[ol.Y],u=[c,d].filter((t=>t instanceof wh)).map((t=>t.direction));if(e&&0===u.length)return;const[h=ol.X]=u,p=a.transformPoint(n,r),f=h===ol.X?[p.x,p.y]:[p.y,p.x],g=[1/0,1/0];let v;for(const y of l)for(const t of y.nodeData){const{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i))continue;if(!((null===c||void 0===c?void 0:c.inRange(e))&&(null===d||void 0===d?void 0:d.inRange(i))))continue;const o=h===ol.X?[e,i]:[i,e];let n=!0;for(let t=0;t<o.length;t++){const e=Math.abs(o[t]-f[t]);if(e>g[t]){n=!1;break}e<g[t]&&(g[t]=e,g.fill(1/0,t+1,g.length))}n&&(v=t)}if(v){let e=Math.max(Math.pow(g[0],2)+Math.pow(g[1],2)-(null!==(o=null===(i=v.point)||void 0===i?void 0:i.size)&&void 0!==o?o:0),0);for(const i of this.moduleMap){const o=i.pickNodeMainAxisFirst(t);if(void 0!==o&&o.distanceSquared<e){v=o.datum,e=o.distanceSquared;break}}return{datum:v,distance:Math.sqrt(e)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:o,legendItemName:n}=t,r=null!=this.legendItemName&&this.legendItemName===n;(o.id===this.id||r)&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:n,legendItemName:r}=t,s=Object.values(n).reduce(((t,e)=>t+e),0),a=null!=this.legendItemName&&this.legendItemName===r;o.id===this.id||a||e&&1===s?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[t]=this._contextNodeData;if(!t||0==t.nodeData.length)return;const e=t.nodeData.map((t=>{let{midPoint:e}=t;var i;return null!==(i=null===e||void 0===e?void 0:e.x)&&void 0!==i?i:0})).sort(((t,e)=>t-e)).reduce(((t,e,i,o)=>i>0?Math.max(t,e-o[i-1]):t),0),i=t.nodeData.map((t=>{let{midPoint:e}=t;var i;return null!==(i=null===e||void 0===e?void 0:e.y)&&void 0!==i?i:0})).sort(((t,e)=>t-e)).reduce(((t,e,i,o)=>i>0?Math.max(t,e-o[i-1]):t),0);return new ul(0,0,e,i)}updateHighlightSelectionItem(t){return us(this,void 0,void 0,(function*(){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:o}=t,n=null!==i&&void 0!==i?i:[];if(e){const t=o;return this.updateMarkerSelection({nodeData:n,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:n,datumSelection:o,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return us(this,void 0,void 0,(function*(){const{items:e,highlightLabelSelection:i}=t,o=null!==e&&void 0!==e?e:[];return this.updateLabelSelection({labelData:o,labelSelection:i,seriesIdx:-1})}))}updateDatumSelection(t){return us(this,void 0,void 0,(function*(){return t.datumSelection}))}updateDatumNodes(t){return us(this,void 0,void 0,(function*(){}))}updateMarkerSelection(t){return us(this,void 0,void 0,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return us(this,void 0,void 0,(function*(){}))}updatePaths(t){return us(this,void 0,void 0,(function*(){t.paths.forEach((t=>t.visible=!1))}))}updatePathNodes(t){return us(this,void 0,void 0,(function*(){const{paths:e,opacity:i,visible:o}=t;for(const t of e)t.opacity=i,t.visible=o}))}resetAllAnimation(t){var e,i;const{path:o,datum:n,label:r,marker:s}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),o&&t.paths.forEach((t=>{pu(t,o)})),n&&pu(t.datumSelections,n),r&&pu(t.labelSelections,r),s&&pu(t.markerSelections,s),t.contextData.some((t=>!1===t.animationValid))&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:o}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};o&&pu([t],o)}animateReadyHighlightMarkers(t){var e,i;const{marker:o}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};o&&pu([t],o)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t,e){return{datumSelections:this.subGroups.map((t=>{let{datumSelection:e}=t;return e})),markerSelections:this.subGroups.filter((t=>{let{markerSelection:e}=t;return void 0!==e})).map((t=>{let{markerSelection:e}=t;return e})),labelSelections:this.subGroups.map((t=>{let{labelSelection:e}=t;return e})),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map((t=>{let{paths:e}=t;return e})),seriesRect:t}}calculateScaling(){const t={},e=e=>{const i=this.axes[e];if(i)if(i.scale instanceof $u){const{range:o,domain:n}=i.scale;t[e]={type:"log",convert:t=>i.scale.convert(t),domain:[n[0],n[1]],range:[o[0],o[1]]}}else if(i.scale instanceof mc){const{range:o}=i.scale,n=i.scale.getDomain();t[e]={type:"continuous",domain:[n[0],n[1]],range:[o[0],o[1]]}}else if(i.scale){const{domain:o}=i.scale;t[e]={type:"category",domain:o,range:o.map((t=>i.scale.convert(t)))}}};return e(ol.X),e(ol.Y),t}}cs([ea(va),ds("design:type",String)],lf.prototype,"legendItemName",void 0);const cf=["top","right","bottom","left"];class df extends Xp{constructor(t,e){super(t,e),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return us(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{animationRect:i,seriesRect:o,visibility:n,clipSeries:r}=this.updateAxes(e);this.seriesRoot.visible=n.series,this.seriesRect=o,this.animationRect=i,this.seriesRoot.translationX=Math.floor(o.x),this.seriesRoot.translationY=Math.floor(o.y);const{seriesArea:{padding:s}}=this,a=o.clone().grow({top:s.top,right:s.right,bottom:s.bottom,left:s.left});return this.hoverRect=a,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:r,series:{rect:o,paddedRect:a,visible:n.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map((t=>Object.assign({id:t.id},t.getLayoutState())))}),e}))}updateAxes(t){var e;const i=Object.assign({},this._lastAxisWidths),o=Object.assign({},this._lastVisibility),n=new Set(this._axes.map((t=>t.position)));for(const p of Object.keys(i))n.has(p)||delete i[p];const r=(t,e)=>!Object.keys(t).some((t=>null==i[t]))&&(o.crossLines===e.crossLines&&o.series===e.series&&Object.entries(i).every((e=>{let[i,o]=e;const n=t[i];return null==o&&null==n||o===n})));let s={},a={},l=!1,c=null===(e=this.seriesRect)||void 0===e?void 0:e.clone(),d=0,u={};do{Object.assign(i,s),Object.assign(o,a);const e=this.updateAxesPass(i,t.clone(),c);if(h=e.axisWidths,s=Object.entries(h).reduce(((t,e)=>{let[i,o]=e;return o&&Math.abs(o)===1/0&&(o=0),t[i]=null!=o?Math.ceil(o):o,t}),{}),a=e.visibility,l=e.clipSeries,c=e.seriesRect,u=e.primaryTickCounts,d++>10){Es.warn("unable to find stable axis layout.");break}}while(!r(s,a));var h;this.axes.forEach((t=>{const{direction:e}=t,i=u[e];t.update(i)}));return this.axes.forEach((e=>{if(e.setCrossLinesVisible(o.crossLines),c)switch(e.clipGrid(c.x,c.y,c.width+5,c.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,c.y,t.width+5,c.height+5);break;case"top":case"bottom":e.clipTickLines(c.x,t.y,c.width+5,t.height+5)}})),this._lastAxisWidths=i,this._lastVisibility=o,{seriesRect:c,animationRect:t,visibility:o,clipSeries:l}}updateAxesPass(t,e,i){const{axes:o}=this,n={},r={},s={series:!0,crossLines:!0};let a=!1;const l={},c=this.applySeriesPadding(e),d=i?this.buildCrossLinePadding(t):{},u=this.buildAxisBound(c,t,d,s),h=this.buildSeriesRect(u,t);return o.forEach((e=>{var i,o;const{position:s="left"}=e,{clipSeries:d,axisThickness:p,axisOffset:f}=this.calculateAxisDimensions({axis:e,seriesRect:h,paddedBounds:c,axisWidths:t,newAxisWidths:r,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:(null!==(i=n[s])&&void 0!==i?i:0)>0});n[s]=(null!==(o=n[s])&&void 0!==o?o:0)+1,a=a||d,this.positionAxis({axis:e,axisBound:u,axisOffset:f,axisThickness:p,axisWidths:t,primaryTickCounts:l,seriesRect:h})})),{clipSeries:a,seriesRect:h,axisWidths:r,visibility:s,primaryTickCounts:l}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach((t=>{t.crossLines&&t.crossLines.forEach((t=>{t.calculatePadding(i)}))}));for(const[o,n=0]of Object.entries(i))i[o]=Math.max(n-(null!==(e=t[o])&&void 0!==e?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return cf.forEach((t=>{const o=this.seriesArea.padding[t],n=i.find((e=>e.position===t));n?n.seriesAreaPadding=o:e.shrink(o,t)})),e}buildAxisBound(t,e,i,o){var n,r,s,a;const l=t.clone(),{top:c=0,right:d=0,bottom:u=0,left:h=0}=i,p=h+d,f=c+u,g=(null!==(n=e.left)&&void 0!==n?n:0)+(null!==(r=e.right)&&void 0!==r?r:0)+p,v=(null!==(s=e.top)&&void 0!==s?s:0)+(null!==(a=e.bottom)&&void 0!==a?a:0)+f;return l.width<=g||l.height<=v?(o.crossLines=!1,o.series=!1,l):(l.x+=h,l.y+=c,l.width-=p,l.height-=f,l)}buildSeriesRect(t,e){const i=t.clone(),{top:o,bottom:n,left:r,right:s}=e;return i.x+=null!==r&&void 0!==r?r:0,i.y+=null!==o&&void 0!==o?o:0,i.width-=(null!==r&&void 0!==r?r:0)+(null!==s&&void 0!==s?s:0),i.height-=(null!==o&&void 0!==o?o:0)+(null!==n&&void 0!==n?n:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,o){const{x:n,y:r,width:s,height:a}=t,l=[n,r,n+s,r+a];return(1===o?Math.min:Math.max)(e,l[("x"===i?0:1)+(1===o?0:2)])}calculateAxisDimensions(t){var e,i,o,n,r;const{axis:s,seriesRect:a,paddedBounds:l,axisWidths:c,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:h}=t;let{clipSeries:p}=t;const{position:f="left",direction:g}=s,v=null!==(e=d[f])&&void 0!==e?e:0;switch(f){case"top":case"bottom":s.range=[0,a.width],s.gridLength=a.height;break;case"right":case"left":s.range=(t=>t instanceof wh||t instanceof _h?[0,a.height]:[a.height,0])(s),s.gridLength=a.width}const y=this.zoomManager.getAxisZoom(s.id),{min:m=0,max:b=1}=null!==y&&void 0!==y?y:{};s.visibleRange=[m,b];const S=s.dataDomain.clipped||s.visibleRange[0]>0||s.visibleRange[1]<1;p||(p=S);let x=s.nice?u[g]:void 0;null!=s.thickness&&s.thickness>0?s.maxThickness=s.thickness:g===ol.Y?s.maxThickness=.3*l.width:s.maxThickness=.3*l.height;const C=s.calculateLayout(x);x=C.primaryTickCount,u[g]=null!==(i=u[g])&&void 0!==i?i:x;let w=0;if(null!=s.thickness&&s.thickness>0)w=s.thickness;else{const{bbox:t}=C;w=g===ol.X?t.height:t.width}return h&&(w+=15),w=Math.ceil(w),d[f]=(null!==(o=d[f])&&void 0!==o?o:0)+w,s.gridPadding=(null!==(n=c[f])&&void 0!==n?n:0)-(null!==(r=d[f])&&void 0!==r?r:0),{clipSeries:p,axisThickness:w,axisOffset:v,primaryTickCount:x}}positionAxis(t){var e,i,o,n;const{axis:r,axisBound:s,axisWidths:a,seriesRect:l,axisOffset:c,axisThickness:d}=t,{position:u}=r;switch(u){case"top":r.translation.x=s.x+(null!==(e=a.left)&&void 0!==e?e:0),r.translation.y=this.clampToOutsideSeriesRect(l,s.y+1+c+d,"y",1);break;case"bottom":r.translation.x=s.x+(null!==(i=a.left)&&void 0!==i?i:0),r.translation.y=this.clampToOutsideSeriesRect(l,s.y+s.height+1-d-c,"y",-1);break;case"left":r.translation.y=s.y+(null!==(o=a.top)&&void 0!==o?o:0),r.translation.x=this.clampToOutsideSeriesRect(l,s.x+c+d,"x",1);break;case"right":r.translation.y=s.y+(null!==(n=a.top)&&void 0!==n?n:0),r.translation.x=this.clampToOutsideSeriesRect(l,s.x+s.width-d-c,"x",-1)}r.updatePosition({rotation:Us(r.rotation),sideFlag:r.label.getSideFlag()})}shouldFlipXY(){return!this.series.some((t=>!(t instanceof lf&&t.shouldFlipXY())))}}df.className="CartesianChart",df.type="cartesian";class uf{static isInstance(t){var e;return t instanceof uf||("AgChartInstanceProxy"===(null===(e=t.constructor)||void 0===e?void 0:e.name)&&null!=t.chart||null!=t.chart&&this.validateImplementation(t))}static validateImplementation(t){var e,i;const o=Object.keys(null!==(i=null===(e=t.constructor)||void 0===e?void 0:e.prototype)&&void 0!==i?i:{});return["getOptions","destroy"].every((t=>o.includes(t)))}constructor(t){this.chart=t}getOptions(){return this.chart.getOptions()}destroy(){this.chart.destroy()}}function hf(t,e){let i=Math.floor(t[0]),o=t[1];i=function(t,e,i){const o=Math.abs(e-t)/(i-1),n=Math.floor(Math.log10(o)),r=Math.pow(10,n);return Math.floor(t/r)*r}(i,o,e);const n=function(t,e,i){const o=i-1,n=(e-t)/o;return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),o=t/i*10;if(o>0&&o<=1)return i/10;if(o>1&&o<=2)return 2*i/10;if(o>1&&o<=5)return 5*i/10;if(o>5&&o<=10)return 10*i/10;if(o>10&&o<=20)return 20*i/10;if(o>20&&o<=40)return 40*i/10;if(o>40&&o<=50)return 50*i/10;if(o>50&&o<=100)return 100*i/10;return o}(n)}(i,o,e);o=i+(e-1)*n;const r=[i,o],s=function(t,e,i){const o=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(o):0,r=Math.pow(10,n),s=new vc(n);for(let a=0;a<i;a++){const i=t+e*a;s[a]=Math.round(i*r)/r}return s}(i,n,e);return[r,s]}class pf extends hh{constructor(){super(...arguments),this.maxSpacing=NaN}}cs([ea(aa(Ma(1),da("minSpacing"))),lh(NaN),ds("design:type",Number)],pf.prototype,"maxSpacing",void 0);class ff extends Ch{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new bc),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:n}=bs(t,e,i);return{domain:o,clipped:n}}formatDatum(t){return"number"===typeof t?t.toFixed(2):(Es.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new pf}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=hf(this.dataDomain.domain,null!==t&&void 0!==t?t:0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}function gf(){return oa((t=>"number"===typeof t&&0!==t),"expecting a non-zero Number")}ff.className="NumberAxis",ff.type="number",cs([ea(aa(Ma(),ca("max"))),lh(NaN),ds("design:type",Number)],ff.prototype,"min",void 0),cs([ea(aa(Ma(),da("min"))),lh(NaN),ds("design:type",Number)],ff.prototype,"max",void 0);class vf extends ff{normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:n}=bs(t,e,i),r=o[0]>o[1],s=o[0]<0&&o[1]>0,a=0===o[0]&&0===o[1];return(r||s||a)&&(t=[],s?Es.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&Es.warn("the data domain has 0 extent, no data is rendered.")),0===o[0]&&(o[0]=1),0===o[1]&&(o[1]=-1),{domain:o,clipped:n}}set base(t){this.scale.base=t}get base(){return this.scale.base}constructor(t){super(t,new $u),this.min=NaN,this.max=NaN}}vf.className="LogAxis",vf.type="log",cs([ea(aa(Ma(),ca("max"),gf())),lh(NaN),ds("design:type",Number)],vf.prototype,"min",void 0),cs([ea(aa(Ma(),da("min"),gf())),lh(NaN),ds("design:type",Number)],vf.prototype,"max",void 0);class yf extends hh{constructor(){super(...arguments),this.maxSpacing=NaN}}cs([ea(aa(Ma(1),da("minSpacing"))),lh(NaN),ds("design:type",Number)],yf.prototype,"maxSpacing",void 0);class mf extends Ch{constructor(t){super(t,new Qu),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:o}=this,n=!1;return"number"===typeof i&&(i=new Date(i)),"number"===typeof o&&(o=new Date(o)),t.length>2&&(t=(null!==(e=ms(t))&&void 0!==e?e:[0,1e3]).map((t=>new Date(t)))),i instanceof Date&&(n||(n=i>t[0]),t=[i,t[1]]),o instanceof Date&&(n||(n=o<t[1]),t=[t[0],o]),t[0]>t[1]&&(t=[]),{domain:t,clipped:n}}createTick(){return new yf}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return[0,1]}}mf.className="TimeAxis",mf.type="time",cs([ea(aa(Sa,ca("max"))),ds("design:type",Object)],mf.prototype,"min",void 0),cs([ea(aa(Sa,da("min"))),ds("design:type",Object)],mf.prototype,"max",void 0);const bf={[ff.type]:ff,[wh.type]:wh,[mf.type]:mf,[_h.type]:_h,[vf.type]:vf};function Sf(t,e){const i=bf[t];if(i)return new i(e);throw new Error(`AG Charts - unknown axis type: ${t}`)}const xf={has:t=>Object.prototype.hasOwnProperty.call(bf,t),get axesTypes(){return Object.keys(bf)}},Cf={};function wf(t,e){Cf[t]=e}function Ef(t){var e;return null!==(e=Cf[t])&&void 0!==e?e:{}}const Of=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function Df(t){return Of.some((e=>"series"===e.type&&e.identifier===t))}function Af(t){var e;return null===(e=Of.find((e=>"series"===e.type&&e.identifier===t)))||void 0===e?void 0:e.chartTypes}function Tf(t){var e,i;return(null!==(i=null===(e=Of.find((e=>"series"===e.type&&e.identifier===t)))||void 0===e?void 0:e.useCount)&&void 0!==i?i:0)>0}function Mf(t){var e;if("enterprise"!==t.packageType)throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const i=Of.find((e=>e.type===t.type&&e.optionsKey===t.optionsKey&&e.identifier===t.identifier&&t.chartTypes.every((t=>e.chartTypes.includes(t)))));return i&&(null!==(e=i.useCount)&&void 0!==e||(i.useCount=0),i.useCount++),null!=i}const kf={category:"legend"};const Rf={};class Pf extends ps{constructor(t){var e;super(),this.node=new Cc({name:"background",zIndex:fd.SERIES_BACKGROUND_ZINDEX}),this.rectNode=new tf,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push((()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.node)}),t.layoutService.addListener("layout-complete",(t=>this.onLayoutComplete(t))))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}}cs([ea(pa),Pl("node","visible"),ds("design:type",Boolean)],Pf.prototype,"visible",void 0),cs([ea(wa),Pl("rectNode","fill"),ds("design:type",String)],Pf.prototype,"fill",void 0);const Nf={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:Pf};class Lf{set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}constructor(t){this.rh=t}}class _f{set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}constructor(t){this.rm=t}}class If extends _c{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:o}=this;return new ul(t-i/2,e-o/2,i,o)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:o,height:n}=this;t.clear();const r=e-o/2,s=i-n/2,a=this.align(r),l=this.align(s),c=a+this.align(r,o),d=l+this.align(s,n);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,d),t.lineTo(a,d),t.lineTo(a,l);const u=this.gripLineGap/2,h=this.gripLineLength/2;t.moveTo(this.align(e-u),this.align(i-h)),t.lineTo(this.align(e-u),this.align(i+h)),t.moveTo(this.align(e+u),this.align(i-h)),t.lineTo(this.align(e+u),this.align(i+h))}}function Ff(t,e){t!==e&&(this.dirtyPath=!0)}If.className="RangeHandle",cs([ea(Ca),ds("design:type",Object)],If.prototype,"_fill",void 0),cs([ea(Ca),ds("design:type",Object)],If.prototype,"_stroke",void 0),cs([ea(Aa(0)),ds("design:type",Object)],If.prototype,"_strokeWidth",void 0),cs([ea(za),ds("design:type",Object)],If.prototype,"_lineCap",void 0),cs([ea(Aa(0)),ds("design:type",Number)],If.prototype,"_width",void 0),cs([ea(Aa(0)),ds("design:type",Number)],If.prototype,"_gripLineGap",void 0),cs([ea(Aa(0)),ds("design:type",Number)],If.prototype,"_gripLineLength",void 0),cs([ea(Aa(0)),ds("design:type",Number)],If.prototype,"_height",void 0);class Gf extends _c{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.05,this._min=0,this._max=1}set min(t){var e;t=Xs(0,t,this.max-this.minRange),this._min===t||isNaN(t)||(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=Xs(this.min+this.minRange,t,1),this._max===t||isNaN(t)||(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:o}=this;return new ul(t,e,i,o)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:o,min:n,max:r}=this,s=t+i*n;return new ul(s,e,t+i*r-s,o)}updatePath(){const{path:t,x:e,y:i,width:o,height:n,min:r,max:s}=this;t.clear();const a=this.align(e),l=this.align(i),c=a+this.align(e,o),d=l+this.align(i,n);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,d),t.lineTo(a,d),t.lineTo(a,l);const u=this.align(e+o*r),h=this.align(e+o*s);t.moveTo(u,l),t.lineTo(u,d),t.lineTo(h,d),t.lineTo(h,l),t.lineTo(u,l)}}Gf.className="RangeMask",cs([Nl({changeValue:Ff}),ea(Aa(0)),ds("design:type",Object)],Gf.prototype,"x",void 0),cs([Nl({changeValue:Ff}),ea(Aa(0)),ds("design:type",Object)],Gf.prototype,"y",void 0),cs([Nl({changeValue:Ff}),ea(Aa(0)),ds("design:type",Object)],Gf.prototype,"width",void 0),cs([Nl({changeValue:Ff}),ea(Aa(0)),ds("design:type",Object)],Gf.prototype,"height",void 0),cs([ea(Aa()),ds("design:type",Number)],Gf.prototype,"_min",void 0),cs([ea(Aa()),ds("design:type",Number)],Gf.prototype,"_max",void 0);class Bf extends Cc{set x(t){this.mask.x=t,this.updateHandles()}get x(){return this.mask.x}set y(t){this.mask.y=t,this.updateHandles()}get y(){return this.mask.y}set width(t){this.mask.width=t,this.updateHandles()}get width(){return this.mask.width}set height(t){this.mask.height=t,this.updateHandles()}get height(){return this.mask.height}set min(t){this.mask.min=t}get min(){return this.mask.min}set max(t){this.mask.max=t}get max(){return this.mask.max}constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new If,this.maxHandle=new If,this.mask=(()=>{const{x:t,y:e,width:i,height:o,min:n,max:r}=Bf.defaults,s=new Gf;s.x=t,s.y=e,s.width=i,s.height=o,s.min=n,s.max=r;const{minHandle:a,maxHandle:l}=this;return a.centerX=t,l.centerX=t+i,a.centerY=l.centerY=e+o/2,this.append([s,a,l]),s.onRangeChange=()=>{var t;this.updateHandles(),null===(t=this.onRangeChange)||void 0===t||t.call(this)},s})(),this._x=Bf.defaults.x,this._y=Bf.defaults.y,this._width=Bf.defaults.width,this._height=Bf.defaults.height,this._min=Bf.defaults.min,this._max=Bf.defaults.max,this.isContainerNode=!0}updateHandles(){const{minHandle:t,maxHandle:e,x:i,y:o,width:n,height:r,mask:s}=this;t.centerX=i+n*s.min,e.centerX=i+n*s.max,t.centerY=e.centerY=o+r/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(t){const{ctx:e,forceRender:i,stats:o}=t;if(this.dirty===nl.NONE&&!i)return void(o&&o.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const{mask:n,minHandle:r,maxHandle:s}=this;[n,r,s].forEach((o=>{o.visible&&(i||o.dirty>nl.NONE)&&(e.save(),o.render(Object.assign(Object.assign({},t),{ctx:e,forceRender:i})),e.restore())})),this.markClean({force:!0}),o&&o.nodesRendered++}}Bf.className="Range",Bf.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class Vf extends ps{set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}):this.ctx.zoomManager.updateZoom("navigator")}constructor(t){var e;super(),this.ctx=t,this.rs=new Bf,this.mask=new _f(this.rs.mask),this.minHandle=new Lf(this.rs.minHandle),this.maxHandle=new Lf(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>t.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}),null===(e=t.scene.root)||void 0===e||e.appendChild(this.rs);const i={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("drag-start",(t=>this.onDragStart(t)),i),t.interactionManager.addListener("drag",(t=>this.onDrag(t)),i),t.interactionManager.addListener("hover",(t=>this.onDrag(t)),i),t.interactionManager.addListener("drag-end",(()=>this.onDragStop()),i),t.layoutService.addListener("before-series",(t=>this.layout(t))),t.layoutService.addListener("layout-complete",(t=>this.layoutComplete(t))),(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.rs)}),(()=>this.ctx.zoomManager.updateZoom("navigator"))),this.updateGroupVisibility()}layout(t){let{shrinkRect:e}=t;if(this.enabled){const t=this.rs.height+this.margin;e.shrink(t,"bottom"),this.rs.y=e.y+e.height+this.margin}return{shrinkRect:e}}layoutComplete(t){let{series:{rect:e,visible:i}}=t;this.enabled&&i&&(this.rs.x=e.x,this.rs.width=e.width),this.visible=i}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:o}=this,{minHandle:n,maxHandle:r,x:s,width:a,min:l}=o,c=o.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(n.containsPoint(e,i)?this.minHandleDragging=!0:r.containsPoint(e,i)?this.maxHandleDragging=!0:c.containsPoint(e,i)&&(this.panHandleOffset=(e-s)/a-l))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:o,y:n,width:r,height:s,minHandle:a,maxHandle:l}=e,{offsetX:c,offsetY:d}=t,u=o+r*e.min,h=o+r*e.max,p=new ul(u,n,h-u,s),f=()=>Math.min(Math.max((c-o)/r,0),1);if(a.containsPoint(c,d)||l.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=f();else if(this.maxHandleDragging)e.max=f();else if(!isNaN(i)){const t=e.max-e.min,o=Math.min(f()-i,1-t);o<=e.min?(e.min=o,e.max=e.min+t):(e.max=o+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}cs([Nl({changeValue(t){t&&(this.min=0,this.max=1),this.updateGroupVisibility()}}),ea(pa),ds("design:type",Object)],Vf.prototype,"enabled",void 0),cs([ea(Aa(0)),ds("design:type",Object)],Vf.prototype,"margin",void 0);const jf={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:Vf,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}},Wf=t=>{let{takeColors:e}=t;const{fills:[i],strokes:[o]}=e(1);return{fill:i,stroke:o}},zf=t=>{const{fill:e,stroke:i}=Wf(t);return{marker:{fill:e,stroke:i}}},Hf={SMALL:12,MEDIUM:13,LARGE:17},Uf="normal",Kf="bottom",Yf={BOTTOM:Kf,LEFT:"left",TOP:"top"},Xf={CATEGORY:"category",NUMBER:"number",TIME:"time",LOG:"log"},$f={ANGLE_CATEGORY:"angle-category",ANGLE_NUMBER:"angle-number",RADIUS_CATEGORY:"radius-category",RADIUS_NUMBER:"radius-number"},qf={},Zf={},Jf={has:t=>Object.prototype.hasOwnProperty.call(qf,t),isCartesian:t=>"cartesian"===qf[t],isPolar:t=>"polar"===qf[t],isHierarchy:t=>"hierarchy"===qf[t],get seriesTypes(){return Object.keys(qf)},get cartesianTypes(){return this.seriesTypes.filter((t=>this.isCartesian(t)))},get polarTypes(){return this.seriesTypes.filter((t=>this.isPolar(t)))},get hierarchyTypes(){return this.seriesTypes.filter((t=>this.isHierarchy(t)))}};function Qf(t,e){var i;Zf[t]=Fs([null!==(i=Zf[t])&&void 0!==i?i:{},e])}function tg(t){var e;return null!==(e=Zf[t])&&void 0!==e?e:{}}function eg(t){var e,i,o,n;return null!==(n=null!==(e=t.type)&&void 0!==e?e:null===(o=null===(i=t.series)||void 0===i?void 0:i[0])||void 0===o?void 0:o.type)&&void 0!==n?n:"line"}function ig(t){const e=eg(t);return null==e||("cartesian"===e?(Es.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Jf.isCartesian(e)||function(t){var e;return"cartesian"===(null===(e=Af(t))||void 0===e?void 0:e.find((t=>"cartesian"===t)))}(e))}function og(t){const e=eg(t);return null!=e&&("hierarchy"===e?(Es.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Jf.isHierarchy(e)||function(t){var e;return"hierarchy"===(null===(e=Af(t))||void 0===e?void 0:e.find((t=>"hierarchy"===t)))}(e))}function ng(t){const e=eg(t);return null!=e&&("polar"===e?(Es.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):Jf.isPolar(e)||function(t){var e;return"polar"===(null===(e=Af(t))||void 0===e?void 0:e.find((t=>"polar"===t)))}(e))}const rg={axes:[{type:Xf.NUMBER,position:Yf.LEFT},{type:Xf.CATEGORY,position:Yf.BOTTOM}]};const sg=Symbol("extends-chart-defaults"),ag=Symbol("extends-legend-defaults"),lg=Symbol("extends-legend-item-defaults"),cg=Symbol("extends-legend-item-marker-defaults"),dg=Symbol("extends-axes-defaults"),ug=Symbol("extends-axes-label-defaults"),hg=Symbol("extends-axes-line-defaults"),pg=Symbol("extends-axes-tick-defaults"),fg=Symbol("extends-axes-grid-line-defaults"),gg=Symbol("extends-series-defaults"),vg=Symbol("extends-cartesian-marker-defaults"),yg=Symbol("override-series-label-defaults"),mg=Symbol("default-font"),bg=Symbol("default-label-colour"),Sg=Symbol("default-inverted-label-colour"),xg=Symbol("default-inside-series-label-colour"),Cg=Symbol("default-muted-label-colour"),wg=Symbol("default-axis-grid-colour"),Eg=Symbol("default-axis-line-colour"),Og=Symbol("default-cross-lines-colour"),Dg=Symbol("default-background-colour"),Ag=Symbol("default-shadow-colour"),Tg=Symbol("default-waterfall-series-positive-colors"),Mg=Symbol("default-waterfall-series-negative-colors"),kg=Symbol("default-waterfall-series-total-colors"),Rg=Symbol("default-waterfall-series-connector-line-stroke"),Pg=Symbol("default-polar-series-stroke"),Ng=Symbol("default-diverging-series-colour-range"),Lg=Symbol("default-hierarchy-fills"),_g=Symbol("default-hierarchy-strokes");function Ig(t,e,i,o,n){const{defaultDuration:r}=i,{addPhaseFn:s,updatePhaseFn:a,removePhaseFn:l}=n,c=(o,n,s)=>{i.animate({id:`${t}_${e}_${n.id}_${o}`,groupId:t,from:0,to:1,ease:Bl,onUpdate(t,e){e&&"removed"!==o||(n.path.clear({trackChanges:!0}),s(t,n),n.checkPathDirty())},onStop(){"added"===o&&(n.path.clear({trackChanges:!0}),s(1,n),n.checkPathDirty())},duration:Kl[o].animationDuration*r,delay:Kl[o].animationDelay*r})};for(const d of o)i.isSkipped()||(c("removed",d,l),c("updated",d,a)),c("added",d,s)}const Fg=oa((t=>Dp(t)||Object.getPrototypeOf(t)===gd),"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class Gg extends al{constructor(){super(...arguments),this.enabled=!0,this.shape=vd,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:o,strokeWidth:n,strokeOpacity:r}=this;return{size:t,fill:e,fillOpacity:i,stroke:o,strokeWidth:n,strokeOpacity:r}}getDiameter(){return this.size+this.strokeWidth}}function Bg(t,e,i){let{id:o}=t;Xl(o,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1}),i.forEach((t=>t.cleanup()))}function Vg(t,e,i,o){let{id:n}=t;Yl(n,"markers",e,i,{fromFn:(t,e)=>{var i,n;const r=null!==(n=null===(i=e.midPoint)||void 0===i?void 0:i.x)&&void 0!==n?n:o,s=Vl(r/o)-.1;return{scalingX:0,scalingY:0,animationDelay:Math.max(Math.min(s,1),0),animationDuration:.2}},toFn:()=>({scalingX:1,scalingY:1})})}function jg(t){return{opacity:1,scalingX:1,scalingY:1}}function Wg(t,e){var i,o,n,r;return{translationX:null!==(o=null===(i=e.point)||void 0===i?void 0:i.x)&&void 0!==o?o:NaN,translationY:null!==(r=null===(n=e.point)||void 0===n?void 0:n.y)&&void 0!==r?r:NaN}}function zg(t,e){const i=(e,i)=>{const o=t[i][e];return Array.isArray(o)?o[0]:o},o=e=>{const{xValue:o}=e;return t.moved[o]?{point:i(o,"moved"),status:"updated"}:t.removed[o]?{point:i(o,"removed"),status:"removed"}:t.added[o]?{point:i(o,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(t,i)=>{var n,r,s,a,l,c;const{status:d,point:u}=o(i);if("unknown"===d)return{opacity:0};const h=Object.assign({translationX:null!==(r=null===(n=null===u||void 0===u?void 0:u.from)||void 0===n?void 0:n.x)&&void 0!==r?r:t.translationX,translationY:null!==(a=null===(s=null===u||void 0===u?void 0:u.from)||void 0===s?void 0:s.y)&&void 0!==a?a:t.translationY,opacity:t.opacity},Kl[d]);return"added"===e?Object.assign(Object.assign(Object.assign({},h),{opacity:0,translationX:null===(l=null===u||void 0===u?void 0:u.to)||void 0===l?void 0:l.x,translationY:null===(c=null===u||void 0===u?void 0:u.to)||void 0===c?void 0:c.y}),Kl.added):("added"===d&&(h.opacity=0),h)},toFn:(t,i)=>{var n,r;const{status:s,point:a}=o(i);if("unknown"===s)return{opacity:0};const l=Object.assign({translationX:i.point.x,translationY:i.point.y,opacity:1},Kl[s]);return"removed"===s||"removed"===e?Object.assign(Object.assign(Object.assign({},l),{translationX:null===(n=null===a||void 0===a?void 0:a.to)||void 0===n?void 0:n.x,translationY:null===(r=null===a||void 0===a?void 0:a.to)||void 0===r?void 0:r.y,opacity:0}),Kl.removed):l}}}function Hg(t){return t.reduce(((t,e)=>{let{min:i,max:o}=t;return(null==i||i.point.x>e.point.x)&&(i=e),(null==o||o.point.x<e.point.x)&&(o=e),{min:i,max:o}}),{})}function Ug(t,e,i){const o=(e.y-t.y)/(e.x-t.x);return{x:i,y:(i-t.x)*o+t.y}}function Kg(t,e,i,o){let n=-1,r=0;const s=[];for(;r<t.length;)t[r].change!==e?t[r].change!==i?(s.length>0&&(o(s,n,r),s.length=0),n=r,r++):r++:(s.push(t[r]),r++);s.length>0&&o(s,n,r)}function Yg(t,e){Kg(t,"out","in",((i,o,n)=>{var r,s;-1===o&&t[n]?i.forEach((e=>e.to=t[n].from)):n===t.length&&t[o]?i.forEach((e=>e.to=t[o].from)):"intersect"===e&&(null===(r=t[o])||void 0===r?void 0:r.from)&&(null===(s=t[n])||void 0===s?void 0:s.from)?i.forEach((e=>e.to=Ug(t[o].from,t[n].from,e.from.x))):i.forEach((t=>t.to=t.from))})),Kg(t,"in","out",((i,o,n)=>{var r,s;-1===o&&t[n]?i.forEach((e=>e.from=t[n].to)):n===t.length&&t[o]?i.forEach((e=>e.from=t[o].to)):"intersect"===e&&(null===(r=t[o])||void 0===r?void 0:r.to)&&(null===(s=t[n])||void 0===s?void 0:s.to)?i.forEach((e=>e.from=Ug(t[o].to,t[n].to,e.to.x))):i.forEach((t=>t.from=t.to))}))}function Xg(t,e,i){const o=isNaN(t.x)?e.x:t.x,n=isNaN(t.y)?e.y:t.y,r=e.x-t.x,s=e.y-t.y;return{x:o+(isNaN(r)?0:r*i),y:n+(isNaN(s)?0:s*i)}}function $g(t,e,i){const{path:o}=i;let n;for(const r of t){const t=e[r.change];if(null==t)continue;const{from:i,to:s}=r;if(null==i||null==s)continue;const{x:a,y:l}=Xg(i,s,t);if(!1===r.moveTo)o.lineTo(a,l);else if(!0!==r.moveTo&&n){if(n){const e="in"===r.moveTo?t:1-t,{x:i,y:s}=Xg(n,{x:a,y:l},e);o.lineTo(i,s),o.moveTo(a,l)}}else o.moveTo(a,l);n={x:a,y:l}}}function qg(t,e,i){let{id:o}=t;Xl(o,"path_properties",e,i,{clipScalingX:0},{clipScalingX:1},{start:{clipMode:"normal"},finish:{clipMode:void 0}})}function Zg(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function Jg(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"===typeof t){return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0]}if("log"===e.type&&"number"===typeof t)return e.convert(t);const i=e.domain.findIndex((e=>e===t));return i>=0?e.range[i]:NaN}function Qg(t,e){const i=Number(t),o=Number(e);return isNaN(i)||isNaN(o)?t===e:Math.abs(o-i)<.25}function tv(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?!!t:t?"in":"out"}function ev(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o,n,r,s;const{backfillSplitMode:a="intersect"}=i,l=e=>{var i,o;return{x:Jg(null!==(i=e.xValue)&&void 0!==i?i:NaN,t.scales.x),y:Jg(null!==(o=e.yValue)&&void 0!==o?o:NaN,t.scales.y)}},c=t=>{var i,o;return{x:Jg(null!==(i=t.xValue)&&void 0!==i?i:NaN,e.scales.x),y:Jg(null!==(o=t.yValue)&&void 0!==o?o:NaN,e.scales.y)}},d=[],u={added:{},moved:{},removed:{}},h=function(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"move";t&&(isNaN(t.point.x)||isNaN(t.point.y))&&(t=e);const n={from:null===t||void 0===t?void 0:t.point,to:null===e||void 0===e?void 0:e.point,moveTo:tv(null===t||void 0===t?void 0:t.point.moveTo,null===e||void 0===e?void 0:e.point.moveTo),change:o};"move"===o?(u.moved[i]=n,y++,m++):"in"===o?(u.added[i]=n,m++):"out"===o&&(u.removed[i]=n,y++),d.push(n)},{min:p,max:f}=Hg(e.nodeData),{min:g,max:v}=Hg(t.nodeData);let y=0,m=0;for(;y<e.nodeData.length||m<t.nodeData.length;){const i=e.nodeData[y],a=t.nodeData[m],d=i?l(i):void 0,u=a?c(a):void 0,b=void 0;if(d&&Qg(d.x,null===a||void 0===a?void 0:a.point.x))h(i,a,a.xValue,"move");else if(d&&d.x<(null!==(o=null===g||void 0===g?void 0:g.point.x)&&void 0!==o?o:-1/0))h(i,b,i.xValue,"out");else if(d&&d.x>(null!==(n=null===v||void 0===v?void 0:v.point.x)&&void 0!==n?n:1/0))h(i,b,i.xValue,"out");else if(u&&u.x<(null!==(r=null===p||void 0===p?void 0:p.point.x)&&void 0!==r?r:-1/0))h(b,a,a.xValue,"in");else if(u&&u.x>(null!==(s=null===f||void 0===f?void 0:f.point.x)&&void 0!==s?s:1/0))h(b,a,a.xValue,"in");else if(d&&d.x<(null===a||void 0===a?void 0:a.point.x))h(i,b,i.xValue,"out");else if(u&&u.x<(null===i||void 0===i?void 0:i.point.x))h(b,a,a.xValue,"in");else if(i)h(i,b,i.xValue,"out");else{if(!a)throw new Error("Unable to process points");h(b,a,a.xValue,"in")}}return Yg(d,a),{result:d,resultMap:u}}function iv(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var n,r,s;const{backfillSplitMode:a="intersect",multiDatum:l=!1}=o,c=[],d={added:{},moved:{},removed:{}},u={added:{},moved:{},removed:{}};let h,p;const f=(t,e)=>{var i,o;const n="move"===e.change?"moved":"in"===e.change?"added":"removed";l?(null!==(i=(o=u[n])[t])&&void 0!==i||(o[t]=[]),u[n][t].push(e)):d[n][t]=e,h=e,p=t};let g=0,v=0,y=!1;for(;g<e.nodeData.length||v<t.nodeData.length;){const o=e.nodeData[g],a=t.nodeData[v];let d;if((null===o||void 0===o?void 0:o.xValue)===(null===a||void 0===a?void 0:a.xValue))d={change:"move",moveTo:tv(null!==(n=o.point.moveTo)&&void 0!==n&&n,a.point.moveTo),from:o.point,to:a.point},f(o.xValue,d),g++,v++;else if(i.removed.indexOf(null===o||void 0===o?void 0:o.xValue)>=0)d={change:"out",moveTo:null!==(r=o.point.moveTo)&&void 0!==r&&r,from:o.point},f(o.xValue,d),g++;else if(i.added.indexOf(null===a||void 0===a?void 0:a.xValue)>=0)d={change:"in",moveTo:null!==(s=a.point.moveTo)&&void 0!==s&&s,to:a.point},f(a.xValue,d),v++;else if(l&&h&&p===(null===o||void 0===o?void 0:o.xValue))d=Object.assign({},h),f(o.xValue,d),g++;else{if(!l||!h||p!==(null===a||void 0===a?void 0:a.xValue)){y=!0;break}d=Object.assign({},h),f(a.xValue,d),v++}c.push(d)}let m=-1/0;return y||(y=c.some((t=>{const{change:e,to:{x:i=-1/0}={}}=t;if("out"===e)return;const o=i<m;return m=i,o}))),y?{result:void 0,resultMap:void 0}:(Yg(c,a),l?{result:c,resultMap:u}:{result:c,resultMap:d})}function ov(t,e,i,o,n){const r=function(t,e){let i="updated";const o=t=>t.visible;return!o(e)&&o(t)?i="added":o(e)&&!o(t)&&(i="removed"),i}(t,e),s=function(t,e){const i="none"===e?"updated":t,o={fromFn:e=>{let o;return o="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},Object.assign(Object.assign({},Kl[i]),o)},toFn:t=>Object.assign({},Kl[i])};return"fade"===e?{fromFn:e=>{const i="added"===t?0:e.opacity;return Object.assign({opacity:i},o.fromFn(e))},toFn:e=>{const i="removed"===t?0:1;return Object.assign({opacity:i},o.toFn(e))}}:o}(r,o);return{status:r,path:{addPhaseFn:(t,e)=>{n(i,{move:1,in:t},e)},updatePhaseFn:(t,e)=>{n(i,{move:t},e)},removePhaseFn:(t,e)=>{n(i,{move:0,out:t},e)}},pathProperties:s}}var nv;function rv(t){const{points:e}=t.fillData;return{top:e.slice(0,e.length/2),bottom:e.slice(e.length/2).reverse()}}function sv(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function av(t,e,i){var o;const n="category"===(null===(o=t.scales.x)||void 0===o?void 0:o.type);let r="updated";e.visible&&!t.visible?r="removed":!e.visible&&t.visible&&(r="added");const{resultMap:s}=n&&i?iv(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):ev(t,e,{backfillSplitMode:"static"}),{top:a,bottom:l}=n&&i?function(t,e,i){const o=rv(e),n=rv(t),r={multiDatum:!0};return{top:iv(sv("top",t,n),sv("top",e,o),i,r),bottom:iv(sv("bottom",t,n),sv("bottom",e,o),i,r)}}(t,e,i):function(t,e){const i=rv(e),o=rv(t);return{top:ev(sv("top",t,o),sv("top",e,i)),bottom:ev(sv("bottom",t,o),sv("bottom",e,i))}}(t,e);if(void 0===s||void 0===a.result||void 0===l.result)return;const c=[...a.result,...l.result.reverse()];return{fill:ov(t,e,c,"none",$g),marker:zg(s,r)}}cs([ea(pa),sl({redraw:nl.MAJOR}),ds("design:type",Object)],Gg.prototype,"enabled",void 0),cs([ea(Fg),sl({redraw:nl.MAJOR}),ds("design:type",Object)],Gg.prototype,"shape",void 0),cs([ea(Aa(0)),sl({redraw:nl.MAJOR}),ds("design:type",Number)],Gg.prototype,"size",void 0),cs([ea(wa),sl({redraw:nl.MAJOR}),ds("design:type",String)],Gg.prototype,"fill",void 0),cs([ea(Ta(0,1)),sl({redraw:nl.MAJOR}),ds("design:type",Number)],Gg.prototype,"fillOpacity",void 0),cs([ea(wa),sl({redraw:nl.MAJOR}),ds("design:type",String)],Gg.prototype,"stroke",void 0),cs([ea(Ta(0)),sl({redraw:nl.MAJOR}),ds("design:type",Number)],Gg.prototype,"strokeWidth",void 0),cs([ea(Ta(0,1)),sl({redraw:nl.MAJOR}),ds("design:type",Number)],Gg.prototype,"strokeOpacity",void 0),cs([ea(ha),sl({redraw:nl.MAJOR}),ds("design:type",Function)],Gg.prototype,"formatter",void 0),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(nv||(nv={}));class lv extends lf{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[Ad.NEAREST_BY_MAIN_AXIS_FIRST,Ad.EXACT_SHAPE_MATCH],animationResetFns:{path:Zg({getOpacity:()=>this.getOpacity()}),label:zd,marker:(t,e)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),Wg(0,e))}}),this.tooltip=new du,this.marker=new Gg,this.label=new dd,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this.strokeWidth=2,this.shadow=void 0}processData(t){return us(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,normalizedTo:o,data:n,visible:r,seriesGrouping:{groupIndex:s=this.id}={}}=this;if(null==e||null==i||null==n)return;const a=!this.ctx.animationManager.isSkipped(),{isContinuousX:l,isContinuousY:c}=this.isContinuous(),d=[`area-stack-${s}-yValues`,`area-stack-${s}-yValues-trailing`,`area-stack-${s}-yValues-prev`,`area-stack-${s}-yValues-trailing-prev`,`area-stack-${s}-yValues-marker`],u=[],h=o&&isFinite(o)?o:void 0;h&&(u.push(ed(this,[d[0],d[1],d[4]],h,"range")),u.push(ed(this,[d[2],d[3]],h,"range"))),!l&&a&&this.processedData&&u.push(ld(this.processedData)),a&&u.push(nd(this));const p={invalidValue:null};r||(p.forceValue=0),yield this.requestDataModel(t,n,{props:[Rd(this,e,l,{id:"xValue"}),Pd(this,i,c,Object.assign({id:"yValueRaw"},p)),...Ld(this,i,c,"window","current",Object.assign(Object.assign({id:"yValueEnd"},p),{groupId:d[0]})),...Ld(this,i,c,"window-trailing","current",Object.assign(Object.assign({id:"yValueStart"},p),{groupId:d[1]})),...Ld(this,i,c,"window","last",Object.assign(Object.assign({id:"yValuePreviousEnd"},p),{groupId:d[2]})),...Ld(this,i,c,"window-trailing","last",Object.assign(Object.assign({id:"yValuePreviousStart"},p),{groupId:d[3]})),...Ld(this,i,c,"normal","current",Object.assign(Object.assign({id:"yValueCumulative"},p),{groupId:d[4]})),...u],groupByKeys:!0}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:o}=this;if(!e||!i)return[];const n=o[ol.X],r=o[ol.Y],s=i.resolveProcessedDataDefById(this,"xValue"),a=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if(t===ol.X)return"key"===(null===s||void 0===s?void 0:s.def.type)&&"category"===s.def.valueType?a:qh(ms(a),n);if(r instanceof vf||r instanceof mf)return qh(l,r);return qh([l[0]>0?0:l[0],l[1]<0?0:l[1]],r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return us(this,void 0,void 0,(function*(){const{axes:i,data:o,processedData:{data:n}={},dataModel:r}=this,s=i[ol.X],a=i[ol.Y];if(!s||!a||!o||!r)return[];const{yKey:l="",xKey:c="",marker:d,label:u,fill:h,stroke:p}=this,{scale:f}=s,{scale:g}=a,v=mc.is(g),y=(null!==(e=f.bandwidth)&&void 0!==e?e:0)/2,m=r.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),b=t=>{const{point:e}=t,i=ls(t,["point"]);return Object.assign(Object.assign({},i),{point:Object.assign(Object.assign({},e),{moveTo:!0})})},S=(t,e,i)=>{const o=f.convert(t)+y,n=g.convert(e);return[{point:{x:o,y:g.convert(i)},yValue:i,xValue:t},{point:{x:o,y:n},yValue:e,xValue:t}]},x=(t,e,i)=>{let o;const n=this.normalizedTo&&isFinite(this.normalizedTo),r=n&&v&&Yc(i);(!n&&!isNaN(i)||r)&&(o=e);return{x:f.convert(t)+y,y:g.convert(o),size:d.size}},C=l,w=[],E=[],O={itemId:C,fillData:{itemId:C,points:[]},strokeData:{itemId:C,points:[]},labelData:w,nodeData:E,scales:t.calculateScaling.call(this),visible:this.visible},D=O.fillData.points,A=[],T=O.strokeData.points;let M,k=-1,R=-1/0;return null===n||void 0===n||n.forEach((t=>{const{keys:e,keys:[i],datum:o,values:n}=t;n.forEach(((t,n)=>{var s,a,f;k++;const g=o[n],v=r.resolveProcessedDataDefsValues(m,{keys:e,values:t}),{yValueRaw:y,yValueCumulative:O}=v;let{yValueStart:P,yValueEnd:N,yValuePreviousStart:L,yValuePreviousEnd:_}=v;const I=null!=y,F=x(i,+O,y);if(I&&d&&E.push({index:k,series:this,itemId:C,datum:g,midPoint:{x:F.x,y:F.y},cumulativeValue:N,yValue:y,xValue:i,yKey:l,xKey:c,point:F,fill:null!==(s=d.fill)&&void 0!==s?s:h,stroke:null!==(a=d.stroke)&&void 0!==a?a:p,strokeWidth:null!==(f=d.strokeWidth)&&void 0!==f?f:this.getStrokeWidth(this.strokeWidth)}),I&&u){const t=this.getLabelText(u,{value:y,datum:g,xKey:c,yKey:l,xName:this.xName,yName:this.yName},(t=>$c(t)?t.toFixed(2):String(t)));w.push({index:k,series:this,itemId:l,datum:g,x:F.x,y:F.y,label:t?{text:t,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}null!=R&&null!=y||(P=null!==P&&void 0!==P?P:0,N=null!==P&&void 0!==P?P:0,L=null!==L&&void 0!==L?L:0,_=null!==L&&void 0!==L?L:0);const[G,B]=S(M,L,_),[V,j]=S(i,P,N);null!=M&&null!=i&&(D.push(G),A.push(B),D.push(V),A.push(j)),I&&null!=R&&k>0&&(T.push(b(G)),T.push(V)),M=i,R=y}))})),T.length>0&&(T[0]=b(T[0])),A.reverse(),D.push(...A),[O]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Ap(t))}updatePathNodes(t){return us(this,void 0,void 0,(function*(){const{opacity:e,visible:i,animationEnabled:o}=t,[n,r]=t.paths,{seriesRectHeight:s,seriesRectWidth:a}=this.nodeDataDependencies,l=this.getStrokeWidth(this.strokeWidth);r.setProperties({tag:nv.Stroke,fill:void 0,lineJoin:r.lineCap="round",pointerEvents:pl.None,stroke:this.stroke,strokeWidth:l,strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,opacity:e,visible:i}),n.setProperties({tag:nv.Fill,stroke:void 0,lineJoin:"round",pointerEvents:pl.None,fill:this.fill,fillOpacity:this.fillOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,strokeOpacity:this.strokeOpacity,fillShadow:this.shadow,opacity:e,visible:i||o,strokeWidth:l});const c=t=>{var e,i;null==t.clipPath&&(t.clipPath=new Nc,t.clipScalingX=1,t.clipScalingY=1),null===(e=t.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=t.clipPath)||void 0===i||i.rect(-25,-25,(null!==a&&void 0!==a?a:0)+50,(null!==s&&void 0!==s?s:0)+50)};c(r),c(n)}))}updatePaths(t){return us(this,void 0,void 0,(function*(){this.updateAreaPaths([t.paths],[t.contextData])}))}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(((e,i)=>{let{fillData:o}=e;const[n]=t[i],{path:r}=n;r.clear({trackChanges:!0});for(const{point:t}of o.points)t.moveTo?r.moveTo(t.x,t.y):r.lineTo(t.x,t.y);r.closePath(),n.checkPathDirty()}))}updateStrokePath(t,e){e.forEach(((e,i)=>{let{strokeData:o}=e;const[,n]=t[i],{path:r}=n;r.clear({trackChanges:!0});for(const{point:t}of o.points)t.moveTo?r.moveTo(t.x,t.y):r.lineTo(t.x,t.y);n.checkPathDirty()}))}updateMarkerSelection(t){return us(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:o}}=this,n=o&&e?e:[];return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(n)}))}updateMarkerNodes(t){return us(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:o="",yKey:n="",marker:r,fill:s,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:d}=this,u=jc(i&&this.highlightStyle.item,r.getStyle(),{fill:s,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:d});e.each(((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:o,yKey:n},u)})),i||this.marker.markClean()}))}updateLabelSelection(t){return us(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.tag=nv.Label}))}))}updateLabelNodes(t){return us(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:o,fontWeight:n,fontSize:r,fontFamily:s,color:a}=this.label;e.each(((t,e)=>{const{x:l,y:c,label:d}=e;d&&i&&this.visible?(t.fontStyle=o,t.fontWeight=n,t.fontSize=r,t.fontFamily=s,t.textAlign=d.textAlign,t.textBaseline=d.textBaseline,t.text=d.text,t.x=l,t.y=c-10,t.fill=a,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){const{xKey:e,id:i,axes:o,xName:n,yName:r,tooltip:s,marker:a,dataModel:l}=this,{yKey:c,xValue:d,yValue:u,datum:h}=t,p=o[ol.X],f=o[ol.Y];if(!e||!c||!(p&&f&&$c(u))||!l)return"";const g=p.formatDatum(d),v=f.formatDatum(u),y=zc(r),m=zc(g+": "+v),b=jc({fill:this.fill},a.getStyle(),{stroke:this.stroke,strokeWidth:this.strokeWidth}),{fill:S}=this.getMarkerStyle(a,{datum:t,xKey:e,yKey:c,highlighted:!1},b);return s.toTooltipHtml({title:y,content:m,backgroundColor:S},{datum:h,xKey:e,xName:n,yKey:c,yName:r,color:S,title:y,seriesId:i})}getLegendData(t){var e,i,o,n,r;const{data:s,id:a,xKey:l,yKey:c,yName:d,marker:u,fill:h,stroke:p,fillOpacity:f,strokeOpacity:g,visible:v}=this;return(null===s||void 0===s?void 0:s.length)&&l&&c&&"category"===t?[{legendType:t,id:a,itemId:c,seriesId:a,enabled:v,label:{text:null!==d&&void 0!==d?d:c},marker:{shape:u.shape,fill:null!==(e=u.fill)&&void 0!==e?e:h,stroke:null!==(i=u.stroke)&&void 0!==i?i:p,fillOpacity:null!==(o=u.fillOpacity)&&void 0!==o?o:f,strokeOpacity:null!==(n=u.strokeOpacity)&&void 0!==n?n:g,strokeWidth:null!==(r=u.strokeWidth)&&void 0!==r?r:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:o,paths:n}=t,{animationManager:r}=this.ctx,{seriesRectWidth:s=0}=this.nodeDataDependencies;this.updateAreaPaths(n,o),qg(this,r,n.flat()),pu(e,Wg),Vg(this,r,e,s),jd(this,"labels",r,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:o}=this.ctx,{markerSelections:n,labelSelections:r,contextData:s,paths:a,previousContextData:l}=t;if(super.resetAllAnimation(t),0===s.length||!l||0===l.length)return o.skipCurrentBatch(),void this.updateAreaPaths(a,s);const[[c,d]]=a,[u]=s,[h]=l,p=av(u,h,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===p)return o.skipCurrentBatch(),void this.updateAreaPaths(a,s);Yl(this.id,"marker_update",o,n,p.marker),Yl(this.id,"fill_path_properties",o,[c],p.fill.pathProperties),Ig(this.id,"fill_path_update",o,[c],p.fill.path),this.updateStrokePath(a,s),function(t,e,i,o){let{id:n}=t;Xl(n,e,i,o,{opacity:0},{opacity:1},Wl)}(this,"stroke",o,[d]),jd(this,"labels",o,r)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new Cc}}lv.className="AreaSeries",lv.type="area",cs([ea(Ca),ds("design:type",String)],lv.prototype,"fill",void 0),cs([ea(Ca),ds("design:type",String)],lv.prototype,"stroke",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],lv.prototype,"fillOpacity",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],lv.prototype,"strokeOpacity",void 0),cs([ea(ja),ds("design:type",Array)],lv.prototype,"lineDash",void 0),cs([ea(Aa(0)),ds("design:type",Number)],lv.prototype,"lineDashOffset",void 0),cs([ea(va),ds("design:type",String)],lv.prototype,"xKey",void 0),cs([ea(va),ds("design:type",String)],lv.prototype,"xName",void 0),cs([ea(va),ds("design:type",String)],lv.prototype,"yKey",void 0),cs([ea(va),ds("design:type",String)],lv.prototype,"yName",void 0),cs([ea(Ta(0)),ds("design:type",Number)],lv.prototype,"normalizedTo",void 0),cs([ea(Aa(0)),ds("design:type",Object)],lv.prototype,"strokeWidth",void 0);const cv={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:lv,stackable:!0,seriesDefaults:rg,themeTemplate:{__extends__:gg,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:Ag,xOffset:3,yOffset:3,blur:5},marker:{__extends__:vg,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:mg,color:bg,formatter:void 0}},paletteFactory:t=>{const{marker:e}=zf(t);return{fill:e.fill,stroke:e.stroke,marker:e}}};class dv extends lf{constructor(){super(...arguments),this.direction="vertical"}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return"horizontal"===this.direction}getBarDirection(){return this.shouldFlipXY()?ol.X:ol.Y}getCategoryDirection(){return this.shouldFlipXY()?ol.Y:ol.X}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}}function uv(t,e){const{startingX:i,startingY:o}=function(t,e){const i=e[t?ol.Y:ol.X];let o=1/0,n=0;if(!i)return{startingX:o,startingY:n};t?n=i.scale.convert(mc.is(i.scale)?0:Math.max(...i.range)):o=i.scale.convert(mc.is(i.scale)?0:Math.min(...i.range));return{startingX:o,startingY:n}}(t,e),n=t=>{var e;return qs(null!==(e=t.yValue)&&void 0!==e?e:0)};return{isVertical:t,calculate:(e,r)=>{let s=t?e.x:i,a=t?o:e.y,l=t?e.width:0,c=t?0:e.height;return r&&(isNaN(s)||isNaN(a))&&(({x:s,y:a}=r),l=t?r.width:0,c=t?0:r.height,t&&!n(r)?a+=r.height:!t&&n(r)&&(s+=r.width)),{x:s,y:a,width:l,height:c}}}}function hv(t){const e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,o,n)=>"removed"===n||e(o)?t.calculate(o,i.previousDatum):{x:o.x,y:o.y,width:o.width,height:o.height},fromFn:(i,o,n)=>{"updated"===n&&e(o)?n="removed":"updated"===n&&e(i.previousDatum)&&(n="added");let r={x:i.x,y:i.y,width:i.width,height:i.height};return"unknown"!==n&&"added"!==n||(r=t.calculate(o,i.previousDatum)),Object.assign(Object.assign({},r),Kl[n])}}}function pv(t,e){let{x:i,y:o,width:n,height:r}=e;return{x:i,y:o,width:n,height:r}}var fv;cs([ea(il),ds("design:type",String)],dv.prototype,"direction",void 0),function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}(fv||(fv={}));class gv extends dd{constructor(){super(...arguments),this.placement="inside"}}cs([ea(Na("inside","outside")),ds("design:type",String)],gv.prototype,"placement",void 0);class vv extends dv{constructor(t){super({moduleCtx:t,pickModes:[Ad.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationResetFns:{datum:pv,label:zd}}),this.label=new gv,this.tooltip=new du,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.stackGroup=void 0,this.strokeWidth=1,this.shadow=void 0,this.groupScale=new Ys,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===ol.X?t===ol.X?ol.Y:ol.X:t}processData(t){var e,i,o,n;return us(this,void 0,void 0,(function*(){const{xKey:r,yKey:s,normalizedTo:a,seriesGrouping:{groupIndex:l=this.id}={},data:c=[]}=this;if(null==r||null==s||null==c)return;const d=!this.ctx.animationManager.isSkipped(),u=Math.abs(null!==a&&void 0!==a?a:NaN),h=mc.is(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale),p=mc.is(null===(i=this.getValueAxis())||void 0===i?void 0:i.scale),f=`bar-stack-${l}-yValues`,g=`${f}-trailing`,v=u&&isFinite(u)?u:void 0,y=[];v&&y.push(ed(this,[f,g],v,"range")),d&&this.processedData&&y.push(ld(this.processedData)),d&&y.push(nd(this));const m=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(t,c,{props:[Rd(this,r,h,{id:"xValue"}),Pd(this,s,p,Object.assign({id:"yValue-raw",invalidValue:null},m)),...Ld(this,s,p,"normal","current",Object.assign({id:"yValue-end",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},m)),...Ld(this,s,p,"trailing","current",Object.assign({id:"yValue-start",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0},m)),...h?[Jc]:[],...y],groupByKeys:!0});this.smallestDataInterval={x:null!==(n=null===(o=b.reduced)||void 0===o?void 0:o.smallestKeyInterval)&&void 0!==n?n:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:o}=this;if(!i||!o)return[];const{reduced:{[Jc.property]:n}={}}=i,r=this.getCategoryAxis(),s=this.getValueAxis(),a=o.resolveProcessedDataDefById(this,"xValue"),l=o.getDomain(this,"xValue","key",i),c=o.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===(null===a||void 0===a?void 0:a.def.type)&&"category"===(null===a||void 0===a?void 0:a.def.valueType))return l;const i=null!=n&&isFinite(n)?n:0,o=null!==(e=ms(l))&&void 0!==e?e:[NaN,NaN];return t===ol.Y?qh([o[0]+-i,o[1]],r):qh([o[0],o[1]+i],r)}if(this.getValueAxis()instanceof vf)return qh(c,s);return qh([c[0]>0?0:c[0],c[1]<0?0:c[1]],s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return us(this,void 0,void 0,(function*(){const{dataModel:e}=this,i=this.getCategoryAxis(),o=this.getValueAxis();if(!(e&&i&&o))return[];const n=i.scale,r=o.scale,{groupScale:s,yKey:a="",xKey:l="",fill:c,stroke:d,strokeWidth:u,label:h,processedData:p,ctx:{seriesStateManager:f},smallestDataInterval:g}=this,v=mc.is(n)?n.calcBandwidth(null===g||void 0===g?void 0:g.x):n.bandwidth,y=[],{index:m,visibleGroupCount:b}=f.getVisiblePeerGroupIndex(this);for(let t=0;t<b;t++)y.push(String(t));s.domain=y,s.range=[0,null!==v&&void 0!==v?v:0],i instanceof wh?s.paddingInner=i.groupPaddingInner:s.padding=i instanceof _h?.1:0,s.round=0!==s.padding;const S=s.bandwidth>=1?s.bandwidth:s.rawBandwidth,x=e.resolveProcessedDataIndexById(this,"xValue").index,C=e.resolveProcessedDataIndexById(this,"yValue-raw").index,w=e.resolveProcessedDataIndexById(this,"yValue-start").index,E=e.resolveProcessedDataIndexById(this,"yValue-end").index,O=!this.ctx.animationManager.isSkipped(),D={itemId:a,nodeData:[],labelData:[],scales:t.calculateScaling.call(this),visible:this.visible||O};return null===p||void 0===p||p.data.forEach((t=>{let{keys:e,datum:i,values:o}=t;const p=e[x],f=n.convert(p),g=+o[0][E],v=+o[0][w],y=o[0][C],b=f+s.convert(String(m));if(isNaN(g))return;const O=r.convert(g),A=r.convert(v),T=this.getBarDirection()===ol.X,M={x:T?Math.min(O,A):b,y:T?b:Math.min(O,A),width:T?Math.abs(A-O):S,height:T?S:Math.abs(A-O)},{fontStyle:k,fontWeight:R,fontSize:P,fontFamily:N,color:L,placement:_}=h,I=this.getLabelText(this.label,{datum:i[0],value:y,xKey:l,yKey:a,xName:this.xName,yName:this.yName,legendItemName:this.legendItemName},(t=>$c(t)?t.toFixed(2):"")),F=I?Object.assign({text:I,fill:L,fontStyle:k,fontWeight:R,fontSize:P,fontFamily:N},function(t){let{isPositive:e,isVertical:i,placement:o,padding:n=0,rect:r}=t,s=r.x+r.width/2,a=r.y+r.height/2,l="center",c="middle";switch(o){case"start":i?(a=e?r.y+r.height+n:r.y-n,c=e?"top":"bottom"):(s=e?r.x-n:r.x+r.width+n,l=e?"start":"end");break;case"outside":case"end":i?(a=e?r.y-n:r.y+r.height+n,c=e?"bottom":"top"):(s=e?r.x+r.width+n:r.x-n,l=e?"start":"end")}return{x:s,y:a,textAlign:l,textBaseline:c}}({isPositive:y>=0,isVertical:!T,placement:_,rect:M})):void 0,G=this.shouldFlipXY()?M.height:M.width,B={series:this,itemId:a,datum:i[0],cumulativeValue:g,xValue:p,yValue:y,yKey:a,xKey:l,capDefaults:{lengthRatioMultiplier:G,lengthMax:G},x:M.x,y:M.y,width:M.width,height:M.height,midPoint:{x:M.x+M.width/2,y:M.y+M.height/2},fill:c,stroke:d,strokeWidth:u,label:F};D.nodeData.push(B),D.labelData.push(B)})),[D]}))}nodeFactory(){return new tf}updateDatumSelection(t){return us(this,void 0,void 0,(function*(){return t.datumSelection.update(t.nodeData,(t=>{t.tag=fv.Bar}),(t=>t.xValue))}))}updateDatumNodes(t){return us(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{yKey:o="",fill:n,stroke:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,shadow:d,formatter:u,id:h,highlightStyle:{item:p},ctx:f,stackGroup:g}=this,v=this.axes[ol.X],y=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[e,i]=t;return!(0!==e||1!==i)}(null===v||void 0===v?void 0:v.visibleRange),m=this.getCategoryDirection()===ol.X;e.each(((t,e)=>{const v={fill:n,stroke:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,strokeWidth:this.getStrokeWidth(this.strokeWidth)},b=m?e.width>0:e.height>0,S=function(t){var e,i,o,n,r,{datum:s,isHighlighted:a,style:l,highlightStyle:c,formatter:d,seriesId:u,ctx:{callbackCache:h}}=t,p=ls(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:f,fillOpacity:g,stroke:v,strokeWidth:y}=jc(a&&c,l),{strokeOpacity:m,fillShadow:b,lineDash:S,lineDashOffset:x}=l;let C;return d&&(C=h.call(d,Object.assign({datum:s.datum,xKey:s.xKey,fill:f,stroke:v,strokeWidth:y,highlighted:a,seriesId:u},p))),{fill:null!==(e=null===C||void 0===C?void 0:C.fill)&&void 0!==e?e:f,stroke:null!==(i=null===C||void 0===C?void 0:C.stroke)&&void 0!==i?i:v,strokeWidth:null!==(o=null===C||void 0===C?void 0:C.strokeWidth)&&void 0!==o?o:y,fillOpacity:null!==(n=null===C||void 0===C?void 0:C.fillOpacity)&&void 0!==n?n:g,strokeOpacity:null!==(r=null===C||void 0===C?void 0:C.strokeOpacity)&&void 0!==r?r:m,lineDash:S,lineDashOffset:x,fillShadow:b}}({datum:e,isHighlighted:i,style:v,highlightStyle:p,formatter:u,seriesId:h,stackGroup:g,ctx:f,yKey:o});S.crisp=y,S.visible=b,function(t){let{rect:e,config:i}=t;const{crisp:o=!0,fill:n,stroke:r,strokeWidth:s,fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:d,fillShadow:u,visible:h=!0}=i;e.crisp=o,e.fill=n,e.stroke=r,e.strokeWidth=s,e.fillOpacity=a,e.strokeOpacity=l,e.lineDash=c,e.lineDashOffset=d,e.fillShadow=u,e.visible=h}({rect:t,config:S})}))}))}updateLabelSelection(t){return us(this,void 0,void 0,(function*(){const e=this.label.enabled?t.labelData:[];return t.labelSelection.update(e,(t=>{t.tag=fv.Label,t.pointerEvents=pl.None}))}))}updateLabelNodes(t){return us(this,void 0,void 0,(function*(){t.labelSelection.each(((t,e)=>{!function(t,e,i){if(e.enabled&&i){const{x:o,y:n,text:r,textAlign:s,textBaseline:a}=i,{color:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h}=e;t.setProperties({visible:!0,x:o,y:n,text:r,fill:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h,textAlign:s,textBaseline:a})}else t.visible=!1}(t,this.label,e.label)}))}))}getTooltipHtml(t){var e;const{xKey:i,yKey:o,processedData:n,ctx:{callbackCache:r}}=this,s=this.getCategoryAxis(),a=this.getValueAxis(),{xValue:l,yValue:c,datum:d}=t;if(!n||!i||!o||!s||!a)return"";const{xName:u,yName:h,fill:p,stroke:f,tooltip:g,formatter:v,id:y,stackGroup:m}=this,b=this.getStrokeWidth(this.strokeWidth),S=s.formatDatum(l),x=a.formatDatum(c),C=zc(h),w=zc(S+": "+x);let E;v&&(E=r.call(v,{datum:d,fill:p,stroke:f,strokeWidth:b,highlighted:!1,xKey:i,yKey:o,seriesId:y,stackGroup:m}));const O=null!==(e=null===E||void 0===E?void 0:E.fill)&&void 0!==e?e:p;return g.toTooltipHtml({title:C,content:w,backgroundColor:O},Object.assign({datum:d,xKey:i,xName:u,yKey:o,yName:h,color:O,title:C,seriesId:y,stackGroup:m},this.getModuleTooltipParams(d)))}getLegendData(t){var e;const{id:i,data:o,xKey:n,yKey:r,yName:s,legendItemName:a,fill:l,stroke:c,strokeWidth:d,fillOpacity:u,strokeOpacity:h,visible:p,showInLegend:f}=this;return"category"===t&&f&&(null===o||void 0===o?void 0:o.length)&&n&&r?[{legendType:"category",id:i,itemId:r,seriesId:i,enabled:p,label:{text:null!==(e=null!==a&&void 0!==a?a:s)&&void 0!==e?e:r},marker:{fill:l,stroke:c,fillOpacity:u,strokeOpacity:h,strokeWidth:d},legendItemName:a}]:[]}animateEmptyUpdateReady(t){let{datumSelections:e,labelSelections:i,annotationSelections:o}=t;const n=hv(uv("vertical"===this.direction,this.axes));Yl(this.id,"nodes",this.ctx.animationManager,e,n),jd(this,"labels",this.ctx.animationManager,i),jd(this,"annotations",this.ctx.animationManager,o)}animateWaitingUpdateReady(t){var e,i;const{datumSelections:o,labelSelections:n,annotationSelections:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const s=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,a=hv(uv("vertical"===this.direction,this.axes));Yl(this.id,"nodes",this.ctx.animationManager,o,a,((t,e)=>String(e.xValue)),s),jd(this,"labels",this.ctx.animationManager,n),jd(this,"annotations",this.ctx.animationManager,r)}isLabelEnabled(){return this.label.enabled}}vv.className="BarSeries",vv.type="bar",cs([ea(wa),ds("design:type",String)],vv.prototype,"fill",void 0),cs([ea(wa),ds("design:type",String)],vv.prototype,"stroke",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],vv.prototype,"fillOpacity",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],vv.prototype,"strokeOpacity",void 0),cs([ea(ja),ds("design:type",Array)],vv.prototype,"lineDash",void 0),cs([ea(Aa(0)),ds("design:type",Number)],vv.prototype,"lineDashOffset",void 0),cs([ea(ha),ds("design:type",Function)],vv.prototype,"formatter",void 0),cs([ea(va),ds("design:type",String)],vv.prototype,"xKey",void 0),cs([ea(va),ds("design:type",String)],vv.prototype,"xName",void 0),cs([ea(va),ds("design:type",String)],vv.prototype,"yKey",void 0),cs([ea(va),ds("design:type",String)],vv.prototype,"yName",void 0),cs([ea(va),ds("design:type",String)],vv.prototype,"stackGroup",void 0),cs([ea(Ta()),ds("design:type",Number)],vv.prototype,"normalizedTo",void 0),cs([ea(Aa(0)),ds("design:type",Number)],vv.prototype,"strokeWidth",void 0);const yv={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:vv,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:Xf.NUMBER,position:Yf.LEFT},{type:Xf.CATEGORY,position:Yf.BOTTOM}]},swapDefaultAxesCondition:t=>"horizontal"===(null===t||void 0===t?void 0:t.direction),themeTemplate:{__extends__:gg,fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:Uf,fontSize:12,fontFamily:mg,color:xg,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:Ag,xOffset:3,yOffset:3,blur:5}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:.3}}},paletteFactory:Wf};class mv extends af{constructor(t,e,i,o){super(t,e,i,o),this.sizeKey=o.sizeKey}}class bv extends Gg{constructor(){super(...arguments),this.maxSize=30,this.domain=void 0}}cs([ea(Aa(0)),sl({redraw:nl.MAJOR}),ds("design:type",Object)],bv.prototype,"maxSize",void 0),cs([ea(Ra),sl({redraw:nl.MAJOR}),ds("design:type",Array)],bv.prototype,"domain",void 0);class Sv extends lf{constructor(t){super({moduleCtx:t,pickModes:[Ad.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Ad.NEAREST_NODE,Ad.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:zd,marker:jg}}),this.NodeClickEvent=mv,this.sizeScale=new bc,this.marker=new bv,this.label=new dd,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Jp,this.tooltip=new du}processData(t){var e,i;return us(this,void 0,void 0,(function*(){const{xKey:o,yKey:n,sizeKey:r,labelKey:s,colorScale:a,colorDomain:l,colorRange:c,colorKey:d,marker:u,data:h}=this;if(null==o||null==n||null==r||null==h)return;const{isContinuousX:p,isContinuousY:f}=this.isContinuous(),{dataModel:g,processedData:v}=yield this.requestDataModel(t,h,{props:[Rd(this,o,p,{id:"xKey-raw"}),Rd(this,n,f,{id:"yKey-raw"}),...s?[Rd(this,s,!1,{id:"labelKey-raw"})]:[],Pd(this,o,p,{id:"xValue"}),Pd(this,n,f,{id:"yValue"}),Pd(this,r,!0,{id:"sizeValue"}),...d?[Pd(this,d,!0,{id:"colorValue"})]:[],...s?[Pd(this,s,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),y=g.resolveProcessedDataIndexById(this,"sizeValue").index,m=null!==(e=v.domain.values[y])&&void 0!==e?e:[];if(this.sizeScale.domain=u.domain?u.domain:m,d){const t=g.resolveProcessedDataIndexById(this,"colorValue").index;a.domain=null!==(i=null!==l&&void 0!==l?l:v.domain.values[t])&&void 0!==i?i:[],a.range=c,a.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const o=t===ol.X?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,o),r=e.getDomain(this,o,"value",i);if("value"===(null===n||void 0===n?void 0:n.def.type)&&"category"===(null===n||void 0===n?void 0:n.def.valueType))return r;const s=this.axes[t];return qh(ms(r),s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,o,n;return us(this,void 0,void 0,(function*(){const{visible:r,axes:s,yKey:a="",xKey:l="",label:c,labelKey:d,dataModel:u,processedData:h,colorScale:p,sizeKey:f="",colorKey:g}=this,v=s[ol.X],y=s[ol.Y];if(!(u&&h&&r&&v&&y))return[];const m=u.resolveProcessedDataIndexById(this,"xValue").index,b=u.resolveProcessedDataIndexById(this,"yValue").index,S=f?u.resolveProcessedDataIndexById(this,"sizeValue").index:-1,x=g?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,C=d?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,w=v.scale,E=y.scale,O=(null!==(e=w.bandwidth)&&void 0!==e?e:0)/2,D=(null!==(i=E.bandwidth)&&void 0!==i?i:0)/2,{sizeScale:A,marker:T}=this,M=[];A.range=[T.size,T.maxSize];const k=c.getFont();for(const{values:t,datum:e}of null!==(o=h.data)&&void 0!==o?o:[]){const i=t[m],o=t[b],n=w.convert(i)+O,r=E.convert(o)+D,s=this.getLabelText(c,{value:d?t[C]:o,datum:e,xKey:l,yKey:a,sizeKey:f,labelKey:d,xName:this.xName,yName:this.yName,sizeName:this.sizeName,labelName:this.labelName}),u=bl.getTextSize(String(s),k),h=f?A.convert(t[S]):T.size,v=g?p.convert(t[x]):void 0;M.push({series:this,itemId:a,yKey:a,xKey:l,datum:e,xValue:i,yValue:o,sizeValue:t[S],point:{x:n,y:r,size:h},midPoint:{x:n,y:r},fill:v,label:Object.assign({text:s},u)})}return[{itemId:null!==(n=this.yKey)&&void 0!==n?n:this.id,nodeData:M,labelData:M,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce(((t,e)=>t.concat(e.labelData)),[])}markerFactory(){const{shape:t}=this.marker;return new(Ap(t))}updateMarkerSelection(t){return us(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t;this.marker.isDirty()&&(i.clear(),i.cleanup());const o=this.marker.enabled?e:[];return i.update(o,void 0,(t=>this.getDatumId(t)))}))}updateMarkerNodes(t){return us(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:o="",yKey:n="",sizeKey:r="",labelKey:s,marker:a}=this,l=jc(i&&this.highlightStyle.item,a.getStyle());this.sizeScale.range=[a.size,a.maxSize],e.each(((t,e)=>{this.updateMarkerStyle(t,a,{datum:e,highlighted:i,xKey:o,yKey:n,sizeKey:r,labelKey:s},l)})),i||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return us(this,void 0,void 0,(function*(){const{labelSelection:o}=t,{label:{enabled:n}}=this,r=(n&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map((t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}})));return o.update(r)}))}updateLabelNodes(t){return us(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each(((t,e)=>{var o,n,r,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(n=null===(o=e.point)||void 0===o?void 0:o.x)&&void 0!==n?n:0,t.y=null!==(s=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"}))}))}getTooltipHtml(t){var e;const{xKey:i,yKey:o,sizeKey:n,axes:r}=this,s=r[ol.X],a=r[ol.Y];if(!i||!o||!s||!a||!n)return"";const{marker:l,tooltip:c,xName:d,yName:u,sizeName:h,labelKey:p,labelName:f,id:g}=this,v=jc({fill:t.fill,strokeWidth:this.getStrokeWidth(l.strokeWidth)},l.getStyle()),{fill:y="gray"}=this.getMarkerStyle(l,{datum:t,highlighted:!1,xKey:i,yKey:o,sizeKey:n,labelKey:p},v),m=null!==(e=this.title)&&void 0!==e?e:u,{datum:b,xValue:S,yValue:x,sizeValue:C,label:{text:w}}=t,E=zc(s.formatDatum(S)),O=zc(a.formatDatum(x));let D=`<b>${zc(null!==d&&void 0!==d?d:i)}</b>: ${E}<br><b>${zc(null!==u&&void 0!==u?u:o)}</b>: ${O}`;return n&&(D+=`<br><b>${zc(null!==h&&void 0!==h?h:n)}</b>: ${zc(String(C))}`),p&&(D=`<b>${zc(null!==f&&void 0!==f?f:p)}</b>: ${zc(w)}<br>`+D),c.toTooltipHtml({title:m,content:D,backgroundColor:y},{datum:b,xKey:i,xName:d,yKey:o,yName:u,sizeKey:n,sizeName:h,labelKey:p,labelName:f,title:m,color:y,seriesId:g})}getLegendData(){var t;const{id:e,data:i,xKey:o,yKey:n,sizeKey:r,yName:s,title:a,visible:l,marker:c}=this,{shape:d,fill:u,stroke:h,fillOpacity:p,strokeOpacity:f,strokeWidth:g}=c;return(null===i||void 0===i?void 0:i.length)&&o&&n&&r?[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:l,label:{text:null!==(t=null!==a&&void 0!==a?a:s)&&void 0!==t?t:n},marker:{shape:d,fill:null!==u&&void 0!==u?u:"rgba(0, 0, 0, 0)",stroke:null!==h&&void 0!==h?h:"rgba(0, 0, 0, 0)",fillOpacity:null!==p&&void 0!==p?p:1,strokeOpacity:null!==f&&void 0!==f?f:1,strokeWidth:null!==g&&void 0!==g?g:0}}]:[]}animateEmptyUpdateReady(t){let{markerSelections:e,labelSelections:i}=t;Bg(this,this.ctx.animationManager,e),jd(this,"labels",this.ctx.animationManager,i)}getDatumId(t){return cd([`${t.xValue}`,`${t.yValue}`,t.label.text])}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new Cc}}Sv.className="BubbleSeries",Sv.type="bubble",cs([ea(va),ds("design:type",String)],Sv.prototype,"title",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"labelKey",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"xName",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"yName",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"sizeName",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"labelName",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"xKey",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"yKey",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"sizeKey",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"colorKey",void 0),cs([ea(va),ds("design:type",String)],Sv.prototype,"colorName",void 0),cs([ea(Ra),ds("design:type",Array)],Sv.prototype,"colorDomain",void 0),cs([ea(Ea),ds("design:type",Array)],Sv.prototype,"colorRange",void 0);const xv={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:Sv,seriesDefaults:{axes:[{type:Xf.NUMBER,position:Yf.BOTTOM},{type:Xf.NUMBER,position:Yf.LEFT}]},themeTemplate:{__extends__:gg,tooltip:{position:{type:"node"}},marker:{__extends__:vg,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:mg,color:bg}},paletteFactory:zf},Cv=["count","sum","mean"],wv=oa((t=>Cv.includes(t)),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var Ev;!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(Ev||(Ev={}));class Ov extends lf{constructor(t){super({moduleCtx:t,pickModes:[Ad.EXACT_SHAPE_MATCH],datumSelectionGarbageCollection:!1,animationResetFns:{datum:pv,label:zd}}),this.label=new dd,this.tooltip=new du,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.aggregation="sum",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[]}deriveBins(t){if(void 0===this.binCount){const e=pc(t[0],t[1],10),i=gc(t[0],t[1],10),o=e[0],n=t=>[t,t+i];return[[o-i,o],...e.map(n)]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),o=t[1],n=e||1,{start:r,binSize:s}=this.calculateNiceStart(i,o,n);return this.getBins(r,o,s,n)}getBins(t,e,i,o){const n=[];for(let r=0;r<o;r++){const s=Math.round(10*(t+r*i))/10;let a=Math.round(10*(t+(r+1)*i))/10;r===o-1&&(a=Math.max(a,e)),n[r]=[s,a]}return n}calculateNiceStart(t,e,i){const o=Math.abs(e-t)/i,n=Math.floor(Math.log10(o)),r=Math.pow(10,n);return{start:Math.floor(t/r)*r,binSize:o}}processData(t){return us(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,data:o,areaPlot:n,aggregation:r}=this,s=[Rd(this,e,!0),Qc];if(i){let t=Ed(this,"groupCount");"count"===r||("sum"===r?t={id:"groupAgg",scopes:[this.id],type:"aggregate",matchGroupIds:a?[a]:void 0,aggregateFunction:t=>wd(t),groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,o;return e[0]+=null!==(i=null===t||void 0===t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(o=null===t||void 0===t?void 0:t[1])&&void 0!==o?o:0,e}}:"mean"===r&&(t=function(t,e,i){const o={id:e,scopes:[t.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:t=>wd(t),groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,-1];var i,o;return e[0]+=null!==(i=null===t||void 0===t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(o=null===t||void 0===t?void 0:t[1])&&void 0!==o?o:0,e[2]++,e},finalFunction:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}};return o}(this,"groupAgg"))),n&&(t=Od(this,"groupAgg",t)),s.push(Pd(this,i,!0,{invalidValue:void 0}),t)}else{let t=Ed(this,"groupAgg");n&&(t=Od(this,"groupAgg",t)),s.push(t)}var a;!this.ctx.animationManager.isSkipped()&&this.processedData&&s.push(ld(this.processedData,!1)),yield this.requestDataModel(t,null!==o&&void 0!==o?o:[],{props:s,dataVisible:this.visible,groupByFn:t=>{var e;const i=qh(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const o=null!==(e=this.bins)&&void 0!==e?e:this.deriveBins(i),n=o.length;return this.calculatedBins=[...o],t=>{const e=t.keys[0];for(let i=0;i<n;i++){const t=o[i];if(e>=t[0]&&e<t[1])return t;if(i===n-1&&e<=t[1])return t}return[]}}}),this.animationState.transition("updateData")}))}getSeriesDomain(t){var e,i,o,n;const{processedData:r,dataModel:s}=this;if(!r||!s||!this.calculatedBins.length)return[];const a=s.getDomain(this,"groupAgg","aggregate",r),l=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],c=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(n=null===(o=this.calculatedBins)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-1][1];return t===ol.X?qh([l,c]):qh(a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return us(this,void 0,void 0,(function*(){const{axes:i,processedData:o,ctx:{callbackCache:n}}=this,r=i[ol.X],s=i[ol.Y];if(!this.visible||!r||!s||!o||"grouped"!==o.type)return[];const{scale:a}=r,{scale:l}=s,{fill:c,stroke:d,strokeWidth:u,id:h,yKey:p="",xKey:f=""}=this,g=[],{label:{formatter:v=t=>String(t.value),fontStyle:y,fontWeight:m,fontSize:b,fontFamily:S,color:x}}=this;return o.data.forEach((t=>{var e;const{aggValues:[[i,o]]=[[0,0]],datum:r,datum:{length:s},keys:C,keys:[w,E]}=t,O=a.convert(w),D=a.convert(E),A=i+o,T=l.convert(0),M=l.convert(A),k=D-O,R=Math.abs(M-T),P=0!==A?{text:null!==(e=n.call(v,{value:A,datum:r,seriesId:h,xKey:f,yKey:p,xName:this.xName,yName:this.yName}))&&void 0!==e?e:String(A),fontStyle:y,fontWeight:m,fontSize:b,fontFamily:S,fill:x,x:O+k/2,y:M+R/2}:void 0,N={x:O+k/2,y:M+R/2};g.push({series:this,datum:r,aggregatedValue:A,frequency:s,domain:C,yKey:p,xKey:f,x:O,y:M,xValue:O,yValue:M,width:k,height:R,midPoint:N,fill:c,stroke:d,strokeWidth:u,label:P})})),[{itemId:null!==(e=this.yKey)&&void 0!==e?e:this.id,nodeData:g,labelData:g,scales:t.calculateScaling.call(this),animationValid:!0,visible:this.visible}]}))}nodeFactory(){return new tf}updateDatumSelection(t){return us(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,(t=>{t.tag=Ev.Bin,t.crisp=!0}),(t=>t.domain.join("_")))}))}updateDatumNodes(t){return us(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:o,strokeOpacity:n,shadow:r,highlightStyle:{item:{fill:s,fillOpacity:a=o,stroke:l,strokeWidth:c}}}=this;e.each(((t,e,d)=>{var u,h;const p=i&&void 0!==c?c:e.strokeWidth,f=i?a:o;t.fill=null!==(u=i?s:void 0)&&void 0!==u?u:e.fill,t.stroke=null!==(h=i?l:void 0)&&void 0!==h?h:e.stroke,t.fillOpacity=f,t.strokeOpacity=n,t.strokeWidth=p,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=r,t.zIndex=i?Vd.highlightedZIndex:d,t.visible=e.height>0}))}))}updateLabelSelection(t){return us(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.tag=Ev.Label,t.pointerEvents=pl.None,t.textAlign="center",t.textBaseline="middle"}))}))}updateLabelNodes(t){return us(this,void 0,void 0,(function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each(((t,e)=>{const o=e.label;o&&i?(t.text=o.text,t.x=o.x,t.y=o.y,t.fontStyle=o.fontStyle,t.fontWeight=o.fontWeight,t.fontSize=o.fontSize,t.fontFamily=o.fontFamily,t.fill=o.fill,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){const{xKey:e,yKey:i="",axes:o}=this,n=o[ol.X],r=o[ol.Y];if(!e||!n||!r)return"";const{xName:s,yName:a,fill:l,tooltip:c,aggregation:d,id:u}=this,{aggregatedValue:h,frequency:p,domain:[f,g]}=t,v=`${zc(null!==s&&void 0!==s?s:e)}: ${n.formatDatum(f)} - ${n.formatDatum(g)}`;let y=i?`<b>${zc(null!==a&&void 0!==a?a:i)} (${d})</b>: ${r.formatDatum(h)}<br>`:"";y+=`<b>Frequency</b>: ${p}`;const m={title:v,backgroundColor:l,content:y};return c.toTooltipHtml(m,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xName:s,yKey:i,yName:a,color:l,title:v,seriesId:u})}getLegendData(t){var e;const{id:i,data:o,xKey:n,yName:r,visible:s,fill:a,stroke:l,fillOpacity:c,strokeOpacity:d,strokeWidth:u}=this;return o&&0!==o.length&&"category"===t?[{legendType:"category",id:i,itemId:n,seriesId:i,enabled:s,label:{text:null!==(e=null!==r&&void 0!==r?r:n)&&void 0!==e?e:"Frequency"},marker:{fill:null!==a&&void 0!==a?a:"rgba(0, 0, 0, 0)",stroke:null!==l&&void 0!==l?l:"rgba(0, 0, 0, 0)",fillOpacity:c,strokeOpacity:d,strokeWidth:u}}]:[]}animateEmptyUpdateReady(t){let{datumSelections:e,labelSelections:i}=t;const o=hv(uv(!0,this.axes));Yl(this.id,"datums",this.ctx.animationManager,e,o),jd(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i;const o=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,n=hv(uv(!0,this.axes));Yl(this.id,"datums",this.ctx.animationManager,t.datumSelections,n,((t,e)=>this.getDatumId(e)),o),jd(this,"labels",this.ctx.animationManager,t.labelSelections)}getDatumId(t){return cd(t.domain.map((t=>`${t}`)))}isLabelEnabled(){return this.label.enabled}}Ov.className="HistogramSeries",Ov.type="histogram",cs([ea(wa),ds("design:type",String)],Ov.prototype,"fill",void 0),cs([ea(wa),ds("design:type",String)],Ov.prototype,"stroke",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],Ov.prototype,"fillOpacity",void 0),cs([ea(Aa(0,1)),ds("design:type",Object)],Ov.prototype,"strokeOpacity",void 0),cs([ea(ja),ds("design:type",Array)],Ov.prototype,"lineDash",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Ov.prototype,"lineDashOffset",void 0),cs([ea(va),ds("design:type",String)],Ov.prototype,"xKey",void 0),cs([ea(pa),ds("design:type",Boolean)],Ov.prototype,"areaPlot",void 0),cs([ea(sa()),ds("design:type",Array)],Ov.prototype,"bins",void 0),cs([ea(wv),ds("design:type",String)],Ov.prototype,"aggregation",void 0),cs([ea(Ta(0)),ds("design:type",Number)],Ov.prototype,"binCount",void 0),cs([ea(va),ds("design:type",String)],Ov.prototype,"xName",void 0),cs([ea(va),ds("design:type",String)],Ov.prototype,"yKey",void 0),cs([ea(va),ds("design:type",String)],Ov.prototype,"yName",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Ov.prototype,"strokeWidth",void 0);const Dv={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:Ov,seriesDefaults:{axes:[{type:Xf.NUMBER,position:Yf.BOTTOM},{type:Xf.NUMBER,position:Yf.LEFT}]},themeTemplate:{__extends__:gg,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:mg,color:xg,formatter:void 0},shadow:{enabled:!1,color:Ag,xOffset:3,yOffset:3,blur:5}},paletteFactory:t=>{let{takeColors:e}=t;const{fills:[i],strokes:[o]}=e(1);return{fill:i,stroke:o}}};class Av extends lf{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[Ad.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Ad.NEAREST_NODE,Ad.EXACT_SHAPE_MATCH],markerSelectionGarbageCollection:!1,animationResetFns:{path:Zg({getOpacity:()=>this.getOpacity()}),label:zd,marker:(t,e)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),Wg(0,e))}}),this.label=new dd,this.marker=new Gg,this.tooltip=new du,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0}processData(t){return us(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,data:o}=this;if(null==e||null==i||null==o)return;const n=!this.ctx.animationManager.isSkipped(),{isContinuousX:r,isContinuousY:s}=this.isContinuous(),a=[];r||(a.push(Rd(this,e,r,{id:"xKey"})),n&&this.processedData&&a.push(ld(this.processedData))),n&&a.push(nd(this,r?["xValue"]:[])),a.push(Pd(this,e,r,{id:"xValue"}),Pd(this,i,s,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,o,{props:a}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:o}=this;if(!o||!i)return[];const n=e[ol.X],r=e[ol.Y],s=i.resolveProcessedDataDefById(this,"xValue");if(t===ol.X){const t=i.getDomain(this,"xValue","value",o);return"value"===(null===s||void 0===s?void 0:s.def.type)&&"category"===s.def.valueType?t:qh(ms(t),n)}return qh(i.getDomain(this,"yValue","value",o),r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,o;return us(this,void 0,void 0,(function*(){const{processedData:n,dataModel:r,axes:s}=this,a=s[ol.X],l=s[ol.Y];if(!n||!r||!a||!l)return[];const{label:c,yKey:d="",xKey:u=""}=this,h=a.scale,p=l.scale,f=(null!==(e=h.bandwidth)&&void 0!==e?e:0)/2,g=(null!==(i=p.bandwidth)&&void 0!==i?i:0)/2,v=[],y=this.marker.enabled?this.marker.size:0,m=r.resolveProcessedDataIndexById(this,"xValue").index,b=r.resolveProcessedDataIndexById(this,"yValue").index;let S,x=!0;for(let t=0;t<n.data.length;t++){const{datum:e,values:i}=null!==S&&void 0!==S?S:n.data[t],r=i[m],s=i[b];if(void 0===s)x=!0;else{const i=h.convert(r)+f;if(isNaN(i)){x=!0,S=void 0;continue}S=void 0===(null===(o=n.data[t+1])||void 0===o?void 0:o.values[b])?void 0:n.data[t+1];const a=p.convert(s)+g,l=this.getLabelText(c,{value:s,datum:e,xKey:u,yKey:d,xName:this.xName,yName:this.yName},(t=>$c(t)?t.toFixed(2):String(t)));v.push({series:this,datum:e,yKey:d,xKey:u,point:{x:i,y:a,moveTo:x,size:y},midPoint:{x:i,y:a},yValue:s,xValue:r,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},label:l?{text:l,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0}),x=!1}}return[{itemId:d,nodeData:v,labelData:v,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(Ap(t))}updatePathNodes(t){var e,i;return us(this,void 0,void 0,(function*(){const{paths:[o],opacity:n,visible:r,animationEnabled:s}=t,{seriesRectHeight:a,seriesRectWidth:l}=this.nodeDataDependencies;o.setProperties({fill:void 0,lineJoin:"round",pointerEvents:pl.None,opacity:n,stroke:this.stroke,strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset}),s||(o.visible=r),null==o.clipPath&&(o.clipPath=new Nc,o.clipScalingX=1,o.clipScalingY=1),null===(e=o.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=o.clipPath)||void 0===i||i.rect(-25,-25,(null!==l&&void 0!==l?l:0)+50,(null!==a&&void 0!==a?a:0)+50)}))}updateMarkerSelection(t){return us(this,void 0,void 0,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:o,enabled:n}=this.marker;return e=o&&n?e:[],this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,(t=>this.getDatumId(t)))}))}updateMarkerNodes(t){return us(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:o="",yKey:n="",marker:r,stroke:s,strokeWidth:a,strokeOpacity:l}=this,c=jc(i&&this.highlightStyle.item,r.getStyle(),{stroke:s,strokeWidth:a,strokeOpacity:l}),d=this.ctx.animationManager.isSkipped();e.each(((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:o,yKey:n},c,{applyTranslation:d})})),i||this.marker.markClean()}))}updateLabelSelection(t){return us(this,void 0,void 0,(function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:o,enabled:n}=this.marker;return e=o&&n?e:[],i.update(e)}))}updateLabelNodes(t){return us(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:o,fontWeight:n,fontSize:r,fontFamily:s,color:a}=this.label;e.each(((t,e)=>{const{point:l,label:c}=e;e&&c&&i?(t.fontStyle=o,t.fontWeight=n,t.fontSize=r,t.fontFamily=s,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){var e;const{xKey:i,yKey:o,axes:n}=this,r=n[ol.X],s=n[ol.Y];if(!i||!o||!r||!s)return"";const{xName:a,yName:l,tooltip:c,marker:d,id:u}=this,{datum:h,xValue:p,yValue:f}=t,g=r.formatDatum(p),v=s.formatDatum(f),y=zc(null!==(e=this.title)&&void 0!==e?e:l),m=zc(g+": "+v),b=jc({fill:d.stroke},d.getStyle(),{strokeWidth:this.strokeWidth}),{fill:S}=this.getMarkerStyle(d,{datum:t,xKey:i,yKey:o,highlighted:!1},b);return c.toTooltipHtml({title:y,content:m,backgroundColor:S},Object.assign({datum:h,xKey:i,xName:a,yKey:o,yName:l,title:y,color:S,seriesId:u},this.getModuleTooltipParams(h)))}getLegendData(t){var e,i,o,n,r,s,a,l;const{id:c,data:d,xKey:u,yKey:h,yName:p,visible:f,title:g,marker:v,stroke:y,strokeOpacity:m}=this;return(null===d||void 0===d?void 0:d.length)&&u&&h&&"category"===t?[{legendType:"category",id:c,itemId:h,seriesId:c,enabled:f,label:{text:null!==(e=null!==g&&void 0!==g?g:p)&&void 0!==e?e:h},marker:{shape:v.shape,fill:null!==(i=v.fill)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(o=v.stroke)&&void 0!==o?o:y)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(r=v.fillOpacity)&&void 0!==r?r:1,strokeOpacity:null!==(a=null!==(s=v.strokeOpacity)&&void 0!==s?s:m)&&void 0!==a?a:1,strokeWidth:null!==(l=v.strokeWidth)&&void 0!==l?l:0}}]:[]}updatePaths(t){return us(this,void 0,void 0,(function*(){this.updateLinePaths([t.paths],[t.contextData])}))}updateLinePaths(t,e){e.forEach(((e,i)=>{let{nodeData:o}=e;const[n]=t[i],{path:r}=n;r.clear({trackChanges:!0});for(const t of o)t.point.moveTo?r.moveTo(t.point.x,t.point.y):r.lineTo(t.point.x,t.point.y);n.checkPathDirty()}))}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:o,contextData:n,paths:r}=t,{animationManager:s}=this.ctx,{seriesRectWidth:a=0}=this.nodeDataDependencies;this.updateLinePaths(r,n),qg(this,s,r.flat()),pu(e,Wg),Vg(this,s,e,a),jd(this,"labels",s,i),jd(this,"annotations",s,o)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:o}=this.ctx,{markerSelections:n,labelSelections:r,annotationSelections:s,contextData:a,paths:l,previousContextData:c}=t;if(super.resetAllAnimation(t),0===a.length||!c||0===c.length)return o.skipCurrentBatch(),void this.updateLinePaths(l,a);const[d]=l,[u]=a,[h]=c,p=function(t,e,i){var o;const n="category"===(null===(o=t.scales.x)||void 0===o?void 0:o.type),{result:r,resultMap:s}=n&&i?iv(t,e,i):ev(t,e);let a="updated";if(e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added"),void 0===r||void 0===s)return;const l=ov(t,e,r,"fade",$g),c=zg(s,a);return Object.assign(Object.assign({},l),{marker:c})}(u,h,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===p)return o.skipCurrentBatch(),void this.updateLinePaths(l,a);Yl(this.id,"marker",o,n,p.marker),Yl(this.id,"path_properties",o,d,p.pathProperties),Ig(this.id,"path_update",o,d,p.path),jd(this,"labels",o,r),jd(this,"annotations",o,s)}getDatumId(t){return cd([`${t.xValue}`])}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new Cc}}Av.className="LineSeries",Av.type="line",cs([ea(va),ds("design:type",String)],Av.prototype,"title",void 0),cs([ea(wa),ds("design:type",String)],Av.prototype,"stroke",void 0),cs([ea(ja),ds("design:type",Array)],Av.prototype,"lineDash",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Av.prototype,"lineDashOffset",void 0),cs([ea(Aa(0)),ds("design:type",Number)],Av.prototype,"strokeWidth",void 0),cs([ea(Aa(0,1)),ds("design:type",Number)],Av.prototype,"strokeOpacity",void 0),cs([ea(va),ds("design:type",String)],Av.prototype,"xKey",void 0),cs([ea(va),ds("design:type",String)],Av.prototype,"xName",void 0),cs([ea(va),ds("design:type",String)],Av.prototype,"yKey",void 0),cs([ea(va),ds("design:type",String)],Av.prototype,"yName",void 0);const Tv={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:Av,seriesDefaults:rg,themeTemplate:{__extends__:gg,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:vg,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:mg,color:bg,formatter:void 0}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:t=>{const{marker:e}=zf(t);return{stroke:e.fill,marker:e}}};class Mv extends lf{constructor(t){super({moduleCtx:t,pickModes:[Ad.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,Ad.NEAREST_NODE,Ad.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:jg,label:zd}}),this.marker=new Gg,this.label=new dd,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new Jp,this.tooltip=new du}processData(t){var e;return us(this,void 0,void 0,(function*(){const{xKey:i,yKey:o,labelKey:n,data:r}=this;if(null==i||null==o||null==r)return;const{isContinuousX:s,isContinuousY:a}=this.isContinuous(),{colorScale:l,colorDomain:c,colorRange:d,colorKey:u}=this,{dataModel:h,processedData:p}=yield this.requestDataModel(t,r,{props:[Rd(this,i,s,{id:"xKey-raw"}),Rd(this,o,a,{id:"yKey-raw"}),...n?[Rd(this,n,!1,{id:"labelKey-raw"})]:[],Pd(this,i,s,{id:"xValue"}),Pd(this,o,a,{id:"yValue"}),...u?[Pd(this,u,!0,{id:"colorValue"})]:[],...n?[Pd(this,n,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(u){const t=h.resolveProcessedDataIndexById(this,"colorValue").index;l.domain=null!==(e=null!==c&&void 0!==c?c:p.domain.values[t])&&void 0!==e?e:[],l.range=d,l.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const o=t===ol.X?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,o),r=e.getDomain(this,o,"value",i);if("value"===(null===n||void 0===n?void 0:n.def.type)&&"category"===(null===n||void 0===n?void 0:n.def.valueType))return r;const s=this.axes[t];return qh(ms(r),s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,o,n;return us(this,void 0,void 0,(function*(){const{visible:r,axes:s,yKey:a="",xKey:l="",label:c,labelKey:d,dataModel:u,processedData:h}=this,p=s[ol.X],f=s[ol.Y];if(!(u&&h&&r&&p&&f))return[];const g=u.resolveProcessedDataIndexById(this,"xValue").index,v=u.resolveProcessedDataIndexById(this,"yValue").index,y=this.colorKey?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,m=this.labelKey?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,{colorScale:b,colorKey:S}=this,x=p.scale,C=f.scale,w=(null!==(e=x.bandwidth)&&void 0!==e?e:0)/2,E=(null!==(i=C.bandwidth)&&void 0!==i?i:0)/2,{marker:O}=this,D=[],A=c.getFont();for(const{values:t,datum:e}of null!==(o=h.data)&&void 0!==o?o:[]){const i=t[g],o=t[v],n=x.convert(i)+w,r=C.convert(o)+E,s=this.getLabelText(this.label,{value:d?t[m]:o,datum:e,xKey:l,yKey:a,labelKey:d,xName:this.xName,yName:this.yName,labelName:this.labelName}),c=bl.getTextSize(s,A),u=S?b.convert(t[y]):void 0;D.push({series:this,itemId:a,yKey:a,xKey:l,datum:e,xValue:i,yValue:o,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},point:{x:n,y:r,size:O.size},midPoint:{x:n,y:r},fill:u,label:Object.assign({text:s},c)})}return[{itemId:null!==(n=this.yKey)&&void 0!==n?n:this.id,nodeData:D,labelData:D,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce(((t,e)=>t.concat(e.labelData)),[])}markerFactory(){const{shape:t}=this.marker;return new(Ap(t))}updateMarkerSelection(t){return us(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:o}}=this;this.marker.isDirty()&&(i.clear(),i.cleanup());const n=o?e:[];return i.update(n)}))}updateMarkerNodes(t){return us(this,void 0,void 0,(function*(){const{xKey:e="",yKey:i="",labelKey:o,marker:n}=this,{markerSelection:r,isHighlight:s}=t,a=jc(s&&this.highlightStyle.item,n.getStyle());r.each(((t,r)=>{this.updateMarkerStyle(t,n,{datum:r,highlighted:s,xKey:e,yKey:i,labelKey:o},a)})),s||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return us(this,void 0,void 0,(function*(){const{labelSelection:o}=t,{label:{enabled:n}}=this,r=(n&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map((t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}})));return o.update(r)}))}updateLabelNodes(t){return us(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each(((t,e)=>{var o,n,r,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(n=null===(o=e.point)||void 0===o?void 0:o.x)&&void 0!==n?n:0,t.y=null!==(s=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"}))}))}getTooltipHtml(t){const{xKey:e,yKey:i,axes:o}=this,n=o[ol.X],r=o[ol.Y];if(!e||!i||!n||!r)return"";const{marker:s,tooltip:a,xName:l,yName:c,labelKey:d,labelName:u,id:h,title:p=c}=this,f=jc({fill:t.fill,strokeWidth:this.getStrokeWidth(s.strokeWidth)},s.getStyle()),{fill:g="gray"}=this.getMarkerStyle(s,{datum:t,highlighted:!1,xKey:e,yKey:i,labelKey:d},f),{datum:v,xValue:y,yValue:m,label:b}=t,S=zc(n.formatDatum(y)),x=zc(r.formatDatum(m));let C=`<b>${zc(null!==l&&void 0!==l?l:e)}</b>: ${S}<br><b>${zc(null!==c&&void 0!==c?c:i)}</b>: ${x}`;return d&&(C=`<b>${zc(null!==u&&void 0!==u?u:d)}</b>: ${zc(b.text)}<br>`+C),a.toTooltipHtml({title:p,content:C,backgroundColor:g},Object.assign({datum:v,xKey:e,xName:l,yKey:i,yName:c,labelKey:d,labelName:u,title:p,color:g,seriesId:h},this.getModuleTooltipParams(v)))}getLegendData(t){var e,i,o,n,r;const{id:s,data:a,xKey:l,yKey:c,yName:d,title:u,visible:h,marker:p}=this,{fill:f,stroke:g,fillOpacity:v,strokeOpacity:y,strokeWidth:m}=p;return(null===a||void 0===a?void 0:a.length)&&l&&c&&"category"===t?[{legendType:"category",id:s,itemId:c,seriesId:s,enabled:h,label:{text:null!==(e=null!==u&&void 0!==u?u:d)&&void 0!==e?e:c},marker:{shape:p.shape,fill:null!==(o=null!==(i=p.fill)&&void 0!==i?i:f)&&void 0!==o?o:"rgba(0, 0, 0, 0)",stroke:null!==(r=null!==(n=p.stroke)&&void 0!==n?n:g)&&void 0!==r?r:"rgba(0, 0, 0, 0)",fillOpacity:null!==v&&void 0!==v?v:1,strokeOpacity:null!==y&&void 0!==y?y:1,strokeWidth:null!==m&&void 0!==m?m:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:o}=t;Bg(this,this.ctx.animationManager,e),jd(this,"labels",this.ctx.animationManager,i),jd(this,"annotations",this.ctx.animationManager,o)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new Cc}}Mv.className="ScatterSeries",Mv.type="scatter",cs([ea(va),ds("design:type",String)],Mv.prototype,"title",void 0),cs([ea(va),ds("design:type",String)],Mv.prototype,"labelKey",void 0),cs([ea(va),ds("design:type",String)],Mv.prototype,"xName",void 0),cs([ea(va),ds("design:type",String)],Mv.prototype,"yName",void 0),cs([ea(va),ds("design:type",String)],Mv.prototype,"labelName",void 0),cs([ea(va),ds("design:type",String)],Mv.prototype,"xKey",void 0),cs([ea(va),ds("design:type",String)],Mv.prototype,"yKey",void 0),cs([ea(va),ds("design:type",String)],Mv.prototype,"colorKey",void 0),cs([ea(va),ds("design:type",String)],Mv.prototype,"colorName",void 0),cs([ea(Ra),ds("design:type",Array)],Mv.prototype,"colorDomain",void 0),cs([ea(Ea),ds("design:type",Array)],Mv.prototype,"colorRange",void 0);const kv={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:Mv,seriesDefaults:{axes:[{type:Xf.NUMBER,position:Yf.BOTTOM},{type:Xf.NUMBER,position:Yf.LEFT}]},themeTemplate:{__extends__:gg,tooltip:{position:{type:"node"}},marker:{__extends__:vg,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:mg,color:bg}},enterpriseThemeTemplate:{errorBar:{cap:{lengthRatio:1}}},paletteFactory:zf},Rv={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:Du,seriesDefaults:{},themeTemplate:{__extends__:gg,title:{enabled:!0,fontStyle:void 0,fontWeight:Uf,fontSize:14,fontFamily:mg,color:Cg,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:mg,color:bg,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:Uf,fontSize:12,fontFamily:mg,color:xg,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,outerRadiusOffset:0,innerRadiusOffset:0,shadow:{enabled:!1,color:Ag,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:mg,color:bg,margin:2}},paletteFactory:t=>{let{takeColors:e,colorsCount:i,userPalette:o}=t;const{fills:n,strokes:r}=e(i);return{fills:n,strokes:o?r:[Pg],calloutLine:{colors:r}}}};class Pv{constructor(t,e,i,o,n,r,s,a,l,c,d){this.series=t,this.index=e,this.datum=i,this.size=o,this.colorValue=n,this.fill=r,this.stroke=s,this.sumSize=a,this.depth=l,this.parent=c,this.children=d,this.midPoint={x:0,y:0}}contains(t){let e=t;for(;null!=e&&e.index>=this.index;){if(e===this)return!0;e=e.parent}return!1}walk(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pv.Walk.PreOrder;e===Pv.Walk.PreOrder&&t(this),this.children.forEach((i=>{i.walk(t,e)})),e===Pv.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}}Pv.Walk={PreOrder:0,PostOrder:1};class Nv extends Vd{constructor(t){super({moduleCtx:t,pickModes:[Ad.EXACT_SHAPE_MATCH],contentGroupVirtual:!1}),this.childrenKey="children",this.sizeKey=void 0,this.colorKey=void 0,this.colorName=void 0,this.fills=Object.values(yd),this.strokes=Object.values(md),this.colorRange=void 0,this.rootNode=new Pv(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new vu("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},(()=>this.checkProcessedDataAnimatable()))}hasData(){return Array.isArray(this.data)&&this.data.length>0}processData(){var t,e;return us(this,void 0,void 0,(function*(){const{childrenKey:i,sizeKey:o,colorKey:n,fills:r,strokes:s,colorRange:a}=this;let l=0;const c=()=>(l+=1,l);let d=0,u=1/0,h=-1/0;const p=new Array((null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0)+1).fill(void 0),f=(t,e)=>{const r=c(),s=null!=e.depth?e.depth+1:0,a=null!=i?t[i]:void 0,l=null==a||0===a.length;let f=null!=o?t[o]:void 0;f=Number.isFinite(f)?Math.max(f,0):l?1:0;const v=f;d=Math.max(d,s);const y=null!=n?t[n]:void 0;return"number"===typeof y&&(p[r]=y,u=Math.min(u,y),h=Math.max(h,y)),g(new Pv(this,r,t,f,y,void 0,void 0,v,s,e,[]),a)},g=(t,e)=>(null===e||void 0===e||e.forEach((e=>{const i=f(e,t);t.children.push(i),t.sumSize+=i.sumSize})),t),v=g(new Pv(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),y=[u,h];let m;null!=a&&Number.isFinite(u)&&Number.isFinite(h)&&(m=new Jp,m.domain=y,m.range=a,m.update()),v.children.forEach(((t,e)=>{t.walk((t=>{let i;const o=p[t.index];null!=o&&(i=null===m||void 0===m?void 0:m.convert(o)),null!==i&&void 0!==i||(i=null===r||void 0===r?void 0:r[e%r.length]),t.fill=i,t.stroke=null==m?null===s||void 0===s?void 0:s[e%s.length]:"rgba(0, 0, 0, 0.2)"}))})),this.rootNode=v,this.maxDepth=d,this.colorDomain=y}))}update(t){let{seriesRect:e}=t;return us(this,void 0,void 0,(function*(){yield this.updateSelections(),yield this.updateNodes();const t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)}))}resetAllAnimation(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&pu(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;null!=i&&pu([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){return"gradient"===t&&null!=this.colorKey&&null!=this.colorRange?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.colorName,colorDomain:this.colorDomain,colorRange:this.colorRange}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}}cs([ea(va),ds("design:type",String)],Nv.prototype,"childrenKey",void 0),cs([ea(va),ds("design:type",String)],Nv.prototype,"sizeKey",void 0),cs([ea(va),ds("design:type",String)],Nv.prototype,"colorKey",void 0),cs([ea(va),ds("design:type",String)],Nv.prototype,"colorName",void 0),cs([ea(Oa),ds("design:type",Array)],Nv.prototype,"fills",void 0),cs([ea(Oa),ds("design:type",Array)],Nv.prototype,"strokes",void 0),cs([ea(Oa),ds("design:type",Array)],Nv.prototype,"colorRange",void 0);class Lv extends Sh{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}}cs([ea(Aa(0,1)),ds("design:type",Number)],Lv.prototype,"innerRadiusRatio",void 0);const _v={},Iv={},Fv={},Gv={},Bv={},Vv=new Set,jv=new Set,Wv=new Set,zv=new Set,Hv={},Uv={};function Kv(t,e,i,o,n,r,s,a,l,c,d,u,h){_v[t]=i,Iv[t]=o,Yv(t,n,r),s&&function(t,e){Bv[t]=e}(t,s),a&&function(t){Vv.add(t)}(t),l&&function(t){jv.add(t)}(t),c&&function(t){Wv.add(t)}(t),d&&function(t){zv.add(t)}(t),u&&function(t,e){Hv[t]=e}(t,u),h&&function(t,e){Uv[t]=e}(t,h),function(t,e){qf[t]=e}(t,e)}function Yv(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=Fv[t];Fv[t]=Fs([o,e]),Gv[t]=Fs([o,e,i])}function Xv(t,e){const i=_v[t];if(i)return new i(e);throw new Error(`AG Charts - unknown series type: ${t}`)}function $v(t){return Iv[t]}function qv(t){return vs()?Gv[t]:Fv[t]}function Zv(t){return Vv.has(t)}function Jv(t){return jv.has(t)}function Qv(t){return Wv.has(t)}function ty(){var t,e,i,o,n,r,s,a;for(const l of fs){if("enterprise"!==l.packageType||Mf(l)||Es.errorOnce("Unexpected enterprise module registered: "+l.identifier),null!=Au.constructors&&null!=l.optionConstructors&&Object.assign(Au.constructors,l.optionConstructors),"root"===l.type&&l.themeTemplate)for(const t of l.chartTypes)Qf(t,l.themeTemplate);if("root"===l.type&&(null===(t=l.conflicts)||void 0===t?void 0:t.length)&&(s=l.optionsKey,a=l.conflicts,ys.set(s,a)),"series"===l.type){if(l.chartTypes.length>1)throw new Error("AG Charts - Module definition error: "+l.identifier);Kv(l.identifier,l.chartTypes[0],l.instanceConstructor,l.seriesDefaults,l.themeTemplate,l.enterpriseThemeTemplate,l.paletteFactory,l.solo,l.stackable,l.groupable,l.stackedByDefault,l.swapDefaultAxesCondition,l.customDefaultsFunction)}if("series-option"===l.type&&l.themeTemplate)for(const t of l.seriesTypes)Yv(t,l.themeTemplate);if("axis-option"===l.type&&l.themeTemplate)for(const t of l.axisTypes){const e=l.themeTemplate[t],i=Object.assign(Object.assign({},l.themeTemplate),"object"===typeof e?e:{});for(const t of l.axisTypes)delete i[t];wf(t,i)}"axis"===l.type&&(n=l.identifier,r=l.instanceConstructor,bf[n]=r,l.themeTemplate&&wf(l.identifier,l.themeTemplate)),"legend"===l.type&&(e=l.identifier,i=l.optionsKey,l.instanceConstructor,o=l.themeTemplate,kf[e]=i,Rf[i]=o)}if(vs()){const t=Of.filter((t=>{let{useCount:e}=t;return null==e||0===e}));t.length>0&&Es.errorOnce("Enterprise modules expected but not registered: ",t)}}class ey extends Xp{constructor(t,e){super(t,e),this._data={}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return us(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesArea:{padding:i},seriesRoot:o}=this,n=e.clone();return e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e,o.translationX=Math.floor(e.x),o.translationY=Math.floor(e.y),yield Promise.all(this.series.map((t=>us(this,void 0,void 0,(function*(){yield t.update({seriesRect:e})}))))),o.visible=this.series[0].visible,o.setClipRectInGroupCoordinateSpace(new ul(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:e,visible:!0},axes:[]}),e}))}}function iy(t){var e,i,o,n;const r=[],s=function(t){var e;return null!==(e=qf[t])&&void 0!==e?e:"unknown"}(eg(t));for(const{type:a,chartTypes:l,optionsKey:c,optionsInnerKey:d,identifier:u}of Of)if("unknown"===s||l.includes(s))if("root"===a||"legend"===a){const e=t[c];if(null==e)continue;d?e[d]&&(r.push(`${c}.${d}`),delete e[d]):(r.push(c),delete t[c])}else if("axis"===a){if(!("axes"in t)||!(null===(e=t.axes)||void 0===e?void 0:e.some((t=>t.type===u))))continue;r.push(`axis[type=${u}]`),t.axes=t.axes.filter((t=>t.type!==u))}else if("axis-option"===a){if(!("axes"in t)||!(null===(i=t.axes)||void 0===i?void 0:i.some((t=>t[c]))))continue;r.push(`axis.${c}`),t.axes.forEach((t=>{t[c]&&delete t[c]}))}else if("series"===a){if(!(null===(o=t.series)||void 0===o?void 0:o.some((t=>t.type===u))))continue;r.push(`series[type=${u}]`),t.series=t.series.filter((t=>t.type!==u))}else if("series-option"===a){if(!(null===(n=t.series)||void 0===n?void 0:n.some((t=>t[c]))))continue;r.push(`series.${c}`),t.series.forEach((t=>{t[c]&&delete t[c]}))}r.length>0&&Es.warnOnce(["unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:","",...r,"","See: https://charts.ag-grid.com/javascript/installation/"].join("\n"))}function oy(t,e){var i;const o=[],n=e.map((t=>{var e;const i=null!==(e=t.type)&&void 0!==e?e:"line",o=Qv(i),n=Jv(i),r=(s=i,zv.has(s));var s;if(t.grouped&&!o&&Es.warnOnce(`unsupported grouping of series type: ${i}`),t.stacked&&!n&&Es.warnOnce(`unsupported stacking of series type: ${i}`),!o&&!n)return t;let a=!1,l=!1;return void 0===t.stacked&&void 0===t.grouped?(a=n&&r,l=o&&!a):void 0===t.stacked?(a=n&&r&&!(t.grouped&&o),l=o&&!a&&!!t.grouped):void 0===t.grouped?(a=n&&t.stacked,l=o&&!a):(a=n&&t.stacked,l=o&&!a&&t.grouped),Object.assign(Object.assign({},t),{stacked:a,grouped:l})})),r=function(t){var e,i,o,n;const r={},s={},a={},l=[];for(const c of t){const t=null!==(e=c.type)&&void 0!==e?e:"line",d=Jv(t),u=Qv(t);if(!d&&!u){l.push({type:"ungrouped",opts:[c]});continue}const{stacked:h,stackGroup:p,grouped:f,xKey:g}=c,v=null!=p||!0===h;null!==(i=a[t])&&void 0!==i||(a[t]=!1),a[t]||(a[t]=v&&d);const y=!0===f;let m=[null!==p&&void 0!==p?p:!0===h?"stacked":void 0,y?"grouped":void 0].filter((t=>null!=t)).join("-");m||(m="default-ag-charts-group");const b=`${t}-${g}-${m}`;if(v&&d){const t=null!==(o=s[b])&&void 0!==o?o:s[b]={type:"stack",opts:[]};0===t.opts.length&&l.push(t),t.opts.push(c)}else if(y&&u){const t=null!==(n=r[b])&&void 0!==n?n:r[b]={type:"group",opts:[]};0===t.opts.length&&l.push(t),t.opts.push(c)}else l.push({type:"ungrouped",opts:[c]})}return Object.values(a).some((t=>t)),l}(n),s=r.reduce(((t,e)=>{var i,o;if("ungrouped"===e.type)return t;const n=null!==(i=e.opts[0].type)&&void 0!==i?i:"line";return null!==(o=t[n])&&void 0!==o||(t[n]=0),t[n]+="stack"===e.type?1:e.opts.length,t}),{}),a={},l=t=>{var e,i;let o=0;const n=null!==(e=t.opts[0].type)&&void 0!==e?e:"line";if(null!==(i=a[n])&&void 0!==i||(a[n]=0),"stack"===t.type){for(const e of t.opts)e.seriesGrouping={groupIndex:a[n],groupCount:s[n],stackIndex:o++,stackCount:t.opts.length};a[n]++}else if("group"===t.type)for(const r of t.opts)r.seriesGrouping={groupIndex:a[n],groupCount:s[n],stackIndex:0,stackCount:0},a[n]++;else for(const r of t.opts)r.seriesGrouping=void 0;return t.opts};As.create(!0,"opts")("processSeriesOptions() - series grouping: ",r);for(const c of r){const t=null!==(i=c.opts[0].type)&&void 0!==i?i:"line";Qv(t)||Jv(t)?o.push(...l(c)):o.push(...c.opts)}return o}ey.className="HierarchyChart",ey.type="hierarchy";const ny="white",ry={fills:Array.from(Object.values(yd)),strokes:Array.from(Object.values(md))},sy={get cartesian(){return{seriesTypes:Jf.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:Jf.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:Jf.hierarchyTypes,commonOptions:[]}}},ay=Object.values(sy).reduce(((t,e)=>{let{commonOptions:i}=e;return[...t,...i]}),[]);class ly{getPalette(){return ry}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontStyle:void 0,fontWeight:Uf,fontSize:Hf.MEDIUM,fontFamily:mg,color:bg},label:{fontStyle:void 0,fontWeight:void 0,fontSize:Hf.SMALL,fontFamily:mg,padding:5,rotation:void 0,color:bg,formatter:void 0,avoidCollisions:!0},line:{enabled:!0,width:1,color:Eg},tick:{enabled:!1,width:1,color:Eg},gridLine:{enabled:!0,style:[{stroke:wg,lineDash:[]}]},crossLines:{enabled:!1,fill:Og,stroke:Og,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:Hf.SMALL,fontFamily:mg,padding:5,color:bg}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1,formatter:void 0}}static getLegendItemMarkerDefaults(){return{shape:void 0,size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:Dg},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:Uf,fontSize:Hf.LARGE,fontFamily:mg,color:bg,wrapping:ly.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:Hf.MEDIUM,fontFamily:mg,color:Cg,wrapping:ly.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:Hf.MEDIUM,fontFamily:mg,color:"rgb(140, 140, 140)",wrapping:ly.getCaptionWrappingDefaults()},legend:{position:Kf,spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:ly.getLegendItemMarkerDefaults(),label:{color:bg,fontStyle:void 0,fontWeight:void 0,fontSize:Hf.SMALL,fontFamily:mg,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:bg},inactiveStyle:{fill:Cg},highlightStyle:{fill:bg},label:{color:bg}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}constructor(t){t=Fc({},null!==t&&void 0!==t?t:{});const{overrides:e=null,palette:i=null}=t,o=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:t}=e,i=(t,e)=>{if(e)for(const i of t){const t=i;o[t]=Fc(o[t],e)}};for(const[,{seriesTypes:e,commonOptions:o}]of Object.entries(sy)){const n=Object.assign({},t);for(const t of ay)o.includes(t)||delete n[t];i(e,n)}Jf.seriesTypes.forEach((t=>{const i=t;e[i]&&(o[i]=Fc(o[i],e[i]))}))}this.palette=null!==i&&void 0!==i?i:this.getPalette(),this.config=Object.freeze(this.templateTheme(o))}createChartConfigPerChartType(t){return Object.entries(sy).forEach((e=>{let[i,{seriesTypes:o}]=e;const n=tg(i);o.forEach((e=>{const i=e;t[i]||(t[i]={},Fc(t[i],n))}))})),t}getDefaults(){let t={};const e=t=>Object.assign(Object.assign(Object.assign({},Rf),ly.getChartDefaults()),tg(t)),i=(t,i)=>{var o,n,r,s;const a=e(t),l={};for(const e of i){null!==(o=l[e])&&void 0!==o||(l[e]=Fc({},a));const i=null!==(n=(s=l[e]).axes)&&void 0!==n?n:s.axes={},c=qv(e);c&&(l[e].series=Fc(l[e].series,c));for(const e of xf.axesTypes){const o=Ef(e);"cartesian"===t&&(i[e]=Fc(i[e],null!==(r=ly.cartesianAxisDefault[e])&&void 0!==r?r:{})),o&&(i[e]=Fc(i[e],o))}}return l};return t=Fc(t,i("cartesian",Jf.cartesianTypes)),t=Fc(t,i("polar",Jf.polarTypes)),t=Fc(t,i("hierarchy",Jf.hierarchyTypes)),t}templateTheme(t){const e=Fs([t]),{extensions:i,properties:o}=this.getTemplateParameters();return Bs(e,((t,e)=>{if(e.__extends__){const t=e.__extends__,o=i.get(t);if(null==o)throw new Error("AG Charts - no template variable provided for: "+t);Object.keys(o).forEach((t=>{t in e||(e[t]=o[t])})),delete e.__extends__}if(e.__overrides__){const t=e.__overrides__,o=i.get(t);if(null==o)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,o),delete e.__overrides__}if(Array.isArray(e))for(let i=0;i<e.length;i++){const t=e[i];o.has(t)&&(e[i]=o.get(t))}else for(const[i,n]of Object.entries(e))o.has(n)&&(e[i]=o.get(n))})),e}static getWaterfallSeriesDefaultPositiveColors(){return{fill:yd.BLUE,stroke:md.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:yd.ORANGE,stroke:md.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:yd.GRAY,stroke:md.GRAY}}getTemplateParameters(){const t=new Map;t.set(sg,ly.getChartDefaults()),t.set(dg,ly.getAxisDefaults()),t.set(ag,ly.getChartDefaults().legend),t.set(lg,ly.getChartDefaults().legend.item),t.set(cg,ly.getLegendItemMarkerDefaults()),t.set(ug,ly.getAxisDefaults().label),t.set(hg,ly.getAxisDefaults().line),t.set(pg,ly.getAxisDefaults().tick),t.set(fg,ly.getAxisDefaults().gridLine),t.set(gg,ly.getSeriesDefaults()),t.set(yg,{}),t.set(vg,ly.getCartesianSeriesMarkerDefaults());const e=new Map;return e.set(mg,"Verdana, sans-serif"),e.set(bg,"rgb(70, 70, 70)"),e.set(Sg,"white"),e.set(Cg,"rgb(140, 140, 140)"),e.set(wg,"rgb(224,234,241)"),e.set(Eg,"rgb(195, 195, 195)"),e.set(Og,"rgb(70, 70, 70)"),e.set(xg,ny),e.set(Dg,ny),e.set(Ag,"rgba(0, 0, 0, 0.5)"),e.set(Ng,[yd.ORANGE,yd.YELLOW,yd.GREEN]),e.set(Lg,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),e.set(_g,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),e.set(Pg,ny),e.set(Tg,ly.getWaterfallSeriesDefaultPositiveColors()),e.set(Mg,ly.getWaterfallSeriesDefaultNegativeColors()),e.set(kg,ly.getWaterfallSeriesDefaultTotalColors()),e.set(Rg,ly.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:t,properties:e}}}ly.cartesianAxisDefault={number:Object.assign(Object.assign({},ly.getAxisDefaults()),{line:Object.assign(Object.assign({},ly.getAxisDefaults().line),{enabled:!1})}),log:Object.assign(Object.assign({},ly.getAxisDefaults()),{base:10,line:Object.assign(Object.assign({},ly.getAxisDefaults().line),{enabled:!1})}),category:Object.assign(Object.assign({},ly.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},ly.getAxisDefaults().label),{autoRotate:!0}),gridLine:Object.assign(Object.assign({},ly.getAxisDefaults().gridLine),{enabled:!1})}),"grouped-category":Object.assign({},ly.getAxisDefaults()),time:Object.assign(Object.assign({},ly.getAxisDefaults()),{gridLine:Object.assign(Object.assign({},ly.getAxisDefaults().gridLine),{enabled:!1})})};const cy="#182732",dy={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},uy={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},hy={fills:Array.from(Object.values(dy)),strokes:Array.from(Object.values(uy))};class py extends ly{static getWaterfallSeriesDefaultPositiveColors(){return{fill:dy.BLUE,stroke:uy.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:dy.ORANGE,stroke:uy.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:dy.GRAY,stroke:uy.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,py.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,py.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,py.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Rg,py.getWaterfallSeriesDefaultTotalColors().stroke),t.properties.set(Pg,cy),t.properties.set(bg,"white"),t.properties.set(Cg,"#7D91A0"),t.properties.set(wg,"#545A6E"),t.properties.set(Og,"white"),t.properties.set(Ng,[dy.ORANGE,dy.YELLOW,dy.GREEN]),t.properties.set(Lg,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.properties.set(_g,["#192834","#3b5164","#496275","#577287","#668399"]),t.properties.set(Dg,cy),t.properties.set(xg,cy),t}getPalette(){return hy}constructor(t){super(t)}}const fy={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},gy={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},vy={fills:Array.from(Object.values(fy)),strokes:Array.from(Object.values(gy))};class yy extends py{static getWaterfallSeriesDefaultPositiveColors(){return{fill:fy.BLUE,stroke:gy.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:fy.RED,stroke:gy.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:fy.GRAY,stroke:gy.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,yy.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,yy.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,yy.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ng,[fy.ORANGE,fy.YELLOW,fy.GREEN]),t.properties.set(Rg,yy.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return vy}}const my={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},by={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Sy={fills:Array.from(Object.values(my)),strokes:Array.from(Object.values(by))};class xy extends ly{static getWaterfallSeriesDefaultPositiveColors(){return{fill:my.BLUE,stroke:by.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:my.RED,stroke:by.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:my.GRAY,stroke:by.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,xy.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,xy.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,xy.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ng,[my.ORANGE,my.YELLOW,my.GREEN]),t.properties.set(Rg,xy.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Sy}}const Cy={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},wy={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},Ey={fills:Array.from(Object.values(Cy)),strokes:Array.from(Object.values(wy))};class Oy extends py{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Cy.BLUE,stroke:wy.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Cy.RED,stroke:wy.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,Oy.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,Oy.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,Oy.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ng,[Cy.BLUE,Cy.RED]),t.properties.set(Rg,Oy.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Ey}}const Dy={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Ay={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},Ty={fills:Array.from(Object.values(Dy)),strokes:Array.from(Object.values(Ay))};class My extends ly{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Dy.BLUE,stroke:Ay.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Dy.RED,stroke:Ay.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,My.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,My.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,My.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ng,[Dy.BLUE,Dy.RED]),t.properties.set(Rg,My.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Ty}}const ky={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Ry={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Py={fills:Array.from(Object.values(ky)),strokes:Array.from(Object.values(Ry))};class Ny extends py{static getWaterfallSeriesDefaultPositiveColors(){return{fill:ky.BLUE,stroke:Ry.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ky.ORANGE,stroke:Ry.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:ky.GRAY,stroke:Ry.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,Ny.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,Ny.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,Ny.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ng,[ky.ORANGE,ky.YELLOW,ky.GREEN]),t.properties.set(Rg,Ny.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Py}}const Ly={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},_y={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Iy={fills:Array.from(Object.values(Ly)),strokes:Array.from(Object.values(_y))};class Fy extends ly{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ly.BLUE,stroke:_y.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ly.ORANGE,stroke:_y.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ly.GRAY,stroke:_y.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,Fy.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,Fy.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,Fy.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ng,[Ly.ORANGE,Ly.YELLOW,Ly.GREEN]),t.properties.set(Rg,Fy.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Iy}}const Gy={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},By={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Vy={fills:Array.from(Object.values(Gy)),strokes:Array.from(Object.values(By))};class jy extends py{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Gy.BLUE,stroke:By.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Gy.ORANGE,stroke:By.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Gy.GRAY,stroke:By.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,jy.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,jy.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,jy.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ng,[Gy.ORANGE,Gy.YELLOW,Gy.GREEN]),t.properties.set(Rg,jy.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Vy}}const Wy={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},zy={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Hy={fills:Array.from(Object.values(Wy)),strokes:Array.from(Object.values(zy))};class Uy extends ly{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Wy.BLUE,stroke:zy.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Wy.ORANGE,stroke:zy.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Wy.GRAY,stroke:zy.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(Tg,Uy.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(Mg,Uy.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(kg,Uy.getWaterfallSeriesDefaultTotalColors()),t.properties.set(Ng,[Wy.ORANGE,Wy.YELLOW,Wy.GREEN]),t.properties.set(Rg,Uy.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return Hy}}const Ky=()=>new ly,Yy=()=>new py,Xy={undefined:Ky,null:Ky,"ag-default":Ky,"ag-sheets":()=>new Fy,"ag-polychroma":()=>new My,"ag-vivid":()=>new Uy,"ag-material":()=>new xy},$y={undefined:Yy,null:Yy,"ag-default-dark":Yy,"ag-sheets-dark":()=>new Ny,"ag-polychroma-dark":()=>new Oy,"ag-vivid-dark":()=>new jy,"ag-material-dark":()=>new yy},qy=Object.assign(Object.assign({},$y),Xy);function Zy(t){return void 0===t||"string"===typeof t||t instanceof ly?t:"object"===typeof t?function(t){if(null===t)return;let e=!0;const{baseTheme:i,palette:o,overrides:n}=t;if(void 0!==i&&"string"!==typeof i&&"object"!==typeof i&&(Es.warn(`invalid theme.baseTheme type ${typeof i}, expected (string | object).`),e=!1),void 0!==n&&"object"!==typeof n&&(Es.warn(`invalid theme.overrides type ${typeof n}, expected object.`),e=!1),"object"===typeof o){if(null!==o){const{fills:t,strokes:i}=o;Array.isArray(t)||(Es.warn("theme.overrides.fills must be a defined array"),e=!1),Array.isArray(i)||(Es.warn("theme.overrides.strokes must be a defined array"),e=!1)}}else void 0!==o&&(Es.warn(`invalid theme.palette type ${typeof o}, expected object.`),e=!1);return e?t:void 0}(t):void Es.warn(`invalid theme value type ${typeof t}, expected object.`)}function Jy(t){var e;let i=Zy(t);if(i instanceof ly)return i;if(void 0===i||"string"===typeof i){const t=qy[i];return t?t():(Es.warnOnce(`the theme [${i}] is invalid, using [ag-default] instead.`),Ky())}const o=[];let n;for(;"object"===typeof i;)o.push(null!==(e=i.overrides)&&void 0!==e?e:{}),i.palette&&null==n&&(n=i.palette),i=i.baseTheme;o.reverse();const r=Object.assign({baseTheme:i,overrides:Fs(o)},n?{palette:n}:{});return new((r.baseTheme?Jy(r.baseTheme):Ky()).constructor)(r)}function Qy(t,e,i){const o=[];for(let n=0;n<i;n++)o.push(e[(n+t.colourIndex)%e.length]);return o}const tm={avoidDeepClone:["data"]};function em(t){var e,i,o,n;!function(t){const e={yKeys:"yKey",yNames:"yName"};Object.entries(e).forEach((e=>{let[i,o]=e;var n;(null===(n=t.series)||void 0===n?void 0:n.some((t=>null!=t[i])))&&Es.warnOnce(`Property [series.${i}] is deprecated, please use [series.${o}] and multiple series instead.`)}))}(t);const r=eg(t),s=function(t){if(void 0===t||"object"!==typeof t||null===t)return{};const{type:e,xOffset:i,yOffset:o}=t,n={},r={pointer:!0,node:!0};var s;return"string"===typeof e&&(s=e,Object.keys(r).includes(s))&&(n.type=e),"number"===typeof i&&!isNaN(i)&&isFinite(i)&&(n.xOffset=i),"number"===typeof o&&!isNaN(o)&&isFinite(o)&&(n.yOffset=o),n}(null===(e=t.tooltip)||void 0===e?void 0:e.position),a=t=>{if(null!=t&&!(null!=(e=t)&&Jf.has(e)||Df(t)||$v(t)))throw new Error(`AG Charts - unknown series type: ${t}; expected one of: ${Jf.seriesTypes}`);var e};a(r);for(const{type:y}of null!==(i=t.series)&&void 0!==i?i:[])null!=y&&a(y);t=function(t){if(void 0===t.series||t.series.length<=1||!function(t){for(const e of t)if(Zv(e.type))return!0;return!1}(t.series))return t;let e=[...t.series];if(Zv(e[0].type))Es.warn(`series[0] of type '${e[0].type}' is incompatible with other series types. Only processing series[0]`),e=e.slice(0,1);else{const t=Array.from(new Set(e.filter((t=>Zv(t.type))).map((t=>t.type))));Es.warnOnce(`Unable to mix these series types with the lead series type: ${t}`),e=e.filter((t=>!Zv(t.type)))}return Object.assign(Object.assign({},t),{series:e})}(Object.assign(Object.assign({},t),{type:r}));let l="line";ig(t)?l="line":og(t)?l="treemap":ng(t)&&(l="pie");let c=$v(r);(function(t){var e,i;let o;for(const n of null!==(e=t.series)&&void 0!==e?e:[]){const{type:t="line"}=n,e=null===(i=Hv[t])||void 0===i?void 0:i.call(Hv,n);if(null!=e){if(null!=o&&o!=e)throw new Error("AG Charts - The provided series have incompatible directions");o=e}}return o})(t)&&(c=function(t){var e;if(!ig(t))return t;const[i,o]=null!==(e=t.axes)&&void 0!==e?e:[];return Object.assign(Object.assign({},t),{axes:[Object.assign(Object.assign({},i),{position:o.position}),Object.assign(Object.assign({},o),{position:i.position})]})}(c)),c=function(t,e){var i;let o=e;for(const n of null!==(i=t.series)&&void 0!==i?i:[]){const{type:t}=n,e=null!=t?Uv[t]:void 0;void 0!==e&&(o=Object.assign(Object.assign({},o),e(n)))}return o}(t,c);const d=function(t){var e,i,o,n;const r={};for(const[s,a]of ys.entries())if(null!=t[s]&&a.length){null!==(e=r[s])&&void 0!==e||(r[s]={});for(const e of a)(null===(i=t[s])||void 0===i?void 0:i.enabled)&&(null===(o=t[e])||void 0===o?void 0:o.enabled)?(Es.warnOnce(`the [${s}] module can not be used at the same time as [${e}], it will be disabled.`),r[s].enabled=!1):r[s].enabled=null===(n=t[s])||void 0===n?void 0:n.enabled}return r}(t);!function(t){Bs(t,((t,e)=>{!1===e.enabled&&Object.keys(e).forEach((t=>{"enabled"!==t&&delete e[t]}))}),{skip:["data","theme"]})}(t);const{context:u,mergedOptions:h,axesThemes:p,seriesThemes:f,theme:g}=function(t,e,i){const{theme:o,cleanedTheme:n,axesThemes:r,seriesThemes:s,userPalette:a}=function(t){var e;const i=Jy(t.theme),o=i.config[eg(t)],n=Object.entries(i.config).reduce(((t,e)=>{let[i,{series:o}]=e;return t[i]=o,t}),{}),r=t.theme,s="object"===typeof r&&r.palette?r.palette:null;return{theme:i,axesThemes:null!==(e=null===o||void 0===o?void 0:o.axes)&&void 0!==e?e:{},seriesThemes:n,cleanedTheme:Fs([null!==o&&void 0!==o?o:{},{axes:_s,series:_s}]),userPalette:s}}(e),l={colourIndex:0,palette:o.palette,userPalette:a,theme:o};t=o.templateTheme(t);const c=Fs([t,n,e,i],tm);hs.isEnterprise||iy(c);return{context:l,mergedOptions:c,axesThemes:r,seriesThemes:s,theme:o}}(c,t,d);h.series=oy(0,(null!==(o=h.series)&&void 0!==o?o:[]).map((t=>{var e;const i=null!==(e=t.type)&&void 0!==e?e:l,o=function(t,e,i,o){var n,r;const s=Fs([Object.assign({},o),null===(n=t.tooltip)||void 0===n?void 0:n.position],tm);return Fs([null!==(r=i[e])&&void 0!==r?r:{},Object.assign(Object.assign({},t),{type:e,tooltip:Object.assign(Object.assign({},t.tooltip),{position:s})})],tm)}(t,i,f,s);return"pie"===i&&function(t,e,i){Array.isArray(e.innerLabels)?i.innerLabels=e.innerLabels.map((e=>Fs([t.innerLabels,e]))):i.innerLabels=_s}(f.pie,t,o),o}))).map((t=>function(t,e){const i=function(t,e){const i=(o=e.type,Bv[o]);var o;if(!i)return{};const{palette:{fills:n,strokes:r},userPalette:s,theme:a}=t,l=Math.max(n.length,r.length);return i({userPalette:s,themeTemplateParameters:a.getTemplateParameters(),colorsCount:l,takeColors:e=>{const i={fills:Qy(t,n,e),strokes:Qy(t,r,e)};return t.colourIndex+=e,i}})}(t,e),o={stacked:_s,grouped:_s};for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];return Fs([...r,i,e,o],tm)}(u,t))).map((t=>g.templateTheme(t)));const v=t=>{const e=null!=(i=t)&&xf.has(i);var i;return e||Es.warnOnce(`unknown axis type: ${t}; expected one of: ${xf.axesTypes}, ignoring.`),e};if("axes"in h){let e=!0;for(const{type:t}of null!==(n=h.axes)&&void 0!==n?n:[])e&&(e=v(t));const i=e?h.axes:c.axes;h.axes=null===i||void 0===i?void 0:i.map((t=>{var i,o,n,r,s;const a=t.type;let l;e&&(l=null===(i=c.axes)||void 0===i?void 0:i.find((t=>{let{type:e}=t;return e===a})));return function(t,e){const i={top:_s,bottom:_s,left:_s,right:_s};if(t.crossLines){Array.isArray(t.crossLines)||(Es.warn("axis[].crossLines should be an array."),t.crossLines=[]);const{crossLines:i}=e;t.crossLines=t.crossLines.map((t=>Fs([i,t])))}return Fs([e,{crossLines:_s},t,i],tm)}(t,Fs([null!==(o=p[a])&&void 0!==o?o:{},null!==(s=null===(n=p[a])||void 0===n?void 0:n[null!==(r=t.position)&&void 0!==r?r:"unknown"])&&void 0!==s?s:{},l]))})),function(t,e){var i,o,n,r;if(void 0!==(null===(i=t.legend)||void 0===i?void 0:i.enabled)||void 0!==(null===(o=e.legend)||void 0===o?void 0:o.enabled))return;if(null!==(n=e.legend)&&void 0!==n||(e.legend={}),(null!==(r=t.series)&&void 0!==r?r:[]).length>1)return void(e.legend.enabled=!0);e.legend.enabled=!1}(t,h)}return function(t,e){Bs(t,((t,e,i)=>{if(!i)return;const{_enabledFromTheme:o}=i;null!=o&&delete i._enabledFromTheme,"enabled"in i&&(o||null==e.enabled&&(i.enabled=!0))}),{skip:["data","theme"]},e),Bs(e,((t,e)=>{null!=e._enabledFromTheme&&delete e._enabledFromTheme}),{skip:["data","theme"]})}(t,h),h}class im extends Xp{constructor(t,e){super(t,e),this.padding=new th(40),this.axisGroup.zIndex=fd.AXIS_FOREGROUND_ZINDEX}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return us(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach((t=>t.update())),this.hoverRect=e,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e}))}updateAxes(t,e,i){var o,n;const r=this.axes.find((t=>t.direction===ol.X)),s=this.axes.find((t=>t.direction===ol.Y));if(!(r instanceof Lv)||!(s instanceof Lv))return;const a=r.scale,l=null===(o=a.ticks)||void 0===o?void 0:o.call(a).map((t=>a.convert(t))),c=s.innerRadiusRatio;r.innerRadiusRatio=c,null===(n=r.computeRange)||void 0===n||n.call(r),r.gridLength=i,s.gridAngles=l,s.gridRange=r.range,s.range=[i,i*c],[r,s].forEach((i=>{i.translation.x=t,i.translation.y=e,i.calculateLayout()}))}computeSeriesRect(t){const{seriesArea:{padding:e}}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return us(this,void 0,void 0,(function*(){var e=this;const i=this.series.filter((t=>t instanceof mu)),o=this.axes.filter((t=>t instanceof Lv)),n=(t,e,o)=>{this.updateAxes(t,e,o),i.forEach((i=>{i.centerX=t,i.centerY=e,i.radius=o}));const n=i.filter((t=>t instanceof Du));if(n.length>1){const t=n.map((t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}})).sort(((t,e)=>t.innerRadius-e.innerRadius));t[t.length-1].series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},r=t.x+t.width/2,s=t.y+t.height/2,a=Math.max(0,Math.min(t.width,t.height)/2);let l=a;n(r,s,l);const c=function(){let{hideWhenNecessary:c=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return us(e,void 0,void 0,(function*(){const e=[];for(const n of[...o,...i]){const i=yield n.computeLabelsBBox({hideWhenNecessary:c},t);i&&e.push(i)}if(0===e.length)return void n(r,s,a);const d=ul.merge(e),u=this.refineCircle(d,l,t);n(u.centerX,u.centerY,u.radius),u.radius!==l&&(l=u.radius)}))};return yield c(),yield c(),yield c(),yield c({hideWhenNecessary:!0}),yield c({hideWhenNecessary:!0}),{radius:l,centerX:r,centerY:s}}))}refineCircle(t,e,i){const o=-e,n=-e,r=e,s=e;let a=Math.max(0,o-t.x),l=Math.max(0,n-t.y),c=Math.max(0,t.x+t.width-r),d=Math.max(0,t.y+t.height-s);a=c=Math.max(a,c),l=d=Math.max(l,d);const u=i.width-a-c,h=i.height-l-d;let p=Math.min(u,h)/2;const f=.5*i.width/2,g=.5*i.height/2,v=Math.min(f,g);if(p<v){p=v;const t=a+c;if(2*p+(l+d)>i.height){const t=i.height-2*p;2*Math.min(l,d)>t?(l=t/2,d=t/2):l>d?l=t-d:d=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(a,c)>t?(a=t/2,c=t/2):a>c?a=t-c:c=t-a}}const y=a+2*p+c,m=l+2*p+d;return{centerX:i.x+(i.width-y)/2+a+p,centerY:i.y+(i.height-m)/2+l+p,radius:p}}}im.className="PolarChart",im.type="polar";const om=As.create(!0,"opts");function nm(t){if(ig(t))return"cartesian";if(ng(t))return"polar";if(og(t))return"hierarchy";throw new Error(`AG Chart - unknown type of chart for options with type: ${t.type}`)}class rm{static licenseCheck(t){var e,i,o;this.licenseChecked||(this.licenseManager=null===(e=hs.licenseManager)||void 0===e?void 0:e.call(hs,t),null===(i=this.licenseManager)||void 0===i||i.setLicenseKey(this.licenseKey),null===(o=this.licenseManager)||void 0===o||o.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static create(t){var e,i,o;this.licenseCheck(t);const n=am.createOrUpdate(t);return(null===(e=this.licenseManager)||void 0===e?void 0:e.isDisplayWatermark())&&(null===(i=hs.injectWatermark)||void 0===i||i.call(hs,null!==(o=t.document)&&void 0!==o?o:document,n.chart.element,this.licenseManager.getWatermarkMessage())),n}static update(t,e){if(!uf.isInstance(t))throw new Error(rm.INVALID_CHART_REF_MESSAGE);am.createOrUpdate(e,t)}static updateDelta(t,e){if(!uf.isInstance(t))throw new Error(rm.INVALID_CHART_REF_MESSAGE);am.updateUserDelta(t,e)}static download(t,e){if(!(t instanceof uf))throw new Error(rm.INVALID_CHART_REF_MESSAGE);am.download(t,e)}static getImageDataURL(t,e){if(!(t instanceof uf))throw new Error(rm.INVALID_CHART_REF_MESSAGE);return am.getImageDataURL(t,e)}}rm.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",rm.licenseChecked=!1;class sm{static warnDeprecated(t){((t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter((t=>null!=t)).join(" ");Es.warnOnce(i)})(`AgChart.${t}`,`Use AgCharts.${t} instead`)}static create(t){return sm.warnDeprecated("create"),rm.create(t)}static update(t,e){return sm.warnDeprecated("update"),rm.update(t,e)}static updateDelta(t,e){return sm.warnDeprecated("updateDelta"),rm.updateDelta(t,e)}static download(t,e){return sm.warnDeprecated("download"),rm.download(t,e)}static getImageDataURL(t,e){return sm.warnDeprecated("getImageDataURL"),rm.getImageDataURL(t,e)}}class am{static initialiseModules(){am.initialised||(gs(Nf),gs(jf),gs(cv),gs(yv),gs(xv),gs(Tv),gs(kv),gs(Rv),gs(Dv),ty(),am.initialised=!0)}static createOrUpdate(t,e){var i,o;am.initialiseModules(),om(">>> AgChartV2.createOrUpdate() user options",t);const{overrideDevicePixelRatio:n,document:r,window:s}=t,a=ls(t,["overrideDevicePixelRatio","document","window"]),l={overrideDevicePixelRatio:n,document:r,window:s},c=em(a);let d=null===e||void 0===e?void 0:e.chart;null!=d&&nm(a)===nm(d.processedOptions)||(d=am.createChartInstance(c,l,d)),null==e?e=new uf(d):e.chart=d,As.check()&&"undefined"!==typeof window&&(null!==(i=(o=window).agChartInstances)&&void 0!==i||(o.agChartInstances={}),window.agChartInstances[d.id]=d);const u=d;u.queuedUserOptions.push(a);const h=()=>{const t=u.queuedUserOptions.indexOf(a);u.queuedUserOptions.splice(0,t)};return u.requestFactoryUpdate((()=>us(this,void 0,void 0,(function*(){if(u.destroyed)return;const t=Ls(u.processedOptions,c);null!=t?(yield am.updateDelta(u,t,a),h()):h()})))),e}static updateUserDelta(t,e){var i;const{chart:o,chart:{queuedUserOptions:n}}=t,r=null!==(i=n[n.length-1])&&void 0!==i?i:o.userOptions,s=Fs([r,e]);om(">>> AgChartV2.updateUserDelta() user delta",e),om("AgChartV2.updateUserDelta() - base options",r),am.createOrUpdate(s,t)}static download(t,e){(()=>us(this,void 0,void 0,(function*(){const i=yield am.prepareResizedChart(t,e),{chart:o}=i;o.scene.download(null===e||void 0===e?void 0:e.fileName,null===e||void 0===e?void 0:e.fileFormat),i!==t&&i.destroy()})))().catch((t=>Es.errorOnce(t)))}static getImageDataURL(t,e){return us(this,void 0,void 0,(function*(){const i=yield am.prepareResizedChart(t,e),{chart:o}=i,n=o.scene.canvas.getDataURL(null===e||void 0===e?void 0:e.fileFormat);return i!==t&&i.destroy(),n}))}static prepareResizedChart(t,e){var i;return us(this,void 0,void 0,(function*(){const{chart:o}=t;let{width:n,height:r}=null!==e&&void 0!==e?e:{};const s=o.width,a=o.height;if(void 0===n&&void 0===r||1===o.scene.canvas.pixelRatio&&s===n&&a===r)return t;null!==n&&void 0!==n||(n=s),null!==r&&void 0!==r||(r=a);const l=Object.assign(Object.assign({},o.userOptions),{container:document.createElement("div"),width:n,height:r,autoSize:!1,overrideDevicePixelRatio:1});vs()&&(null!==(i=l.animation)&&void 0!==i||(l.animation={}),l.animation.enabled=!1);const c=am.createOrUpdate(l);return yield c.chart.waitForUpdate(),c}))}static createChartInstance(t,e,i){const o=null===i||void 0===i?void 0:i.destroy({keepTransferableResources:!0});if(ig(t))return new df(e,o);if(og(t))return new ey(e,o);if(ng(t))return new im(e,o);throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static updateDelta(t,e,i){var o;return us(this,void 0,void 0,(function*(){null==e.type&&(e=Object.assign(Object.assign({},e),{type:null!==(o=t.processedOptions.type)&&void 0!==o?o:eg(e)})),t.destroyed||(om("AgChartV2.updateDelta() - applying delta",e),function(t,e,i){var o,n,r,s;const a=Fs([null!==(o=t.processedOptions)&&void 0!==o?o:{},e],tm),l=function(t,e){const i=e=>t instanceof df&&e.chartTypes.includes("cartesian")||t instanceof im&&e.chartTypes.includes("polar")||t instanceof ey&&e.chartTypes.includes("hierarchy");let o=!1;const n=(n,r,s)=>{const a=fs.filter((t=>t.type===n));for(const l of a){const n=i(l)&&null!=e[l.optionsKey];n!==t.isModuleEnabled(l)&&(o=!0,n?r(l):s(l))}};return n("root",(e=>t.addModule(e)),(e=>t.removeModule(e))),n("legend",(e=>t.addLegendModule(e)),(e=>t.removeLegendModule(e))),o}(t,a),c=["type","data","series","listeners","theme","legend.listeners"];if(ig(e)||ng(e))c.push("axes");else if(!og(e))throw new Error(`AG Charts - couldn't apply configuration, check type of options and chart: ${e.type}`);e.listeners&&dm(t,e.listeners);um(t,e,{skip:c});let d=!1,u=!1;e.series&&e.series.length>0&&(u=function(t,e){const i=e.series;if(!i)return!1;const o=["type","direction","xKey","yKey","sizeKey","angleKey","stacked","stackGroup"];let n=t.series.length===i.length;for(let r=0;r<t.series.length&&n;r++)for(const e of o)n&&(n=t.series[r][e]===i[r][e]);if(n)return t.series.forEach(((e,o)=>{var n,r,s,a;const l=Ls(null!==(s=null===(r=null===(n=t.processedOptions)||void 0===n?void 0:n.series)||void 0===r?void 0:r[o])&&void 0!==s?s:{},null!==(a=i[o])&&void 0!==a?a:{});l&&(om(`AgChartV2.applySeries() - applying series diff idx ${o}`,l),hm(e,l,{path:`series[${o}]`,index:o}),e.markNodeDataDirty())})),!1;return om("AgChartV2.applySeries() - creating new series instances"),t.series=function(t,e){var i;const o=[],n=t.getModuleContext();let r=0;for(const s of null!==e&&void 0!==e?e:[]){const t=`series[${r++}]`,e=null!==(i=s.type)&&void 0!==i?i:"unknown";if(Df(e)&&!Tf(e))continue;const a=Xv(e,n);lm(a,s),hm(a,s,{path:t,index:r}),o.push(a)}return o}(t,i),!0}(t,e),d=!0);if("axes"in a&&Array.isArray(a.axes)){const e=function(t,e,i){const o=e.axes;if(!o)return!1;const n=!i&&t.axes.length===o.length&&t.axes.every(((t,e)=>t.type===o[e].type));if(n){const e=t.processedOptions;if(ig(e))return t.axes.forEach(((t,i)=>{var n,r;const s=Ls(null!==(r=null===(n=e.axes)||void 0===n?void 0:n[i])&&void 0!==r?r:{},o[i]);om(`AgChartV2.applyAxes() - applying axis diff idx ${i}`,s);um(t,s,{path:`axes[${i}]`,skip:["axes[].type"]})})),!0}return t.axes=function(t,e){const i=[],o=["axes[].type"],n=t.getModuleContext();let r=0;for(const s of null!==e&&void 0!==e?e:[]){const t=Sf(s.type,n),e=`axes[${r++}]`;cm(t,s),um(t,s,{path:e,skip:o}),i.push(t)}return i}(t,o),!0}(t,a,u);e&&(d=!0)}const h=e.series,p=!!e.data||(null===h||void 0===h?void 0:h.some((t=>null!=t.data))),f=kf,g=Object.values(f).some((t=>null!=e[t])),v=null!=e.title&&null!=e.subtitle;d=d||p||g||v,e.data&&(t.data=e.data);(null===(n=e.legend)||void 0===n?void 0:n.listeners)&&Object.assign(t.legend.listeners,null!==(r=e.legend.listeners)&&void 0!==r?r:{});e.listeners&&t.updateAllSeriesListeners();t.processedOptions=a,t.userOptions=Fs([null!==(s=t.userOptions)&&void 0!==s?s:{},i],tm);const y=d||l?Kh.PROCESS_DATA:Kh.PERFORM_LAYOUT;om("AgChartV2.applyChartOptions() - update type",Kh[y]),t.update(y,{forceNodeDataRefresh:d,newAnimationBatch:!0})}(t,e,i))}))}}function lm(t,e){const i=fs.filter((t=>"series-option"===t.type));for(const o of i){const i=o.seriesTypes;o.optionsKey in e&&i.includes(t.type)&&t.getModuleMap().addModule(o)}}function cm(t,e){let i=!1;const o=fs.filter((t=>"axis-option"===t.type));for(const n of o){const o=null!=e[n.optionsKey],r=t.getModuleMap();o!==r.isModuleEnabled(n)&&(i=!0,o?r.addModule(n):r.removeModule(n))}return i}function dm(t,e){t.clearEventListeners();const i=Object.entries(null!==e&&void 0!==e?e:{});for(const[o,n]of i)"function"===typeof n&&t.addEventListener(o,n)}function um(t,e){let{skip:i,path:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Gs(t,e,Object.assign(Object.assign(Object.assign({},Mu()),{skip:i}),o?{path:o}:{}))}function hm(t,e){let{path:i,index:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n,r;const s=["series[].listeners","series[].seriesGrouping"],a=Mu(),l=null!==(n=a.constructors)&&void 0!==n?n:{},c={constructors:Object.assign(Object.assign({},l),{title:"pie"===t.type?wu:l.title})},d=Gs(t,e,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},a),c),{skip:["series[].type",...null!==s&&void 0!==s?s:[]]}),i?{path:i}:{}),{idx:null!==o&&void 0!==o?o:-1}));null!=(null===e||void 0===e?void 0:e.listeners)&&dm(t,e.listeners);const{seriesGrouping:u}=e;return"seriesGrouping"in(null!==e&&void 0!==e?e:{})&&(t.seriesGrouping=u?Object.freeze(Object.assign(Object.assign({},null!==(r=t.seriesGrouping)&&void 0!==r?r:{}),u)):u),d}am.initialised=!1;const pm=Object.entries(qy).reduce(((t,e)=>{let[i,o]=e;return t[i]=o(),t}),{});var fm=Object.freeze({__proto__:null,themes:pm,getChartTheme:Jy,ChartTheme:ly,EXTENDS_CHART_DEFAULTS:sg,EXTENDS_LEGEND_DEFAULTS:ag,EXTENDS_LEGEND_ITEM_DEFAULTS:lg,EXTENDS_LEGEND_ITEM_MARKER_DEFAULTS:cg,EXTENDS_AXES_DEFAULTS:dg,EXTENDS_AXES_LABEL_DEFAULTS:ug,EXTENDS_AXES_LINE_DEFAULTS:hg,EXTENDS_AXES_TICK_DEFAULTS:pg,EXTENDS_AXES_GRID_LINE_DEFAULTS:fg,EXTENDS_SERIES_DEFAULTS:gg,EXTENDS_CARTESIAN_MARKER_DEFAULTS:vg,OVERRIDE_SERIES_LABEL_DEFAULTS:yg,DEFAULT_FONT_FAMILY:mg,DEFAULT_LABEL_COLOUR:bg,DEFAULT_INVERTED_LABEL_COLOUR:Sg,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:xg,DEFAULT_MUTED_LABEL_COLOUR:Cg,DEFAULT_AXIS_GRID_COLOUR:wg,DEFAULT_AXIS_LINE_COLOUR:Eg,DEFAULT_CROSS_LINES_COLOUR:Og,DEFAULT_BACKGROUND_COLOUR:Dg,DEFAULT_SHADOW_COLOUR:Ag,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:Tg,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:Mg,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:kg,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:Rg,DEFAULT_POLAR_SERIES_STROKE:Pg,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:Ng,DEFAULT_HIERARCHY_FILLS:Lg,DEFAULT_HIERARCHY_STROKES:_g,FONT_SIZE:Hf,BOLD:"bold",NORMAL:Uf,BOTTOM:Kf,CARTESIAN_AXIS_POSITIONS:Yf,CARTESIAN_AXIS_TYPES:Xf,POLAR_AXIS_TYPES:$f,CIRCLE:"circle"}),gm=["area","bar","column","histogram","line","pie","scatter","bubble"],vm=new Set(["bar","groupedBar","stackedBar","normalizedBar"]);function ym(t){return vm.has(t)}var mm=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function bm(t){return mm.has(t)}function Sm(t){switch(t){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"bar";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"bubble":return"bubble";case"scatter":return"scatter";case"histogram":return"histogram";case"pie":case"doughnut":return"pie";default:return"cartesian"}}var xm=["number","category","grouped-category","log","time"];var Cm=function(){return Cm=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Cm.apply(this,arguments)};function wm(t,e){var i,n=t.chartOptionsToRestore,r=t.chartPaletteToRestore,s=t.chartThemeToRestore,a=function(t){var e=t.getChartThemeName(),i=t.getChartThemes();o._.includes(i,e)||(e=i[0]);return e}(t),l=Em(a),c=l?{baseTheme:a}:null!==(i=Am(t,a))&&void 0!==i?i:{},d=t.getGridOptionsChartThemeOverrides(),u=t.apiChartThemeOverrides,h="pie"===Sm(t.chartType)?"pie":"cartesian",p=t.crossFiltering?function(t,e,i){var o,n={listeners:{legendItemClick:function(e){t.getChart().series.forEach((function(t){t.toggleSeriesItem(e.itemId,e.enabled),t.toggleSeriesItem("".concat(e.itemId,"-filtered-out"),e.enabled)}))}}},r={};return o={},o[i]={tooltip:{delay:500},legend:n,listeners:{click:function(t){return e.crossFilterCallback(t,!0)}},series:r},o}(e,t,h):void 0,f=Cm({},null!==n&&void 0!==n?n:{}),g=[l?Dm(t,function(){var t=function(t){return!!t&&Object.keys(t).some((function(e){return o._.get(t[e],"title.enabled",!1)}))};return t(d)||t(u)}()):void 0,p,d,u,f],v=g.filter((function(t){return!!t})).reduce((function(t,e){return{baseTheme:t,overrides:e}}),c);r&&a===s&&(function(t,e){var i=function(t,e){return t.length===e.length&&t.every((function(t,i){return t===e[i]}))};return i(t.fills,e.fills)&&i(t.strokes,e.strokes)}(r,fm.getChartTheme(c).palette)||(v.palette=r));return v}function Em(t){return o._.includes(Object.keys(fm.themes),t)}var Om=xm.reduce((function(t,e){var i;return Cm(Cm({},t),((i={})[e]={title:{_enabledFromTheme:!0}},i))}),{});function Dm(t,e){var i=t.getExtraPaddingDirections();return{common:{axes:Om,padding:{top:!e&&i.includes("top")?40:20,right:i.includes("right")?30:20,bottom:i.includes("bottom")?40:20,left:i.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function Am(t,e){var i=t.customChartThemes,o=i&&i[e];return o||console.warn("AG Grid: no stock theme exists with the name '".concat(e,"' and no ")+"custom chart theme with that name was supplied to 'customChartThemes'"),o}var Tm=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Mm=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},km=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rm=function(t){return function(e){return void 0===e||t(e)}},Pm=function(t){return"string"===typeof t},Nm=function(t){return"boolean"===typeof t},Lm=function(t){return"object"===typeof t},_m=function(t,e){return function(i){return"AG Grid - unable to update chart as invalid params supplied:  `".concat(t,": ").concat(i,"`, expected ").concat(e,".")}},Im=function(){function t(){}return t.validateChartParams=function(e){switch(e.type){case"rangeChartUpdate":return t.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return t.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return t.validateUpdateCrossFilterChartParams(e);default:return console.warn("AG Grid - Invalid value supplied for 'type': ".concat(e.type,". It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.")),!1}},t.validateUpdateRangeChartParams=function(e){var i=Mm(Mm(Mm([],Tm(t.commonValidations),!1),Tm(t.cellRangeValidations),!1),[{property:"seriesChartTypes",validationFn:function(t){return void 0===t||Array.isArray(t)&&t.every(Lm)},warnMessage:_m("seriesChartTypes","Array of SeriesChartType")}],!1);return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")},t.validateUpdatePivotChartParams=function(e){var i=Mm([],Tm(t.commonValidations),!1);return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")},t.validateUpdateCrossFilterChartParams=function(e){var i=Mm(Mm([],Tm(t.commonValidations),!1),Tm(t.cellRangeValidations),!1);return t.validateProperties(e,i,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")},t.validateProperties=function(t,e,i,o){var n,r;try{for(var s=km(e),a=s.next();!a.done;a=s.next()){var l=a.value,c=l.property,d=l.validationFn,u=l.warnMessage;if(c in t){var h=t[c];if(!d(h))return console.warn(u(h)),!1}}}catch(p){n={error:p}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}for(var c in t)if(!i.includes(c))return console.warn("AG Grid - Unexpected property supplied. ".concat(o," does not contain: `").concat(c,"`.")),!1;return!0},t.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","doughnut","area","stackedArea","normalizedArea","histogram","columnLineCombo","areaColumnCombo","customCombo"],t.validateChartType=Rm((function(e){return t.validChartTypes.includes(e)})),t.validateAgChartThemeOverrides=Rm((function(t){return"object"===typeof t})),t.validateChartParamsCellRange=Rm((function(t){return"object"===typeof t})),t.validateAggFunc=Rm((function(t){return"string"===typeof t||"function"===typeof t})),t.commonValidations=[{property:"chartId",validationFn:Pm,warnMessage:_m("chartId","string")},{property:"chartType",validationFn:t.validateChartType,warnMessage:_m("chartType",t.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:Pm,warnMessage:_m("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:t.validateAgChartThemeOverrides,warnMessage:_m("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:Nm,warnMessage:_m("unlinkChart","boolean")}],t.cellRangeValidations=[{property:"cellRange",validationFn:t.validateChartParamsCellRange,warnMessage:_m("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:Nm,warnMessage:_m("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:t.validateAggFunc,warnMessage:_m("aggFunc","string or IAggFunc")}],t}(),Fm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Gm=function(){return Gm=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Gm.apply(this,arguments)},Bm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Vm=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"],jm=function(t){function e(e){var i=t.call(this)||this;return i.model=e,i}return Fm(e,t),e.prototype.init=function(){var t=this;this.setChartRange(),this.addManagedListener(this.eventService,o.sVA.EVENT_RANGE_SELECTION_CHANGED,(function(e){e.id&&e.id===t.model.chartId&&t.updateForRangeChange()})),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))},e.prototype.update=function(t){var e,i,o,n,r,s,a;if(!this.validUpdateType(t)||!Im.validateChartParams(t))return!1;var l=t.chartId,c=t.chartType,d=t.chartThemeName,u=t.unlinkChart,h={chartId:l,pivotChart:this.model.pivotChart,chartType:null!==c&&void 0!==c?c:this.model.chartType,chartThemeName:null!==d&&void 0!==d?d:this.model.chartThemeName,unlinkChart:null!==u&&void 0!==u?u:this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1},p=Gm({},h);switch(t.type){case"rangeChartUpdate":p.cellRange=null!==(e=this.createCellRange(t))&&void 0!==e?e:this.model.suppliedCellRange,p.aggFunc=null!==(i=t.aggFunc)&&void 0!==i?i:this.model.aggFunc,p.seriesChartTypes=t.seriesChartTypes,p.suppressChartRanges=null!==(o=t.suppressChartRanges)&&void 0!==o?o:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":p.cellRange=null!==(n=this.createCellRange(t))&&void 0!==n?n:this.model.suppliedCellRange,p.aggFunc=null!==(r=t.aggFunc)&&void 0!==r?r:this.model.aggFunc,p.crossFiltering=!0,p.suppressChartRanges=null!==(s=t.suppressChartRanges)&&void 0!==s?s:this.model.suppressChartRanges}return this.model.updateModel(p),p.unlinkChart||p.suppressChartRanges?null===(a=this.rangeService)||void 0===a||a.setCellRanges([]):this.setChartRange(),!0},e.prototype.updateForGridChange=function(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())},e.prototype.updateForDataChange=function(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())},e.prototype.updateForRangeChange=function(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()},e.prototype.updateForPanelChange=function(t){this.model.updateCellRanges(t),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()},e.prototype.getChartUpdateParams=function(t){var e=this.getSelectedValueColState().map((function(t){return{colId:t.colId,displayName:t.displayName}})),i=this.getChartData(),o=this.getSelectedDimension();return{data:i,grouping:this.isGrouping(),category:{id:o.colId,name:o.displayName,chartDataType:this.model.getChartDataType(o.colId)},fields:e,chartId:this.getChartId(),getCrossFilteringContext:function(){return{lastSelectedChartId:"xxx"}},seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:t}},e.prototype.getChartModel=function(){var t=this.model.pivotChart?"pivot":"range",e=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:t,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:e}},e.prototype.getChartId=function(){return this.model.chartId},e.prototype.getChartData=function(){return this.model.chartData},e.prototype.getChartType=function(){return this.model.chartType},e.prototype.setChartType=function(t){this.model.chartType=t,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()},e.prototype.setChartThemeName=function(t,e){this.model.chartThemeName=t,e||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())},e.prototype.getChartThemeName=function(){return this.model.chartThemeName},e.prototype.isPivotChart=function(){return this.model.pivotChart},e.prototype.isPivotMode=function(){return this.model.isPivotMode()},e.prototype.isGrouping=function(){return this.model.isGrouping()},e.prototype.isCrossFilterChart=function(){return this.model.crossFiltering},e.prototype.getThemes=function(){return this.gridOptionsService.get("chartThemes")||Vm},e.prototype.getPalettes=function(){var t=this;return this.getThemes().map((function(e){var i=Em(e)?e:t.chartProxy.lookupCustomChartTheme(e);return fm.getChartTheme(i).palette}))},e.prototype.getValueColState=function(){return this.model.valueColState.map(this.displayNameMapper.bind(this))},e.prototype.getSelectedValueColState=function(){return this.getValueColState().filter((function(t){return t.selected}))},e.prototype.getSelectedDimension=function(){return this.model.getSelectedDimension()},e.prototype.displayNameMapper=function(t){var e=this.model.columnNames[t.colId];return t.displayName=e?e.join(" - "):this.model.getColDisplayName(t.column),t},e.prototype.getColStateForMenu=function(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}},e.prototype.setChartRange=function(t){void 0===t&&(t=!1),!this.rangeService||this.model.suppressChartRanges||this.model.unlinked||this.rangeService.setCellRanges(this.getCellRanges()),t||this.raiseChartModelUpdateEvent()},e.prototype.detachChartRange=function(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()},e.prototype.setChartProxy=function(t){this.chartProxy=t},e.prototype.getChartProxy=function(){return this.chartProxy},e.prototype.isActiveXYChart=function(){return o._.includes(["scatter","bubble"],this.getChartType())},e.prototype.isChartLinked=function(){return!this.model.unlinked},e.prototype.customComboExists=function(){var t=this.model.comboChartModel.savedCustomSeriesChartTypes;return t&&t.length>0},e.prototype.getSeriesChartTypes=function(){return this.model.comboChartModel.seriesChartTypes},e.prototype.isComboChart=function(){return this.model.isComboChart()},e.prototype.updateSeriesChartType=function(t,i,o){var n=this.model.comboChartModel.seriesChartTypes.find((function(e){return e.colId===t}));if(n){var r="customCombo"!==this.model.chartType;r&&(this.model.chartType="customCombo");var s=n.chartType;null!=i&&(n.chartType=i),null!=o&&(n.secondaryAxis=o),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),r&&this.dispatchEvent({type:e.EVENT_CHART_TYPE_CHANGED}),s!==i&&this.dispatchEvent({type:e.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}},e.prototype.getActiveSeriesChartTypes=function(){var t=this.getSelectedValueColState().map((function(t){return t.colId}));return this.getSeriesChartTypes().filter((function(e){return t.includes(e.colId)}))},e.prototype.getChartSeriesTypes=function(){return this.isComboChart()?["line","column","area"]:[Sm(this.getChartType())]},e.prototype.getCellRanges=function(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter((function(t){return t}))},e.prototype.createCellRange=function(t){var e;return t.cellRange&&(null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange))},e.prototype.validUpdateType=function(t){var e,i=this;if(!t.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;var o={"Range Chart":function(){return!i.isPivotChart()&&!i.isCrossFilterChart()},"Pivot Chart":function(){return i.isPivotChart()},"Cross Filter Chart":function(){return i.isCrossFilterChart()}},n=null!==(e=Object.keys(o).find((function(t){return o[t]()})))&&void 0!==e?e:"Range Chart",r=t.type==="".concat(n[0].toLowerCase()).concat(n.slice(1).replace(/ /g,""),"Update");return r||console.warn("AG Grid - Unable to update chart as a '".concat(t.type,"' update type is not permitted on a ").concat(n,".")),r},e.prototype.getCellRangeParams=function(){var t=this.getCellRanges(),e=t[0],i=e&&e.startRow||null,o=e&&e.endRow||null;return{rowStartIndex:i&&i.rowIndex,rowStartPinned:i&&i.rowPinned,rowEndIndex:o&&o.rowIndex,rowEndPinned:o&&o.rowPinned,columns:t.reduce((function(t,e){return t.concat(e.columns.map((function(t){return t.getId()})))}),[])}},e.prototype.raiseChartModelUpdateEvent=function(){var t={type:e.EVENT_CHART_MODEL_UPDATE};this.dispatchEvent(t)},e.prototype.raiseChartUpdatedEvent=function(){var t={type:e.EVENT_CHART_UPDATED};this.dispatchEvent(t)},e.prototype.raiseChartApiUpdateEvent=function(){var t={type:e.EVENT_CHART_API_UPDATE};this.dispatchEvent(t)},e.prototype.raiseChartOptionsChangedEvent=function(){var t=this.getChartModel(),e=t.chartId,i=t.chartType,n={type:o.sVA.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:i,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(n)},e.prototype.raiseChartRangeSelectionChangedEvent=function(){var t={type:o.sVA.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(t)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.rangeService&&this.rangeService.setCellRanges([])},e.EVENT_CHART_UPDATED="chartUpdated",e.EVENT_CHART_API_UPDATE="chartApiUpdate",e.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",e.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",e.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",Bm([(0,o.dsm)("rangeService")],e.prototype,"rangeService",void 0),Bm([o.o7C],e.prototype,"init",null),e}(o.XQb),Wm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),zm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Hm=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Um=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Km=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ym={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]},Xm=function(t){function e(i,o){var n=t.call(this,e.TEMPLATE)||this;return n.chartController=i,n.chartOptionsService=o,n.columnComps=new Map,n}return Wm(e,t),e.prototype.init=function(){this.updatePanels(),this.addManagedListener(this.chartController,jm.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,jm.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()},e.prototype.destroy=function(){this.clearComponents(),t.prototype.destroy.call(this)},e.prototype.updatePanels=function(){var t,e,i=this,n=this.chartType,r=this.chartController.getColStateForMenu(),s=r.dimensionCols,a=r.valueCols,l=s.map((function(t){return t.colId})).concat(a.map((function(t){return t.colId})));this.chartType=this.chartController.getChartType();var c=this.getGroupExpandedState();if(o._.areEqual(o._.keys(this.columnComps),l)&&this.chartType===n){if(Um(Um([],Hm(s),!1),Hm(a),!1).forEach((function(t){i.columnComps.get(t.colId).setValue(t.selected,!0)})),this.chartController.isActiveXYChart()){var d=this.generateGetSeriesLabel();a.forEach((function(t){i.columnComps.get(t.colId).setLabel(d(t))}))}o._.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);var u=null===(t=this.getDataPanelDef().groups)||void 0===t?void 0:t.reduce((function(t,e,i){return"seriesChartType"===e.type?i:t}),-1);-1!==u&&this.createSeriesChartTypeGroup(a,u)}else this.clearComponents(),null===(e=this.getDataPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;"categories"===e?i.createCategoriesGroup(s):"series"===e?i.createSeriesGroup(a):"seriesChartType"===e?i.createSeriesChartTypeGroup(a):console.warn("AG Grid: invalid charts data panel group name supplied: '".concat(e,"'"))}));this.restoreGroupExpandedState(c)},e.prototype.getGroupExpandedState=function(){var t=this;return[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}].map((function(e){var i,o,n=e.groupType,r=e.comp,s=Boolean(null===(o=null===(i=t.getDataPanelDef().groups)||void 0===i?void 0:i.find((function(t){return t.type===n})))||void 0===o?void 0:o.isOpen);return r?r.isExpanded():s}))},e.prototype.restoreGroupExpandedState=function(t){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((function(e,i){e&&e.toggleGroupExpand(t[i])}))},e.prototype.createAutoScrollService=function(){var t=this.getGui();this.autoScrollService=new o.MSA({scrollContainer:t,scrollAxis:"y",getVerticalPosition:function(){return t.scrollTop},setVerticalPosition:function(e){return t.scrollTop=e}})},e.prototype.createComponent=function(t,e){var i=document.createElement("div");return i.id=e,i.className="ag-chart-data-section",i.appendChild(t.getGui()),i},e.prototype.addComponent=function(t,e,i){var o=this.createComponent(e,i);t.appendChild(o)},e.prototype.addComponentAtIndex=function(t,e,i,o){var n=this.createComponent(e,i);t.insertBefore(n,t.children[o])},e.prototype.addChangeListener=function(t,e){var i=this;this.addManagedListener(t,o.sVA.EVENT_FIELD_VALUE_CHANGED,(function(){e.selected=t.getValue(),i.chartController.updateForPanelChange(e)}))},e.prototype.createCategoriesGroup=function(t){var e=this;this.categoriesGroupComp=this.createBean(new o.Pk_({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var i="chartDimension".concat(this.getCompId());t.forEach((function(t){var n=e.categoriesGroupComp.createManagedBean(new o.OQA);n.setLabel(o._.escapeString(t.displayName)),n.setValue(t.selected),n.setInputName(i),e.addChangeListener(n,t),e.categoriesGroupComp.addItem(n),e.columnComps.set(t.colId,n)})),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup")},e.prototype.createSeriesGroup=function(t){var e=this;if(this.seriesGroupComp=this.createManagedBean(new o.Pk_({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){var i=this.seriesGroupComp.createManagedBean(new o.bLJ);i.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getPairedMode()).onValueChange((function(t){e.chartOptionsService.setPairedMode(!!t),e.chartController.updateForGridChange()})),this.seriesGroupComp.addItem(i)}var n=this.generateGetSeriesLabel();t.forEach((function(t){var i=e.seriesGroupComp.createManagedBean(new o.Unm);i.addCssClass("ag-data-select-checkbox");var r=n(t);i.setLabel(r),i.setValue(t.selected),e.addChangeListener(i,t),e.seriesGroupComp.addItem(i),e.columnComps.set(t.colId,i),e.addDragHandle(i,t)}));var r=this.getGui(),s=this.seriesGroupComp.getGui();this.addComponent(r,this.seriesGroupComp,"seriesGroup");var a={getIconName:function(){return o.WO_.ICON_MOVE},getContainer:function(){return s},onDragging:function(t){return e.onDragging(t)},onDragLeave:function(){return e.onDragLeave()},isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(a),this.addDestroyFunc((function(){return e.dragAndDropService.removeDropTarget(a)}))},e.prototype.createSeriesChartTypeGroup=function(t,e){var i=this;if(this.chartController.isComboChart()){this.seriesChartTypeGroupComp=this.createManagedBean(new o.Pk_({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));var n=this.chartController.getSeriesChartTypes();t.forEach((function(t){if(t.selected){var e=n.filter((function(e){return e.colId===t.colId}))[0];if(e){var r=i.seriesChartTypeGroupComp.createManagedBean(new o.Pk_({title:t.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),s=i.seriesChartTypeGroupComp.createManagedBean(new o.Unm).setLabel(i.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType)).setValue(!!e.secondaryAxis).onValueChange((function(e){return i.chartController.updateSeriesChartType(t.colId,void 0,e)}));r.addItem(s);var a=function(t,e){return i.chartTranslationService.translate(t,e)},l=[{value:"line",text:a("line","Line")},{value:"area",text:a("area","Area")},{value:"stackedArea",text:a("stackedArea","StackedArea")},{value:"groupedColumn",text:a("groupedColumn","Grouped Column")},{value:"stackedColumn",text:a("stackedColumn","Stacked Column")}],c=r.createManagedBean(new o.Ju4);c.setLabelAlignment("left").setLabelWidth("flex").addOptions(l).setValue(e.chartType).onValueChange((function(e){return i.chartController.updateSeriesChartType(t.colId,e)})),r.addItem(c),i.seriesChartTypeGroupComp.addItem(r)}}})),void 0===e?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",e)}},e.prototype.addDragHandle=function(t,e){var i=this,n=o._.createIconNoSpan("columnDrag",this.gridOptionsService);n.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),t.getGui().insertAdjacentElement("beforeend",n);var r={type:o.qRA.ChartPanel,eElement:n,dragItemName:e.displayName,getDragItem:function(){return{columns:[e.column]}},onDragStopped:function(){return i.onDragStop()}};this.dragAndDropService.addDragSource(r,!0),this.addDestroyFunc((function(){return i.dragAndDropService.removeDragSource(r)}))},e.prototype.generateGetSeriesLabel=function(){if(!this.chartController.isActiveXYChart())return function(t){return o._.escapeString(t.displayName)};var t="bubble"===this.chartType,e=this.isInPairedMode(),i=0,n=new Map;return n.set(0,"X"),n.set(1,"Y"),n.set(2,"size"),function(r){var s,a=o._.escapeString(r.displayName);return r.selected?(s=e?n.get(i%(t?3:2)):0===i?"X":t&&i%2===0?"size":"Y",i++,"".concat(a," (").concat(s,")")):a}},e.prototype.getCategoryGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")},e.prototype.getSeriesGroupTitle=function(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")},e.prototype.getDataPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.dataPanel;return e||Ym},e.prototype.isInPairedMode=function(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")},e.prototype.clearComponents=function(){o._.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()},e.prototype.onDragging=function(t){var e=this.checkHoveredItem(t);if(e){this.lastDraggedColumn=t.dragItem.columns[0];var i=e.comp,o=e.position,n=this.lastHoveredItem||{},r=n.comp,s=n.position;if(i!==r||o!==s)this.autoScrollService.check(t.event),this.clearHoveredItems(),this.lastHoveredItem={comp:i,position:o},i.getGui().classList.add("ag-list-item-hovered","ag-item-highlight-".concat(o))}},e.prototype.checkHoveredItem=function(t){var e,i;if(o._.missing(t.vDirection))return null;var n=t.event;try{for(var r=Km(this.columnComps.values()),s=r.next();!s.done;s=r.next()){var a=s.value,l=a.getGui();if(l.querySelector(".ag-chart-data-column-drag-handle")){var c=l.getBoundingClientRect();if(n.clientY>=c.top&&n.clientY<=c.bottom){var d=l.clientHeight;return{comp:a,position:n.clientY>c.top+d/2?"bottom":"top"}}}}}catch(u){e={error:u}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}return null},e.prototype.onDragLeave=function(){this.clearHoveredItems()},e.prototype.onDragStop=function(){var t=this;if(this.lastHoveredItem){var e=this.chartController.getColStateForMenu(),i=e.dimensionCols,o=e.valueCols,n=Um(Um([],Hm(i),!1),Hm(o),!1).find((function(e){return e.column===t.lastDraggedColumn}));if(n){var r=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&r++,n.order=r,this.chartController.updateForPanelChange(n)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()},e.prototype.clearHoveredItems=function(){this.columnComps.forEach((function(t){t.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")})),this.lastHoveredItem=void 0},e.prototype.isInterestedIn=function(t){return t===o.qRA.ChartPanel},e.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',zm([(0,o.dsm)("dragAndDropService")],e.prototype,"dragAndDropService",void 0),zm([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),zm([o.o7C],e.prototype,"init",null),e}(o.uAl),$m=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Zm=function(t){function e(e){var i=t.call(this)||this;return i.activeComps=[],i.params=e,i}return $m(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()},e.prototype.addCompToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},e.prototype.setEnabled=function(t){this.fontGroup.setEnabled(t)},e.prototype.initGroup=function(){var t=this;this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange((function(e){t.params.setEnabled&&t.params.setEnabled(e)}))},e.prototype.initFontFamilySelect=function(){var t=this,e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],i=this.params.initialFont.family,n=e[0];if(i){var r=e.map((function(t){return t.toLowerCase()})).indexOf(i.toLowerCase());if(r>=0)n=e[r];else{var s=o._.capitalise(i);e.push(s),n=s}}var a=e.sort().map((function(t){return{value:t,text:t}}));this.familySelect.addOptions(a).setInputWidth("flex").setValue("".concat(n)).onValueChange((function(e){return t.params.setFont({family:e})}))},e.prototype.initFontSizeSelect=function(){var t=this,e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],i=this.params.initialFont.size;o._.includes(e,i)||e.push(i);var n=e.sort((function(t,e){return t-e})).map((function(t){return{value:"".concat(t),text:"".concat(t)}}));this.sizeSelect.addOptions(n).setInputWidth("flex").setValue("".concat(i)).onValueChange((function(e){return t.params.setFont({size:parseInt(e,10)})})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))},e.prototype.initFontWeightStyleSelect=function(){var t=this,e=this.params.initialFont,i=e.weight,o=void 0===i?"normal":i,n=e.style,r=void 0===n?"normal":n,s=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}],a=s.find((function(t){return t.weight===o&&t.style===r}));a||(a={name:"predefined",weight:o,style:r},s.unshift(a));var l=s.map((function(e){return{value:e.name,text:t.chartTranslationService.translate(e.name)}}));this.weightStyleSelect.addOptions(l).setInputWidth("flex").setValue(a.name).onValueChange((function(e){var i=s.find((function(t){return t.name===e}));t.params.setFont({weight:i.weight,style:i.style})}))},e.prototype.initFontColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth("flex").setValue("".concat(this.params.initialFont.color)).onValueChange((function(e){return t.params.setFont({color:e})}))},e.prototype.addItemToPanel=function(t){this.fontGroup.addItem(t),this.activeComps.push(t)},e.prototype.destroyActiveComps=function(){var t=this;this.activeComps.forEach((function(e){o._.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActiveComps(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',qm([(0,o.PIB)("fontGroup")],e.prototype,"fontGroup",void 0),qm([(0,o.PIB)("familySelect")],e.prototype,"familySelect",void 0),qm([(0,o.PIB)("weightStyleSelect")],e.prototype,"weightStyleSelect",void 0),qm([(0,o.PIB)("sizeSelect")],e.prototype,"sizeSelect",void 0),qm([(0,o.PIB)("colorPicker")],e.prototype,"colorPicker",void 0),qm([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),qm([o.o7C],e.prototype,"init",null),e}(o.uAl),Jm=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Qm=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tb=function(t){function e(e){var i=e.chartOptionsService,o=e.isExpandedOnInit,n=void 0!==o&&o,r=t.call(this)||this;return r.activePanels=[],r.chartOptionsService=i,r.isExpandedOnInit=n,r}return Jm(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()},e.prototype.initLegendGroup=function(){var t=this;this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange((function(e){t.chartOptionsService.setChartOption("legend.enabled",e),t.legendGroup.toggleGroupExpand(!0)}))},e.prototype.initLegendPosition=function(){var t=this;this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth("flex").addOptions(["top","right","bottom","left"].map((function(e){return{value:e,text:t.chartTranslationService.translate(e)}}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.position",e)}))},e.prototype.initLegendPadding=function(){var t=this,e=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Vb(e,200)).setValue("".concat(e)).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("legend.spacing",e)}))},e.prototype.initLegendItems=function(){var t=this,e=function(e,i,o,n){var r=t.chartOptionsService.getChartOption("legend.".concat(e));o.setLabel(t.chartTranslationService.translate(i)).setMaxValue(Vb(r,n)).setValue("".concat(r)).setTextFieldWidth(45).onValueChange((function(i){t.chartOptionsService.setChartOption("legend.".concat(e),i)}))};e("item.marker.size","markerSize",this.markerSizeSlider,40),e("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),e("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),e("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),e("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)},e.prototype.initLabelPanel=function(){var t=this,e=this.chartOptionsService,i={enabled:!0,suppressEnabledCheckbox:!0,initialFont:{family:e.getChartOption("legend.item.label.fontFamily"),style:e.getChartOption("legend.item.label.fontStyle"),weight:e.getChartOption("legend.item.label.fontWeight"),size:e.getChartOption("legend.item.label.fontSize"),color:e.getChartOption("legend.item.label.color")},setFont:function(e){var i=t.chartOptionsService;e.family&&i.setChartOption("legend.item.label.fontFamily",e.family),e.weight&&i.setChartOption("legend.item.label.fontWeight",e.weight),e.style&&i.setChartOption("legend.item.label.fontStyle",e.style),e.size&&i.setChartOption("legend.item.label.fontSize",e.size),e.color&&i.setChartOption("legend.item.label.color",e.color)}},o=this.createBean(new Zm(i));this.legendGroup.addItem(o),this.activePanels.push(o)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){o._.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Qm([(0,o.PIB)("legendGroup")],e.prototype,"legendGroup",void 0),Qm([(0,o.PIB)("legendPositionSelect")],e.prototype,"legendPositionSelect",void 0),Qm([(0,o.PIB)("legendPaddingSlider")],e.prototype,"legendPaddingSlider",void 0),Qm([(0,o.PIB)("markerSizeSlider")],e.prototype,"markerSizeSlider",void 0),Qm([(0,o.PIB)("markerStrokeSlider")],e.prototype,"markerStrokeSlider",void 0),Qm([(0,o.PIB)("markerPaddingSlider")],e.prototype,"markerPaddingSlider",void 0),Qm([(0,o.PIB)("itemPaddingXSlider")],e.prototype,"itemPaddingXSlider",void 0),Qm([(0,o.PIB)("itemPaddingYSlider")],e.prototype,"itemPaddingYSlider",void 0),Qm([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Qm([o.o7C],e.prototype,"init",null),e}(o.uAl),eb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ib=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ob=function(t){function e(e){var i=t.call(this)||this;return i.chartOptionsService=e,i}return eb(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()},e.prototype.initAxisTicks=function(){var t=this;this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("tick.color",e)}));var e=function(e,i,o,n){var r=t.chartOptionsService.getAxisProperty(e);i.setLabel(o).setMaxValue(Vb(r,n)).setValue("".concat(r)).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setAxisProperty(e,i)}))};e("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),e("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)},e.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',ib([(0,o.PIB)("axisTicksGroup")],e.prototype,"axisTicksGroup",void 0),ib([(0,o.PIB)("axisTicksColorPicker")],e.prototype,"axisTicksColorPicker",void 0),ib([(0,o.PIB)("axisTicksWidthSlider")],e.prototype,"axisTicksWidthSlider",void 0),ib([(0,o.PIB)("axisTicksSizeSlider")],e.prototype,"axisTicksSizeSlider",void 0),ib([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),ib([o.o7C],e.prototype,"init",null),e}(o.uAl),nb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),rb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},sb=function(t){function e(i){var o=t.call(this,i,e.TEMPLATE)||this;return o.radius=0,o.offsetX=0,o.offsetY=0,o}return nb(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:function(t){e.parentCircleRect=e.eParentCircle.getBoundingClientRect()},onDragging:function(t){return e.calculateAngleDrag(t)},onDragStop:function(){}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue("".concat(this.degrees)).onValueChange((function(t){null!=t&&""!==t||(t="0"),t=e.eAngleValue.normalizeValue(t);var i=parseFloat(t);i>180&&(i-=360),e.setValue(i)})),this.updateNumberInput(),o._.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,o.sVA.EVENT_FIELD_VALUE_CHANGED,(function(){var t=e.gridOptionsService.getDocument();e.eAngleValue.getInputElement().contains(t.activeElement)||e.updateNumberInput()}))},e.prototype.updateNumberInput=function(){var t=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(t.toString())},e.prototype.positionChildCircle=function(t){var e=this.parentCircleRect||{width:24,height:24},i=this.eChildCircle,o=e.width/2,n=e.height/2;i.style.left="".concat(o+8*Math.cos(t),"px"),i.style.top="".concat(n+8*Math.sin(t),"px")},e.prototype.calculatePolar=function(){var t=this.offsetX,e=this.offsetY,i=Math.atan2(e,t);this.degrees=this.toDegrees(i),this.radius=Math.sqrt(t*t+e*e),this.positionChildCircle(i)},e.prototype.calculateCartesian=function(){var t=this.toRadians(this.getValue()),e=this.getRadius();this.setOffsetX(Math.cos(t)*e).setOffsetY(Math.sin(t)*e)},e.prototype.setOffsetX=function(t){return this.offsetX!==t&&(this.offsetX=t,this.calculatePolar()),this},e.prototype.setOffsetY=function(t){return this.offsetY!==t&&(this.offsetY=t,this.calculatePolar()),this},e.prototype.calculateAngleDrag=function(t){var e=this.parentCircleRect,i=e.width/2,o=e.height/2,n=t.clientX-e.left-i,r=t.clientY-e.top-o,s=Math.atan2(r,n);this.setValue(s,!0)},e.prototype.toDegrees=function(t){return t/Math.PI*180},e.prototype.toRadians=function(t){return t/180*Math.PI},e.prototype.normalizeNegativeValue=function(t){return t<0?360+t:t},e.prototype.normalizeAngle180=function(t){return(t%=2*Math.PI)<-Math.PI?t+=2*Math.PI:t>=Math.PI&&(t-=2*Math.PI),t},e.prototype.getRadius=function(){return this.radius},e.prototype.setRadius=function(t){return this.radius===t||(this.radius=t,this.calculateCartesian()),this},e.prototype.onValueChange=function(t){var e=this;return this.addManagedListener(this,o.sVA.EVENT_FIELD_VALUE_CHANGED,(function(){t(e.degrees)})),this},e.prototype.getValue=function(t){return t?this.toRadians(this.degrees):this.degrees},e.prototype.setValue=function(t,e){var i;return i=e?t:this.normalizeAngle180(this.toRadians(t)),t=this.toDegrees(i),this.degrees!==t&&(this.degrees=Math.floor(t),this.calculateCartesian(),this.positionChildCircle(i),this.dispatchEvent({type:o.sVA.EVENT_FIELD_VALUE_CHANGED})),this},e.prototype.setWidth=function(t){return o._.setFixedWidth(this.getGui(),t),this},e.prototype.setDisabled=function(e){return t.prototype.setDisabled.call(this,e),this.eAngleValue.setDisabled(e),this},e.prototype.destroy=function(){this.dragService.removeDragSource(this.dragListener),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',rb([(0,o.PIB)("eLabel")],e.prototype,"eLabel",void 0),rb([(0,o.PIB)("eParentCircle")],e.prototype,"eParentCircle",void 0),rb([(0,o.PIB)("eChildCircle")],e.prototype,"eChildCircle",void 0),rb([(0,o.PIB)("eAngleValue")],e.prototype,"eAngleValue",void 0),rb([(0,o.dsm)("dragService")],e.prototype,"dragService",void 0),e}(o.DKR),ab=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),lb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},cb=function(t){function e(e){var i=e.chartController,o=e.chartOptionsService,n=e.isExpandedOnInit,r=void 0!==n&&n,s=t.call(this)||this;return s.activePanels=[],s.axisLabelUpdateFuncs=[],s.prevXRotation=0,s.prevYRotation=0,s.chartController=i,s.chartOptionsService=o,s.isExpandedOnInit=r,s}return ab(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels();this.addManagedListener(this.chartController,jm.EVENT_CHART_UPDATED,(function(){return t.axisLabelUpdateFuncs.forEach((function(t){return t()}))}))},e.prototype.initAxis=function(){var t=this;this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.color",e)}));var e=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(Vb(e,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.chartOptionsService.setAxisProperty("line.width",e)}))},e.prototype.initAxisTicks=function(){var t=this.createBean(new ob(this.chartOptionsService));this.axisGroup.addItem(t),this.activePanels.push(t)},e.prototype.initAxisLabels=function(){var t=this,e={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:e,setFont:function(e){e.family&&t.chartOptionsService.setAxisProperty("label.fontFamily",e.family),e.weight&&t.chartOptionsService.setAxisProperty("label.fontWeight",e.weight),e.style&&t.chartOptionsService.setAxisProperty("label.fontStyle",e.style),e.size&&t.chartOptionsService.setAxisProperty("label.fontSize",e.size),e.color&&t.chartOptionsService.setAxisProperty("label.color",e.color)}},o=this.createBean(new Zm(i));this.axisGroup.addItem(o),this.activePanels.push(o),this.addAdditionalLabelComps(o)},e.prototype.addAdditionalLabelComps=function(t){this.addLabelPadding(t);var e=this.createRotationWidgets(),i=e.xRotationComp,o=e.yRotationComp,n=this.initLabelRotations(i,o);t.addCompToPanel(n),t.addCompToPanel(i),t.addCompToPanel(o)},e.prototype.initLabelRotations=function(t,e){var i=this,n=function(t){return i.chartOptionsService.getLabelRotation(t)},r=function(t,e){i.chartOptionsService.setLabelRotation(t,e)},s=function(){var t=n("xAxis"),e=n("yAxis");return void 0==t&&void 0==e&&i.chartOptionsService.getAxisProperty("label.autoRotate")}(),a=this.createBean(new o.Unm).setLabel(this.translate("autoRotate")).setValue(s).onValueChange((function(o){i.chartOptionsService.setAxisProperty("label.autoRotate",o),o?(i.prevXRotation=n("xAxis"),i.prevYRotation=n("yAxis"),r("xAxis",void 0),r("yAxis",void 0)):(r("xAxis",i.prevXRotation),r("yAxis",i.prevYRotation)),t.setDisabled(o),e.setDisabled(o)}));return t.setDisabled(s),e.setDisabled(s),a},e.prototype.createRotationWidgets=function(){var t=this,e=String.fromCharCode(176),i=function(i,o){var n="".concat(t.chartTranslationService.translate(i)," ").concat(e),r=t.chartOptionsService.getLabelRotation(o),s=(new sb).setLabel(n).setLabelWidth("flex").setValue(r||0).onValueChange((function(e){return t.chartOptionsService.setLabelRotation(o,e)}));return t.axisLabelUpdateFuncs.push((function(){var e=t.chartOptionsService.getLabelRotation(o);s.setValue(e||0)})),t.createBean(s)};return{xRotationComp:i("xRotation","xAxis"),yRotationComp:i("yRotation","yAxis")}},e.prototype.addLabelPadding=function(t){var e=this,i=this.createBean(new o.YD7),n=this.chartOptionsService.getAxisProperty("label.padding");i.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(Vb(n,30)).setValue("".concat(n)).setTextFieldWidth(45).onValueChange((function(t){return e.chartOptionsService.setAxisProperty("label.padding",t)})),t.addCompToPanel(i)},e.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){o._.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',lb([(0,o.PIB)("axisGroup")],e.prototype,"axisGroup",void 0),lb([(0,o.PIB)("axisColorInput")],e.prototype,"axisColorInput",void 0),lb([(0,o.PIB)("axisLineWidthSlider")],e.prototype,"axisLineWidthSlider",void 0),lb([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),lb([o.o7C],e.prototype,"init",null),e}(o.uAl),db=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ub=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},hb=function(t){function e(e){var i=e.chartOptionsService,o=e.isExpandedOnInit,n=void 0!==o&&o,r=t.call(this)||this;return r.chartOptionsService=i,r.isExpandedOnInit=n,r}return db(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()},e.prototype.initNavigator=function(){var t=this,e=this.chartTranslationService;this.navigatorGroup.setTitle(e.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange((function(e){t.chartOptionsService.setChartOption("navigator.enabled",e),t.navigatorGroup.toggleGroupExpand(!0)})).toggleGroupExpand(this.isExpandedOnInit);var i=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(e.translate("height")).setMinValue(10).setMaxValue(Vb(i,60)).setTextFieldWidth(45).setValue("".concat(i||30)).onValueChange((function(e){return t.chartOptionsService.setChartOption("navigator.height",e)}))},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',ub([(0,o.PIB)("navigatorGroup")],e.prototype,"navigatorGroup",void 0),ub([(0,o.PIB)("navigatorHeightSlider")],e.prototype,"navigatorHeightSlider",void 0),ub([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),ub([o.o7C],e.prototype,"init",null),e}(o.uAl),pb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),fb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},gb=function(t){function e(e,i){var o=t.call(this)||this;return o.chartOptionsService=e,o.chartController=i,o}return pb(e,t),e.prototype.init=function(){var t=this;this.setTemplate(e.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.addManagedListener(this.eventService,o.sVA.EVENT_CHART_OPTIONS_CHANGED,(function(e){t.updateTopPadding(e.chartOptions)})),this.initGroup(),this.initChartPaddingItems()},e.prototype.initGroup=function(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)},e.prototype.initChartPaddingItems=function(){var t=this,e=function(e,i){var o=t.chartOptionsService.getChartOption("padding."+e);i.setLabel(t.chartTranslationService.translate(e)).setMaxValue(Vb(o,200)).setValue("".concat(o)).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setChartOption("padding."+e,i)}))};e("top",this.paddingTopSlider),e("right",this.paddingRightSlider),e("bottom",this.paddingBottomSlider),e("left",this.paddingLeftSlider)},e.prototype.updateTopPadding=function(t){var e,i,o=null===(i=null===(e=t[this.chartController.getChartSeriesTypes()[0]])||void 0===e?void 0:e.padding)||void 0===i?void 0:i.top;null!=o&&this.paddingTopSlider.setValue(o)},e.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',fb([(0,o.PIB)("chartPaddingGroup")],e.prototype,"chartPaddingGroup",void 0),fb([(0,o.PIB)("paddingTopSlider")],e.prototype,"paddingTopSlider",void 0),fb([(0,o.PIB)("paddingRightSlider")],e.prototype,"paddingRightSlider",void 0),fb([(0,o.PIB)("paddingBottomSlider")],e.prototype,"paddingBottomSlider",void 0),fb([(0,o.PIB)("paddingLeftSlider")],e.prototype,"paddingLeftSlider",void 0),fb([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),fb([o.o7C],e.prototype,"init",null),e}(o.uAl),vb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),yb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mb=function(t){function e(e){var i=t.call(this)||this;return i.chartOptionsService=e,i}return vb(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()},e.prototype.initGroup=function(){var t=this;this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setChartOption("background.visible",e)}))},e.prototype.initColorPicker=function(){var t=this;this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange((function(e){return t.chartOptionsService.setChartOption("background.fill",e)}))},e.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',yb([(0,o.PIB)("chartBackgroundGroup")],e.prototype,"group",void 0),yb([(0,o.PIB)("colorPicker")],e.prototype,"colorPicker",void 0),yb([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),yb([o.o7C],e.prototype,"init",null),e}(o.uAl),bb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Sb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},xb=function(t){function e(i){var o=t.call(this,e.TEMPLATE)||this;return o.chartOptionsService=i,o.activePanels=[],o}return bb(e,t),e.prototype.init=function(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")},e.prototype.hasTitle=function(){var t=this.getOption("title");return t&&t.enabled&&t.text&&t.text.length>0},e.prototype.initFontPanel=function(){var t=this,e=this.hasTitle(),i=function(e,i){e.family&&t.setOption("title.fontFamily",e.family,i),e.weight&&t.setOption("title.fontWeight",e.weight,i),e.style&&t.setOption("title.fontStyle",e.style,i),e.size&&t.setOption("title.fontSize",e.size,i),e.color&&t.setOption("title.color",e.color,i)},o={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};e||i(o,!0);var n={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,initialFont:o,setFont:i,setEnabled:function(e){if(t.toolbarExists()){var i=t.getOption("padding.top");t.setOption("padding.top",e?i-20:i+20)}t.setOption("title.enabled",e);var o=t.getOption("title.text"),n="Title"===o||0===(null===o||void 0===o?void 0:o.trim().length);e&&n&&t.setOption("title.text",t.titlePlaceholder)}},r=this.createBean(new Zm(n));r.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(r.getGui()),this.activePanels.push(r),this.addManagedListener(this.eventService,"chartTitleEdit",(function(){r.setEnabled(t.hasTitle())}))},e.prototype.createSpacingSlicer=function(){var t=this,e=this.createBean(new o.YD7),i=this.chartOptionsService.getChartOption("title.spacing")||10;return e.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(i,100)).setValue("".concat(i)).setTextFieldWidth(45).onValueChange((function(e){return t.chartOptionsService.setChartOption("title.spacing",e)})),e},e.prototype.toolbarExists=function(){var t=this.gridOptionsService.getCallback("getChartToolbarItems");if(!t)return!0;var e={defaultItems:["chartUnlink","chartDownload"]};return["chartLink","chartUnlink","chartDownload"].some((function(i){var o;return null===(o=t&&t(e))||void 0===o?void 0:o.includes(i)}))},e.prototype.getOption=function(t){return this.chartOptionsService.getChartOption(t)},e.prototype.setOption=function(t,e,i){this.chartOptionsService.setChartOption(t,e,i)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){o._.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE="<div></div>",Sb([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Sb([o.o7C],e.prototype,"init",null),e}(o.uAl),Cb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),wb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Eb=function(t){function e(e){var i=e.chartController,o=e.chartOptionsService,n=e.isExpandedOnInit,r=void 0!==n&&n,s=t.call(this)||this;return s.activePanels=[],s.chartController=i,s.chartOptionsService=o,s.isExpandedOnInit=r,s}return Cb(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()},e.prototype.initGroup=function(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)},e.prototype.initTitles=function(){var t=this.createBean(new xb(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.initPaddingPanel=function(){var t=this.createBean(new gb(this.chartOptionsService,this.chartController));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.initBackgroundPanel=function(){var t=this.createBean(new mb(this.chartOptionsService));this.chartGroup.addItem(t),this.activePanels.push(t)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){o._.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',wb([(0,o.PIB)("chartGroup")],e.prototype,"chartGroup",void 0),wb([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),wb([o.o7C],e.prototype,"init",null),e}(o.uAl),Ob=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Db=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ab=function(t){function e(e,i){var o=t.call(this)||this;return o.chartOptionsService=e,o.getSelectedSeries=i,o}return Ob(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()},e.prototype.initSeriesShadow=function(){var t=this;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption("shadow.enabled",this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.enabled",e,t.getSelectedSeries())})),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getSeriesOption("shadow.color",this.getSelectedSeries())).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.color",e,t.getSelectedSeries())}));var e=function(e,i,o,n){var r=t.chartOptionsService.getSeriesOption("shadow.".concat(i),t.getSelectedSeries());e.setLabel(t.chartTranslationService.translate(i)).setMinValue(o).setMaxValue(Vb(r,n)).setValue("".concat(r)).onValueChange((function(e){return t.chartOptionsService.setSeriesOption("shadow.".concat(i),e,t.getSelectedSeries())}))};e(this.shadowBlurSlider,"blur",0,20),e(this.shadowXOffsetSlider,"xOffset",-10,10),e(this.shadowYOffsetSlider,"yOffset",-10,10)},e.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Db([(0,o.PIB)("shadowGroup")],e.prototype,"shadowGroup",void 0),Db([(0,o.PIB)("shadowColorPicker")],e.prototype,"shadowColorPicker",void 0),Db([(0,o.PIB)("shadowBlurSlider")],e.prototype,"shadowBlurSlider",void 0),Db([(0,o.PIB)("shadowXOffsetSlider")],e.prototype,"shadowXOffsetSlider",void 0),Db([(0,o.PIB)("shadowYOffsetSlider")],e.prototype,"shadowYOffsetSlider",void 0),Db([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Db([o.o7C],e.prototype,"init",null),e}(o.uAl);function Tb(t){var e=t.labelName,i=t.chartOptionsService,o=t.getSelectedSeries,n=t.seriesOptionLabelProperty,r=function(t){return"".concat(n,".").concat(t)},s=function(t){var e=r(t);return i.getSeriesOption(e,o())},a=function(t,e){var n=r(t);i.setSeriesOption(n,e,o())},l={family:s("fontFamily"),style:s("fontStyle"),weight:s("fontWeight"),size:s("fontSize"),color:s("color")};return{name:e,enabled:s("enabled")||!1,setEnabled:function(t){return a("enabled",t)},suppressEnabledCheckbox:!1,initialFont:l,setFont:function(t){t.family&&a("fontFamily",t.family),t.weight&&a("fontWeight",t.weight),t.style&&a("fontStyle",t.style),t.size&&a("fontSize",t.size),t.color&&a("color",t.color)}}}var Mb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),kb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Rb=function(t){function e(e,i){var o=t.call(this)||this;return o.chartOptionsService=e,o.getSelectedSeries=i,o}return Mb(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()},e.prototype.initMarkers=function(){var t=this;this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange((function(e){return t.setSeriesOption("marker.shape",e)}));var e=this.chartOptionsService.getChartType(),i=o._.includes(["scatter","bubble"],e);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(i).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange((function(e){return t.setSeriesOption("marker.enabled",e)}));var n=function(e,i,o,n){var r=t.getSeriesOption(e);i.setLabel(t.chartTranslationService.translate(o)).setMaxValue(Vb(r,n)).setValue("".concat(r)).setTextFieldWidth(45).onValueChange((function(i){return t.setSeriesOption(e,i)}))};"bubble"===e?(n("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),n("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),n("marker.size",this.seriesMarkerSizeSlider,"size",60)),n("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)},e.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries())},e.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.getSelectedSeries())},e.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',kb([(0,o.PIB)("seriesMarkersGroup")],e.prototype,"seriesMarkersGroup",void 0),kb([(0,o.PIB)("seriesMarkerShapeSelect")],e.prototype,"seriesMarkerShapeSelect",void 0),kb([(0,o.PIB)("seriesMarkerSizeSlider")],e.prototype,"seriesMarkerSizeSlider",void 0),kb([(0,o.PIB)("seriesMarkerMinSizeSlider")],e.prototype,"seriesMarkerMinSizeSlider",void 0),kb([(0,o.PIB)("seriesMarkerStrokeWidthSlider")],e.prototype,"seriesMarkerStrokeWidthSlider",void 0),kb([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),kb([o.o7C],e.prototype,"init",null),e}(o.uAl),Pb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Nb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Lb=function(t){function e(e,i){var o=t.call(this)||this;return o.chartOptionsService=e,o.getSelectedSeries=i,o}return Pb(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()},e.prototype.initCalloutOptions=function(){var t=this;this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);var e=function(e,i,o,n){var r=t.chartOptionsService.getSeriesOption(e,t.getSelectedSeries());i.setLabel(t.chartTranslationService.translate(o)).setMaxValue(Vb(r,n)).setValue("".concat(r)).setTextFieldWidth(45).onValueChange((function(i){return t.chartOptionsService.setSeriesOption(e,i,t.getSelectedSeries())}))};e("calloutLine.length",this.calloutLengthSlider,"length",40),e("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),e("calloutLabel.offset",this.labelOffsetSlider,"offset",30)},e.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Nb([(0,o.PIB)("calloutGroup")],e.prototype,"calloutGroup",void 0),Nb([(0,o.PIB)("calloutLengthSlider")],e.prototype,"calloutLengthSlider",void 0),Nb([(0,o.PIB)("calloutStrokeWidthSlider")],e.prototype,"calloutStrokeWidthSlider",void 0),Nb([(0,o.PIB)("labelOffsetSlider")],e.prototype,"labelOffsetSlider",void 0),Nb([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Nb([o.o7C],e.prototype,"init",null),e}(o.uAl),_b=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ib=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Fb=function(t){function e(e){var i=e.chartController,o=e.chartOptionsService,n=e.seriesType,r=e.isExpandedOnInit,s=void 0!==r&&r,a=t.call(this)||this;return a.activePanels=[],a.widgetFuncs={lineWidth:function(){return a.initLineWidth()},strokeWidth:function(){return a.initStrokeWidth()},lineDash:function(){return a.initLineDash()},lineOpacity:function(){return a.initLineOpacity()},fillOpacity:function(){return a.initFillOpacity()},markers:function(){return a.initMarkers()},labels:function(){return a.initLabels()},shadow:function(){return a.initShadow()},tooltips:function(){return a.initTooltips()},bins:function(){return a.initBins()}},a.seriesWidgetMappings={area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],scatter:["tooltips","markers","labels"],bubble:["tooltips","markers","labels"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"]},a.chartController=i,a.chartOptionsService=o,a.seriesType=n||a.getChartSeriesType(),a.isExpandedOnInit=s,a}return _b(e,t),e.prototype.init=function(){this.setTemplate(e.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,jm.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()},e.prototype.refreshWidgets=function(){var t=this;this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then((function(){t.chartController.isComboChart()&&(t.updateSeriesType(),t.initSeriesSelect()),t.seriesWidgetMappings[t.seriesType].forEach((function(e){return t.widgetFuncs[e]()}))})).catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},e.prototype.initSeriesSelect=function(){var t=this,e=this.seriesGroup.createManagedBean(new o.Ju4);e.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").addOptions(this.getSeriesSelectOptions()).setValue("".concat(this.seriesType)).onValueChange((function(e){t.seriesType=e,t.refreshWidgets()})),this.seriesGroup.addItem(e),this.activePanels.push(e)},e.prototype.initTooltips=function(){var t=this,e=this.createBean(new o.bLJ);e.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange((function(e){return t.setSeriesOption("tooltip.enabled",e)})),this.addWidget(e)},e.prototype.initStrokeWidth=function(){var t=this,e=this.getSeriesOption("strokeWidth"),i=this.createBean(new o.YD7);i.setLabel(this.translate("strokeWidth")).setMaxValue(Vb(e,10)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.setSeriesOption("strokeWidth",e)})),this.addWidget(i)},e.prototype.initLineWidth=function(){var t=this,e=this.getSeriesOption("strokeWidth"),i=this.createBean(new o.YD7);i.setLabel(this.translate("lineWidth")).setMaxValue(Vb(e,10)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.setSeriesOption("strokeWidth",e)})),this.addWidget(i)},e.prototype.initLineDash=function(){var t=this,e=this.getSeriesOption("lineDash"),i=e?e[0]:0,n=this.createBean(new o.YD7);n.setLabel(this.translate("lineDash")).setMaxValue(Vb(i,30)).setTextFieldWidth(45).setValue("".concat(i)).onValueChange((function(e){return t.setSeriesOption("lineDash",[e])})),this.addWidget(n)},e.prototype.initLineOpacity=function(){var t=this,e=this.getSeriesOption("strokeOpacity"),i=this.createBean(new o.YD7);i.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(Vb(e,1)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.setSeriesOption("strokeOpacity",e)})),this.addWidget(i)},e.prototype.initFillOpacity=function(){var t=this,e=this.getSeriesOption("fillOpacity"),i=this.createBean(new o.YD7);i.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(Vb(e,1)).setTextFieldWidth(45).setValue("".concat(e)).onValueChange((function(e){return t.setSeriesOption("fillOpacity",e)})),this.addWidget(i)},e.prototype.initLabels=function(){var t=this,e="pie"===this.seriesType?"calloutLabel":"label",i=Tb({labelName:"pie"===this.seriesType?this.chartTranslationService.translate("calloutLabels"):this.chartTranslationService.translate("labels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:e}),o=this.createBean(new Zm(i));if("pie"===this.seriesType){var n=this.createBean(new Lb(this.chartOptionsService,(function(){return t.seriesType})));o.addCompToPanel(n),this.activePanels.push(n)}if(this.addWidget(o),"pie"===this.seriesType){var r=Tb({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:function(){return t.seriesType},seriesOptionLabelProperty:"sectorLabel"}),s=this.createBean(new Zm(r)),a=this.getSectorLabelPositionRatio();s.addCompToPanel(a),this.addWidget(s)}},e.prototype.getSectorLabelPositionRatio=function(){var t=this,e="sectorLabel.positionRatio",i=this.chartOptionsService.getSeriesOption(e,this.seriesType);return this.createBean(new o.YD7).setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(Vb(i,1)).setTextFieldWidth(45).setValue("".concat(i)).onValueChange((function(i){return t.chartOptionsService.setSeriesOption(e,i,t.seriesType)}))},e.prototype.initShadow=function(){var t=this,e=this.createBean(new Ab(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},e.prototype.initMarkers=function(){var t=this,e=this.createBean(new Rb(this.chartOptionsService,(function(){return t.seriesType})));this.addWidget(e)},e.prototype.initBins=function(){var t,e=this,i=(null!==(t=this.getSeriesOption("bins"))&&void 0!==t?t:this.getSeriesOption("calculatedBins")).length,n=this.createBean(new o.YD7);n.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(Vb(i,20)).setTextFieldWidth(45).setValue("".concat(i)).onValueChange((function(t){return e.setSeriesOption("binCount",t)})),this.addWidget(n)},e.prototype.addWidget=function(t){this.seriesGroup.addItem(t),this.activePanels.push(t)},e.prototype.getSeriesOption=function(t){return this.chartOptionsService.getSeriesOption(t,this.seriesType)},e.prototype.setSeriesOption=function(t,e){this.chartOptionsService.setSeriesOption(t,e,this.seriesType)},e.prototype.getChartSeriesType=function(){if(0===this.chartController.getSeriesChartTypes().length)return"column";var t=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===t?"column":"areaColumnCombo"===t?"area":Sm(t)},e.prototype.getSeriesSelectOptions=function(){var t=this;this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["pie",{value:"pie",text:this.translate("pie","Pie")}]]));var e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach((function(i){var o=Sm(i.chartType);e.add(t.seriesSelectOptions.get(o))})),Array.from(e)},e.prototype.updateSeriesType=function(){var t=this.chartController.getActiveSeriesChartTypes().map((function(t){return Sm(t.chartType)}));!t.includes(this.seriesType)&&t.length>0&&(this.seriesType=t[0])},e.prototype.translate=function(t,e){return this.chartTranslationService.translate(t,e)},e.prototype.destroyActivePanels=function(){var t=this;this.activePanels.forEach((function(e){o._.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyActivePanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>',Ib([(0,o.PIB)("seriesGroup")],e.prototype,"seriesGroup",void 0),Ib([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Ib([o.o7C],e.prototype,"init",null),e}(o.uAl),Gb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Bb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s};function Vb(t,e){return Math.max(t,e)}var jb={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]},Wb=function(t){function e(i,o){var n=t.call(this,e.TEMPLATE)||this;return n.chartController=i,n.chartOptionsService=o,n.panels=[],n.isGroupPanelShownInSeries=function(t,e){if(["chart","legend","series"].includes(t))return!0;return!(!["axis","navigator"].includes(t)||!["bar","column","line","area","scatter","bubble","histogram","cartesian"].includes(e))},n}return Gb(e,t),e.prototype.init=function(){var t=this;this.createPanels(),this.addManagedListener(this.chartController,jm.EVENT_CHART_UPDATED,(function(){return t.createPanels(!0)})),this.addManagedListener(this.chartController,jm.EVENT_CHART_API_UPDATE,(function(){return t.createPanels(!1)}))},e.prototype.createPanels=function(t){var e,i=this,o=this.chartController.getChartType(),n=this.chartController.isGrouping(),r=Sm(o);t&&o===this.chartType&&n===this.isGrouping||(this.destroyPanels(),null===(e=this.getFormatPanelDef().groups)||void 0===e||e.forEach((function(t){var e=t.type;if(i.isGroupPanelShownInSeries(e,r)){var o={chartController:i.chartController,chartOptionsService:i.chartOptionsService,isExpandedOnInit:t.isOpen,seriesType:r};"chart"===e?i.addComponent(new Eb(o)):"legend"===e?i.addComponent(new tb(o)):"axis"===e?i.addComponent(new cb(o)):"series"===e?i.addComponent(new Fb(o)):"navigator"===e?i.addComponent(new hb(o)):console.warn("AG Grid: invalid charts format panel group name supplied: '".concat(t.type,"'"))}})),this.chartType=o,this.isGrouping=n)},e.prototype.getFormatPanelDef=function(){var t,e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.formatPanel;return e||jb},e.prototype.addComponent=function(t){this.createBean(t),this.panels.push(t),t.addCssClass("ag-chart-format-section"),this.getGui().appendChild(t.getGui())},e.prototype.destroyPanels=function(){var t=this;this.panels.forEach((function(e){o._.removeFromParent(e.getGui()),t.destroyBean(e)}))},e.prototype.destroy=function(){this.destroyPanels(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',Bb([o.o7C],e.prototype,"init",null),e}(o.uAl),zb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Hb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ub=function(t){function e(e,i){var o=t.call(this)||this;o.size=58,o.padding=5,o.root=new nf.Group;var n=new nf.Scene({window:window,document:window.document,width:o.size,height:o.size});return n.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),n.root=o.root,n.container=e,o.scene=n,o.tooltipName=i,o}return zb(e,t),e.prototype.init=function(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch((function(t){console.error("".concat("AG Grid - chart update failed"),t)}))},Hb([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),Hb([o.o7C],e.prototype,"init",null),e}(o.uAl),Kb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Yb=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Xb=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o.stroke="gray",o.axisOvershoot=3,o}return Kb(e,t),e.prototype.addAxes=function(){var t=this.size,e=this.padding,i=new nf.Line;i.x1=e,i.y1=e,i.x2=e,i.y2=t-e+this.axisOvershoot,i.stroke=this.stroke;var o=new nf.Line;o.x1=e-this.axisOvershoot+1,o.y1=t-e,o.x2=t-e+1,o.y2=t-e,o.stroke=this.stroke;var n=this.root;n.append(i),n.append(o)},Yb([o.o7C],e.prototype,"addAxes",null),e}(Ub);function $b(t){var e=t.stacked,i=t.size,o=t.padding,n=t.xScalePadding,r=t.xScaleDomain,s=t.yScaleDomain,a=new nf.BandScale;a.domain=r,a.range=[o,i-o],a.paddingInner=n,a.paddingOuter=n;var l=new nf.LinearScale;l.domain=s,l.range=[i-o,o];var c=function(t,e,i){return t.map((function(t,o){var n=i.convert(t),r=new nf.Rect;return r.x=e.convert(o),r.y=n,r.width=e.bandwidth,r.height=i.convert(0)-n,r.strokeWidth=1,r.crisp=!0,r}))};return e?t.data.map((function(t){return c(t,a,l)})):c(t.data,a,l)}function qb(t,e,i,o){var n=new nf.LinearScale;n.domain=[0,4],n.range=[o,i-o];var r=new nf.LinearScale;r.domain=[0,10],r.range=[i-o,o];var s=e.map((function(t){var e=new nf.Path;return e.strokeWidth=3,e.lineCap="round",e.fill=void 0,t.forEach((function(t,i){e.path[i>0?"lineTo":"moveTo"](n.convert(i),r.convert(t))})),e})),a=new nf.Group;return a.setClipRectInGroupCoordinateSpace(new nf.BBox(o,o,i-2*o,i-2*o)),a.append(s),t.append(a),s}var Zb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Jb=function(t){function e(e,i,o){var n=t.call(this,e,"groupedColumnTooltip")||this;n.columnData=[2,3,4];var r=n,s=r.root,a=r.columnData,l=r.size,c=r.padding;return n.columns=$b({stacked:!1,root:s,data:a,size:l,padding:c,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(n.columns),n.updateColors(i,o),n}return Zb(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,o){i.fill=t[o],i.stroke=e[o]}))},e.chartType="groupedColumn",e}(Xb),Qb=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),tS=function(t){function e(i,o,n,r,s,a){void 0===r&&(r=e.data),void 0===s&&(s=[0,16]),void 0===a&&(a="stackedColumnTooltip");var l=t.call(this,i,a)||this,c=l,d=c.root,u=c.size,h=c.padding;return l.stackedColumns=$b({stacked:!0,root:d,data:r,size:u,padding:h,xScaleDomain:[0,1,2],yScaleDomain:s,xScalePadding:.3}),d.append([].concat.apply([],l.stackedColumns)),l.updateColors(o,n),l}return Qb(e,t),e.prototype.updateColors=function(t,e){this.stackedColumns.forEach((function(i,o){return i.forEach((function(i){i.fill=t[o],i.stroke=e[o]}))}))},e.chartType="stackedColumn",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(Xb),eS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),iS=function(t){function e(i,o,n){return t.call(this,i,o,n,e.data,[0,10],"normalizedColumnTooltip")||this}return eS(e,t),e.chartType="normalizedColumn",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(tS),oS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),nS=function(t){function e(e,i,o){var n=t.call(this,e,"groupedBarTooltip")||this,r=n.padding,s=n.size,a=new nf.BandScale;a.domain=[0,1,2],a.range=[r,s-r],a.paddingInner=.3,a.paddingOuter=.3;var l=new nf.LinearScale;l.domain=[0,4],l.range=[s-r,r];var c=l.convert(0),d=a.bandwidth;return n.bars=[2,3,4].map((function(t,e){var i=new nf.Rect;return i.x=r,i.y=a.convert(e),i.width=c-l.convert(t),i.height=d,i.strokeWidth=1,i.crisp=!0,i})),n.updateColors(i,o),n.root.append(n.bars),n}return oS(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(i,o){i.fill=t[o],i.stroke=e[o]}))},e.chartType="groupedBar",e}(Xb),rS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),sS=function(t){function e(i,o,n,r,s,a){void 0===r&&(r=e.data),void 0===s&&(s=[0,16]),void 0===a&&(a="stackedBarTooltip");var l=t.call(this,i,a)||this,c=l.size,d=l.padding,u=new nf.BandScale;u.domain=[0,1,2],u.range=[d,c-d],u.paddingInner=.3,u.paddingOuter=.3;var h=new nf.LinearScale;h.domain=s,h.range=[c-d,d];var p=h.convert(0),f=u.bandwidth;return l.bars=r.map((function(t){return t.map((function(t,e){var i=new nf.Rect;return i.x=d,i.y=u.convert(e),i.width=p-h.convert(t),i.height=f,i.strokeWidth=1,i.crisp=!0,i}))})),l.updateColors(o,n),l.root.append([].concat.apply([],l.bars)),l}return rS(e,t),e.prototype.updateColors=function(t,e){this.bars.forEach((function(i,o){return i.forEach((function(i){i.fill=t[o],i.stroke=e[o]}))}))},e.chartType="stackedBar",e.data=[[8,12,16],[6,9,12],[2,3,4]],e}(Xb),aS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),lS=function(t){function e(i,o,n){return t.call(this,i,o,n,e.data,[0,10],"normalizedBarTooltip")||this}return aS(e,t),e.chartType="normalizedBar",e.data=[[10,10,10],[6,7,8],[2,4,6]],e}(sS),cS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),dS=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},uS=nf.toRadians,hS=function(t){function e(e,i,o,n,r){void 0===n&&(n=.6),void 0===r&&(r="doughnutTooltip");var s=t.call(this,e,r)||this,a=(s.size-2*s.padding)/2,l=a+s.padding,c=[[uS(-90),uS(30)],[uS(30),uS(120)],[uS(120),uS(180)],[uS(180),uS(210)],[uS(210),uS(240)],[uS(240),uS(270)]];return s.sectors=c.map((function(t){var e=dS(t,2),i=e[0],o=e[1],r=new nf.Sector;return r.centerX=l,r.centerY=l,r.innerRadius=a*n,r.outerRadius=a,r.startAngle=i,r.endAngle=o,r.stroke=void 0,r.strokeWidth=1,r})),s.updateColors(i,o),s.root.append(s.sectors),s}return cS(e,t),e.prototype.updateColors=function(t,e){this.sectors.forEach((function(i,o){i.fill=t[o%t.length],i.stroke=e[o%e.length]}))},e.chartType="doughnut",e}(Ub),pS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),fS=function(t){function e(e,i,o){return t.call(this,e,i,o,0,"pieTooltip")||this}return pS(e,t),e.chartType="pie",e}(hS),gS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),vS=function(t){function e(e,i,o){var n=t.call(this,e,"lineTooltip")||this;return n.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],n.lines=qb(n.root,n.data,n.size,n.padding),n.updateColors(i,o),n}return gS(e,t),e.prototype.updateColors=function(t,e){this.lines.forEach((function(e,i){e.stroke=t[i]}))},e.chartType="line",e}(Xb),yS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),mS=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},bS=function(t){function e(e,i,o){var n=t.call(this,e,"scatterTooltip")||this,r=n.size,s=n.padding,a=new nf.LinearScale;a.domain=[-.5,4],a.range=[2*s,r-s];var l=new nf.LinearScale;l.domain=[-.5,3.5],l.range=[r-s,s];var c=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach((function(t){t.forEach((function(t){var e=mS(t,2),i=e[0],o=e[1],n=new nf.Arc;n.strokeWidth=1,n.centerX=a.convert(i),n.centerY=l.convert(o),n.radius=2.5,c.push(n)}))})),n.points=c,n.updateColors(i,o);var d=new nf.Group;return d.setClipRectInGroupCoordinateSpace(new nf.BBox(s,s,r-2*s,r-2*s)),d.append(n.points),n.root.append(d),n}return yS(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(i,o){i.stroke=e[o%e.length],i.fill=t[o%t.length]}))},e.chartType="scatter",e}(Xb),SS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),xS=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},CS=function(t){function e(e,i,o){var n=t.call(this,e,"bubbleTooltip")||this,r=n.size,s=n.padding,a=new nf.LinearScale;a.domain=[0,1],a.range=[2*s,r-s];var l=new nf.LinearScale;l.domain=[0,1],l.range=[r-s,s];var c=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach((function(t){t.forEach((function(t){var e=xS(t,3),i=e[0],o=e[1],n=e[2],r=new nf.Arc;r.strokeWidth=1,r.centerX=a.convert(i),r.centerY=l.convert(o),r.radius=n,r.fillOpacity=.7,c.push(r)}))})),n.points=c,n.updateColors(i,o);var d=new nf.Group;return d.setClipRectInGroupCoordinateSpace(new nf.BBox(s,s,r-2*s,r-2*s)),d.append(n.points),n.root.append(d),n}return SS(e,t),e.prototype.updateColors=function(t,e){this.points.forEach((function(i,o){i.stroke=e[o%e.length],i.fill=t[o%t.length]}))},e.chartType="bubble",e}(Xb),wS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ES=function(t){function e(i,o,n,r){void 0===r&&(r=e.data);var s=t.call(this,i,"groupedAreaTooltip")||this,a=s.size,l=s.padding,c=new nf.BandScale;c.domain=[0,1,2],c.paddingInner=1,c.paddingOuter=0,c.range=[l+.5,a-l-.5];var d=new nf.LinearScale;d.domain=[0,6],d.range=[a-l+.5,l];var u=2*r.length-1,h=[],p=d.convert(0);return r.forEach((function(t,e){var i=c.convert(e);t.forEach((function(t,o){var n=d.convert(t),r=h[o]||(h[o]=[]);r[e]={x:i,y:n},r[u-e]={x:i,y:p}}))})),s.areas=h.reverse().map((function(t){var e=new nf.Path;e.strokeWidth=1,e.fillOpacity=.7;var i=e.path;return i.clear(),t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),i.closePath(),e})),s.updateColors(o,n),s.root.append(s.areas),s}return wS(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,o){i.fill=t[o],i.stroke=e[o]}))},e.chartType="area",e.data=[[1,3,5],[2,6,4],[5,3,1]],e}(Xb),OS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),DS=function(t){function e(i,o,n,r,s){void 0===r&&(r=e.data),void 0===s&&(s="stackedAreaTooltip");var a=t.call(this,i,s)||this,l=a.size,c=a.padding,d=new nf.BandScale;d.domain=[0,1,2],d.paddingInner=1,d.paddingOuter=0,d.range=[c+.5,l-c-.5];var u=new nf.LinearScale;u.domain=[0,16],u.range=[l-c+.5,c+.5];var h=2*r.length-1,p=[];return r.forEach((function(t,e){var i=d.convert(e),o=0;t.forEach((function(t,n){var r=u.convert(o+t),s=p[n]||(p[n]=[]);s[e]={x:i,y:r},s[h-e]={x:i,y:u.convert(o)},o+=t}))})),a.areas=p.map((function(t){var e=new nf.Path;e.strokeWidth=1;var i=e.path;return i.clear(),t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),i.closePath(),e})),a.updateColors(o,n),a.root.append(a.areas),a}return OS(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,o){i.fill=t[o],i.stroke=e[o]}))},e.chartType="stackedArea",e.data=[[2,3,2],[3,6,5],[6,2,2]],e}(Xb),AS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),TS=function(t){function e(i,o,n,r){return void 0===r&&(r=e.data),t.call(this,i,o,n,r,"normalizedAreaTooltip")||this}return AS(e,t),e.chartType="normalizedArea",e.data=DS.data.map((function(t){var e=t.reduce((function(t,e){return t+e}),0);return t.map((function(t){return t/e*16}))})),e}(DS),MS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),kS=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},RS=function(t){function e(e,i,o){var n=t.call(this,e,"histogramTooltip")||this,r=n.padding,s=n.size,a=[2,5,11,13,10,6,1],l=new nf.LinearScale;l.domain=[0,a.length],l.range=[r,s-r];var c=new nf.LinearScale;c.domain=[0,a.reduce((function(t,e){return Math.max(t,e)}),0)],c.range=[s-r,r];var d=c.convert(0);return n.bars=a.map((function(t,e){var i=c.convert(t),o=l.convert(e),n=l.convert(e+1),r=new nf.Rect;return r.x=o,r.y=i,r.width=n-o,r.height=d-i,r.strokeWidth=1,r.crisp=!0,r})),n.updateColors(i,o),n.root.append(n.bars),n}return MS(e,t),e.prototype.updateColors=function(t,e){var i=kS(t,1)[0],o=kS(e,1)[0];this.bars.forEach((function(t){t.fill=i,t.stroke=o}))},e.chartType="histogram",e}(Xb),PS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),NS=function(t){function e(e,i,o){var n=t.call(this,e,"columnLineComboTooltip")||this;n.columnData=[3,4],n.lineData=[[5,4,6,5,4]];var r=n,s=r.root,a=r.columnData,l=r.lineData,c=r.size,d=r.padding;return n.columns=$b({stacked:!1,root:s,data:a,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(n.columns),n.lines=qb(s,l,c,d),n.updateColors(i,o),n}return PS(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,o){i.fill=t[o],i.stroke=e[o]})),this.lines.forEach((function(e,i){e.stroke=t[i+2]}))},e.chartType="columnLineCombo",e}(Xb),LS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_S=function(t){function e(e,i,o){var n=t.call(this,e,"areaColumnComboTooltip")||this;n.columnData=[3,4.5],n.areaData=[[5,4,6,5,4]];var r=n,s=r.root,a=r.columnData,l=r.areaData,c=r.size,d=r.padding;n.columns=$b({stacked:!1,root:s,data:a,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});var u=new nf.BandScale;u.range=[d,c-d],u.domain=[0,1,2,3,4],u.paddingInner=1,u.paddingOuter=0;var h=new nf.LinearScale;h.range=[c-d,d],h.domain=[0,6];var p=[],f=h.convert(0),g=u.convert(0);return l.forEach((function(t,e){var i=p[e]||(p[e]=[]);t.forEach((function(t,e){var o=t,n=e,r=u.convert(n),s=h.convert(o);i[e]={x:r,y:s}}));var o=u.convert(t.length-1);p[e].push({x:o,y:f},{x:g,y:f})})),n.areas=p.map((function(t){var e=new nf.Path;e.strokeWidth=1,e.fillOpacity=.8;var i=e.path;return t.forEach((function(t,e){return i[e>0?"lineTo":"moveTo"](t.x,t.y)})),e})),s.append(n.areas),s.append([].concat.apply([],n.columns)),n.updateColors(i,o),n}return LS(e,t),e.prototype.updateColors=function(t,e){this.areas.forEach((function(i,o){i.fill=t[o],i.stroke=e[o]})),this.columns.forEach((function(i,o){i.fill=t[o+1],i.stroke=e[o+1]}))},e.chartType="areaColumnCombo",e}(Xb),IS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),FS=function(t){function e(e,i,o){var n=t.call(this,e,"customComboTooltip")||this;n.columnData=[3,4],n.lineData=[[5,4,6,5,4]];var r=n,s=r.root,a=r.columnData,l=r.lineData,c=r.size,d=r.padding;n.columns=$b({stacked:!1,root:s,data:a,size:c,padding:d,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(n.columns),n.lines=qb(s,l,c,d);var u="grey",h=new nf.Line;h.x1=d,h.y1=d,h.x2=d,h.y2=c-d+3,h.stroke=u;var p=new nf.Line;p.x1=d-3+1,p.y1=c-d,p.x2=c-d+1,p.y2=c-d,p.stroke=u;var f=new nf.Path;return n.buildPenIconPath(f),f.fill="whitesmoke",f.stroke="darkslategrey",f.strokeWidth=1,s.append([p,h,f]),n.updateColors(i,o),n}return IS(e,t),e.prototype.updateColors=function(t,e){this.columns.forEach((function(i,o){i.fill=t[o],i.stroke=e[o]})),this.lines.forEach((function(e,i){e.stroke=t[i+2]}))},e.prototype.buildPenIconPath=function(t){var e=t.path;e.moveTo(25.76,43.46),e.lineTo(31.27,48.53),e.moveTo(49.86,22),e.lineTo(49.86,22),e.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),e.lineTo(46.86,21.41),e.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),e.lineTo(25.51,43.8),e.lineTo(25.43,43.89),e.lineTo(23.01,51.89),e.lineTo(22.83,52.46),e.lineTo(31.02,48.86),e.lineTo(49.02,28.52),e.lineTo(49.02,28.52),e.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),e.lineTo(50.75,24.93),e.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),e.closePath(),e.moveTo(41.76,25.5),e.lineTo(47.34,30.5),e.moveTo(40.74,26.65),e.lineTo(46.25,31.71)},e.chartType="customCombo",e}(Ub),GS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),BS=function(){return BS=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},BS.apply(this,arguments)},VS=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},jS={columnGroup:{column:Jb,stackedColumn:tS,normalizedColumn:iS},barGroup:{bar:nS,stackedBar:sS,normalizedBar:lS},pieGroup:{pie:fS,doughnut:hS},lineGroup:{line:vS},scatterGroup:{scatter:bS,bubble:CS},areaGroup:{area:ES,stackedArea:DS,normalizedArea:TS},histogramGroup:{histogram:RS},combinationGroup:{columnLineCombo:NS,areaColumnCombo:_S,customCombo:FS}},WS=function(t){function e(i,n,r,s){void 0===s&&(s=o.kWo);var a=t.call(this,e.TEMPLATE)||this;return a.wrappers={},a.chartController=i,a.fills=n,a.strokes=r,a.chartGroups=BS({},s),a}return GS(e,t),e.prototype.init=function(){var t=this;!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter((function(t){return"customCombo"!==t})));var e=this.getGui();Object.keys(this.chartGroups).forEach((function(i){var n=t.chartGroups[i],r=t.createBean(new o.Pk_({title:t.chartTranslationService.translate(i),suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));n.forEach((function(e){var n,s=null===(n=jS[i])||void 0===n?void 0:n[e];if(s){var a=document.createElement("div");a.classList.add("ag-chart-mini-thumbnail");var l=s.chartType;t.addManagedListener(a,"click",(function(){t.chartController.setChartType(l),t.updateSelectedMiniChart()})),t.wrappers[l]=a,t.createBean(new s(a,t.fills,t.strokes)),r.addItem(a)}else o._.warnOnce("invalid chartGroupsDef config '".concat(i).concat(jS[i]?".".concat(e):"","'"))})),e.appendChild(r.getGui())})),this.updateSelectedMiniChart()},e.prototype.updateSelectedMiniChart=function(){var t=this.chartController.getChartType();for(var e in this.wrappers){var i=e===t;this.wrappers[e].classList.toggle("ag-selected",i)}},e.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',VS([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),VS([o.o7C],e.prototype,"init",null),e}(o.uAl),zS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),HS=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},US=function(t){function e(i){var o=t.call(this,e.TEMPLATE)||this;return o.miniChartsContainers=[],o.cardItems=[],o.activePaletteIndex=0,o.palettes=[],o.themes=[],o.chartController=i,o}return zS(e,t),e.prototype.postConstruct=function(){var t=this;this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",o._.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",o._.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",(function(){return t.setActivePalette(t.getPrev(),"left")})),this.addManagedListener(this.eNextBtn,"click",(function(){return t.setActivePalette(t.getNext(),"right")})),this.addManagedListener(this.chartController,jm.EVENT_CHART_TYPE_CHANGED,(function(){return t.resetPalettes(!0)})),this.addManagedListener(this.chartController,jm.EVENT_CHART_API_UPDATE,(function(){return t.resetPalettes(!0)})),this.scrollSelectedIntoView()},e.prototype.scrollSelectedIntoView=function(){var t=this;setTimeout((function(){var e=t.miniChartsContainers.find((function(t){return!t.getGui().classList.contains("ag-hidden")})).getGui().querySelector(".ag-selected");if(e){var i=e.offsetParent;i&&t.eMiniChartsContainer.scrollTo(0,i.offsetTop)}}),250)},e.prototype.resetPalettes=function(t){var e,i,n=this,r=this.chartController.getPalettes(),s=null===(i=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;o._.shallowCompare(r,this.palettes)&&!t||this.isAnimating||(this.palettes=r,this.themes=this.chartController.getThemes(),this.activePaletteIndex=this.themes.findIndex((function(t){return t===n.chartController.getChartThemeName()})),this.cardItems=[],o._.clearElement(this.eCardSelector),this.destroyMiniCharts(),this.palettes.forEach((function(t,e){var i=n.activePaletteIndex===e,o=t.fills,r=t.strokes,a=n.createBean(new WS(n.chartController,o,r,s));n.miniChartsContainers.push(a),n.eMiniChartsContainer.appendChild(a.getGui()),n.addCardLink(e),i?a.updateSelectedMiniChart():a.setDisplayed(!1)})),o._.setDisplayed(this.eNavBar,this.palettes.length>1),o._.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected"))},e.prototype.addCardLink=function(t){var e=this,i=document.createElement("div");i.classList.add("ag-chart-settings-card-item"),this.addManagedListener(i,"click",(function(){e.setActivePalette(t,t<e.activePaletteIndex?"left":"right")})),this.eCardSelector.appendChild(i),this.cardItems.push(i)},e.prototype.getPrev=function(){var t=this.activePaletteIndex-1;return t<0&&(t=this.palettes.length-1),t},e.prototype.getNext=function(){var t=this.activePaletteIndex+1;return t>=this.palettes.length&&(t=0),t},e.prototype.setActivePalette=function(t,e){var i=this;if(!this.isAnimating&&this.activePaletteIndex!==t){o._.radioCssClass(this.cardItems[t],"ag-selected","ag-not-selected");var n=this.miniChartsContainers[this.activePaletteIndex],r=n.getGui(),s=this.miniChartsContainers[t],a=s.getGui();n.updateSelectedMiniChart(),s.updateSelectedMiniChart();var l="left"===e?-1:1,c=a.style.left="".concat(o._.getAbsoluteWidth(this.getGui())*l,"px");this.activePaletteIndex=t,this.isAnimating=!0;var d="ag-animating";s.setDisplayed(!0),n.addCssClass(d),s.addCssClass(d),this.chartController.setChartThemeName(this.themes[t]),window.setTimeout((function(){r.style.left="".concat(-parseFloat(c),"px"),a.style.left="0px"}),0),window.setTimeout((function(){i.isAnimating=!1,n.removeCssClass(d),s.removeCssClass(d),n.setDisplayed(!1)}),300)}},e.prototype.destroyMiniCharts=function(){o._.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)},e.prototype.destroy=function(){this.destroyMiniCharts(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',HS([(0,o.dsm)("resizeObserverService")],e.prototype,"resizeObserverService",void 0),HS([(0,o.PIB)("eMiniChartsContainer")],e.prototype,"eMiniChartsContainer",void 0),HS([(0,o.PIB)("eNavBar")],e.prototype,"eNavBar",void 0),HS([(0,o.PIB)("eCardSelector")],e.prototype,"eCardSelector",void 0),HS([(0,o.PIB)("ePrevBtn")],e.prototype,"ePrevBtn",void 0),HS([(0,o.PIB)("eNextBtn")],e.prototype,"eNextBtn",void 0),HS([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),KS=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),YS=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},XS=function(t){function e(e){var i=t.call(this)||this;i.tabs=[];var o=e.controller,n=e.panels,r=e.chartOptionsService;return i.chartController=o,i.chartOptionsService=r,i.panels=n,i}return KS(e,t),e.prototype.init=function(){var t=this;this.panels.forEach((function(e){var i=e.replace("chart","").toLowerCase(),o=t.createTab(e,i,t.getPanelClass(i)),n=o.comp,r=o.tab;t.tabs.push(r),t.addDestroyFunc((function(){return t.destroyBean(n)}))})),this.tabbedLayout=new o.LfH({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)},e.prototype.createTab=function(t,e,i){var n=document.createElement("div");n.classList.add("ag-chart-tab","ag-chart-".concat(e));var r=new i(this.chartController,this.chartOptionsService);this.getContext().createBean(r),n.appendChild(r.getGui());var s=document.createElement("div"),a=this.chartTranslationService.translate(e);return s.innerText=a,{comp:r,tab:{title:s,titleLabel:a,bodyPromise:o.oY$.resolve(n),getScrollableContainer:function(){return n.querySelector(".ag-scrollable-container")||n},name:t}}},e.prototype.showTab=function(t){var e=this.tabs[t];this.tabbedLayout.showItem(e)},e.prototype.getGui=function(){return this.tabbedLayout&&this.tabbedLayout.getGui()},e.prototype.destroy=function(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),t.prototype.destroy.call(this)},e.prototype.getPanelClass=function(t){switch(t){case e.TAB_DATA:return Xm;case e.TAB_FORMAT:return Wb;default:return US}},e.TAB_DATA="data",e.TAB_FORMAT="format",YS([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),YS([o.o7C],e.prototype,"init",null),e}(o.uAl),$S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qS=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ZS=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},JS=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},QS=function(t){function e(i,o,n,r){var s=t.call(this,e.TEMPLATE)||this;return s.eChartContainer=i,s.eMenuPanelContainer=o,s.chartController=n,s.chartOptionsService=r,s.buttons={chartSettings:["menu",function(){return s.showMenu(s.defaultPanel)}],chartData:["menu",function(){return s.showMenu("chartData")}],chartFormat:["menu",function(){return s.showMenu("chartFormat")}],chartLink:["linked",function(t){return s.toggleDetached(t)}],chartUnlink:["unlinked",function(t){return s.toggleDetached(t)}],chartDownload:["save",function(){return s.saveChart()}]},s.panels=[],s.buttonListenersDestroyFuncs=[],s.menuVisible=!1,s}return $S(e,t),e.prototype.postConstruct=function(){var t=this;this.createButtons(),this.addManagedListener(this.eventService,o.sVA.EVENT_CHART_CREATED,(function(e){var i;e.chartId===t.chartController.getChartId()&&(Boolean(null===(i=t.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.defaultToolPanel)&&t.showMenu(t.defaultPanel,!1))})),this.refreshMenuClasses(),!this.gridOptionsService.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,jm.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))},e.prototype.isVisible=function(){return this.menuVisible},e.prototype.getExtraPaddingDirections=function(){var t=this,e=[];return["chartLink","chartUnlink","chartDownload"].some((function(e){return t.chartToolbarOptions.includes(e)}))&&e.push("top"),["chartSettings","chartData","chartFormat"].some((function(e){return t.chartToolbarOptions.includes(e)}))&&e.push(this.gridOptionsService.get("enableRtl")?"left":"right"),e},e.prototype.getToolbarOptions=function(){var t,e,i,n=this;if(Boolean(this.gridOptionsService.get("chartToolPanelsDef"))){var r=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],s={defaultItems:r},a=(d=this.gridOptionsService.getCallback("getChartToolbarItems"))?d(s).filter((function(t){if(!o.QO.includes(t)){var e=o.wCj.includes(t)?"AG Grid: '".concat(t,"' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead"):"AG Grid: '".concat(t,"' is not a valid Chart Toolbar Option");return console.warn(e),!1}return!0})):r,l=null===(e=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.panels)||void 0===e?void 0:e.map((function(t){var e=o.CV1[t];return e||console.warn("AG Grid - invalid panel in chartToolPanelsDef.panels: '".concat(t,"'")),e})).filter((function(t){return Boolean(t)}));this.panels=l||Object.values(o.CV1),this.chartController.isPivotChart()&&(this.panels=this.panels.filter((function(t){return"chartData"!==t})));var c=null===(i=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.defaultToolPanel;return this.defaultPanel=c&&o.CV1[c]||this.panels[0],this.panels.length>0?JS([this.panels[0]],ZS(a),!1):a}var d,u=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];if(d=this.gridOptionsService.getCallback("getChartToolbarItems")){var h=this.gridOptionsService.get("suppressChartToolPanelsButton");u=d(s={defaultItems:h?u:o.QO}).filter((function(t){if(!n.buttons[t])return console.warn("AG Grid: '".concat(t,"' is not a valid Chart Toolbar Option")),!1;if(!h&&o.wCj.includes(t)){var e="AG Grid: '".concat(t,"' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead");return console.warn(e),!1}return!0})),h||(u=u.concat(o.wCj))}this.chartController.isPivotChart()&&(u=u.filter((function(t){return"chartData"!==t})));var p=["chartUnlink","chartLink","chartDownload"];return this.panels=u.filter((function(t){return-1===p.indexOf(t)})),this.defaultPanel=this.panels[0],u.filter((function(t){return-1!==p.indexOf(t)||n.panels.length&&t===n.panels[0]}))},e.prototype.toggleDetached=function(t){var e=t.target,i=e.classList.contains("ag-icon-linked");e.classList.toggle("ag-icon-linked",!i),e.classList.toggle("ag-icon-unlinked",i);var o=i?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip",n=this.chartTranslationService.translate(o);n&&(e.title=n),this.chartController.detachChartRange()},e.prototype.createButtons=function(){var t=this;this.buttonListenersDestroyFuncs.forEach((function(t){return t()})),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();var e=this.eMenu;o._.clearElement(e),this.chartToolbarOptions.forEach((function(i){var n=t.buttons[i],r=ZS(n,2),s=r[0],a=r[1],l=o._.createIconNoSpan(s,t.gridOptionsService,void 0,!0);l.classList.add("ag-chart-menu-icon");var c=t.chartTranslationService.translate(i+"ToolbarTooltip");c&&l instanceof HTMLElement&&(l.title=c),t.buttonListenersDestroyFuncs.push(t.addManagedListener(l,"click",a)),e.appendChild(l)}))},e.prototype.saveChart=function(){var t={type:e.EVENT_DOWNLOAD_CHART};this.dispatchEvent(t)},e.prototype.createMenuPanel=function(t){var e=this,i=this.environment.chartMenuPanelWidth(),n=this.menuPanel=this.createBean(new o.LT8({minWidth:i,width:i,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return n.setParentComponent(this),this.eMenuPanelContainer.appendChild(n.getGui()),this.tabbedMenu=this.createBean(new XS({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(n,o.uAl.EVENT_DESTROYED,(function(){return e.destroyBean(e.tabbedMenu)})),new o.oY$((function(i){window.setTimeout((function(){n.setBodyComponent(e.tabbedMenu),e.tabbedMenu.showTab(t),i(n),e.addManagedListener(e.eChartContainer,"click",(function(t){e.getGui().contains(t.target)||e.menuVisible&&e.hideMenu()}))}),100)}))},e.prototype.showContainer=function(){this.menuPanel&&(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())},e.prototype.toggleMenu=function(){this.menuVisible?this.hideMenu():this.showMenu()},e.prototype.showMenu=function(t,e){var i=this;if(void 0===e&&(e=!0),e||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!t)this.showContainer();else{var o=t||this.defaultPanel,n=this.panels.indexOf(o);n<0&&(console.warn("AG Grid: '".concat(t,"' is not a valid Chart Tool Panel name")),n=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(n),this.showContainer()):this.createMenuPanel(n).then(this.showContainer.bind(this))}e||setTimeout((function(){i.isAlive()&&i.eMenuPanelContainer.classList.remove("ag-no-transition")}),500)},e.prototype.hideMenu=function(){var t=this;this.hideParent(),window.setTimeout((function(){t.menuVisible=!1,t.refreshMenuClasses()}),500)},e.prototype.refreshMenuClasses=function(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.get("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))},e.prototype.showParent=function(t){this.eMenuPanelContainer.style.minWidth="".concat(t,"px")},e.prototype.hideParent=function(){this.eMenuPanelContainer.style.minWidth="0"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)},e.EVENT_DOWNLOAD_CHART="downloadChart",e.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-button ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>',qS([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),qS([(0,o.PIB)("eMenu")],e.prototype,"eMenu",void 0),qS([(0,o.PIB)("eHideButton")],e.prototype,"eHideButton",void 0),qS([(0,o.PIB)("eHideButtonIcon")],e.prototype,"eHideButtonIcon",void 0),qS([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),tx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ex=function(){return ex=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},ex.apply(this,arguments)},ix=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ox=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nx=function(t){function e(i){var o=t.call(this,e.TEMPLATE)||this;return o.chartMenu=i,o.destroyableChartListeners=[],o.editing=!1,o}return tx(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.getGui(),"keydown",(function(e){t.editing&&"Enter"===e.key&&!e.shiftKey&&(t.handleEndEditing(),e.preventDefault())})),this.addManagedListener(this.getGui(),"input",(function(){t.editing&&t.updateHeight()})),this.addManagedListener(this.getGui(),"blur",(function(){return t.endEditing()}))},e.prototype.refreshTitle=function(t,e){var i,o,n=this;this.chartController=t,this.chartOptionsService=e;try{for(var r=ox(this.destroyableChartListeners),s=r.next();!s.done;s=r.next()){(0,s.value)()}}catch(h){i={error:h}}finally{try{s&&!s.done&&(o=r.return)&&o.call(r)}finally{if(i)throw i.error}}this.destroyableChartListeners=[];var a=this.chartController.getChartProxy().getChart(),l=a.scene.canvas.element,c=this.addManagedListener(l,"dblclick",(function(t){var e=a.title;if(e&&e.node.containsPoint(t.offsetX,t.offsetY)){var i=e.node.computeBBox(),o=e.node.inverseTransformPoint(i.x,i.y);n.startEditing(ex(ex({},i),o),l.width)}})),d=!1,u=this.addManagedListener(l,"mousemove",(function(t){var e=a.title,i=!!(e&&e.enabled&&e.node.containsPoint(t.offsetX,t.offsetY));d!==i&&(l.style.cursor=i?"pointer":""),d=i}));this.destroyableChartListeners=[c,u]},e.prototype.startEditing=function(t,e){if((!this.chartMenu||!this.chartMenu.isVisible())&&!this.editing){this.editing=!0;var i=Math.max(Math.min(t.width+20,e),300),o=this.getGui();o.classList.add("currently-editing");var n=o.style;n.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),n.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),n.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),n.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",n.color=this.chartOptionsService.getChartOption("title.color");var r=this.chartOptionsService.getChartOption("title.text"),s=r===this.chartTranslationService.translate("titlePlaceholder");o.value=s?"":r;var a=r.split(/\r?\n/g).length;n.left=Math.round(t.x+t.width/2-i/2-1)+"px",n.top=Math.round(t.y+t.height/2-a*this.getLineHeight()/2-2)+"px",n.width=Math.round(i)+"px",n.lineHeight=this.getLineHeight()+"px",this.updateHeight(),o.focus()}},e.prototype.updateHeight=function(){var t=this.getGui(),e=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,i=t.value.split(/\r?\n/g).length;t.style.height=Math.round(Math.max(e,i)*this.getLineHeight())+4+"px"},e.prototype.getLineHeight=function(){var t=this.chartOptionsService.getChartOption("title.lineHeight");return t?parseInt(t):Math.round(1.2*parseInt(this.chartOptionsService.getChartOption("title.fontSize")))},e.prototype.handleEndEditing=function(){var t=this,e=this.chartOptionsService.getChartOption("title.color");this.chartOptionsService.setChartOption("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate((function(){return t.endEditing()})),this.chartOptionsService.awaitChartOptionUpdate((function(){t.chartOptionsService.setChartOption("title.color",e)}))},e.prototype.endEditing=function(){var t=this;if(this.editing){this.editing=!1;var e=this.getGui().value;e&&""!==e.trim()?(this.chartOptionsService.setChartOption("title.text",e),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate((function(){t.eventService.dispatchEvent({type:"chartTitleEdit"})}))}},e.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ',ix([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),ix([o.o7C],e.prototype,"init",null),e}(o.uAl),rx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),sx=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ax=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rx(e,t),e.prototype.getData=function(t){if(t.crossFiltering){if(t.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&t.pivoting&&this.updatePivotKeysForSSRM();var e=this.extractRowsFromGridRowModel(t);return e.chartData=this.aggregateRowsByDimension(t,e.chartData),e},e.prototype.extractRowsFromGridRowModel=function(t){var i,n=this,r=[],s={},a={},l={},c={},d=[];if(t.crossFiltering)c=this.getFilteredRowNodes(),i=(d=this.getAllRowNodes()).length;else{var u=this.gridRowModel.getRowCount()-1;i=(t.endRow>=0?Math.min(t.endRow,u):u)-t.startRow+1}for(var h=function(i){var o={},u=t.crossFiltering?d[i]:p.gridRowModel.getRow(i+t.startRow);t.dimensionCols.forEach((function(r){var s=r.colId,c=n.columnModel.getGridColumn(s);if(c){var d=n.valueService.getValue(c,u);if(t.grouping){var h=d&&d.toString?String(d.toString()):"",p=e.getGroupLabels(u,h);o[s]={labels:p,toString:function(){return this.labels.filter((function(t){return!!t})).reverse().join(" - ")}},u.group&&(a[p.toString()]=i);var f=p.slice(1,p.length).toString();f&&(l[f]=a[f])}else o[s]=d}else o[bx.DEFAULT_CATEGORY]=i+1})),t.valueCols.forEach((function(e){var i=[],r=e.getColDef().pivotKeys;r&&(i=r.slice());var a=e.getColDef().headerName;a&&i.push(a),i.length>0&&(s[e.getId()]=i);var l=e.getColId();if(t.crossFiltering){var d=l+"-filtered-out",h=null!=(p=n.valueService.getValue(e,u))&&"function"===typeof p.toNumber?p.toNumber():p;c[u.id]?(o[l]=h,o[d]=t.aggFunc||t.isScatter?void 0:0):(o[l]=t.aggFunc||t.isScatter?void 0:0,o[d]=h)}else{var p;(p=n.valueService.getValue(e,u))&&p.hasOwnProperty("toString")&&(p=parseFloat(p.toString())),o[l]=null!=p&&"function"===typeof p.toNumber?p.toNumber():p}})),u.footer&&(o.footer=!0),r.push(o)},p=this,f=0;f<i;f++)h(f);if(t.grouping){var g=o._.values(l);r=r.filter((function(t,e){return!t.footer&&!o._.includes(g,e)}))}return{chartData:r,columnNames:s}},e.prototype.aggregateRowsByDimension=function(t,e){var i=this,n=t.dimensionCols;if(!t.aggFunc||0===n.length)return e;var r=o._.last(n),s=r&&r.colId,a={},l=[];return e.forEach((function(t){var e=a;n.forEach((function(i){var o=i.colId,r=t[o];if(o===s){var a=e[r];a||(a={__children:[]},n.forEach((function(e){var i=e.colId;a[i]=t[i]})),e[r]=a,l.push(a)),a.__children.push(t)}else e[r]||(e[r]={}),e=e[r]}))})),o.syG.__assertRegistered(o.zsj.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&l.forEach((function(e){return t.valueCols.forEach((function(n){if(t.crossFiltering)t.valueCols.forEach((function(o){var n=o.getColId(),r=e.__children.filter((function(t){return"undefined"!==typeof t[n]})).map((function(t){return t[n]})),s=i.aggregationStage.aggregateValues(r,t.aggFunc);e[o.getId()]=s&&"undefined"!==typeof s.value?s.value:s;var a="".concat(n,"-filtered-out"),l=e.__children.filter((function(t){return"undefined"!==typeof t[a]})).map((function(t){return t[a]})),c=i.aggregationStage.aggregateValues(l,t.aggFunc);e[a]=c&&"undefined"!==typeof c.value?c.value:c}));else{var r=e.__children.map((function(t){return t[n.getId()]})),s=0;o.syG.__assertRegistered(o.zsj.RowGroupingModule,"Charting Aggregation",i.context.getGridId())&&(s=i.aggregationStage.aggregateValues(r,t.aggFunc)),e[n.getId()]=s&&"undefined"!==typeof s.value?s.value:s}}))})),l},e.prototype.updatePivotKeysForSSRM=function(){var t=this.columnModel.getSecondaryColumns();if(t){var e=this.extractPivotKeySeparator(t);t.forEach((function(t){if(""===e)t.getColDef().pivotKeys=[];else{var i=t.getColId().split(e);t.getColDef().pivotKeys=i.slice(0,i.length-1)}}))}},e.prototype.extractPivotKeySeparator=function(t){if(0===t.length)return"";var e=function(t,i){var o=t.getGroupId();return t.getParent()?e(t.getParent(),o):i.split(o)[1][0]},i=t[0];return null==i.getParent()?"":e(i.getParent(),i.getColId())},e.getGroupLabels=function(t,e){for(var i=[e];t&&0!==t.level;)(t=t.parent)&&i.push(t.key);return i},e.prototype.getFilteredRowNodes=function(){var t={};return this.gridRowModel.forEachNodeAfterFilterAndSort((function(e){t[e.id]=e})),t},e.prototype.getAllRowNodes=function(){var t=[];return this.gridRowModel.forEachNode((function(e){t.push(e)})),this.sortRowNodes(t)},e.prototype.sortRowNodes=function(t){var e=this.sortController.getSortOptions();return!e||0==e.length?t:this.rowNodeSorter.doFullSort(t,e)},sx([(0,o.dsm)("rowModel")],e.prototype,"gridRowModel",void 0),sx([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),sx([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),sx([(0,o.dsm)("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),sx([(0,o.dsm)("sortController")],e.prototype,"sortController",void 0),sx([(0,o.Xx1)("aggregationStage")],e.prototype,"aggregationStage",void 0),e}(o.XQb),lx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),cx=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},dx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return lx(e,t),e.prototype.getColumn=function(t){return this.columnModel.getPrimaryColumn(t)},e.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},e.prototype.getColDisplayName=function(t){return this.columnModel.getDisplayNameForColumn(t,"chart")},e.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},e.prototype.getGroupDisplayColumns=function(){return this.columnModel.getGroupDisplayColumns()},e.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},e.prototype.isPivotActive=function(){return this.columnModel.isPivotActive()},e.prototype.getChartColumns=function(){var t=this,e=this.columnModel.getAllDisplayedColumns(),i=new Set,o=new Set;return e.forEach((function(e){var n=e.getColDef(),r=n.chartDataType;if(r)switch(r){case"category":case"time":return void i.add(e);case"series":return void o.add(e);case"excluded":return;default:console.warn("AG Grid: unexpected chartDataType value '".concat(r,"' supplied, instead use 'category', 'series' or 'excluded'"))}"ag-Grid-AutoColumn"!==n.colId?e.isPrimary()?(t.isNumberCol(e)?o:i).add(e):o.add(e):i.add(e)})),{dimensionCols:i,valueCols:o}},e.prototype.isNumberCol=function(t){if("ag-Grid-AutoColumn"===t.getColId())return!1;var e=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!e)return!1;var i=this.valueService.getValue(t,e);return null==i&&(i=this.extractLeafData(e,t)),null!=i&&"function"===typeof i.toNumber&&(i=i.toNumber()),"number"===typeof i},e.prototype.extractLeafData=function(t,e){if(!t.allLeafChildren)return null;for(var i=0;i<t.allLeafChildren.length;i++){var o=t.allLeafChildren[i],n=this.valueService.getValue(e,o);if(null!=n)return n}return null},cx([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),cx([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),cx([(0,o.dsm)("rowRenderer")],e.prototype,"rowRenderer",void 0),e=cx([(0,o.dR4)("chartColumnService")],e)}(o.XQb),ux=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),hx=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},px=function(t){function e(e){var i,o=this;return(o=t.call(this)||this).suppressComboChartWarnings=!1,o.chartDataModel=e,o.seriesChartTypes=null!==(i=e.params.seriesChartTypes)&&void 0!==i?i:[],o}return ux(e,t),e.prototype.init=function(){this.initComboCharts()},e.prototype.update=function(t){this.seriesChartTypes=null!==t&&void 0!==t?t:this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()},e.prototype.initComboCharts=function(){var t=this.seriesChartTypes&&this.seriesChartTypes.length>0;("customCombo"===this.chartDataModel.chartType||t)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])},e.prototype.updateSeriesChartTypes=function(){this.chartDataModel.isComboChart()&&(this.seriesChartTypes=this.seriesChartTypes.map((function(t){var e=["groupedColumn","stackedColumn","stackedArea"].includes(t.chartType);return t.secondaryAxis=!e&&t.secondaryAxis,t})),"customCombo"!==this.chartDataModel.chartType?this.updateChartSeriesTypesForBuiltInCombos():this.updateSeriesChartTypesForCustomCombo())},e.prototype.updateSeriesChartTypesForCustomCombo=function(){var t=this;this.seriesChartTypes&&this.seriesChartTypes.length>0||this.suppressComboChartWarnings||console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map((function(t){return e.SUPPORTED_COMBO_CHART_TYPES.includes(t.chartType)||(console.warn("AG Grid: invalid chartType '".concat(t.chartType,"' supplied in 'seriesChartTypes', converting to 'line' instead.")),t.chartType="line"),t}));var i=this.chartDataModel.valueColState.map((function(e){t.savedCustomSeriesChartTypes&&0!==t.savedCustomSeriesChartTypes.length||(t.savedCustomSeriesChartTypes=t.seriesChartTypes);var i=t.savedCustomSeriesChartTypes.find((function(t){return t.colId===e.colId}));return i||(e.selected&&!t.suppressComboChartWarnings&&console.warn("AG Grid: no 'seriesChartType' found for colId = '".concat(e.colId,"', defaulting to 'line'.")),{colId:e.colId,chartType:"line",secondaryAxis:!1})}));this.seriesChartTypes=i,this.savedCustomSeriesChartTypes=i,this.suppressComboChartWarnings=!0},e.prototype.updateChartSeriesTypesForBuiltInCombos=function(){var t=this.chartDataModel,e=t.chartType,i=t.valueColState,o="columnLineCombo"===e?"groupedColumn":"stackedArea",n="columnLineCombo"===e?"line":"groupedColumn",r=i.filter((function(t){return t.selected})),s=Math.ceil(r.length/2);this.seriesChartTypes=r.map((function(t,e){var i=e>=s?n:o;return{colId:t.colId,chartType:i,secondaryAxis:!1}}))},e.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],hx([o.o7C],e.prototype,"init",null),e}(o.XQb),fx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),gx=function(){return gx=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},gx.apply(this,arguments)},vx=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},yx=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},mx=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},bx=function(t){function e(e){var i=t.call(this)||this;return i.unlinked=!1,i.chartData=[],i.valueColState=[],i.dimensionColState=[],i.columnNames={},i.crossFiltering=!1,i.grouping=!1,i.params=e,i.chartId=e.chartId,i.chartType=e.chartType,i.pivotChart=e.pivotChart,i.chartThemeName=e.chartThemeName,i.aggFunc=e.aggFunc,i.referenceCellRange=e.cellRange,i.suppliedCellRange=e.cellRange,i.suppressChartRanges=e.suppressChartRanges,i.unlinked=!!e.unlinkChart,i.crossFiltering=!!e.crossFiltering,i}return fx(e,t),e.prototype.init=function(){this.datasource=this.createManagedBean(new ax),this.chartColumnService=this.createManagedBean(new dx),this.comboChartModel=this.createManagedBean(new px(this)),this.updateCellRanges(),this.updateData()},e.prototype.updateModel=function(t){var e=t.cellRange,i=t.chartType,o=t.pivotChart,n=t.chartThemeName,r=t.aggFunc,s=t.suppressChartRanges,a=t.unlinkChart,l=t.crossFiltering,c=t.seriesChartTypes;e!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=i,this.pivotChart=o,this.chartThemeName=n,this.aggFunc=r,this.referenceCellRange=e,this.suppliedCellRange=e,this.suppressChartRanges=s,this.unlinked=!!a,this.crossFiltering=!!l,this.updateSelectedDimension(null===e||void 0===e?void 0:e.columns),this.updateCellRanges(),(this.isComboChart()||c)&&this.comboChartModel.update(c),this.unlinked||this.updateData()},e.prototype.updateCellRanges=function(t){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);var e=this.chartColumnService.getChartColumns(),i=e.dimensionCols,o=e.valueCols,n=this.getAllColumnsFromRanges();t&&this.updateColumnState(t),this.setDimensionCellRange(i,n,t),this.setValueCellRange(o,n,t),t||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()},e.prototype.updateData=function(){var t=this.getRowIndexes(),e=t.startRow,i=t.endRow;this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();var n={aggFunc:this.aggFunc,dimensionCols:[this.getSelectedDimension()],grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:i,isScatter:o._.includes(["scatter","bubble"],this.chartType)},r=this.datasource.getData(n),s=r.chartData,a=r.columnNames;this.chartData=s,this.columnNames=a},e.prototype.isGrouping=function(){var t=this.gridOptionsService.get("treeData"),e=t?null:this.chartColumnService.getRowGroupColumns(),i=t||e&&e.length>0,o=this.getSelectedDimension().colId,n=this.chartColumnService.getGroupDisplayColumns().map((function(t){return t.getColId()})).some((function(t){return t===o}));return!!i&&n},e.prototype.getSelectedValueCols=function(){return this.valueColState.filter((function(t){return t.selected})).map((function(t){return t.column}))},e.prototype.getSelectedDimension=function(){return this.dimensionColState.filter((function(t){return t.selected}))[0]},e.prototype.getColDisplayName=function(t){return this.chartColumnService.getColDisplayName(t)},e.prototype.isPivotMode=function(){return this.chartColumnService.isPivotMode()},e.prototype.getChartDataType=function(t){var e=this.chartColumnService.getColumn(t);return e?e.getColDef().chartDataType:void 0},e.prototype.isPivotActive=function(){return this.chartColumnService.isPivotActive()},e.prototype.createCellRange=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:e,startColumn:t===o.OnL.DIMENSION?e[0]:this.referenceCellRange.startColumn,type:t}},e.prototype.getAllColumnsFromRanges=function(){if(this.pivotChart)return o._.convertToSet(this.chartColumnService.getAllDisplayedColumns());var t=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&t.push.apply(t,mx([],yx(this.dimensionCellRange.columns),!1)),this.valueCellRange&&t.push.apply(t,mx([],yx(this.valueCellRange.columns),!1)),o._.convertToSet(t)},e.prototype.getRowIndexes=function(){var t=0,e=0,i=this.rangeService,o=this.valueCellRange;if(i&&o){t=i.getRangeStartRow(o).rowIndex;var n=i.getRangeEndRow(o);e="bottom"===n.rowPinned?-1:n.rowIndex}return{startRow:t,endRow:e}},e.prototype.resetColumnState=function(){var t=this,i=this.chartColumnService.getChartColumns(),n=i.dimensionCols,r=i.valueCols,s=this.getAllColumnsFromRanges(),a=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];var l=!1,c=1,d=this.suppliedCellRange.columns[0];n.forEach((function(e){var i="ag-Grid-AutoColumn"===e.getColId(),o=!1;t.crossFiltering&&t.aggFunc?d.getColId()===e.getColId()&&(o=!0):o=!!i||!l&&s.has(e),t.dimensionColState.push({column:e,colId:e.getColId(),displayName:t.getColDisplayName(e),selected:o,order:c++}),o&&(l=!0)}));var u={colId:e.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!l,order:0};this.dimensionColState.unshift(u);var h=this.referenceCellRange.columns.filter((function(t){return r.has(t)}));r.forEach((function(e){a&&o._.includes(t.referenceCellRange.columns,e)&&(e=h.shift()),t.valueColState.push({column:e,colId:e.getColId(),displayName:t.getColDisplayName(e),selected:s.has(e),order:c++})}))},e.prototype.updateColumnState=function(t){var e=function(e){return e.colId===t.colId},i=this.dimensionColState,o=this.valueColState;i.filter(e).length>0?i.forEach((function(t){return t.selected=e(t)})):o.filter(e).forEach((function(e){return e.selected=t.selected}));var n=mx(mx([],yx(i),!1),yx(o),!1),r=[];n.forEach((function(e,i){i===t.order&&r.push(t.colId),e.colId!==t.colId&&r.push(e.colId)})),n.forEach((function(t){var e=r.indexOf(t.colId);t.order=e>=0?r.indexOf(t.colId):n.length-1})),this.reorderColState()},e.prototype.reorderColState=function(){var t=function(t,e){return t.order-e.order};this.dimensionColState.sort(t),this.valueColState.sort(t)},e.prototype.setDimensionCellRange=function(t,i,n){var r=this;if(this.dimensionCellRange=void 0,n||this.dimensionColState.length){var s=n;if(this.crossFiltering&&this.aggFunc){var a=this.suppliedCellRange.columns[0];s=this.dimensionColState.filter((function(t){return t.colId===a.getColId()}))[0]}else s&&t.has(s.column)||(s=this.dimensionColState.filter((function(t){return t.selected}))[0]);s&&s.colId!==e.DEFAULT_CATEGORY&&(this.dimensionCellRange=this.createCellRange(o.OnL.DIMENSION,s.column))}else t.forEach((function(t){!r.dimensionCellRange&&i.has(t)&&(r.dimensionCellRange=r.createCellRange(o.OnL.DIMENSION,t))}))},e.prototype.setValueCellRange=function(t,e,i){this.valueCellRange=void 0;var n=[];if(t.forEach((function(t){i&&i.colId===t.getColId()?i.selected&&n.push(i.column):e.has(t)&&n.push(t)})),n.length>0){var r=[];this.valueColState.length>0?r=this.valueColState.map((function(t){return t.colId})):e.forEach((function(t){return r.push(t.getColId())})),n.sort((function(t,e){return r.indexOf(t.getColId())-r.indexOf(e.getColId())})),this.valueCellRange=this.createCellRange.apply(this,mx([o.OnL.VALUE],yx(n),!1))}},e.prototype.updateSelectedDimension=function(t){var e=new Set(t.map((function(t){return t.getColId()}))),i=this.dimensionColState.find((function(t){return e.has(t.colId)}))||this.dimensionColState[0];this.dimensionColState=this.dimensionColState.map((function(t){return gx(gx({},t),{selected:t.colId===i.colId})}))},e.prototype.syncDimensionCellRange=function(){var t=this.getSelectedDimension();t&&t.column&&(this.dimensionCellRange=this.createCellRange(o.OnL.DIMENSION,t.column))},e.prototype.isComboChart=function(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)},e.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",vx([(0,o.dsm)("rangeService")],e.prototype,"rangeService",void 0),vx([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),vx([o.o7C],e.prototype,"init",null),e}(o.XQb);function Sx(t){return null!=t.chart?t.chart:t}var xx=function(){return xx=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},xx.apply(this,arguments)},Cx=function(){function t(t){this.chartProxyParams=t,this.clearThemeOverrides=!1,this.chart=t.chartInstance,this.chartType=t.chartType,this.crossFiltering=t.crossFiltering,this.crossFilterCallback=t.crossFilterCallback,this.standaloneChartType=Sm(this.chartType),null==this.chart?this.chart=rm.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}return t.prototype.getChart=function(){return Sx(this.chart)},t.prototype.getChartRef=function(){return this.chart},t.prototype.downloadChart=function(t,e,i){var o=this.chart,n=Sx(o),r=e||(n.title?n.title.text:"chart"),s=t||{},a=s.width,l=s.height;rm.download(o,{width:a,height:l,fileName:r,fileFormat:i})},t.prototype.getChartImageDataURL=function(t){return this.getChart().scene.getDataURL(t)},t.prototype.getChartOptions=function(){return this.chart.getOptions()},t.prototype.getChartThemeOverrides=function(){var t;return null!==(t=this.getChartOptions().theme.overrides)&&void 0!==t?t:{}},t.prototype.getChartPalette=function(){return fm.getChartTheme(this.getChartOptions().theme).palette},t.prototype.setPaired=function(t){var e,i=Sm(this.chartProxyParams.chartType);rm.updateDelta(this.chart,{theme:{overrides:(e={},e[i]={paired:t},e)}})},t.prototype.isPaired=function(){var t=Sm(this.chartProxyParams.chartType);return o._.get(this.getChartThemeOverrides(),"".concat(t,".paired"),!0)},t.prototype.lookupCustomChartTheme=function(t){return Am(this.chartProxyParams,t)},t.prototype.transformData=function(t,e,i){return i?t.map((function(t,i){var o=t[e],n=o&&o.toString?o.toString():"",r=xx({},t);return r[e]={id:i,value:o,toString:function(){return n}},r})):t},t.prototype.getCommonChartOptions=function(t){var e,i,o=this.clearThemeOverrides?{}:null!==(i=null===(e=this.chart)||void 0===e?void 0:e.getOptions())&&void 0!==i?i:{},n=null!=this.chart?{overrides:this.getActiveFormattingPanelOverrides()}:{};return this.clearThemeOverrides=!1,xx(xx({},o),{theme:xx(xx({},wm(this.chartProxyParams,this)),t?{overrides:t}:n),container:this.chartProxyParams.parentElement,mode:"integrated"})},t.prototype.getActiveFormattingPanelOverrides=function(){var t,e;if(this.clearThemeOverrides)return{};var i=null===(t=this.chart)||void 0===t?void 0:t.getOptions().theme;return null!==(e=null===i||void 0===i?void 0:i.overrides)&&void 0!==e?e:{}},t.prototype.destroy=function(t){var e=(void 0===t?{}:t).keepChartInstance;if(void 0!==e&&e)return this.chart;this.destroyChart()},t.prototype.destroyChart=function(){this.chart&&(this.chart.destroy(),this.chart=void 0)},t}(),wx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ex=function(){return Ex=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Ex.apply(this,arguments)},Ox=function(t){function e(e){var i=t.call(this,e)||this;return i.crossFilteringAllPoints=new Set,i.crossFilteringSelectedPoints=[],i}return wx(e,t),e.prototype.update=function(t){var e=this.getAxes(t),i=Ex(Ex({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.getData(t,e),axes:e,series:this.getSeries(t)});rm.update(this.getChartRef(),i)},e.prototype.getData=function(t,e){var i,o=["area","line"].includes(this.standaloneChartType),n="category"===(null===(i=e.filter((function(t){return"bottom"===t.position}))[0])||void 0===i?void 0:i.type);return this.crossFiltering&&o?this.getCrossFilterData(t):this.getDataTransformedData(t,n)},e.prototype.getDataTransformedData=function(t,e){return this.transformData(t.data,t.category.id,e)},e.prototype.getXAxisType=function(t){return t.grouping?"grouped-category":e.isTimeAxis(t)?"time":"category"},e.isTimeAxis=function(t){if(t.category&&t.category.chartDataType)return"time"===t.category.chartDataType;var e=t.data[0];return(e&&e[t.category.id])instanceof Date},e.prototype.crossFilteringReset=function(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()},e.prototype.crossFilteringPointSelected=function(t){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(t)},e.prototype.crossFilteringDeselectedPoints=function(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length},e.prototype.extractLineAreaCrossFilterSeries=function(t,e){var i=this;return t.map((function(t){var o;return t.yKey=(o=t.yKey,"area"===i.standaloneChartType?e.getCrossFilteringContext().lastSelectedChartId===e.chartId?o+"-total":o:o+"-total"),t.listeners={nodeClick:function(e){var o=e.datum[t.xKey],n=e.event.metaKey||e.event.ctrlKey;i.crossFilteringAddSelectedPoint(n,o),i.crossFilterCallback(e)}},t.marker={formatter:function(t){var o=t.datum[e.category.id];return{fill:t.highlighted?"yellow":t.fill,size:t.highlighted?14:i.crossFilteringPointSelected(o)?8:0}}},"area"===i.standaloneChartType&&(t.fillOpacity=i.crossFilteringDeselectedPoints()?.3:1),"line"===i.standaloneChartType&&(t.strokeOpacity=i.crossFilteringDeselectedPoints()?.3:1),t}))},e.prototype.getCrossFilterData=function(t){var e=this;this.crossFilteringAllPoints.clear();var i=t.fields[0].colId,o="".concat(i,"-filtered-out"),n=t.getCrossFilteringContext().lastSelectedChartId;return t.data.map((function(r){var s=r[t.category.id];e.crossFilteringAllPoints.add(s);var a=e.crossFilteringPointSelected(s);return"area"===e.standaloneChartType&&n===t.chartId&&(r["".concat(i,"-total")]=a?r[i]:r[i]+r[o]),"line"===e.standaloneChartType&&(r["".concat(i,"-total")]=a?r[i]:r[i]+r[o]),r}))},e.prototype.crossFilteringAddSelectedPoint=function(t,e){t?this.crossFilteringSelectedPoints.push(e):this.crossFilteringSelectedPoints=[e]},e}(Cx);function Dx(t,e){return!1!==e.clone&&e.isMergeableObject(t)?Px(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function Ax(t,e,i){return t.concat(e).map((function(t){return Dx(t,i)}))}function Tx(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function Mx(t,e){try{return e in t}catch(i){return!1}}function kx(t,e,i){void 0===t&&(t={}),void 0===e&&(e={});var o={};return i.isMergeableObject(t)&&Tx(t).forEach((function(e){o[e]=Dx(t[e],i)})),Tx(e).forEach((function(n){(function(t,e){return Mx(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,n)||(Mx(t,n)&&i.isMergeableObject(e[n])?o[n]=function(t,e){if(!e.customMerge)return Px;var i=e.customMerge(t);return"function"===typeof i?i:Px}(n,i)(t[n],e[n],i):o[n]=Dx(e[n],i))})),o}function Rx(t){return function(t){return!!t&&"object"===typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e}(t)}function Px(t,e,i){(i=i||{}).arrayMerge=i.arrayMerge||Ax,i.isMergeableObject=i.isMergeableObject||Rx,i.cloneUnlessOtherwiseSpecified=Dx;var o=Array.isArray(e);return o===Array.isArray(t)?o?i.arrayMerge(t,e,i):kx(t,e,i):Dx(e,i)}function Nx(t,e){var i=parseInt(t.slice(1,3),16),o=parseInt(t.slice(3,5),16),n=parseInt(t.slice(5,7),16);return e?"rgba(".concat(i,", ").concat(o,", ").concat(n,", ").concat(e,")"):"rgba(".concat(i,", ").concat(o,", ").concat(n,")")}function Lx(t,e){return t.map((function(t){var i=eh.Color.fromString(t);return new eh.Color(i.r,i.g,i.b,e).toHexString()}))}var _x=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Ix=function(){return Ix=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Ix.apply(this,arguments)},Fx=function(t){function e(e){return t.call(this,e)||this}return _x(e,t),e.prototype.getAxes=function(t){var e=[{type:this.getXAxisType(t),position:ym(this.chartType)?"left":"bottom"},{type:"number",position:ym(this.chartType)?"bottom":"left"}];if(this.isNormalised()){var i=e[1];i.label=Ix(Ix({},i.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return e},e.prototype.getSeries=function(t){var e=this,i=t.fields.map((function(i){return{type:e.standaloneChartType,direction:ym(e.chartType)?"horizontal":"vertical",stacked:e.crossFiltering||bm(e.chartType),normalizedTo:e.isNormalised()?100:void 0,xKey:t.category.id,xName:t.category.name,yKey:i.colId,yName:i.displayName}}));return this.crossFiltering?this.extractCrossFilterSeries(i):i},e.prototype.extractCrossFilterSeries=function(t){for(var e=this,i=this.getChartPalette(),o=function(t,o){return Ix(Ix({},t),{highlightStyle:{item:{fill:void 0}},fill:null===i||void 0===i?void 0:i.fills[o],stroke:null===i||void 0===i?void 0:i.strokes[o],listeners:{nodeClick:e.crossFilterCallback}})},n=function(t){var e=t.yKey+"-filtered-out";return Ix(Ix({},Px({},t)),{yKey:e,fill:Nx(t.fill,"0.3"),stroke:Nx(t.stroke,"0.3"),showInLegend:!1})},r=[],s=0;s<t.length;s++){var a=o(t[s],s);r.push(a),r.push(n(a))}return r},e.prototype.isNormalised=function(){return!this.crossFiltering&&o._.includes(["normalizedColumn","normalizedBar"],this.chartType)},e}(Ox),Gx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Bx=function(){return Bx=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Bx.apply(this,arguments)},Vx=function(t){function e(e){return t.call(this,e)||this}return Gx(e,t),e.prototype.getAxes=function(t){var e=[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){var i=e[1];i.label=Bx(Bx({},i.label),{formatter:function(t){return Math.round(t.value)+"%"}})}return e},e.prototype.getSeries=function(t){var e=this,i=t.fields.map((function(i){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:i.colId,yName:i.displayName,normalizedTo:"normalizedArea"===e.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(e.chartType)}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,t):i},e.prototype.isNormalised=function(){return!this.crossFiltering&&"normalizedArea"===this.chartType},e}(Ox),jx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Wx=function(t){function e(e){return t.call(this,e)||this}return jx(e,t),e.prototype.getAxes=function(t){return[{type:this.getXAxisType(t),position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this,i=t.fields.map((function(i){return{type:e.standaloneChartType,xKey:t.category.id,xName:t.category.name,yKey:i.colId,yName:i.displayName}}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,t):i},e}(Ox),zx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Hx=function(){return Hx=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Hx.apply(this,arguments)},Ux=function(t){function e(e){return t.call(this,e)||this}return zx(e,t),e.prototype.update=function(t){var e=t.data,i=t.category,o=Hx(Hx({},this.getCommonChartOptions(t.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(t):this.transformData(e,i.id),series:this.getSeries(t)});rm.update(this.getChartRef(),o)},e.prototype.getSeries=function(t){var i=this,o=t.fields.length,n={currentOffset:0,offsetAmount:o>1?20:40},r=this.getFields(t).map((function(r){var s,a={type:i.standaloneChartType,angleKey:r.colId,angleName:r.displayName,sectorLabelKey:r.colId,legendItemKey:t.category.id,calloutLabelName:t.category.name,calloutLabelKey:t.category.id};if("doughnut"===i.chartType){var l=e.calculateOffsets(n),c=l.outerRadiusOffset,d=l.innerRadiusOffset,u=r.displayName?{title:{text:r.displayName,showInLegend:o>1}}:void 0;return Hx(Hx(Hx(Hx({},a),{outerRadiusOffset:c,innerRadiusOffset:d}),u),{calloutLine:{colors:null===(s=i.getChartPalette())||void 0===s?void 0:s.strokes}})}return a}));return this.crossFiltering?this.extractCrossFilterSeries(r):r},e.prototype.getCrossFilterData=function(t){var e=t.fields[0].colId,i="".concat(e,"-filtered-out");return t.data.map((function(t){var o=t[e]+t[i];return t["".concat(e,"-total")]=o,t[i]=1,t[e]=t[e]/o,t}))},e.prototype.extractCrossFilterSeries=function(t){var e,i=this,o=this.getChartPalette(),n=t[0],r=n.angleKey,s=Hx(Hx({},e=n),{calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:e.angleKey,angleKey:e.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:i.crossFilterCallback}});return[function(t,e){var i,n;return Hx(Hx({},Px({},s)),{radiusKey:e+"-filtered-out",fills:Lx(null!==(i=t.fills)&&void 0!==i?i:o.fills,.3),strokes:Lx(null!==(n=t.strokes)&&void 0!==n?n:o.strokes,.3),showInLegend:!1})}(n,r),s]},e.calculateOffsets=function(t){var e=t.currentOffset;t.currentOffset-=t.offsetAmount;var i=t.currentOffset;return t.currentOffset-=t.offsetAmount,{outerRadiusOffset:e,innerRadiusOffset:i}},e.prototype.getFields=function(t){return"pie"===this.chartType?t.fields.slice(0,1):t.fields},e.prototype.crossFilteringReset=function(){},e}(Cx),Kx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Yx=function(){return Yx=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Yx.apply(this,arguments)},Xx=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$x=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},qx=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Zx=function(t){function e(e){return t.call(this,e)||this}return Kx(e,t),e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e.prototype.getSeries=function(t){var e=this.isPaired(),i=this.getSeriesDefinitions(t.fields,e),o=t.category.id===bx.DEFAULT_CATEGORY?void 0:t.category,n=i.map((function(t){var e,i,n,r,s;return(null===t||void 0===t?void 0:t.sizeField)?{type:"bubble",xKey:t.xField.colId,xName:null!==(e=t.xField.displayName)&&void 0!==e?e:void 0,yKey:t.yField.colId,yName:null!==(i=t.yField.displayName)&&void 0!==i?i:void 0,title:"".concat(t.yField.displayName," vs ").concat(t.xField.displayName),sizeKey:t.sizeField.colId,sizeName:null!==(n=t.sizeField.displayName)&&void 0!==n?n:"",labelKey:o?o.id:t.yField.colId,labelName:o?o.name:void 0}:{type:"scatter",xKey:t.xField.colId,xName:null!==(r=t.xField.displayName)&&void 0!==r?r:void 0,yKey:t.yField.colId,yName:null!==(s=t.yField.displayName)&&void 0!==s?s:void 0,title:"".concat(t.yField.displayName," vs ").concat(t.xField.displayName),labelKey:o?o.id:t.yField.colId,labelName:o?o.name:void 0}}));return this.crossFiltering?this.extractCrossFilterSeries(n,t):n},e.prototype.extractCrossFilterSeries=function(t,e){var i=this,o=e.data,n=this.getChartPalette(),r=function(t){return"".concat(t,"-filtered-out")},s=t.map((function(t,e){var s=null===n||void 0===n?void 0:n.fills[e],a=null===n||void 0===n?void 0:n.strokes[e],l=void 0;if("bubble"===t.type){var c=t.sizeKey;l=function(t,e){var i,o,n,s=[1/0,-1/0];if(null!=e)try{for(var a=Xx(t),l=a.next();!l.done;l=a.next()){var c=l.value,d=null!==(n=c[e])&&void 0!==n?n:c[r(e)];d<s[0]&&(s[0]=d),d>s[1]&&(s[1]=d)}}catch(u){i={error:u}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}if(s[0]<=s[1])return s}(o,c)}var d=Yx(Yx({},t.marker),{fill:s,stroke:a,domain:l});return Yx(Yx({},t),{marker:d,highlightStyle:{item:{fill:"yellow"}},listeners:Yx(Yx({},t.listeners),{nodeClick:i.crossFilterCallback})})}));return qx(qx([],$x(s),!1),$x(s.map((function(t){var e=t.yKey,o=t.xKey,n={};return"bubble"===t.type&&(n={sizeKey:r(t.sizeKey)}),Yx(Yx(Yx({},t),n),{yKey:r(e),xKey:r(o),marker:Yx(Yx({},t.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:Yx(Yx({},t.listeners),{nodeClick:function(t){var e,n=t.datum[r(o)],s=Yx(Yx({},t),{xKey:o,datum:Yx(Yx({},t.datum),(e={},e[o]=n,e))});i.crossFilterCallback(s)}})})}))),!1)},e.prototype.getSeriesDefinitions=function(t,e){if(t.length<2)return[];var i="bubble"===this.chartType;if(e)return i?t.map((function(e,i){return i%3===0?{xField:e,yField:t[i+1],sizeField:t[i+2]}:null})).filter((function(t){return t&&t.yField&&t.sizeField})):t.map((function(e,i){return i%2===0?{xField:e,yField:t[i+1]}:null})).filter((function(t){return t&&t.yField}));var o=t[0];return i?t.map((function(e,i){return i%2===1?{xField:o,yField:e,sizeField:t[i+1]}:null})).filter((function(t){return t&&t.sizeField})):t.filter((function(t,e){return e>0})).map((function(t){return{xField:o,yField:t}}))},e}(Ox),Jx=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Qx=function(t){function e(e){return t.call(this,e)||this}return Jx(e,t),e.prototype.getSeries=function(t){var e=t.fields[0];return[{type:this.standaloneChartType,xKey:e.colId,xName:e.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]},e.prototype.getAxes=function(t){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]},e}(Ox),tC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),eC=function(t){function e(e){var i=t.call(this)||this;return i.chartController=e,i}return tC(e,t),e.prototype.getChartOption=function(t){return o._.get(this.getChart(),t,void 0)},e.prototype.setChartOption=function(t,e,i){var o=this,n=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&n.push("cartesian");var r={};n.forEach((function(i){r=Px(r,o.createChartOptions({seriesType:i,expression:t,value:e}))})),this.updateChart(r),i||this.raiseChartOptionsChangedEvent()},e.prototype.awaitChartOptionUpdate=function(t){this.chartController.getChartProxy().getChart().waitForUpdate().then((function(){return t()})).catch((function(t){return console.error("AG Grid - chart update failed",t)}))},e.prototype.getAxisProperty=function(t){var e;return o._.get(null===(e=this.getChart().axes)||void 0===e?void 0:e[0],t,void 0)},e.prototype.setAxisProperty=function(t,e){var i,o=this,n=this.getChart(),r={};null===(i=n.axes)||void 0===i||i.forEach((function(i){r=Px(r,o.getUpdateAxisOptions(i,t,e))})),this.updateChart(r),this.raiseChartOptionsChangedEvent()},e.prototype.getLabelRotation=function(t){var e=this.getAxis(t);return o._.get(e,"label.rotation",void 0)},e.prototype.setLabelRotation=function(t,e){var i=this.getAxis(t);if(i){var o=this.getUpdateAxisOptions(i,"label.rotation",e);this.updateChart(o),this.raiseChartOptionsChangedEvent()}},e.prototype.getSeriesOption=function(t,i){var n=this.getChart().series.find((function(t){return e.isMatchingSeries(i,t)}));return o._.get(n,t,void 0)},e.prototype.setSeriesOption=function(t,e,i){var o=this.createChartOptions({seriesType:i,expression:"series.".concat(t),value:e});this.updateChart(o),this.raiseChartOptionsChangedEvent()},e.prototype.getPairedMode=function(){return this.chartController.getChartProxy().isPaired()},e.prototype.setPairedMode=function(t){this.chartController.getChartProxy().setPaired(t)},e.prototype.getAxis=function(t){var e=this.getChart();if(e.axes&&!(e.axes.length<1))return"xAxis"===t?e.axes&&"x"===e.axes[0].direction?e.axes[0]:e.axes[1]:e.axes&&"y"===e.axes[1].direction?e.axes[1]:e.axes[0]},e.prototype.getUpdateAxisOptions=function(t,e,i){var o=Sm(this.getChartType());return["number","category","time","grouped-category"].includes(t.type)?this.createChartOptions({seriesType:o,expression:"axes.".concat(t.type,".").concat(e),value:i}):{}},e.prototype.getChartType=function(){return this.chartController.getChartType()},e.prototype.getChart=function(){return this.chartController.getChartProxy().getChart()},e.prototype.updateChart=function(t){var e=this.chartController.getChartProxy().getChartRef();rm.updateDelta(e,t)},e.prototype.createChartOptions=function(t){var e=t.seriesType,i=t.expression,n=t.value,r={},s={theme:{overrides:r}};return o._.set(r,"".concat(e,".").concat(i),n),s},e.prototype.raiseChartOptionsChangedEvent=function(){var t=this.chartController.getChartModel(),e={type:o.sVA.EVENT_CHART_OPTIONS_CHANGED,chartId:t.chartId,chartType:t.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:t.chartOptions};this.eventService.dispatchEvent(e)},e.isMatchingSeries=function(t,e){return gm.includes(t)&&e.type===t},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e}(o.XQb),iC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),oC=function(){return oC=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},oC.apply(this,arguments)},nC=function(t){function e(e){return t.call(this,e)||this}return iC(e,t),e.prototype.getAxes=function(t){var e=t?t.fields:[],i=new Map(e.map((function(t){return[t.colId,t]}))),o=this.getYKeys(e,t.seriesChartTypes),n=o.primaryYKeys,r=o.secondaryYKeys,s=[{type:this.getXAxisType(t),position:"bottom"}];return n.length>0&&s.push({type:"number",keys:n,position:"left"}),r.length>0&&r.forEach((function(t){var e=i.get(t);if(e&&e.colId===t){var o={type:"number",keys:[t],position:"right"};s.push(o)}})),s},e.prototype.getSeries=function(t){var e=t.fields,i=t.category,o=t.seriesChartTypes;return e.map((function(t){var e=o.find((function(e){return e.colId===t.colId}));if(e){var n=e.chartType,r=["groupedColumn","groupedBar"].includes(n)?{grouped:!0}:{};return oC({type:Sm(n),xKey:i.id,yKey:t.colId,yName:t.displayName,stacked:["stackedArea","stackedColumn"].includes(n)},r)}}))},e.prototype.getYKeys=function(t,e){var i=[],o=[];return t.forEach((function(t){var n=t.colId,r=e.find((function(t){return t.colId===n}));r&&(r.secondaryAxis?o.push(n):i.push(n))})),{primaryYKeys:i,secondaryYKeys:o}},e}(Ox),rC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),sC=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},aC=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},lC=function(t){function e(i){var o=t.call(this,e.TEMPLATE)||this;return o.params=i,o}return rC(e,t),e.prototype.init=function(){var t=this,e={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:this.params.chartType,chartThemeName:this.getThemeName(),aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},i=this.gridOptionsService.get("enableRtl");this.addCssClass(i?"ag-rtl":"ag-ltr");var o=this.createBean(new bx(e));this.chartController=this.createManagedBean(new jm(o)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,jm.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,QS.EVENT_DOWNLOAD_CHART,(function(){return t.downloadChart()})),this.update(),this.raiseChartCreatedEvent()},e.prototype.createChart=function(){var t=this,i=void 0;this.chartProxy&&(i=this.chartProxy.destroy({keepChartInstance:!0}));var o=this.chartController.getChartType(),n={chartType:o,chartInstance:i,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:function(){return t.getGridOptionsChartThemeOverrides()},getExtraPaddingDirections:function(){var e,i;return null!==(i=null===(e=t.chartMenu)||void 0===e?void 0:e.getExtraPaddingDirections())&&void 0!==i?i:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:function(e,i){t.params.crossFilteringContext.lastSelectedChartId=i?"":t.chartController.getChartId(),i&&t.params.crossFilteringResetCallback(),t.crossFilterService.filter(e,i)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:function(e,i){return t.chartTranslationService.translate(e,i)}};if(this.params.chartOptionsToRestore=void 0,this.chartType=o,this.chartProxy=e.createChartProxy(n),this.chartProxy){var r=this.eChart.querySelector("canvas");r&&r.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new eC(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}else console.warn("AG Grid: invalid chart type supplied: ",n.chartType)},e.prototype.getChartThemeName=function(){return this.chartController.getChartThemeName()},e.prototype.getChartThemes=function(){return this.chartController.getThemes()},e.prototype.getGridOptionsChartThemeOverrides=function(){return this.gridOptionsService.get("chartThemeOverrides")},e.createChartProxy=function(t){switch(t.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new Fx(t);case"pie":case"doughnut":return new Ux(t);case"area":case"stackedArea":case"normalizedArea":return new Vx(t);case"line":return new Wx(t);case"scatter":case"bubble":return new Zx(t);case"histogram":return new Qx(t);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new nC(t);default:throw"AG Grid: Unable to create chart as an invalid chartType = '".concat(t.chartType,"' was supplied.")}},e.prototype.addDialog=function(){var t=this,e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),i=this.getBestDialogSize(),n=i.width,r=i.height;this.chartDialog=new o.fNJ({resizable:!0,movable:!0,maximizable:!0,title:e,width:n,height:r,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(o.fNJ.EVENT_DESTROYED,(function(){return t.destroy()}))},e.prototype.getBestDialogSize=function(){var t=this.popupService.getPopupParent(),e=.75*o._.getAbsoluteWidth(t),i=.75*o._.getAbsoluteHeight(t),n=this.chartProxy.getChart(),r=this.params.insideDialog?850:n.width,s=this.params.insideDialog?470:n.height;return(r>e||s>i)&&(r=Math.min(r,e),(s=Math.round(.553*r))>i&&(s=i,r=Math.min(r,Math.round(s/.553)))),{width:r,height:s}},e.prototype.addMenu=function(){this.params.crossFiltering||(this.chartMenu=this.createBean(new QS(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))},e.prototype.addTitleEditComp=function(){this.titleEdit=this.createBean(new nx(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)},e.prototype.update=function(t){var e=this;if((null===t||void 0===t?void 0:t.chartId)&&!this.chartController.update(t))return;this.chartTypeChanged(t)&&this.createChart(),this.updateChart(null===t||void 0===t?void 0:t.chartThemeOverrides),(null===t||void 0===t?void 0:t.chartId)&&this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartApiUpdateEvent()}))},e.prototype.updateChart=function(t){var e=this,i=this.chartProxy,o=this.chartController.getSelectedValueColState().map((function(t){return{colId:t.colId,displayName:t.displayName}})),n=this.chartController.getChartData();if(!this.handleEmptyChart(n,o)){var r=this.chartController.getChartUpdateParams(t);i.update(r),this.chartProxy.getChart().waitForUpdate().then((function(){e.chartController.raiseChartUpdatedEvent()})),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}},e.prototype.chartTypeChanged=function(t){var e=aC([this.chartController.getChartType(),null===t||void 0===t?void 0:t.chartType],2),i=e[0],o=e[1];return this.chartType!==i||!!o&&this.chartType!==o},e.prototype.getChartModel=function(){return this.chartController.getChartModel()},e.prototype.getChartImageDataURL=function(t){return this.chartProxy.getChartImageDataURL(t)},e.prototype.handleEmptyChart=function(t,e){var i=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),n=1;this.chartController.isActiveXYChart()&&(n="bubble"===this.chartController.getChartType()?3:2);var r=e.length<n||0===t.length;if(this.eChart){var s=i||r;o._.setDisplayed(this.eChart,!s),o._.setDisplayed(this.eEmpty,s)}return i?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!r&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)},e.prototype.downloadChart=function(t,e,i){this.chartProxy.downloadChart(t,e,i)},e.prototype.openChartToolPanel=function(t){var e=t?o.CV1[t]:t;this.chartMenu.showMenu(e)},e.prototype.closeChartToolPanel=function(){this.chartMenu.hideMenu()},e.prototype.getChartId=function(){return this.chartController.getChartId()},e.prototype.getUnderlyingChart=function(){return this.chartProxy.getChartRef()},e.prototype.crossFilteringReset=function(){this.chartProxy.crossFilteringReset()},e.prototype.setActiveChartCellRange=function(t){this.getGui().contains(t.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())},e.prototype.getThemeName=function(){var t=this.gridOptionsService.get("chartThemes")||Vm;if(0===t.length)throw new Error("Cannot create chart: no chart themes available.");var e=this.params.chartThemeName;return o._.includes(t,e)?e:t[0]},e.prototype.validateCustomThemes=function(){var t=this.getChartThemes(),e=this.gridOptionsService.get("customChartThemes");e&&o._.getAllKeysInObjects([e]).forEach((function(e){o._.includes(t,e)||console.warn("AG Grid: a custom chart theme with the name '"+e+"' has been supplied but not added to the 'chartThemes' list")}))},e.prototype.reactivePropertyUpdate=function(){this.chartController.setChartThemeName(this.getThemeName(),!0);var t=this.getChartId(),e=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,i=this.gridOptionsService.get("chartThemeOverrides")||{};this.update({type:"".concat(e,"ChartUpdate"),chartId:t,chartThemeOverrides:i})},e.prototype.raiseChartCreatedEvent=function(){var t=this,e={type:o.sVA.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then((function(){t.eventService.dispatchEvent(e)}))},e.prototype.raiseChartDestroyedEvent=function(){var t={type:o.sVA.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(t)},e.prototype.destroy=function(){var e;t.prototype.destroy.call(this),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),null===(e=this.onDestroyColorSchemeChangeListener)||void 0===e||e.call(this);var i=this.getGui();o._.clearElement(i),o._.removeFromParent(i),this.raiseChartDestroyedEvent()},e.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>\n        </div>',sC([(0,o.PIB)("eChart")],e.prototype,"eChart",void 0),sC([(0,o.PIB)("eChartContainer")],e.prototype,"eChartContainer",void 0),sC([(0,o.PIB)("eMenuContainer")],e.prototype,"eMenuContainer",void 0),sC([(0,o.PIB)("eEmpty")],e.prototype,"eEmpty",void 0),sC([(0,o.PIB)("eTitleEditContainer")],e.prototype,"eTitleEditContainer",void 0),sC([(0,o.dsm)("chartCrossFilterService")],e.prototype,"crossFilterService",void 0),sC([(0,o.dsm)("chartTranslationService")],e.prototype,"chartTranslationService",void 0),sC([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),sC([(0,o.dsm)("popupService")],e.prototype,"popupService",void 0),sC([o.o7C],e.prototype,"init",null),e}(o.uAl),cC="31.0.0",dC=function(){return dC=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},dC.apply(this,arguments)},uC=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i},hC=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},pC=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function fC(t){return t.version,null==t.version&&(t.version=function(t){var e,i,o=t;if(null!=t.version)return t.version;var n=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return Object.keys(t||{}).some((function(t){return e.includes(t)}))},r=o.chartOptions,s=n(r,"seriesDefaults")?null===r||void 0===r?void 0:r.seriesDefaults:null===r||void 0===r?void 0:r[Object.keys(r)[0]],a={"27.0.0":n(o,"seriesChartTypes"),"26.2.0":!n(r,"seriesDefaults"),"26.1.0":n(null===s||void 0===s?void 0:s.highlightStyle,"item"),"26.0.0":n(null===s||void 0===s?void 0:s.highlightStyle,"series"),"25.1.0":n(null===s||void 0===s?void 0:s.label,"minAngle"),"25.0.0":n(o,"modelType","aggFunc","unlinkChart","suppressChartRanges")||n(s,"lineDash","lineDashOffset"),"24.0.0":n(o,"chartThemeName","chart")||n(r,"series"),"23.2.0":n(r,"navigator"),"23.0.0":n(null===(i=null===(e=null===r||void 0===r?void 0:r.legend)||void 0===e?void 0:e.item)||void 0===i?void 0:i.marker,"shape"),"22.1.0":n(o,"chartPalette","chartType")},l="27.1.0",c=Object.entries(a).filter((function(t){var e=hC(t,2);return e[0],e[1]})),d=hC(c[0],1)[0];return void 0===d?l:d}(t)),t=TC("23.0.0",t,gC),t=TC("24.0.0",t,vC),t=TC("25.1.0",t,yC),t=TC("26.0.0",t,mC),t=TC("26.1.0",t,bC),t=TC("26.2.0",t,SC),t=TC("28.0.0",t,xC),t=TC("28.2.0",t,CC),t=TC("29.0.0",t,wC),t=TC("29.1.0",t,EC),t=TC("29.2.0",t,OC),t=TC("30.0.0",t,DC),t=function(t){return t=IC("chartOptions.*.width",t),t=IC("chartOptions.*.height",t),t=RC("chartOptions.*.axes.category.label.autoRotate",!0,t),t}(t=TC("31.0.0",t,AC)),t=TC(cC,t,(function(t){return t}))}function gC(t){return t=_C("chartOptions.legend.item.marker.type","shape",t),t=_C("chartOptions.seriesDefaults.marker.type","shape",t),t=_C("chartOptions.legend.padding","spacing",t)}function vC(t){var e,i=t=IC("chartOptions.seriesDefaults.marker.minSize",t),o=i.chartType,n=i.chartPalette,r=i.chartOptions,s=r.xAxis,a=r.yAxis,l=uC(r,["xAxis","yAxis"]),c=uC(i,["chartType","chartPalette","chartOptions"]),d=function(t){switch(t){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}(o),u=null===d||void 0===d?void 0:d.map((function(t,e){return dC({type:t},0===e?s:a)}));return dC({chartType:o,chartThemeName:null!==(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[n])&&void 0!==e?e:"ag-default",chartOptions:dC(dC({},l),{axes:u,xAxis:s,yAxis:a})},c)}function yC(t){return t=_C("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",t)}function mC(t){return t=IC("chart",t=GC("chartOptions.seriesDefaults.highlightStyle",t,(function(t){var e=t.dimOpacity,i=uC(t,["dimOpacity"]);return dC(dC({},i),null!=e?{series:{dimOpacity:e}}:{})}))),t=IC("chartOptions.seriesDefaults.tooltipClass",t),t=kC("chartOptions.axes[].label.rotation",0,t=IC("chartOptions.seriesDefaults.tooltipTracking",t)),t=kC("chartOptions.axes[].label.rotation",335,t)}function bC(t){var e=function(t){var e=t.item,i=t.series,o=uC(t,["item","series"]);return dC({item:dC(dC({},o),e)},i?{series:i}:{})};return t=GC("chartOptions.seriesDefaults.highlightStyle",t,e),t=GC("chartOptions.series[].highlightStyle",t,e)}function SC(t){t=NC("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",t),t=NC("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",t),t=IC("chartOptions.seriesDefaults.fill",t=NC("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",t)),t=IC("chartOptions.seriesDefaults.stroke",t),t=IC("chartOptions.seriesDefaults.callout.colors",t),t=IC("chartOptions.xAxis",t);var e=t=IC("chartOptions.yAxis",t),i=e.chartType,o=e.chartOptions,n=o.axes;o.series;var r=o.seriesDefaults,s=uC(o,["axes","series","seriesDefaults"]),a=uC(e,["chartType","chartOptions"]),l=[Sm(i)],c={};if(!l.includes("pie")){var d={top:{},bottom:{},left:{},right:{}},u=n.map((function(t){var e,i=t.type,o=uC(t,["type"]);return(e={})[i]=dC(dC({},d),o),e})).reduce(BC,{});xm.filter((function(t){return null==u[t]})).forEach((function(t){u[t]=dC({},d)})),c.axes=u}var h=l.map((function(t){var e;return(e={})[t]=dC(dC(dC({},c),{series:r}),s),e})).reduce(BC,{});return t=dC(dC({},a),{chartType:i,chartOptions:h})}function xC(t){return t=IC("chartOptions.*.title.padding",t),t=IC("chartOptions.*.subtitle.padding",t),t=RC("chartOptions.*.axes.*.title.enabled",!1,t=IC("chartOptions.*.axes.*.title.padding",t))}function CC(t){return t=_C("chartOptions.pie.series.callout","calloutLine",t),t=_C("chartOptions.pie.series.label","calloutLabel",t),t=_C("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=_C("chartOptions.pie.series.labelName","sectorLabelName",t)}function wC(t){return t=LC("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",t),t=LC("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",t),t=LC("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",t),t=LC("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",t),t=NC("chartOptions.scatter.series.paired","chartOptions.scatter.paired",t=LC("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",t))}function EC(t){return t=IC("chartOptions.axes[].tick.count",t)}function OC(t){return t=GC("chartOptions.*.tooltip",t,(function(t){var e,i,o,n,r=t.tracking,s=uC(t,["tracking"]),a=dC({},s);return!1===r?(null!==(e=a.position)&&void 0!==e||(a.position={type:"pointer"}),null!==(i=a.range)&&void 0!==i||(a.range="nearest")):!0===r&&(null!==(o=a.position)&&void 0!==o||(a.position={type:"node"}),null!==(n=a.range)&&void 0!==n||(a.range="nearest")),a}))}function DC(t){return t=_C("chartOptions.pie.series.labelKey","sectorLabelKey",t),t=RC("chartOptions.common.legend.position","right",t=PC("chartOptions.common.legend.enabled",!0,t=IC("chartOptions.*.series.flipXY",t=OC(t=EC(t=_C("chartOptions.pie.series.labelName","sectorLabelName",t))))))}function AC(t){var e=_C("chartOptions.column","bar",t),i={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"}[e.chartThemeName]||e.chartThemeName;return dC(dC({},e),{chartThemeName:i})}function TC(t,e,i){if(MC(t)>MC(e.version)){var o=i(e);return o.version=t,o}return e}function MC(t){var e=function(t){var e="string"===typeof t?t.split(".").map((function(t){return Number(t)})):[];if(3!==e.length||e.some((function(t){return isNaN(t)})))throw new Error("AG Grid - Illegal version string: "+t);return{major:e[0],minor:e[1],patch:e[2]}}(t);return 1e4*e.major+100*e.minor+e.patch}function kC(t,e,i){return FC(t,!0,i,(function(t,i){t[i]===e&&delete t[i]}))}function RC(t,e,i){return FC(t,!1,i,(function(t,i){null==t[i]&&(t[i]=e)}))}function PC(t,e,i){var o;"string"===typeof t&&(t=t.split("."));var n=t[0];return t.length>1&&(i[n]=PC(t.slice(1),e,null!==(o=i[n])&&void 0!==o?o:{})),Object.keys(i).includes(n)||(i[n]=e),i}function NC(t,e,i){var o=void 0,n=!1;return i=FC(t,!0,i,(function(t,e){n=!0,o=t[e],delete t[e]})),n?FC(e,!1,i,(function(t,e){t[e]=o})):i}function LC(t,e,i){var o=void 0,n=!1;return i=FC(t,!0,i,(function(t,e){n=!0,o=t[e],delete t[e]})),n?FC(e,!1,i,(function(t,e){void 0===t[e]&&(t[e]=o)})):i}function _C(t,e,i){return FC(t,!0,i,(function(t,i){t[e]=t[i],delete t[i]}))}function IC(t,e){return FC(t,!0,e,(function(t,e){return delete t[e]}))}function FC(t,e,i,o){var n=t instanceof Array?t:t.split("."),r=n.slice(0,n.length-1),s=n[n.length-1];return GC(r,i,(function(t){var i=Object.keys(t).includes(s);if(e&&!i)return t;var n=dC({},t);return o(n,s),n}))}function GC(t,e,i){var o,n,r=t instanceof Array?t:t.split(".");if(e=dC({},e),0===r.length)return i(e);if(r[0].startsWith("{")){var s=r[0].substring(1,r[0].lastIndexOf("}")).split(",");try{for(var a=pC(s),l=a.next();!l.done;l=a.next()){var c=l.value;null!=e[c]&&(e[c]=GC(r.slice(1),e[c],i))}}catch(h){o={error:h}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}}else if(r[0].endsWith("[]")){var d=r[0].substring(0,t[0].indexOf("["));e[d]instanceof Array&&(e[d]=e[d].map((function(t){return GC(r.slice(1),t,i)})))}else if("*"===r[0])for(var u in e)e[u]=GC(r.slice(1),e[u],i);else null!=e[r[0]]&&(e[r[0]]=GC(r.slice(1),e[r[0]],i));return e}var BC=function(t,e){return dC(dC({},t),e)},VC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),jC=function(){return jC=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},jC.apply(this,arguments)},WC=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},zC=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},HC=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},UC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.activeCharts=new Set,e.activeChartComps=new Set,e.crossFilteringContext={lastSelectedChartId:""},e}return VC(e,t),e.prototype.updateChart=function(t){if(0!==this.activeChartComps.size){var e=HC([],zC(this.activeChartComps),!1).find((function(e){return e.getChartId()===t.chartId}));e?e.update(t):console.warn("AG Grid - Unable to update chart. No active chart found with ID: ".concat(t.chartId,"."))}else console.warn("AG Grid - No active charts to update.")},e.prototype.getChartModels=function(){var t=[];return this.activeChartComps.forEach((function(e){return t.push(function(t){return jC(jC({},t),{version:cC})}(e.getChartModel()))})),t},e.prototype.getChartRef=function(t){var e;return this.activeCharts.forEach((function(i){i.chartId===t&&(e=i)})),e},e.prototype.getChartComp=function(t){var e;return this.activeChartComps.forEach((function(i){i.getChartId()===t&&(e=i)})),e},e.prototype.getChartImageDataURL=function(t){var e;return this.activeChartComps.forEach((function(i){i.getChartId()===t.chartId&&(e=i.getChartImageDataURL(t.fileFormat))})),e},e.prototype.downloadChart=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null===e||void 0===e||e.downloadChart(t.dimensions,t.fileName,t.fileFormat)},e.prototype.openChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t.chartId}));null===e||void 0===e||e.openChartToolPanel(t.panel)},e.prototype.closeChartToolPanel=function(t){var e=Array.from(this.activeChartComps).find((function(e){return e.getChartId()===t}));null===e||void 0===e||e.closeChartToolPanel()},e.prototype.createChartFromCurrentRange=function(t){void 0===t&&(t="groupedColumn");var e=this.getSelectedRange();return this.createChart(e,t)},e.prototype.restoreChart=function(t,e){var i=this;if(t){t.version!==cC&&(t=fC(t));var o={cellRange:t.cellRange,chartType:t.chartType,chartThemeName:t.chartThemeName,chartContainer:e,suppressChartRanges:t.suppressChartRanges,aggFunc:t.aggFunc,unlinkChart:t.unlinkChart,seriesChartTypes:t.seriesChartTypes},n=function(t){return i.rangeService?i.rangeService.createCellRangeFromCellRangeParams(t):void 0};if("pivot"===t.modelType){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var r=n({rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))});return r?this.createChart(r,o.chartType,o.chartThemeName,!0,!0,o.chartContainer,void 0,void 0,o.unlinkChart,!1,t.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}var s=n(o.cellRange);if(s)return this.createChart(s,o.chartType,o.chartThemeName,!1,o.suppressChartRanges,o.chartContainer,o.aggFunc,void 0,o.unlinkChart,!1,t.chartOptions,t.chartPalette,o.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}else console.warn("AG Grid - unable to restore chart as no chart model is provided")},e.prototype.createRangeChart=function(t){var e,i=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(i)return this.createChart(i,t.chartType,t.chartThemeName,!1,t.suppressChartRanges,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,void 0,void 0,void 0,t.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")},e.prototype.createPivotChart=function(t){this.columnModel.isPivotMode()||this.columnModel.setPivotMode(!0,"pivotChart");var e={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map((function(t){return t.getColId()}))},i=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(e):void 0;if(i)return this.createChart(i,t.chartType,t.chartThemeName,!0,!0,t.chartContainer,void 0,t.chartThemeOverrides,t.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")},e.prototype.createCrossFilterChart=function(t){var e,i=null===(e=this.rangeService)||void 0===e?void 0:e.createCellRangeFromCellRangeParams(t.cellRange);if(i){var o=!("undefined"!==typeof t.suppressChartRanges&&null!==t.suppressChartRanges)||t.suppressChartRanges;return this.createChart(i,t.chartType,t.chartThemeName,!1,o,t.chartContainer,t.aggFunc,t.chartThemeOverrides,t.unlinkChart,!0)}console.warn("AG Grid - unable to create chart as no range is selected")},e.prototype.createChart=function(t,e,i,o,n,r,s,a,l,c,d,u,h){var p=this;void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===l&&(l=!1),void 0===c&&(c=!1);var f=this.gridOptionsService.getCallback("createChartContainer"),g={chartId:this.generateId(),pivotChart:o,cellRange:t,chartType:e,chartThemeName:i,insideDialog:!(r||f),suppressChartRanges:n,aggFunc:s,chartThemeOverrides:a,unlinkChart:l,crossFiltering:c,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:d,chartPaletteToRestore:u,seriesChartTypes:h,crossFilteringResetCallback:function(){return p.activeChartComps.forEach((function(t){return t.crossFilteringReset()}))}},v=new lC(g);this.context.createBean(v);var y=this.createChartRef(v);if(r){r.appendChild(v.getGui());var m=this.environment.getTheme();m.el&&!m.el.contains(r)&&r.classList.add(m.theme)}else f?f(y):v.addEventListener(lC.EVENT_DESTROYED,(function(){p.activeChartComps.delete(v),p.activeCharts.delete(y)}));return y},e.prototype.createChartRef=function(t){var e=this,i={destroyChart:function(){e.activeCharts.has(i)&&(e.context.destroyBean(t),e.activeChartComps.delete(t),e.activeCharts.delete(i))},chartElement:t.getGui(),chart:t.getUnderlyingChart(),chartId:t.getChartModel().chartId};return this.activeCharts.add(i),this.activeChartComps.add(t),i},e.prototype.getSelectedRange=function(){var t=this.rangeService.getCellRanges();return t.length>0?t[0]:{}},e.prototype.generateId=function(){return"id-".concat(Math.random().toString(36).substring(2,18))},e.prototype.destroyAllActiveCharts=function(){this.activeCharts.forEach((function(t){return t.destroyChart()}))},e.CHARTS_VERSION="9.0.0",WC([(0,o.Xx1)("rangeService")],e.prototype,"rangeService",void 0),WC([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),WC([o.yah],e.prototype,"destroyAllActiveCharts",null),e=WC([(0,o.dR4)("chartService")],e)}(o.XQb),KC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),YC=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},XC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return KC(e,t),i=e,e.prototype.translate=function(t,e){return this.localeService.getLocaleTextFunc()(t,i.DEFAULT_TRANSLATIONS[t]||e)},e.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",histogramGroup:"Histogram",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",doughnutTooltip:"Doughnut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},e=i=YC([(0,o.dR4)("chartTranslationService")],e)}(o.XQb),$C=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qC=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ZC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return $C(e,t),i=e,e.prototype.filter=function(t,e){void 0===e&&(e=!1);var o=this.gridApi.getFilterModel();if(e)this.resetFilters(o);else{var n=i.extractFilterColId(t);this.isValidColumnFilter(n)?this.updateFilters(o,t,n):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+n+"'")}},e.prototype.resetFilters=function(t){Object.keys(t).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())},e.prototype.updateFilters=function(t,e,n){var r,s=i.extractFilterColId(e),a=e.datum[s];if(void 0!==a){var l=a.toString();if(e.event.metaKey||e.event.ctrlKey){var c=this.getCurrentGridValuesForCategory(n),d=void 0;o._.includes(c,l)?d=c.filter((function(t){return t!==l})):(d=c).push(l),t[n]=this.getUpdatedFilterModel(n,d)}else{d=[l];(r={})[n]=this.getUpdatedFilterModel(n,d),t=r}this.gridApi.setFilterModel(t)}},e.prototype.getUpdatedFilterModel=function(t,e){return"agMultiColumnFilter"===this.getColumnFilterType(t)?{filterType:"multi",filterModels:[null,{filterType:"set",values:e}]}:{filterType:"set",values:e}},e.prototype.getCurrentGridValuesForCategory=function(t){var e=this,i=[],o=this.getColumnById(t);return this.gridApi.forEachNodeAfterFilter((function(t){if(o&&!t.group){var n=e.valueService.getValue(o,t)+"";i.includes(n)||i.push(n)}})),i},e.extractFilterColId=function(t){return t.xKey||t.calloutLabelKey},e.prototype.isValidColumnFilter=function(t){t.indexOf("-filtered-out")&&(t=t.replace("-filtered-out",""));var e=this.getColumnFilterType(t);return"boolean"===typeof e?e:o._.includes(["agSetColumnFilter","agMultiColumnFilter"],e)},e.prototype.getColumnFilterType=function(t){var e=this.getColumnById(t);if(e)return e.getColDef().filter},e.prototype.getColumnById=function(t){return this.columnModel.getGridColumn(t)},qC([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),qC([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),qC([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),e=i=qC([(0,o.dR4)("chartCrossFilterService")],e)}(o.XQb),JC=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),QC=function(){return QC=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},QC.apply(this,arguments)},tw=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ew=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},iw=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},ow=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cellRanges=[],e.bodyScrollListener=e.onBodyScroll.bind(e),e.dragging=!1,e.intersectionRange=!1,e}return JC(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,(function(){return t.onColumnsChanged()})),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_MODE_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_CHANGED,(function(){return t.removeAllCellRanges()})),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady((function(){var e=t.ctrlsService.getGridBodyCtrl();t.autoScrollService=new o.MSA({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:function(){return e.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(t){return e.getScrollFeature().setVerticalScrollPosition(t)},getHorizontalPosition:function(){return e.getScrollFeature().getHScrollPosition().left},setHorizontalPosition:function(t){return e.getScrollFeature().setHorizontalScrollPosition(t)},shouldSkipVerticalScroll:function(){return!t.gridOptionsService.isDomLayout("normal")},shouldSkipHorizontalScroll:function(){return!e.getScrollFeature().isHorizontalScrollShowing()}})}))},e.prototype.onColumnsChanged=function(){var t=this;this.refreshLastRangeStart();var e=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach((function(i){var n=i.columns;i.columns=i.columns.filter((function(t){return t.isVisible()&&-1!==e.indexOf(t)})),!o._.areEqual(n,i.columns)&&t.dispatchChangedEvent(!1,!0,i.id)}));var i=this.cellRanges.length;this.cellRanges=this.cellRanges.filter((function(t){return t.columns.length>0})),i>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)},e.prototype.refreshLastRangeStart=function(){var t=o._.last(this.cellRanges);t&&this.refreshRangeStart(t)},e.prototype.isContiguousRange=function(t){var e=t.columns;if(!e.length)return!1;var i=this.columnModel.getAllDisplayedColumns(),n=e.map((function(t){return i.indexOf(t)})).sort((function(t,e){return t-e}));return o._.last(n)-n[0]+1===e.length},e.prototype.getRangeStartRow=function(t){return t.startRow&&t.endRow?this.rowPositionUtils.before(t.startRow,t.endRow)?t.startRow:t.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}},e.prototype.getRangeEndRow=function(t){if(t.startRow&&t.endRow)return this.rowPositionUtils.before(t.startRow,t.endRow)?t.endRow:t.startRow;var e=this.pinnedRowModel.getPinnedBottomRowCount();return e>0?{rowIndex:e-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}},e.prototype.setRangeToCell=function(t,e){if(void 0===e&&(e=!1),this.gridOptionsService.get("enableRangeSelection")){var i=this.calculateColumnsBetween(t.column,t.column);if(i){(this.gridOptionsService.get("suppressMultiRangeSelection")||!e||o._.missing(this.cellRanges))&&this.removeAllCellRanges(!0);var n={rowIndex:t.rowIndex,rowPinned:t.rowPinned},r={startRow:n,endRow:n,columns:i,startColumn:t.column};this.cellRanges.push(r),this.setNewestRangeStartCell(t),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}}},e.prototype.extendLatestRangeToCell=function(t){if(!this.isEmpty()&&this.newestRangeStartCell){var e=o._.last(this.cellRanges);this.updateRangeEnd(e,t)}},e.prototype.updateRangeEnd=function(t,e,i){void 0===i&&(i=!1);var o=e.column,n=this.calculateColumnsBetween(t.startColumn,o);n&&!this.isLastCellOfRange(t,e)&&(t.columns=n,t.endRow={rowIndex:e.rowIndex,rowPinned:e.rowPinned},i||this.dispatchChangedEvent(!0,!0,t.id))},e.prototype.refreshRangeStart=function(t){var e=t.startColumn,i=t.columns,n=function(e,i){var o=t.columns.filter((function(t){return t!==e}));e?(t.startColumn=e,t.columns=i?iw([e],ew(o),!1):iw(iw([],ew(o),!1),[e],!1)):t.columns=o},r=this.getRangeEdgeColumns(t),s=r.left,a=r.right;e===i[0]&&e!==s?n(s,!0):e===o._.last(i)&&e===a&&n(a,!1)},e.prototype.getRangeEdgeColumns=function(t){var e=this.columnModel.getAllDisplayedColumns(),i=t.columns.map((function(t){return e.indexOf(t)})).filter((function(t){return t>-1})).sort((function(t,e){return t-e}));return{left:e[i[0]],right:e[o._.last(i)]}},e.prototype.extendLatestRangeInDirection=function(t){if(!this.isEmpty()&&this.newestRangeStartCell){var e=t.key,i=t.ctrlKey||t.metaKey,n=o._.last(this.cellRanges),r=this.newestRangeStartCell,s=n.columns[0],a=o._.last(n.columns),l=n.endRow.rowIndex,c=n.endRow.rowPinned,d={column:r.column===s?a:s,rowIndex:l,rowPinned:c},u=this.cellNavigationService.getNextCellToFocus(e,d,i);if(u)return this.setCellRange({rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:u.rowIndex,rowEndPinned:u.rowPinned,columnStart:r.column,columnEnd:u.column}),u}},e.prototype.setCellRange=function(t){this.gridOptionsService.get("enableRangeSelection")&&(this.removeAllCellRanges(!0),this.addCellRange(t))},e.prototype.setCellRanges=function(t){var e=this;o._.shallowCompare(this.cellRanges,t)||(this.removeAllCellRanges(!0),t.forEach((function(t){t.columns&&t.startRow&&e.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.columns[0]}),e.cellRanges.push(t)})),this.dispatchChangedEvent(!1,!0))},e.prototype.setNewestRangeStartCell=function(t){this.newestRangeStartCell=t},e.prototype.clearCellRangeCellValues=function(t){var e=this,i=t.cellRanges,n=t.cellEventSource,r=void 0===n?"rangeService":n,s=t.dispatchWrapperEvents,a=t.wrapperEventSource,l=void 0===a?"deleteKey":a;if(s){var c={type:o.sVA.EVENT_RANGE_DELETE_START,source:l};this.eventService.dispatchEvent(c)}if(i||(i=this.cellRanges),i.forEach((function(t){e.forEachRowInRange(t,(function(i){var o=e.rowPositionUtils.getRowNode(i);if(o)for(var n=0;n<t.columns.length;n++){var s=e.columnModel.getGridColumn(t.columns[n]);if(!s||!s.isCellEditable(o))return;o.setDataValue(s,null,r)}}))})),s){var d={type:o.sVA.EVENT_RANGE_DELETE_END,source:l};this.eventService.dispatchEvent(d)}},e.prototype.createCellRangeFromCellRangeParams=function(t){var e,i=this,n=!1;if(t.columns)e=t.columns.map((function(t){return i.columnModel.getColumnWithValidation(t)})).filter((function(t){return t}));else{var r=this.columnModel.getColumnWithValidation(t.columnStart),s=this.columnModel.getColumnWithValidation(t.columnEnd);if(!r||!s)return;(e=this.calculateColumnsBetween(r,s))&&e.length&&(n=e[0]!==r)}if(e)return{startRow:null!=t.rowStartIndex?{rowIndex:t.rowStartIndex,rowPinned:t.rowStartPinned||null}:void 0,endRow:null!=t.rowEndIndex?{rowIndex:t.rowEndIndex,rowPinned:t.rowEndPinned||null}:void 0,columns:e,startColumn:n?o._.last(e):e[0]}},e.prototype.addCellRange=function(t){if(this.gridOptionsService.get("enableRangeSelection")){var e=this.createCellRangeFromCellRangeParams(t);e&&(e.startRow&&this.setNewestRangeStartCell({rowIndex:e.startRow.rowIndex,rowPinned:e.startRow.rowPinned,column:e.startColumn}),this.cellRanges.push(e),this.dispatchChangedEvent(!1,!0,e.id))}},e.prototype.getCellRanges=function(){return this.cellRanges},e.prototype.isEmpty=function(){return 0===this.cellRanges.length},e.prototype.isMoreThanOneCell=function(){var t=this.cellRanges.length;if(0===t)return!1;if(t>1)return!0;var e=this.cellRanges[0],i=this.getRangeStartRow(e),o=this.getRangeEndRow(e);return i.rowPinned!==o.rowPinned||i.rowIndex!==o.rowIndex||1!==e.columns.length},e.prototype.areAllRangesAbleToMerge=function(){var t,e,i,o=this,n=new Map;if(this.cellRanges.length<=1)return!0;this.cellRanges.forEach((function(t){o.forEachRowInRange(t,(function(e){var i="".concat(e.rowPinned||"normal","_").concat(e.rowIndex),o=n.get(i),r=t.columns.map((function(t){return t.getId()}));if(o){var s=r.filter((function(t){return-1===o.indexOf(t)}));o.push.apply(o,iw([],ew(s),!1))}else n.set(i,r)}))}));try{for(var r=ow(n.values()),s=r.next();!s.done;s=r.next()){var a=s.value.sort().join();if(void 0!==i){if(i!==a)return!1}else i=a}}catch(l){t={error:l}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return!0},e.prototype.forEachRowInRange=function(t,e){for(var i=this.getRangeStartRow(t),o=this.getRangeEndRow(t),n=i;n&&(e(n),!this.rowPositionUtils.sameRow(n,o));)n=this.cellNavigationService.getRowBelow(n)},e.prototype.removeAllCellRanges=function(t){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,t||this.dispatchChangedEvent(!1,!0))},e.prototype.onBodyScroll=function(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)},e.prototype.isCellInAnyRange=function(t){return this.getCellRangeCount(t)>0},e.prototype.isCellInSpecificRange=function(t,e){var i=null!==e.columns&&o._.includes(e.columns,t.column),n=this.isRowInRange(t.rowIndex,t.rowPinned,e);return i&&n},e.prototype.isLastCellOfRange=function(t,e){var i=t.startRow,n=t.endRow,r=this.rowPositionUtils.before(i,n)?n:i,s=e.rowIndex===r.rowIndex&&e.rowPinned===r.rowPinned,a=t.columns[0],l=o._.last(t.columns),c=t.startColumn===a?l:a;return e.column===c&&s},e.prototype.isBottomRightCell=function(t,e){var i=this.columnModel.getAllDisplayedColumns(),n=t.columns.map((function(t){return i.indexOf(t)})).sort((function(t,e){return t-e})),r=t.startRow,s=t.endRow,a=this.rowPositionUtils.before(r,s)?s:r,l=i.indexOf(e.column)===o._.last(n),c=e.rowIndex===a.rowIndex&&o._.makeNull(e.rowPinned)===o._.makeNull(a.rowPinned);return l&&c},e.prototype.getCellRangeCount=function(t){var e=this;return this.isEmpty()?0:this.cellRanges.filter((function(i){return e.isCellInSpecificRange(t,i)})).length},e.prototype.isRowInRange=function(t,e,i){var o=this.getRangeStartRow(i),n=this.getRangeEndRow(i),r={rowIndex:t,rowPinned:e||null},s=r.rowIndex===o.rowIndex&&r.rowPinned==o.rowPinned,a=r.rowIndex===n.rowIndex&&r.rowPinned==n.rowPinned;if(s||a)return!0;var l=!this.rowPositionUtils.before(r,o),c=this.rowPositionUtils.before(r,n);return l&&c},e.prototype.getDraggingRange=function(){return this.draggingRange},e.prototype.onDragStart=function(t){if(this.gridOptionsService.get("enableRangeSelection")){var e=t.ctrlKey,i=t.metaKey,n=t.shiftKey,r=e||i,s=!!!this.gridOptionsService.get("suppressMultiRangeSelection")&&r,a=n&&o._.existsAndNotEmpty(this.cellRanges);s||a&&!o._.exists(o._.last(this.cellRanges).type)||this.removeAllCellRanges(!0);var l=this.dragService.getStartTarget();if(l&&this.updateValuesOnMove(l),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=t,this.intersectionRange=s&&this.getCellRangeCount(this.lastCellHovered)>1,a||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=o._.last(this.cellRanges);else{var c={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:c,endRow:c,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}},e.prototype.intersectLastRange=function(t){var e=this;if((!t||!this.dragging)&&!this.gridOptionsService.get("suppressMultiRangeSelection")&&!this.isEmpty()){var i=o._.last(this.cellRanges),n=this.getRangeStartRow(i),r=this.getRangeEndRow(i),s=[];this.cellRanges.slice(0,-1).forEach((function(t){var a=e.getRangeStartRow(t),l=e.getRangeEndRow(t),c=t.columns,d=c.filter((function(t){return-1===i.columns.indexOf(t)}));if(d.length!==c.length)if(e.rowPositionUtils.before(r,a)||e.rowPositionUtils.before(l,n))s.push(t);else{var u=s.length;if(e.rowPositionUtils.before(a,n)){var h={columns:iw([],ew(c),!1),startColumn:i.startColumn,startRow:QC({},a),endRow:e.cellNavigationService.getRowAbove(n)};s.push(h)}if(d.length>0){var p={columns:d,startColumn:o._.includes(d,i.startColumn)?i.startColumn:d[0],startRow:e.rowPositionUtils.rowMax([QC({},n),QC({},a)]),endRow:e.rowPositionUtils.rowMin([QC({},r),QC({},l)])};s.push(p)}e.rowPositionUtils.before(r,l)&&s.push({columns:iw([],ew(c),!1),startColumn:i.startColumn,startRow:e.cellNavigationService.getRowBelow(r),endRow:QC({},l)}),s.length-u===1&&(s[s.length-1].id=t.id)}else s.push(t)})),this.cellRanges=s,t&&this.dispatchChangedEvent(!1,!0)}},e.prototype.updateValuesOnMove=function(t){var e=o._.getCtrlForEventTarget(this.gridOptionsService,t,o.wX9.DOM_DATA_KEY_CELL_CTRL),i=null===e||void 0===e?void 0:e.getCellPosition();this.cellHasChanged=!1,!i||this.lastCellHovered&&this.cellPositionUtils.equals(i,this.lastCellHovered)||(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=i)},e.prototype.onDragging=function(t){var e=this;if(this.dragging&&t){this.updateValuesOnMove(t.target),this.lastMouseEvent=t;var i=this.lastCellHovered,o=function(t){return i&&i.rowPinned===t&&e.newestRangeStartCell.rowPinned===t},n=o("top")||o("bottom");if(this.autoScrollService.check(t,n),this.cellHasChanged){var r=this.calculateColumnsBetween(this.newestRangeStartCell.column,i.column);r&&(this.draggingRange.endRow={rowIndex:i.rowIndex,rowPinned:i.rowPinned},this.draggingRange.columns=r,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}}},e.prototype.onDragStop=function(){if(this.dragging){var t=this.draggingRange.id;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,t)}},e.prototype.dispatchChangedEvent=function(t,e,i){var n={type:o.sVA.EVENT_RANGE_SELECTION_CHANGED,started:t,finished:e,id:i};this.eventService.dispatchEvent(n)},e.prototype.calculateColumnsBetween=function(t,e){var i=this.columnModel.getAllDisplayedColumns(),o=t===e,n=i.indexOf(t);if(n<0)console.warn("AG Grid: column ".concat(t.getId()," is not visible"));else{var r=o?n:i.indexOf(e);if(!(r<0)){if(o)return[t];for(var s=Math.min(n,r),a=s===n?r:n,l=[],c=s;c<=a;c++)l.push(i[c]);return l}console.warn("AG Grid: column ".concat(e.getId()," is not visible"))}},tw([(0,o.dsm)("rowModel")],e.prototype,"rowModel",void 0),tw([(0,o.dsm)("dragService")],e.prototype,"dragService",void 0),tw([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),tw([(0,o.dsm)("cellNavigationService")],e.prototype,"cellNavigationService",void 0),tw([(0,o.dsm)("pinnedRowModel")],e.prototype,"pinnedRowModel",void 0),tw([(0,o.dsm)("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),tw([(0,o.dsm)("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),tw([(0,o.dsm)("ctrlsService")],e.prototype,"ctrlsService",void 0),tw([o.o7C],e.prototype,"init",null),e=tw([(0,o.dR4)("rangeService")],e)}(o.XQb),rw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),sw=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},aw=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.changedCalculatedValues=!1,e.dragging=!1,e.shouldDestroyOnEndDragging=!1,e}return rw(e,t),e.prototype.init=function(){var t=this;this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:function(e){t.dragging=!0,t.rangeService.autoScrollService.check(e),t.changedCalculatedValues&&(t.onDrag(e),t.changedCalculatedValues=!1)},onDragStop:function(e){t.dragging=!1,t.onDragEnd(e),t.clearValues(),t.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(t.getDraggingCssClass()),t.shouldDestroyOnEndDragging&&t.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))},e.prototype.isDragging=function(){return this.dragging},e.prototype.getCellCtrl=function(){return this.cellCtrl},e.prototype.setCellCtrl=function(t){this.cellCtrl=t},e.prototype.getCellRange=function(){return this.cellRange},e.prototype.setCellRange=function(t){this.cellRange=t},e.prototype.getRangeStartRow=function(){return this.rangeStartRow},e.prototype.setRangeStartRow=function(t){this.rangeStartRow=t},e.prototype.getRangeEndRow=function(){return this.rangeEndRow},e.prototype.setRangeEndRow=function(t){this.rangeEndRow=t},e.prototype.getLastCellHovered=function(){return this.lastCellHovered},e.prototype.preventRangeExtension=function(t){t.stopPropagation()},e.prototype.onDragStart=function(t){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())},e.prototype.getDraggingCssClass=function(){return"ag-dragging-".concat(this.type===o.LIk.FILL?"fill":"range","-handle")},e.prototype.updateValuesOnMove=function(t){var e=this.mouseEventService.getCellPositionForEvent(t);!e||this.lastCellHovered&&this.cellPositionUtils.equals(e,this.lastCellHovered)||(this.lastCellHovered=e,this.changedCalculatedValues=!0)},e.prototype.getType=function(){return this.type},e.prototype.refresh=function(t){var e=this.getCellCtrl(),i=this.getGui(),n=o._.last(this.rangeService.getCellRanges()),r=n.startRow,s=n.endRow;r&&s&&(this.rowPositionUtils.before(s,r)?(this.setRangeStartRow(s),this.setRangeEndRow(r)):(this.setRangeStartRow(r),this.setRangeEndRow(s)));if(e!==t||!o._.isVisible(i)){this.setCellCtrl(t);var a=t.getComp().getParentOfValue();a&&a.appendChild(i)}this.setCellRange(n)},e.prototype.clearValues=function(){this.lastCellHovered=void 0,this.removeListeners()},e.prototype.removeListeners=function(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)},e.prototype.destroy=function(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return o._.setDisplayed(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,t.prototype.destroy.call(this),this.removeListeners();var e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)},sw([(0,o.dsm)("rowRenderer")],e.prototype,"rowRenderer",void 0),sw([(0,o.dsm)("dragService")],e.prototype,"dragService",void 0),sw([(0,o.dsm)("rangeService")],e.prototype,"rangeService",void 0),sw([(0,o.dsm)("mouseEventService")],e.prototype,"mouseEventService",void 0),sw([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),sw([(0,o.dsm)("cellNavigationService")],e.prototype,"cellNavigationService",void 0),sw([(0,o.dsm)("navigationService")],e.prototype,"navigationService",void 0),sw([(0,o.dsm)("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),sw([(0,o.dsm)("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),sw([(0,o.dsm)("ctrlsService")],e.prototype,"ctrlsService",void 0),sw([o.o7C],e.prototype,"init",null),e}(o.uAl);function lw(t){var e=t.length,i=0;if(e<=1)return t;for(var o=0;o<t.length;o++){var n=t[o],r=n.toString().split("e-");r.length>1?i=Math.max(i,parseInt(r[1],10)):Math.floor(n)!==n&&(i=Math.max(i,n.toString().split(".")[1].length))}for(var s=0,a=0,l=0,c=0,d=0,u=0;u<e;u++)s+=u,a+=d=t[u],c+=u*u,l+=u*d;var h=(e*l-s*a)/(e*c-s*s),p=a/e-h*s/e,f=[];for(u=0;u<=e;u++)f.push(parseFloat((u*h+p).toFixed(i)));return f}var cw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),dw=function(){return dw=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},dw.apply(this,arguments)},uw=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},hw=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},pw=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},fw=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.markedCells=[],i.cellValues=[],i.isUp=!1,i.isLeft=!1,i.isReduce=!1,i.type=o.LIk.FILL,i}return cw(e,t),e.prototype.updateValuesOnMove=function(e){t.prototype.updateValuesOnMove.call(this,e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));var i,o=this.initialXY,n=o.x,r=o.y,s=this.mouseEventService.getNormalisedPosition(e),a=s.x,l=s.y,c=Math.abs(n-a),d=Math.abs(r-l),u=this.getFillHandleDirection();(i="xy"===u?c>d?"x":"y":u)!==this.dragAxis&&(this.dragAxis=i,this.changedCalculatedValues=!0)},e.prototype.onDrag=function(t){if(!this.initialPosition){var e=this.getCellCtrl();if(!e)return;this.initialPosition=e.getCellPosition()}var i=this.getLastCellHovered();i&&this.markPathFrom(this.initialPosition,i)},e.prototype.onDragEnd=function(t){if(this.initialXY=null,this.markedCells.length){var e,i="x"===this.dragAxis,o=this.getCellRange(),n=o.columns.length,r=this.getRangeStartRow(),s=this.getRangeEndRow();if(this.isUp||this.isLeft){var a=i?r:this.lastCellMarked;e=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:a.rowIndex,rowStartPinned:a.rowPinned,columnStart:i?this.lastCellMarked.column:o.columns[0],rowEndIndex:s.rowIndex,rowEndPinned:s.rowPinned,columnEnd:o.columns[n-1]})}else e=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,columnStart:o.columns[0],rowEndIndex:i?s.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:i?s.rowPinned:this.lastCellMarked.rowPinned,columnEnd:i?this.lastCellMarked.column:o.columns[n-1]});e&&(this.raiseFillStartEvent(),this.handleValueChanged(o,e,t),this.rangeService.setCellRanges([e]),this.raiseFillEndEvent(o,e))}},e.prototype.getFillHandleDirection=function(){var t=this.gridOptionsService.get("fillHandleDirection");return t?"x"!==t&&"y"!==t&&"xy"!==t?(o._.warnOnce("valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'."),"xy"):t:"xy"},e.prototype.raiseFillStartEvent=function(){var t={type:o.sVA.EVENT_FILL_START};this.eventService.dispatchEvent(t)},e.prototype.raiseFillEndEvent=function(t,e){var i={type:o.sVA.EVENT_FILL_END,initialRange:t,finalRange:e};this.eventService.dispatchEvent(i)},e.prototype.handleValueChanged=function(t,e,i){var n=this,r=this.rangeService.getRangeEndRow(t),s=this.rangeService.getRangeStartRow(t),a=this.rangeService.getRangeEndRow(e),l=this.rangeService.getRangeStartRow(e),c="y"===this.dragAxis;if(!this.isReduce||this.gridOptionsService.get("suppressClearOnFillReduction")){var d=!0,u=[],h=[],p=0,f=function(){u.length=0,h.length=0,p=0},g=function(e,i){var h=n.isUp?r:s,p=!1;c&&(d=!0,f());for(var g=function(){var g=n.rowPositionUtils.getRowNode(h);if(!g)return"break";c&&e?v(u,e,g,(function(){return!n.rowPositionUtils.sameRow(h,n.isUp?s:r)})):i&&(d=!0,f(),i.forEach((function(e){return v(u,e,g,(function(){return e!==(n.isLeft?t.columns[0]:o._.last(t.columns))}))}))),p=n.rowPositionUtils.sameRow(h,n.isUp?l:a),h=n.isUp?n.cellNavigationService.getRowAbove(h):n.cellNavigationService.getRowBelow(h)};!p&&h;){if("break"===g())break}},v=function(t,e,r,s){var a,l,c,u=!1;if(d)c=n.valueService.getValue(e,r),h.push(c),d=s();else{var f=n.processValues(i,t,h,e,r,p++),g=f.value,v=f.fromUserFunction,y=f.sourceCol,m=f.sourceRowNode;if(c=g,e.isCellEditable(r)){var b=n.valueService.getValue(e,r);v||(y&&!1!==(null===(a=y.getColDef())||void 0===a?void 0:a.useValueFormatterForExport)&&(c=null!==(l=n.valueFormatterService.formatValue(y,m,c))&&void 0!==l?l:c),!1!==e.getColDef().useValueParserForImport&&(c=n.valueParserService.parseValue(e,r,y?c:o._.toStringOrNull(c),b))),v&&b===c?u=!0:r.setDataValue(e,c,"rangeService")}}u||t.push({value:c,column:e,rowNode:r})};if(c)t.columns.forEach((function(t){g(t)}));else{y=this.isLeft?pw([],hw(e.columns),!1).reverse():e.columns;g(void 0,y)}}else{var y=c?t.columns:t.columns.filter((function(t){return e.columns.indexOf(t)<0})),m=c?this.cellNavigationService.getRowBelow(a):l;m&&this.clearCellsInRange(m,r,y)}},e.prototype.clearCellsInRange=function(t,e,i){var o={startRow:t,endRow:e,columns:i,startColumn:i[0]};this.rangeService.clearCellRangeCellValues({cellRanges:[o]})},e.prototype.processValues=function(t,e,i,n,r,s){var a,l=this.gridOptionsService.getCallback("fillOperation");if(a="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",l){var c={event:t,values:e.map((function(t){return t.value})),initialValues:i,currentIndex:s,currentCellValue:this.valueService.getValue(n,r),direction:a,column:n,rowNode:r},d=l(c);if(!1!==d)return{value:d,fromUserFunction:!0}}var u=!e.some((function(t){var e=t.value,i=parseFloat(e);return isNaN(i)||i.toString()!==e.toString()}));if(t.altKey||!u){if(u&&1===i.length){var h=this.isUp||this.isLeft?-1:1;return{value:parseFloat(o._.last(e).value)+1*h,fromUserFunction:!1}}var p=e[s%e.length];return{value:p.value,fromUserFunction:!1,sourceCol:p.column,sourceRowNode:p.rowNode}}return{value:o._.last(lw(e.map((function(t){var e=t.value;return Number(e)})))),fromUserFunction:!1}},e.prototype.clearValues=function(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,t.prototype.clearValues.call(this)},e.prototype.clearMarkedPath=function(){this.markedCells.forEach((function(t){if(t.isAlive()){var e=t.getComp();e.addOrRemoveCssClass("ag-selection-fill-top",!1),e.addOrRemoveCssClass("ag-selection-fill-right",!1),e.addOrRemoveCssClass("ag-selection-fill-bottom",!1),e.addOrRemoveCssClass("ag-selection-fill-left",!1)}})),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1},e.prototype.clearCellValues=function(){this.cellValues.length=0},e.prototype.markPathFrom=function(t,e){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(e,t))return;var i=this.rowPositionUtils.before(e,t),o=this.getRangeStartRow(),n=this.getRangeEndRow();i&&(e.rowPinned==o.rowPinned&&e.rowIndex>=o.rowIndex||o.rowPinned!=n.rowPinned&&e.rowPinned==n.rowPinned&&e.rowIndex<=n.rowIndex)?(this.reduceVertical(t,e),this.isReduce=!0):(this.extendVertical(t,e,i),this.isReduce=!1)}else{var r=t.column,s=e.column;if(r===s)return;var a=this.columnModel.getAllDisplayedColumns(),l=a.indexOf(r),c=a.indexOf(s);c<=l&&c>=a.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(t,e),this.isReduce=!0):(this.extendHorizontal(t,e,c<l),this.isReduce=!1)}this.lastCellMarked=e},e.prototype.extendVertical=function(t,e,i){var o=this.navigationService,n=this.rangeService,r=t;do{for(var s=this.getCellRange(),a=s.columns.length,l=0;l<a;l++){var c=s.columns[l],d={rowIndex:r.rowIndex,rowPinned:r.rowPinned},u=dw(dw({},d),{column:c}),h=n.isCellInSpecificRange(u,s),p=this.rowPositionUtils.sameRow(r,t);if(i&&(this.isUp=!0),!p){var f=o.getCellByPosition(u);if(f){this.markedCells.push(f);var g=f.getComp();h||(g.addOrRemoveCssClass("ag-selection-fill-left",0===l),g.addOrRemoveCssClass("ag-selection-fill-right",l===a-1)),g.addOrRemoveCssClass(i?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(r,e))}}}if(this.rowPositionUtils.sameRow(r,e))break}while(r=i?this.cellNavigationService.getRowAbove(r):this.cellNavigationService.getRowBelow(r))},e.prototype.reduceVertical=function(t,e){var i=t;do{for(var o=this.getCellRange(),n=o.columns.length,r=this.rowPositionUtils.sameRow(i,e),s=0;s<n;s++){var a={rowIndex:i.rowIndex,rowPinned:i.rowPinned},l=dw(dw({},a),{column:o.columns[s]}),c=this.navigationService.getCellByPosition(l);if(c)this.markedCells.push(c),c.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(i,e))}if(r)break}while(i=this.cellNavigationService.getRowAbove(i))},e.prototype.extendHorizontal=function(t,e,i){var n=this,r=this.columnModel.getAllDisplayedColumns(),s=r.indexOf(i?e.column:t.column),a=r.indexOf(i?this.getCellRange().columns[0]:e.column),l=i?0:1,c=r.slice(s+l,a+l),d=this.getRangeStartRow(),u=this.getRangeEndRow();c.forEach((function(t){var e=d,r=!1;do{r=n.rowPositionUtils.sameRow(e,u);var s=n.navigationService.getCellByPosition({rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t});if(s){n.markedCells.push(s);var a=s.getComp();a.addOrRemoveCssClass("ag-selection-fill-top",n.rowPositionUtils.sameRow(e,d)),a.addOrRemoveCssClass("ag-selection-fill-bottom",n.rowPositionUtils.sameRow(e,u)),i?(n.isLeft=!0,a.addOrRemoveCssClass("ag-selection-fill-left",t===c[0])):a.addOrRemoveCssClass("ag-selection-fill-right",t===o._.last(c))}e=n.cellNavigationService.getRowBelow(e)}while(!r)}))},e.prototype.reduceHorizontal=function(t,e){var i=this,o=this.columnModel.getAllDisplayedColumns(),n=o.indexOf(e.column),r=o.indexOf(t.column),s=o.slice(n,r),a=this.getRangeStartRow(),l=this.getRangeEndRow();s.forEach((function(t){var e=a,o=!1;do{o=i.rowPositionUtils.sameRow(e,l);var n=i.navigationService.getCellByPosition({rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t});if(n)i.markedCells.push(n),n.getComp().addOrRemoveCssClass("ag-selection-fill-right",t===s[0]);e=i.cellNavigationService.getRowBelow(e)}while(!o)}))},e.prototype.refresh=function(e){var i=this.rangeService.getCellRanges()[0];i.startRow&&i.endRow?t.prototype.refresh.call(this,e):this.destroy()},e.TEMPLATE='<div class="ag-fill-handle"></div>',uw([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),uw([(0,o.dsm)("valueParserService")],e.prototype,"valueParserService",void 0),uw([(0,o.dsm)("valueFormatterService")],e.prototype,"valueFormatterService",void 0),e}(aw),gw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),vw=function(){return vw=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},vw.apply(this,arguments)},yw=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.type=o.LIk.RANGE,i.rangeFixed=!1,i}return gw(e,t),e.prototype.onDrag=function(t){var e=this.getLastCellHovered();if(e){var i=this.rangeService.getCellRanges(),n=o._.last(i);if(this.rangeFixed||(this.fixRangeStartEnd(n),this.rangeFixed=!0),this.endPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column},2===i.length&&i[0].type===o.OnL.DIMENSION&&n.type===o.OnL.VALUE)!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(n))&&this.rangeService.updateRangeEnd(i[0],vw(vw({},this.endPosition),{column:i[0].columns[0]}),!0);this.rangeService.extendLatestRangeToCell(this.endPosition)}},e.prototype.onDragEnd=function(t){var e=o._.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(e),this.rangeFixed=!1},e.prototype.fixRangeStartEnd=function(t){var e=this.rangeService.getRangeStartRow(t),i=this.rangeService.getRangeEndRow(t),o=t.columns[0];t.startRow=e,t.endRow=i,t.startColumn=o},e.TEMPLATE='<div class="ag-range-handle"></div>',e}(aw),mw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),bw=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Sw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mw(e,t),e.prototype.createSelectionHandle=function(t){return this.createBean(t===o.LIk.RANGE?new yw:new fw)},e=bw([(0,o.dR4)("selectionHandleFactory")],e)}(o.XQb),xw={version:"31.0.0",moduleName:o.zsj.RangeSelectionModule,beans:[nw,Sw],agStackComponents:[{componentName:"AgFillHandle",componentClass:fw},{componentName:"AgRangeHandle",componentClass:yw}],dependantModules:[g]},Cw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),ww=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ew=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},Ow=function(t){function e(i){var o=t.call(this,e.TEMPLATE)||this;return o.H=1,o.S=1,o.B=1,o.A=1,o.isSpectrumDragging=!1,o.isSpectrumHueDragging=!1,o.isSpectrumAlphaDragging=!1,o.colorChanged=!1,o.picker=i.picker,o}return Cw(e,t),e.prototype.postConstruct=function(){var t=this;this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",(function(){return t.spectrumColor.focus()})),this.addGuiEventListener("keydown",(function(e){e.key!==o.DDm.ENTER||e.defaultPrevented||t.destroy()})),this.addManagedListener(this.spectrumColor,"keydown",(function(e){return t.moveDragger(e)})),this.addManagedListener(this.spectrumAlphaSlider,"keydown",(function(e){return t.moveAlphaSlider(e)})),this.addManagedListener(this.spectrumHueSlider,"keydown",(function(e){return t.moveHueSlider(e)})),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",(function(e){t.onSpectrumDraggerMove(e),t.onSpectrumHueMove(e),t.onSpectrumAlphaMove(e)})),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",(function(e){e.key!==o.DDm.ENTER&&e.key!==o.DDm.SPACE||(e.preventDefault(),t.onRecentColorClick(e))}))},e.prototype.initTabIndex=function(){var t=this.tabIndex=this.gridOptionsService.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",t),this.spectrumHueSlider.setAttribute("tabindex",t),this.spectrumAlphaSlider.setAttribute("tabindex",t)},e.prototype.refreshSpectrumRect=function(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()},e.prototype.refreshHueRect=function(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()},e.prototype.refreshAlphaRect=function(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()},e.prototype.onSpectrumDraggerDown=function(t){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(t)},e.prototype.onSpectrumDraggerMove=function(t){this.isSpectrumDragging&&this.moveDragger(t)},e.prototype.onSpectrumHueDown=function(t){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(t)},e.prototype.onSpectrumHueMove=function(t){this.isSpectrumHueDragging&&this.moveHueSlider(t)},e.prototype.onSpectrumAlphaDown=function(t){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(t)},e.prototype.onSpectrumAlphaMove=function(t){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(t)},e.prototype.onMouseUp=function(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1},e.prototype.moveDragger=function(t){var e=this.spectrumValRect;if(e){var i,n;if(t instanceof MouseEvent)i=t.clientX-e.left,n=t.clientY-e.top;else{var r=t.key===o.DDm.LEFT,s=t.key===o.DDm.RIGHT,a=t.key===o.DDm.UP,l=t.key===o.DDm.DOWN,c=a||l,d=r||s;if(!c&&!d)return;t.preventDefault();var u=this.getSpectrumValue();i=u.x+(d?r?-5:5:0),n=u.y+(c?a?-5:5:0)}i=Math.max(i,0),i=Math.min(i,e.width),n=Math.max(n,0),n=Math.min(n,e.height),this.setSpectrumValue(i/e.width,1-n/e.height)}},e.prototype.moveHueSlider=function(t){var e=this.spectrumHueRect;if(e){var i=this.moveSlider(this.spectrumHueSlider,t);null!=i&&(this.H=1-i/e.width,this.update())}},e.prototype.moveAlphaSlider=function(t){var e=this.spectrumAlphaRect;if(e){var i=this.moveSlider(this.spectrumAlphaSlider,t);null!=i&&(this.A=i/e.width,this.update())}},e.prototype.moveSlider=function(t,e){var i,n,r=t.getBoundingClientRect(),s=null===(i=t.parentElement)||void 0===i?void 0:i.getBoundingClientRect();if(!t||!s)return null;if(e instanceof MouseEvent)n=e.clientX-s.left;else{var a=e.key===o.DDm.LEFT,l=e.key===o.DDm.RIGHT;if(!a&&!l)return null;e.preventDefault();var c=a?-5:5;n=parseFloat(t.style.left)-r.width/2+c}return n=Math.max(n,0),n=Math.min(n,s.width),t.style.left=n+r.width/2+"px",n},e.prototype.update=function(){var t=eh.Color.fromHSB(360*this.H,this.S,this.B,this.A),e=eh.Color.fromHSB(360*this.H,1,1),i=t.toRgbaString(),o=this.picker;eh.Color.fromString(o.getValue()).toRgbaString()!==i&&(this.colorChanged=!0),o.setValue(i),this.spectrumColor.style.backgroundColor=e.toRgbaString(),this.spectrumDragger.style.backgroundColor=i},e.prototype.setSpectrumValue=function(t,e){var i=this.spectrumValRect||this.refreshSpectrumRect();if(null!=i){var o=this.spectrumDragger,n=o.getBoundingClientRect();t=Math.max(0,t),t=Math.min(1,t),e=Math.max(0,e),e=Math.min(1,e),this.S=t,this.B=e,o.style.left=t*i.width-n.width/2+"px",o.style.top=(1-e)*i.height-n.height/2+"px",this.update()}},e.prototype.getSpectrumValue=function(){var t=this.spectrumDragger,e=t.getBoundingClientRect();return{x:parseFloat(t.style.left)+e.width/2,y:parseFloat(t.style.top)+e.height/2}},e.prototype.initRecentColors=function(){var t=this,i=e.recentColors.map((function(e,i){return'<div class="ag-recent-color" id='.concat(i,' style="background-color: ').concat(e,'; width: 15px; height: 15px;" recent-color="').concat(e,'" tabIndex="').concat(t.tabIndex,'"></div>')}));this.recentColors.innerHTML=i.join("")},e.prototype.setValue=function(t){var e=eh.Color.fromString(t),i=Ew(e.toHSB(),3),o=i[0],n=i[1],r=i[2];this.H=(isNaN(o)?0:o)/360,this.A=e.a;var s=this.spectrumHueRect||this.refreshHueRect(),a=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left="".concat((this.H-1)*-s.width,"px"),this.spectrumAlphaSlider.style.left="".concat(this.A*a.width,"px"),this.setSpectrumValue(n,r)},e.prototype.onRecentColorClick=function(t){var i=t.target;if(o._.exists(i.id)){var n=parseInt(i.id,10);this.setValue(e.recentColors[n]),this.destroy()}},e.prototype.addRecentColor=function(){var t=eh.Color.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString(),i=e.recentColors;this.colorChanged&&i[0]!==t&&(i=i.filter((function(e){return e!=t})),(i=[t].concat(i)).length>e.maxRecentColors&&(i=i.slice(0,e.maxRecentColors)),e.recentColors=i)},e.prototype.destroy=function(){this.addRecentColor(),t.prototype.destroy.call(this)},e.maxRecentColors=8,e.recentColors=[],e.TEMPLATE='<div class="ag-color-panel" tabindex="-1">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',ww([(0,o.PIB)("spectrumColor")],e.prototype,"spectrumColor",void 0),ww([(0,o.PIB)("spectrumVal")],e.prototype,"spectrumVal",void 0),ww([(0,o.PIB)("spectrumDragger")],e.prototype,"spectrumDragger",void 0),ww([(0,o.PIB)("spectrumHue")],e.prototype,"spectrumHue",void 0),ww([(0,o.PIB)("spectrumHueSlider")],e.prototype,"spectrumHueSlider",void 0),ww([(0,o.PIB)("spectrumAlpha")],e.prototype,"spectrumAlpha",void 0),ww([(0,o.PIB)("spectrumAlphaSlider")],e.prototype,"spectrumAlphaSlider",void 0),ww([(0,o.PIB)("recentColors")],e.prototype,"recentColors",void 0),ww([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),Dw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Aw=function(){return Aw=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Aw.apply(this,arguments)},Tw=function(t){function e(e){var i=t.call(this,Aw({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},e))||this;return e&&e.color&&(i.value=e.color),i}return Dw(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this),this.value&&this.setValue(this.value)},e.prototype.createPickerComponent=function(){var t=this.getGui().getBoundingClientRect();return this.createBean(new o.fNJ({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:t.right-190,y:t.top-250}))},e.prototype.renderAndPositionPicker=function(){var t=this,e=this.pickerComponent,i=this.createBean(new Ow({picker:this}));return e.addCssClass("ag-color-dialog"),i.addDestroyFunc((function(){e.isAlive()&&t.destroyBean(e)})),e.setParentComponent(this),e.setBodyComponent(i),i.setValue(this.getValue()),i.getGui().focus(),e.addDestroyFunc((function(){t.isDestroyingPicker?t.isDestroyingPicker=!1:(t.beforeHidePicker(),t.isDestroyingPicker=!0,i.isAlive()&&t.destroyBean(i),t.isAlive()&&t.getFocusableElement().focus())})),function(){var e;return null===(e=t.pickerComponent)||void 0===e?void 0:e.close()}},e.prototype.setValue=function(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,t.prototype.setValue.call(this,e))},e.prototype.getValue=function(){return this.value},e}(o.HHt),Mw=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},kw=28,Rw=6;function Pw(t){return t&&t.match(/\d+\.\d+\.\d+/)}function Nw(t){var e=t.type,i=t.gridVersion,o=t.chartsVersion,n="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!i)return n;var r=function(t){if(t&&Pw(t)){var e=Mw(t.split(".")||[],2),i=e[0],o=e[1],n="".concat(i,".").concat(o,".x"),r=parseInt(i,10)-kw+Rw;if(!(r<0)){var s=o;return{gridMajorMinor:n,chartsMajorMinor:"".concat(r,".").concat(s,".x")}}}}(i);if(!r)return n;var s=r.gridMajorMinor,a=r.chartsMajorMinor;return"incompatible"===e?"AG Grid version ".concat(i," and AG Charts version ").concat(o," is not supported. AG Grid version ").concat(s," should be used with AG Chart ").concat(a,". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information."):"invalidCharts"===e?"AG Grid version ".concat(s," should be used with AG Chart ").concat(a,". Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information."):n}function Lw(t){var e=t.gridVersion,i=t.chartsVersion;if(!Pw(i))return{isValid:!1,message:Nw({type:"invalidCharts",gridVersion:e,chartsVersion:i})};if(!Pw(e))return{isValid:!1,message:Nw({type:"invalidGrid",gridVersion:e,chartsVersion:i})};var o=Mw(e.split(".")||[],2),n=o[0],r=o[1],s=Mw(i.split(".")||[],2),a=s[0],l=s[1],c=function(t){var e=t.gridMajorVersion,i=t.chartsMajorVersion,o=parseInt(e,10),n=parseInt(i,10),r=o-kw;return r===n-Rw&&r>=0}({gridMajorVersion:n,chartsMajorVersion:a});return c&&r===l?{isValid:!0}:c&&r===l?{isValid:!1,message:Nw({type:"invalid",gridVersion:e,chartsVersion:i})}:{isValid:!1,message:Nw({type:"incompatible",gridVersion:e,chartsVersion:i})}}var _w,Iw={version:cC,validate:function(){return Lw({gridVersion:cC,chartsVersion:UC.CHARTS_VERSION})},moduleName:o.zsj.GridChartsModule,beans:[UC,XC,ZC],agStackComponents:[{componentName:"AgColorPicker",componentClass:Tw},{componentName:"AgAngleSelect",componentClass:sb}],dependantModules:[xw,g]},Fw=0,Gw={time:as,AgChart:sm},Bw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Vw=function(){return Vw=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Vw.apply(this,arguments)},jw=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ww=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadRowDataVersion=0,e}return Bw(e,t),e.prototype.init=function(t,e){this.params=e,this.comp=t,null!=e.pinned||(this.setAutoHeightClasses(),this.setupRefreshStrategy(),this.addThemeToDetailGrid(),this.createDetailGrid(),this.loadRowData(),this.addManagedListener(this.eventService,o.sVA.EVENT_FULL_WIDTH_ROW_FOCUSED,this.onFullWidthRowFocused.bind(this)))},e.prototype.onFullWidthRowFocused=function(t){var e=this.params,i={rowIndex:e.node.rowIndex,rowPinned:e.node.rowPinned},o={rowIndex:t.rowIndex,rowPinned:t.rowPinned};this.rowPositionUtils.sameRow(i,o)&&this.focusService.focusInto(this.comp.getGui(),t.fromBelow)},e.prototype.setAutoHeightClasses=function(){var t=this.gridOptionsService.get("detailRowAutoHeight"),e=t?"ag-details-row-auto-height":"ag-details-row-fixed-height",i=t?"ag-details-grid-auto-height":"ag-details-grid-fixed-height";this.comp.addOrRemoveCssClass(e,!0),this.comp.addOrRemoveDetailGridCssClass(i,!0)},e.prototype.setupRefreshStrategy=function(){var t=this.params.refreshStrategy;"everything"==t||"nothing"==t||"rows"==t?this.refreshStrategy=t:(null!=t&&console.warn("AG Grid: invalid cellRendererParams.refreshStrategy = '"+t+"' supplied, defaulting to refreshStrategy = 'rows'."),this.refreshStrategy="rows")},e.prototype.addThemeToDetailGrid=function(){var t=this.environment.getTheme().theme;t&&this.comp.addOrRemoveDetailGridCssClass(t,!0)},e.prototype.createDetailGrid=function(){if(o._.missing(this.params.detailGridOptions))console.warn("AG Grid: could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions");else{var t=this.gridOptionsService.get("detailRowAutoHeight"),e=Vw({},this.params.detailGridOptions);t&&(e.domLayout="autoHeight"),this.comp.setDetailGrid(e)}},e.prototype.registerDetailWithMaster=function(t,e){var i=this.params.node.id,o=this.params.api,n={id:i,api:t,columnApi:e},r=this.params.node;o.addDetailGridInfo(i,n),r.detailGridInfo=n,this.addDestroyFunc((function(){r.detailGridInfo===n&&(o.removeDetailGridInfo(i),r.detailGridInfo=null)}))},e.prototype.loadRowData=function(){var t=this;this.loadRowDataVersion++;var e=this.loadRowDataVersion,i=this.params.getDetailRowData;if(i){i({node:this.params.node,data:this.params.node.data,successCallback:function(i){t.loadRowDataVersion===e&&t.comp.setRowData(i)},context:this.gridOptionsService.context})}else console.warn("AG Grid: could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData")},e.prototype.refresh=function(){var t=!0;switch(this.refreshStrategy){case"nothing":return t;case"everything":return!1}return this.loadRowData(),t},jw([(0,o.dsm)("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),jw([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),e}(o.XQb),zw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Hw=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Uw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return zw(e,t),e.prototype.init=function(t){var e=this;this.params=t,this.selectAndSetTemplate();var i={addOrRemoveCssClass:function(t,i){return e.addOrRemoveCssClass(t,i)},addOrRemoveDetailGridCssClass:function(t,i){return e.eDetailGrid.classList.toggle(t,i)},setDetailGrid:function(t){return e.setDetailGrid(t)},setRowData:function(t){return e.setRowData(t)},getGui:function(){return e.eDetailGrid}};this.ctrl=this.createManagedBean(new Ww),this.ctrl.init(i,t)},e.prototype.refresh=function(){return this.ctrl&&this.ctrl.refresh()},e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.selectAndSetTemplate=function(){var t=this;if(this.params.pinned)this.setTemplate('<div class="ag-details-row"></div>');else{var i=function(){t.setTemplate(e.TEMPLATE)};if(o._.missing(this.params.template))i();else if("string"===typeof this.params.template)this.setTemplate(this.params.template);else if("function"===typeof this.params.template){var n=(0,this.params.template)(this.params);this.setTemplate(n)}else console.warn("AG Grid: detailCellRendererParams.template should be function or string"),i();null==this.eDetailGrid&&console.warn('AG Grid: reference to eDetailGrid was missing from the details template. Please add ref="eDetailGrid" to the template.')}},e.prototype.setDetailGrid=function(t){if(this.eDetailGrid){var e=this.context.getBean("agGridReact"),i=e?o._.cloneObject(e):void 0,n=this.context.getBean("frameworkComponentWrapper"),r=this.getFrameworkOverrides(),s=(0,o.Dvw)(this.eDetailGrid,t,{frameworkOverrides:r,providedBeanInstances:{agGridReact:i,frameworkComponentWrapper:n},modules:o.syG.__getGridRegisteredModules(this.params.api.getGridId())});this.detailApi=s,this.ctrl.registerDetailWithMaster(s,new o.jf3(s)),this.addDestroyFunc((function(){null===s||void 0===s||s.destroy()}))}},e.prototype.setRowData=function(t){this.detailApi&&this.detailApi.setGridOption("rowData",t)},e.TEMPLATE='<div class="ag-details-row" role="gridcell">\n            <div ref="eDetailGrid" class="ag-details-grid" role="presentation"></div>\n        </div>',Hw([(0,o.PIB)("eDetailGrid")],e.prototype,"eDetailGrid",void 0),e}(o.uAl),Kw={version:"31.0.0",moduleName:o.zsj.MasterDetailModule,beans:[],userComponents:[{componentName:"agDetailCellRenderer",componentClass:Uw}],controllers:[{controllerName:"detailCellRenderer",controllerClass:Ww}],dependantModules:[g]},Yw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Xw=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},$w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Yw(e,t),e.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},e.prototype.showMenuAfterMouseEvent=function(t,e,i){var o=this;this.showMenu(t,(function(n){var r=n.getGui();o.popupService.positionPopupUnderMouseEvent({type:"columnMenu",column:t,mouseEvent:e,ePopup:r}),i&&n.showTab(i)}),"columnMenu",i,void 0,e.target)},e.prototype.showMenuAfterButtonClick=function(t,e,i,o,n){var r=this,s=-1,a="left";this.gridOptionsService.get("enableRtl")&&(s=1,a="right"),this.showMenu(t,(function(n){var l=n.getGui();r.popupService.positionPopupByComponent({type:i,column:t,eventSource:e,ePopup:l,alignSide:a,nudgeX:9*s,nudgeY:-23,position:"under",keepWithinBounds:!0}),o&&n.showTab(o)}),i,o,n,e)},e.prototype.showMenu=function(t,e,i,n,r,s){var a=this,l=this.getMenuParams(t,r,s),c=l.menu,d=l.eMenuGui,u=l.currentHeaderPosition,h=l.currentColumnIndex,p=l.anchorToElement,f=[];f.push(this.getClosedCallback(t,c,u,h,s));var g=this.localeService.getLocaleTextFunc();this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(t){f.forEach((function(e){return e(t)}))},afterGuiAttached:function(t){return c.afterGuiAttached(Object.assign({},{container:i},t))},positionCallback:n?function(){return e(c)}:void 0,ariaLabel:g("ariaLabelColumnMenu","Column Menu")}),n||(c.showTabBasedOnPreviousSelection(),e(c));var v=this.popupService.setPopupPositionRelatedToElement(d,p);v&&this.addStopAnchoring(v,t,f),c.addEventListener(qw.EVENT_TAB_SELECTED,(function(t){a.lastSelectedTab=t.key})),t.setMenuVisible(!0,"contextMenu"),this.activeMenu=c,c.addEventListener(o.XQb.EVENT_DESTROYED,(function(){a.activeMenu===c&&(a.activeMenu=null)}))},e.prototype.addStopAnchoring=function(t,e,i){t.then((function(t){e.addEventListener("leftChanged",t),e.addEventListener("visibleChanged",t),i.push((function(){e.removeEventListener("leftChanged",t),e.removeEventListener("visibleChanged",t)}))}))},e.prototype.getClosedCallback=function(t,e,i,n,r){var s=this;return function(a){if(s.destroyBean(e),t.setMenuVisible(!1,"contextMenu"),a instanceof KeyboardEvent&&r)if(s.columnModel.getAllDisplayedColumns().some((function(e){return e===t}))&&o._.isVisible(r)){var l=s.focusService.findTabbableParent(r);l&&(t&&s.headerNavigationService.scrollToColumn(t),l.focus())}else if(i&&-1!==n){var c=s.columnModel.getAllDisplayedColumns(),d=c[n]||o._.last(c);d&&s.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:i.headerRowIndex,column:d}})}}},e.prototype.getMenuParams=function(t,e,i){var o=this.createBean(new qw(t,this.lastSelectedTab,e));return{menu:o,eMenuGui:o.getGui(),currentHeaderPosition:this.focusService.getFocusedHeader(),currentColumnIndex:this.columnModel.getAllDisplayedColumns().indexOf(t),anchorToElement:i||this.ctrlsService.getGridBodyCtrl().getGui()}},e.prototype.isMenuEnabled=function(t){var e=!this.filterManager.isFilterAllowed(t),i=t.getMenuTabs(qw.TABS_DEFAULT);return(e&&i.includes(qw.TAB_FILTER)?i.length-1:i.length)>0},Xw([(0,o.dsm)("popupService")],e.prototype,"popupService",void 0),Xw([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),Xw([(0,o.dsm)("headerNavigationService")],e.prototype,"headerNavigationService",void 0),Xw([(0,o.dsm)("ctrlsService")],e.prototype,"ctrlsService",void 0),Xw([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Xw([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),e=Xw([(0,o.dR4)("menuFactory")],e)}(o.XQb),qw=function(t){function e(i,o,n){var r=t.call(this)||this;return r.tabFactories={},r.includeChecks={},r.column=i,r.initialSelection=o,r.tabFactories[e.TAB_GENERAL]=r.createMainPanel.bind(r),r.tabFactories[e.TAB_FILTER]=r.createFilterPanel.bind(r),r.tabFactories[e.TAB_COLUMNS]=r.createColumnsPanel.bind(r),r.includeChecks[e.TAB_GENERAL]=function(){return!0},r.includeChecks[e.TAB_FILTER]=function(){return r.filterManager.isFilterAllowed(i)},r.includeChecks[e.TAB_COLUMNS]=function(){return!0},r.restrictTo=n,r}return Yw(e,t),e.prototype.init=function(){var t=this,e=this.getTabsToCreate().map((function(e){return t.createTab(e)}));this.tabbedLayout=new o.LfH({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc((function(){return t.destroyBean(t.tabbedLayout)}))},e.prototype.getTabsToCreate=function(){var t=this;return this.restrictTo?this.restrictTo:this.column.getMenuTabs(e.TABS_DEFAULT).filter((function(e){return t.isValidMenuTabItem(e)})).filter((function(e){return t.isNotSuppressed(e)})).filter((function(e){return t.isModuleLoaded(e)}))},e.prototype.isModuleLoaded=function(t){return t!==e.TAB_COLUMNS||o.syG.__isRegistered(o.zsj.ColumnsToolPanelModule,this.context.getGridId())},e.prototype.isValidMenuTabItem=function(t){var i=!0,o=e.TABS_DEFAULT;return null!=this.restrictTo&&(i=this.restrictTo.indexOf(t)>-1,o=this.restrictTo),(i=i&&e.TABS_DEFAULT.indexOf(t)>-1)||console.warn("AG Grid: Trying to render an invalid menu item '".concat(t,"'. Check that your 'menuTabs' contains one of [").concat(o,"]")),i},e.prototype.isNotSuppressed=function(t){return this.includeChecks[t]()},e.prototype.createTab=function(t){return this.tabFactories[t]()},e.prototype.showTabBasedOnPreviousSelection=function(){this.showTab(this.initialSelection)},e.prototype.showTab=function(t){this.tabItemColumns&&t===e.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&t===e.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&t===e.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()},e.prototype.onTabItemClicked=function(t){var i=null;switch(t.item){case this.tabItemColumns:i=e.TAB_COLUMNS;break;case this.tabItemFilter:i=e.TAB_FILTER;break;case this.tabItemGeneral:i=e.TAB_GENERAL}i&&this.activateTab(i)},e.prototype.activateTab=function(t){var i={type:e.EVENT_TAB_SELECTED,key:t};this.dispatchEvent(i)},e.prototype.getMenuItems=function(){var t,i=this.getDefaultMenuOptions(),n=this.gridOptionsService.getCallback("getMainMenuItems");return t=n?n({column:this.column,defaultItems:i}):i,o._.removeRepeatsFromArray(t,e.MENU_ITEM_SEPARATOR),t},e.prototype.getDefaultMenuOptions=function(){var t=[],i=!this.column.getColDef().lockPinned,o=this.columnModel.getRowGroupColumns().length,n=o>0,r=this.column.isAllowValue(),s=this.column.isAllowRowGroup(),a=this.column.isPrimary(),l=this.columnModel.isPivotMode(),c="clientSide"===this.rowModel.getType(),d=this.gridOptionsService.get("treeData"),u=a&&n&&r||!a;if(i&&t.push("pinSubMenu"),u&&t.push("valueAggSubMenu"),(i||u)&&t.push(e.MENU_ITEM_SEPARATOR),t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(e.MENU_ITEM_SEPARATOR),this.column.getColDef().showRowGroup)t.push("rowUnGroup");else if(s&&this.column.isPrimary()){if(this.column.isRowGroupActive())this.columnModel.isColumnGroupingLocked(this.column)||t.push("rowUnGroup");else t.push("rowGroup")}return t.push(e.MENU_ITEM_SEPARATOR),t.push("resetColumns"),c&&(d||o>(l?1:0))&&(t.push("expandAll"),t.push("contractAll")),t},e.prototype.createMainPanel=function(){this.mainMenuList=this.createManagedBean(new o.i9O);var t=this.getMenuItems(),i=this.menuItemMapper.mapWithStockItems(t,this.column);return this.mainMenuList.addMenuItems(i),this.mainMenuList.addEventListener(o.yuY.EVENT_MENU_ITEM_SELECTED,this.onHidePopup.bind(this)),this.tabItemGeneral={title:o._.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:e.TAB_GENERAL.replace("MenuTab",""),bodyPromise:o.oY$.resolve(this.mainMenuList.getGui()),name:e.TAB_GENERAL},this.tabItemGeneral},e.prototype.onHidePopup=function(t){var e;t&&t.event&&t.event instanceof KeyboardEvent&&(e=t.event),this.hidePopupFunc(e&&{keyboardEvent:e});var i=this.focusService.getFocusedCell(),o=this.gridOptionsService.getDocument();if(o.activeElement===o.body&&i){var n=i.rowIndex,r=i.rowPinned,s=i.column;this.focusService.setFocusedCell({rowIndex:n,column:s,rowPinned:r,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},e.prototype.createFilterPanel=function(){var t=this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU");if(!t)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:o._.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:e.TAB_FILTER.replace("MenuTab",""),bodyPromise:null===t||void 0===t?void 0:t.guiPromise,afterAttachedCallback:function(e){(null===t||void 0===t?void 0:t.filterPromise)&&t.filterPromise.then((function(t){t&&t.afterGuiAttached&&t.afterGuiAttached(e)}))},afterDetachedCallback:function(){var e;return null===(e=null===t||void 0===t?void 0:t.filterPromise)||void 0===e?void 0:e.then((function(t){var e;return null===(e=null===t||void 0===t?void 0:t.afterGuiDetached)||void 0===e?void 0:e.call(t)}))},name:e.TAB_FILTER},this.tabItemFilter},e.prototype.createColumnsPanel=function(){var t=document.createElement("div");t.classList.add("ag-menu-column-select-wrapper");var i=this.createManagedBean(new Ti),n=this.column.getColDef().columnsMenuParams;n||(n={});var r=n.contractColumnSelection,s=n.suppressColumnExpandAll,a=n.suppressColumnFilter,l=n.suppressColumnSelectAll,c=n.suppressSyncLayoutWithGrid,d=n.columnLayout;i.init(!1,{suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!r,suppressColumnExpandAll:!!s,suppressColumnFilter:!!a,suppressColumnSelectAll:!!l,suppressSyncLayoutWithGrid:!!d||!!c,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,onStateUpdated:function(){}},"columnMenu"),d&&i.setColumnLayout(d);var u=i.getGui();return u.classList.add("ag-menu-column-select"),t.appendChild(u),this.tabItemColumns={title:o._.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:e.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:o.oY$.resolve(t),name:e.TAB_COLUMNS},this.tabItemColumns},e.prototype.afterGuiAttached=function(t){var e=t.container,i=t.hidePopup;this.tabbedLayout.setAfterAttachedParams({container:e,hidePopup:i}),i&&(this.hidePopupFunc=i,this.addDestroyFunc(i))},e.prototype.getGui=function(){return this.tabbedLayout.getGui()},e.EVENT_TAB_SELECTED="tabSelected",e.TAB_FILTER="filterMenuTab",e.TAB_GENERAL="generalMenuTab",e.TAB_COLUMNS="columnsMenuTab",e.TABS_DEFAULT=[e.TAB_GENERAL,e.TAB_FILTER,e.TAB_COLUMNS],e.MENU_ITEM_SEPARATOR="separator",Xw([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),Xw([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),Xw([(0,o.dsm)("menuItemMapper")],e.prototype,"menuItemMapper",void 0),Xw([(0,o.dsm)("rowModel")],e.prototype,"rowModel",void 0),Xw([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),Xw([o.o7C],e.prototype,"init",null),e}(o.XQb),Zw=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),Jw=function(){return Jw=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},Jw.apply(this,arguments)},Qw=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tE="ag-context-menu-open",eE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Zw(e,t),e.prototype.hideActiveMenu=function(){this.destroyBean(this.activeMenu)},e.prototype.getMenuItems=function(t,e,i){var n=[];if(o._.exists(t)&&o.syG.__isRegistered(o.zsj.ClipboardModule,this.context.getGridId())&&e&&(this.gridOptionsService.get("suppressCutToClipboard")||n.push("cut"),n.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.get("enableCharts")&&o.syG.__isRegistered(o.zsj.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&n.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&n.push("chartRange")),o._.exists(t)){var r=!o.syG.__isRegistered(o.zsj.CsvExportModule,this.context.getGridId()),s=!o.syG.__isRegistered(o.zsj.ExcelExportModule,this.context.getGridId()),a=this.gridOptionsService.get("suppressExcelExport")||s,l=this.gridOptionsService.get("suppressCsvExport")||r;!o._.isIOSUserAgent()&&(!a||!l)&&n.push("export")}var c=this.gridOptionsService.getCallback("getContextMenuItems");return c?c({node:t,column:e,value:i,defaultItems:n.length?n:void 0}):n},e.prototype.onContextMenu=function(t,e,i,o,n,r){if((this.gridOptionsService.get("allowContextMenuWithControlKey")||!t||!t.ctrlKey&&!t.metaKey)&&(t&&this.blockMiddleClickScrollsIfNeeded(t),!this.gridOptionsService.get("suppressContextMenu"))){var s=t||e.touches[0];if(this.showMenu(i,o,n,s,r))(t||e).preventDefault()}},e.prototype.blockMiddleClickScrollsIfNeeded=function(t){var e=this.gridOptionsService,i=t.which;e.get("suppressMiddleClickScrolls")&&2===i&&t.preventDefault()},e.prototype.showMenu=function(t,e,i,n,r){var s=this,a=this.getMenuItems(t,e,i),l=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===a||o._.missingOrEmpty(a))return!1;var c=new iE(a);this.createBean(c);var d=c.getGui(),u={column:e,rowNode:t,type:"contextMenu",mouseEvent:n,ePopup:d,nudgeY:1},h=this.localeService.getLocaleTextFunc(),p=this.popupService.addPopup({modal:!0,eChild:d,closeOnEsc:!0,closedCallback:function(){l.classList.remove(tE),s.destroyBean(c)},click:n,positionCallback:function(){var t=s.gridOptionsService.get("enableRtl");s.popupService.positionPopupUnderMouseEvent(Jw(Jw({},u),{nudgeX:t?-1*(d.offsetWidth+1):1}))},anchorToElement:r,ariaLabel:h("ariaLabelContextMenu","Context Menu")});return p&&(l.classList.add(tE),c.afterGuiAttached({container:"contextMenu",hidePopup:p.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=c,c.addEventListener(o.XQb.EVENT_DESTROYED,(function(){s.activeMenu===c&&(s.activeMenu=null)})),p&&c.addEventListener(o.yuY.EVENT_MENU_ITEM_SELECTED,p.hideFunc),!0},Qw([(0,o.dsm)("popupService")],e.prototype,"popupService",void 0),Qw([(0,o.Xx1)("rangeService")],e.prototype,"rangeService",void 0),Qw([(0,o.dsm)("ctrlsService")],e.prototype,"ctrlsService",void 0),Qw([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),e=Qw([(0,o.dR4)("contextMenuFactory")],e)}(o.XQb),iE=function(t){function e(e){var i=t.call(this,'<div class="'.concat("ag-menu",'" role="presentation"></div>'))||this;return i.menuList=null,i.focusedCell=null,i.menuItems=e,i}return Zw(e,t),e.prototype.addMenuItems=function(){var t=this,e=this.createManagedBean(new o.i9O),i=this.menuItemMapper.mapWithStockItems(this.menuItems,null);e.addMenuItems(i),this.appendChild(e),this.menuList=e,e.addEventListener(o.yuY.EVENT_MENU_ITEM_SELECTED,(function(e){return t.dispatchEvent(e)}))},e.prototype.afterGuiAttached=function(t){t.hidePopup&&this.addDestroyFunc(t.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())},e.prototype.restoreFocusedCell=function(){var t=this.focusService.getFocusedCell();if(t&&this.focusedCell&&this.cellPositionUtils.equals(t,this.focusedCell)){var e=this.focusedCell,i=e.rowIndex,o=e.rowPinned,n=e.column,r=this.gridOptionsService.getDocument();r.activeElement===r.body&&this.focusService.setFocusedCell({rowIndex:i,column:n,rowPinned:o,forceBrowserFocus:!0})}},e.prototype.destroy=function(){this.restoreFocusedCell(),t.prototype.destroy.call(this)},Qw([(0,o.dsm)("menuItemMapper")],e.prototype,"menuItemMapper",void 0),Qw([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),Qw([(0,o.dsm)("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),Qw([o.o7C],e.prototype,"addMenuItems",null),e}(o.uAl),oE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),nE=function(){return nE=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},nE.apply(this,arguments)},rE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},sE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return oE(e,t),e.prototype.mapWithStockItems=function(t,e){var i=this;if(!t)return[];var o=[];return t.forEach((function(t){var n;if(n="string"===typeof t?i.getStockMenuItem(t,e):nE({},t)){var r=n,s=r.subMenu;s&&s instanceof Array&&(r.subMenu=i.mapWithStockItems(s,e)),null!=n&&o.push(n)}})),o},e.prototype.getStockMenuItem=function(t,e){var i,n=this,r=this.localeService.getLocaleTextFunc(),s=this.gridOptionsService.get("skipHeaderOnAutoSize");switch(t){case"pinSubMenu":return{name:r("pinColumn","Pin Column"),icon:o._.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:r("pinLeft","Pin Left"),action:function(){return n.columnModel.setColumnPinned(e,"left","contextMenu")},checked:!!e&&e.isPinnedLeft()};case"pinRight":return{name:r("pinRight","Pin Right"),action:function(){return n.columnModel.setColumnPinned(e,"right","contextMenu")},checked:!!e&&e.isPinnedRight()};case"clearPinned":return{name:r("noPin","No Pin"),action:function(){return n.columnModel.setColumnPinned(e,null,"contextMenu")},checked:!!e&&!e.isPinned()};case"valueAggSubMenu":return o.syG.__assertRegistered(o.zsj.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())&&((null===e||void 0===e?void 0:e.isPrimary())||(null===e||void 0===e?void 0:e.getColDef().pivotValueColumn))?{name:r("valueAggregation","Value Aggregation"),icon:o._.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(e)}:null;case"autoSizeThis":return{name:r("autosizeThiscolumn","Autosize This Column"),action:function(){return n.columnModel.autoSizeColumn(e,s,"contextMenu")}};case"autoSizeAll":return{name:r("autosizeAllColumns","Autosize All Columns"),action:function(){return n.columnModel.autoSizeAllColumns(s,"contextMenu")}};case"rowGroup":return{name:r("groupBy","Group by")+" "+o._.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:(null===e||void 0===e?void 0:e.isRowGroupActive())||!(null===e||void 0===e?void 0:e.getColDef().enableRowGroup),action:function(){return n.columnModel.addRowGroupColumn(e,"contextMenu")},icon:o._.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":var a=o._.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),l=null===e||void 0===e?void 0:e.getColDef().showRowGroup,c=this.gridOptionsService.get("groupLockGroupColumns");if(!0===l)return{name:r("ungroupAll","Un-Group All"),disabled:-1===c||c>=this.columnModel.getRowGroupColumns().length,action:function(){return n.columnModel.setRowGroupColumns(n.columnModel.getRowGroupColumns().slice(0,c),"contextMenu")},icon:a};if("string"===typeof l){var d=this.columnModel.getPrimaryColumn(l),u=null!=d?o._.escapeString(this.columnModel.getDisplayNameForColumn(d,"header")):l;return{name:r("ungroupBy","Un-Group by")+" "+u,disabled:null!=d&&this.columnModel.isColumnGroupingLocked(d),action:function(){return n.columnModel.removeRowGroupColumn(l,"contextMenu")},icon:a}}return{name:r("ungroupBy","Un-Group by")+" "+o._.escapeString(this.columnModel.getDisplayNameForColumn(e,"header")),disabled:!(null===e||void 0===e?void 0:e.isRowGroupActive())||!(null===e||void 0===e?void 0:e.getColDef().enableRowGroup)||this.columnModel.isColumnGroupingLocked(e),action:function(){return n.columnModel.removeRowGroupColumn(e,"contextMenu")},icon:a};case"resetColumns":return{name:r("resetColumns","Reset Columns"),action:function(){return n.columnModel.resetColumnState("contextMenu")}};case"expandAll":return{name:r("expandAll","Expand All Row Groups"),action:function(){return n.gridApi.expandAll()}};case"contractAll":return{name:r("collapseAll","Collapse All Row Groups"),action:function(){return n.gridApi.collapseAll()}};case"copy":return o.syG.__assertRegistered(o.zsj.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:r("copy","Copy"),shortcut:r("ctrlC","Ctrl+C"),icon:o._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard()}}:null;case"copyWithHeaders":return o.syG.__assertRegistered(o.zsj.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:r("copyWithHeaders","Copy with Headers"),icon:o._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0})}}:null;case"copyWithGroupHeaders":return o.syG.__assertRegistered(o.zsj.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:r("copyWithGroupHeaders","Copy with Group Headers"),icon:o._.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:function(){return n.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}}:null;case"cut":if(o.syG.__assertRegistered(o.zsj.ClipboardModule,"Cut from Menu",this.context.getGridId())){var h=this.focusService.getFocusedCell(),p=h?this.rowPositionUtils.getRowNode(h):null,f=!!p&&(null===h||void 0===h?void 0:h.column.isCellEditable(p));return{name:r("cut","Cut"),shortcut:r("ctrlX","Ctrl+X"),icon:o._.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!f||this.gridOptionsService.get("suppressCutToClipboard"),action:function(){return n.clipboardService.cutToClipboard(void 0,"contextMenu")}}}return null;case"paste":return o.syG.__assertRegistered(o.zsj.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:r("paste","Paste"),shortcut:r("ctrlV","Ctrl+V"),disabled:!0,icon:o._.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:function(){return n.clipboardService.pasteFromClipboard()}}:null;case"export":var g=[],v=o.syG.__isRegistered(o.zsj.CsvExportModule,this.context.getGridId()),y=o.syG.__isRegistered(o.zsj.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.get("suppressCsvExport")&&v&&g.push("csvExport"),!this.gridOptionsService.get("suppressExcelExport")&&y&&g.push("excelExport"),{name:r("export","Export"),subMenu:g,icon:o._.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:r("csvExport","CSV Export"),icon:o._.createIconNoSpan("csvExport",this.gridOptionsService,null),action:function(){return n.gridApi.exportDataAsCsv({})}};case"excelExport":return{name:r("excelExport","Excel Export"),icon:o._.createIconNoSpan("excelExport",this.gridOptionsService,null),action:function(){return n.gridApi.exportDataAsExcel()}};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(i=this.chartMenuItemMapper.getChartItems(t))&&void 0!==i?i:null;default:return console.warn("AG Grid: unknown menu item type ".concat(t)),null}},e.prototype.createAggregationSubMenu=function(t){var e,i=this,n=this.localeService.getLocaleTextFunc();if(t.isPrimary())e=t;else{var r=t.getColDef().pivotValueColumn;e=o._.exists(r)?r:void 0}var s=[];if(e){var a=e.isValueActive(),l=this.aggFuncService.getFuncNames(e);s.push({name:n("noAggregation","None"),action:function(){i.columnModel.removeValueColumn(e,"contextMenu"),i.columnModel.setColumnAggFunc(e,void 0,"contextMenu")},checked:!a}),l.forEach((function(t){s.push({name:n(t,i.aggFuncService.getDefaultFuncLabel(t)),action:function(){i.columnModel.setColumnAggFunc(e,t,"contextMenu"),i.columnModel.addValueColumn(e,"contextMenu")},checked:a&&e.getAggFunc()===t})}))}return s},rE([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),rE([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),rE([(0,o.Xx1)("clipboardService")],e.prototype,"clipboardService",void 0),rE([(0,o.Xx1)("aggFuncService")],e.prototype,"aggFuncService",void 0),rE([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),rE([(0,o.dsm)("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),rE([(0,o.dsm)("chartMenuItemMapper")],e.prototype,"chartMenuItemMapper",void 0),e=rE([(0,o.dR4)("menuItemMapper")],e)}(o.XQb),aE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),lE=function(){return lE=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},lE.apply(this,arguments)},cE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},dE=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},uE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var i;return aE(e,t),i=e,e.prototype.getChartItems=function(t){var e,n;if(this.chartService){var r="pivotChart"===t?new hE(this.gridOptionsService,this.chartService,this.localeService):new pE(this.gridOptionsService,this.chartService,this.localeService),s=r.getMenuItem(),a=null===(n=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.settingsPanel)||void 0===n?void 0:n.chartGroupsDef;return a&&(s=i.filterAndOrderChartMenu(s,a,r.getConfigLookup())),this.cleanInternals(s)}o.syG.__assertRegistered(o.zsj.GridChartsModule,'the Context Menu key "'.concat(t,'"'),this.context.getGridId())},e.prototype.cleanInternals=function(t){if(!t)return t;var e=function(t){var i;return null===t||void 0===t||delete t._key,null===(i=null===t||void 0===t?void 0:t.subMenu)||void 0===i||i.forEach((function(t){return e(t)})),t};return e(t)},e.buildLookup=function(t){var e={},i=function(t){e[t._key]=t,t.subMenu&&t.subMenu.forEach((function(t){return i(t)}))};return i(t),e},e.filterAndOrderChartMenu=function(t,e,i){var n,r=this.buildLookup(t),s=lE(lE({},t),{subMenu:[]});if(Object.entries(e).forEach((function(t){var e,n,a=dE(t,2),l=a[0],c=a[1],d=i[l];if(void 0!=d){var u=r[d._key];if(u)if(u.subMenu){var h=c.map((function(t){var e=d[t];if(void 0!=e)return r[e];o._.warnOnce("invalid chartGroupsDef config '".concat(l,".").concat(t,"'"))})).filter((function(t){return void 0!==t}));h.length>0&&(u.subMenu=h,null===(e=s.subMenu)||void 0===e||e.push(u))}else null===(n=s.subMenu)||void 0===n||n.push(u)}else o._.warnOnce("invalid chartGroupsDef config '".concat(l,"'"))})),0!=(null===(n=s.subMenu)||void 0===n?void 0:n.length))return s},cE([(0,o.Xx1)("chartService")],e.prototype,"chartService",void 0),e=i=cE([(0,o.dR4)("chartMenuItemMapper")],e)}(o.XQb),hE=function(){function t(t,e,i){this.gridOptionsService=t,this.chartService=e,this.localeService=i}return t.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),i=function(i,o,n,r){return{name:e(i,o),action:function(){return t.chartService.createPivotChart({chartType:n})},_key:r}};return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[i("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),i("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),i("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[i("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),i("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),i("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[i("pie","Pie&lrm;","pie","pivotPie"),i("doughnut","Doughnut&lrm;","doughnut","pivotDoughnut")]},i("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter&lrm;","scatter","pivotScatter"),i("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[i("area","Area&lrm;","area","pivotArea"),i("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),i("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},i("histogramChart","Histogram&lrm;","histogram","pivotHistogramChart"),{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),i("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:o._.createIconNoSpan("chart",this.gridOptionsService,void 0)}},t.prototype.getConfigLookup=function(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",doughnut:"pivotDoughnut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},histogramGroup:{_key:"pivotHistogramChart",histogram:"pivotHistogramChart"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:""}}},t}(),pE=function(){function t(t,e,i){this.gridOptionsService=t,this.chartService=e,this.localeService=i}return t.prototype.getMenuItem=function(){var t=this,e=this.localeService.getLocaleTextFunc(),i=function(i,o,n,r){return{name:e(i,o),action:function(){return t.chartService.createChartFromCurrentRange(n)},_key:r}};return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[i("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),i("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),i("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[i("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),i("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),i("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[i("pie","Pie&lrm;","pie","rangePie"),i("doughnut","Doughnut&lrm;","doughnut","rangeDoughnut")],_key:"rangePieChart"},i("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[i("scatter","Scatter&lrm;","scatter","rangeScatter"),i("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[i("area","Area&lrm;","area","rangeArea"),i("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),i("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},i("histogramChart","Histogram&lrm;","histogram","rangeHistogramChart"),{name:e("combinationChart","Combination"),subMenu:[i("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),i("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:o._.createIconNoSpan("chart",this.gridOptionsService,void 0)}},t.prototype.getConfigLookup=function(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",doughnut:"rangeDoughnut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},histogramGroup:{_key:"rangeHistogramChart",histogram:"rangeHistogramChart"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:""}}},t}(),fE={version:"31.0.0",moduleName:o.zsj.MenuModule,beans:[$w,eE,sE,uE],dependantModules:[g]},gE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),vE=function(){return vE=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},vE.apply(this,arguments)},yE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mE=function(t){function e(){var e=t.call(this,'<div class="ag-multi-filter ag-menu-list-compact"></div>')||this;return e.filterDefs=[],e.filters=[],e.guiDestroyFuncs=[],e.activeFilterIndices=[],e.lastActivatedMenuItem=null,e.afterFiltersReadyFuncs=[],e}return gE(e,t),e.prototype.postConstruct=function(){var t=this;this.initialiseTabGuard({onFocusIn:function(e){return t.onFocusIn(e)}})},e.getFilterDefs=function(t){var e=t.filters;return e&&e.length>0?e:[{filter:"agTextColumnFilter"},{filter:"agSetColumnFilter"}]},e.prototype.init=function(t){var i=this;this.params=t,this.filterDefs=e.getFilterDefs(t);var n=t.column,r=t.filterChangedCallback;this.column=n,this.filterChangedCallback=r;var s=[];return this.filterDefs.forEach((function(t,e){var o=i.createFilter(t,e);null!=o&&s.push(o)})),o.oY$.all(s).then((function(t){i.filters=t,i.refreshGui("columnMenu"),i.afterFiltersReadyFuncs.forEach((function(t){return t()})),i.afterFiltersReadyFuncs.length=0}))},e.prototype.refreshGui=function(t){var e=this;t!==this.lastOpenedInContainer&&(this.removeAllChildrenExceptTabGuards(),this.destroyChildren(),this.filters.forEach((function(i,n){n>0&&e.appendChild(o._.loadTemplate('<div class="ag-filter-separator"></div>'));var r,s=e.filterDefs[n],a=e.getFilterTitle(i,s);if("subMenu"===s.display&&"toolPanel"!==t)r=e.insertFilterMenu(i,a).getGui();else if("subMenu"===s.display||"accordion"===s.display){r=e.insertFilterGroup(i,a).getGui()}else r=i.getGui();e.appendChild(r)})),this.lastOpenedInContainer=t)},e.prototype.getFilterTitle=function(t,e){if(null!=e.title)return e.title;var i=t;return"function"===typeof i.getFilterTitle?i.getFilterTitle():"Filter"},e.prototype.destroyChildren=function(){this.guiDestroyFuncs.forEach((function(t){return t()})),this.guiDestroyFuncs.length=0},e.prototype.insertFilterMenu=function(t,e){var i=this,n=this.createBean(new o.yuY({name:e,subMenu:t,cssClasses:["ag-multi-filter-menu-item"],isCompact:!0,isAnotherSubMenuOpen:function(){return!1}}));return n.setParentComponent(this),this.guiDestroyFuncs.push((function(){return i.destroyBean(n)})),this.addManagedListener(n,o.yuY.EVENT_MENU_ITEM_ACTIVATED,(function(t){i.lastActivatedMenuItem&&i.lastActivatedMenuItem!==t.menuItem&&i.lastActivatedMenuItem.deactivate(),i.lastActivatedMenuItem=t.menuItem})),n.addGuiEventListener("focusin",(function(){return n.activate()})),n.addGuiEventListener("focusout",(function(){n.isSubMenuOpen()||n.deactivate()})),n},e.prototype.insertFilterGroup=function(t,e){var i=this,n=this.createBean(new o.Pk_({title:e,cssIdentifier:"multi-filter"}));return this.guiDestroyFuncs.push((function(){return i.destroyBean(n)})),n.addItem(t.getGui()),n.toggleGroupExpand(!1),t.afterGuiAttached&&n.addManagedListener(n,o.Pk_.EVENT_EXPANDED,(function(){return t.afterGuiAttached({container:i.lastOpenedInContainer,suppressFocus:!0,hidePopup:i.hidePopup})})),n},e.prototype.isFilterActive=function(){return this.filters.some((function(t){return t.isFilterActive()}))},e.prototype.getLastActiveFilterIndex=function(){return this.activeFilterIndices.length>0?this.activeFilterIndices[this.activeFilterIndices.length-1]:null},e.prototype.doesFilterPass=function(t,e){var i=!0;return this.filters.forEach((function(o){i&&o!==e&&o.isFilterActive()&&(i=o.doesFilterPass(t))})),i},e.prototype.getFilterType=function(){return"multi"},e.prototype.getModelFromUi=function(){return{filterType:this.getFilterType(),filterModels:this.filters.map((function(t){var e=t;return"function"===typeof e.getModelFromUi?e.getModelFromUi():null}))}},e.prototype.getModel=function(){return this.isFilterActive()?{filterType:this.getFilterType(),filterModels:this.filters.map((function(t){return t.isFilterActive()?t.getModel():null}))}:null},e.prototype.setModel=function(t){var e=this,i=function(t,e){return new o.oY$((function(i){var o=t.setModel(e);o?o.then((function(){return i()})):i()}))},n=[];return null==t?n=this.filters.map((function(t,o){return i(t,null).then((function(){e.updateActiveList(o)}))})):this.filters.forEach((function(o,r){var s=t.filterModels.length>r?t.filterModels[r]:null,a=i(o,s).then((function(){e.updateActiveList(r)}));n.push(a)})),o.oY$.all(n).then((function(){}))},e.prototype.applyModel=function(t){void 0===t&&(t="api");var e=!1;return this.filters.forEach((function(i){i instanceof o.Q5x&&(e=i.applyModel(t)||e)})),e},e.prototype.getChildFilterInstance=function(t){return this.filters[t]},e.prototype.afterGuiAttached=function(t){t?(this.hidePopup=t.hidePopup,this.refreshGui(t.container)):this.hidePopup=void 0;var e=this.params.filters,i=e&&e.some((function(t){return t.display&&"inline"!==t.display}));this.executeFunctionIfExists("afterGuiAttached",vE(vE({},t||{}),{suppressFocus:i}));var o=this.gridOptionsService.getDocument(),n=o.activeElement;i&&(n===o.body||this.getGui().contains(n))&&this.forceFocusOutOfContainer(!0)},e.prototype.afterGuiDetached=function(){this.executeFunctionIfExists("afterGuiDetached")},e.prototype.onAnyFilterChanged=function(){this.executeFunctionIfExists("onAnyFilterChanged")},e.prototype.onNewRowsLoaded=function(){this.executeFunctionIfExists("onNewRowsLoaded")},e.prototype.destroy=function(){var e=this;this.filters.forEach((function(t){t.setModel(null),e.destroyBean(t)})),this.filters.length=0,this.destroyChildren(),this.hidePopup=void 0,t.prototype.destroy.call(this)},e.prototype.executeFunctionIfExists=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];o._.forEachReverse(this.filters,(function(i){var o=i[t];"function"===typeof o&&o.apply(i,e)}))},e.prototype.createFilter=function(t,e){var i,o=this,n=this.params,r=n.filterModifiedCallback,s=n.doesRowPassOtherFilter,a=vE(vE({},this.filterManager.createFilterParams(this.column,this.column.getColDef())),{filterModifiedCallback:r,filterChangedCallback:function(t){o.executeWhenAllFiltersReady((function(){return o.filterChanged(e,t)}))},doesRowPassOtherFilter:function(t){return s(t)&&o.doesFilterPass({node:t,data:t.data},i)}}),l=this.userComponentFactory.getFilterDetails(t,a,"agTextColumnFilter");if(!l)return null;var c=l.newAgStackInstance();return c&&c.then((function(t){return i=t})),c},e.prototype.executeWhenAllFiltersReady=function(t){this.filters&&this.filters.length>0?t():this.afterFiltersReadyFuncs.push(t)},e.prototype.updateActiveList=function(t){var e=this.filters[t];o._.removeFromArray(this.activeFilterIndices,t),e.isFilterActive()&&this.activeFilterIndices.push(t)},e.prototype.filterChanged=function(t,e){this.updateActiveList(t),this.filterChangedCallback(e);var i=this.filters[t];this.filters.forEach((function(t){t!==i&&"function"===typeof t.onAnyFilterChanged&&t.onAnyFilterChanged()}))},e.prototype.onFocusIn=function(t){return null==this.lastActivatedMenuItem||this.lastActivatedMenuItem.getGui().contains(t.target)||(this.lastActivatedMenuItem.deactivate(),this.lastActivatedMenuItem=null),!0},e.prototype.getModelAsString=function(t){var e,i,o,n;if(!this.filters||!(null===(e=null===t||void 0===t?void 0:t.filterModels)||void 0===e?void 0:e.length))return"";var r=null!==(i=this.getLastActiveFilterIndex())&&void 0!==i?i:0,s=this.filters[r];return null!==(n=null===(o=s.getModelAsString)||void 0===o?void 0:o.call(s,t.filterModels[r]))&&void 0!==n?n:""},yE([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),yE([(0,o.dsm)("userComponentFactory")],e.prototype,"userComponentFactory",void 0),yE([o.o7C],e.prototype,"postConstruct",null),e}(o.aJZ),bE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),SE=function(){return SE=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},SE.apply(this,arguments)},xE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},CE=function(t){function e(){var e=t.call(this,'<div class="ag-multi-floating-filter ag-floating-filter-input"></div>')||this;return e.floatingFilters=[],e.compDetailsList=[],e}return bE(e,t),e.prototype.init=function(t){this.params=t;var e=this.getCompDetailsList(t).compDetailsList;return this.setParams(e)},e.prototype.setParams=function(t){var e=this,i=[];return t.forEach((function(t){var o=null===t||void 0===t?void 0:t.newAgStackInstance();null!=o&&(e.compDetailsList.push(t),i.push(o))})),o.oY$.all(i).then((function(t){t.forEach((function(t,i){e.floatingFilters.push(t);var n=t.getGui();e.appendChild(n),i>0&&o._.setDisplayed(n,!1)}))}))},e.prototype.onParamsUpdated=function(t){var e=this;this.params=t;var i=this.getCompDetailsList(t),n=i.compDetailsList,r=i.floatingFilterParamsList,s=n.length===this.compDetailsList.length&&n.every((function(t,i){return!e.filterManager.areFilterCompsDifferent(e.compDetailsList[i],t)}));s?r.forEach((function(t,i){var o,n=e.floatingFilters[i];null===(o=n.onParamsUpdated)||void 0===o||o.call(n,t)})):(o._.clearElement(this.getGui()),this.destroyBeans(this.floatingFilters),this.floatingFilters=[],this.compDetailsList=[],this.setParams(n))},e.prototype.getCompDetailsList=function(t){var e=this,i=[],n=[],r=t.filterParams;return mE.getFilterDefs(r).forEach((function(r,s){var a=SE(SE({},t),{parentFilterInstance:function(t){e.parentMultiFilterInstance((function(e){var i=e.getChildFilterInstance(s);null!=i&&t(i)}))}});o._.mergeDeep(a.filterParams,r.filterParams);var l=e.getCompDetails(r,a);l&&(i.push(l),n.push(a))})),{compDetailsList:i,floatingFilterParamsList:n}},e.prototype.onParentModelChanged=function(t,e){var i=this;e&&e.afterFloatingFilter||this.parentMultiFilterInstance((function(n){if(null==t)i.floatingFilters.forEach((function(t,i){t.onParentModelChanged(null,e),o._.setDisplayed(t.getGui(),0===i)}));else{var r=n.getLastActiveFilterIndex();i.floatingFilters.forEach((function(i,n){var s=t.filterModels.length>n?t.filterModels[n]:null;i.onParentModelChanged(s,e);var a=null==r?0===n:n===r;o._.setDisplayed(i.getGui(),a)}))}}))},e.prototype.destroy=function(){this.destroyBeans(this.floatingFilters),this.floatingFilters.length=0,t.prototype.destroy.call(this)},e.prototype.getCompDetails=function(t,e){var i,o=this,n=null!==(i=this.userComponentFactory.getDefaultFloatingFilterType(t,(function(){return o.filterManager.getDefaultFloatingFilter(o.params.column)})))&&void 0!==i?i:"agReadOnlyFloatingFilter";return this.userComponentFactory.getFloatingFilterCompDetails(t,e,n)},e.prototype.parentMultiFilterInstance=function(t){this.params.parentFilterInstance((function(e){if(!(e instanceof mE))throw new Error("AG Grid - MultiFloatingFilterComp expects MultiFilter as its parent");t(e)}))},xE([(0,o.dsm)("userComponentFactory")],e.prototype,"userComponentFactory",void 0),xE([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),e}(o.uAl),wE={version:"31.0.0",moduleName:o.zsj.MultiFilterModule,beans:[],userComponents:[{componentName:"agMultiColumnFilter",componentClass:mE},{componentName:"agMultiColumnFloatingFilter",componentClass:CE}],dependantModules:[g]},EE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),OE=function(t){function e(){return t.call(this,'<div class="ag-cell-edit-wrapper"></div>')||this}return EE(e,t),e.prototype.init=function(t){var e=this;this.params=t;var i=t.cellStartedEdit,n=t.cellHeight,r=t.values;o._.missing(r)&&console.warn("AG Grid: agRichSelectCellEditor requires cellEditorParams.values to be set");var s=this.buildRichSelectParams(),a=s.params,l=s.valuesPromise;this.richSelect=this.createManagedBean(new o.pNP(a)),this.richSelect.addCssClass("ag-cell-editor"),this.appendChild(this.richSelect),l&&l.then((function(t){e.richSelect.setValueList({valueList:t,refresh:!0});var i=e.getSearchStringCallback(t);i&&e.richSelect.setSearchStringCreator(i)})),this.addManagedListener(this.richSelect,o.sVA.EVENT_FIELD_PICKER_VALUE_SELECTED,this.onEditorPickerValueSelected.bind(this)),this.addManagedListener(this.richSelect.getGui(),"focusout",this.onEditorFocusOut.bind(this)),this.focusAfterAttached=i,o._.exists(n)&&this.richSelect.setRowHeight(n)},e.prototype.onEditorPickerValueSelected=function(t){this.params.stopEditing(!t.fromEnterKey)},e.prototype.onEditorFocusOut=function(t){this.richSelect.getGui().contains(t.relatedTarget)||this.params.stopEditing(!0)},e.prototype.buildRichSelectParams=function(){var t,e,i=this.params,o=i.cellRenderer,n=i.value,r=i.values,s=i.formatValue,a=i.searchDebounceDelay,l=i.valueListGap,c=i.valueListMaxHeight,d=i.valueListMaxWidth,u=i.allowTyping,h=i.filterList,p=i.searchType,f=i.highlightMatch,g=i.valuePlaceholder,v=i.eventKey,y={value:n,cellRenderer:o,searchDebounceDelay:a,valueFormatter:s,pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"virtual-list",pickerGap:l,allowTyping:u,filterList:h,searchType:p,highlightMatch:f,maxPickerHeight:c,maxPickerWidth:d,placeholder:g,initialInputValue:1===(null===v||void 0===v?void 0:v.length)?v:void 0};return t="function"===typeof r?r(this.params):null!==r&&void 0!==r?r:[],Array.isArray(t)?(y.valueList=t,y.searchStringCreator=this.getSearchStringCallback(t)):e=t,{params:y,valuesPromise:e}},e.prototype.getSearchStringCallback=function(t){var e=this,i=this.params.colDef;if("object"===typeof t[0]&&i.keyCreator)return function(t){return t.map((function(t){var o={value:t,colDef:e.params.colDef,column:e.params.column,node:e.params.node,data:e.params.data,api:e.gridOptionsService.api,columnApi:e.gridOptionsService.columnApi,context:e.gridOptionsService.context};return i.keyCreator(o)}))}},e.prototype.afterGuiAttached=function(){var t=this,e=this.focusAfterAttached,i=this.params;setTimeout((function(){if(t.isAlive()){if(e){var o=t.richSelect.getFocusableElement();o.focus();var n=t.params,r=n.allowTyping,s=n.eventKey;!r||s&&1===s.length||o.select()}t.richSelect.showPicker();var a=i.eventKey;a&&1===(null===a||void 0===a?void 0:a.length)&&t.richSelect.searchTextFromString(a)}}))},e.prototype.getValue=function(){return this.richSelect.getValue()},e.prototype.isPopup=function(){return!1},e}(o.yGC),DE={version:"31.0.0",moduleName:o.zsj.RichSelectModule,beans:[],userComponents:[{componentName:"agRichSelect",componentClass:OE},{componentName:"agRichSelectCellEditor",componentClass:OE}],dependantModules:[g]},AE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),TE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ME=function(t){function e(e,i,n){var r=t.call(this,0)||this;return r.nodeIdSequence=new o.RI_,r.info={},r.ssrmParams=e,r.parentRowNode=n,r.level=n.level+1,r.groupLevel=e.rowGroupCols?r.level<e.rowGroupCols.length:void 0,r.leafGroup=!!e.rowGroupCols&&r.level===e.rowGroupCols.length-1,r}return AE(e,t),e.prototype.postConstruct=function(){var t=this;if(this.usingTreeData=this.gridOptionsService.get("treeData"),this.nodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.parentRowNode),!this.usingTreeData&&this.groupLevel){var e=this.ssrmParams.rowGroupCols[this.level];this.groupField=e.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}var i=1,n=-1===this.parentRowNode.level,r=this.storeUtils.getServerSideInitialRowCount();n&&null!=r&&(i=r),this.initialiseRowNodes(i),this.rowNodeBlockLoader.addBlock(this),this.addDestroyFunc((function(){return t.rowNodeBlockLoader.removeBlock(t)})),this.postSortFunc=this.gridOptionsService.getCallback("postSortRows"),null!=r&&this.eventService.dispatchEventOnce({type:o.sVA.EVENT_ROW_COUNT_READY})},e.prototype.destroyRowNodes=function(){this.blockUtils.destroyRowNodes(this.allRowNodes),this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={}},e.prototype.initialiseRowNodes=function(t,e){void 0===e&&(e=!1),this.destroyRowNodes();for(var i=0;i<t;i++){var o=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});e&&(o.failedLoad=!0),this.allRowNodes.push(o),this.nodesAfterFilter.push(o),this.nodesAfterSort.push(o)}},e.prototype.getBlockStateJson=function(){return{id:this.nodeIdPrefix?this.nodeIdPrefix:"",state:this.getState()}},e.prototype.loadFromDatasource=function(){this.storeUtils.loadFromDatasource({startRow:void 0,endRow:void 0,parentBlock:this,parentNode:this.parentRowNode,storeParams:this.ssrmParams,success:this.success.bind(this,this.getVersion()),fail:this.pageLoadFailed.bind(this,this.getVersion())})},e.prototype.getStartRow=function(){return 0},e.prototype.getEndRow=function(){return this.nodesAfterSort.length},e.prototype.createDataNode=function(t,e){var i=this.blockUtils.createRowNode({field:this.groupField,group:this.groupLevel,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn});null!=e?o._.insertIntoArray(this.allRowNodes,i,e):this.allRowNodes.push(i);var n=this.prefixId(this.nodeIdSequence.next());return this.blockUtils.setDataIntoRowNode(i,t,n,void 0),this.nodeManager.addRowNode(i),this.blockUtils.checkOpenByDefault(i),this.allNodesMap[i.id]=i,i},e.prototype.prefixId=function(t){return this.nodeIdPrefix?this.nodeIdPrefix+"-"+t:t.toString()},e.prototype.processServerFail=function(){this.initialiseRowNodes(1,!0),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()},e.prototype.processServerResult=function(t){if(this.isAlive()){var e=t.groupLevelInfo;e&&Object.assign(this.info,e),t.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(t.pivotResultFields);var i=this.allRowNodes.length>0?this.allNodesMap:void 0;this.allRowNodes=[],this.nodesAfterSort=[],this.nodesAfterFilter=[],this.allNodesMap={},t.rowData||o._.warnOnce('"params.data" is missing from Server-Side Row Model success() callback. Please use the "data" attribute. If no data is returned, set an empty list.'),this.createOrRecycleNodes(i,t.rowData),i&&this.blockUtils.destroyRowNodes(o._.getAllValuesInObject(i)),0===this.level&&this.eventService.dispatchEventOnce({type:o.sVA.EVENT_ROW_COUNT_READY}),this.filterAndSortNodes(),this.fireStoreUpdatedEvent(),this.flushAsyncTransactions()}},e.prototype.createOrRecycleNodes=function(t,e){var i=this;if(e){e.forEach((function(e){var o=function(e){if(t){var o=i.gridOptionsService.getCallback("getRowId");if(o){var n=i.parentRowNode.getGroupKeys(),r=i.level,s=o({data:e,parentKeys:n.length>0?n:void 0,level:r}),a=t[s];if(a)return delete t[s],a}}}(e);o?function(t,e){i.allNodesMap[t.id]=t,i.blockUtils.updateDataIntoRowNode(t,e),i.allRowNodes.push(t)}(o,e):i.createDataNode(e)}))}},e.prototype.flushAsyncTransactions=function(){var t=this;window.setTimeout((function(){return t.transactionManager.flushAsyncTransactions()}),0)},e.prototype.filterAndSortNodes=function(){this.filterRowNodes(),this.sortRowNodes()},e.prototype.sortRowNodes=function(){var t=this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerSideSortOnServer(),e=this.sortController.getSortOptions(),i=!e||0==e.length;if(t||i)this.nodesAfterSort=this.nodesAfterFilter;else if(this.nodesAfterSort=this.rowNodeSorter.doFullSort(this.nodesAfterFilter,e),this.postSortFunc){var o={nodes:this.nodesAfterSort};this.postSortFunc(o)}},e.prototype.filterRowNodes=function(){var t=this,e=!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerSideFilterOnServer(),i=this.groupLevel;this.nodesAfterFilter=e||i?this.allRowNodes:this.allRowNodes.filter((function(e){return t.filterManager.doesRowPassFilter({rowNode:e})}))},e.prototype.clearDisplayIndexes=function(){var t=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.allRowNodes.forEach((function(e){return t.blockUtils.clearDisplayIndex(e)}))},e.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},e.prototype.isDisplayIndexInStore=function(t){return 0!==this.getRowCount()&&(t>=this.displayIndexStart&&t<this.displayIndexEnd)},e.prototype.setDisplayIndexes=function(t,e){var i=this;this.displayIndexStart=t.peek(),this.topPx=e.value;var o={};this.nodesAfterSort.forEach((function(n){i.blockUtils.setDisplayIndex(n,t,e),o[n.id]=!0})),this.allRowNodes.forEach((function(t){o[t.id]||i.blockUtils.clearDisplayIndex(t)})),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx},e.prototype.forEachStoreDeep=function(t,e){void 0===e&&(e=new o.RI_),t(this,e.next()),this.allRowNodes.forEach((function(i){var o=i.childStore;o&&o.forEachStoreDeep(t,e)}))},e.prototype.forEachNodeDeep=function(t,e){void 0===e&&(e=new o.RI_),this.allRowNodes.forEach((function(i){t(i,e.next());var o=i.childStore;o&&o.forEachNodeDeep(t,e)}))},e.prototype.forEachNodeDeepAfterFilterAndSort=function(t,e,i){void 0===e&&(e=new o.RI_),void 0===i&&(i=!1),this.nodesAfterSort.forEach((function(o){t(o,e.next());var n=o.childStore;n&&n.forEachNodeDeepAfterFilterAndSort(t,e,i)})),i&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())},e.prototype.getRowUsingDisplayIndex=function(t){if(this.isDisplayIndexInStore(t))return this.blockUtils.binarySearchForDisplayIndex(t,this.nodesAfterSort)},e.prototype.getRowBounds=function(t){for(var e=0;e<this.nodesAfterSort.length;e++){var i=this.nodesAfterSort[e],o=this.blockUtils.extractRowBounds(i,t);if(o)return o}return null},e.prototype.isPixelInRange=function(t){return t>=this.topPx&&t<this.topPx+this.heightPx},e.prototype.getRowIndexAtPixel=function(t){var e=this;if(t<=this.topPx)return this.nodesAfterSort[0].rowIndex;if(t>=this.topPx+this.heightPx){var i=this.nodesAfterSort[this.nodesAfterSort.length-1],o=i.rowTop+i.rowHeight;if(t>=o&&i.expanded){if(i.childStore&&i.childStore.getRowCount()>0)return i.childStore.getRowIndexAtPixel(t);if(i.detailNode)return i.detailNode.rowIndex}return i.rowIndex}var n=null;return this.nodesAfterSort.forEach((function(i){var o=e.blockUtils.getIndexAtPixel(i,t);null!=o&&(n=o)})),null==n?this.displayIndexEnd-1:n},e.prototype.getChildStore=function(t){var e=this;return this.storeUtils.getChildStore(t,this,(function(t){return e.allRowNodes.find((function(e){return e.key==t}))}))},e.prototype.forEachChildStoreShallow=function(t){this.allRowNodes.forEach((function(e){var i=e.childStore;i&&t(i)}))},e.prototype.refreshAfterFilter=function(t){var e=this.storeUtils.isServerSideFilterOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t);if(!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||e&&i)return this.refreshStore(!0),void this.sortRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((function(e){return e.refreshAfterFilter(t)}))},e.prototype.refreshAfterSort=function(t){var e=this.storeUtils.isServerSideSortOnServer(),i=this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t);if(this.storeUtils.isServerSideSortAllLevels()||e&&i)return this.refreshStore(!0),void this.filterRowNodes();this.filterRowNodes(),this.sortRowNodes(),this.forEachChildStoreShallow((function(e){return e.refreshAfterSort(t)}))},e.prototype.applyTransaction=function(t){switch(this.getState()){case o.iEP.STATE_FAILED:return{status:o.a8A.StoreLoadingFailed};case o.iEP.STATE_LOADING:return{status:o.a8A.StoreLoading};case o.iEP.STATE_WAITING_TO_LOAD:return{status:o.a8A.StoreWaitingToLoad}}var e=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(e&&!e({transaction:t,parentNode:this.parentRowNode,groupLevelInfo:this.info}))return{status:o.a8A.Cancelled};var i={status:o.a8A.Applied,remove:[],update:[],add:[]},n=[];return this.executeAdd(t,i),this.executeRemove(t,i,n),this.executeUpdate(t,i,n),this.filterAndSortNodes(),this.updateSelection(n),i},e.prototype.updateSelection=function(t){if(t.length>0){this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,clearSelection:!1,source:"rowDataChanged"});var e={type:o.sVA.EVENT_SELECTION_CHANGED,source:"rowDataChanged"};this.eventService.dispatchEvent(e)}},e.prototype.executeAdd=function(t,e){var i=this,n=t.add,r=t.addIndex;o._.missingOrEmpty(n)||("number"===typeof r&&r>=0?n.reverse().forEach((function(t){var o=i.createDataNode(t,r);e.add.push(o)})):n.forEach((function(t){var o=i.createDataNode(t);e.add.push(o)})))},e.prototype.executeRemove=function(t,e,i){var o=this,n=t.remove;if(null!=n){var r={};n.forEach((function(t){var n=o.lookupRowNode(t);n&&(n.isSelected()&&i.push(n),n.clearRowTopAndRowIndex(),r[n.id]=!0,delete o.allNodesMap[n.id],e.remove.push(n),o.nodeManager.removeNode(n))})),this.allRowNodes=this.allRowNodes.filter((function(t){return!r[t.id]}))}},e.prototype.executeUpdate=function(t,e,i){var o=this,n=t.update;null!=n&&n.forEach((function(t){var n=o.lookupRowNode(t);n&&(o.blockUtils.updateDataIntoRowNode(n,t),!n.selectable&&n.isSelected()&&i.push(n),e.update.push(n))}))},e.prototype.lookupRowNode=function(t){var e,i=this.gridOptionsService.getCallback("getRowId");if(null!=i){var o=this.level,n=this.parentRowNode.getGroupKeys(),r=i({data:t,parentKeys:n.length>0?n:void 0,level:o});if(!(e=this.allNodesMap[r]))return console.error("AG Grid: could not find row id=".concat(r,", data item was not found for this id")),null}else if(!(e=this.allRowNodes.find((function(e){return e.data===t}))))return console.error("AG Grid: could not find data item as object was not found",t),null;return e},e.prototype.addStoreStates=function(t){t.push({suppressInfiniteScroll:!0,route:this.parentRowNode.getGroupKeys(),rowCount:this.allRowNodes.length,info:this.info}),this.forEachChildStoreShallow((function(e){return e.addStoreStates(t)}))},e.prototype.refreshStore=function(t){if(t){var e=this.nodesAfterSort?this.nodesAfterSort.length:1;this.initialiseRowNodes(e)}this.scheduleLoad(),this.fireStoreUpdatedEvent()},e.prototype.retryLoads=function(){this.getState()===o.iEP.STATE_FAILED&&(this.initialiseRowNodes(1),this.scheduleLoad()),this.forEachChildStoreShallow((function(t){return t.retryLoads()}))},e.prototype.scheduleLoad=function(){this.setStateWaitingToLoad(),this.rowNodeBlockLoader.checkBlockToLoad()},e.prototype.fireStoreUpdatedEvent=function(){var t={type:o.sVA.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)},e.prototype.getRowCount=function(){return this.nodesAfterSort.length},e.prototype.getTopLevelRowDisplayedIndex=function(t){return this.nodesAfterSort[t].rowIndex},e.prototype.isLastRowIndexKnown=function(){return this.getState()==o.iEP.STATE_LOADED},e.prototype.getRowNodesInRange=function(t,e){var i=[],n=!1;return o._.missing(t)&&(n=!0),this.nodesAfterSort.forEach((function(o){var r=o===t||o===e;(n||r)&&i.push(o),r&&(n=!n)})),n?[]:i},e.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},TE([(0,o.dsm)("ssrmStoreUtils")],e.prototype,"storeUtils",void 0),TE([(0,o.dsm)("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),TE([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),TE([(0,o.dsm)("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),TE([(0,o.dsm)("rowNodeSorter")],e.prototype,"rowNodeSorter",void 0),TE([(0,o.dsm)("sortController")],e.prototype,"sortController",void 0),TE([(0,o.dsm)("selectionService")],e.prototype,"selectionService",void 0),TE([(0,o.dsm)("ssrmNodeManager")],e.prototype,"nodeManager",void 0),TE([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),TE([(0,o.dsm)("ssrmTransactionManager")],e.prototype,"transactionManager",void 0),TE([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),TE([o.o7C],e.prototype,"postConstruct",null),TE([o.yah],e.prototype,"destroyRowNodes",null),e}(o.iEP),kE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),RE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},PE=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},NE=function(t){function e(e,i,o){var n=t.call(this)||this;return n.loadingNodes=new Set,n.checkForLoadQueued=!1,n.loaderTimeout=void 0,n.nextBlockToLoad=void 0,n.parentNode=i,n.cache=e,n.storeParams=o,n}return kE(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.rowNodeBlockLoader,o.RRV.BLOCK_LOADED_EVENT,(function(){return t.queueLoadAction()}))},e.prototype.isRowLoading=function(t){return this.loadingNodes.has(t)},e.prototype.getBlockToLoad=function(){for(var t,e=this,i=this.api.getFirstDisplayedRow(),o=this.api.getLastDisplayedRow(),n=i;n<=o;n++){var r=this.cache.getNodeCachedByDisplayIndex(n);if(r){var s=this.cache.getNodes().getBy("node",r);if(s&&!this.isRowLoading(s.index)&&(r.__needsRefreshWhenVisible||r.stub&&!r.failedLoad))return this.getBlockStartIndexForIndex(s.index)}}var a=this.cache.getNodesToRefresh(),l=null,c=Number.MAX_SAFE_INTEGER;a.forEach((function(t){if(null!=t.rowIndex){if(!e.isRowLoading(t.rowIndex)){var n=Math.abs(i-t.rowIndex),r=Math.abs(t.rowIndex-o);n<c&&(l=t,c=n),r<c&&(l=t,c=r)}}else l=t}));var d=null===(t=this.cache.getNodes().getBy("node",l))||void 0===t?void 0:t.index;return null==d?void 0:this.getBlockStartIndexForIndex(d)},e.prototype.reset=function(){this.loadingNodes.clear(),clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0},e.prototype.executeLoad=function(t,e){var i,o=this,n=this.cache.getSsrmParams(),r={startRow:t,endRow:e,rowGroupCols:n.rowGroupCols,valueCols:n.valueCols,pivotCols:n.pivotCols,pivotMode:n.pivotMode,groupKeys:this.parentNode.getGroupKeys(),filterModel:n.filterModel,sortModel:n.sortModel},s=function(){for(var i=0;i<e-t;i++)o.loadingNodes.delete(t+i)},a={request:r,success:function(i){o.rowNodeBlockLoader.loadComplete(),o.cache.onLoadSuccess(t,e-t,i),s(),o.queueLoadAction()},fail:function(){o.rowNodeBlockLoader.loadComplete(),o.cache.onLoadFailed(t,e-t),s(),o.queueLoadAction()},parentNode:this.parentNode,api:this.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};!function(){for(var i=0;i<e-t;i++)o.loadingNodes.add(t+i)}(),null===(i=this.cache.getSsrmParams().datasource)||void 0===i||i.getRows(a)},e.prototype.getNextBlockToLoad=function(){var t=this.getBlockToLoad();return null!=t?[String(t),t+this.getBlockSize()]:null},e.prototype.queueLoadCheck=function(){var t=this;this.checkForLoadQueued||(this.checkForLoadQueued=!0,window.queueMicrotask((function(){t.checkForLoadQueued=!1,t.queueLoadAction()})))},e.prototype.queueLoadAction=function(){var t=this,e=this.getNextBlockToLoad();if(!e)return window.clearTimeout(this.loaderTimeout),this.loaderTimeout=void 0,void(this.nextBlockToLoad=void 0);if(!this.nextBlockToLoad||this.nextBlockToLoad[0]!==e[0]&&this.nextBlockToLoad[1]!==e[1]){this.nextBlockToLoad=e,window.clearTimeout(this.loaderTimeout);var i=PE(this.nextBlockToLoad,2),o=i[0],n=i[1],r=Number(o);this.loaderTimeout=window.setTimeout((function(){t.cache.isAlive()&&(t.loaderTimeout=void 0,t.attemptLoad(r,n),t.nextBlockToLoad=void 0)}),this.gridOptionsService.get("blockLoadDebounceMillis"))}},e.prototype.attemptLoad=function(t,e){var i=this.rowNodeBlockLoader.getAvailableLoadingCount();null!=i&&0===i||(this.rowNodeBlockLoader.registerLoads(1),this.executeLoad(t,e),this.queueLoadAction())},e.prototype.getBlockSize=function(){return this.storeParams.cacheBlockSize||e.DEFAULT_BLOCK_SIZE},e.prototype.getBlockStartIndexForIndex=function(t){return t-t%this.getBlockSize()},e.prototype.getBlockBoundsForIndex=function(t){var e=this.getBlockStartIndexForIndex(t);return[e,e+this.getBlockSize()]},e.DEFAULT_BLOCK_SIZE=100,RE([(0,o.dsm)("gridApi")],e.prototype,"api",void 0),RE([(0,o.dsm)("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),RE([o.o7C],e.prototype,"init",null),e}(o.XQb),LE=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length<1)throw new Error("AG Grid: At least one index must be provided.");this.indexes=t,this.maps=new Map(this.indexes.map((function(t){return[t,new Map]})))}return t.prototype.getBy=function(t,e){var i=this.maps.get(t);if(!i)throw new Error("AG Grid: ".concat(String(t)," not found"));return i.get(e)},t.prototype.set=function(t){var e=this;this.indexes.forEach((function(i){var o=e.maps.get(i);if(!o)throw new Error("AG Grid: ".concat(String(i)," not found"));o.set(t[i],t)}))},t.prototype.delete=function(t){var e=this;this.indexes.forEach((function(i){var o=e.maps.get(i);if(!o)throw new Error("AG Grid: ".concat(String(i)," not found"));o.delete(t[i])}))},t.prototype.clear=function(){this.maps.forEach((function(t){return t.clear()}))},t.prototype.getIterator=function(t){var e=this.maps.get(t);if(!e)throw new Error("AG Grid: ".concat(String(t)," not found"));return e.values()},t.prototype.forEach=function(t){for(var e,i=this.getIterator(this.indexes[0]);(e=i.next())&&!e.done;)t(e.value)},t.prototype.find=function(t){for(var e,i=this.getIterator(this.indexes[0]);(e=i.next())&&!e.done;)if(t(e.value))return e.value},t.prototype.filter=function(t){for(var e,i=this.getIterator(this.indexes[0]),o=[];(e=i.next())&&!e.done;)t(e.value)&&o.push(e.value);return o},t}(),_E=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),IE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},FE=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},GE=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},BE=function(t){function e(e,i,o){var n=t.call(this)||this;return n.live=!0,n.removedNodeCache=new Map,n.store=e,n.numberOfRows=i,n.isLastRowKnown=!1,n.storeParams=o,n}return _E(e,t),e.prototype.init=function(){this.nodeMap=new LE("index","id","node"),this.nodeDisplayIndexMap=new Map,this.nodesToRefresh=new Set,this.defaultNodeIdPrefix=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),this.rowLoader=this.createManagedBean(new NE(this,this.store.getParentNode(),this.storeParams)),this.getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),this.isMasterDetail=this.gridOptionsService.get("masterDetail")},e.prototype.destroyRowNodes=function(){var t=this;this.numberOfRows=0,this.nodeMap.forEach((function(e){return t.blockUtils.destroyRowNode(e.node)})),this.nodeMap.clear(),this.nodeDisplayIndexMap.clear(),this.nodesToRefresh.clear(),this.live=!1},e.prototype.getRowByDisplayIndex=function(t){var e,i,o,n;if(this.store.isDisplayIndexInStore(t)){var r=this.nodeDisplayIndexMap.get(t);if(r)return(r.stub||r.__needsRefreshWhenVisible)&&this.rowLoader.queueLoadCheck(),r;if(t===this.store.getDisplayIndexStart())return this.createStubNode(0,t);var s=this.nodeDisplayIndexMap.get(t-1);if(s){if(this.isMasterDetail&&s.master&&s.expanded)return s.detailNode;if(s.expanded&&(null===(e=s.childStore)||void 0===e?void 0:e.isDisplayIndexInStore(t)))return null===(i=s.childStore)||void 0===i?void 0:i.getRowUsingDisplayIndex(t);var a=this.nodeMap.getBy("node",s);return this.createStubNode(a.index+1,t)}var l=this.getSurroundingNodesByDisplayIndex(t);if(null==l){var c=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(c,t)}var d=l.previousNode,u=l.nextNode;if(d&&d.node.expanded&&(null===(o=d.node.childStore)||void 0===o?void 0:o.isDisplayIndexInStore(t)))return null===(n=d.node.childStore)||void 0===n?void 0:n.getRowUsingDisplayIndex(t);if(u){var h=u.node.rowIndex-t,p=u.index-h;return this.createStubNode(p,t)}var f=this.store.getRowCount()-(this.store.getDisplayIndexEnd()-t);return this.createStubNode(f,t)}},e.prototype.createStubNode=function(t,e){var i=this,o=this.store.getRowBounds(e),n=this.createRowAtIndex(t,null,(function(t){t.setRowIndex(e),t.setRowTop(o.rowTop),i.nodeDisplayIndexMap.set(e,t)}));return this.rowLoader.queueLoadCheck(),n},e.prototype.getRowByStoreIndex=function(t){var e;return null===(e=this.nodeMap.getBy("index",t))||void 0===e?void 0:e.node},e.prototype.skipDisplayIndexes=function(t,e,i){if(0!==t){var o=this.gridOptionsService.getRowHeightAsNumber();e.skip(t),i.value+=t*o}},e.prototype.setDisplayIndexes=function(t,e){this.nodeDisplayIndexMap.clear();var i={};this.nodeMap.forEach((function(t){i[t.index]=t.node}));var o=-1;for(var n in i){var r=i[n],s=Number(n),a=s-1-o;this.skipDisplayIndexes(a,t,e),this.blockUtils.setDisplayIndex(r,t,e),this.nodeDisplayIndexMap.set(r.rowIndex,r),o=s}var l=this.numberOfRows-1-o;this.skipDisplayIndexes(l,t,e),this.purgeExcessRows()},e.prototype.getRowCount=function(){return this.numberOfRows},e.prototype.setRowCount=function(t,e){if(t<0)throw new Error("AG Grid: setRowCount can only accept a positive row count.");this.numberOfRows=t,null!=e&&(this.isLastRowKnown=e,!1===e&&(this.numberOfRows+=1)),this.fireStoreUpdatedEvent()},e.prototype.getNodes=function(){return this.nodeMap},e.prototype.getNodeCachedByDisplayIndex=function(t){var e;return null!==(e=this.nodeDisplayIndexMap.get(t))&&void 0!==e?e:null},e.prototype.getNodesToRefresh=function(){return this.nodesToRefresh},e.prototype.getSurroundingNodesByDisplayIndex=function(t){var e,i;return this.nodeMap.forEach((function(o){t>o.node.rowIndex?(null==i||i.node.rowIndex<o.node.rowIndex)&&(i=o):(null==e||e.node.rowIndex>o.node.rowIndex)&&(e=o)})),i||e?{previousNode:i,nextNode:e}:null},e.prototype.getDisplayIndexFromStoreIndex=function(t){var e,i,o,n,r=this.nodeMap.getBy("index",t);if(r)return r.node.rowIndex;if(this.nodeMap.forEach((function(e){t>e.index?(null==n||n.index<e.index)&&(n=e):(null==o||o.index>e.index)&&(o=e)})),!o)return this.store.getDisplayIndexEnd()-(this.numberOfRows-t);if(!n)return this.store.getDisplayIndexStart()+t;var s=t-n.index;return(null!==(i=null===(e=n.node.childStore)||void 0===e?void 0:e.getDisplayIndexEnd())&&void 0!==i?i:n.node.rowIndex)+s},e.prototype.createRowAtIndex=function(t,e,i){var o,n,r=this.nodeMap.getBy("index",t);if(r){if((c=r.node).__needsRefreshWhenVisible=!1,this.doesNodeMatch(e,c))return this.blockUtils.updateDataIntoRowNode(c,e),this.nodesToRefresh.delete(c),c;if(null==this.getRowIdFunc&&c.hasChildren()&&c.expanded)return this.nodesToRefresh.delete(c),c;this.destroyRowAtIndex(t)}if(e&&null!=this.getRowIdFunc){var s=this.getRowId(e),a=s&&(null===(o=this.removedNodeCache)||void 0===o?void 0:o.get(s));if(a)return null===(n=this.removedNodeCache)||void 0===n||n.delete(s),this.blockUtils.updateDataIntoRowNode(a,e),this.nodeMap.set({id:a.id,node:a,index:t}),a;var l=this.nodeMap.getBy("id",s);if(l){this.nodeMap.delete(l);var c=l.node,d=l.index;return this.blockUtils.updateDataIntoRowNode(c,e),this.nodeMap.set({id:c.id,node:c,index:t}),this.nodesToRefresh.delete(c),this.rowLoader.getBlockStartIndexForIndex(d)===this.rowLoader.getBlockStartIndexForIndex(t)?c:(this.markBlockForVerify(d),c)}}var u=this.blockUtils.createRowNode(this.store.getRowDetails());if(null!=e){var h=this.getPrefixedId(this.store.getIdSequence().next());this.blockUtils.setDataIntoRowNode(u,e,h,void 0),this.blockUtils.checkOpenByDefault(u),this.nodeManager.addRowNode(u)}return this.nodeMap.set({id:u.id,node:u,index:t}),i&&i(u),u},e.prototype.getBlockStates=function(){var t=this,e={},i={};this.nodeMap.forEach((function(o){var n,r=o.node,s=o.index,a=t.rowLoader.getBlockStartIndexForIndex(s);r.stub||r.failedLoad||(e[a]=(null!==(n=e[a])&&void 0!==n?n:0)+1);var l="loaded";r.failedLoad?l="failed":t.rowLoader.isRowLoading(a)?l="loading":(t.nodesToRefresh.has(r)||r.stub)&&(l="needsLoading"),i[a]||(i[a]=new Set),i[a].add(l)}));var o={loading:4,failed:3,needsLoading:2,loaded:1},n=this.blockUtils.createNodeIdPrefix(this.store.getParentNode()),r={};return Object.entries(i).forEach((function(i){var s,a=FE(i,2),l=a[0],c=a[1],d=GE([],FE(c),!1).sort((function(t,e){var i,n;return(null!==(i=o[t])&&void 0!==i?i:0)-(null!==(n=o[e])&&void 0!==n?n:0)})),u=d[0],h=Number(l)/t.rowLoader.getBlockSize(),p=n?"".concat(n,"-").concat(h):String(h);r[p]={blockNumber:h,startRow:Number(l),endRow:Number(l)+t.rowLoader.getBlockSize(),pageStatus:u,loadedRowCount:null!==(s=e[l])&&void 0!==s?s:0}})),r},e.prototype.destroyRowAtIndex=function(t){var e=this.nodeMap.getBy("index",t);e&&(this.nodeMap.delete(e),this.nodeDisplayIndexMap.delete(e.node.rowIndex),e.node.hasChildren()&&this.nodesToRefresh.size>0?this.removedNodeCache.set(e.node.id,e.node):this.blockUtils.destroyRowNode(e.node),this.nodesToRefresh.delete(e.node))},e.prototype.getSsrmParams=function(){return this.store.getSsrmParams()},e.prototype.getPrefixedId=function(t){return this.defaultNodeIdPrefix?this.defaultNodeIdPrefix+"-"+t:t.toString()},e.prototype.markBlockForVerify=function(t){var e=FE(this.rowLoader.getBlockBoundsForIndex(t),2),i=e[0],o=e[1];this.nodeMap.filter((function(t){return t.index>=i&&t.index<o})).forEach((function(t){t.node.__needsRefreshWhenVisible=!0}))},e.prototype.doesNodeMatch=function(t,e){if(e.stub)return!1;if(null!=this.getRowIdFunc){var i=this.getRowId(t);return e.id===i}return e.data===t},e.prototype.purgeStubsOutsideOfViewport=function(){var t=this,e=this.api.getFirstDisplayedRow(),i=this.api.getLastDisplayedRow(),o=this.rowLoader.getBlockStartIndexForIndex(e),n=FE(this.rowLoader.getBlockBoundsForIndex(i),2);n[0];var r=n[1];this.nodeMap.forEach((function(e){t.rowLoader.isRowLoading(e.index)||e.node.failedLoad||e.node.stub&&(e.index<o||e.index>r)&&t.destroyRowAtIndex(e.index)}))},e.prototype.getBlocksDistanceFromRow=function(t,e){var i=this,o={};return t.forEach((function(t){var n=t.node,r=t.index,s=FE(i.rowLoader.getBlockBoundsForIndex(r),2),a=s[0],l=s[1];if(!(a in o)){var c,d=Math.abs(n.rowIndex-e),u=i.nodeMap.getBy("index",[l-1]);u&&(c=Math.abs(u.node.rowIndex-e));var h=null==c||d<c?d:c;o[a]=h}})),Object.entries(o)},e.prototype.purgeExcessRows=function(){var t,e=this;if(this.purgeStubsOutsideOfViewport(),null!=this.store.getDisplayIndexEnd()&&null!=this.storeParams.maxBlocksInCache){var i=this.api.getFirstDisplayedRow(),o=this.api.getLastDisplayedRow(),n=new Set,r=new Set;this.nodeMap.forEach((function(t){var s=t.index,a=t.node,l=e.rowLoader.getBlockStartIndexForIndex(s);n.add(l),a.rowIndex>=i&&a.rowIndex<=o&&r.add(l)}));var s=Math.max(r.size,null!==(t=this.storeParams.maxBlocksInCache)&&void 0!==t?t:0),a=n.size-s;if(!(a<=0)){var l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;r.forEach((function(t){l>t&&(l=t),c<t&&(c=t)}));var d=this.nodeMap.filter((function(t){var i=t.node,o=t.index,n=e.rowLoader.getBlockStartIndexForIndex(o);return!(n>=l&&n<=c)&&!e.isNodeCached(i)}));if(0!==d.length){var u=i+(o-i)/2,h=this.getBlocksDistanceFromRow(d,u),p=this.rowLoader.getBlockSize();h.sort((function(t,e){return Math.sign(e[1]-t[1])}));for(var f=0;f<Math.min(a,h.length);f++)for(var g=Number(h[f][0]),v=g;v<g+p;v++){var y=this.nodeMap.getBy("index",v);y&&!this.isNodeCached(y.node)&&this.destroyRowAtIndex(v)}}}}},e.prototype.isNodeFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();return!!e&&(null==e.rowPinned&&e.rowIndex===t.rowIndex)},e.prototype.isNodeCached=function(t){return t.isExpandable()&&t.expanded||this.isNodeFocused(t)},e.prototype.extractDuplicateIds=function(t){var e=this;if(null!=this.getRowIdFunc)return[];var i=new Set,o=new Set;return t.forEach((function(t){var n=e.getRowId(t);i.has(n)?o.add(n):i.add(n)})),GE([],FE(o),!1)},e.prototype.onLoadSuccess=function(t,e,i){var o=this;if(this.live){var n=i.groupLevelInfo;if(this.store.setStoreInfo(n),null!=this.getRowIdFunc){var r=this.extractDuplicateIds(i.rowData);if(r.length>0){var s=r.join(", ");return console.warn("AG Grid: Unable to display rows as duplicate row ids (".concat(s,") were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.")),void this.onLoadFailed(t,e)}}i.pivotResultFields&&this.serverSideRowModel.generateSecondaryColumns(i.pivotResultFields);var a=this.nodesToRefresh.size>0;i.rowData.forEach((function(e,i){var n,r=t+i,s=o.nodeMap.getBy("index",r);if(!(null===(n=null===s||void 0===s?void 0:s.node)||void 0===n?void 0:n.stub))return s&&o.doesNodeMatch(e,s.node)?(o.blockUtils.updateDataIntoRowNode(s.node,e),o.nodesToRefresh.delete(s.node),void(s.node.__needsRefreshWhenVisible=!1)):void o.createRowAtIndex(r,e);o.createRowAtIndex(r,e)}));var l=0===this.nodesToRefresh.size;if(a&&l&&this.fireRefreshFinishedEvent(),void 0!=i.rowCount&&-1!==i.rowCount)this.numberOfRows=i.rowCount,this.isLastRowKnown=!0;else if(e>i.rowData.length)this.numberOfRows=t+i.rowData.length,this.isLastRowKnown=!0;else if(!this.isLastRowKnown){var c=t+i.rowData.length+1;c>this.numberOfRows&&(this.numberOfRows=c)}if(this.isLastRowKnown)this.nodeMap.filter((function(t){return t.index>=o.numberOfRows})).forEach((function(t){return o.destroyRowAtIndex(t.index)}));this.fireStoreUpdatedEvent()}},e.prototype.fireRefreshFinishedEvent=function(){var t=this;0===this.nodesToRefresh.size&&(this.removedNodeCache.forEach((function(e){t.blockUtils.destroyRowNode(e)})),this.removedNodeCache=new Map,this.store.fireRefreshFinishedEvent())},e.prototype.isLastRowIndexKnown=function(){return this.isLastRowKnown},e.prototype.onLoadFailed=function(t,e){var i;if(this.live){for(var o=this.nodesToRefresh.size>0,n=t;n<t+e&&n<this.getRowCount();n++){var r=(null!==(i=this.nodeMap.getBy("index",n))&&void 0!==i?i:{}).node;r&&this.nodesToRefresh.delete(r),r&&r.stub||(r&&!r.stub&&this.destroyRowAtIndex(n),r=this.createRowAtIndex(n)),r.__needsRefreshWhenVisible=!1,r.failedLoad=!0}var s=0===this.nodesToRefresh.size;o&&s&&this.fireRefreshFinishedEvent(),this.fireStoreUpdatedEvent()}},e.prototype.markNodesForRefresh=function(){var t=this;this.nodeMap.forEach((function(e){e.node.stub&&!e.node.failedLoad||t.nodesToRefresh.add(e.node)})),this.rowLoader.queueLoadCheck(),this.isLastRowKnown&&0===this.numberOfRows&&(this.numberOfRows=1,this.isLastRowKnown=!1,this.fireStoreUpdatedEvent())},e.prototype.isNodeInCache=function(t){return!!this.nodeMap.getBy("id",t)},e.prototype.fireStoreUpdatedEvent=function(){this.live&&this.store.fireStoreUpdatedEvent()},e.prototype.getRowId=function(t){if(null==this.getRowIdFunc)return null;var e=this.store.getRowDetails().level,i=this.store.getParentNode().getGroupKeys(),o=this.getRowIdFunc({data:t,parentKeys:i.length>0?i:void 0,level:e});return String(o)},e.prototype.updateRowNodes=function(t){var e=this;if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var i=[];return t.forEach((function(t){var o=e.getRowId(t),n=e.nodeMap.getBy("id",o);n&&(e.blockUtils.updateDataIntoRowNode(n.node,t),i.push(n.node))})),i},e.prototype.insertRowNodes=function(t,e){var i=this,o=this.store.getRowCount()-(this.store.getParentNode().sibling?1:0),n=null==e&&this.isLastRowKnown?o:e;if(null==n||o<n)return[];if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var r={};t.forEach((function(t){var e=i.getRowId(t);e&&i.isNodeInCache(e)||(r[e]=t)}));var s=Object.values(r),a=s.length;if(0===a)return[];var l=this.nodeMap.filter((function(t){return t.index>=n}));return l.forEach((function(t){return i.nodeMap.delete(t)})),l.forEach((function(t){i.nodeMap.set({node:t.node,index:t.index+a,id:t.id})})),this.numberOfRows+=a,s.map((function(t,e){return i.createRowAtIndex(n+e,t)}))},e.prototype.getOrderedNodeMap=function(){var t={};return this.nodeMap.forEach((function(e){return t[e.index]=e})),t},e.prototype.clearDisplayIndexes=function(){this.nodeDisplayIndexMap.clear()},e.prototype.removeRowNodes=function(t){if(null==this.getRowIdFunc)throw new Error("AG Grid: Transactions can only be applied when row ids are supplied.");var e=[],i=[],o=0,n=GE([],FE(t),!1),r=this.getOrderedNodeMap(),s=-1,a=function(t){s+=1;var a=r[t],c=n.findIndex((function(t){return t===a.id}));if(-1!==c)return n.splice(c,1),l.destroyRowAtIndex(Number(t)),e.push(a.node),o+=1,"continue";if(0===o)return"continue";var d=Number(t);s!==d&&i.push(a.node),l.nodeMap.delete(r[t]),l.nodeMap.set({id:a.id,node:a.node,index:d-o})},l=this;for(var c in r)a(c);return this.numberOfRows-=this.isLastRowIndexKnown()?t.length:o,n.length>0&&i.length>0&&(i.forEach((function(t){return t.__needsRefreshWhenVisible=!0})),this.rowLoader.queueLoadCheck()),e},IE([(0,o.dsm)("gridApi")],e.prototype,"api",void 0),IE([(0,o.dsm)("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),IE([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),IE([(0,o.dsm)("ssrmNodeManager")],e.prototype,"nodeManager",void 0),IE([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),IE([o.o7C],e.prototype,"init",null),IE([o.yah],e.prototype,"destroyRowNodes",null),e}(o.XQb),VE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),jE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},WE=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},zE=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},HE=function(t){function e(e,i,n){var r=t.call(this)||this;return r.idSequence=new o.RI_,r.ssrmParams=e,r.parentRowNode=n,r.storeParams=i,r.level=n.level+1,r.group=!!e.rowGroupCols&&r.level<e.rowGroupCols.length,r.leafGroup=!!e.rowGroupCols&&r.level===e.rowGroupCols.length-1,r.info={},r}return VE(e,t),e.prototype.init=function(){var t,e=1;if(0===this.level&&(e=null!==(t=this.storeUtils.getServerSideInitialRowCount())&&void 0!==t?t:1,this.eventService.dispatchEventOnce({type:o.sVA.EVENT_ROW_COUNT_READY})),this.cache=this.createManagedBean(new BE(this,e,this.storeParams)),!this.gridOptionsService.get("treeData")&&this.group){var i=this.ssrmParams.rowGroupCols[this.level];this.groupField=i.field,this.rowGroupColumn=this.columnModel.getRowGroupColumns()[this.level]}},e.prototype.destroyRowNodes=function(){this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.destroyBean(this.cache)},e.prototype.applyRowData=function(t,e,i){this.cache.onLoadSuccess(e,i,t)},e.prototype.applyTransaction=function(t){var e,i,n,r=this,s=this.gridOptionsService.getCallback("getRowId");if(!s)return console.warn("AG Grid: getRowId callback must be implemented for transactions to work. Transaction was ignored."),{status:o.a8A.Cancelled};var a=this.gridOptionsService.getCallback("isApplyServerSideTransaction");if(a&&!a({transaction:t,parentNode:this.parentRowNode,groupLevelInfo:this.info}))return{status:o.a8A.Cancelled};var l=void 0;(null===(e=t.update)||void 0===e?void 0:e.length)&&(l=this.cache.updateRowNodes(t.update));var c=void 0;if(null===(i=t.add)||void 0===i?void 0:i.length){var d=t.addIndex;null!=d&&d<0&&(d=void 0),c=this.cache.insertRowNodes(t.add,d)}var u=void 0;if(null===(n=t.remove)||void 0===n?void 0:n.length){var h=t.remove.map((function(t){return s({level:r.level,parentKeys:r.parentRowNode.getGroupKeys(),data:t})})),p=zE([],WE(new Set(h)),!1);u=this.cache.removeRowNodes(p)}return this.updateSelectionAfterTransaction(l,u),{status:o.a8A.Applied,update:l,add:c,remove:u}},e.prototype.updateSelectionAfterTransaction=function(t,e){var i=[];null===t||void 0===t||t.forEach((function(t){t.isSelected()&&!t.selectable&&i.push(t)})),null===e||void 0===e||e.forEach((function(t){t.isSelected()&&i.push(t)})),i.length&&this.selectionService.setNodesSelected({newValue:!1,clearSelection:!1,nodes:i,source:"rowDataChanged"})},e.prototype.clearDisplayIndexes=function(){var t=this;this.displayIndexStart=void 0,this.displayIndexEnd=void 0,this.cache.getNodes().forEach((function(e){return t.blockUtils.clearDisplayIndex(e.node)})),this.parentRowNode.sibling&&this.blockUtils.clearDisplayIndex(this.parentRowNode.sibling),this.cache.clearDisplayIndexes()},e.prototype.getDisplayIndexStart=function(){return this.displayIndexStart},e.prototype.getDisplayIndexEnd=function(){return this.displayIndexEnd},e.prototype.getRowCount=function(){return this.parentRowNode.sibling?this.cache.getRowCount()+1:this.cache.getRowCount()},e.prototype.setRowCount=function(t,e){this.cache.setRowCount(t,e)},e.prototype.isDisplayIndexInStore=function(t){return 0!==this.cache.getRowCount()&&(this.displayIndexStart<=t&&t<this.getDisplayIndexEnd())},e.prototype.setDisplayIndexes=function(t,e){this.displayIndexStart=t.peek(),this.topPx=e.value,this.cache.setDisplayIndexes(t,e),this.parentRowNode.sibling&&this.blockUtils.setDisplayIndex(this.parentRowNode.sibling,t,e),this.displayIndexEnd=t.peek(),this.heightPx=e.value-this.topPx},e.prototype.forEachStoreDeep=function(t,e){void 0===e&&(e=new o.RI_),t(this,e.next()),this.cache.getNodes().forEach((function(i){var o=i.node.childStore;o&&o.forEachStoreDeep(t,e)}))},e.prototype.forEachNodeDeep=function(t,e){void 0===e&&(e=new o.RI_),this.cache.getNodes().forEach((function(i){t(i.node,e.next());var o=i.node.childStore;o&&o.forEachNodeDeep(t,e)}))},e.prototype.forEachNodeDeepAfterFilterAndSort=function(t,e,i){void 0===e&&(e=new o.RI_),void 0===i&&(i=!1);var n=this.cache.getOrderedNodeMap();for(var r in n){var s=n[r];t(s.node,e.next());var a=s.node.childStore;a&&a.forEachNodeDeepAfterFilterAndSort(t,e,i)}i&&this.parentRowNode.sibling&&t(this.parentRowNode.sibling,e.next())},e.prototype.retryLoads=function(){this.cache.getNodes().forEach((function(t){var e=t.node;e.failedLoad&&(e.failedLoad=!1,e.__needsRefreshWhenVisible=!0,e.stub=!0)})),this.forEachChildStoreShallow((function(t){return t.retryLoads()})),this.fireStoreUpdatedEvent()},e.prototype.getRowUsingDisplayIndex=function(t){return this.parentRowNode.sibling&&t===this.parentRowNode.sibling.rowIndex?this.parentRowNode.sibling:this.cache.getRowByDisplayIndex(t)},e.prototype.getRowBounds=function(t){var e;if(!this.isDisplayIndexInStore(t))return null;var i=this.cache.getNodeCachedByDisplayIndex(t);if(i&&(o=this.blockUtils.extractRowBounds(i,t)))return o;var o,n=null!==(e=this.cache.getSurroundingNodesByDisplayIndex(t))&&void 0!==e?e:{},r=n.previousNode,s=n.nextNode;if(r&&null!=(o=this.blockUtils.extractRowBounds(r.node,t)))return o;var a=this.gridOptionsService.getRowHeightAsNumber();if(s){var l=(s.node.rowIndex-t)*a;return{rowTop:s.node.rowTop-l,rowHeight:a}}return{rowTop:this.topPx+this.heightPx-(this.getDisplayIndexEnd()-t)*a,rowHeight:a}},e.prototype.isPixelInRange=function(t){return t>=this.topPx&&t<this.topPx+this.heightPx},e.prototype.getRowIndexAtPixel=function(t){if(t<this.topPx)return this.getDisplayIndexStart();if(t>=this.topPx+this.heightPx)return this.getDisplayIndexEnd()-1;var e=Number.MAX_SAFE_INTEGER,i=null,o=Number.MAX_SAFE_INTEGER,n=null;if(this.cache.getNodes().forEach((function(r){var s=r.node,a=Math.abs(t-s.rowTop);s.rowTop<t?a<e&&(e=a,i=s):a<o&&(o=a,n=s)})),i){var r=this.blockUtils.getIndexAtPixel(i,t);if(null!=r)return r}var s=this.gridOptionsService.getRowHeightAsNumber();if(n){var a=n.rowTop,l=Math.ceil((a-t)/s);return n.rowIndex-l}var c=this.topPx+this.heightPx,d=Math.floor((c-t)/s);return this.getDisplayIndexEnd()-d},e.prototype.getChildStore=function(t){var e=this;return this.storeUtils.getChildStore(t,this,(function(t){var i=e.cache.getNodes().find((function(e){return e.node.key==t}));return i?i.node:null}))},e.prototype.forEachChildStoreShallow=function(t){this.cache.getNodes().forEach((function(e){var i=e.node;i.childStore&&t(i.childStore)}))},e.prototype.refreshAfterSort=function(t){if(this.storeUtils.isServerSideSortAllLevels()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)){var e=this.cache.getRowCount();return this.destroyBean(this.cache),this.cache=this.createManagedBean(new BE(this,e,this.storeParams)),void this.fireStoreUpdatedEvent()}this.forEachChildStoreShallow((function(e){return e.refreshAfterSort(t)}))},e.prototype.refreshAfterFilter=function(t){!this.storeUtils.isServerSideOnlyRefreshFilteredGroups()||this.storeUtils.isServerRefreshNeeded(this.parentRowNode,this.ssrmParams.rowGroupCols,t)?this.refreshStore(!0):this.forEachChildStoreShallow((function(e){return e.refreshAfterFilter(t)}))},e.prototype.refreshStore=function(t){if(t)return this.destroyBean(this.cache),this.cache=this.createManagedBean(new BE(this,1,this.storeParams)),void this.fireStoreUpdatedEvent();this.cache.markNodesForRefresh()},e.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.cache.getDisplayIndexFromStoreIndex(t);return null!==e&&void 0!==e?e:t},e.prototype.isLastRowIndexKnown=function(){return this.cache.isLastRowIndexKnown()},e.prototype.getRowNodesInRange=function(t,e){return o._.missing(t),this.cache.getNodes().filter((function(i){var o=i.node;return o.rowIndex>=t.rowIndex&&o.rowIndex<=e.rowIndex})).map((function(t){return t.node}))},e.prototype.addStoreStates=function(t){t.push({suppressInfiniteScroll:!1,route:this.parentRowNode.getGroupKeys(),rowCount:this.getRowCount(),lastRowIndexKnown:this.isLastRowIndexKnown(),info:this.info,maxBlocksInCache:this.storeParams.maxBlocksInCache,cacheBlockSize:this.storeParams.cacheBlockSize}),this.forEachChildStoreShallow((function(e){return e.addStoreStates(t)}))},e.prototype.getIdSequence=function(){return this.idSequence},e.prototype.getParentNode=function(){return this.parentRowNode},e.prototype.getRowDetails=function(){return{field:this.groupField,group:this.group,leafGroup:this.leafGroup,level:this.level,parent:this.parentRowNode,rowGroupColumn:this.rowGroupColumn}},e.prototype.getSsrmParams=function(){return this.ssrmParams},e.prototype.setStoreInfo=function(t){t&&Object.assign(this.info,t)},e.prototype.fireStoreUpdatedEvent=function(){var t={type:o.sVA.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(t)},e.prototype.fireRefreshFinishedEvent=function(){var t={type:o.sVA.EVENT_STORE_REFRESHED,route:this.parentRowNode.getRoute()};this.eventService.dispatchEvent(t)},e.prototype.getBlockStates=function(){return this.cache.getBlockStates()},e.prototype.getStoreBounds=function(){return{topPx:this.topPx,heightPx:this.heightPx}},jE([(0,o.dsm)("ssrmBlockUtils")],e.prototype,"blockUtils",void 0),jE([(0,o.dsm)("ssrmStoreUtils")],e.prototype,"storeUtils",void 0),jE([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),jE([(0,o.dsm)("selectionService")],e.prototype,"selectionService",void 0),jE([o.o7C],e.prototype,"init",null),jE([o.yah],e.prototype,"destroyRowNodes",null),e}(o.XQb),UE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),KE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},YE=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},XE=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRowHeightChanged_debounced=o._.debounce(e.onRowHeightChanged.bind(e),100),e.pauseStoreUpdateListening=!1,e.started=!1,e.managingPivotResultColumns=!1,e}return UE(e,t),e.prototype.ensureRowHeightsValid=function(){return!1},e.prototype.start=function(){this.started=!0,this.updateDatasource()},e.prototype.destroyDatasource=function(){this.datasource&&(this.datasource.destroy&&this.datasource.destroy(),this.rowRenderer.datasourceChanged(),this.datasource=void 0)},e.prototype.addEventListeners=function(){var t=this;this.addManagedListener(this.eventService,o.sVA.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_STORE_UPDATED,this.onStoreUpdated.bind(this));var e=this.resetRootStore.bind(this);this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_VALUE_CHANGED,e),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_CHANGED,e),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedPropertyListeners(["masterDetail","treeData","removePivotHeaderRowWhenSingleValueColumn","suppressServerSideInfiniteScroll","cacheBlockSize"],e),this.addManagedPropertyListener("rowHeight",(function(){return t.resetRowHeights()})),this.verifyProps(),this.addManagedPropertyListener("serverSideDatasource",(function(){return t.updateDatasource()}))},e.prototype.updateDatasource=function(){var t=this.gridOptionsService.get("serverSideDatasource");t&&this.setDatasource(t)},e.prototype.verifyProps=function(){this.gridOptionsService.exists("initialGroupOrderComparator")&&o._.warnOnce("initialGroupOrderComparator cannot be used with Server Side Row Model."),this.gridOptionsService.isRowSelection()&&!this.gridOptionsService.exists("getRowId")&&o._.warnOnce("getRowId callback must be provided for Server Side Row Model selection to work correctly.")},e.prototype.setDatasource=function(t){this.started&&(this.destroyDatasource(),this.datasource=t,this.resetRootStore())},e.prototype.applyRowData=function(t,e,i){var o=this.getRootStore();if(o){var n=o.getChildStore(i);n&&(n instanceof HE?n.applyRowData(t,e,t.rowData.length):n instanceof ME&&n.processServerResult(t))}},e.prototype.isLastRowIndexKnown=function(){var t=this.getRootStore();return!!t&&t.isLastRowIndexKnown()},e.prototype.onColumnEverything=function(){if(this.storeParams){var t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),i=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=function(t){var e={};t.oldCols.forEach((function(t){return e[t.id]=t}));var i=t.newCols.every((function(t){var i=e[t.id];return i&&delete e[t.id],i&&i.field===t.field&&i.aggFunc===t.aggFunc})),o=!t.allowRemovedColumns&&!!Object.values(e).length;return i&&!o},r=!o._.jsonEquals(this.storeParams.sortModel,this.sortController.getSortModel()),s=!n({oldCols:this.storeParams.rowGroupCols,newCols:t}),a=!n({oldCols:this.storeParams.pivotCols,newCols:i}),l=!!(null===t||void 0===t?void 0:t.length)&&!n({oldCols:this.storeParams.valueCols,newCols:e,allowRemovedColumns:!0});if(r||s||a||l)this.resetRootStore();else{var c=this.createStoreParams();this.storeParams.rowGroupCols=c.rowGroupCols,this.storeParams.pivotCols=c.pivotCols,this.storeParams.valueCols=c.valueCols}}else this.resetRootStore()},e.prototype.destroyRootStore=function(){this.rootNode&&this.rootNode.childStore&&(this.rootNode.childStore=this.destroyBean(this.rootNode.childStore),this.nodeManager.clear())},e.prototype.refreshAfterSort=function(t,e){this.storeParams&&(this.storeParams.sortModel=t);var i=this.getRootStore();i&&(i.refreshAfterSort(e),this.onStoreUpdated())},e.prototype.generateSecondaryColumns=function(t){var e=this.pivotColDefService.createColDefsFromFields(t);this.managingPivotResultColumns=!0,this.columnModel.setSecondaryColumns(e,"rowModelUpdated")},e.prototype.resetRowHeights=function(){var t=this.resetRowHeightsForAllRowNodes(),e=this.gridOptionsService.getRowHeightForNode(this.rootNode);if(this.rootNode.setRowHeight(e.height,e.estimated),this.rootNode.sibling){var i=this.gridOptionsService.getRowHeightForNode(this.rootNode.sibling);this.rootNode.sibling.setRowHeight(i.height,i.estimated)}t&&this.onRowHeightChanged()},e.prototype.resetRowHeightsForAllRowNodes=function(){var t=this,e=!1;return this.forEachNode((function(i){var o=t.gridOptionsService.getRowHeightForNode(i);i.setRowHeight(o.height,o.estimated);var n=i.detailNode;if(n){var r=t.gridOptionsService.getRowHeightForNode(n);n.setRowHeight(r.height,r.estimated)}if(i.sibling){var s=t.gridOptionsService.getRowHeightForNode(i.sibling);n.setRowHeight(s.height,s.estimated)}e=!0})),e},e.prototype.resetRootStore=function(){this.destroyRootStore(),this.rootNode=new o.TUE(this.beans),this.rootNode.group=!0,this.rootNode.level=-1,this.datasource&&(this.storeParams=this.createStoreParams(),this.rootNode.childStore=this.createBean(this.storeFactory.createStore(this.storeParams,this.rootNode)),this.updateRowIndexesAndBounds()),this.managingPivotResultColumns&&(this.columnModel.setSecondaryColumns(null),this.managingPivotResultColumns=!1),this.dispatchModelUpdated(!0)},e.prototype.columnsToValueObjects=function(t){var e=this;return t.map((function(t){return{id:t.getId(),aggFunc:t.getAggFunc(),displayName:e.columnModel.getDisplayNameForColumn(t,"model"),field:t.getColDef().field}}))},e.prototype.createStoreParams=function(){var t=this.columnsToValueObjects(this.columnModel.getRowGroupColumns()),e=this.columnsToValueObjects(this.columnModel.getValueColumns()),i=this.columnsToValueObjects(this.columnModel.getPivotColumns()),n=this.gridOptionsService.isGetRowHeightFunction();return{valueCols:e,rowGroupCols:t,pivotCols:i,pivotMode:this.columnModel.isPivotMode(),filterModel:this.filterManager.isAdvancedFilterEnabled()?this.filterManager.getAdvancedFilterModel():this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),datasource:this.datasource,lastAccessedSequence:new o.RI_,dynamicRowHeight:n}},e.prototype.getParams=function(){return this.storeParams},e.prototype.dispatchModelUpdated=function(t){void 0===t&&(t=!1);var e={type:o.sVA.EVENT_MODEL_UPDATED,animate:!t,keepRenderedRows:!t,newPage:!1,newData:!1};this.eventService.dispatchEvent(e)},e.prototype.onStoreUpdated=function(){this.pauseStoreUpdateListening||(this.updateRowIndexesAndBounds(),this.dispatchModelUpdated())},e.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},e.prototype.onRowHeightChanged=function(){this.updateRowIndexesAndBounds(),this.dispatchModelUpdated()},e.prototype.updateRowIndexesAndBounds=function(){var t=this.getRootStore();t&&t.setDisplayIndexes(new o.RI_,{value:0})},e.prototype.retryLoads=function(){var t=this.getRootStore();t&&(t.retryLoads(),this.onStoreUpdated())},e.prototype.getRow=function(t){var e=this.getRootStore();if(e)return e.getRowUsingDisplayIndex(t)},e.prototype.expandAll=function(t){this.pauseStoreUpdateListening=!0,this.forEachNode((function(e){e.stub||e.hasChildren()&&e.setExpanded(t)})),this.pauseStoreUpdateListening=!1,this.onStoreUpdated()},e.prototype.refreshAfterFilter=function(t,e){this.storeParams&&(this.storeParams.filterModel=t);var i=this.getRootStore();i&&(i.refreshAfterFilter(e),this.onStoreUpdated())},e.prototype.getRootStore=function(){if(this.rootNode&&this.rootNode.childStore)return this.rootNode.childStore},e.prototype.getRowCount=function(){var t=this.getRootStore();return t?t.getDisplayIndexEnd():0},e.prototype.getTopLevelRowCount=function(){var t=this.getRootStore();return t?t.getRowCount():1},e.prototype.getTopLevelRowDisplayedIndex=function(t){var e=this.getRootStore();return e?e.getTopLevelRowDisplayedIndex(t):t},e.prototype.getRowBounds=function(t){var e=this.getRootStore();return e?e.getRowBounds(t):{rowTop:0,rowHeight:this.gridOptionsService.getRowHeightAsNumber()}},e.prototype.getBlockStates=function(){var t=this.getRootStore();if(t){var e={};return t.forEachStoreDeep((function(t){if(t instanceof ME){var i=t.getBlockStateJson(),o=i.id,n=i.state;e[o]=n}else{if(!(t instanceof HE))throw new Error("AG Grid: Unsupported store type");Object.entries(t.getBlockStates()).forEach((function(t){var i=YE(t,2),o=i[0],n=i[1];e[o]=n}))}})),e}},e.prototype.getRowIndexAtPixel=function(t){var e=this.getRootStore();return t<=0||!e?0:e.getRowIndexAtPixel(t)},e.prototype.isEmpty=function(){return!1},e.prototype.isRowsToRender=function(){return null!=this.getRootStore()&&this.getRowCount()>0},e.prototype.getType=function(){return"serverSide"},e.prototype.forEachNode=function(t){var e=this.getRootStore();e&&e.forEachNodeDeep(t)},e.prototype.forEachNodeAfterFilterAndSort=function(t,e){void 0===e&&(e=!1);var i=this.getRootStore();i&&i.forEachNodeDeepAfterFilterAndSort(t,void 0,e)},e.prototype.executeOnStore=function(t,e){if(!this.started)return!1;var i=this.getRootStore();if(!i)return!0;var o=i.getChildStore(t);return o&&e(o),!0},e.prototype.refreshStore=function(t){void 0===t&&(t={});var e=t.route?t.route:[];this.executeOnStore(e,(function(e){return e.refreshStore(1==t.purge)}))},e.prototype.getStoreState=function(){var t=[],e=this.getRootStore();return e&&e.addStoreStates(t),t},e.prototype.getNodesInRangeForSelection=function(t,e){if(!o._.exists(t))return[];if(!e)return[t];var i=t.rowIndex,n=e.rowIndex;if(null===i||null===n)return[t];var r=[],s=YE([i,n].sort((function(t,e){return t-e})),2),a=s[0],l=s[1];return this.forEachNode((function(t){var e=t.rowIndex;null==e||t.stub||e>=a&&e<=l&&r.push(t)})),r.length!==l-a+1?[t]:r},e.prototype.getRowNode=function(t){var e;return this.forEachNode((function(i){i.id===t&&(e=i),i.detailNode&&i.detailNode.id===t&&(e=i.detailNode)})),e},e.prototype.isRowPresent=function(t){return!!this.getRowNode(t.id)},e.prototype.setRowCount=function(t,e){var i=this.getRootStore();if(i){if(i instanceof HE)return void i.setRowCount(t,e);console.error("AG Grid: Infinite scrolling must be enabled in order to set the row count.")}},KE([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),KE([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),KE([(0,o.dsm)("sortController")],e.prototype,"sortController",void 0),KE([(0,o.dsm)("rowRenderer")],e.prototype,"rowRenderer",void 0),KE([(0,o.dsm)("ssrmSortService")],e.prototype,"sortListener",void 0),KE([(0,o.dsm)("ssrmNodeManager")],e.prototype,"nodeManager",void 0),KE([(0,o.dsm)("ssrmStoreFactory")],e.prototype,"storeFactory",void 0),KE([(0,o.dsm)("beans")],e.prototype,"beans",void 0),KE([(0,o.Xx1)("pivotColDefService")],e.prototype,"pivotColDefService",void 0),KE([o.yah],e.prototype,"destroyDatasource",null),KE([o.o7C],e.prototype,"addEventListeners",null),KE([o.yah],e.prototype,"destroyRootStore",null),e=KE([(0,o.dR4)("rowModel")],e)}(o.XQb),$E=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),qE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ZE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return $E(e,t),e.prototype.loadFromDatasource=function(t){var e=t.storeParams,i=t.parentBlock,o=t.parentNode.getGroupKeys();if(e.datasource){var n={startRow:t.startRow,endRow:t.endRow,rowGroupCols:e.rowGroupCols,valueCols:e.valueCols,pivotCols:e.pivotCols,pivotMode:e.pivotMode,groupKeys:o,filterModel:e.filterModel,sortModel:e.sortModel},r={success:t.success,fail:t.fail,request:n,parentNode:t.parentNode,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context};window.setTimeout((function(){e.datasource&&i.isAlive()?e.datasource.getRows(r):t.fail()}),0)}},e.prototype.getChildStore=function(t,e,i){if(o._.missingOrEmpty(t))return e;var n=i(t[0]);if(n){if(1===t.length&&!n.childStore){var r=this.serverSideRowModel.getParams();n.childStore=this.createBean(this.storeFactory.createStore(r,n))}var s=t.slice(1,t.length),a=n.childStore;return a?a.getChildStore(s):null}return null},e.prototype.isServerRefreshNeeded=function(t,e,i){if(i.valueColChanged||i.secondaryColChanged)return!0;var o=t.level+1;if(!(o<e.length))return!0;var n=e[o].id;if(i.changedColumns.indexOf(n)>-1)return!0;var r=this.columnModel.getAllGridColumns().filter((function(t){return t.getColDef().showRowGroup&&i.changedColumns.includes(t.getId())})).map((function(t){return t.getColDef().showRowGroup})).some((function(t){return!0===t||t===n}));return r},e.prototype.getServerSideInitialRowCount=function(){return this.gridOptionsService.get("serverSideInitialRowCount")},e.prototype.assertRowModelIsServerSide=function(t){return!!this.gridOptionsService.isRowModelType("serverSide")||(o._.warnOnce("The '".concat(t,"' property can only be used with the Server Side Row Model.")),!1)},e.prototype.assertNotTreeData=function(t){return!this.gridOptionsService.get("treeData")||(o._.warnOnce("The '".concat(t,"' property cannot be used while using tree data.")),!1)},e.prototype.isServerSideSortAllLevels=function(){return this.gridOptionsService.get("serverSideSortAllLevels")&&this.assertRowModelIsServerSide("serverSideSortAllLevels")},e.prototype.isServerSideOnlyRefreshFilteredGroups=function(){return this.gridOptionsService.get("serverSideOnlyRefreshFilteredGroups")&&this.assertRowModelIsServerSide("serverSideOnlyRefreshFilteredGroups")},e.prototype.isServerSideSortOnServer=function(){return this.gridOptionsService.get("serverSideSortOnServer")&&this.assertRowModelIsServerSide("serverSideSortOnServer")&&this.assertNotTreeData("serverSideSortOnServer")},e.prototype.isServerSideFilterOnServer=function(){return this.gridOptionsService.get("serverSideFilterOnServer")&&this.assertRowModelIsServerSide("serverSideFilterOnServer")&&this.assertNotTreeData("serverSideFilterOnServer")},qE([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),qE([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),qE([(0,o.dsm)("ssrmStoreFactory")],e.prototype,"storeFactory",void 0),e=qE([(0,o.dR4)("ssrmStoreUtils")],e)}(o.XQb),JE=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),QE=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return JE(e,t),e.prototype.createRowNode=function(t){var e=new o.TUE(this.beans),i=null!=t.rowHeight?t.rowHeight:this.gridOptionsService.getRowHeightAsNumber();return e.setRowHeight(i),e.group=t.group,e.leafGroup=t.leafGroup,e.level=t.level,e.uiLevel=t.level,e.parent=t.parent,e.stub=!0,e.__needsRefreshWhenVisible=!1,e.group&&(e.expanded=!1,e.field=t.field,e.rowGroupColumn=t.rowGroupColumn),e},e.prototype.destroyRowNodes=function(t){var e=this;t&&t.forEach((function(t){return e.destroyRowNode(t)}))},e.prototype.destroyRowNode=function(t,e){void 0===e&&(e=!1),t.childStore&&!e&&(this.destroyBean(t.childStore),t.childStore=null),t.sibling&&!t.footer&&this.destroyRowNode(t.sibling,!1),t.clearRowTopAndRowIndex(),null!=t.id&&this.nodeManager.removeNode(t)},e.prototype.setTreeGroupInfo=function(t){t.updateHasChildren();var e=this.gridOptionsService.get("getServerSideGroupKey");t.hasChildren()&&null!=e&&(t.key=e(t.data)),t.hasChildren()||null==t.childStore||(this.destroyBean(t.childStore),t.childStore=null,t.expanded=!1)},e.prototype.setRowGroupInfo=function(t){t.key=this.valueService.getValue(t.rowGroupColumn,t),null!==t.key&&void 0!==t.key||o._.doOnce((function(){console.warn("AG Grid: null and undefined values are not allowed for server side row model keys"),t.rowGroupColumn&&console.warn("column = ".concat(t.rowGroupColumn.getId())),console.warn("data is ",t.data)}),"ServerSideBlock-CannotHaveNullOrUndefinedForKey"),this.beans.gridOptionsService.getGroupIncludeFooter()({node:t})&&(t.createFooter(),t.sibling&&(t.sibling.uiLevel=t.uiLevel+1))},e.prototype.setMasterDetailInfo=function(t){var e=this.gridOptionsService.get("isRowMaster");t.master=null==e||e(t.data)},e.prototype.updateDataIntoRowNode=function(t,e){if(t.updateData(e),this.gridOptionsService.get("treeData"))this.setTreeGroupInfo(t),this.setChildCountIntoRowNode(t);else if(t.group){if(this.setChildCountIntoRowNode(t),!t.footer)this.beans.gridOptionsService.getGroupIncludeFooter()({node:t})?t.sibling?t.sibling.updateData(e):t.createFooter():t.sibling&&t.destroyFooter()}else this.gridOptionsService.get("masterDetail")},e.prototype.setDataIntoRowNode=function(t,e,i,n){var r;t.stub=!1;var s=this.gridOptionsService.get("treeData");o._.exists(e)?(t.setDataAndId(e,i),s?this.setTreeGroupInfo(t):t.group?this.setRowGroupInfo(t):this.gridOptionsService.get("masterDetail")&&this.setMasterDetailInfo(t)):(t.setDataAndId(void 0,void 0),t.key=null),(s||t.group)&&(this.setGroupDataIntoRowNode(t),this.setChildCountIntoRowNode(t)),o._.exists(e)&&(t.setRowHeight(this.gridOptionsService.getRowHeightForNode(t,!1,n).height),null===(r=t.sibling)||void 0===r||r.setRowHeight(this.gridOptionsService.getRowHeightForNode(t.sibling,!1,n).height))},e.prototype.setChildCountIntoRowNode=function(t){var e=this.gridOptionsService.get("getChildCount");e&&t.setAllChildrenCount(e(t.data))},e.prototype.setGroupDataIntoRowNode=function(t){var e=this,i=this.columnModel.getGroupDisplayColumns(),o=this.gridOptionsService.get("treeData");i.forEach((function(i){if(null==t.groupData&&(t.groupData={}),o)t.groupData[i.getColId()]=t.key;else if(i.isRowGroupDisplayed(t.rowGroupColumn.getId())){var n=e.valueService.getValue(t.rowGroupColumn,t);t.groupData[i.getColId()]=n}}))},e.prototype.clearDisplayIndex=function(t){(t.clearRowTopAndRowIndex(),t.hasChildren()&&o._.exists(t.childStore))&&t.childStore.clearDisplayIndexes();t.master&&t.detailNode&&t.detailNode.clearRowTopAndRowIndex()},e.prototype.setDisplayIndex=function(t,e,i){if((t.setRowIndex(e.next()),t.setRowTop(i.value),i.value+=t.rowHeight,!t.footer)&&(t.master&&(t.expanded&&t.detailNode?(t.detailNode.setRowIndex(e.next()),t.detailNode.setRowTop(i.value),i.value+=t.detailNode.rowHeight):t.detailNode&&t.detailNode.clearRowTopAndRowIndex()),t.hasChildren()&&o._.exists(t.childStore))){var n=t.childStore;t.expanded?n.setDisplayIndexes(e,i):n.clearDisplayIndexes()}},e.prototype.binarySearchForDisplayIndex=function(t,e){var i=0,n=e.length-1;if(o._.missing(n)||o._.missing(i))console.warn("AG Grid: error: topPointer = ".concat(n,", bottomPointer = ").concat(i));else for(;;){var r=Math.floor((i+n)/2),s=e[r];if(s.rowIndex===t)return s;var a=s.master&&s.expanded,l=s.detailNode;if(a&&l&&l.rowIndex===t)return s.detailNode;var c=s.childStore;if(s.expanded&&c&&c.isDisplayIndexInStore(t))return c.getRowUsingDisplayIndex(t);if(s.rowIndex<t)i=r+1;else{if(!(s.rowIndex>t))return void console.warn("AG Grid: error: unable to locate rowIndex = ".concat(t," in cache"));n=r-1}}},e.prototype.extractRowBounds=function(t,e){var i=function(t){return{rowHeight:t.rowHeight,rowTop:t.rowTop}};if(t.rowIndex===e)return i(t);if(t.hasChildren()&&t.expanded&&o._.exists(t.childStore)){var n=t.childStore;if(n.isDisplayIndexInStore(e))return n.getRowBounds(e)}else if(t.master&&t.expanded&&o._.exists(t.detailNode)&&t.detailNode.rowIndex===e)return i(t.detailNode)},e.prototype.getIndexAtPixel=function(t,e){if(t.isPixelInRange(e))return t.rowIndex;var i=t.master&&t.expanded,n=t.detailNode;if(i&&n&&n.isPixelInRange(e))return t.detailNode.rowIndex;if(t.hasChildren()&&t.expanded&&o._.exists(t.childStore)){var r=t.childStore;if(r.isPixelInRange(e))return r.getRowIndexAtPixel(e)}return null},e.prototype.createNodeIdPrefix=function(t){for(var e=[],i=t;i&&i.level>=0;)""===i.key?e.push("ag-Grid-MissingKey"):e.push(i.key),i=i.parent;if(e.length>0)return e.reverse().join("-")},e.prototype.checkOpenByDefault=function(t){return this.expansionService.checkOpenByDefault(t)},QE([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),QE([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),QE([(0,o.dsm)("ssrmNodeManager")],e.prototype,"nodeManager",void 0),QE([(0,o.dsm)("beans")],e.prototype,"beans",void 0),QE([(0,o.dsm)("expansionService")],e.prototype,"expansionService",void 0),e=QE([(0,o.dR4)("ssrmBlockUtils")],e)}(o.XQb),eO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},iO=function(){function t(){this.rowNodes={}}return t.prototype.addRowNode=function(t){var e=t.id;this.rowNodes[e]&&(console.warn("AG Grid: Duplicate node id ".concat(t.id,". Row ID's are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.")),console.warn("first instance",this.rowNodes[e].data),console.warn("second instance",t.data)),this.rowNodes[e]=t},t.prototype.removeNode=function(t){var e=t.id;this.rowNodes[e]&&(this.rowNodes[e]=void 0)},t.prototype.clear=function(){this.rowNodes={}},eO([o.yah],t.prototype,"clear",null),t=eO([(0,o.dR4)("ssrmNodeManager")],t)}(),oO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),nO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},rO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.asyncTransactions=[],e}return oO(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")},e.prototype.applyTransactionAsync=function(t,e){null==this.asyncTransactionsTimeout&&this.scheduleExecuteAsync(),this.asyncTransactions.push({transaction:t,callback:e})},e.prototype.scheduleExecuteAsync=function(){var t=this,e=this.gridOptionsService.getAsyncTransactionWaitMillis();this.asyncTransactionsTimeout=window.setTimeout((function(){t.executeAsyncTransactions()}),e)},e.prototype.executeAsyncTransactions=function(){var t=this;if(this.asyncTransactions){var e=[],i=[],n=[],r=!1;if(this.asyncTransactions.forEach((function(s){var a;t.serverSideRowModel.executeOnStore(s.transaction.route,(function(t){a=t.applyTransaction(s.transaction)}))?void 0==a&&(a={status:o.a8A.StoreNotFound}):a={status:o.a8A.StoreNotStarted},i.push(a),a.status==o.a8A.StoreLoading?n.push(s):(s.callback&&e.push((function(){return s.callback(a)})),a.status===o.a8A.Applied&&(r=!0))})),e.length>0&&window.setTimeout((function(){e.forEach((function(t){return t()}))}),0),this.asyncTransactionsTimeout=void 0,this.asyncTransactions=n,r&&(this.valueCache.onDataChanged(),this.eventService.dispatchEvent({type:o.sVA.EVENT_STORE_UPDATED})),i.length>0){var s={type:o.sVA.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:i};this.eventService.dispatchEvent(s)}}},e.prototype.flushAsyncTransactions=function(){null!=this.asyncTransactionsTimeout&&clearTimeout(this.asyncTransactionsTimeout),this.executeAsyncTransactions()},e.prototype.applyTransaction=function(t){var e;if(this.serverSideRowModel.executeOnStore(t.route,(function(i){e=i.applyTransaction(t)}))){if(e){if(this.valueCache.onDataChanged(),e.remove){var i=e.remove.map((function(t){return t.id}));this.selectionService.deleteSelectionStateFromParent(t.route||[],i)}return this.eventService.dispatchEvent({type:o.sVA.EVENT_STORE_UPDATED}),e}return{status:o.a8A.StoreNotFound}}return{status:o.a8A.StoreNotStarted}},nO([(0,o.dsm)("rowNodeBlockLoader")],e.prototype,"rowNodeBlockLoader",void 0),nO([(0,o.dsm)("valueCache")],e.prototype,"valueCache",void 0),nO([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),nO([(0,o.dsm)("rowRenderer")],e.prototype,"rowRenderer",void 0),nO([(0,o.dsm)("selectionService")],e.prototype,"selectionService",void 0),nO([o.o7C],e.prototype,"postConstruct",null),e=nO([(0,o.dR4)("ssrmTransactionManager")],e)}(o.XQb),sO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),aO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},lO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return sO(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,o.sVA.EVENT_ROW_GROUP_OPENED,this.onRowGroupOpened.bind(this))},e.prototype.onRowGroupOpened=function(t){var e=t.node;if(e.expanded){if(e.master)this.createDetailNode(e);else if(o._.missing(e.childStore)){var i=this.serverSideRowModel.getParams();e.childStore=this.createBean(this.storeFactory.createStore(i,e))}}else this.gridOptionsService.get("purgeClosedRowNodes")&&o._.exists(e.childStore)&&(e.childStore=this.destroyBean(e.childStore));var n={type:o.sVA.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(n)},e.prototype.createDetailNode=function(t){if(o._.exists(t.detailNode))return t.detailNode;var e=new o.TUE(this.beans);e.detail=!0,e.selectable=!1,e.parent=t,o._.exists(t.id)&&(e.id="detail_"+t.id),e.data=t.data,e.level=t.level+1;var i=this.gridOptionsService.getRowHeightForNode(e).height;return e.rowHeight=i||200,t.detailNode=e,e},aO([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),aO([(0,o.dsm)("ssrmStoreFactory")],e.prototype,"storeFactory",void 0),aO([(0,o.dsm)("beans")],e.prototype,"beans",void 0),aO([o.o7C],e.prototype,"postConstruct",null),e=aO([(0,o.dR4)("ssrmExpandListener")],e)}(o.XQb),cO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),dO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},uO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return cO(e,t),e.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("serverSide")&&this.addManagedListener(this.eventService,o.sVA.EVENT_SORT_CHANGED,this.onSortChanged.bind(this))},e.prototype.onSortChanged=function(){var t=this.serverSideRowModel.getParams();if(t){var e=this.sortController.getSortModel(),i=t.sortModel,o=this.findChangedColumnsInSort(e,i),n={valueColChanged:this.listenerUtils.isSortingWithValueColumn(o),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(o),changedColumns:o};this.serverSideRowModel.refreshAfterSort(e,n)}},e.prototype.findChangedColumnsInSort=function(t,e){var i=[];[t,e].forEach((function(t){if(t){var e=t.map((function(t){return t.colId}));i=i.concat(e)}}));return i.filter((function(i){var o=e.find((function(t){return t.colId===i})),n=t.find((function(t){return t.colId===i}));return function(t,e){return(t?t.sort:null)!==(e?e.sort:null)}(o,n)||function(i,o){return(i?e.indexOf(i):-1)!==(o?t.indexOf(o):-1)}(o,n)}))},dO([(0,o.dsm)("sortController")],e.prototype,"sortController",void 0),dO([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),dO([(0,o.dsm)("ssrmListenerUtils")],e.prototype,"listenerUtils",void 0),dO([o.o7C],e.prototype,"postConstruct",null),e=dO([(0,o.dR4)("ssrmSortService")],e)}(o.XQb),hO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),pO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},fO=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return hO(e,t),e.prototype.postConstruct=function(){var t=this;this.gridOptionsService.isRowModelType("serverSide")&&(this.addManagedListener(this.eventService,o.sVA.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,(function(){return t.onFilterChanged(!0)})),this.addManagedListener(this.eventService,o.sVA.EVENT_FILTER_CHANGED,(function(){return t.onFilterChanged()})))},e.prototype.onFilterChanged=function(t){var e=this.serverSideRowModel.getParams();if(e){var i,o,n=e.filterModel;if(this.filterManager.isAdvancedFilterEnabled()){i=this.filterManager.getAdvancedFilterModel();var r=t?Object.keys(null!==n&&void 0!==n?n:{}):this.getAdvancedFilterColumns(n),s=this.getAdvancedFilterColumns(i);r.forEach((function(t){return s.add(t)})),o=Array.from(s)}else if(i=this.filterManager.getFilterModel(),t){var a=this.getAdvancedFilterColumns(n);Object.keys(i).forEach((function(t){return a.add(t)})),o=Array.from(a)}else o=this.findChangedColumns(n,i);var l={valueColChanged:this.listenerUtils.isSortingWithValueColumn(o),secondaryColChanged:this.listenerUtils.isSortingWithSecondaryColumn(o),changedColumns:o};this.serverSideRowModel.refreshAfterFilter(i,l)}},e.prototype.findChangedColumns=function(t,e){var i={};Object.keys(t).forEach((function(t){return i[t]=!0})),Object.keys(e).forEach((function(t){return i[t]=!0}));var o=[];return Object.keys(i).forEach((function(i){JSON.stringify(t[i])!=JSON.stringify(e[i])&&o.push(i)})),o},e.prototype.getAdvancedFilterColumns=function(t){var e=new Set;if(!t)return e;var i=function(t){"join"===t.filterType?t.conditions.forEach((function(t){return i(t)})):e.add(t.colId)};return i(t),e},pO([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),pO([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),pO([(0,o.dsm)("ssrmListenerUtils")],e.prototype,"listenerUtils",void 0),pO([o.o7C],e.prototype,"postConstruct",null),e=pO([(0,o.dR4)("ssrmFilterListener")],e)}(o.XQb),gO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},vO=function(){function t(){}return t.prototype.createStore=function(t,e){var i=this.getStoreParams(t,e);return new(i.suppressInfiniteScroll?ME:HE)(t,i,e)},t.prototype.getStoreParams=function(t,e){var i=this.getLevelSpecificParams(e),o=this.isInfiniteScroll(i);return{suppressInfiniteScroll:!o,cacheBlockSize:this.getBlockSize(o,i),maxBlocksInCache:this.getMaxBlocksInCache(o,t,i)}},t.prototype.getMaxBlocksInCache=function(t,e,i){if(t){var n=i&&null!=i.maxBlocksInCache?i.maxBlocksInCache:this.gridOptionsService.get("maxBlocksInCache");if(null!=n&&n>=0)if(e.dynamicRowHeight){var r="Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.";o._.warnOnce(r)}else{if(!this.columnModel.isAutoRowHeightActive())return n;r="Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.";o._.warnOnce(r)}}},t.prototype.getBlockSize=function(t,e){if(t){var i=e&&null!=e.cacheBlockSize?e.cacheBlockSize:this.gridOptionsService.get("cacheBlockSize");return null!=i&&i>0?i:100}},t.prototype.getLevelSpecificParams=function(t){var e=this.gridOptionsService.getCallback("getServerSideGroupLevelParams");if(e)return e({level:t.level+1,parentRowNode:t.level>=0?t:void 0,rowGroupColumns:this.columnModel.getRowGroupColumns(),pivotColumns:this.columnModel.getPivotColumns(),pivotMode:this.columnModel.isPivotMode()})},t.prototype.isInfiniteScroll=function(t){return!(t&&null!=t.suppressInfiniteScroll?t.suppressInfiniteScroll:this.isSuppressServerSideInfiniteScroll())},t.prototype.isSuppressServerSideInfiniteScroll=function(){return this.gridOptionsService.get("suppressServerSideInfiniteScroll")},gO([(0,o.dsm)("gridOptionsService")],t.prototype,"gridOptionsService",void 0),gO([(0,o.dsm)("columnModel")],t.prototype,"columnModel",void 0),t=gO([(0,o.dR4)("ssrmStoreFactory")],t)}(),yO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mO=function(){function t(){}return t.prototype.isSortingWithValueColumn=function(t){for(var e=this.columnModel.getValueColumns().map((function(t){return t.getColId()})),i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return!0;return!1},t.prototype.isSortingWithSecondaryColumn=function(t){if(!this.columnModel.getSecondaryColumns())return!1;for(var e=this.columnModel.getSecondaryColumns().map((function(t){return t.getColId()})),i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return!0;return!1},yO([(0,o.dsm)("columnModel")],t.prototype,"columnModel",void 0),t=yO([(0,o.dR4)("ssrmListenerUtils")],t)}(),bO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),SO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},xO=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},CO=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},wO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedState={selectAll:!1,toggledNodes:new Set},e.lastSelected=null,e.selectAllUsed=!1,e.selectedNodes={},e}return bO(e,t),e.prototype.init=function(){var t=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.addManagedPropertyListener("rowSelection",(function(e){t.rowSelection=e.currentValue}))},e.prototype.getSelectedState=function(){return{selectAll:this.selectedState.selectAll,toggledNodes:CO([],xO(this.selectedState.toggledNodes),!1)}},e.prototype.setSelectedState=function(t){var e={selectAll:!1,toggledNodes:new Set};"object"===typeof t?"selectAll"in t&&"boolean"===typeof t.selectAll?(e.selectAll=t.selectAll,"toggledNodes"in t&&Array.isArray(t.toggledNodes)?(t.toggledNodes.forEach((function(t){"string"===typeof t?e.toggledNodes.add(t):console.warn("AG Grid: Provided ids must be of string type. Invalid id provided: ".concat(t))})),this.selectedState=e):console.error("AG Grid: `toggledNodes` must be an array of string ids.")):console.error("AG Grid: Select all status should be of boolean type."):console.error("AG Grid: The provided selection state should be an object.")},e.prototype.deleteSelectionStateFromParent=function(t,e){var i=this;if(0===this.selectedState.toggledNodes.size)return!1;var o=!1;return e.forEach((function(t){i.selectedState.toggledNodes.delete(t)&&(o=!0)})),o},e.prototype.setNodesSelected=function(t){var e,i=this;if(0===t.nodes.length)return 0;var o=t.clearSelection&&t.newValue&&!t.rangeSelect;if("multiple"!==this.rowSelection||o){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when rowSelection is set to 'single'");var n=t.nodes[0];return t.newValue?(this.selectedNodes=((e={})[n.id]=n,e),this.selectedState={selectAll:!1,toggledNodes:new Set([n.id])}):(this.selectedNodes={},this.selectedState={selectAll:!1,toggledNodes:new Set}),this.lastSelected=n.id,1}var r=function(e){t.newValue?i.selectedNodes[e.id]=e:delete i.selectedNodes[e.id];var o=e.selectable;t.newValue===i.selectedState.selectAll||!o?i.selectedState.toggledNodes.delete(e.id):i.selectedState.toggledNodes.add(e.id)};if(t.rangeSelect&&this.lastSelected){if(t.nodes.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");n=t.nodes[0];var s=this.rowModel.getRowNode(this.lastSelected);return this.rowModel.getNodesInRangeForSelection(n,null!==s&&void 0!==s?s:null).forEach(r),this.lastSelected=n.id,1}return t.nodes.forEach(r),this.lastSelected=t.nodes[t.nodes.length-1].id,1},e.prototype.processNewRow=function(t){this.selectedNodes[t.id]&&(this.selectedNodes[t.id]=t)},e.prototype.isNodeSelected=function(t){var e=this.selectedState.toggledNodes.has(t.id);return this.selectedState.selectAll?!e:e},e.prototype.getSelectedNodes=function(){return this.selectAllUsed&&console.warn("AG Grid: getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model.\n                Use `api.getServerSideSelectionState()` instead."),Object.values(this.selectedNodes)},e.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(t){return t.data}))},e.prototype.getSelectionCount=function(){return this.selectedState.selectAll?-1:this.selectedState.toggledNodes.size},e.prototype.clearOtherNodes=function(t,e){var i=this.selectedState.selectAll?1:this.selectedState.toggledNodes.size-1;this.selectedState={selectAll:!1,toggledNodes:new Set([t.id])},this.rowModel.forEachNode((function(i){i!==t&&i.selectThisNode(!1,void 0,e)}));var n={type:o.sVA.EVENT_SELECTION_CHANGED,source:e};return this.eventService.dispatchEvent(n),i},e.prototype.isEmpty=function(){var t;return!this.selectedState.selectAll&&!(null===(t=this.selectedState.toggledNodes)||void 0===t?void 0:t.size)},e.prototype.selectAllRowNodes=function(t){this.selectedState={selectAll:!0,toggledNodes:new Set},this.selectedNodes={},this.selectAllUsed=!0},e.prototype.deselectAllRowNodes=function(t){this.selectedState={selectAll:!1,toggledNodes:new Set},this.selectedNodes={}},e.prototype.getSelectAllState=function(t,e){return this.selectedState.selectAll?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},SO([(0,o.dsm)("rowModel")],e.prototype,"rowModel",void 0),SO([o.o7C],e.prototype,"init",null),e}(o.XQb),EO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),OO=function(){return OO=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},OO.apply(this,arguments)},DO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},AO=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i},TO=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},MO=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},kO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selectedState={selectAllChildren:!1,toggledNodes:new Map},e.lastSelected=null,e}return EO(e,t),e.prototype.init=function(){var t=this;this.addManagedListener(this.eventService,o.sVA.EVENT_MODEL_UPDATED,(function(){return t.removeRedundantState()})),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){return t.selectionService.reset("rowGroupChanged")}))},e.prototype.getSelectedState=function(){var t=this,e=function(i,o,n){var r={nodeId:n};if(o<=t.columnModel.getRowGroupColumns().length&&(r.selectAllChildren=i.selectAllChildren),i.toggledNodes.size){var s=[];i.toggledNodes.forEach((function(t,i){var n=e(t,o+1,i);s.push(n)})),r.toggledNodes=s}return r};return e(this.selectedState,0)},e.prototype.setSelectedState=function(t){var e=function(t,i){var o,n;if("object"!==typeof t)throw new Error("AG Grid: Each provided state object must be an object.");if("selectAllChildren"in t&&"boolean"!==typeof t.selectAllChildren)throw new Error("AG Grid: `selectAllChildren` must be a boolean value or undefined.");if("toggledNodes"in t){if(!Array.isArray(t.toggledNodes))throw new Error("AG Grid: `toggledNodes` must be an array.");if(!t.toggledNodes.every((function(t){return"object"===typeof t&&"nodeId"in t&&"string"===typeof t.nodeId})))throw new Error("AG Grid: Every `toggledNode` requires an associated string id.")}var r=null!==(o=t.selectAllChildren)&&void 0!==o?o:!i,s=null===(n=t.toggledNodes)||void 0===n?void 0:n.map((function(t){return[t.nodeId,e(t,r)]})),a=null===s||void 0===s?void 0:s.some((function(t){var e=TO(t,2);e[0];var i=e[1];return r===i.selectAllChildren&&0===i.toggledNodes.size}));if(a)throw new Error("\n                    AG Grid: AG Grid: Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule.\n                    Please rebuild the selection state and reapply it.\n                ");return{selectAllChildren:r,toggledNodes:new Map(s)}};try{this.selectedState=e(t,!!t.selectAllChildren)}catch(i){console.error(i.message)}},e.prototype.deleteSelectionStateFromParent=function(t,e){for(var i=this.selectedState,o=MO([],TO(t),!1);i&&o.length;)i=i.toggledNodes.get(o.pop());if(!i)return!1;var n=!1;return e.forEach((function(t){(null===i||void 0===i?void 0:i.toggledNodes.delete(t))&&(n=!0)})),n&&this.removeRedundantState(),n},e.prototype.setNodesSelected=function(t){var e=this,i=t.nodes,o=AO(t,["nodes"]);if(0===i.length)return 0;if(t.rangeSelect){if(i.length>1)throw new Error("AG Grid: cannot select multiple rows when using rangeSelect");var n=i[0],r=this.rowModel.getNodesInRangeForSelection(n,this.lastSelected).map(this.getRouteToNode).sort((function(t,e){return e.length-t.length})),s=new Set;return r.forEach((function(t){s.has(t[t.length-1])||(t.forEach((function(t){return s.add(t)})),e.recursivelySelectNode(t,e.selectedState,OO({node:n},o)))})),this.removeRedundantState(),this.lastSelected=n,1}return t.nodes.forEach((function(t){var i=e.getRouteToNode(t);e.recursivelySelectNode(i,e.selectedState,OO(OO({},o),{node:t}))})),this.removeRedundantState(),this.lastSelected=t.nodes[t.nodes.length-1],1},e.prototype.isNodeSelected=function(t){var e=this.getRouteToNode(t);return this.isNodePathSelected(e,this.selectedState)},e.prototype.isNodePathSelected=function(t,e){var i=TO(t),o=i[0],n=i.slice(1);if(0===n.length){var r=e.toggledNodes.has(o.id);if(o.hasChildren()){var s=e.toggledNodes.get(o.id);if(s&&s.toggledNodes.size)return}return e.selectAllChildren?!r:r}if(e.toggledNodes.has(o.id)){var a=e.toggledNodes.get(o.id);if(a)return this.isNodePathSelected(n,a)}return!!e.selectAllChildren},e.prototype.getRouteToNode=function(t){for(var e=[],i=t;i.parent;)e.push(i),i=i.parent;return e.reverse()},e.prototype.removeRedundantState=function(){var t=this;if(!this.filterManager.isAnyFilterPresent()){var e=function(i,o,n){void 0===i&&(i=t.selectedState),void 0===o&&(o=t.serverSideRowModel.getRootStore());var r=!0,s=!0;return i.toggledNodes.forEach((function(o,n){var a=t.rowModel.getRowNode(n);a||(r=!1);var l=null===a||void 0===a?void 0:a.childStore;l?(e(o,l,a)&&i.selectAllChildren===o.selectAllChildren&&i.toggledNodes.delete(n),o.toggledNodes.size>0&&(s=!1)):o.toggledNodes.size>0&&(s=!1)})),!(!o||!o.isLastRowIndexKnown()||o.getRowCount()!==i.toggledNodes.size)&&(!(!s||!r)&&(i.toggledNodes.clear(),i.selectAllChildren=!i.selectAllChildren,n&&(null===n||void 0===n?void 0:n.isSelected())!==i.selectAllChildren&&n.selectThisNode(i.selectAllChildren,void 0,"api"),!0))};e()}},e.prototype.recursivelySelectNode=function(t,e,i){var o=TO(t),n=o[0],r=o.slice(1);if(n)if(!r.length){var s=n.selectable;if(e.selectAllChildren===i.newValue||!s)return void e.toggledNodes.delete(n.id);var a={selectAllChildren:i.newValue,toggledNodes:new Map};e.toggledNodes.set(n.id,a)}else{var l=e.toggledNodes.has(n.id),c=l?e.toggledNodes.get(n.id):{selectAllChildren:e.selectAllChildren,toggledNodes:new Map};l||e.toggledNodes.set(n.id,c),this.recursivelySelectNode(r,c,i),e.selectAllChildren===c.selectAllChildren&&0===c.toggledNodes.size&&e.toggledNodes.delete(n.id)}},e.prototype.getSelectedNodes=function(){console.warn("AG Grid: `getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model.\n            Use `api.getServerSideSelectionState()` instead.");var t=[];return this.rowModel.forEachNode((function(e){e.isSelected()&&t.push(e)})),t},e.prototype.processNewRow=function(t){},e.prototype.getSelectedRows=function(){return this.getSelectedNodes().map((function(t){return t.data}))},e.prototype.getSelectionCount=function(){return-1},e.prototype.isEmpty=function(){var t;return!this.selectedState.selectAllChildren&&!(null===(t=this.selectedState.toggledNodes)||void 0===t?void 0:t.size)},e.prototype.selectAllRowNodes=function(t){this.selectedState={selectAllChildren:!0,toggledNodes:new Map}},e.prototype.deselectAllRowNodes=function(t){this.selectedState={selectAllChildren:!1,toggledNodes:new Map}},e.prototype.getSelectAllState=function(t,e){return this.selectedState.selectAllChildren?!(this.selectedState.toggledNodes.size>0)||null:this.selectedState.toggledNodes.size>0&&null},DO([(0,o.dsm)("rowModel")],e.prototype,"rowModel",void 0),DO([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),DO([(0,o.dsm)("filterManager")],e.prototype,"filterManager",void 0),DO([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),DO([(0,o.dsm)("selectionService")],e.prototype,"selectionService",void 0),DO([o.o7C],e.prototype,"init",null),e}(o.XQb),RO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),PO=function(){return PO=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},PO.apply(this,arguments)},NO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},LO=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i},_O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return RO(e,t),e.prototype.init=function(){var t=this,e=this.gridOptionsService.get("groupSelectsChildren");this.addManagedPropertyListener("groupSelectsChildren",(function(e){t.destroyBean(t.selectionStrategy);var i=e.currentValue?kO:wO;t.selectionStrategy=t.createManagedBean(new i),t.shotgunResetNodeSelectionState();var n={type:o.sVA.EVENT_SELECTION_CHANGED,source:"api"};t.eventService.dispatchEvent(n)})),this.addManagedPropertyListener("rowSelection",(function(){return t.deselectAllRowNodes({source:"api"})}));var i=e?kO:wO;this.selectionStrategy=this.createManagedBean(new i)},e.prototype.getSelectionState=function(){return this.selectionStrategy.getSelectedState()},e.prototype.setSelectionState=function(t,e){if(!Array.isArray(t)){this.selectionStrategy.setSelectedState(t),this.shotgunResetNodeSelectionState();var i={type:o.sVA.EVENT_SELECTION_CHANGED,source:e};this.eventService.dispatchEvent(i)}},e.prototype.setNodesSelected=function(t){var e=t.nodes,i=LO(t,["nodes"]),n=this.gridOptionsService.get("rowSelection");if(e.length>1&&"multiple"!==n)return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;if(e.length>1&&t.rangeSelect)return console.warn("AG Grid: cannot use range selection when multi selecting rows"),0;var r=PO({nodes:e.filter((function(t){return t.selectable}))},i);if(!r.nodes.length)return 0;var s=this.selectionStrategy.setNodesSelected(r);this.shotgunResetNodeSelectionState(r.source);var a={type:o.sVA.EVENT_SELECTION_CHANGED,source:r.source};return this.eventService.dispatchEvent(a),s},e.prototype.deleteSelectionStateFromParent=function(t,e){if(this.selectionStrategy.deleteSelectionStateFromParent(t,e)){this.shotgunResetNodeSelectionState();var i={type:o.sVA.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(i)}},e.prototype.shotgunResetNodeSelectionState=function(t){var e=this;this.rowModel.forEachNode((function(i){if(!i.stub){var o=e.selectionStrategy.isNodeSelected(i);o!==i.isSelected()&&i.selectThisNode(o,void 0,t)}}))},e.prototype.getSelectedNodes=function(){return this.selectionStrategy.getSelectedNodes()},e.prototype.getSelectedRows=function(){return this.selectionStrategy.getSelectedRows()},e.prototype.getSelectionCount=function(){return this.selectionStrategy.getSelectionCount()},e.prototype.syncInRowNode=function(t,e){this.selectionStrategy.processNewRow(t);var i=this.selectionStrategy.isNodeSelected(t);if(0==i||t.selectable)t.setSelectedInitialValue(i);else{this.selectionStrategy.setNodesSelected({nodes:[t],newValue:!1,source:"api"}),this.shotgunResetNodeSelectionState();var n={type:o.sVA.EVENT_SELECTION_CHANGED,source:"api"};this.eventService.dispatchEvent(n)}},e.prototype.reset=function(){this.selectionStrategy.deselectAllRowNodes({source:"api"})},e.prototype.isEmpty=function(){return this.selectionStrategy.isEmpty()},e.prototype.selectAllRowNodes=function(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.selectAllRowNodes(t),this.rowModel.forEachNode((function(e){e.stub||e.selectThisNode(!0,void 0,t.source)}));var e={type:o.sVA.EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)},e.prototype.deselectAllRowNodes=function(t){(t.justCurrentPage||t.justFiltered)&&console.warn("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'"),this.selectionStrategy.deselectAllRowNodes(t),this.rowModel.forEachNode((function(e){e.stub||e.selectThisNode(!1,void 0,t.source)}));var e={type:o.sVA.EVENT_SELECTION_CHANGED,source:t.source};this.eventService.dispatchEvent(e)},e.prototype.getSelectAllState=function(t,e){return this.selectionStrategy.getSelectAllState(t,e)},e.prototype.updateGroupsFromChildrenSelections=function(t,e){return!1},e.prototype.getBestCostNodeSelection=function(){console.warn("AG Grid: calling gridApi.getBestCostNodeSelection() is only possible when using rowModelType=`clientSide`.")},e.prototype.filterFromSelection=function(){},NO([(0,o.dsm)("rowModel")],e.prototype,"rowModel",void 0),NO([o.o7C],e.prototype,"init",null),e=NO([(0,o.dR4)("selectionService")],e)}(o.XQb),IO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),FO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},GO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.queuedRowIds=new Set,e}return IO(e,t),e.prototype.postConstruct=function(){var e=this;t.prototype.postConstruct.call(this),this.addManagedListener(this.eventService,o.sVA.EVENT_COLUMN_ROW_GROUP_CHANGED,(function(){e.queuedRowIds.clear()}))},e.prototype.checkOpenByDefault=function(t){if(t.isExpandable()){var e=function(){window.setTimeout((function(){return t.setExpanded(!0)}),0)};if(this.queuedRowIds.has(t.id))return this.queuedRowIds.delete(t.id),void e();var i=this.gridOptionsService.getCallback("isServerSideGroupOpenByDefault");if(i)i({data:t.data,rowNode:t})&&e()}},e.prototype.expandRows=function(t){var e=this;t.forEach((function(t){var i=e.serverSideRowModel.getRowNode(t);i?i.setExpanded(!0):e.queuedRowIds.add(t)}))},e.prototype.expandAll=function(t){this.serverSideRowModel.expandAll(t)},e.prototype.onGroupExpandedOrCollapsed=function(){},FO([(0,o.dsm)("rowModel")],e.prototype,"serverSideRowModel",void 0),e=FO([(0,o.dR4)("expansionService")],e)}(o.pkb),BO={version:"31.0.0",moduleName:o.zsj.ServerSideRowModelModule,rowModel:"serverSide",beans:[XE,lO,uO,ZE,tO,iO,rO,fO,vO,mO,_O,GO],dependantModules:[g]},VO=function(){function t(t,e,i,o,n,r,s,a,l,c,d){this.rowModel=t,this.filterParams=e,this.createKey=i,this.caseFormat=o,this.columnModel=n,this.valueService=r,this.treeDataOrGrouping=s,this.treeData=a,this.getDataPath=l,this.groupAllowUnbalanced=c,this.addManagedListener=d}return t.prototype.extractUniqueValuesAsync=function(t,e){var i=this;return new o.oY$((function(n){if(i.rowModel.isRowDataLoaded())n(i.extractUniqueValues(t,e));else var r=i.addManagedListener(o.sVA.EVENT_ROW_COUNT_READY,(function(){null===r||void 0===r||r(),n(i.extractUniqueValues(t,e))}))}))},t.prototype.extractUniqueValues=function(t,e){var i=this,n=new Map,r=this.extractExistingFormattedKeys(e),s=new Set,a=this.treeData&&!!this.getDataPath,l=this.columnModel.getRowGroupColumns(),c=function(t,a){var l=i.caseFormat(t);if(!s.has(l)){s.add(l);var c=t,d=o._.makeNull(a),u=null===r||void 0===r?void 0:r.get(l);null!=u&&(c=u,d=e.get(u)),n.set(c,d)}};return this.rowModel.forEachLeafNode((function(e){if(e.data&&t(e))if(i.treeDataOrGrouping)i.addValueForTreeDataOrGrouping(e,a,l,c);else{var o=i.getValue(e);i.filterParams.convertValuesToStrings?i.addValueForConvertValuesToString(e,o,c):null!=o&&Array.isArray(o)?(o.forEach((function(t){c(i.createKey(t,e),t)})),0===o.length&&c(null,null)):c(i.createKey(o,e),o)}})),n},t.prototype.addValueForConvertValuesToString=function(t,e,i){var n=this.createKey(e,t);null!=n&&Array.isArray(n)?(n.forEach((function(t){var e=o._.toStringOrNull(o._.makeNull(t));i(e,e)})),0===n.length&&i(null,null)):i(n,n)},t.prototype.addValueForTreeDataOrGrouping=function(t,e,i,n){var r,s,a=this;if(e){if(null===(r=t.childrenAfterGroup)||void 0===r?void 0:r.length)return;s=this.getDataPath(t.data)}else(s=i.map((function(e){return a.valueService.getKeyForNode(e,t)}))).push(this.getValue(t));s&&(s=s.map((function(t){return o._.toStringOrNull(o._.makeNull(t))}))),!e&&this.groupAllowUnbalanced&&(null===s||void 0===s?void 0:s.some((function(t){return null==t})))&&(s=s.filter((function(t){return null!=t}))),n(this.createKey(s),s)},t.prototype.getValue=function(t){return this.filterParams.getValue(t)},t.prototype.extractExistingFormattedKeys=function(t){var e=this;if(!t)return null;var i=new Map;return t.forEach((function(t,o){i.set(e.caseFormat(o),o)})),i},t}(),jO=function(){function t(){}return t.SELECT_ALL="__AG_SELECT_ALL__",t.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__",t}(),WO=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zO=function(){function t(t,e,i,o){this.valueFormatterService=t,this.valueFormatter=e,this.formatter=i,this.column=o,this.displayedKeys=[]}return t.prototype.updateDisplayedValuesToAllAvailable=function(t,e,i){this.displayedKeys=Array.from(i)},t.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,i,o,n){var r,s;this.displayedKeys=[];try{for(var a=WO(i),l=a.next();!l.done;l=a.next()){var c=l.value;if(null==c)n&&this.displayedKeys.push(c);else{var d=t(c),u=this.valueFormatterService.formatValue(this.column,null,d,this.valueFormatter,!1);o(this.formatter(u))&&this.displayedKeys.push(c)}}}catch(h){r={error:h}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(r)throw r.error}}},t.prototype.getDisplayedValueCount=function(){return this.displayedKeys.length},t.prototype.getDisplayedItem=function(t){return this.displayedKeys[t]},t.prototype.getSelectAllItem=function(){return jO.SELECT_ALL},t.prototype.getAddSelectionToFilterItem=function(){return jO.ADD_SELECTION_TO_FILTER},t.prototype.getDisplayedKeys=function(){return this.displayedKeys},t.prototype.forEachDisplayedKey=function(t){this.displayedKeys.forEach(t)},t.prototype.someDisplayedKey=function(t){return this.displayedKeys.some(t)},t.prototype.hasGroups=function(){return!1},t.prototype.refresh=function(){},t}(),HO=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},UO=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},KO=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YO=function(){function t(t,e,i,o){this.formatter=t,this.treeListPathGetter=e,this.treeListFormatter=i,this.treeDataOrGrouping=o,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:jO.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:jO.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:jO.ADD_SELECTION_TO_FILTER,expanded:!0,key:jO.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}return t.prototype.updateDisplayedValuesToAllAvailable=function(t,e,i,o){"reload"===o?this.generateItemTree(t,e,i):"otherFilter"===o?(this.updateAvailable(i),this.updateExpandAll()):"miniFilter"===o&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()},t.prototype.updateDisplayedValuesToMatchMiniFilter=function(t,e,i,o,n,r){"reload"===r?this.generateItemTree(t,e,i):"otherFilter"===r&&this.updateAvailable(i),this.updateFilter(o,n),this.updateExpandAll(),this.flattenItems()},t.prototype.generateItemTree=function(t,e,i){var o,n,r;this.allDisplayedItemsTree=[],this.groupsExist=!1;var s=this.getTreeListPathGetter(t,i),a=function(e){var o=t(e),n=null!==(r=s(o))&&void 0!==r?r:[null];n.length>1&&(l.groupsExist=!0);var a,c=i.has(e),d=l.allDisplayedItemsTree,u=[];n.forEach((function(t,i){d||(d=[],a.children=d),a=d.find((function(e){var i;return(null===(i=e.treeKey)||void 0===i?void 0:i.toUpperCase())===(null===t||void 0===t?void 0:t.toUpperCase())})),a||(a={treeKey:t,depth:i,filterPasses:!0,expanded:!1,available:c,parentTreeKeys:u},i===n.length-1&&(a.key=e),d.push(a)),d=a.children,u=UO(UO([],HO(u),!1),[t],!1)}))},l=this;try{for(var c=KO(e),d=c.next();!d.done;d=c.next()){a(d.value)}}catch(u){o={error:u}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(o)throw o.error}}this.updateAvailable(i),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1},t.prototype.getTreeListPathGetter=function(e,i){var n,r;if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return function(t){return t};var s=!1;try{for(var a=KO(i),l=a.next();!l.done;l=a.next()){var c=e(l.value);if(c instanceof Date){s=!0;break}if(null!=c)break}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s?t.DATE_TREE_LIST_PATH_GETTER:(o._.warnOnce("property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date."),function(t){return[String(t)]})},t.prototype.flattenItems=function(){var t=this;this.activeDisplayedItemsFlat=[];var e=function(i){i.forEach((function(i){i.filterPasses&&i.available&&(t.activeDisplayedItemsFlat.push(i),i.children&&i.expanded&&e(i.children))}))};e(this.allDisplayedItemsTree)},t.prototype.resetFilter=function(){var t=function(e){e.children&&e.children.forEach((function(e){t(e)})),e.filterPasses=!0};this.allDisplayedItemsTree.forEach((function(e){return t(e)}))},t.prototype.updateFilter=function(t,e){var i=this,o=function(o){return!!o.available&&(null==o.treeKey?e:t(i.formatter(i.treeListFormatter?i.treeListFormatter(o.treeKey,o.depth,o.parentTreeKeys):o.treeKey)))};this.allDisplayedItemsTree.forEach((function(t){return i.recursiveItemCheck(t,!1,o,"filterPasses")}))},t.prototype.getDisplayedValueCount=function(){return this.activeDisplayedItemsFlat.length},t.prototype.getDisplayedItem=function(t){return this.activeDisplayedItemsFlat[t]},t.prototype.getSelectAllItem=function(){return this.selectAllItem},t.prototype.getAddSelectionToFilterItem=function(){return this.addSelectionToFilterItem},t.prototype.getDisplayedKeys=function(){var t=[];return this.forEachDisplayedKey((function(e){return t.push(e)})),t},t.prototype.forEachDisplayedKey=function(t){var e=function(i,o){i.children?i.expanded&&o||i.children.forEach((function(t){t.filterPasses&&e(t,!1)})):t(i.key)};this.activeDisplayedItemsFlat.forEach((function(t){return e(t,!0)}))},t.prototype.someDisplayedKey=function(t){var e=function(i,o){return i.children?(!i.expanded||!o)&&i.children.some((function(t){return!!t.filterPasses&&e(t,!1)})):t(i.key)};return this.activeDisplayedItemsFlat.some((function(t){return e(t,!0)}))},t.prototype.hasGroups=function(){return this.groupsExist},t.prototype.refresh=function(){this.updateExpandAll(),this.flattenItems()},t.prototype.updateExpandAll=function(){var t=function(e,i,o){var n,r;try{for(var s=KO(e),a=s.next();!a.done;a=s.next()){var l=a.value;if(l.filterPasses&&l.available&&l.children){if(i=i||!!l.expanded,o=o||!l.expanded,i&&o)return;var c=t(l.children,i,o);if(void 0===c)return;c?i=!0:o=!0}}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i&&o?void 0:i},e=this.getSelectAllItem();e.expanded=t(e.children,!1,!1)},t.prototype.recursiveItemCheck=function(t,e,i,o){var n=this,r=!1;t.children&&t.children.forEach((function(s){var a=n.recursiveItemCheck(s,e||i(t),i,o);r=r||a}));var s=e||r||i(t);return t[o]=s,s},t.prototype.updateAvailable=function(t){var e=this,i=function(e){return t.has(e.key)};this.allDisplayedItemsTree.forEach((function(t){return e.recursiveItemCheck(t,!1,i,"available")}))},t.DATE_TREE_LIST_PATH_GETTER=function(t){return t?[String(t.getFullYear()),String(t.getMonth()+1),String(t.getDate())]:null},t}(),XO=function(){function t(t){var e=t.caseFormat;this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=e}return t.prototype.allFilteringKeys=function(){return this.filteringKeys},t.prototype.allFilteringKeysCaseFormatted=function(){return this.filteringKeysCaseFormatted},t.prototype.noAppliedFilteringKeys=function(){return this.hasNoAppliedFilteringKeys},t.prototype.setFilteringKeys=function(t){var e=this;this.filteringKeys=new Set(t),this.hasNoAppliedFilteringKeys=!this.filteringKeys||0===this.filteringKeys.size,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach((function(t){return e.filteringKeysCaseFormatted.add(e.caseFormat(t))}))},t.prototype.addFilteringKey=function(t){null==this.filteringKeys&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(t),this.filteringKeysCaseFormatted.add(this.caseFormat(t)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)},t.prototype.hasCaseFormattedFilteringKey=function(t){return this.filteringKeysCaseFormatted.has(this.caseFormat(t))},t.prototype.hasFilteringKey=function(t){return this.filteringKeys.has(t)},t.prototype.reset=function(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1},t}(),$O=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,n,r=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return s},qO=function(t,e,i){if(i||2===arguments.length)for(var o,n=0,r=e.length;n<r;n++)!o&&n in e||(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};!function(t){t[t.PROVIDED_LIST=0]="PROVIDED_LIST",t[t.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",t[t.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"}(_w||(_w={}));var ZO=function(){function t(t){var e,i=this;this.localEventService=new o.USV,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;var n=t.usingComplexObjects,r=t.columnModel,s=t.valueService,a=t.treeDataTreeList,l=t.groupingTreeList,c=t.filterParams,d=t.gridOptionsService,u=t.valueFormatterService,h=t.valueFormatter,p=t.addManagedListener,f=c.column,g=c.colDef,v=c.textFormatter,y=c.doesRowPassOtherFilter,m=c.suppressSorting,b=c.comparator,S=c.rowModel,x=c.values,C=c.caseSensitive,w=c.convertValuesToStrings,E=c.treeList,O=c.treeListPathGetter,D=c.treeListFormatter;this.filterParams=c,this.gridOptionsService=d,this.setIsLoading=t.setIsLoading,this.translate=t.translate,this.caseFormat=t.caseFormat,this.createKey=t.createKey,this.usingComplexObjects=!!t.usingComplexObjects,this.formatter=v||o.U$F.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=y,this.suppressSorting=m||!1,this.convertValuesToStrings=!!w,this.filteringKeys=new XO({caseFormat:this.caseFormat});var A=null!==b&&void 0!==b?b:g.comparator,T=!!a||!!l;this.compareByValue=!!(n&&A||T||E&&!O),this.entryComparator=T&&!A?this.createTreeDataOrGroupingComparator():!E||O||A?function(t,e){var i=$O(t,2);i[0];var o=i[1],n=$O(e,2);n[0];var r=n[1];return A(o,r)}:function(t,e){var i=$O(t,2);i[0];var n=i[1],r=$O(e,2);r[0];var s=r[1];return o._.defaultComparator(n,s)},this.keyComparator=null!==(e=A)&&void 0!==e?e:o._.defaultComparator,this.caseSensitive=!!C;var M=d.get("getDataPath"),k=d.get("groupAllowUnbalanced");"clientSide"===S.getType()&&(this.clientSideValuesExtractor=new VO(S,this.filterParams,this.createKey,this.caseFormat,r,s,T,!!a,M,k,p)),null==x?this.valuesType=_w.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(x)?_w.PROVIDED_LIST:_w.PROVIDED_CALLBACK,this.providedValues=x),this.displayValueModel=E?new YO(this.formatter,O,D,a||l):new zO(u,h,this.formatter,f),this.updateAllValues().then((function(t){return i.resetSelectionState(t||[])}))}return t.prototype.addEventListener=function(t,e,i){this.localEventService.addEventListener(t,e,i)},t.prototype.removeEventListener=function(t,e,i){this.localEventService.removeEventListener(t,e,i)},t.prototype.updateOnParamsChange=function(t){var e=this;return new o.oY$((function(i){var n=t.values,r=t.textFormatter,s=t.suppressSorting,a=e.providedValues,l=e.suppressSorting;if(e.filterParams=t,e.formatter=r||o.U$F.DEFAULT_FORMATTER,e.suppressSorting=s||!1,e.providedValues=null!==n&&void 0!==n?n:null,e.providedValues!==a||e.suppressSorting!==l){if(n&&0!==n.length){var c=Array.isArray(n)&&n.length>0&&"function"===typeof n[0];e.valuesType=c?_w.PROVIDED_CALLBACK:_w.PROVIDED_LIST}else e.valuesType=_w.TAKEN_FROM_GRID_VALUES,e.providedValues=null;var d=e.getModel();e.updateAllValues().then((function(t){e.setModel(d).then((function(){return i()}))}))}else i()}))},t.prototype.refreshValues=function(){var t=this;return new o.oY$((function(e){t.allValuesPromise.then((function(){var i=t.getModel();t.updateAllValues(),t.setModel(i).then((function(){return e()}))}))}))},t.prototype.overrideValues=function(t){var e=this;return new o.oY$((function(i){e.allValuesPromise.then((function(){e.valuesType=_w.PROVIDED_LIST,e.providedValues=t,e.refreshValues().then((function(){return i()}))}))}))},t.prototype.refreshAfterAnyFilterChanged=function(){var t=this;return this.showAvailableOnly()?this.allValuesPromise.then((function(e){return t.updateAvailableKeys(null!==e&&void 0!==e?e:[],"otherFilter"),!0})):o.oY$.resolve(!1)},t.prototype.isInitialised=function(){return this.initialised},t.prototype.updateAllValues=function(){var t=this;return this.allValuesPromise=new o.oY$((function(e){switch(t.valuesType){case _w.TAKEN_FROM_GRID_VALUES:t.getValuesFromRowsAsync(!1).then((function(i){return e(t.processAllValues(i))}));break;case _w.PROVIDED_LIST:e(t.processAllValues(t.uniqueValues(t.validateProvidedValues(t.providedValues))));break;case _w.PROVIDED_CALLBACK:t.setIsLoading(!0);var i=t.providedValues,o=t.filterParams,n=o.columnApi,r=o.api,s=o.column,a={success:function(i){t.setIsLoading(!1),e(t.processAllValues(t.uniqueValues(t.validateProvidedValues(i))))},colDef:o.colDef,column:s,columnApi:n,api:r,context:t.gridOptionsService.context};window.setTimeout((function(){return i(a)}),0);break;default:throw new Error("Unrecognised valuesType")}})),this.allValuesPromise.then((function(e){return t.updateAvailableKeys(e||[],"reload")})).then((function(){return t.initialised=!0})),this.allValuesPromise},t.prototype.processAllValues=function(t){var e=this.sortKeys(t);return this.allValues=null!==t&&void 0!==t?t:new Map,e},t.prototype.validateProvidedValues=function(t){if(this.usingComplexObjects&&(null===t||void 0===t?void 0:t.length)){var e=t[0];if(e&&"object"!==typeof e&&"function"!==typeof e)null==this.createKey(e)?o._.warnOnce("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types"):o._.warnOnce("Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?")}return t},t.prototype.setValuesType=function(t){this.valuesType=t},t.prototype.getValuesType=function(){return this.valuesType},t.prototype.isKeyAvailable=function(t){return this.availableKeys.has(t)},t.prototype.showAvailableOnly=function(){return this.valuesType===_w.TAKEN_FROM_GRID_VALUES},t.prototype.updateAvailableKeys=function(e,i){var o=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):e;this.availableKeys=new Set(o),this.localEventService.dispatchEvent({type:t.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(i,e)},t.prototype.sortKeys=function(t){var e,i=null!==t&&void 0!==t?t:new Map;return this.suppressSorting?Array.from(i.keys()):(e=this.compareByValue?Array.from(i.entries()).sort(this.entryComparator).map((function(t){return $O(t,1)[0]})):Array.from(i.keys()).sort(this.keyComparator),this.filterParams.excelMode&&i.has(null)&&(e=e.filter((function(t){return null!=t}))).push(null),e)},t.prototype.getParamsForValuesFromRows=function(t){var e=this;if(void 0===t&&(t=!1),!this.clientSideValuesExtractor)return o._.doOnce((function(){console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values")}),"setFilterValueNotCSRM"),null;return{predicate:function(i){return!t||e.doesRowPassOtherFilters(i)},existingValues:t&&!this.caseSensitive?this.allValues:void 0}},t.prototype.getValuesFromRows=function(t){void 0===t&&(t=!1);var e=this.getParamsForValuesFromRows(t);return e?this.clientSideValuesExtractor.extractUniqueValues(e.predicate,e.existingValues):null},t.prototype.getValuesFromRowsAsync=function(t){void 0===t&&(t=!1);var e=this.getParamsForValuesFromRows(t);return e?this.clientSideValuesExtractor.extractUniqueValuesAsync(e.predicate,e.existingValues):o.oY$.resolve(null)},t.prototype.setMiniFilter=function(t){return t=o._.makeNull(t),this.miniFilterText!==t&&(null===t&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=t,this.updateDisplayedValues("miniFilter"),!0)},t.prototype.getMiniFilter=function(){return this.miniFilterText},t.prototype.updateDisplayedValues=function(t,e){var i=this;if("expansion"!==t)if(null!=this.miniFilterText){var o=this.caseFormat(this.formatter(this.miniFilterText)||""),n=function(t){return null!=t&&i.caseFormat(t).indexOf(o)>=0},r=!!this.filterParams.excelMode&&n(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter((function(t){return i.getValue(t)}),e,this.availableKeys,n,r,t)}else this.displayValueModel.updateDisplayedValuesToAllAvailable((function(t){return i.getValue(t)}),e,this.availableKeys,t);else this.displayValueModel.refresh()},t.prototype.getDisplayedValueCount=function(){return this.displayValueModel.getDisplayedValueCount()},t.prototype.getDisplayedItem=function(t){return this.displayValueModel.getDisplayedItem(t)},t.prototype.getSelectAllItem=function(){return this.displayValueModel.getSelectAllItem()},t.prototype.getAddSelectionToFilterItem=function(){return this.displayValueModel.getAddSelectionToFilterItem()},t.prototype.hasSelections=function(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size},t.prototype.getKeys=function(){return Array.from(this.allValues.keys())},t.prototype.getValues=function(){return Array.from(this.allValues.values())},t.prototype.getValue=function(t){return this.allValues.get(t)},t.prototype.setAddCurrentSelectionToFilter=function(t){this.addCurrentSelectionToFilter=t},t.prototype.isInWindowsExcelMode=function(){return"windows"===this.filterParams.excelMode},t.prototype.isAddCurrentSelectionToFilterChecked=function(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter},t.prototype.showAddCurrentSelectionToFilter=function(){return this.isInWindowsExcelMode()&&o._.exists(this.miniFilterText)&&this.miniFilterText.length>0},t.prototype.selectAllMatchingMiniFilter=function(t){var e=this;void 0===t&&(t=!1),null==this.miniFilterText?this.selectedKeys=new Set(this.allValues.keys()):(t&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey((function(t){return e.selectedKeys.add(t)})))},t.prototype.deselectAllMatchingMiniFilter=function(){var t=this;null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey((function(e){return t.selectedKeys.delete(e)}))},t.prototype.selectKey=function(t){this.selectedKeys.add(t)},t.prototype.deselectKey=function(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(t)},t.prototype.isKeySelected=function(t){return this.selectedKeys.has(t)},t.prototype.isEverythingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey((function(e){return!t.isKeySelected(e)}))},t.prototype.isNothingVisibleSelected=function(){var t=this;return!this.displayValueModel.someDisplayedKey((function(e){return t.isKeySelected(e)}))},t.prototype.getModel=function(){if(!this.hasSelections())return null;var t=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(t&&t.size>0){if(this.selectedKeys){var e=new Set(qO(qO([],$O(Array.from(t)),!1),$O(Array.from(this.selectedKeys).filter((function(e){return!t.has(e)}))),!1));return Array.from(e)}return Array.from(t)}return Array.from(this.selectedKeys)},t.prototype.setModel=function(t){var e=this;return this.allValuesPromise.then((function(i){if(null==t)e.resetSelectionState(null!==i&&void 0!==i?i:[]);else{e.selectedKeys.clear();var n=new Map;e.allValues.forEach((function(t,i){n.set(e.caseFormat(i),i)})),t.forEach((function(t){var i=e.caseFormat(o._.makeNull(t)),r=n.get(i);void 0!==r&&e.selectKey(r)}))}}))},t.prototype.uniqueValues=function(t){var e=this,i=new Map,n=new Set;return(null!==t&&void 0!==t?t:[]).forEach((function(t){var r=o._.makeNull(t),s=e.convertAndGetKey(r),a=e.caseFormat(s);n.has(a)||(n.add(a),i.set(s,r))})),i},t.prototype.convertAndGetKey=function(t){return this.convertValuesToStrings?t:this.createKey(t)},t.prototype.resetSelectionState=function(t){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(t)},t.prototype.hasGroups=function(){return this.displayValueModel.hasGroups()},t.prototype.createTreeDataOrGroupingComparator=function(){return function(t,e){var i=$O(t,2);i[0];var n=i[1],r=$O(e,2);r[0];var s=r[1];if(null==n)return null==s?0:-1;if(null==s)return 1;for(var a=0;a<n.length;a++){if(a>=s.length)return 1;var l=o._.defaultComparator(n[a],s[a]);if(0!==l)return l}return 0}},t.prototype.setAppliedModelKeys=function(t){this.filteringKeys.setFilteringKeys(t)},t.prototype.addToAppliedModelKeys=function(t){this.filteringKeys.addFilteringKey(t)},t.prototype.getAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeys()},t.prototype.getCaseFormattedAppliedModelKeys=function(){return this.filteringKeys.allFilteringKeysCaseFormatted()},t.prototype.hasAppliedModelKey=function(t){return this.filteringKeys.hasCaseFormattedFilteringKey(t)},t.prototype.hasAnyAppliedModelKey=function(){return!this.filteringKeys.noAppliedFilteringKeys()},t.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",t}(),JO=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),QO=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},tD=function(t){function e(i){var o,n=this;return(n=t.call(this,i.isGroup?e.GROUP_TEMPLATE:e.TEMPLATE)||this).focusWrapper=i.focusWrapper,n.value=i.value,n.params=i.params,n.translate=i.translate,n.valueFormatter=i.valueFormatter,n.item=i.item,n.isSelected=i.isSelected,n.isTree=i.isTree,n.depth=null!==(o=i.depth)&&void 0!==o?o:0,n.isGroup=i.isGroup,n.groupsExist=i.groupsExist,n.isExpanded=i.isExpanded,n.hasIndeterminateExpandState=i.hasIndeterminateExpandState,n}return JO(e,t),e.prototype.init=function(){var t=this;this.addDestroyFunc((function(){var e;return null===(e=t.destroyCellRendererComponent)||void 0===e?void 0:e.call(t)})),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),o._.setAriaLevel(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),this.params.readOnly||this.eCheckbox.onValueChange((function(e){return t.onCheckboxChanged(!!e)}))},e.prototype.getFocusableElement=function(){return this.focusWrapper},e.prototype.setupExpansion=function(){this.eGroupClosedIcon.appendChild(o._.createIcon("setFilterGroupClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(o._.createIcon("setFilterGroupOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(o._.createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()},e.prototype.onExpandOrContractClicked=function(){this.setExpanded(!this.isExpanded)},e.prototype.setExpanded=function(t,i){if(this.isGroup&&t!==this.isExpanded){this.isExpanded=t;var o={type:e.EVENT_EXPANDED_CHANGED,isExpanded:!!t,item:this.item};i||this.dispatchEvent(o),this.setExpandedIcons(),this.refreshAriaExpanded()}},e.prototype.setExpandedIcons=function(){o._.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?!1===this.isExpanded:!this.isExpanded),o._.setDisplayed(this.eGroupOpenedIcon,!0===this.isExpanded),this.hasIndeterminateExpandState&&o._.setDisplayed(this.eGroupIndeterminateIcon,void 0===this.isExpanded)},e.prototype.onCheckboxChanged=function(t){this.isSelected=t;var i={type:e.EVENT_SELECTION_CHANGED,isSelected:t,item:this.item};this.dispatchEvent(i),this.refreshVariableAriaLabels(),this.refreshAriaChecked()},e.prototype.toggleSelected=function(){this.params.readOnly||this.setSelected(!this.isSelected)},e.prototype.setSelected=function(t,e){this.isSelected=t,this.eCheckbox.setValue(t,e),this.refreshAriaChecked()},e.prototype.refreshVariableAriaLabels=function(){if(this.isTree){var t=this.localeService.getLocaleTextFunc(),e=this.eCheckbox.getValue(),i=void 0===e?t("ariaIndeterminate","indeterminate"):e?t("ariaVisible","visible"):t("ariaHidden","hidden"),n=t("ariaToggleVisibility","Press SPACE to toggle visibility");o._.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel("".concat(n," (").concat(i,")"))}},e.prototype.setupFixedAriaLabels=function(t){if(this.isTree){var e=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value"),i=this.getAriaElement();o._.setAriaLabel(i,"".concat(t," ").concat(e)),o._.setAriaDescribedBy(i,this.eCheckbox.getInputElement().id)}},e.prototype.refreshAriaChecked=function(){var t=this.getAriaElement();o._.setAriaChecked(t,this.eCheckbox.getValue())},e.prototype.refreshAriaExpanded=function(){o._.setAriaExpanded(this.getAriaElement(),!!this.isExpanded)},e.prototype.refresh=function(t,e,i){var o,n;if(this.item=t,e!==this.isSelected&&this.setSelected(e,!0),this.setExpanded(i,!0),this.valueFunction){var r=this.valueFunction();this.setTooltipAndCellRendererParams(r,r),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent&&!(null===(n=(o=this.cellRendererComponent).refresh)||void 0===n?void 0:n.call(o,this.cellRendererParams))){var s=this.cellRendererComponent;this.renderCell(),this.destroyBean(s)}},e.prototype.render=function(){var t=this.params.column,e=this.value,i=null;"function"===typeof e?(this.valueFunction=e,e=i=this.valueFunction()):i=this.isTree?o._.toStringOrNull(e):this.getFormattedValue(t,e),this.setTooltipAndCellRendererParams(e,i),this.renderCell()},e.prototype.setTooltipAndCellRendererParams=function(t,e){if(this.params.showTooltips){var i=null!=e?e:o._.toStringOrNull(t);this.setTooltip(i)}this.cellRendererParams={value:t,valueFormatted:e,api:this.gridOptionsService.api,columnApi:this.gridOptionsService.columnApi,context:this.gridOptionsService.context,colDef:this.params.colDef,column:this.params.column}},e.prototype.getTooltipParams=function(){var e=t.prototype.getTooltipParams.call(this);return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e},e.prototype.getFormattedValue=function(t,e){return this.valueFormatterService.formatValue(t,null,e,this.valueFormatter,!1)},e.prototype.renderCell=function(){var t=this,e=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),i=e?e.newAgStackInstance():void 0;null!=i?i.then((function(e){e&&(t.cellRendererComponent=e,t.eCheckbox.setLabel(e.getGui()),t.destroyCellRendererComponent=function(){return t.destroyBean(e)})})):this.renderCellWithoutCellRenderer()},e.prototype.renderCellWithoutCellRenderer=function(){var t,e=null!==(t=null==this.cellRendererParams.valueFormatted?this.cellRendererParams.value:this.cellRendererParams.valueFormatted)&&void 0!==t?t:this.translate("blanks");"string"!==typeof e&&(o._.warnOnce("Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See ".concat(this.getFrameworkOverrides().getDocLink("filter-set-filter-list/#filter-value-types"))),e=""),this.eCheckbox.setLabel(e),this.setupFixedAriaLabels(e)},e.prototype.getComponentHolder=function(){return this.params.column.getColDef()},e.EVENT_SELECTION_CHANGED="selectionChanged",e.EVENT_EXPANDED_CHANGED="expandedChanged",e.GROUP_TEMPLATE='\n        <div class="ag-set-filter-item" aria-hidden="true">\n            <span class="ag-set-filter-group-icons">\n                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>\n                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>\n            </span>\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',e.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',QO([(0,o.dsm)("valueFormatterService")],e.prototype,"valueFormatterService",void 0),QO([(0,o.dsm)("userComponentFactory")],e.prototype,"userComponentFactory",void 0),QO([(0,o.PIB)("eCheckbox")],e.prototype,"eCheckbox",void 0),QO([(0,o.PIB)("eGroupOpenedIcon")],e.prototype,"eGroupOpenedIcon",void 0),QO([(0,o.PIB)("eGroupClosedIcon")],e.prototype,"eGroupClosedIcon",void 0),QO([(0,o.PIB)("eGroupIndeterminateIcon")],e.prototype,"eGroupIndeterminateIcon",void 0),QO([o.o7C],e.prototype,"init",null),e}(o.uAl),eD={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."},iD=function(){function t(){}return t.prototype.getModelAsString=function(t,e){var i=(t||e.getModel()||{}).values,o=e.getValueModel();if(null==i||null==o)return"";var n=i.filter((function(t){return o.isKeyAvailable(t)})),r=n.length,s=n.slice(0,10).map((function(t){return e.getFormattedValue(t)}));return"(".concat(r,") ").concat(s.join(",")).concat(r>10?",...":"")},t}(),oD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),nD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},rD=function(t){function e(){var e=t.call(this,"setFilter")||this;return e.valueModel=null,e.setFilterParams=null,e.virtualList=null,e.caseSensitive=!1,e.convertValuesToStrings=!1,e.treeDataTreeList=!1,e.groupingTreeList=!1,e.hardRefreshVirtualList=!1,e.noValueFormatterSupplied=!1,e.filterModelFormatter=new iD,e.updateSetFilterOnParamsChange=function(t){var i;e.setFilterParams=t,e.convertValuesToStrings=!!t.convertValuesToStrings,e.caseSensitive=!!t.caseSensitive;var n=null!==(i=t.keyCreator)&&void 0!==i?i:t.colDef.keyCreator;e.setValueFormatter(t.valueFormatter,n,e.convertValuesToStrings,!!t.treeList,!!t.colDef.refData);var r=t.column.getId().startsWith(o.JPk);e.treeDataTreeList=e.gridOptionsService.get("treeData")&&!!t.treeList&&r,e.getDataPath=e.gridOptionsService.get("getDataPath"),e.groupingTreeList=!!e.columnModel.getRowGroupColumns().length&&!!t.treeList&&r,e.createKey=e.generateCreateKey(n,e.convertValuesToStrings,e.treeDataTreeList||e.groupingTreeList)},e}return oD(e,t),e.prototype.postConstruct=function(){t.prototype.postConstruct.call(this)},e.prototype.updateUiVisibility=function(){},e.prototype.createBodyTemplate=function(){return'\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">'.concat(this.translateForSetFilter("loadingOoo"),'</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">').concat(this.translateForSetFilter("noMatches"),'</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>')},e.prototype.handleKeyDown=function(e){if(t.prototype.handleKeyDown.call(this,e),!e.defaultPrevented)switch(e.key){case o.DDm.SPACE:this.handleKeySpace(e);break;case o.DDm.ENTER:this.handleKeyEnter(e);break;case o.DDm.LEFT:this.handleKeyLeft(e);break;case o.DDm.RIGHT:this.handleKeyRight(e)}},e.prototype.handleKeySpace=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.toggleSelected()},e.prototype.handleKeyEnter=function(t){if(this.setFilterParams){var e=this.setFilterParams||{},i=e.excelMode,o=e.readOnly;i&&!o&&(t.preventDefault(),this.onBtApply(!1,!1,t),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}},e.prototype.handleKeyLeft=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.setExpanded(!1)},e.prototype.handleKeyRight=function(t){var e;null===(e=this.getComponentForKeyEvent(t))||void 0===e||e.setExpanded(!0)},e.prototype.getComponentForKeyEvent=function(t){var e,i=this.gridOptionsService.getDocument();if(this.eSetFilterList.contains(i.activeElement)&&this.virtualList){var o=this.virtualList.getLastFocusedRow();if(null!=o){var n=this.virtualList.getComponentAt(o);if(null!=n)if(t.preventDefault(),!(null!==(e=this.setFilterParams)&&void 0!==e?e:{}).readOnly)return n}}},e.prototype.getCssIdentifier=function(){return"set-filter"},e.prototype.setModel=function(e){var i;return null==e&&null==(null===(i=this.valueModel)||void 0===i?void 0:i.getModel())?(this.setMiniFilter(null),o.oY$.resolve()):t.prototype.setModel.call(this,e)},e.prototype.refresh=function(e){var i,o,n,r=this;if(!t.prototype.refresh.call(this,e))return!1;return!["treeList","treeListFormatter","treeListPathGetter","keyCreator","convertValuesToStrings","caseSensitive","comparator","suppressSelectAll","excelMode"].some((function(t){var i;return e[t]!==(null===(i=r.setFilterParams)||void 0===i?void 0:i[t])}))&&(!this.haveColDefParamsChanged(e.colDef)&&(t.prototype.updateParams.call(this,e),this.updateSetFilterOnParamsChange(e),this.updateMiniFilter(),e.cellRenderer===(null===(i=this.setFilterParams)||void 0===i?void 0:i.cellRenderer)&&e.valueFormatter===(null===(o=this.setFilterParams)||void 0===o?void 0:o.valueFormatter)||this.checkAndRefreshVirtualList(),null===(n=this.valueModel)||void 0===n||n.updateOnParamsChange(e).then((function(){var t;(null===(t=r.valueModel)||void 0===t?void 0:t.hasSelections())&&r.refreshFilterValues()})),!0))},e.prototype.haveColDefParamsChanged=function(t){var e,i=null===(e=this.setFilterParams)||void 0===e?void 0:e.colDef;return["keyCreator","filterValueGetter"].some((function(e){return t[e]!==(null===i||void 0===i?void 0:i[e])}))},e.prototype.setModelAndRefresh=function(t){var e=this;return this.valueModel?this.valueModel.setModel(t).then((function(){return e.checkAndRefreshVirtualList()})):o.oY$.resolve()},e.prototype.resetUiToDefaults=function(){return this.setMiniFilter(null),this.setModelAndRefresh(null)},e.prototype.setModelIntoUi=function(t){this.setMiniFilter(null);var e=null==t?null:t.values;return this.setModelAndRefresh(e)},e.prototype.getModelFromUi=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.valueModel.getModel();return t?{values:t,filterType:this.getFilterType()}:null},e.prototype.getFilterType=function(){return"set"},e.prototype.getValueModel=function(){return this.valueModel},e.prototype.areModelsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&o._.areEqual(t.values,e.values)},e.prototype.setParams=function(e){var i,o=this;this.applyExcelModeOptions(e),t.prototype.setParams.call(this,e),this.updateSetFilterOnParamsChange(e);var n=null!==(i=e.keyCreator)&&void 0!==i?i:e.colDef.keyCreator;this.valueModel=new ZO({filterParams:e,setIsLoading:function(t){return o.setIsLoading(t)},valueFormatterService:this.valueFormatterService,translate:function(t){return o.translateForSetFilter(t)},caseFormat:function(t){return o.caseFormat(t)},createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!n,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList,addManagedListener:function(t,e){return o.addManagedListener(o.eventService,t,e)}}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()},e.prototype.onAddCurrentSelectionToFilterChange=function(t){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(t)},e.prototype.setValueFormatter=function(t,e,i,n,r){var s=t;if(!s){if(e&&!i&&!n)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,r||(s=function(t){return o._.toStringOrNull(t.value)})}this.valueFormatter=s},e.prototype.generateCreateKey=function(t,e,i){var n=this;if(i&&!t)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return t?function(e,i){void 0===i&&(i=null);var r=n.getKeyCreatorParams(e,i);return o._.makeNull(t(r))}:e?function(t){return Array.isArray(t)?t:o._.makeNull(o._.toStringOrNull(t))}:function(t){return o._.makeNull(o._.toStringOrNull(t))}},e.prototype.getFormattedValue=function(t){var e,i=this.valueModel.getValue(t);this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(i)&&(i=o._.last(i));var n=this.valueFormatterService.formatValue(this.setFilterParams.column,null,i,this.valueFormatter,!1);return null!==(e=null==n?o._.toStringOrNull(i):n)&&void 0!==e?e:this.translateForSetFilter("blanks")},e.prototype.applyExcelModeOptions=function(t){"windows"===t.excelMode?(t.buttons||(t.buttons=["apply","cancel"]),null==t.closeOnApply&&(t.closeOnApply=!0)):"mac"===t.excelMode&&(t.buttons||(t.buttons=["reset"]),null==t.applyMiniFilterWhileTyping&&(t.applyMiniFilterWhileTyping=!0),null==t.debounceMs&&(t.debounceMs=500)),t.excelMode&&t.defaultToNothingSelected&&(t.defaultToNothingSelected=!1,o._.warnOnce('The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.'))},e.prototype.addEventListenersForDataChanges=function(){var t=this;this.isValuesTakenFromGrid()&&(this.addManagedListener(this.eventService,o.sVA.EVENT_CELL_VALUE_CHANGED,(function(e){t.setFilterParams&&e.column===t.setFilterParams.column&&t.syncAfterDataChange()})),this.addManagedPropertyListeners(["treeData","getDataPath","groupAllowUnbalanced"],(function(){t.syncAfterDataChange()})))},e.prototype.syncAfterDataChange=function(){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then((function(){t.checkAndRefreshVirtualList(),t.onBtApply(!1,!0)}))},e.prototype.setIsLoading=function(t){o._.setDisplayed(this.eFilterLoading,t),t||(this.hardRefreshVirtualList=!0)},e.prototype.initialiseFilterBodyUi=function(){this.initVirtualList(),this.initMiniFilter()},e.prototype.initVirtualList=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),i=!!this.setFilterParams.treeList,n=this.virtualList=this.createBean(new o.wjn({cssIdentifier:"filter",ariaRole:i?"tree":"listbox",listName:e})),r=this.getRefElement("eSetFilterList");i&&r.classList.add("ag-set-filter-tree-list"),r&&r.appendChild(n.getGui());var s=this.setFilterParams.cellHeight;null!=s&&n.setRowHeight(s);n.setComponentCreator((function(e,o){return t.createSetListItem(e,i,o)}));var a;n.setComponentUpdater((function(e,i){return t.updateSetListItem(e,i)})),a=this.setFilterParams.suppressSelectAll?new sD(this.valueModel):new aD(this.valueModel,(function(){return t.isSelectAllSelected()})),i&&(a=new lD(a)),n.setModel(a)},e.prototype.getSelectAllLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(t)},e.prototype.getAddSelectionToFilterLabel=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")},e.prototype.createSetListItem=function(t,e,i){var o=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var n=this.valueModel.hasGroups(),r=this.isSelectedExpanded(t),s=r.isSelected,a=r.isExpanded,l=this.newSetListItemAttributes(t,e),c=l.value,d=l.depth,u=l.isGroup,h=l.hasIndeterminateExpandState,p=l.selectedListener,f=l.expandedListener,g={focusWrapper:i,value:c,params:this.setFilterParams,translate:function(t){return o.translateForSetFilter(t)},valueFormatter:this.valueFormatter,item:t,isSelected:s,isTree:e,depth:d,groupsExist:n,isGroup:u,isExpanded:a,hasIndeterminateExpandState:h},v=this.createBean(new tD(g));return v.addEventListener(tD.EVENT_SELECTION_CHANGED,p),f&&v.addEventListener(tD.EVENT_EXPANDED_CHANGED,f),v},e.prototype.newSetTreeItemAttributes=function(t,e){var i,o,n,r,s,a,l=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var c=this.valueModel.hasGroups();return t.key===jO.SELECT_ALL?{value:function(){return l.getSelectAllLabel()},isGroup:c,depth:t.depth,hasIndeterminateExpandState:!0,selectedListener:function(t){return l.onSelectAll(t.isSelected)},expandedListener:function(t){return l.onExpandAll(t.item,t.isExpanded)}}:t.key===jO.ADD_SELECTION_TO_FILTER?{value:function(){return l.getAddSelectionToFilterLabel()},depth:t.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:function(t){l.onAddCurrentSelectionToFilterChange(t.isSelected)}}:t.children?{value:null!==(n=null===(o=(i=this.setFilterParams).treeListFormatter)||void 0===o?void 0:o.call(i,t.treeKey,t.depth,t.parentTreeKeys))&&void 0!==n?n:t.treeKey,depth:t.depth,isGroup:!0,selectedListener:function(t){return l.onGroupItemSelected(t.item,t.isSelected)},expandedListener:function(t){return l.onExpandedChanged(t.item,t.isExpanded)}}:{value:null!==(a=null===(s=(r=this.setFilterParams).treeListFormatter)||void 0===s?void 0:s.call(r,t.treeKey,t.depth,t.parentTreeKeys))&&void 0!==a?a:t.treeKey,depth:t.depth,selectedListener:function(t){return l.onItemSelected(t.item.key,t.isSelected)}}},e.prototype.newSetListItemAttributes=function(t,e){var i=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(t)?this.newSetTreeItemAttributes(t,e):t===jO.SELECT_ALL?{value:function(){return i.getSelectAllLabel()},selectedListener:function(t){return i.onSelectAll(t.isSelected)}}:t===jO.ADD_SELECTION_TO_FILTER?{value:function(){return i.getAddSelectionToFilterLabel()},selectedListener:function(t){i.onAddCurrentSelectionToFilterChange(t.isSelected)}}:{value:this.valueModel.getValue(t),selectedListener:function(t){return i.onItemSelected(t.item,t.isSelected)}}},e.prototype.updateSetListItem=function(t,e){var i=this.isSelectedExpanded(t),o=i.isSelected,n=i.isExpanded;e.refresh(t,o,n)},e.prototype.isSelectedExpanded=function(t){var e,i;return this.isSetFilterModelTreeItem(t)?(i=t.expanded,e=t.key===jO.SELECT_ALL?this.isSelectAllSelected():t.key===jO.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():t.children?this.areAllChildrenSelected(t):this.valueModel.isKeySelected(t.key)):e=t===jO.SELECT_ALL?this.isSelectAllSelected():t===jO.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():this.valueModel.isKeySelected(t),{isSelected:e,isExpanded:i}},e.prototype.isSetFilterModelTreeItem=function(t){return void 0!==(null===t||void 0===t?void 0:t.treeKey)},e.prototype.initMiniFilter=function(){var t=this;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var e=this.eMiniFilter,i=this.localeService.getLocaleTextFunc();e.setDisplayed(!this.setFilterParams.suppressMiniFilter),e.setValue(this.valueModel.getMiniFilter()),e.onValueChange((function(){return t.onMiniFilterInput()})),e.setInputAriaLabel(i("ariaSearchFilterValues","Search filter values")),this.addManagedListener(e.getInputElement(),"keydown",(function(e){return t.onMiniFilterKeyDown(e)}))},e.prototype.updateMiniFilter=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.eMiniFilter;t.isDisplayed()!==!this.setFilterParams.suppressMiniFilter&&t.setDisplayed(!this.setFilterParams.suppressMiniFilter);var e=this.valueModel.getMiniFilter();t.getValue()!==e&&t.setValue(e)},e.prototype.afterGuiAttached=function(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");t.prototype.afterGuiAttached.call(this,e),this.resetExpansion(),this.refreshVirtualList();var i=this.eMiniFilter;i.setInputPlaceholder(this.translateForSetFilter("searchOoo")),e&&e.suppressFocus||i.getFocusableElement().focus()},e.prototype.afterGuiDetached=function(){var e,i;t.prototype.afterGuiDetached.call(this),(null===(e=this.setFilterParams)||void 0===e?void 0:e.excelMode)&&this.resetMiniFilter();var o=this.getModel();!(null===(i=this.setFilterParams)||void 0===i?void 0:i.excelMode)&&this.areModelsEqual(o,this.getModelFromUi())||(this.resetUiToActiveModel(o),this.showOrHideResults())},e.prototype.applyModel=function(e){var i=this;if(void 0===e&&(e="api"),!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&"rowDataUpdated"!==e&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();var o=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(o&&!this.getModel())return!1;var n=t.prototype.applyModel.call(this,e),r=this.getModel();return r?(o||this.valueModel.setAppliedModelKeys(new Set),r.values.forEach((function(t){i.valueModel.addToAppliedModelKeys(t)}))):o||this.valueModel.setAppliedModelKeys(null),n},e.prototype.isModelValid=function(t){return!this.setFilterParams||!this.setFilterParams.excelMode||(null==t||t.values.length>0)},e.prototype.doesFilterPass=function(t){var e=this;if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;var i=t.node,o=t.data;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(i,o);if(this.groupingTreeList)return this.doesFilterPassForGrouping(i);var n=this.getValueFromNode(i);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(i,n):null!=n&&Array.isArray(n)?0===n.length?this.valueModel.hasAppliedModelKey(null):n.some((function(t){return e.isInAppliedModel(e.createKey(t,i))})):this.isInAppliedModel(this.createKey(n,i))},e.prototype.doesFilterPassForConvertValuesToString=function(t,e){var i=this,o=this.createKey(e,t);return null!=o&&Array.isArray(o)?0===o.length?this.valueModel.hasAppliedModelKey(null):o.some((function(t){return i.isInAppliedModel(t)})):this.isInAppliedModel(o)},e.prototype.doesFilterPassForTreeData=function(t,e){var i;return!(null===(i=t.childrenAfterGroup)||void 0===i?void 0:i.length)&&this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(e))))},e.prototype.doesFilterPassForGrouping=function(t){var e=this,i=this.columnModel.getRowGroupColumns().map((function(i){return e.valueService.getKeyForNode(i,t)}));return i.push(this.getValueFromNode(t)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(i)))},e.prototype.checkMakeNullDataPath=function(t){return t&&(t=t.map((function(t){return o._.toStringOrNull(o._.makeNull(t))}))),(null===t||void 0===t?void 0:t.some((function(t){return null==t})))?null:t},e.prototype.isInAppliedModel=function(t){return this.valueModel.hasAppliedModelKey(t)},e.prototype.getValueFromNode=function(t){return this.setFilterParams.getValue(t)},e.prototype.getKeyCreatorParams=function(t,e){return void 0===e&&(e=null),{value:t,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:e,data:null===e||void 0===e?void 0:e.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}},e.prototype.onNewRowsLoaded=function(){this.isValuesTakenFromGrid()&&this.syncAfterDataChange()},e.prototype.isValuesTakenFromGrid=function(){return!!this.valueModel&&this.valueModel.getValuesType()===_w.TAKEN_FROM_GRID_VALUES},e.prototype.setFilterValues=function(t){var e=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(t).then((function(){e.checkAndRefreshVirtualList(),e.onUiChanged()}))},e.prototype.resetFilterValues=function(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(_w.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()},e.prototype.refreshFilterValues=function(){var t=this;if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.isInitialised()&&this.valueModel.refreshValues().then((function(){t.checkAndRefreshVirtualList(),t.onUiChanged()}))},e.prototype.onAnyFilterChanged=function(){var t=this;setTimeout((function(){if(t.isAlive()){if(!t.valueModel)throw new Error("Value model has not been created.");t.valueModel.refreshAfterAnyFilterChanged().then((function(e){e&&(t.checkAndRefreshVirtualList(),t.showOrHideResults())}))}}),0)},e.prototype.onMiniFilterInput=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(this.valueModel.setMiniFilter(this.eMiniFilter.getValue())){var t=this.setFilterParams||{},e=t.applyMiniFilterWhileTyping;!t.readOnly&&e?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}},e.prototype.updateUiAfterMiniFilterChange=function(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");var t=this.setFilterParams||{},e=t.excelMode,i=t.readOnly;null==e||i?this.checkAndRefreshVirtualList():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged()),this.showOrHideResults()},e.prototype.showOrHideResults=function(){if(!this.valueModel)throw new Error("Value model has not been created.");var t=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;o._.setDisplayed(this.eNoMatches,t),o._.setDisplayed(this.eSetFilterList,!t)},e.prototype.resetMiniFilter=function(){var t;this.eMiniFilter.setValue(null,!0),null===(t=this.valueModel)||void 0===t||t.setMiniFilter(null)},e.prototype.resetUiToActiveModel=function(t,e){var i=this;this.setModelAndRefresh(null==t?null:t.values).then((function(){i.onUiChanged(!1,"prevent"),null===e||void 0===e||e()}))},e.prototype.handleCancelEnd=function(e){this.setMiniFilter(null),t.prototype.handleCancelEnd.call(this,e)},e.prototype.onMiniFilterKeyDown=function(t){var e=this.setFilterParams||{},i=e.excelMode,n=e.readOnly;t.key!==o.DDm.ENTER||i||n||this.filterOnAllVisibleValues()},e.prototype.filterOnAllVisibleValues=function(t){void 0===t&&(t=!0);var e=(this.setFilterParams||{}).readOnly;if(!this.valueModel)throw new Error("Value model has not been created.");if(e)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged(!1,t?"immediately":"debounce"),this.showOrHideResults()},e.prototype.focusRowIfAlive=function(t){var e=this;null!=t&&window.setTimeout((function(){if(!e.virtualList)throw new Error("Virtual list has not been created.");e.isAlive()&&e.virtualList.focusRow(t)}),0)},e.prototype.onSelectAll=function(t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");t?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()},e.prototype.onGroupItemSelected=function(t,e){var i=this,o=function(t){t.children?t.children.forEach((function(t){return o(t)})):i.selectItem(t.key,e)};o(t),this.refreshAfterSelection()},e.prototype.onItemSelected=function(t,e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(t,e),this.refreshAfterSelection()},e.prototype.selectItem=function(t,e){e?this.valueModel.selectKey(t):this.valueModel.deselectKey(t)},e.prototype.onExpandAll=function(t,e){var i=function(t){t.filterPasses&&t.available&&t.children&&(t.children.forEach((function(t){return i(t)})),t.expanded=e)};i(t),this.refreshAfterExpansion()},e.prototype.onExpandedChanged=function(t,e){t.expanded=e,this.refreshAfterExpansion()},e.prototype.refreshAfterExpansion=function(){var t=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(t)},e.prototype.refreshAfterSelection=function(){var t=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(t)},e.prototype.setMiniFilter=function(t){this.eMiniFilter.setValue(t),this.onMiniFilterInput()},e.prototype.getMiniFilter=function(){return this.valueModel?this.valueModel.getMiniFilter():null},e.prototype.checkAndRefreshVirtualList=function(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)},e.prototype.getFilterKeys=function(){return this.valueModel?this.valueModel.getKeys():[]},e.prototype.getFilterValues=function(){return this.valueModel?this.valueModel.getValues():[]},e.prototype.getValues=function(){return this.getFilterKeys()},e.prototype.refreshVirtualList=function(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.checkAndRefreshVirtualList()},e.prototype.translateForSetFilter=function(t){return this.localeService.getLocaleTextFunc()(t,eD[t])},e.prototype.isSelectAllSelected=function(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}},e.prototype.areAllChildrenSelected=function(t){var e=this,i=function(t){if(t.children){var o=!1,n=!1;return t.children.some((function(t){if(!t.filterPasses||!t.available)return!1;var e=i(t);return void 0===e||(e?o=!0:n=!0,o&&n)}))?void 0:o}return e.valueModel.isKeySelected(t.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&i(t):i(t)},e.prototype.destroy=function(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),t.prototype.destroy.call(this)},e.prototype.caseFormat=function(t){return null==t||"string"!==typeof t||this.caseSensitive?t:t.toUpperCase()},e.prototype.resetExpansion=function(){var t,e;if(null===(t=this.setFilterParams)||void 0===t?void 0:t.treeList){var i=null===(e=this.valueModel)||void 0===e?void 0:e.getSelectAllItem();if(this.isSetFilterModelTreeItem(i)){var o=function(t){t.children&&(t.children.forEach((function(t){return o(t)})),t.expanded=!1)};o(i),this.valueModel.updateDisplayedValues("expansion")}}},e.prototype.getModelAsString=function(t){return this.filterModelFormatter.getModelAsString(t,this)},e.prototype.getPositionableElement=function(){return this.eSetFilterList},nD([(0,o.PIB)("eMiniFilter")],e.prototype,"eMiniFilter",void 0),nD([(0,o.PIB)("eFilterLoading")],e.prototype,"eFilterLoading",void 0),nD([(0,o.PIB)("eSetFilterList")],e.prototype,"eSetFilterList",void 0),nD([(0,o.PIB)("eFilterNoMatches")],e.prototype,"eNoMatches",void 0),nD([(0,o.dsm)("valueFormatterService")],e.prototype,"valueFormatterService",void 0),nD([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),nD([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),e}(o.Q5x),sD=function(){function t(t){this.model=t}return t.prototype.getRowCount=function(){return this.model.getDisplayedValueCount()},t.prototype.getRow=function(t){return this.model.getDisplayedItem(t)},t.prototype.areRowsEqual=function(t,e){return t===e},t}(),aD=function(){function t(t,e){this.model=t,this.isSelectAllSelected=e}return t.prototype.getRowCount=function(){var t=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+t},t.prototype.getRow=function(t){if(0===t)return this.model.getSelectAllItem();var e=this.model.showAddCurrentSelectionToFilter(),i=e?2:1;return 1===t&&e?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(t-i)},t.prototype.areRowsEqual=function(t,e){return t===e},t}(),lD=function(){function t(t){this.model=t}return t.prototype.getRowCount=function(){return this.model.getRowCount()},t.prototype.getRow=function(t){return this.model.getRow(t)},t.prototype.areRowsEqual=function(t,e){return null==t&&null==e||null!=t&&null!=e&&t.treeKey===e.treeKey&&t.depth===e.depth},t}(),cD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),dD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},uD=function(t){function e(){var e=t.call(this,'\n            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')||this;return e.availableValuesListenerAdded=!1,e.filterModelFormatter=new iD,e}return cD(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.init=function(t){var e=this;this.params=t,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",(function(){return e.params.showParentFilter()})),this.setParams(t)},e.prototype.setParams=function(t){var e=this.columnModel.getDisplayNameForColumn(t.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel("".concat(e," ").concat(i("ariaFilterInput","Filter Input")))},e.prototype.onParamsUpdated=function(t){this.params=t,this.setParams(t)},e.prototype.onParentModelChanged=function(t){this.updateFloatingFilterText(t)},e.prototype.parentSetFilterInstance=function(t){this.params.parentFilterInstance((function(e){if(!(e instanceof rD))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");t(e)}))},e.prototype.addAvailableValuesListener=function(){var t=this;this.parentSetFilterInstance((function(e){var i=e.getValueModel();i&&t.addManagedListener(i,ZO.EVENT_AVAILABLE_VALUES_CHANGED,(function(){return t.updateFloatingFilterText()}))})),this.availableValuesListenerAdded=!0},e.prototype.updateFloatingFilterText=function(t){var e=this;this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance((function(i){e.eFloatingFilterText.setValue(e.filterModelFormatter.getModelAsString(t,i))}))},dD([(0,o.PIB)("eFloatingFilterText")],e.prototype,"eFloatingFilterText",void 0),dD([(0,o.dsm)("columnModel")],e.prototype,"columnModel",void 0),e}(o.uAl),hD={version:"31.0.0",moduleName:o.zsj.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:rD},{componentName:"agSetColumnFloatingFilter",componentClass:uD}],dependantModules:[g]},pD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),fD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},gD=function(t){function e(){var e=t.call(this)||this;return e.allComponents={},e}return pD(e,t),e.prototype.registerStatusPanel=function(t,e){this.allComponents[t]=e},e.prototype.unregisterStatusPanel=function(t){delete this.allComponents[t]},e.prototype.unregisterAllComponents=function(){this.allComponents={}},e.prototype.getStatusPanel=function(t){return this.allComponents[t]},e=fD([(0,o.dR4)("statusBarService")],e)}(o.XQb),vD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),yD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},mD=function(t){function e(){var i=t.call(this,e.TEMPLATE)||this;return i.compDestroyFunctions=[],i}return vD(e,t),e.prototype.postConstruct=function(){this.processStatusPanels(),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))},e.prototype.processStatusPanels=function(){var t,e=null===(t=this.gridOptionsService.get("statusBar"))||void 0===t?void 0:t.statusPanels;if(e){var i=e.filter((function(t){return"left"===t.align}));this.createAndRenderComponents(i,this.eStatusBarLeft);var o=e.filter((function(t){return"center"===t.align}));this.createAndRenderComponents(o,this.eStatusBarCenter);var n=e.filter((function(t){return!t.align||"right"===t.align}));this.createAndRenderComponents(n,this.eStatusBarRight)}else this.setDisplayed(!1)},e.prototype.handleStatusBarChanged=function(){var t,e=null===(t=this.gridOptionsService.get("statusBar"))||void 0===t?void 0:t.statusPanels,i=Array.isArray(e)&&e.length>0;this.setDisplayed(i),this.resetStatusBar(),i&&this.processStatusPanels()},e.prototype.resetStatusBar=function(){this.eStatusBarLeft.innerHTML="",this.eStatusBarCenter.innerHTML="",this.eStatusBarRight.innerHTML="",this.destroyComponents(),this.statusBarService.unregisterAllComponents()},e.prototype.destroyComponents=function(){this.compDestroyFunctions.forEach((function(t){return t()})),this.compDestroyFunctions=[]},e.prototype.createAndRenderComponents=function(t,e){var i=this,n=[];t.forEach((function(t){var e=i.userComponentFactory.getStatusPanelCompDetails(t,{}).newAgStackInstance();e&&n.push({key:t.key||t.statusPanel,promise:e})})),o.oY$.all(n.map((function(t){return t.promise}))).then((function(){n.forEach((function(t){t.promise.then((function(o){var n=function(){i.getContext().destroyBean(o)};i.isAlive()?(i.statusBarService.registerStatusPanel(t.key,o),e.appendChild(o.getGui()),i.compDestroyFunctions.push(n)):n()}))}))}))},e.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>',yD([(0,o.dsm)("userComponentFactory")],e.prototype,"userComponentFactory",void 0),yD([(0,o.dsm)("statusBarService")],e.prototype,"statusBarService",void 0),yD([(0,o.PIB)("eStatusBarLeft")],e.prototype,"eStatusBarLeft",void 0),yD([(0,o.PIB)("eStatusBarCenter")],e.prototype,"eStatusBarCenter",void 0),yD([(0,o.PIB)("eStatusBarRight")],e.prototype,"eStatusBarRight",void 0),yD([o.o7C],e.prototype,"postConstruct",null),yD([o.yah],e.prototype,"destroyComponents",null),e}(o.uAl),bD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),SD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},xD=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return bD(e,t),e.prototype.setLabel=function(t,e){this.setDisplayed(!1);var i=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=i(t,e)},e.prototype.setValue=function(t){this.eValue.innerHTML=t},e.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>',SD([(0,o.PIB)("eLabel")],e.prototype,"eLabel",void 0),SD([(0,o.PIB)("eValue")],e.prototype,"eValue",void 0),e}(o.uAl),CD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),wD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ED=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return CD(e,t),e.prototype.postConstruct=function(){"clientSide"===this.gridApi.getModel().getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,o.sVA.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),i=t("decimalSeparator","."),n=o._.formatNumberCommas(this.getFilteredRowCountValue(),e,i),r=o._.formatNumberCommas(this.getTotalRowCount(),e,i);if(n===r)this.setValue(n);else{var s=this.localeService.getLocaleTextFunc();this.setValue("".concat(n," ").concat(s("of","of")," ").concat(r))}},e.prototype.getFilteredRowCountValue=function(){var t=0;return this.gridApi.forEachNodeAfterFilter((function(e){e.group||t++})),t},e.prototype.getTotalRowCount=function(){var t=0;return this.gridApi.forEachNode((function(e){e.group||t++})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},wD([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),wD([o.o7C],e.prototype,"postConstruct",null),e}(xD),OD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),DD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},AD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return OD(e,t),e.prototype.postConstruct=function(){if(this.setLabel("filteredRows","Filtered"),"clientSide"===this.gridApi.getModel().getType()){this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);var t=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,o.sVA.EVENT_MODEL_UPDATED,t),t()}else console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.getTotalRowCountValue(),e=this.getFilteredRowCountValue(),i=this.localeService.getLocaleTextFunc(),n=i("thousandSeparator",","),r=i("decimalSeparator",".");this.setValue(o._.formatNumberCommas(e,n,r)),this.setDisplayed(t!==e)},e.prototype.getTotalRowCountValue=function(){var t=0;return this.gridApi.forEachNode((function(e){return t+=1})),t},e.prototype.getFilteredRowCountValue=function(){var t=0;return this.gridApi.forEachNodeAfterFilter((function(e){e.group||(t+=1)})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},DD([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),DD([o.o7C],e.prototype,"postConstruct",null),e}(xD),TD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),MD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},kD=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return TD(e,t),e.prototype.postConstruct=function(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.gridApi.getModel().getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,o.sVA.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.")},e.prototype.onDataChanged=function(){var t=this.localeService.getLocaleTextFunc(),e=t("thousandSeparator",","),i=t("decimalSeparator",".");this.setValue(o._.formatNumberCommas(this.getRowCountValue(),e,i))},e.prototype.getRowCountValue=function(){var t=0;return this.gridApi.forEachLeafNode((function(e){return t+=1})),t},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},MD([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),MD([o.o7C],e.prototype,"postConstruct",null),e}(xD),RD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),PD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ND=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return RD(e,t),e.prototype.postConstruct=function(){if(this.isValidRowModel()){this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();var t=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,o.sVA.EVENT_MODEL_UPDATED,t),this.addManagedListener(this.eventService,o.sVA.EVENT_SELECTION_CHANGED,t)}else console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.")},e.prototype.isValidRowModel=function(){var t=this.gridApi.getModel().getType();return"clientSide"===t||"serverSide"===t},e.prototype.onRowSelectionChanged=function(){var t=this.selectionService.getSelectionCount();if(t<0)return this.setValue("?"),void this.setDisplayed(!0);var e=this.localeService.getLocaleTextFunc(),i=e("thousandSeparator",","),n=e("decimalSeparator",".");this.setValue(o._.formatNumberCommas(t,i,n)),this.setDisplayed(t>0)},e.prototype.init=function(){},e.prototype.destroy=function(){t.prototype.destroy.call(this)},PD([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),PD([(0,o.dsm)("selectionService")],e.prototype,"selectionService",void 0),PD([o.o7C],e.prototype,"postConstruct",null),e}(xD),LD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_D=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},ID=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return LD(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this)},e.prototype.postConstruct=function(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,o.sVA.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,o.sVA.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))):console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.")},e.prototype.isValidRowModel=function(){var t=this.gridApi.getModel().getType();return"clientSide"===t||"serverSide"===t},e.prototype.init=function(){},e.prototype.setAggregationComponentValue=function(t,e,i){var n=this.getAggregationValueComponent(t);if(o._.exists(n)&&n){var r=this.localeService.getLocaleTextFunc(),s=r("thousandSeparator",","),a=r("decimalSeparator",".");n.setValue(o._.formatNumberTwoDecimalPlacesAndCommas(e,s,a)),n.setDisplayed(i)}},e.prototype.getAggregationValueComponent=function(t){var e="".concat(t,"AggregationComp"),i=null,n=this.gridOptionsService.get("statusBar"),r=o._.exists(n)&&n?n.statusPanels.find((function(t){return"agAggregationComponent"===t.statusPanel})):null;return o._.exists(r)&&r?(!o._.exists(r.statusPanelParams)||o._.exists(r.statusPanelParams)&&o._.exists(r.statusPanelParams.aggFuncs)&&o._.exists(r.statusPanelParams.aggFuncs.find((function(e){return e===t}))))&&(i=this[e]):i=this[e],i},e.prototype.onRangeSelectionChanged=function(){var t=this,e=this.rangeService?this.rangeService.getCellRanges():void 0,i=0,n=0,r=0,s=null,a=null,l={};e&&!o._.missingOrEmpty(e)&&e.forEach((function(e){for(var c=t.rangeService.getRangeStartRow(e),d=t.rangeService.getRangeEndRow(e);;){if(o._.missing(c)||!c||t.rowPositionUtils.before(d,c)||!c||!e.columns)break;e.columns.forEach((function(e){if(null!==c){var d=t.cellPositionUtils.createId({rowPinned:c.rowPinned,column:e,rowIndex:c.rowIndex});if(!l[d]){l[d]=!0;var u=t.rowRenderer.getRowNode(c);if(!o._.missing(u)){var h=t.valueService.getValue(e,u);o._.missing(h)||""===h||(n++,"object"===typeof h&&"value"in h&&""===(h=h.value)||("string"===typeof h&&(h=Number(h)),"number"!==typeof h||isNaN(h)||(i+=h,(null===a||h>a)&&(a=h),(null===s||h<s)&&(s=h),r++)))}}}})),c=t.cellNavigationService.getRowBelow(c)}}));var c=n>1,d=r>1;this.setAggregationComponentValue("count",n,c),this.setAggregationComponentValue("sum",i,d),this.setAggregationComponentValue("min",s,d),this.setAggregationComponentValue("max",a,d),this.setAggregationComponentValue("avg",i/r,d)},e.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>',_D([(0,o.Xx1)("rangeService")],e.prototype,"rangeService",void 0),_D([(0,o.dsm)("valueService")],e.prototype,"valueService",void 0),_D([(0,o.dsm)("cellNavigationService")],e.prototype,"cellNavigationService",void 0),_D([(0,o.dsm)("rowRenderer")],e.prototype,"rowRenderer",void 0),_D([(0,o.dsm)("gridApi")],e.prototype,"gridApi",void 0),_D([(0,o.dsm)("cellPositionUtils")],e.prototype,"cellPositionUtils",void 0),_D([(0,o.dsm)("rowPositionUtils")],e.prototype,"rowPositionUtils",void 0),_D([(0,o.PIB)("sumAggregationComp")],e.prototype,"sumAggregationComp",void 0),_D([(0,o.PIB)("countAggregationComp")],e.prototype,"countAggregationComp",void 0),_D([(0,o.PIB)("minAggregationComp")],e.prototype,"minAggregationComp",void 0),_D([(0,o.PIB)("maxAggregationComp")],e.prototype,"maxAggregationComp",void 0),_D([(0,o.PIB)("avgAggregationComp")],e.prototype,"avgAggregationComp",void 0),_D([o.o7C],e.prototype,"postConstruct",null),e}(o.uAl),FD={version:"31.0.0",moduleName:o.zsj.StatusBarModule,beans:[gD],agStackComponents:[{componentName:"AgStatusBar",componentClass:mD},{componentName:"AgNameValue",componentClass:xD}],userComponents:[{componentName:"agAggregationComponent",componentClass:ID},{componentName:"agSelectedRowCountComponent",componentClass:ND},{componentName:"agTotalRowCountComponent",componentClass:kD},{componentName:"agFilteredRowCountComponent",componentClass:AD},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:ED}],dependantModules:[g]},GD=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),BD=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},VD=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.firstRow=-1,e.lastRow=-1,e.rowCount=-1,e.rowNodesByIndex={},e}return GD(e,t),e.prototype.ensureRowHeightsValid=function(t,e,i,o){return!1},e.prototype.init=function(){var t=this;this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addManagedListener(this.eventService,o.sVA.EVENT_VIEWPORT_CHANGED,this.onViewportChanged.bind(this)),this.addManagedPropertyListener("viewportDatasource",(function(){return t.updateDatasource()})),this.addManagedPropertyListener("rowHeight",(function(){t.rowHeight=t.gridOptionsService.getRowHeightAsNumber(),t.updateRowHeights()}))},e.prototype.start=function(){this.updateDatasource()},e.prototype.isLastRowIndexKnown=function(){return!0},e.prototype.destroyDatasource=function(){this.viewportDatasource&&(this.viewportDatasource.destroy&&this.viewportDatasource.destroy(),this.rowRenderer.datasourceChanged(),this.firstRow=-1,this.lastRow=-1)},e.prototype.updateDatasource=function(){var t=this.gridOptionsService.get("viewportDatasource");t&&this.setViewportDatasource(t)},e.prototype.getViewportRowModelPageSize=function(){return this.gridOptionsService.get("viewportRowModelPageSize")},e.prototype.getViewportRowModelBufferSize=function(){return this.gridOptionsService.get("viewportRowModelBufferSize")},e.prototype.calculateFirstRow=function(t){var e=this.getViewportRowModelBufferSize(),i=this.getViewportRowModelPageSize(),o=t-e;return o<0?0:Math.floor(o/i)*i},e.prototype.calculateLastRow=function(t){if(-1===t)return t;var e=this.getViewportRowModelBufferSize(),i=this.getViewportRowModelPageSize(),o=t+e,n=Math.ceil(o/i)*i,r=this.rowCount-1;return Math.min(n,r)},e.prototype.onViewportChanged=function(t){var e=this.calculateFirstRow(t.firstRow),i=this.calculateLastRow(t.lastRow);this.firstRow===e&&this.lastRow===i||(this.firstRow=e,this.lastRow=i,this.purgeRowsNotInViewport(),this.viewportDatasource&&this.viewportDatasource.setViewportRange(this.firstRow,this.lastRow))},e.prototype.purgeRowsNotInViewport=function(){var t=this;Object.keys(this.rowNodesByIndex).forEach((function(e){var i=parseInt(e,10);if(i<t.firstRow||i>t.lastRow){if(t.isRowFocused(i))return;delete t.rowNodesByIndex[i]}}))},e.prototype.isRowFocused=function(t){var e=this.focusService.getFocusCellToUseAfterRefresh();return!!e&&(null==e.rowPinned&&e.rowIndex===t)},e.prototype.setViewportDatasource=function(t){this.destroyDatasource(),this.viewportDatasource=t,this.rowCount=-1,t.init?t.init({setRowCount:this.setRowCount.bind(this),setRowData:this.setRowData.bind(this),getRow:this.getRow.bind(this)}):console.warn("AG Grid: viewport is missing init method.")},e.prototype.getType=function(){return"viewport"},e.prototype.getRow=function(t){return this.rowNodesByIndex[t]||(this.rowNodesByIndex[t]=this.createBlankRowNode(t)),this.rowNodesByIndex[t]},e.prototype.getRowNode=function(t){var e;return this.forEachNode((function(i){i.id===t&&(e=i)})),e},e.prototype.getRowCount=function(){return-1===this.rowCount?0:this.rowCount},e.prototype.getRowIndexAtPixel=function(t){return 0!==this.rowHeight?Math.floor(t/this.rowHeight):0},e.prototype.getRowBounds=function(t){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*t}},e.prototype.updateRowHeights=function(){var t=this;this.forEachNode((function(e){e.setRowHeight(t.rowHeight),e.setRowTop(t.rowHeight*e.rowIndex)}));var e={type:o.sVA.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:!0,animate:!1};this.eventService.dispatchEvent(e)},e.prototype.getTopLevelRowCount=function(){return this.getRowCount()},e.prototype.getTopLevelRowDisplayedIndex=function(t){return t},e.prototype.isEmpty=function(){return this.rowCount>0},e.prototype.isRowsToRender=function(){return this.rowCount>0},e.prototype.getNodesInRangeForSelection=function(t,e){var i=o._.missing(t)?0:t.rowIndex,n=e.rowIndex,r=i<this.firstRow||i>this.lastRow,s=n<this.firstRow||n>this.lastRow;if(r||s)return[];for(var a=[],l=i<=n?n:i,c=i<=n?i:n;c<=l;c++)a.push(this.rowNodesByIndex[c]);return a},e.prototype.forEachNode=function(t){var e=this,i=0;Object.keys(this.rowNodesByIndex).forEach((function(o){var n=parseInt(o,10),r=e.rowNodesByIndex[n];t(r,i),i++}))},e.prototype.setRowData=function(t){var e=this;o._.iterateObject(t,(function(t,i){var n=parseInt(t,10);if(n>=e.firstRow&&n<=e.lastRow){var r=e.rowNodesByIndex[n];o._.missing(r)&&(r=e.createBlankRowNode(n),e.rowNodesByIndex[n]=r),r.setDataAndId(i,n.toString())}}))},e.prototype.createBlankRowNode=function(t){var e=new o.TUE(this.beans);return e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*t),e.setRowIndex(t),e},e.prototype.setRowCount=function(t,e){if(void 0===e&&(e=!1),t!==this.rowCount){this.rowCount=t,this.eventService.dispatchEventOnce({type:o.sVA.EVENT_ROW_COUNT_READY});var i={type:o.sVA.EVENT_MODEL_UPDATED,newData:!1,newPage:!1,keepRenderedRows:e,animate:!1};this.eventService.dispatchEvent(i)}},e.prototype.isRowPresent=function(t){return!!this.getRowNode(t.id)},BD([(0,o.dsm)("rowRenderer")],e.prototype,"rowRenderer",void 0),BD([(0,o.dsm)("focusService")],e.prototype,"focusService",void 0),BD([(0,o.dsm)("beans")],e.prototype,"beans",void 0),BD([o.o7C],e.prototype,"init",null),BD([o.yah],e.prototype,"destroyDatasource",null),e=BD([(0,o.dR4)("rowModel")],e)}(o.XQb),jD={version:"31.0.0",moduleName:o.zsj.ViewportRowModelModule,rowModel:"viewport",beans:[VD],dependantModules:[g]};class WD{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var o;const n=null===(o=this._rangeCallback)||void 0===o?void 0:o.call(this,t,e),r=this._encode(i?this.floor(t):this.ceil(t)),s=this._encode(i?this.ceil(e):this.floor(e));if(s<r)return[];const a=[];for(let l=r;l<=s;l++){const t=this._decode(l);a.push(t)}return null===n||void 0===n||n(),a}}class zD extends WD{getOffset(t,e){const i="number"===typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,o=0;const{snapTo:n="start"}=null!==e&&void 0!==e?e:{};if("string"===typeof n){const e=o;i=(i,r)=>{const s="start"===n?i:r;return o=this.getOffset(s,t),()=>o=e}}else"number"===typeof n?o=this.getOffset(new Date(n),t):n instanceof Date&&(o=this.getOffset(n,t));return new WD((e=>{const i=this._encode(e);return Math.floor((i-o)/t)}),(e=>this._decode(e*t+o)),i)}}const HD=new zD((function(t){return t.getTime()}),(function(t){return new Date(t)}));new Date(0).getFullYear();const UD=1e3,KD=6e4,YD=36e5,XD=864e5,$D=6048e5,qD=2592e6,ZD=31536e6,JD=(new Date).getTimezoneOffset()*KD;const QD=new zD((function(t){return Math.floor((t.getTime()-JD)/UD)}),(function(t){return new Date(JD+t*UD)})),tA=(new Date).getTimezoneOffset()*KD;const eA=new zD((function(t){return Math.floor((t.getTime()-tA)/KD)}),(function(t){return new Date(tA+t*KD)})),iA=(new Date).getTimezoneOffset()*KD;const oA=new zD((function(t){return Math.floor((t.getTime()-iA)/YD)}),(function(t){return new Date(iA+t*YD)}));const nA=new zD((function(t){const e=6e4*t.getTimezoneOffset();return Math.floor((t.getTime()-e)/XD)}),(function(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e}));function rA(t){const e=new Date(2023,0,1+t).getTime();return new zD((function(t){const i=t.getTime();return Math.floor((i-e)/$D)}),(function(t){const i=new Date(e);return i.setDate(i.getDate()+7*t),i}))}const sA=rA(0);rA(1),rA(2),rA(3),rA(4),rA(5),rA(6);const aA=new zD((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)}));const lA=new zD((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e}));function cA(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(o=Object.getOwnPropertySymbols(t);n<o.length;n++)e.indexOf(o[n])<0&&Object.prototype.propertyIsEnumerable.call(t,o[n])&&(i[o[n]]=t[o[n]])}return i}function dA(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s}function uA(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function hA(t,e,i,o){return new(i||(i=Promise))((function(n,r){function s(t){try{l(o.next(t))}catch(e){r(e)}}function a(t){try{l(o.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))}new zD((function(t){return Math.floor(t.getTime()/KD)}),(function(t){return new Date(t*KD)})),new zD((function(t){return Math.floor(t.getTime()/YD)}),(function(t){return new Date(t*YD)})),new zD((function(t){return Math.floor(t.getTime()/XD)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e})),new zD((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))})),new zD((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e})),"function"===typeof SuppressedError&&SuppressedError;class pA{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}}const fA=[];function gA(t){const{length:e}=t;if(0===e)return;let i=1/0,o=-1/0;for(let r=0;r<e;r++){let e=t[r];e instanceof Date&&(e=e.getTime()),"number"===typeof e&&(e<i&&(i=e),e>o&&(o=e))}const n=[i,o];return n.some((t=>!isFinite(t)))?void 0:n}function vA(t,e,i){var o;let n=!1;return t.length>2&&(t=null!==(o=gA(t))&&void 0!==o?o:[NaN,NaN]),isNaN(e)||(n||(n=e>t[0]),t=[e,t[1]]),isNaN(i)||(n||(n=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:n}}function yA(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!yA(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function mA(t){return"undefined"===typeof t?[]:Array.isArray(t)?t:[t]}const bA={};function SA(t,e){bA[e]||(t(),bA[e]=!0)}const xA={log(){console.log(...arguments)},warn(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];console.warn(`AG Charts - ${t}`,...i)},error(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];"object"===typeof t?console.error("AG Charts error",t,...i):console.error(`AG Charts - ${t}`,...i)},table(){console.table(...arguments)},warnOnce(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];SA((()=>xA.warn(t,...i)),`Logger.warn: ${t}`)},errorOnce(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];SA((()=>xA.error(t,...i)),`Logger.warn: ${t}`)}};function CA(t){const e="undefined"!==typeof window?window:void 0;return null===e||void 0===e?void 0:e[t]}let wA=Date.now();const EA={create(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];EA.check(...e)&&("function"===typeof i[0]&&(i=mA(i[0]())),(()=>{const t=Date.now()-wA;if(t>2e3){const e=(Math.floor(t/100)/10).toFixed(1);xA.log(`**** ${e}s since last log message ****`)}wA=Date.now()})(),xA.log(...i))}},check(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];0===e.length&&e.push(!0);return mA(CA("agChartsDebug")).some((t=>e.includes(t)))}},OA=Symbol("BREAK"),DA="__decorator_config";function AA(t,e){return(i,o)=>{const n=o.toString(),r=`__${n}`,{getters:s,setters:a}=function(t,e,i,o){null==Object.getOwnPropertyDescriptor(t,DA)&&Object.defineProperty(t,DA,{value:{}});const n=t[DA];if(null!=n[i])return n[i];n[i]={setters:[],getters:[]};const r=Object.getOwnPropertyDescriptor(t,e),s=null===r||void 0===r?void 0:r.set,a=null===r||void 0===r?void 0:r.get;return Object.defineProperty(t,e,{set:function(t){var r,l;const c=null!==(l=null===(r=n[i])||void 0===r?void 0:r.setters)&&void 0!==l?l:[];let d;c.some((t=>t.length>2))&&(d=a?a.call(this):this[o]);for(const i of c)if((t=i(this,e,t,d))===OA)return;s?s.call(this,t):this[o]=t},get:function(){var t,r;let s=a?a.call(this):this[o];for(const o of null!==(r=null===(t=n[i])||void 0===t?void 0:t.getters)&&void 0!==r?r:[])if(s=o(this,e,s),s===OA)return;return s},enumerable:!0,configurable:!1}),n[i]}(i,o,n,r);a.push(t),e&&s.unshift(e)}}function TA(t){return"undefined"!==typeof t&&DA in t}function MA(t){const e=new Set;for(;TA(t);)e.add(null===t||void 0===t?void 0:t[DA]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap((t=>Object.keys(t)))}const kA="class-instance";function RA(t,e){const i=FA(t),o=FA(e);if("array"===o){const o=e;return"array"!==i||t.length!==o.length||o.some(((e,i)=>null!=RA(null===t||void 0===t?void 0:t[i],e)))?[...o]:null}if("primitive"===o)return"primitive"!==i?Object.assign({},e):t!==e?e:null;const n=t||{},r=e||{},s=new Set([...Object.keys(n),...Object.keys(r)]);let a=0;const l={};for(const c of s){if(n[c]===r[c])continue;const t=t=>{l[c]=t,a++},e=FA(n[c]),i=FA(r[c]);if(e!==i){t(r[c]);continue}if("primitive"===i||null===i){t(r[c]);continue}if("array"===i&&n[c].length!==r[c].length){t(r[c]);continue}if(i===kA){t(r[c]);continue}if("function"===i&&n[c]!==r[c]){t(r[c]);continue}const o=RA(n[c],r[c]);null!==o&&t(o)}return 0===a?null:l}const PA=Symbol("<delete-property>"),NA=Symbol("<unspecified-property>");function LA(t,e){var i;const o=null!==(i=null===e||void 0===e?void 0:e.avoidDeepClone)&&void 0!==i?i:[];if(t.map((t=>FA(t))).some((t=>"array"===t))){const i=t[t.length-1];return Array.isArray(i)?i.map((t=>{const i=FA(t);return"array"===i?LA([[],t],e):"object"===i?LA([{},t],e):t})):i}const n={},r=new Set(t.map((t=>null!=t?Object.keys(t):[])).reduce(((t,e)=>t.concat(e)),[]));for(const s of r){const i=t.map((t=>null!=t&&"object"===typeof t&&s in t?t[s]:NA)).filter((t=>t!==NA));if(0===i.length)continue;const r=i[i.length-1];if(r===PA)continue;const a=i.map((t=>FA(t))),l=a[0];a.some((t=>t!==l))?n[s]=r:"array"!==l&&"object"!==l||o.includes(s)?n[s]="array"===l?[...r]:r:n[s]=LA(i,e)}return n}function _A(t,e,i){for(var o=arguments.length,n=new Array(o>3?o-3:0),r=3;r<o;r++)n[r-3]=arguments[r];const s=FA(t),{skip:a=[]}=null!==i&&void 0!==i?i:{};if("array"===s)return e(s,t,...n),void t.forEach(((t,o)=>{_A(t,e,i,...(null!==n&&void 0!==n?n:[]).map((t=>null===t||void 0===t?void 0:t[o])))}));if("object"===s){e(s,t,...n);for(const o in t){if(a.includes(o))continue;const r=t[o],s=null===n||void 0===n?void 0:n.map((t=>null===t||void 0===t?void 0:t[o])),l=FA(r);"object"!==l&&"array"!==l||_A(r,e,i,...s)}}}const IA="undefined"!==typeof window;function FA(t){return null==t?null:IA&&t instanceof HTMLElement?"primitive":Array.isArray(t)?"array":t instanceof Date?"primitive":"object"===typeof t&&t.constructor===Object?"object":"function"===typeof t?"function":"object"===typeof t&&null!=t.constructor?kA:"primitive"}const GA=2*Math.PI;function BA(t){return t%=GA,t+=GA,t%=GA}function VA(t){return(t%=GA)<-Math.PI?t+=GA:t>=Math.PI&&(t-=GA),t}function jA(t){return t/180*Math.PI}function WA(t,e,i){return Math.max(e,Math.min(i,t))}class zA{constructor(){this.type="band",this.cache=null,this.cacheProps=["_domain","range","_paddingInner","_paddingOuter","round","interval"],this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some((e=>this[e]!==t[e])))&&(this.cache={},this.cacheProps.forEach((t=>this.cache[t]=this[t])),!0)}refresh(){this.didChange()&&this.update()}set domain(t){const e=[];this.index=new Map;const i=this.index;t.forEach((t=>{void 0===i.get(t)&&i.set(t,e.push(t)-1)})),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:t=1}=this,e=Math.abs(Math.round(t));return this._domain.filter(((t,i)=>i%e===0))}convert(t){this.refresh();const e=this.index.get(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex((e=>e===t));return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=WA(t,0,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=WA(t,0,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=WA(t,0,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,o=this._paddingOuter,[n,r]=this.range,s=r-n,a=s/Math.max(1,t+2*o-i),l=e?Math.floor(a):a,c=n+(s-l*(t-i))/2,d=e?Math.round(c):c,u=l*(1-i),h=e?Math.round(u):u,p=a*(1-i),f=[];for(let g=0;g<t;g++)f.push(d+l*g);this._bandwidth=h,this._rawBandwidth=p,this.ordinalRange=f}}function HA(t,e,i){return Math.min(i,Math.max(t,e))}function UA(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return Math.abs(t-e)<i}function KA(t){return Math.sign(t)<0||Object.is(t,-0)}function YA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=Math.pow(10,e);return Math.round(t*i)/i}function XA(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function $A(t,e){return t>=0?Math.floor(t%e):Math.floor(t%e+e)}class qA{constructor(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=HA(0,t||0,1),this.g=HA(0,e||0,1),this.b=HA(0,i||0,1),this.a=HA(0,o||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!qA.parseHex(t):t.indexOf("rgb")>=0?!!qA.stringToRgba(t):!!qA.nameToHex[t.toLowerCase()]}static fromString(t){if(t.indexOf("#")>=0)return qA.fromHexString(t);const e=qA.nameToHex[t.toLowerCase()];if(e)return qA.fromHexString(e);if(t.indexOf("rgb")>=0)return qA.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static tryParseFromString(t){try{return qA.fromString(t)}catch(e){return xA.warnOnce(`invalid color string: '${t}'.`),qA.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map((t=>parseInt(t,16))).map((t=>t+16*t))}if((null===e||void 0===e?void 0:e.length)>=3&&e.every((t=>t>=0)))return 3===e.length&&e.push(255),e}static fromHexString(t){const e=qA.parseHex(t);if(e){const[t,i,o,n]=e;return new qA(t/255,i/255,o/255,n/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let s=0;s<t.length;s++){const o=t[s];if(e||"("!==o){if(")"===o){i=s;break}}else e=s}const o=e&&i&&t.substring(e+1,i);if(!o)return;const n=o.split(","),r=[];for(let s=0;s<n.length;s++){const t=n[s];let e=parseFloat(t);if(isNaN(e))return;t.indexOf("%")>=0?(e=Math.max(0,Math.min(100,e)),e/=100):3===s?e=Math.max(0,Math.min(1,e)):(e=Math.max(0,Math.min(255,e)),e/=255),r.push(e)}return r}static fromRgbaString(t){const e=qA.stringToRgba(t);if(e){if(3===e.length)return new qA(e[0],e[1],e[2]);if(4===e.length)return new qA(e[0],e[1],e[2],e[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(4===t.length)return new qA(t[0],t[1],t[2],t[3]);if(3===t.length)return new qA(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=qA.HSBtoRGB(t,e,i);return new qA(n[0],n[1],n[2],o)}static fromHSL(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const n=qA.HSLtoRGB(t,e,i);return new qA(n[0],n[1],n[2],o)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let t="#"+qA.padHex(Math.round(255*this.r).toString(16))+qA.padHex(Math.round(255*this.g).toString(16))+qA.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(t+=qA.padHex(Math.round(255*this.a).toString(16))),t}toRgbaString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return qA.RGBtoHSB(this.r,this.g,this.b)}static RGBtoHSL(t,e,i){const o=Math.min(t,e,i),n=Math.max(t,e,i),r=(n+o)/2;let s,a;if(n===o)s=NaN,a=0;else{const l=n-o;a=r>.5?l/(2-n-o):l/(n+o),s=n===t?(e-i)/l+(e<i?6:0):n===e?(i-t)/l+2:(t-e)/l+4,s*=60}return[s,a,r]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const o=i<.5?i*(1+e):i+e-i*e,n=2*i-o;function r(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(o-n)*t:t<.5?o:t<2/3?n+(o-n)*(2/3-t)*6:n}return[r(t/360+1/3),r(t/360),r(t/360-1/3)]}static RGBtoHSB(t,e,i){const o=Math.min(t,e,i),n=Math.max(t,e,i);let r=NaN;if(o!==n){const s=n-o,a=(n-t)/s,l=(n-e)/s,c=(n-i)/s;r=t===n?c-l:e===n?2+a-c:4+l-a,r/=6,r<0&&(r+=1)}return[360*r,0!==n?(n-o)/n:0,n]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let o=0,n=0,r=0;if(0===e)o=n=r=i;else{const s=6*(t-Math.floor(t)),a=s-Math.floor(s),l=i*(1-e),c=i*(1-e*a),d=i*(1-e*(1-a));switch(s|0){case 0:o=i,n=d,r=l;break;case 1:o=c,n=i,r=l;break;case 2:o=l,n=i,r=d;break;case 3:o=l,n=c,r=i;break;case 4:o=d,n=l,r=i;break;case 5:o=i,n=l,r=c}}return[o,n,r]}derive(t,e,i,o){const n=qA.RGBtoHSB(this.r,this.g,this.b);let r=n[2];0==r&&i>1&&(r=.05);const s=((n[0]+t)%360+360)%360,a=Math.max(Math.min(n[1]*e,1),0);r=Math.max(Math.min(r*i,1),0);const l=Math.max(Math.min(this.a*o,1),0),c=qA.HSBtoRGB(s,a,r);return c.push(l),qA.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(t,e){const i=qA.tryParseFromString(t),o=qA.tryParseFromString(e);return t=>{const e=(e,i)=>e*(1-t)+i*t;return new qA(e(i.r,o.r),e(i.g,o.g),e(i.b,o.b),e(i.a,o.a)).toString()}}}function ZA(t){return AA(((e,i,o)=>{var n,r,s;if(t(o,{target:e}))return o;const a=i.toString().replace(/^_*/,"");let l=null!==(r=null===(n=e.constructor)||void 0===n?void 0:n.className)&&void 0!==r?r:null===(s=e.constructor)||void 0===s?void 0:s.name;(null===l||void 0===l?void 0:l.length)<3&&(l=null);const c=l?`of [${l}] `:"";return t.message?xA.warn(`Property [${a}] ${c}cannot be set to [${JA(o)}]; ${t.message}, ignoring.`):xA.warn(`Property [${a}] ${c}cannot be set to [${JA(o)}], ignoring.`),OA}))}function JA(t){return"number"===typeof t&&isNaN(t)?"NaN":t===1/0?"Infinity":t===-1/0?"-Infinity":JSON.stringify(t)}function QA(t,e){return t.message=e,t}qA.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});const tT=(t,e,i)=>void 0===t||i(t,e),eT=(t,e)=>QA(((i,o)=>Array.isArray(i)&&(!t||i.length===t)&&(!e||i.every((t=>e(t,o))))),"expecting an Array"),iT=t=>QA(((e,i)=>tT(e,i,eT(t))),"expecting an optional Array");QA((t=>Array.isArray(t)&&t.length>0),"expecting a non-empty Array");const oT=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return QA(((t,i)=>e.every((e=>e(t,i)))),e.map((t=>t.message)).filter((t=>null!=t)).join(" AND "))},nT=t=>null!=t&&!isNaN(t),rT=t=>QA(((e,i)=>!nT(e)||!nT(i.target[t])||e<i.target[t]),`expected to be less than ${t}`),sT=t=>QA(((e,i)=>!nT(e)||!nT(i.target[t])||e>i.target[t]),`expected to be greater than ${t}`),aT=QA((t=>"function"===typeof t),"expecting a Function"),lT=QA(((t,e)=>tT(t,e,aT)),"expecting an optional Function"),cT=QA((t=>!0===t||!1===t),"expecting a Boolean"),dT=QA(((t,e)=>tT(t,e,cT)),"expecting an optional Boolean"),uT=QA((t=>"string"===typeof t),"expecting a String"),hT=QA(((t,e)=>tT(t,e,uT)),"expecting an optional String"),pT=QA((t=>t instanceof Date&&!isNaN(+t)),"expecting a Date object"),fT=QA(((t,e)=>tT(t,e,pT)),"expecting an optional Date");QA(eT(void 0,pT),"expecting an Array of Date objects");const gT=wT(0),vT=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return QA(((t,i)=>e.some((e=>e(t,i)))),e.map((t=>t.message)).filter((t=>null!=t)).join(" OR "))}(fT,QA(((t,e)=>tT(t,e,gT)),"expecting an optional number")),yT="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",mT=QA((t=>"string"===typeof t&&qA.validColorString(t)),`expecting a color String. ${yT}`),bT=QA(((t,e)=>tT(t,e,mT)),`expecting an optional color String. ${yT}`),ST=QA(eT(void 0,mT),`expecting an Array of color strings. ${yT}`),xT=QA(((t,e)=>tT(t,e,ST)),`expecting an optional Array of color strings. ${yT}`);function CT(){let t=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"expecting a finite Number";return void 0!==t&&void 0!==e?i+=` between ${t} and ${e} inclusive`:void 0!==t?i+=` greater than or equal to ${t}`:void 0!==e&&(i+=` less than or equal to ${e}`),i}function wT(t,e){return QA((i=>"number"===typeof i&&Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e)),CT(void 0,t,e))}function ET(t,e){return QA(((i,o)=>tT(i,o,wT(t,e))),CT("expecting an optional finite Number",t,e))}function OT(t,e){return QA((i=>"number"===typeof i&&(isNaN(i)||Number.isFinite(i)&&(void 0===t||i>=t)&&(void 0===e||i<=e))),CT(void 0,t,e))}const DT=QA(eT(void 0,wT()),"expecting an Array of numbers"),AT=QA(((t,e)=>tT(t,e,DT)),"expecting an optional Array of numbers"),TT=QA(eT(void 0,uT),"expecting an Array of strings");function MT(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return QA((t=>"string"===typeof t&&e.indexOf(t)>=0),`expecting one of: ${e.join(", ")}`)}QA(((t,e)=>tT(t,e,TT)),"expecting an optional Array of strings");const kT=QA(eT(void 0,cT),"expecting an Array of boolean values");QA(((t,e)=>tT(t,e,kT)),"expecting an optional Array of boolean values");const RT=["normal","bold","bolder","lighter"],PT=QA((t=>"normal"===t||"italic"===t||"oblique"===t),"expecting a font style keyword such as 'normal', 'italic' or 'oblique'"),NT=QA(((t,e)=>tT(t,e,PT)),"expecting an optional font style keyword such as 'normal', 'italic' or 'oblique'"),LT=QA((t=>RT.includes(t)||"number"===typeof t&&isFinite(t)),"expecting a font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),_T=QA(((t,e)=>tT(t,e,LT)),"expecting an optional font weight keyword such as 'normal', 'bold' or 'bolder' or a numeric value such as 100, 300 or 600"),IT=QA(eT(void 0,wT(0)),"expecting an Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),FT=QA(((t,e)=>tT(t,e,IT)),"expecting an optional Array of numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),GT=["butt","round","square"],BT=QA((t=>GT.includes(t)),"expecting a line cap keyword such as 'butt', 'round' or 'square'");QA(((t,e)=>tT(t,e,BT)),"expecting an optional line cap keyword such as 'butt', 'round' or 'square'");const VT=["round","bevel","miter"],jT=QA((t=>VT.includes(t)),"expecting a line join keyword such as 'round', 'bevel' or 'miter'");QA(((t,e)=>tT(t,e,jT)),"expecting an optional line join keyword such as 'round', 'bevel' or 'miter'");const WT=["top","right","bottom","left"],zT=QA((t=>WT.includes(t)),"expecting a position keyword such as 'top', 'right', 'bottom' or 'left"),HT=["exact","nearest"],UT=QA((t=>"number"===typeof t&&Number.isFinite(t)||HT.includes(t)),"expecting an interaction range of 'exact', 'nearest' or a number"),KT=["never","always","hyphenate","on-space"],YT=QA((t=>KT.includes(t)),"expecting a text wrap strategy keyword such as 'never', 'always', 'hyphenate', or 'on-space'"),XT=["ellipsis","hide"];QA((t=>XT.includes(t)),"expecting an overflow strategy keyword such as 'ellipsis', or 'hide'");const $T=["left","center","right"];QA((t=>$T.includes(t)),"expecting a text align keyword such as 'left', 'center', or 'right'");const qT=["top","middle","bottom"];QA((t=>qT.includes(t)),"expecting a text align keyword such as 'top', 'middle', or 'bottom'");const ZT=["horizontal","vertical"],JT=QA((t=>ZT.includes(t)),"expecting a direction keyword such as 'horizontal' or 'vertical'");var QT,tM;QA(((t,e)=>tT(t,e,JT)),"expecting an optional direction keyword such as 'horizontal' or 'vertical'"),function(t){t.X="x",t.Y="y"}(QT||(QT={})),function(t){t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR"}(tM||(tM={}));const eM=function(){try{return new Function("return true"),!0}catch(t){return!1}}();function iM(t){const{changeCb:e,convertor:i}=null!==t&&void 0!==t?t:{};return function(o,n){const r=`__${n}`;o[n]||(eM&&null==e&&null==i?function(t,e,i,o){const{redraw:n=tM.TRIVIAL,type:r="normal",checkDirtyOnAssignment:s=!1}=null!==o&&void 0!==o?o:{},a=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===r?`this.markDirty(this, ${n});`:""}\n            ${"transform"===r?`this.markDirtyTransform(${n});`:""}\n            ${"path"===r?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===r?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${s?`if (value != null && value._dirty > ${tM.NONE}) { this.markDirty(value, value._dirty); }`:""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:a,get:l,enumerable:!0,configurable:!0})}(o,n,r,t):function(t,e,i,o){const{redraw:n=tM.TRIVIAL,type:r="normal",changeCb:s,convertor:a,checkDirtyOnAssignment:l=!1}=null!==o&&void 0!==o?o:{},c=function(t){const e=this[i];(t=a?a(t):t)!==e&&(this[i]=t,"normal"===r&&this.markDirty(this,n),"transform"===r&&this.markDirtyTransform(n),"path"!==r||this._dirtyPath||(this._dirtyPath=!0,this.markDirty(this,n)),"font"!==r||this._dirtyFont||(this._dirtyFont=!0,this.markDirty(this,n)),s&&s(this)),l&&null!=t&&t._dirty>tM.NONE&&this.markDirty(t,t._dirty)},d=function(){return this[i]};Object.defineProperty(t,e,{set:c,get:d,enumerable:!0,configurable:!0})}(o,n,r,t))}}class oM{constructor(){this._dirty=tM.MAJOR}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tM.TRIVIAL;this._dirty>e||(this._dirty=e)}markClean(t){this._dirty=tM.NONE}isDirty(){return this._dirty>tM.NONE}}const nM={};function rM(t){var e;const i=t.constructor,o=Object.prototype.hasOwnProperty.call(i,"className")?i.className:i.name;if(!o)throw new Error(`The ${i} is missing the 'className' property.`);const n=(null!==(e=nM[o])&&void 0!==e?e:0)+1;return nM[o]=n,o+"-"+n}function sM(t,e){const i={nearest:void 0,distanceSquared:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0};for(const o of e){const e=o.distanceSquared(t);if(0===e)return{nearest:o,distanceSquared:0};e<i.distanceSquared&&(i.nearest=o,i.distanceSquared=e)}return i}class aM{constructor(t,e,i,o){this.x=t,this.y=e,this.width=i,this.height=o}clone(){const{x:t,y:e,width:i,height:o}=this;return new aM(t,e,i,o)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(t){if(this.containsPoint(t.x,t.y))return 0;const e=t.x-Math.max(this.x,Math.min(t.x,this.x+this.width)),i=t.y-Math.max(this.y,Math.min(t.y,this.y+this.height));return e*e+i*i}static nearestBox(t,e){return sM(t,e)}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"===typeof t?i(e,t):Object.entries(t).forEach((t=>{let[e,o]=t;return i(e,o)})),this}grow(t,e){if("number"===typeof t)this.shrink(-t,e);else{const e=Object.assign({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}static merge(t){let e=1/0,i=1/0,o=-1/0,n=-1/0;return t.forEach((t=>{t.x<e&&(e=t.x),t.y<i&&(i=t.y),t.x+t.width>o&&(o=t.x+t.width),t.y+t.height>n&&(n=t.y+t.height)})),new aM(e,i,o-e,n-i)}}aM.zero=new aM(0,0,0,0);class lM{get e(){return[...this.elements]}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,1,0,0];this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const o=t[0]*e[0]+t[2]*e[1],n=t[1]*e[0]+t[3]*e[1],r=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],a=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=null!==i&&void 0!==i?i:t)[0]=o,i[1]=n,i[2]=r,i[3]=s,i[4]=a,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const e=new Array(6);return this.AxB(this.elements,t.elements,e),new lM(e)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let e=t[0],i=t[1],o=t[2],n=t[3];const r=t[4],s=t[5],a=1/(e*n-i*o);return e*=a,i*=a,o*=a,n*=a,new lM([n,-i,-o,e,o*s-n*r,i*r-e*s])}inverseTo(t){const e=this.elements;let i=e[0],o=e[1],n=e[2],r=e[3];const s=e[4],a=e[5],l=1/(i*r-o*n);return i*=l,o*=l,n*=l,r*=l,t.setElements([r,-o,-n,i,n*a-r*s,o*s-i*a]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],o=t[2],n=t[3];const r=t[4],s=t[5],a=1/(e*n-i*o);return e*=a,i*=a,o*=a,n*=a,t[0]=n,t[1]=-i,t[2]=-o,t[3]=e,t[4]=o*s-n*r,t[5]=i*r-e*s,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,o=i[0],n=i[1],r=i[2],s=i[3],a=.5*t.width,l=.5*t.height,c=t.x+a,d=t.y+l,u=Math.abs(a*o)+Math.abs(l*r),h=Math.abs(a*n)+Math.abs(l*s);return e||(e=new aM(0,0,0,0)),e.x=c*o+d*r+i[4]-u,e.y=c*n+d*s+i[5]-h,e.width=u+u,e.height=h+h,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(t){return lM.instance.setElements(t.elements)}static updateTransformMatrix(t,e,i,o,n,r,s){const[a,l]=[0,0],c=e,d=i;let u,h;1===c&&1===d?(u=0,h=0):(u=null==(null===s||void 0===s?void 0:s.scalingCenterX)?a:null===s||void 0===s?void 0:s.scalingCenterX,h=null==(null===s||void 0===s?void 0:s.scalingCenterY)?l:null===s||void 0===s?void 0:s.scalingCenterY);const p=o,f=Math.cos(p),g=Math.sin(p);let v,y;0===p?(v=0,y=0):(v=null==(null===s||void 0===s?void 0:s.rotationCenterX)?a:null===s||void 0===s?void 0:s.rotationCenterX,y=null==(null===s||void 0===s?void 0:s.rotationCenterY)?l:null===s||void 0===s?void 0:s.rotationCenterY);const m=n,b=r,S=u*(1-c)-v,x=h*(1-d)-y;return t.setElements([f*c,g*c,-g*d,f*d,f*S-g*x+v+m,g*S+f*x+y+b]),t}static fromContext(t){const e=t.getTransform();return new lM([e.a,e.b,e.c,e.d,e.e,e.f])}}var cM;lM.instance=new lM,function(t){t[t.All=0]="All",t[t.None=1]="None"}(cM||(cM={}));const dM=t=>{t.parent&&(t.parent.dirtyZIndex=!0),t.zIndexChanged()};class uM extends oM{get datum(){var t,e;return null!==(t=this._datum)&&void 0!==t?t:null===(e=this._parent)||void 0===e?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null===t||void 0===t?void 0:t.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const t=[...this._children];for(const e of this._virtualChildren)t.push(...e.children);return t}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=null!==e&&void 0!==e?e:Object.keys(t);for(const o of i)this[o]=t[o];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,tM.MAJOR)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,tM.MAJOR),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=lM.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,tM.MAJOR)}constructor(){let{isVirtual:t,tag:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.serialNumber=uM._nextSerialNumber++,this.id=rM(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new lM,this.inverseMatrix=new lM,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=cM.All,this.isVirtual=null!==t&&void 0!==t&&t,this.tag=null!==e&&void 0!==e?e:NaN}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||this.pointerEvents===cM.None||!this.containsPoint(t,e))return;const o=this.children;if(o.length>1e3)for(let n=o.length-1;n>=0;n--){const r=o[n],s=(null===(i=r.computeTransformedBBox())||void 0===i?void 0:i.containsPoint(t,e))?r.pickNode(t,e):void 0;if(s)return s}else if(o.length)for(let n=o.length-1;n>=0;n--){const i=o[n].pickNode(t,e);if(i)return i}else if(!this.isContainerNode)return this}findNodes(t){const e=t(this)?[this]:[];for(const i of this.children){const o=i.findNodes(t);o&&e.push(...o)}return e}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=lM.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),e.preMultiplySelf(i.matrix),i=i.parent;return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:o,translationX:n,translationY:r,scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}=this;lM.updateTransformMatrix(t,e,i,o,n,r,{scalingCenterX:s,scalingCenterY:a,rotationCenterX:l,rotationCenterY:c}),t.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=tM.NONE,e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:o,width:n,height:r}=e,s=this.transformPoint(i,o),a=this.transformPoint(i+n,o+r);t.clearRect(s.x,s.y,a.x-s.x,a.y-s.y)}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tM.TRIVIAL,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=null!==t&&void 0!==t?t:{};if(this._dirty!==tM.NONE||e){if(this._dirty=tM.NONE,!1!==i)for(const t of this._virtualChildren)t.markClean({force:e});if(!0===i)for(const t of this._children)t.markClean({force:e})}}visibilityChanged(){}get nodeCount(){let t=1,e=this._dirty>=tM.NONE||this.dirtyTransform?1:0,i=this.visible?1:0;const o=o=>{const{count:n,visibleCount:r,dirtyCount:s}=o.nodeCount;t+=n,i+=r,e+=s};for(const n of this._children)o(n);for(const n of this._virtualChildren)o(n);return{count:t,visibleCount:i,dirtyCount:e}}zIndexChanged(){}}uM._nextSerialNumber=0,dA([iM({type:"transform"}),uA("design:type",Number)],uM.prototype,"scalingX",void 0),dA([iM({type:"transform"}),uA("design:type",Number)],uM.prototype,"scalingY",void 0),dA([iM({type:"transform"}),uA("design:type",Object)],uM.prototype,"scalingCenterX",void 0),dA([iM({type:"transform"}),uA("design:type",Object)],uM.prototype,"scalingCenterY",void 0),dA([iM({type:"transform"}),uA("design:type",Object)],uM.prototype,"rotationCenterX",void 0),dA([iM({type:"transform"}),uA("design:type",Object)],uM.prototype,"rotationCenterY",void 0),dA([iM({type:"transform"}),uA("design:type",Number)],uM.prototype,"rotation",void 0),dA([iM({type:"transform"}),uA("design:type",Number)],uM.prototype,"translationX",void 0),dA([iM({type:"transform"}),uA("design:type",Number)],uM.prototype,"translationY",void 0),dA([iM({redraw:tM.MAJOR,changeCb:t=>t.visibilityChanged()}),uA("design:type",Boolean)],uM.prototype,"visible",void 0),dA([iM({redraw:tM.TRIVIAL,changeCb:dM}),uA("design:type",Number)],uM.prototype,"zIndex",void 0),dA([iM({redraw:tM.TRIVIAL,changeCb:dM}),uA("design:type",Array)],uM.prototype,"zIndexSubOrder",void 0);class hM extends oM{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}}dA([ZA(cT),iM({redraw:tM.MAJOR}),uA("design:type",Object)],hM.prototype,"enabled",void 0),dA([ZA(mT),iM({redraw:tM.MAJOR}),uA("design:type",Object)],hM.prototype,"color",void 0),dA([ZA(wT()),iM({redraw:tM.MAJOR}),uA("design:type",Object)],hM.prototype,"xOffset",void 0),dA([ZA(wT()),iM({redraw:tM.MAJOR}),uA("design:type",Object)],hM.prototype,"yOffset",void 0),dA([ZA(wT(0)),iM({redraw:tM.MAJOR}),uA("design:type",Object)],hM.prototype,"blur",void 0);const pM=[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i];function fM(){if("undefined"===typeof navigator)return!0;const t=navigator.userAgent;return!pM.some((e=>e.test(t)))}class gM{constructor(t){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:e,window:i,width:o=600,height:n=300,domLayer:r=!1,zIndex:s=0,name:a,overrideDevicePixelRatio:l}=t;this.document=e,this.window=i,gM.document=e,this.element=e.createElement("canvas"),this.element.width=o,this.element.height=n,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:c}=this.element;c.userSelect="none",c.display="block",r&&(c.position="absolute",c.zIndex=String(s),c.top="0",c.left="0",c.pointerEvents="none",c.opacity="1",a&&(this.element.id=a)),this.context=this.setPixelRatio(l),this.resize(o,n)}set container(t){this._container!==t&&(this.remove(),t&&t.appendChild(this.element),this._container=t)}get container(){return this._container}set enabled(t){this.element.style.display=t?"block":"none",this._enabled=!!t}get enabled(){return this._enabled}remove(){const{parentNode:t}=this.element;null!=t&&t.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const t=this.document.createElement("img");return t.src=this.getDataURL(),t}getDataURL(t){return this.element.toDataURL(t)}download(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"image/png";t=(null!==t&&void 0!==t?t:"").trim()||"image";const i=this.getDataURL(e),o=this.document,n=o.createElement("a");n.href=i,n.download=t,n.style.display="none",o.body.appendChild(n),n.click(),o.body.removeChild(n)}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!==t&&void 0!==t?t:this.window.devicePixelRatio;return fM()||(e=1),this._pixelRatio=e,gM.overrideScale(this.realContext,e)}set pixelated(t){this.element.style.imageRendering=t?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:o,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),i.style.width=t+"px",i.style.height=e+"px",o.resetTransform(),this._width=t,this._height=e}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const t=this.document.createElement("canvas");return this._textMeasuringContext=t.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const t="http://www.w3.org/2000/svg",e=document.createElementNS(t,"svg");e.setAttribute("width","100"),e.setAttribute("height","100"),e.classList?e.classList.add("text-measuring-svg"):e.setAttribute("class","text-measuring-svg"),e.style.position="absolute",e.style.top="-1000px",e.style.visibility="hidden";const i=document.createElementNS(t,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),e.appendChild(i),document.body.appendChild(e),this._svgText=i,i}static get has(){if(this._has)return this._has;const t="undefined"===typeof navigator||navigator.userAgent.indexOf("Chrome")>-1,e="undefined"!==typeof navigator&&navigator.userAgent.indexOf("Firefox")>-1,i=!t&&"undefined"!==typeof navigator&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!e&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(t,e,i,o){const n=this.textMeasuringContext;return n.font=e,n.textBaseline=i,n.textAlign=o,n.measureText(t)}static getTextSize(t,e){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=e;const o=i.measureText(t);return{width:o.width,height:o.actualBoundingBoxAscent+o.actualBoundingBoxDescent}}return this.measureSvgText(t,e)}static measureSvgText(t,e){const i=this.textSizeCache,o=i[e];if(o){const e=o[t];if(e)return e}else i[e]={};const n=this.svgText;n.style.font=e,n.textContent=t;const r=n.getBBox(),s={width:r.width,height:r.height};return i[e][t]=s,s}static overrideScale(t,e){let i=0;const o={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(t,i,o,n,r,s){"object"===typeof t?this.$setTransform(t):this.$setTransform(t*e,i*e,o*e,n*e,r*e,s*e)},resetTransform(){this.$setTransform(e,0,0,e,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t["$"+n]||(t["$"+n]=t[n]),t[n]=o[n]);return t}}gM.document=globalThis.document,gM.textSizeCache={};class vM{constructor(){this.stops=[]}}class yM extends vM{constructor(){super(...arguments),this.angle=0}createGradient(t,e){const{stops:i,angle:o}=this,n=BA(jA(o+90)),r=Math.cos(n),s=Math.sin(n),a=e.width,l=e.height,c=e.x+.5*a,d=e.y+.5*l;if(a>0&&l>0){const e=Math.sqrt(l*l+a*a)/2,o=Math.atan2(l,a);let u;u=n<Math.PI/2?n:n<Math.PI?Math.PI-n:n<3*Math.PI/2?n-Math.PI:2*Math.PI-n;const h=e*Math.abs(Math.cos(u-o)),p=t.createLinearGradient(c+r*h,d+s*h,c-r*h,d-s*h);return i.forEach((t=>{p.addColorStop(t.offset,t.color)})),p}return"black"}}const mM=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i;class bM extends uM{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=bM.defaultStyles.fill,this.stroke=bM.defaultStyles.stroke,this.strokeWidth=bM.defaultStyles.strokeWidth,this.lineDash=bM.defaultStyles.lineDash,this.lineDashOffset=bM.defaultStyles.lineDashOffset,this.lineCap=bM.defaultStyles.lineCap,this.lineJoin=bM.defaultStyles.lineJoin,this.opacity=bM.defaultStyles.opacity,this.fillShadow=bM.defaultStyles.fillShadow}restoreOwnStyles(){const t=this.constructor.defaultStyles,e=Object.getOwnPropertyNames(t);for(let i=0,o=e.length;i<o;i++){const o=e[i];this[o]=t[o]}}updateGradient(){const{fill:t}=this;let e;if((null===t||void 0===t?void 0:t.startsWith("linear-gradient"))&&(e=mM.exec(t))){const t=parseFloat(e[1]),i=[],o=e[2],n=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let r;for(;r=n.exec(o);)i.push(r[0]);this.gradient=new yM,this.gradient.angle=t,this.gradient.stops=i.map(((t,e)=>({offset:e/(i.length-1),color:t})))}else this.gradient=void 0}align(t,e){var i,o,n;const r=null!==(n=null===(o=null===(i=this.layerManager)||void 0===i?void 0:i.canvas)||void 0===o?void 0:o.pixelRatio)&&void 0!==n?n:1,s=Math.round(t*r)/r;return void 0==e?s:0===e?0:e<1?Math.ceil(e*r)/r:Math.round((e+t)*r)/r-s}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const o=null!==(i=null===(e=this.layerManager)||void 0===e?void 0:e.canvas.pixelRatio)&&void 0!==i?i:1,n=this.fillShadow;(null===n||void 0===n?void 0:n.enabled)&&(t.shadowColor=n.color,t.shadowOffsetX=n.xOffset*o,t.shadowOffsetY=n.yOffset*o,t.shadowBlur=n.blur*o)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}}bM.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),dA([iM({redraw:tM.MINOR}),uA("design:type",Number)],bM.prototype,"fillOpacity",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Number)],bM.prototype,"strokeOpacity",void 0),dA([iM({redraw:tM.MINOR,changeCb:t=>t.updateGradient()}),uA("design:type",Object)],bM.prototype,"fill",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Object)],bM.prototype,"stroke",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Number)],bM.prototype,"strokeWidth",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Object)],bM.prototype,"lineDash",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Number)],bM.prototype,"lineDashOffset",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",String)],bM.prototype,"lineCap",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",String)],bM.prototype,"lineJoin",void 0),dA([iM({redraw:tM.MINOR,convertor:t=>Math.min(1,Math.max(0,t))}),uA("design:type",Number)],bM.prototype,"opacity",void 0),dA([iM({redraw:tM.MINOR,checkDirtyOnAssignment:!0}),uA("design:type",Object)],bM.prototype,"fillShadow",void 0);function SM(t){const{redraw:e=tM.MAJOR,changeCb:i}=null!==t&&void 0!==t?t:{};return iM({redraw:e,type:"font",changeCb:i})}class xM extends bM{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=xM.defaultStyles.textAlign,this.textBaseline=xM.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=AM(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=CM(this)),this._font}computeBBox(){return gM.has.textMetrics?EM(this.lines,this.x,this.y,this):OM(this.lines,this.x,this.y,this)}getLineHeight(t){var e,i;if(this.lineHeight)return this.lineHeight;if(gM.has.textMetrics){const o=gM.measureText(t,this.font,this.textBaseline,this.textAlign);return(null!==(e=o.fontBoundingBoxAscent)&&void 0!==e?e:o.emHeightAscent)+(null!==(i=o.fontBoundingBoxDescent)&&void 0!==i?i:o.emHeightDescent)}return gM.getTextSize(t,this.font).height}isPointInPath(t,e){const i=this.transformPoint(t,e),o=this.computeBBox();return!!o&&o.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:o}=t;if(this.dirty===tM.NONE&&!i)return void(o&&(o.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(o&&(o.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:n,stroke:r,strokeWidth:s}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const a=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;(null===t||void 0===t?void 0:t.enabled)&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*a,e.shadowOffsetY=t.yOffset*a,e.shadowBlur=t.blur*a),this.renderLines(((t,i,o)=>e.fillText(t,i,o)))}if(r&&s){e.strokeStyle=r,e.lineWidth=s,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:o,lineJoin:n}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),o&&(e.lineCap=o),n&&(e.lineJoin=n),this.renderLines(((t,i,o)=>e.strokeText(t,i,o)))}super.render(t)}renderLines(t){const{lines:e,x:i,y:o}=this,n=this.lines.map((t=>this.getLineHeight(t)));let r=-(n.reduce(((t,e)=>t+e),0)-n[0])*DM(this.textBaseline);for(let s=0;s<e.length;s++)t(e[s],i,o+r),r+=n[s]}static wrap(t,e,i,o,n){var r;const s="hide"!==(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"ellipsis"),a=function(t){const e=new Map,i=e=>gM.getTextSize(e,t),o=t=>{if(e.has(t))return e.get(t);const{width:o}=i(t);return e.set(t,o),o};return{size:i,width:o}}(CM(o)),l=t.split(/\r?\n/g);if(0===l.length)return"";if("never"===n)return null!==(r=xM.truncateLine(l[0],e,a,s?"auto":"never"))&&void 0!==r?r:"";const c=[];let d=0;for(const u of l){const t=xM.wrapLine(u,e,i,a,o,n,d,s);if(null==t)return"";if(c.push(t.result),d=t.cumulativeHeight,t.truncated)break}return c.join("\n").trim()}static wrapLine(t,e,i,o,n,r,s,a){if(!(t=t.trim()))return{result:"",truncated:!1,cumulativeHeight:s};const l=o.size(t);if(l.width<=e)return{result:t,truncated:!1,cumulativeHeight:s+l.height};if(l.height>i||o.width("W")>e)return a?{result:"",truncated:!0,cumulativeHeight:s}:void 0;const c=t.split(/\s+/g),d=xM.wrapLineSequentially(c,e,i,o,n,r,s,a);if(null==d)return;s=d.cumulativeHeight;let{lines:u}=d;if(!d.wordsBrokenOrTruncated&&!d.linesTruncated){const t=d.lines.length,i=xM.wrapLineBalanced(c,e,o,t);i.length===u.length&&(u=i)}return{result:u.map((t=>t.join(" "))).join("\n"),truncated:d.linesTruncated,cumulativeHeight:s}}static breakWord(t,e,i,o,n){const r=e=>xM.punctuationMarks.includes(t[e]),s=o?n.width("-"):0,a=[];let l=0,c=0;for(let h=0;h<t.length;h++){const o=t[h],r=n.width(o);l+r+s>(0===c?e:i)&&(a.push(h),l=0,c++),l+=r}const d=[];let u=0;for(const h of a){let e=t.substring(u,h);o&&e.length>0&&!r(h-1)&&!r(h)&&(e+="-"),d.push(e),u=h}return d.push(t.substring(u)),d}static truncateLine(t,e,i,o){t=t.trimEnd();const n=i.width(t);if(n>e&&"never"===o)return;if(n<=e&&"force"!==o)return t;const r=i.width("\u2026");let s=t,a=n;for(;s.length>0&&a+r>e;)s=s.slice(0,-1).trimEnd(),a=i.width(s);return a+r<=e?`${s}\u2026`:void 0}static wrapLineSequentially(t,e,i,o,n,r,s,a){const{fontSize:l=0,lineHeight:c=l*xM.defaultLineHeightRatio}=n,d="always"===r||"hyphenate"===r,u="hyphenate"===r,h=o.width(" ");let p=!1,f=!1;const g=[];let v=[],y=0;const m=()=>({lines:g,linesTruncated:f,wordsBrokenOrTruncated:p,cumulativeHeight:s}),b=()=>{if(!a)return;const t=v.join(" "),i=xM.truncateLine(t,e,o,"force");return null!=i?(v.splice(0,v.length,i),f=!0,m()):void 0},S=()=>{const t=s+c;return!(t>=i)&&(v=[],y=0,s=t,g.push(v),!0)};if(!S())return b();for(let x=0;x<t.length;x++){const i=t[x],n=o.width(i),r=0===v.length?0:h,s=y+r+n;if(s<=e)v.push(i),y=s;else if(n<=e){if(!S())return b();v.push(i),y=n}else{if(p=!0,!d){if(a){if(!S())return b();const n=xM.truncateLine(i,e,o,"force");if(null==n)return;v.push(n),x<t.length-1&&(f=!0);break}return}{const t=e-y-r,n=xM.breakWord(i,t,e,u,o);for(let e=0;e<n.length;e++){const t=n[e];if(t&&v.push(t),e===n.length-1)y=o.width(t);else if(!S())return b()}}}}return m()}static wrapLineBalanced(t,e,i,o){const n=t.reduce(((t,e)=>t+i.width(e)),0),r=i.width(" "),s=(n+r*(t.length-o-2))/o,a=[];let l=[],c=i.width(t[0]),d=!0;for(const u of t){const t=i.width(u);if(d){l=[],l.push(u),c=t,d=!1,a.push(l);continue}const o=c+r+t;o<=s?(l.push(u),c=o):o<=e?(l.push(u),d=!0):(l=[u],c=t,a.push(l))}return a}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}}function CM(t){const{fontFamily:e,fontSize:i,fontStyle:o,fontWeight:n}=t;return[null!==o&&void 0!==o?o:"",null!==n&&void 0!==n?n:"",i+"px",e].join(" ").trim()}function wM(t,e,i,o){return gM.has.textMetrics?EM(t,e,i,o):OM(t,e,i,o)}function EM(t,e,i,o){var n,r;let s=0,a=0,l=0,c=0,d=0;const u=CM(o),{lineHeight:h,textBaseline:p=xM.defaultStyles.textBaseline,textAlign:f=xM.defaultStyles.textAlign}=o;for(let g=0;g<t.length;g++){const e=gM.measureText(t[g],u,p,f);s=Math.max(s,e.actualBoundingBoxLeft),l=Math.max(l,e.width),0==g?(a+=e.actualBoundingBoxAscent,c+=e.actualBoundingBoxAscent):d+=null!==(n=e.fontBoundingBoxAscent)&&void 0!==n?n:e.emHeightAscent,g==t.length-1?c+=e.actualBoundingBoxDescent:d+=null!==(r=e.fontBoundingBoxDescent)&&void 0!==r?r:e.emHeightDescent}return void 0!==h&&(d=(t.length-1)*h),c+=d,a+=d*DM(p),new aM(e-s,i-a,l,c)}function OM(t,e,i,o){let n=0,r=0,s=0;const a=CM(o),{lineHeight:l,textBaseline:c=xM.defaultStyles.textBaseline,textAlign:d=xM.defaultStyles.textAlign}=o;if(t.length>0){const e=gM.getTextSize(t[0],a);n=e.width,r=e.height}for(let u=1;u<t.length;u++){const e=gM.getTextSize(t[u],a);n=Math.max(n,e.width),s+=null!==l&&void 0!==l?l:e.height}switch(d){case"end":case"right":e-=n;break;case"center":e-=n/2}switch(c){case"alphabetic":i-=.7*r+.5*s;break;case"middle":i-=.45*r+.5*s;break;case"ideographic":case"bottom":i-=r+s;break;case"hanging":i-=.2*r+.5*s}return new aM(e,i,n,r+s)}function DM(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function AM(t){return"string"===typeof t?t.split(/\r?\n/g):[]}function TM(t,e){return AA(((i,o,n)=>(i[t][null!==e&&void 0!==e?e:o]=n,n)))}function MM(t){const{newValue:e,oldValue:i,changeValue:o}=t;return AA(((t,n,r,s)=>(r!==s&&(void 0!==s&&(null===i||void 0===i||i.call(t,s)),void 0!==r&&(null===e||void 0===e||e.call(t,r)),null===o||void 0===o||o.call(t,r,s)),r)))}xM.className="Text",xM.defaultLineHeightRatio=1.15,xM.defaultStyles=Object.assign({},bM.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),xM.ellipsis="\u2026",xM.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],xM.prototype,"x",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],xM.prototype,"y",void 0),dA([iM({redraw:tM.MAJOR,changeCb:t=>t._setLines()}),uA("design:type",String)],xM.prototype,"text",void 0),dA([SM(),uA("design:type",String)],xM.prototype,"fontStyle",void 0),dA([SM(),uA("design:type",String)],xM.prototype,"fontWeight",void 0),dA([SM(),uA("design:type",Number)],xM.prototype,"fontSize",void 0),dA([SM(),uA("design:type",String)],xM.prototype,"fontFamily",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",String)],xM.prototype,"textAlign",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",String)],xM.prototype,"textBaseline",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],xM.prototype,"lineHeight",void 0);class kM{constructor(){this.node=new xM,this.enabled=!1,this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.maxWidth=void 0,this.maxHeight=void 0,this.wrapping="always";const t=this.node;t.textAlign="center",t.pointerEvents=cM.None}computeTextWrap(t,e){var i,o;const{text:n,wrapping:r}=this,s=Math.min(null!==(i=this.maxWidth)&&void 0!==i?i:1/0,t),a=null!==(o=this.maxHeight)&&void 0!==o?o:e;if(!isFinite(s)&&!isFinite(a))return void(this.node.text=n);const l=xM.wrap(null!==n&&void 0!==n?n:"",s,a,this,r);this.node.text=l}}kM.SMALL_PADDING=10,kM.LARGE_PADDING=20,dA([ZA(cT),uA("design:type",Object)],kM.prototype,"enabled",void 0),dA([ZA(hT),TM("node"),uA("design:type",String)],kM.prototype,"text",void 0),dA([ZA(NT),TM("node"),uA("design:type",Object)],kM.prototype,"fontStyle",void 0),dA([ZA(_T),TM("node"),uA("design:type",Object)],kM.prototype,"fontWeight",void 0),dA([ZA(wT(0)),TM("node"),uA("design:type",Number)],kM.prototype,"fontSize",void 0),dA([ZA(uT),TM("node"),uA("design:type",String)],kM.prototype,"fontFamily",void 0),dA([ZA(bT),TM("node","fill"),uA("design:type",Object)],kM.prototype,"color",void 0),dA([ZA(ET(0)),uA("design:type",Number)],kM.prototype,"spacing",void 0),dA([ZA(ET(0)),uA("design:type",Number)],kM.prototype,"lineHeight",void 0),dA([ZA(ET(0)),uA("design:type",Number)],kM.prototype,"maxWidth",void 0),dA([ZA(ET(0)),uA("design:type",Number)],kM.prototype,"maxHeight",void 0),dA([ZA(YT),uA("design:type",String)],kM.prototype,"wrapping",void 0);class RM{constructor(){this.enabled=!1,this.text=void 0,this.spacing=kM.SMALL_PADDING,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.formatter=void 0}}function PM(t,e){const i={};if(Array.isArray(e))for(let o=0;o<t.length;o++)i[`${t[o]}`]=e[o];else for(let o=0;o<t.length;o++)i[`${t[o]}`]=e;return i}function NM(t,e){return i=>Number(t)*(1-i)+Number(e)*i}dA([ZA(cT),uA("design:type",Object)],RM.prototype,"enabled",void 0),dA([ZA(hT),uA("design:type",String)],RM.prototype,"text",void 0),dA([ZA(ET(0)),uA("design:type",Number)],RM.prototype,"spacing",void 0),dA([ZA(NT),uA("design:type",String)],RM.prototype,"fontStyle",void 0),dA([ZA(_T),uA("design:type",String)],RM.prototype,"fontWeight",void 0),dA([ZA(wT(0)),uA("design:type",Number)],RM.prototype,"fontSize",void 0),dA([ZA(uT),uA("design:type",String)],RM.prototype,"fontFamily",void 0),dA([ZA(bT),uA("design:type",String)],RM.prototype,"color",void 0),dA([ZA(YT),uA("design:type",String)],RM.prototype,"wrapping",void 0),dA([ZA(lT),uA("design:type",Function)],RM.prototype,"formatter",void 0);const LM=t=>t,_M=t=>Math.sin(t*Math.PI/2),IM=t=>-(Math.cos(t*Math.PI)-1)/2;var FM=Object.freeze({__proto__:null,linear:LM,easeIn:t=>1-Math.cos(t*Math.PI/2),easeOut:_M,easeInOut:IM,easeInQuad:t=>t*t,easeOutQuad:t=>1-Math.pow(1-t,2),easeInOutQuad:t=>t<.5?2*t*t:1-Math.pow(-2*t+2,2)/2});const GM={animationDuration:.2,animationDelay:1};var BM;function VM(t){return t.every((t=>t instanceof uM))}!function(t){t.Loop="loop",t.Reverse="reverse"}(BM||(BM={}));class jM{constructor(t){var e,i,o,n,r,s,a,l,c,d;this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null===(e=t.autoplay)||void 0===e||e,this.delay=null!==(i=t.delay)&&void 0!==i?i:0,this.duration=null!==(o=t.duration)&&void 0!==o?o:1e3,this.ease=null!==(n=t.ease)&&void 0!==n?n:LM,this.repeat=null!==(r=t.repeat)&&void 0!==r?r:0,this.repeatType=null!==(s=t.repeatType)&&void 0!==s?s:BM.Loop,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onRepeat=t.onRepeat,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),!0===t.skip?(null===(a=this.onUpdate)||void 0===a||a.call(this,t.to,!1,this),null===(l=this.onStop)||void 0===l||l.call(this,this),null===(c=this.onComplete)||void 0===c||c.call(this,this)):this.autoplay&&(this.play(),null===(d=this.onUpdate)||void 0===d||d.call(this,t.from,!0,this))}play(){var t;return this.isPlaying||(this.isPlaying=!0,null===(t=this.onPlay)||void 0===t||t.call(this,this)),this}pause(){return this.isPlaying&&(this.isPlaying=!1),this}stop(){var t;return this.isPlaying&&(this.isPlaying=!1,null===(t=this.onStop)||void 0===t||t.call(this,this)),this}reset(t){const e=this.interpolate(this.isReverse?1-this.delta:this.delta);return this.interpolate=this.createInterpolator(e,t.to),this.elapsed=0,this.iteration=0,"number"===typeof t.delay&&(this.delay=t.delay),"number"===typeof t.duration&&(this.duration=t.duration),"function"===typeof t.ease&&(this.ease=t.ease),this}update(t){var e,i,o;if(this.elapsed+=t,this.elapsed<=this.delay)return this;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);return null===(e=this.onUpdate)||void 0===e||e.call(this,n,!1,this),this.elapsed-this.delay>=this.duration&&(this.iteration<this.repeat?(this.iteration++,this.elapsed=(this.elapsed-this.delay)%this.duration+this.delay,this.repeatType===BM.Reverse&&(this.isReverse=!this.isReverse),null===(i=this.onRepeat)||void 0===i||i.call(this,this)):(this.stop(),null===(o=this.onComplete)||void 0===o||o.call(this,this))),this}get delta(){return this.ease(HA(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!==typeof e)return this.interpolateValue(t,e);const i=Object.keys(e).map((i=>[i,this.interpolateValue(t[i],e[i])]));return t=>{const e={};for(const[o,n]of i)e[o]=n(t);return e}}interpolateValue(t,e){try{switch(typeof t){case"number":return NM(t,e);case"string":return function(t,e){if("string"===typeof t)try{t=qA.fromString(t)}catch(s){t=qA.fromArray([0,0,0])}if("string"===typeof e)try{e=qA.fromString(e)}catch(s){e=qA.fromArray([0,0,0])}const i=NM(t.r,e.r),o=NM(t.g,e.g),n=NM(t.b,e.b),r=NM(t.a,e.a);return t=>qA.fromArray([i(t),o(t),n(t),r(t)]).toRgbaString()}(t,e)}}catch(i){}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}const WM={added:{animationDuration:.25,animationDelay:.75},updated:{animationDuration:.5,animationDelay:.25},removed:{animationDuration:.25,animationDelay:0},unknown:{animationDuration:1,animationDelay:0}};function zM(t,e,i,o,n,r,s){const{defaultDuration:a}=i,{fromFn:l,toFn:c,intermediateFn:d}=n,u=VM(o),h=u?o:[],p=u?[]:o,f={added:{},removed:{}};r&&s&&(f.added=PM(s.added,!0),f.removed=PM(s.removed,!0));const g=(o,n)=>{var u,h;let p,g=0,v=0;for(const y of n){const m=o[g]===y,b={last:v>=n.length-1,lastLive:g>=o.length-1,prev:n[v-1],prevFromProps:p,prevLive:o[g-1],next:n[v+1],nextLive:o[g+(m?1:0)]},S=`${t}_${e}_${y.id}`;i.stopByAnimationId(S);let x="unknown";m?r&&s&&(x=UM(y,y.datum,r,f)):x="removed";const C=l(y,y.datum,x,b),{animationDelay:w,animationDuration:E,start:O={},finish:D={}}=C,A=cA(C,["animationDelay","animationDuration","start","finish"]),T=c(y,y.datum,x,b),{animationDelay:M,animationDuration:k,start:R={},finish:P={}}=T,N=cA(T,["animationDelay","animationDuration","start","finish"]);i.animate({id:S,groupId:t,from:A,to:N,ease:_M,onPlay:()=>{y.setProperties(Object.assign(Object.assign({},O),R))},onUpdate(t){y.setProperties(t),d&&y.setProperties(d(y,y.datum,x,b))},onStop:()=>{y.setProperties(Object.assign(Object.assign(Object.assign({},N),D),P))},duration:(null!==(u=null!==E&&void 0!==E?E:k)&&void 0!==u?u:1)*a,delay:(null!==(h=null!==w&&void 0!==w?w:M)&&void 0!==h?h:0)*a}),m&&g++,v++,p=A}};let v=0;for(const y of p){const o=y.nodes();g(o.filter((t=>!y.isGarbage(t))),o),i.animate({id:`${t}_${e}_selection_${v}`,groupId:t,from:0,to:1,ease:_M,onStop(){y.cleanup()}}),v++}g(h,h)}function HM(t,e,i,o,n,r){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};const a=VM(o),l=a?o:[],c=a?[]:o,{animationDelay:d=0,animationDuration:u=1,start:h={},finish:p={}}=s,{defaultDuration:f}=i;i.animate({id:`${t}_${e}`,groupId:t,from:n,to:r,ease:_M,onPlay:()=>{for(const t of l)t.setProperties(h);for(const t of c)for(const e of t.nodes())e.setProperties(h)},onUpdate(t){for(const e of l)e.setProperties(t);for(const e of c)for(const i of e.nodes())i.setProperties(t)},onStop:()=>{for(const t of l)t.setProperties(Object.assign(Object.assign({},r),p));for(const t of c)for(const e of t.nodes())e.setProperties(Object.assign(Object.assign({},r),p))},duration:u*f,delay:d*f})}function UM(t,e,i,o){const n=i(t,e);return o.added[n]?"added":o.removed[n]?"removed":"updated"}var KM=Object.freeze({__proto__:null,NODE_UPDATE_PHASES:["removed","updated","added"],FROM_TO_MIXINS:WM,fromToMotion:zM,staticFromToMotion:HM});const YM=t=>`(${t})`,XM=t=>`${YM(t)}?`,$M=t=>XM(`?:${t}`),qM=new RegExp(["^",$M(`${XM(".")}${YM("[<>=^]")}`),XM("[+\\-( ]"),XM("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),XM("0"),XM("\\d+"),XM(","),$M(`\\.${YM("\\d+")}`),XM("~"),XM("[%a-z]"),"$"].join(""),"i"),ZM=new RegExp(["^",YM(".*?"),`#\\{${YM(".+?")}\\}`,YM(".*?"),"$"].join(""));function JM(t){let e,i;const o=ZM.exec(t);o&&([,e,t,i]=o);const n=qM.exec(t);if(!n)throw new Error(`The number formatter is invalid: ${t}`);const[,r,s,a,l,c,d,u,h,p,f]=n;return{fill:r,align:s,sign:a,symbol:l,zero:c,width:parseInt(d),comma:u,precision:parseInt(h),trim:Boolean(p),type:f,prefix:e,suffix:i}}function QM(t){const e="string"===typeof t?JM(t):t,{fill:i,align:o,sign:n="-",symbol:r,zero:s,width:a,comma:l,type:c,prefix:d="",suffix:u="",precision:h}=e;let{trim:p}=e;const f=void 0===h||isNaN(h);let g,v;if(c)if(c in ik&&c in ek)g=f?ek[c]:ik[c];else if(c in ik)g=ik[c];else{if(!(c in ek))throw new Error(`The number formatter type is invalid: ${c}`);g=ek[c]}else g=ik.g,p=!0;return v=null==h||f?c?6:12:h,t=>{let e=g(t,v);return p&&(e=e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const o=t.substring(0,i).split(""),n=t.substring(i);for(let r=o.length-3;r>0;r-=3)o.splice(r,0,e);return`${o.join("")}${n}`}(e,l)),e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("("===i)return t>=0?e:`(${e})`;const o="+"===i?"+":"";return`${t>=0?o:ak}${e}`}(t,e,n),r&&"#"!==r&&(e=`${r}${e}`),"#"===r&&"x"===c&&(e=`0x${e}`),"s"===c&&(e=`${e}${function(t){return sk[ok(t)]}(t)}`),"%"!==c&&"p"!==c||(e=`${e}%`),null==a||isNaN(a)||(e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:">",n=t;if(">"!==o&&o){if("<"===o)n=n.padEnd(e,i);else if("^"===o){const t=Math.max(0,e-n.length),o=Math.ceil(t/2),r=Math.floor(t/2);n=n.padStart(o+n.length,i),n=n.padEnd(r+n.length,i)}}else n=n.padStart(e,i);return n}(e,a,null!==i&&void 0!==i?i:s,o)),e=`${d}${e}${u}`,e}}const tk=t=>Math.floor(Math.abs(t)),ek={b:t=>tk(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>tk(t).toString(8),x:t=>tk(t).toString(16),X:t=>ek.x(t).toUpperCase(),n:t=>ek.d(t),"%":t=>`${tk(100*t).toFixed(0)}`},ik={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>ik.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>ik.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),o=Math.floor(Math.log10(i));return o>=-4&&o<e?i.toFixed(e-1-o):i.toExponential(e-1)},G:(t,e)=>ik.g(t,e).toUpperCase(),n:(t,e)=>ik.g(t,e),p:(t,e)=>ik.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),o=Math.floor(Math.log10(i))-(e-1);if(o<=0)return i.toFixed(-o);const n=Math.pow(10,o);return(Math.round(i/n)*n).toFixed()},s:(t,e)=>{const i=ok(t);return ik.r(t/Math.pow(10,i),e)},"%":(t,e)=>ik.f(100*t,e)};function ok(t){const e=Math.log10(Math.abs(t)),i=3*Math.floor(e/3);return Math.max(nk,Math.min(rk,i))}const nk=-24,rk=24,sk={[nk]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[rk]:"Y"},ak="\u2212";function lk(t,e){const i=JM(null!==e&&void 0!==e?e:",f"),{precision:o}=i;(null==o||isNaN(o))&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map((t=>{if("number"!==typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),o=i.type?6:12,n=t.toExponential(o-1).replace(/\.?0+e/,"e"),r=n.indexOf(".");if(r<0)return e>=0?0:-e;const s=n.indexOf("e")-r;return Math.max(0,s-e-1)}))):i.type&&!(i.type in ik)||(i.precision=Math.max(...t.map((t=>{if("number"!==typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length})))));const n=QM(i);return t=>n(Number(t))}function ck(t,e,i,o,n){if(i<2)return pk(t,e,e-t);const r=uk(t,e,i,o,n);return isNaN(r)?new hk(0):pk(t=Math.ceil(t/r)*r,e=Math.floor(e/r)*r,r)}const dk=[1,2,5,10];function uk(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const r=(e-t)/i,s=Math.floor(Math.log10(r)),a=Math.pow(10,s),l=dk.map((r=>{const s=r*a,l=Math.ceil((e-t)/s);return{multiplier:r,isWithinBounds:l>=o&&l<=n,diffCount:Math.abs(l-i)}})).sort(((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount))[0].multiplier;return!l||isNaN(l)?NaN:l*a}class hk extends Array{constructor(t,e){if(super(),e)for(let i=0,o=e.length;i<o;i++)this[i]=e[i];this.fractionDigits=t}}function pk(t,e,i){const o=(t=>{var e,i;const o=t.split("e");return Math.max((null!==(i=null===(e=o[0].split(".")[1])||void 0===e?void 0:e.length)&&void 0!==i?i:0)-Number(o[1]),0)})((i%1).toExponential()),n=Math.pow(10,o),r=Math.ceil((e-t)/i),s=new hk(o);for(let a=0;a<=r;a++){const e=t+i*a;s.push(Math.round(e*n)/n)}return s}class fk{static is(t){return t instanceof fk}constructor(t,e){this.domain=t,this.range=e,this.nice=!1,this.tickCount=fk.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.cache=null,this.cacheProps=["domain","range","nice","tickCount","minTickCount","maxTickCount"]}transform(t){return t}transformInvert(t){return t}calcBandwidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const e=this.getDomain(),i=Math.max(...this.range),o=(e[1]-e[0])/t+1,n=Math.floor(i),r=Math.min(o,n);return i/Math.max(1,r)}fromDomain(t){return"number"===typeof t?t:t instanceof Date?t.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,e){var i;const o=null!==(i=null===e||void 0===e?void 0:e.clampMode)&&void 0!==i?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const n=this.getDomain().map((t=>this.transform(t))),[r,s]=n,{range:a}=this,[l,c]=a;if(t=this.transform(t),"clamped"===o){if(t<r)return l;if(t>s)return c}return r===s?(l+c)/2:t===r?l:t===s?c:l+(this.fromDomain(t)-this.fromDomain(r))/(this.fromDomain(s)-this.fromDomain(r))*(c-l)}invert(t){this.refresh();const e=this.getDomain().map((t=>this.transform(t))),[i,o]=e,{range:n}=this,[r,s]=n,a=r>s;let l;return t<(a?s:r)?a?o:i:t>(a?r:s)?a?i:o:(l=r===s?this.toDomain((this.fromDomain(i)+this.fromDomain(o))/2):this.toDomain(this.fromDomain(i)+(t-r)/(s-r)*(this.fromDomain(o)-this.fromDomain(i))),this.transformInvert(l))}didChange(){const{cache:t}=this;return!(t&&!this.cacheProps.some((e=>this[e]!==t[e])))&&(this.cache={},this.cacheProps.forEach((t=>this.cache[t]=this[t])),!0)}refresh(){this.didChange()&&this.update()}getPixelRange(){const t=this.range.slice().sort(((t,e)=>t-e));return t[1]-t[0]}isDenseInterval(t){let{start:e,stop:i,interval:o,count:n}=t;return null!==n&&void 0!==n||(n=(i-e)/("number"===typeof o?o:1)),n>=this.getPixelRange()&&(xA.warn("the configured tick interval results in more than 1 tick per pixel, ignoring. Supply a larger tick interval or omit this configuration."),!0)}}fk.defaultTickCount=5,fk.defaultMaxTickCount=6;class gk extends fk{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:fk.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some((t=>!isFinite(t))))return[];this.refresh();const[i,o]=this.getDomain(),{interval:n}=this;if(n){const t=Math.abs(n);if(!this.isDenseInterval({start:i,stop:o,interval:t}))return pk(i,o,t)}return ck(i,o,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,o;const n=null!==(i=this.tickCount)&&void 0!==i?i:fk.defaultTickCount;return null!==(o=this.interval)&&void 0!==o?o:uk(t,e,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:fk.defaultTickCount;let[i,o]=this.domain;if(e<1)return void(this.niceDomain=[i,o]);if(1===e)return void(this.niceDomain=function(t,e){const i=Math.floor(Math.log10(e-t)),o=Math.pow(10,i);return dk.map((i=>{const n=i*o,r=Math.floor(t/n)*n,s=Math.ceil(e/n)*n;return{error:1-(e-t)/(s-r),domain:[r,s]}})).sort(((t,e)=>t.error-e.error))[0].domain}(i,o));let n=i,r=o;for(let s=0;s<4;s++){const t=this.getTickStep(i,o),[e,s]=this.domain;if(t>=1)i=Math.floor(e/t)*t,o=Math.ceil(s/t)*t;else{const n=1/t;i=Math.floor(e*n)/n,o=Math.ceil(s*n)/n}if(i===n&&o===r)break;n=i,r=o}this.niceDomain=[i,o]}tickFormat(t){let{ticks:e,specifier:i}=t;return lk(null!==e&&void 0!==e?e:this.ticks(),i)}}function vk(t,e){let i=0;return"number"===typeof t&&"number"===typeof e?i=t-e:"string"===typeof t&&"string"===typeof e?i=t.localeCompare(e):null==t&&null==e||(i=null==t?-1:null==e?1:String(t).localeCompare(String(e))),i}function yk(t,e,i){const o=t=>"function"===typeof t?t():t;for(const n in t){const r=i(o(t[n]),o(e[n]));if(0!==r)return r}return 0}class mk extends uM{zIndexChanged(){var t;this.layer&&(null===(t=this._layerManager)||void 0===t||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}constructor(t){var e;super({isVirtual:null===t||void 0===t?void 0:t.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:o}=null!==t&&void 0!==t?t:{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==o&&(this.zIndexSubOrder=o),this.name=null===(e=this.opts)||void 0===e?void 0:e.name}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&(null===(e=this.opts)||void 0===e?void 0:e.layer)){const{zIndex:e,zIndexSubOrder:o,name:n}=null!==(i=this.opts)&&void 0!==i?i:{},r=()=>this.getComputedOpacity(),s=()=>this.getVisibility();this.layer=t.addLayer({zIndex:e,zIndexSubOrder:o,name:n,getComputedOpacity:r,getVisibility:s})}}getComputedOpacity(){let t=1,e=this;do{e instanceof mk&&(t*=e.opacity)}while(e=e.parent);return t}getVisibility(){let t=this,e=this.visible;for(;t=t.parent;)t.visible||(e=t.visible);return e}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tM.TRIVIAL;if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<tM.MINOR||null!=this.layer)&&(i=tM.TRIVIAL),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),mk.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:o}={},_debug:n=()=>{}}=this,{dirty:r,dirtyZIndex:s,layer:a,children:l,clipRect:c,dirtyTransform:d}=this;let{ctx:u,forceRender:h,clipBBox:p}=t;const{resized:f,stats:g}=t,v=u.getTransform(),y=r>=tM.MINOR||s||f;let m=y,b=!1;for(const E of l)if(m||(m=null==E.layerManager&&E.dirty>=tM.TRIVIAL),b||(b=null!=E.layerManager&&E.dirty>=tM.TRIVIAL),m)break;if(o&&n({name:o,group:this,isDirty:y,isChildDirty:m,dirtyTransform:d,renderCtx:t,forceRender:h}),d)h="dirtyTransform";else if(a){const t=this.computeBBox();void 0!==this.lastBBox&&this.lastBBox.equals(t)||(h="dirtyTransform",this.lastBBox=t)}if(!y&&!m&&!b&&!h)return o&&g&&n({name:o,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this}),a&&g&&(g.layersSkipped++,g.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const S=this.visible;if(a){if(u=a.context,u.save(),u.resetTransform(),"dirtyTransform"!==h&&(h=m||s),h&&a.clear(),p){const{width:e,height:i,x:r,y:s}=p;n((()=>({name:o,clipBBox:p,ctxTransform:u.getTransform(),renderCtx:t,group:this}))),this.clipCtx(u,r,s,e,i)}u.setTransform(v)}else u.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(u),c){const{x:e,y:i,width:r,height:s}=c;u.save(),n((()=>({name:o,clipRect:c,ctxTransform:u.getTransform(),renderCtx:t,group:this}))),this.clipCtx(u,e,i,r,s),p=this.matrix.transformBBox(c)}const x=this.hasVirtualChildren();s?(this.sortChildren(l),"dirtyTransform"!==h&&(h=!0)):x&&this.sortChildren(l);const C=h!==t.forceRender||p!==t.clipBBox||u!==t.ctx?Object.assign(Object.assign({},t),{ctx:u,forceRender:h,clipBBox:p}):t;let w=0;for(const E of l)E.visible&&S?h||E.dirty!==tM.NONE?(u.save(),E.render(C),u.restore()):g&&(w+=E.nodeCount.count):(E.markClean(),g&&(w+=E.nodeCount.count));if(g&&(g.nodesSkipped+=w),super.render(t),c&&u.restore(),x)for(const E of this.virtualChildren)E.markClean({recursive:"virtual"});a&&(g&&g.layersRendered++,u.restore(),h&&a.snapshot(),null===(i=(e=a.context).verifyDepthZero)||void 0===i||i.call(e)),o&&g&&n({name:o,result:"rendered",skipped:w,renderCtx:t,counts:this.nodeCount,group:this})}sortChildren(t){this.dirtyZIndex=!1,t.sort(((t,e)=>{var i,o;return yk([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!==(o=e.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],e.serialNumber],vk)}))}clipCtx(t,e,i,o,n){t.beginPath(),t.moveTo(e,i),t.lineTo(e+o,i),t.lineTo(e+o,i+n),t.lineTo(e,i+n),t.closePath(),t.clip()}static computeBBox(t){let e=1/0,i=-1/0,o=1/0,n=-1/0;return t.forEach((t=>{if(!t.visible)return;const r=t.computeTransformedBBox();if(!r)return;const s=r.x,a=r.y;s<e&&(e=s),a<o&&(o=a),s+r.width>i&&(i=s+r.width),a+r.height>n&&(n=a+r.height)})),new aM(e,o,i-e,n-o)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}}mk.className="Group",dA([iM({redraw:tM.MAJOR,convertor:t=>Math.min(1,Math.max(0,t))}),uA("design:type",Number)],mk.prototype,"opacity",void 0);class bk{static select(t,e){return new bk(t,e,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}static selectAll(t,e){const i=[],o=t=>{e(t)&&i.push(t),t.children.forEach(o)};return o(t),i}static selectByClass(t,e){return bk.selectAll(t,(t=>t instanceof e))}static selectByTag(t,e){return bk.selectAll(t,(t=>t.tag===e))}constructor(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=EA.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(uM,e)?()=>new e:e}createNode(t,e,i){const o=this.nodeFactory(t);return o.datum=t,null===e||void 0===e||e(o),null!=i?this._nodes.splice(i,0,o):this._nodes.push(o),this.parentNode.appendChild(o),o}update(t,e,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${t}`),i){const o=new Map(t.map(((t,e)=>[i(t),[t,e]])));for(const[t,e]of this._nodesMap.entries())if(o.has(e)){const[i]=o.get(e);t.datum=i,this.garbageBin.delete(t),o.delete(e)}else this.garbageBin.add(t);for(const[t,[i,n]]of o.entries())this._nodesMap.set(this.createNode(i,e,n),t)}else{const i=Math.max(t.length,this.data.length);for(let o=0;o<i;o++)o>=t.length?this.garbageBin.add(this._nodes[o]):o>=this._nodes.length?this.createNode(t[o],e):(this._nodes[o].datum=t[o],this.garbageBin.delete(this._nodes[o]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter((t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1)))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){return this._nodes.forEach(((e,i)=>t(e,e.datum,i))),this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(t){return bk.selectAll(this.parentNode,t)}selectByClass(t){return bk.selectByClass(this.parentNode,t)}selectByTag(t){return bk.selectByTag(this.parentNode,t)}nodes(){return this._nodes}}class Sk extends bM{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new aM(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:o}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,o)}return!1}render(t){var e;const{ctx:i,forceRender:o,stats:n}=t;if(this.dirty===tM.NONE&&!o)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:s,x2:a,y2:l}=this;if(r===a){const t=Math.round(r)+Math.floor(this.strokeWidth)%2/2;r=t,a=t}else if(s===l){const t=Math.round(s)+Math.floor(this.strokeWidth)%2/2;s=t,l=t}i.beginPath(),i.moveTo(r,s),i.lineTo(a,l),this.fillStroke(i),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}function xk(t,e,i,o){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const o=e*e-4*t*i,n=[];if(0===o){const i=-e/(2*t);i>=0&&i<=1&&n.push(i)}else if(o>0){const i=Math.sqrt(o),r=(-e-i)/(2*t),s=(-e+i)/(2*t);r>=0&&r<=1&&n.push(r),s>=0&&s<=1&&n.push(s)}return n}(e,i,o);const n=e/t,r=i/t,s=(3*r-n*n)/9,a=(9*n*r-27*(o/t)-2*n*n*n)/54,l=s*s*s+a*a,c=1/3,d=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(a+t)*Math.pow(Math.abs(a+t),c),i=Math.sign(a-t)*Math.pow(Math.abs(a-t),c),o=Math.abs(Math.sqrt(3)*(e-i)/2),r=-c*n+(e+i);if(r>=0&&r<=1&&d.push(r),0===o){const t=-c*n-(e+i)/2;t>=0&&t<=1&&d.push(t)}}else{const t=Math.acos(a/Math.sqrt(-s*s*s)),e=c*n,i=2*Math.sqrt(-s),o=i*Math.cos(c*t)-e,r=i*Math.cos(c*(t+2*Math.PI))-e,l=i*Math.cos(c*(t+4*Math.PI))-e;o>=0&&o<=1&&d.push(o),r>=0&&r<=1&&d.push(r),l>=0&&l<=1&&d.push(l)}return d}function Ck(t,e,i,o,n,r,s,a){const l=(i-t)*(a-r)-(o-e)*(s-n);if(0===l)return null;const c=((s-n)*(e-r)-(t-n)*(a-r))/l,d=((i-t)*(e-r)-(o-e)*(t-n))/l;return c>=0&&c<=1&&d>=0&&d<=1?{x:t+c*(i-t),y:e+c*(o-e)}:null}function wk(t,e,i,o,n,r,s,a,l,c,d,u){const h=[],p=c-u,f=d-l,g=l*(u-c)-c*(d-l),v=Ek(t,i,n,s),y=Ek(e,o,r,a),m=xk(p*v[0]+f*y[0],p*v[1]+f*y[1],p*v[2]+f*y[2],p*v[3]+f*y[3]+g);for(const b of m){const t=b*b,e=b*t,i=v[0]*e+v[1]*t+v[2]*b+v[3],o=y[0]*e+y[1]*t+y[2]*b+y[3];let n;n=l!==d?(i-l)/(d-l):(o-c)/(u-c),n>=0&&n<=1&&h.push({x:i,y:o})}return h}function Ek(t,e,i,o){return[3*e-t-3*i+o,3*t-6*e+3*i,-3*t+3*e,t]}function Ok(t,e,i,o,n,r,s,a,l,c){const d=(c-a)/(l-s),u=a-d*s,h=Math.pow(d,2)+1,p=2*(d*(u-e)-t),f=Math.pow(t,2)+Math.pow(u-e,2)-Math.pow(i,2),g=Math.pow(p,2)-4*h*f;if(g<0)return[];const v=(-p+Math.sqrt(g))/2/h,y=(-p-Math.sqrt(g))/2/h,m=[];return[v,y].forEach((t=>{if(!(t>=Math.min(s,l)&&t<=Math.max(s,l)))return;const e=d*t+u,i=BA(o);let a=BA(n),c=BA(Math.atan2(e,t));a<=i&&(a+=2*Math.PI),c<i&&(c+=2*Math.PI),r!==(c>=i&&c<=a)&&m.push({x:t,y:e})})),m}function Dk(t,e,i){const o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:r}=i;if(i.startAngle===i.endAngle||o<Math.min(n,r)||o>Math.max(n,r))return!1;const s=VA(i.startAngle),a=VA(i.endAngle),l=Math.atan2(e,t);return s<a?l<=a&&l>=s:l<=a&&l>=-Math.PI||l>=s&&l<=Math.PI}function Ak(t,e){const{startAngle:i,endAngle:o,innerRadius:n,outerRadius:r}=e,s={x:r*Math.cos(i),y:r*Math.sin(i)},a={x:r*Math.cos(o),y:r*Math.sin(o)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=0===n?{x:0,y:0}:{x:n*Math.cos(o),y:n*Math.sin(o)};return null!=Ck(t.start.x,t.start.y,t.end.x,t.end.y,s.x,s.y,l.x,l.y)||null!=Ck(t.start.x,t.start.y,t.end.x,t.end.y,a.x,a.y,c.x,c.y)||Ok(0,0,r,i,o,!0,t.start.x,t.start.y,t.end.x,t.end.y).length>0}var Tk;Sk.className="Line",Sk.defaultStyles=Object.assign({},bM.defaultStyles,{fill:void 0,strokeWidth:1}),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],Sk.prototype,"x1",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],Sk.prototype,"y1",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],Sk.prototype,"x2",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],Sk.prototype,"y2",void 0),function(t){t[t.Move=0]="Move",t[t.Line=1]="Line",t[t.Arc=2]="Arc",t[t.Curve=3]="Curve",t[t.ClosePath=4]="ClosePath"}(Tk||(Tk={}));class Mk{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath)return!0;if(this.previousCommands.length!==this.commands.length)return!0;if(this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let o=0;t.beginPath();for(const n of e)switch(n){case Tk.Move:t.moveTo(i[o++],i[o++]);break;case Tk.Line:t.lineTo(i[o++],i[o++]);break;case Tk.Curve:t.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case Tk.Arc:t.arc(i[o++],i[o++],i[o++],i[o++],i[o++],1===i[o++]);break;case Tk.ClosePath:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(Tk.Move),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(Tk.Line),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,o){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+o),this.lineTo(t,e+o),this.closePath()}arc(t,e,i,o,n){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=t+i*Math.cos(n),a=e+i*Math.sin(n);this.xy?(this.xy[0]=s,this.xy[1]=a):this.xy=[s,a],this.commands.push(Tk.Arc),this.params.push(t,e,i,o,n,r?1:0)}cubicCurveTo(t,e,i,o,n,r){this.xy||this.moveTo(t,e),this.commands.push(Tk.Curve),this.params.push(t,e,i,o,n,r),this.xy&&(this.xy[0]=n,this.xy[1]=r)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(Tk.ClosePath),this._closedPath=!0)}clear(){let{trackChanges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{trackChanges:!1};t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,o=this.params,n=i.length,r=-1e4,s=-1e4;let a=NaN,l=NaN,c=0,d=0,u=0;for(let h=0,p=0;h<n;h++)switch(i[h]){case Tk.Move:!isNaN(a)&&Ck(a,l,c,d,r,s,t,e)&&u++,c=o[p++],a=c,d=o[p++],l=d;break;case Tk.Line:Ck(c,d,o[p++],o[p++],r,s,t,e)&&u++,c=o[p-2],d=o[p-1];break;case Tk.Curve:u+=wk(c,d,o[p++],o[p++],o[p++],o[p++],o[p++],o[p++],r,s,t,e).length,c=o[p-2],d=o[p-1];break;case Tk.Arc:const i=o[p++],n=o[p++],h=o[p++],f=o[p++],g=o[p++];u+=Ok(i,n,h,f,g,Boolean(o[p++]),r,s,t,e).length,c=i+Math.cos(g)*h,d=n+Math.sin(g)*h;break;case Tk.ClosePath:!isNaN(a)&&Ck(a,l,c,d,r,s,t,e)&&u++}return u%2===1}getPoints(){const{commands:t,params:e}=this,i=[];let o=0;for(let n=0;n<t.length;n++)switch(t[n]){case Tk.Move:case Tk.Line:i.push({x:e[o++],y:e[o++]});break;case Tk.Curve:o+=4,i.push({x:e[o++],y:e[o++]});break;case Tk.Arc:i.push({x:e[o++],y:e[o++]}),o+=4;case Tk.ClosePath:}return i}}function kk(t){const{redraw:e=tM.MAJOR,changeCb:i,convertor:o}=null!==t&&void 0!==t?t:{};return iM({redraw:e,type:"path",convertor:o,changeCb:i})}class Rk extends bM{constructor(){super(...arguments),this.path=new Mk,this.clipScalingX=1,this.clipScalingY=1,this._dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,tM.MAJOR))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,o;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!==(e=null===(t=this.fillShadow)||void 0===t?void 0:t.isDirty())&&void 0!==e&&e||null!==(o=null===(i=this.clipPath)||void 0===i?void 0:i.isDirty())&&void 0!==o&&o)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}clip(t,e){const i=t.getTransform(),o=1!==this.clipScalingX||1!==this.clipScalingY;o&&t.scale(this.clipScalingX,this.clipScalingY),e(),o&&t.setTransform(i)}render(t){var e;const{ctx:i,forceRender:o,stats:n}=t;this.dirty!==tM.NONE||o?(this.computeTransformMatrix(),this.matrix.toContext(i),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),this.clipPath&&null!=this.clipMode?(i.save(),"normal"===this.clipMode&&this.clip(i,(()=>{var t;null===(t=this.clipPath)||void 0===t||t.draw(i),i.clip()})),this.clipScalingX>0&&this.clipScalingY>0&&(this.path.draw(i),this.fillStroke(i)),"punch-out"===this.clipMode&&this.clip(i,(()=>{var t,e;null===(t=this.clipPath)||void 0===t||t.draw(i),i.clip();const{x:o=-1e4,y:n=-1e4,width:r=2e4,height:s=2e4}=null!==(e=this.computeBBox())&&void 0!==e?e:{};i.clearRect(o,n,r,s)})),i.restore()):(this.path.draw(i),this.fillStroke(i)),null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)):n&&(n.nodesSkipped+=this.nodeCount.count)}}Rk.className="Path",dA([kk(),uA("design:type",Mk)],Rk.prototype,"clipPath",void 0),dA([kk(),uA("design:type",String)],Rk.prototype,"clipMode",void 0),dA([kk(),uA("design:type",Object)],Rk.prototype,"clipScalingX",void 0),dA([kk(),uA("design:type",Object)],Rk.prototype,"clipScalingY",void 0);class Pk extends Rk{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const t=this.outerRadius;return new aM(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,{angleOffset:e,inset:i}=this,o=this.startAngle+e,n=this.endAngle+e,r=Math.abs(this.endAngle-this.startAngle)>=2*Math.PI,s=this.centerX,a=this.centerY;if(t.clear(),r){const e=this.innerRadius<=0?0:this.innerRadius+i,r=Math.min(e,this.outerRadius-i),l=Math.max(e,this.outerRadius-i);t.arc(s,a,l,o,n),r>0&&(t.moveTo(s+r*Math.cos(n),a+r*Math.sin(n)),t.arc(s,a,r,n,o,!0))}else{const e=Math.min(this.innerRadius+i,this.outerRadius-i),r=Math.max(this.innerRadius+i,this.outerRadius-i),l=e>0?i/e:0,c=r>0?i/r:0,d=Math.abs(n-o);if(d<2*c)return;const u=e<=i||d<2*l;if(u){const l=Math.abs(d)<.5*Math.PI?i*(1+Math.cos(d))/Math.sin(d):NaN;let c;c=l>0&&l<r?Math.max(Math.hypot(i,l),e):e;const u=.5*(o+n);t.moveTo(s+c*Math.cos(u),a+c*Math.sin(u))}else t.moveTo(s+e*Math.cos(o+l),a+e*Math.sin(o+l));t.arc(s,a,r,o+c,n-c),u||(e>0?t.arc(s,a,e,n-l,o+l,!0):t.lineTo(s,a))}t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,o=this.startAngle+i,n=this.endAngle+i,r=Math.min(this.innerRadius,this.outerRadius),s=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(t,e);return Dk(a.x,a.y,{startAngle:o,endAngle:n,innerRadius:r,outerRadius:s})}}function Nk(t,e){if(Ik(t)&&Ik(e)){const i={};return Object.keys(t).forEach((o=>{i[o]=o in e?Nk(t[o],e[o]):t[o]})),Object.keys(e).forEach((o=>{o in t||(i[o]=e[o])})),i}return Array.isArray(t)&&!Array.isArray(e)||Lk(t)&&!Lk(e)?t:e}function Lk(t){return"object"===typeof t&&null!==t}function _k(t){return Lk(t)&&!Array.isArray(t)}function Ik(t){return _k(t)&&t.constructor===Object}function Fk(){var t;const e={};for(var i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];for(const r of o){if(!r)continue;const i=TA(r)?MA(r):Object.keys(r);for(const o of i)_k(e[o])&&_k(r[o])?e[o]=Fk(e[o],r[o]):null!==(t=e[o])&&void 0!==t||(e[o]=r[o])}return e}Pk.className="Sector",dA([kk(),uA("design:type",Number)],Pk.prototype,"centerX",void 0),dA([kk(),uA("design:type",Number)],Pk.prototype,"centerY",void 0),dA([kk(),uA("design:type",Number)],Pk.prototype,"innerRadius",void 0),dA([kk(),uA("design:type",Number)],Pk.prototype,"outerRadius",void 0),dA([kk(),uA("design:type",Number)],Pk.prototype,"startAngle",void 0),dA([kk(),uA("design:type",Number)],Pk.prototype,"endAngle",void 0),dA([kk(),uA("design:type",Number)],Pk.prototype,"angleOffset",void 0),dA([kk(),uA("design:type",Number)],Pk.prototype,"inset",void 0);let Gk=null;function Bk(t){if(null!=t)return""===t?"":(null!==Gk&&void 0!==Gk||(Gk=document.createElement("div")),Gk.textContent=String(t),Gk.innerHTML)}const Vk=t=>"string"===typeof t,jk=t=>!!t&&Object.prototype.hasOwnProperty.call(t,"toString")&&Vk(t.toString());function Wk(t){return Vk(t)||jk(t)}function zk(t){return Uk(t)||!!(e=t)&&Object.prototype.hasOwnProperty.call(e,"valueOf")&&Uk(e.valueOf())||(t=>t instanceof Date&&!isNaN(+t))(t);var e}function Hk(t,e){return e&&zk(t)?t:e?void 0:Wk(t)?t:String(t)}const Uk=t=>"number"===typeof t&&Number.isFinite(t),Kk=new Map;function Yk(t,e){var i,o,n;const r=JSON.stringify(t,null,0);return Kk.has(e)||Kk.set(e,new Map),(null===(i=Kk.get(e))||void 0===i?void 0:i.has(r))||null===(o=Kk.get(e))||void 0===o||o.set(r,e(t)),null===(n=Kk.get(e))||void 0===n?void 0:n.get(r)}const Xk={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;const i=(arguments.length>1?arguments[1]:void 0).keys[0],o=Math.abs(i-t);return t=i,!isNaN(o)&&o>0&&o<e?o:e}}},$k={type:"processor",property:"sortedGroupDomain",calculate:t=>{let{domain:{groups:e}}=t;if(null!=e)return[...e].sort(((t,e)=>{for(let i=0;i<t.length;i++){const o=t[i]-e[i];if(0!==o)return o}return 0}))}};function qk(t){let{normaliseTo:e,mode:i}=t;const o=(t,i)=>{const o=t*e/i;return o>=0?Math.min(e,o):Math.max(-e,o)};return()=>()=>(t,e)=>{const n=[0,0];for(const o of e){const e=t[o],r=e<0?0:1;"sum"===i?n[r]+=e:n[r]=0===r?Math.min(n[r],e):Math.max(n[r],e)}const r=Math.max(Math.abs(n[0]),n[1]);for(const i of e)t[i]=o(t[i],r)}}function Zk(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sum";return{scopes:[t.id],type:"group-value-processor",matchGroupIds:e,adjust:Yk({normaliseTo:i,mode:o},qk)}}function Jk(t){let{normaliseTo:e,zeroDomain:i,rangeMin:o,rangeMax:n}=t;const r=e[1]-e[0],s=(t,o,n)=>{const s=e[0]+(t-o)/n*r;return 0===n?i:s>=e[1]?e[1]:s<e[0]?e[0]:s};return()=>(t,i)=>{let[r,a]=t.domain.values[i];null!=o&&(r=o),null!=n&&(a=n);const l=a-r;t.domain.values[i]=[e[0],e[1]];for(const e of t.data){let o=e.values;"ungrouped"===t.type&&(o=[o]);for(const t of o)t[i]=s(t[i],r,l)}}}function Qk(t,e,i,o,n,r){return{scopes:[t.id],type:"property-value-processor",property:e,adjust:Yk({normaliseTo:i,rangeMin:n,rangeMax:r,zeroDomain:o},Jk)}}function tR(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:"processor",scopes:[t.id],property:"animationValidation",calculate(i){var o;const{keys:n,values:r}=i.defs,{input:s,data:a}=i;let l=!0,c=!0;const d=[];for(let h=0;h<r.length;h++)(null===(o=r[h].scopes)||void 0===o?void 0:o.some((e=>e===t.id)))&&e.some((t=>r[h].id===t))&&d.push([h,r[h]]);const u=(t,e,o)=>{var n;if("category"===e.valueType){const e=i.domain[o][t];return void(l&&(l=e.length===s.count))}let r=null===(n=a[0])||void 0===n?void 0:n[o][t];for(let i=1;(l||c)&&i<a.length;i++){const e=a[i][o][t];c&&(c=r<=e),l&&(l=r!==e),r=e}};for(let t=0;(l||c)&&t<n.length;t++)u(t,n[t],"keys");for(let t=0;(l||c)&&t<d.length;t++){const[e,i]=d[t];u(e,i,"values")}return{uniqueKeys:l,orderedKeys:c}}}}function eR(t){let{mode:e,separateNegative:i}=t;return()=>()=>(t,o)=>{const n=[0,0];for(const r of o){const o=t[r],s=KA(o)&&i?0:1;"number"!==typeof o||isNaN(o)||("normal"===e&&(n[s]+=o),t[r]=n[s],"trailing"===e&&(n[s]+=o))}}}function iR(t){let{mode:e,sum:i}=t;return()=>{const t=[];let o=!0;return()=>(n,r)=>{let s=0;for(const a of r){const r=n[a],l=o&&"current"===i?0:t[a];t[a]=r;const c="current"===i?r:l;"number"!==typeof r||isNaN(r)?n[a]=s:"number"!==typeof l||isNaN(l)?n[a]=s:("normal"===e&&(s+=c),n[a]=s,"trailing"===e&&(s+=c))}o=!1}}}function oR(t,e,i,o){let n,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i.startsWith("window")){n=Yk({mode:i.endsWith("-trailing")?"trailing":"normal",sum:o},iR)}else n=Yk({mode:i,separateNegative:r},eR);return{scopes:[t.id],type:"group-value-processor",matchGroupIds:[e],adjust:n}}function nR(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"processor",property:"diff",calculate:i=>{const o={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,r=new Map,s=new Map,a=new Map,l=new Map,c=new Map,d=new Map;for(let u=0;u<Math.max(t.data.length,i.data.length);u++){const o=t.data[u],h=i.data[u],p=o?rR(o.keys):"",f=h?rR(h.keys):"";p!==f?(a.has(f)?(!e&&yA(a.get(f).values,h.values)||(s.set(f,h),c.set(f,u),n.set(f,h)),a.delete(f),d.delete(f)):h&&(r.set(f,h),l.set(f,u)),r.has(p)?(!e&&yA(r.get(p).values,o.values)||(s.set(p,o),c.set(p,u),n.set(p,o)),r.delete(p),l.delete(p)):o&&(s.delete(p),c.delete(p),a.set(p,o),d.set(p,u))):yA(o.values,h.values)||(s.set(f,h),c.set(f,u))}return o.added=Array.from(r.keys()),o.updated=Array.from(s.keys()),o.removed=Array.from(a.keys()),o.moved=Array.from(n.keys()),o.addedIndices=Array.from(l.values()),o.updatedIndices=Array.from(c.values()),o.removedIndices=Array.from(d.values()),o.changed=o.added.length>0||o.updated.length>0||o.removed.length>0,o}}}function rR(t){return t.join("___")}class sR{constructor(){this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return CM(this)}}function aR(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,o=t.rotation?BA(jA(t.rotation)):0,n=!o&&e>=0&&e<=Math.PI?-1:1,r=!o&&i>=0&&i<=Math.PI?-1:1;let s=0;return t.parallel?s=n*Math.PI/2:-1===r&&(s=Math.PI),{configuredRotation:o,defaultRotation:s,parallelFlipFlag:n,regularFlipFlag:r}}function lR(t,e,i,o,n){const r=e>0&&e<=Math.PI,s=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(o*(r||s?-1:1)===-1)return"end"}else if(o*n===-1)return"end";return"start"}function cR(t,e,i,o,n){const{width:r,height:s}=e,a=new aM(i,o,0,0);n.transformBBox(a,e);const{x:l=0,y:c=0}=e;return e.width=r,e.height=s,{point:{x:l,y:c,size:0},label:{width:r,height:s,text:t}}}var dR;dA([ZA(cT),uA("design:type",Object)],sR.prototype,"enabled",void 0),dA([ZA(mT),uA("design:type",Object)],sR.prototype,"color",void 0),dA([ZA(NT),uA("design:type",String)],sR.prototype,"fontStyle",void 0),dA([ZA(_T),uA("design:type",String)],sR.prototype,"fontWeight",void 0),dA([ZA(wT(0)),uA("design:type",Object)],sR.prototype,"fontSize",void 0),dA([ZA(uT),uA("design:type",Object)],sR.prototype,"fontFamily",void 0),dA([ZA(lT),uA("design:type",Function)],sR.prototype,"formatter",void 0),function(t){t[t.SERIES_BACKGROUND_ZINDEX=-10]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=0]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=20]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=30]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=500]="SERIES_LAYER_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=750]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=1e3]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=2500]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=3e3]="LEGEND_ZINDEX"}(dR||(dR={}));class uR extends Rk{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,o=i/2;return new aM(t-o,e-o,i,i)}applyPath(t,e){const{path:i}=this;let{x:o,y:n}=this;i.clear();for(const{x:r,y:s,t:a}of e)o+=r*t,n+=s*t,"move"===a?i.moveTo(o,n):i.lineTo(o,n);i.closePath()}}dA([kk(),uA("design:type",Number)],uR.prototype,"x",void 0),dA([kk(),uA("design:type",Number)],uR.prototype,"y",void 0),dA([kk({convertor:Math.abs}),uA("design:type",Number)],uR.prototype,"size",void 0);class hR extends uR{updatePath(){const{x:t,y:e,path:i,size:o}=this,n=o/2;i.clear(),i.arc(t,e,n,0,2*Math.PI),i.closePath()}}hR.className="Circle";const pR={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},fR={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"};class gR{constructor(t){this.modules={},this.parent=t}destroy(){for(const[t,e]of Object.entries(this.modules))e.instance.destroy(),delete this.modules[t],delete this.parent[t]}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);if(t.optionsKey in this.parent)throw new Error(`AG Charts - class already has option key '${t.optionsKey}'`);null==this.moduleContext&&(this.moduleContext=this.parent.createModuleContext());const e=new t.instanceConstructor(Object.assign({},this.moduleContext));this.modules[t.optionsKey]={instance:e},this.parent[t.optionsKey]=e}removeModule(t){var e,i;null===(i=null===(e=this.modules[t.optionsKey])||void 0===e?void 0:e.instance)||void 0===i||i.destroy(),delete this.modules[t.optionsKey],delete this.parent[t.optionsKey]}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}*[Symbol.iterator](){for(const{instance:t}of Object.values(this.modules))yield t}}class vR{constructor(){this.registeredListeners=new Map}addListener(t,e,i){const o={symbol:Symbol(t),handler:e,meta:i};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(o):this.registeredListeners.set(t,[o]),()=>this.removeListener(o.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const o=i.findIndex((e=>e.symbol===t));if(o>=0){i.splice(o,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t){const e=new class{constructor(){this.results=void 0}push(t){var e;void 0!==t&&(null!==(e=this.results)&&void 0!==e||(this.results=[]),this.results.push(t))}};for(var i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];for(const s of this.getListenersByType(t))try{e.push(s.handler(...o))}catch(r){xA.errorOnce(r)}return e.results}dispatchWrapHandlers(t,e){for(var i=arguments.length,o=new Array(i>2?i-2:0),n=2;n<i;n++)o[n-2]=arguments[n];for(const s of this.getListenersByType(t))try{e(s.handler,s.meta,...o)}catch(r){xA.errorOnce(r)}}getListenersByType(t){var e;return null!==(e=this.registeredListeners.get(t))&&void 0!==e?e:[]}}class yR{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!==typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null===(i=this.eventListeners.get(t))||void 0===i||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null===(e=this.eventListeners.get(t.type))||void 0===e||e.forEach((e=>e(t)))}}function mR(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/0,-1/0];for(const i of t)"number"===typeof i&&(i<e[0]&&(e[0]=i),i>e[1]&&(e[1]=i));return e}function bR(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];for(const i of t)"number"===typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function SR(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,o;return e[0]+=null!==(i=null===t||void 0===t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(o=null===t||void 0===t?void 0:t[1])&&void 0!==o?o:0,e}}}function xR(t,e,i,o){const n={id:e,scopes:[t.id],matchGroupIds:o?[o]:void 0,type:"aggregate",aggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const o=e[1]-e[0];return i.aggregateFunction(t).map((t=>t/o))}};return i.groupAggregateFunction&&(n.groupAggregateFunction=i.groupAggregateFunction),n}function CR(t){return()=>{let e=0;return i=>"number"!==typeof i||isNaN(i)?i:(e+=t?Math.max(0,i):i,e)}}var wR,ER;function OR(t){return null!=Hk(t,!0)}function DR(t){return null!=Hk(t,!1)}function AR(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object.assign({scopes:[t.id],property:e,type:"key",valueType:i?"range":"category",validation:i?OR:DR},o)}function TR(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Object.assign({scopes:[t.id],property:e,type:"value",valueType:i?"range":"category",validation:i?OR:DR},o)}function MR(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const{onlyPositive:n}=o,r=cA(o,["onlyPositive"]);return Object.assign(Object.assign({},TR(t,e,i,r)),{processor:CR(n)})}function kR(t,e,i,o){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"current",r=arguments.length>5?arguments[5]:void 0;return[TR(t,e,i,r),oR(t,r.groupId,o,n,r.separateNegative)]}!function(t){t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE"}(wR||(wR={}));class RR{constructor(t,e,i,o){let{datum:n}=i;this.type=t,this.event=e,this.datum=n,this.seriesId=o.id}}class PR{constructor(){this.fill="yellow",this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.lineDashOffset=void 0}}dA([ZA(bT),uA("design:type",String)],PR.prototype,"fill",void 0),dA([ZA(ET(0,1)),uA("design:type",Number)],PR.prototype,"fillOpacity",void 0),dA([ZA(bT),uA("design:type",String)],PR.prototype,"stroke",void 0),dA([ZA(ET(0)),uA("design:type",Number)],PR.prototype,"strokeWidth",void 0),dA([ZA(ET(0,1)),uA("design:type",Number)],PR.prototype,"strokeOpacity",void 0),dA([ZA(FT),uA("design:type",Array)],PR.prototype,"lineDash",void 0),dA([ZA(ET(0)),uA("design:type",Number)],PR.prototype,"lineDashOffset",void 0);class NR{constructor(){this.strokeWidth=void 0,this.dimOpacity=void 0,this.enabled=void 0}}dA([ZA(ET(0)),uA("design:type",Number)],NR.prototype,"strokeWidth",void 0),dA([ZA(ET(0,1)),uA("design:type",Number)],NR.prototype,"dimOpacity",void 0),dA([ZA(dT),uA("design:type",Boolean)],NR.prototype,"enabled",void 0);class LR{constructor(){this.color="black"}}dA([ZA(bT),uA("design:type",String)],LR.prototype,"color",void 0);class _R{constructor(){this.item=new PR,this.series=new NR,this.text=new LR}}!function(t){t[t.None=0]="None",t[t.This=1]="This",t[t.Other=2]="Other"}(ER||(ER={}));class IR extends yR{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set data(t){this._data=t,this.onDataChange()}get data(){var t;return null!==(t=this._data)&&void 0!==t?t:this._chartData}onDataChange(){this.nodeDataRefresh=!0}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}hasData(){const{data:t}=this;return t&&(!Array.isArray(t)||t.length>0)}set visible(t){this._visible=t,this.visibleChanged()}get visible(){return this._visible}onSeriesGroupingChange(t,e){const{id:i,type:o,visible:n,rootGroup:r,highlightGroup:s,annotationGroup:a}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:o}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:o,visible:n,seriesGrouping:e}),null!=this.rootGroup.parent&&this.ctx.seriesLayerManager.changeGroup({id:i,type:o,rootGroup:r,highlightGroup:s,annotationGroup:a,getGroupZIndexSubOrder:t=>this.getGroupZIndexSubOrder(t),seriesGrouping:e,oldGrouping:t})}getBandScalePadding(){return{inner:1,outer:0}}constructor(t){super(),this.NodeClickEvent=RR,this.id=rM(this),this.rootGroup=new mk({name:"seriesRoot",isVirtual:!0}),this.axes={[QT.X]:void 0,[QT.Y]:void 0},this.directions=[QT.X,QT.Y],this.nodeDataRefresh=!0,this._visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.seriesGrouping=void 0,this._declarationOrder=-1,this.seriesListeners=new vR,this.highlightStyle=new _R,this.moduleMap=new gR(this),this.nodeDataDependencies={},this.ctx=t.moduleCtx;const{useLabelLayer:e=!1,pickModes:i=[wR.NEAREST_BY_MAIN_AXIS_FIRST],directionKeys:o={},directionNames:n={},contentGroupVirtual:r=!0,canHaveAxes:s=!1}=t;this.directionKeys=o,this.directionNames=n,this.canHaveAxes=s,this.contentGroup=this.rootGroup.appendChild(new mk({name:`${this.id}-content`,layer:!r,isVirtual:r,zIndex:dR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new mk({name:`${this.id}-highlight`,layer:!r,isVirtual:r,zIndex:dR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new mk({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new mk({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new mk({name:`${this.id}-series-labels`,layer:e,zIndex:dR.SERIES_LABEL_ZINDEX})),this.annotationGroup=new mk({name:`${this.id}-annotation`,layer:!r,isVirtual:r,zIndex:dR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}getGroupZIndexSubOrder(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){return this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.ctx.seriesStateManager.deregisterSeries(this),this.ctx.seriesLayerManager.releaseGroup(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),o=null===e||void 0===e?void 0:e[i],n=[];if(!o)return n;const r=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const o of e)Array.isArray(o)?r(...o):"object"===typeof o?r(...Object.values(o)):n.push(o)};return r(...o.map((t=>this[t]))),n}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){var e;const i=this.getSeriesDomain(t);return(null!==(e=this.dispatch("data-getDomain",{direction:t}))&&void 0!==e?e:[]).reduce(((t,e)=>t.concat(e)),i)}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:e=!0}=this.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case ER.None:case ER.This:return 1;case ER.Other:default:return t}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case ER.This:return e;case ER.None:case ER.Other:return t}}isItemIdHighlighted(){var t,e;const{series:i}=null!==(e=null===(t=this.ctx.highlightManager)||void 0===t?void 0:t.getActiveHighlight())&&void 0!==e?e:{};return null==i?ER.None:i!==this?ER.Other:ER.This}getModuleTooltipParams(t){var e;return(null!==(e=this.dispatch("tooltip-getParams",{datum:t}))&&void 0!==e?e:[]).reduce(((t,e)=>Object.assign(Object.assign({},e),t)),{})}pickNode(t,e){const{pickModes:i,visible:o,rootGroup:n}=this;if(o&&n.visible)for(const r of i){if(e&&!e.includes(r))continue;let i;switch(r){case wR.EXACT_SHAPE_MATCH:i=this.pickNodeExactShape(t);break;case wR.NEAREST_BY_MAIN_AXIS_FIRST:case wR.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST:i=this.pickNodeMainAxisFirst(t,r===wR.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST);break;case wR.NEAREST_NODE:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:r,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",t,e,this))}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return Object.assign(Object.assign({},this.ctx),{series:this})}getLabelText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String;var o;return t.formatter&&null!==(o=this.ctx.callbackCache.call(t.formatter,Object.assign({seriesId:this.id},e)))&&void 0!==o?o:i(e.value)}getMarkerStyle(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getStyle();var o,n;const r=Fk({size:null!==(n=null===(o=e.datum.point)||void 0===o?void 0:o.size)&&void 0!==n?n:0},i);if(t.formatter){return Fk(this.ctx.callbackCache.call(t.formatter,Object.assign(Object.assign(Object.assign({seriesId:this.id},r),e),{datum:e.datum.datum})),r)}return r}updateMarkerStyle(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getStyle(),{applyTranslation:n=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{point:r}=i.datum,s=this.getMarkerStyle(e,i,o),a=this.visible&&s.size>0&&r&&!isNaN(r.x)&&!isNaN(r.y);n?t.setProperties(Object.assign(Object.assign({visible:a},s),{translationX:null===r||void 0===r?void 0:r.x,translationY:null===r||void 0===r?void 0:r.y})):t.setProperties(Object.assign({visible:a},s)),"function"!==typeof e.shape||t.dirtyPath||(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}getMinRect(){}checkResize(t){const e={seriesRectWidth:null===t||void 0===t?void 0:t.width,seriesRectHeight:null===t||void 0===t?void 0:t.height},i=null!=RA(this.nodeDataDependencies,e);return i&&(this.nodeDataDependencies=e,this.markNodeDataDirty()),i}}function FR(t,e,i,o){let{id:n}=t;HM(n,e,i,o,{opacity:0},{opacity:1},GM)}function GR(t,e,i,o){let{id:n}=t;HM(n,e,i,o,{opacity:1},{opacity:0},GM)}function BR(t){return{opacity:1}}IR.highlightedZIndex=1e12,dA([ZA(uT),uA("design:type",Object)],IR.prototype,"id",void 0),dA([ZA(cT),uA("design:type",Object)],IR.prototype,"_visible",void 0),dA([ZA(cT),uA("design:type",Object)],IR.prototype,"showInLegend",void 0),dA([ZA(uT),uA("design:type",Object)],IR.prototype,"cursor",void 0),dA([ZA(UT),uA("design:type",Object)],IR.prototype,"nodeClickRange",void 0),dA([MM({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}}),uA("design:type",Object)],IR.prototype,"seriesGrouping",void 0);const VR={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function jR(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(t.getFullYear(),0,1);const i=t.getTimezoneOffset()-e.getTimezoneOffset(),o=t.getTime()-e.getTime()+6e4*i;return Math.floor(o/864e5)}function WR(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,o=new Date(t.getFullYear(),0,i+1);return o<=t?Math.floor(jR(t,o)/7)+1:0}function zR(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getFullYear();const i=new Date(e,0,1).getDay(),o=new Date(e,0,(4-i+7)%7-3+1);return o<=t?Math.floor(jR(t,o)/7)+1:zR(t,e-1)}const HR={a:t=>VR.shortDays[t.getDay()],A:t=>VR.days[t.getDay()],b:t=>VR.shortMonths[t.getMonth()],B:t=>VR.months[t.getMonth()],c:"%x, %X",d:(t,e)=>KR(t.getDate(),2,null!==e&&void 0!==e?e:"0"),e:"%_d",f:(t,e)=>KR(1e3*t.getMilliseconds(),6,null!==e&&void 0!==e?e:"0"),H:(t,e)=>KR(t.getHours(),2,null!==e&&void 0!==e?e:"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":KR(i,2,null!==e&&void 0!==e?e:"0")},j:(t,e)=>KR(jR(t)+1,3,null!==e&&void 0!==e?e:"0"),m:(t,e)=>KR(t.getMonth()+1,2,null!==e&&void 0!==e?e:"0"),M:(t,e)=>KR(t.getMinutes(),2,null!==e&&void 0!==e?e:"0"),L:(t,e)=>KR(t.getMilliseconds(),3,null!==e&&void 0!==e?e:"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>KR(t.getSeconds(),2,null!==e&&void 0!==e?e:"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>KR(WR(t,0),2,null!==e&&void 0!==e?e:"0"),V:(t,e)=>KR(zR(t),2,null!==e&&void 0!==e?e:"0"),w:(t,e)=>KR(t.getDay(),2,null!==e&&void 0!==e?e:"0"),W:(t,e)=>KR(WR(t,1),2,null!==e&&void 0!==e?e:"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>KR(t.getFullYear()%100,2,null!==e&&void 0!==e?e:"0"),Y:(t,e)=>KR(t.getFullYear(),4,null!==e&&void 0!==e?e:"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${KR(Math.floor(i/60),2,"0")}${KR(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},UR={_:" ",0:"0","-":""};function KR(t,e,i){const o=String(Math.floor(t));return o.length>=e?o:`${i.repeat(e-o.length)}${o}`}function YR(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const o=i>0?t.substring(0,i):t;e.push(o)}if(i<0)break;const o=t[i+1],n=UR[o];null!=n&&i++;const r=t[i+1],s=HR[r];if("function"===typeof s)e.push([s,n]);else if("string"===typeof s){const t=YR(s);e.push([t,n])}else e.push(`${null!==n&&void 0!==n?n:""}${r}`);t=t.substring(i+2)}return t=>{const i="number"===typeof t?new Date(t):t;return e.map((t=>"string"===typeof t?t:t[0](i,t[1]))).join("")}}const XR=/(#\{(.*?)\})/g;function $R(t,e,i){return t.replace(XR,(function(){const t=arguments.length<=2?void 0:arguments[2],[o,n]=t.split(":"),r=e[o];if("number"===typeof r){const t=n&&i&&i[n];if(t){const{locales:e,options:i}=t;return r.toLocaleString(e,i)}return String(r)}if(r instanceof Date){const t=n&&i&&i[n];if("string"===typeof t){return YR(t)(r)}return r.toDateString()}return"string"===typeof r||(null===r||void 0===r?void 0:r.toString)?String(r):""}))}function qR(t,e){const i=t.createElement("style");i.innerHTML=e,t.head.insertBefore(i,t.head.querySelector("style"))}const ZR="ag-chart-tooltip",JR="ag-chart-dark-tooltip",QR=`\n.${ZR} {\n    transition: transform 0.1s ease;\n    display: table;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    white-space: nowrap;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.${ZR}-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.${ZR}-no-animation {\n    transition: none !important;\n}\n\n.${ZR}-hidden {\n    visibility: hidden;\n}\n\n.${ZR}-title {\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n}\n\n.${ZR}-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.${ZR}-content {\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n}\n\n.${ZR}-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${ZR}-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${ZR}.${JR} {\n    color: white;\n    background: #15181c;\n}\n\n.${ZR}.${JR} .${ZR}-content {\n    border-color: rgba(255, 255, 255, 0.15);\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n`;function tP(t,e){var i,o,n;if("string"===typeof t)return t;const{content:r=(null!==(i=null===e||void 0===e?void 0:e.content)&&void 0!==i?i:""),title:s=(null===e||void 0===e?void 0:e.title),color:a=(null!==(o=null===e||void 0===e?void 0:e.color)&&void 0!==o?o:"white"),backgroundColor:l=(null!==(n=null===e||void 0===e?void 0:e.backgroundColor)&&void 0!==n?n:"#888")}=t;return`${s?`<div class="${ZR}-title"\n        style="color: ${a}; background-color: ${l}">${s}</div>`:""}${r?`<div class="${ZR}-content">${r}</div>`:""}`}const eP=["pointer","node"],iP=QA((t=>eP.includes(t)),"expecting a position type keyword such as 'pointer' or 'node'");class oP{constructor(){this.type="pointer",this.xOffset=0,this.yOffset=0}}dA([ZA(iP),uA("design:type",String)],oP.prototype,"type",void 0),dA([ZA(wT()),uA("design:type",Number)],oP.prototype,"xOffset",void 0),dA([ZA(wT()),uA("design:type",Number)],oP.prototype,"yOffset",void 0);class nP{constructor(t,e,i,o){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.lastVisibilityChange=Date.now(),this.position=new oP,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=o,this.window=i;const n=e.createElement("div");if(this.element=this.tooltipRoot.appendChild(n),this.element.classList.add(ZR),this.canvasElement=t,"undefined"!==typeof IntersectionObserver){const t=new IntersectionObserver((t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.toggle(!1)}),{root:this.tooltipRoot});t.observe(this.canvasElement),this.observer=t}nP.tooltipDocuments.indexOf(e)<0&&(qR(e,QR),nP.tooltipDocuments.push(e))}destroy(){const{parentNode:t}=this.element;t&&t.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:t}=this;return!t.classList.contains(ZR+"-hidden")}updateClass(t,e){const{element:i,class:o,lastClass:n,enableInteraction:r,lastVisibilityChange:s}=this,a=this.isVisible(),l=!!t;let c=1/0;if(a!==l){const t=Date.now();c=t-s,this.lastVisibilityChange=t}const d=(t,e)=>{const o=`${ZR}-${t}`;e?i.classList.add(o):i.classList.remove(o)};c>5&&d("no-animation",!a&&l&&c>100),d("no-interaction",!r),d("hidden",!t),d("arrow",!!e),o!==n&&(n&&i.classList.remove(n),o&&i.classList.add(o),this.lastClass=o)}show(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var o,n,r,s,a,l,c;const{element:d,canvasElement:u}=this;if(void 0!==e)d.innerHTML=e;else if(!d.innerHTML)return void this.toggle(!1);const h=(t,e,i)=>Math.max(Math.min(e,i),t),p=null!==(n=null===(o=t.position)||void 0===o?void 0:o.xOffset)&&void 0!==n?n:0,f=null!==(s=null===(r=t.position)||void 0===r?void 0:r.yOffset)&&void 0!==s?s:0,g=u.getBoundingClientRect(),v=g.left+t.offsetX-d.clientWidth/2+p,y=g.top+t.offsetY-d.clientHeight-8+f,m=this.getWindowBoundingBox(),b=m.x+m.width-d.clientWidth-1,S=m.y+m.height-d.clientHeight,x=h(m.x,v,b),C=h(m.y,y,S),w=!(x!==v||C!==y)&&!p&&!f,E=null!==(l=null!==(a=t.showArrow)&&void 0!==a?a:this.showArrow)&&void 0!==l?l:w;if(this.updateShowArrow(E),d.style.transform=`translate(${Math.round(x)}px, ${Math.round(C)}px)`,this.enableInteraction=null!==(c=t.enableInteraction)&&void 0!==c&&c,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=this.window.setTimeout((()=>{this.toggle(!0)}),this.delay));this.toggle(!0)}getWindowBoundingBox(){return new aM(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(t){t||this.window.clearTimeout(this.showTimeout),this.updateClass(t,this._showArrow)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null===(e=t.sourceEvent.relatedTarget)||void 0===e?void 0:e.classList,o=Boolean(["","-title","-content"].filter((t=>null===i||void 0===i?void 0:i.contains(`${ZR}${t}`))));return void 0!==i&&o}updateShowArrow(t){this._showArrow=t}}nP.tooltipDocuments=[],dA([ZA(cT),uA("design:type",Boolean)],nP.prototype,"enabled",void 0),dA([ZA(dT),uA("design:type",Boolean)],nP.prototype,"showArrow",void 0),dA([ZA(hT),uA("design:type",String)],nP.prototype,"class",void 0),dA([ZA(wT(0)),uA("design:type",Number)],nP.prototype,"delay",void 0),dA([ZA(UT),uA("design:type",Object)],nP.prototype,"range",void 0);class rP{constructor(){this.enabled=!1}}dA([ZA(cT),uA("design:type",Object)],rP.prototype,"enabled",void 0);class sP{constructor(){this.enabled=!0,this.showArrow=void 0,this.format=void 0,this.renderer=void 0,this.interaction=new rP,this.position=new oP}toTooltipHtml(t,e,i){var o,n;const r=null!==(o=null===i||void 0===i?void 0:i.format)&&void 0!==o?o:this.format,s=null!==(n=null===i||void 0===i?void 0:i.renderer)&&void 0!==n?n:this.renderer;return r?tP({content:$R(r,e)},t):s?tP(s(e),t):tP(t)}}function aP(t,e,i,o){const n=[i.convert(0),i.convert(1)],r=[o.convert(0),o.convert(1)],s=Math.PI/-2+jA(e);return{nodes:{toFn:(t,e,i,o)=>{let{prevLive:r}=o;var a,l;let{startAngle:c,endAngle:d,innerRadius:u,outerRadius:h}=e;const{stroke:p,fill:f}=e.sectorFormat;if("removed"===i&&r?(c=null===(a=r.datum)||void 0===a?void 0:a.endAngle,d=null===(l=r.datum)||void 0===l?void 0:l.endAngle):"removed"!==i||r||(c=s,d=s),"removed"===i){const t=(t=>{let{radius:e}=t;return{innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*e}})(e);u=t.innerRadius,h=t.outerRadius}return{startAngle:c,endAngle:d,outerRadius:h,innerRadius:u,stroke:p,fill:f}},fromFn:(e,i,o,n)=>{let{prevFromProps:a}=n;var l,c,d,u,h,p;let{startAngle:f,endAngle:g,innerRadius:v,outerRadius:y}=e,{fill:m,stroke:b}=i.sectorFormat;if("unknown"===o||"added"===o&&!a?(f=s,g=s,v=i.innerRadius,y=i.outerRadius):"added"===o&&a&&(f=null!==(l=a.endAngle)&&void 0!==l?l:s,g=null!==(c=a.endAngle)&&void 0!==c?c:s,v=null!==(d=a.innerRadius)&&void 0!==d?d:i.innerRadius,y=null!==(u=a.outerRadius)&&void 0!==u?u:i.outerRadius),"added"===o&&!t){const t=(t=>{let{radius:e}=t;return{innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*e}})(i);v=t.innerRadius,y=t.outerRadius}return"updated"===o&&(m=null!==(h=e.fill)&&void 0!==h?h:m,b=null!==(p=e.stroke)&&void 0!==p?p:b),{startAngle:f,endAngle:g,innerRadius:v,outerRadius:y,fill:m,stroke:b}}},innerCircle:{fromFn:(t,e)=>{var i,o,n;return{size:null!==(n=null!==(o=null===(i=t.previousDatum)||void 0===i?void 0:i.radius)&&void 0!==o?o:t.size)&&void 0!==n?n:0}},toFn:(t,e)=>{var i;return{size:null!==(i=e.radius)&&void 0!==i?i:0}}}}}function lP(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}function cP(t,e){const i=VM(t),o=i?t:[],n=i?[]:t;for(const r of n){for(const t of r.nodes()){const i=e(t,t.datum);t.setProperties(i)}r.cleanup()}for(const r of o){const t=e(r,r.datum);r.setProperties(t)}}dA([ZA(cT),uA("design:type",Object)],sP.prototype,"enabled",void 0),dA([ZA(dT),uA("design:type",Boolean)],sP.prototype,"showArrow",void 0),dA([ZA(hT),uA("design:type",String)],sP.prototype,"format",void 0),dA([ZA(lT),uA("design:type",Function)],sP.prototype,"renderer",void 0);var dP,uP=Object.freeze({__proto__:null,resetMotion:cP});class hP{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=EA.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,o;const n=this.states[this.state],r=null===n||void 0===n?void 0:n[t];if(!r)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");let s=this.state;return"string"===typeof r?s=r:"object"===typeof r&&(s=r.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${s}`,"color: green"),null===(i=this.preTransitionCb)||void 0===i||i.call(this,this.state,s),this.state=s,"function"===typeof r?r(e):"object"===typeof r&&(null===(o=r.action)||void 0===o||o.call(r,e)),this.state}}class pP extends IR{isContinuous(){var t,e;return{isContinuousX:fk.is(null===(t=this.axes[QT.X])||void 0===t?void 0:t.scale),isContinuousY:fk.is(null===(e=this.axes[QT.Y])||void 0===e?void 0:e.scale)}}requestDataModel(t,e,i){var o;return hA(this,void 0,void 0,(function*(){const n=i.props,r=null!==(o=this.dispatch("data-prerequest",this.isContinuous()))&&void 0!==o?o:[];for(const t of r)n.push(...t);const{dataModel:s,processedData:a}=yield t.request(this.id,null!==e&&void 0!==e?e:[],Object.assign(Object.assign({},i),{props:n}));return this.dataModel=s,this.processedData=a,this.dispatch("data-processed",{dataModel:s,processedData:a}),{dataModel:s,processedData:a}}))}isProcessedDataAnimatable(){var t,e;const i=null===(e=null===(t=this.processedData)||void 0===t?void 0:t.reduced)||void 0===e?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:o,uniqueKeys:n}=i;return!!o&&!!n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}}class fP extends pP{constructor(t){var{useLabelLayer:e=!1,pickModes:i=[wR.EXACT_SHAPE_MATCH],canHaveAxes:o=!1,animationResetFns:n}=t,r=cA(t,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(Object.assign(Object.assign({},r),{useLabelLayer:e,pickModes:i,contentGroupVirtual:!1,directionKeys:{[QT.X]:["angleKey"],[QT.Y]:["radiusKey"]},directionNames:{[QT.X]:["angleName"],[QT.Y]:["radiusName"]},canHaveAxes:o})),this.sectorGroup=this.contentGroup.appendChild(new mk),this.itemSelection=bk.select(this.sectorGroup,(()=>this.nodeFactory()),!1),this.labelSelection=bk.select(this.labelGroup,xM,!1),this.highlightSelection=bk.select(this.highlightGroup,(()=>this.nodeFactory())),this.centerX=0,this.centerY=0,this.radius=0,this.sectorGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=n,this.animationState=new hP("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},(()=>this.checkProcessedDataAnimatable()))}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!==(t=this.animationResetFns)&&void 0!==t?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&cP([this.itemSelection,this.highlightSelection],e),i&&cP([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!==(e=this.animationResetFns)&&void 0!==e?e:{};i&&cP([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}}class gP extends RR{constructor(t,e,i,o){super(t,e,i,o),this.angleKey=o.angleKey,this.radiusKey=o.radiusKey,this.calloutLabelKey=o.calloutLabelKey,this.sectorLabelKey=o.sectorLabelKey}}!function(t){t[t.Sector=0]="Sector",t[t.Callout=1]="Callout",t[t.Label=2]="Label"}(dP||(dP={}));class vP extends sR{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}}dA([ZA(wT(0)),uA("design:type",Object)],vP.prototype,"offset",void 0),dA([ZA(wT(0)),uA("design:type",Object)],vP.prototype,"minAngle",void 0),dA([ZA(wT(0)),uA("design:type",Object)],vP.prototype,"minSpacing",void 0),dA([ZA(wT(0)),uA("design:type",Object)],vP.prototype,"maxCollisionOffset",void 0),dA([ZA(cT),uA("design:type",Object)],vP.prototype,"avoidCollisions",void 0);class yP extends sR{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}}dA([ZA(wT()),uA("design:type",Object)],yP.prototype,"positionOffset",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],yP.prototype,"positionRatio",void 0);class mP{constructor(){this.length=10,this.strokeWidth=1}}dA([ZA(xT),uA("design:type",Array)],mP.prototype,"colors",void 0),dA([ZA(wT(0)),uA("design:type",Number)],mP.prototype,"length",void 0),dA([ZA(wT(0)),uA("design:type",Number)],mP.prototype,"strokeWidth",void 0);dA([ZA(cT),uA("design:type",Object)],class extends kM{constructor(){super(...arguments),this.showInLegend=!1}}.prototype,"showInLegend",void 0);class bP extends sR{constructor(){super(...arguments),this.text="",this.margin=2}}dA([ZA(uT),uA("design:type",Object)],bP.prototype,"text",void 0),dA([ZA(wT()),uA("design:type",Object)],bP.prototype,"margin",void 0);class SP{constructor(){this.fill="transparent",this.fillOpacity=1}}dA([ZA(mT),uA("design:type",Object)],SP.prototype,"fill",void 0),dA([ZA(ET(0,1)),uA("design:type",Object)],SP.prototype,"fillOpacity",void 0);class xP extends fP{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:lP,label:BR}}),this.previousRadiusScale=new gk,this.radiusScale=new gk,this.backgroundGroup=this.rootGroup.appendChild(new mk({name:`${this.id}-background`,layer:!0,zIndex:dR.SERIES_BACKGROUND_ZINDEX})),this.innertCircleGroup=this.backgroundGroup.appendChild(new mk({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.title=void 0,this.calloutLabel=new vP,this.sectorLabel=new yP,this.calloutLine=new mP,this.tooltip=new sP,this.angleKey="",this.angleName="",this.innerLabels=[],this.innerCircle=void 0,this.radiusKey=void 0,this.radiusName=void 0,this.radiusMin=void 0,this.radiusMax=void 0,this.calloutLabelKey=void 0,this.calloutLabelName=void 0,this.sectorLabelKey=void 0,this.sectorLabelName=void 0,this.legendItemKey=void 0,this.fills=Object.values(pR),this.strokes=Object.values(fR),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.innerRadiusOffset=0,this.innerRadiusRatio=1,this.strokeWidth=1,this.shadow=void 0,this.highlightStyle=new _R,this.surroundingRadius=void 0,this.NodeClickEvent=gP,this.angleScale=new gk,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((t=>t+Math.PI/2));const e=new mk({name:"pieCalloutLabels"}),i=new mk({name:"pieSectorLabels"}),o=new mk({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(o),this.calloutLabelSelection=bk.select(e,mk),this.sectorLabelSelection=bk.select(i,xM),this.innerLabelsSelection=bk.select(o,xM),this.innerCircleSelection=bk.select(this.innertCircleGroup,hR)}addChartEventListeners(){var t;null===(t=this.ctx.chartEventManager)||void 0===t||t.addListener("legend-item-click",(t=>this.onLegendItemClick(t)))}visibleChanged(){this.processSeriesItemEnabled()}processSeriesItemEnabled(){var t;const{data:e,visible:i}=this;this.seriesItemEnabled=null!==(t=null===e||void 0===e?void 0:e.map((()=>i)))&&void 0!==t?t:[]}nodeFactory(){return new Pk}getSeriesDomain(t){return t===QT.X?this.angleScale.domain:this.radiusScale.domain}processData(t){var e,i;return hA(this,void 0,void 0,(function*(){let{data:o}=this;const{angleKey:n,radiusKey:r,calloutLabelKey:s,sectorLabelKey:a,legendItemKey:l,seriesItemEnabled:c}=this;if(null==n||null==o)return;const d=!this.ctx.animationManager.isSkipped(),u=[],h=[];l?u.push(AR(this,l,!1,{id:"legendItemKey"})):s?u.push(AR(this,s,!1,{id:"calloutLabelKey"})):a&&u.push(AR(this,a,!1,{id:"sectorLabelKey"})),r&&h.push(function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{min:o=-1/0,max:n=1/0}=i,r=cA(i,["min","max"]);return Object.assign({scopes:[t.id],type:"value",property:e,valueType:"range",validation:OR,processor:()=>t=>"number"!==typeof t||isNaN(t)?t:Math.min(Math.max(t,o),n)},r)}(this,r,{id:"radiusValue",min:null!==(e=this.radiusMin)&&void 0!==e?e:0,max:this.radiusMax}),TR(this,r,!0,{id:"radiusRaw"}),Qk(this,{id:"radiusValue"},[0,1],1,null!==(i=this.radiusMin)&&void 0!==i?i:0,this.radiusMax)),s&&h.push(TR(this,s,!1,{id:"calloutLabelValue"})),a&&h.push(TR(this,a,!1,{id:"sectorLabelValue"})),l&&h.push(TR(this,l,!1,{id:"legendItemValue"})),d&&this.processedData&&u.length>0&&h.push(nR(this.processedData)),h.push(tR(this)),o=o.map(((t,e)=>c[e]?t:Object.assign(Object.assign({},t),{[n]:0}))),yield this.requestDataModel(t,o,{props:[...u,MR(this,n,!0,{id:"angleValue",onlyPositive:!0}),TR(this,n,!0,{id:"angleRaw"}),Qk(this,{id:"angleValue"},[0,1],0,0),...h]}),this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return hA(this,void 0,void 0,(function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return hA(this,void 0,void 0,(function*(){const{id:t,processedData:e,dataModel:i,rotation:o,angleScale:n}=this;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:r,radiusIdx:s,calloutLabelIdx:a,sectorLabelIdx:l,legendItemIdx:c}=this.getProcessedDataIndexes(i);let d=0;const u=e.data.map(((t,e)=>{var i;const{datum:u,values:h}=t,p=h[r],f=n.convert(d)+jA(o);d=p;const g=n.convert(d)+jA(o),v=Math.abs(g-f),y=f+v/2,m=h[r+1],b=s>=0&&null!==(i=h[s])&&void 0!==i?i:1,S=s>=0?h[s+1]:void 0,x=c>=0?h[c]:void 0,C=this.getLabels(u,y,v,!0,h[a],h[l],x),w=this.getSectorFormat(u,e,!1);return Object.assign({itemId:e,series:this,datum:u,index:e,angleValue:m,midAngle:y,midCos:Math.cos(y),midSin:Math.sin(y),startAngle:f,endAngle:g,sectorFormat:w,radiusValue:S,radius:b,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(b),0),legendItemValue:x},C)}));return[{itemId:t,nodeData:u,labelData:u}]}))}getLabels(t,e,i,o,n,r,s){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this,d=!o||a.enabled?this.calloutLabelKey:void 0,u=!o||l.enabled?this.sectorLabelKey:void 0;if(!d&&!u&&!c)return{};const h={datum:t,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName,legendItemKey:this.legendItemKey},p={};return d&&i>jA(a.minAngle)&&(p.calloutLabel=Object.assign(Object.assign({},this.getTextAlignment(e)),{text:this.getLabelText(a,Object.assign(Object.assign({},h),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),u&&(p.sectorLabel={text:this.getLabelText(l,Object.assign(Object.assign({},h),{value:r}))}),null!=c&&null!=s&&(p.legendItem={key:c,text:s}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=VA(t)- -3*Math.PI/4;return e[$A(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var o,n,r,s,a;const{angleKey:l,radiusKey:c,fills:d,strokes:u,formatter:h,id:p,ctx:{callbackCache:f,highlightManager:g}}=this,v=g.getActiveHighlight(),y=i&&(null===v||void 0===v?void 0:v.series)===this&&e===v.itemId,{fill:m,fillOpacity:b,stroke:S,strokeWidth:x,strokeOpacity:C}=Fk(y&&this.highlightStyle.item,{fill:d[e%d.length],fillOpacity:this.fillOpacity,stroke:u[e%u.length],strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.getOpacity()});let w;return h&&(w=f.call(h,{datum:t,angleKey:l,radiusKey:c,fill:m,stroke:S,fills:d,strokes:u,strokeWidth:x,highlighted:y,seriesId:p})),{fill:null!==(o=null===w||void 0===w?void 0:w.fill)&&void 0!==o?o:m,fillOpacity:null!==(n=null===w||void 0===w?void 0:w.fillOpacity)&&void 0!==n?n:b,stroke:null!==(r=null===w||void 0===w?void 0:w.stroke)&&void 0!==r?r:S,strokeWidth:null!==(s=null===w||void 0===w?void 0:w.strokeWidth)&&void 0!==s?s:x,strokeOpacity:null!==(a=null===w||void 0===w?void 0:w.strokeOpacity)&&void 0!==a?a:C}}getInnerRadius(){const{radius:t,innerRadiusRatio:e,innerRadiusOffset:i}=this,o=t*e+i;return o===t||o<0?0:o}getOuterRadius(){return Math.max(this.radius*this.outerRadiusRatio+this.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map((t=>{var{radius:e}=t,i=cA(t,["radius"]);return Object.assign(Object.assign({},i),{radius:e,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(e),0)})}))}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!==(e=null===(t=this.title)||void 0===t?void 0:t.spacing)&&void 0!==e?e:0))-Math.max(0,-i)}update(t){let{seriesRect:e}=t;return hA(this,void 0,void 0,(function*(){const{title:t}=this,i={seriesRectWidth:null===e||void 0===e?void 0:e.width,seriesRectHeight:null===e||void 0===e?void 0:e.height},o=null!=RA(this.nodeDataDependencies,i);if(o&&(this.nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(o),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const e=this.getTitleTranslationY(),i=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(e)&&!this.bboxIntersectsSurroundingSeries(i,0,e),t.node.translationY=isFinite(e)?e:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)}))}updateTitleNodes(){var t,e;const{title:i,oldTitle:o}=this;o!==i&&(o&&(null===(t=this.labelGroup)||void 0===t||t.removeChild(o.node)),i&&(i.node.textBaseline="bottom",null===(e=this.labelGroup)||void 0===e||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach((t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}}))}updateSelections(){return hA(this,void 0,void 0,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return hA(this,void 0,void 0,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:o,innerLabelsSelection:n}=this,r=(t,e)=>{let i=this.nodeData;e&&(i=i.map((t=>Object.assign(Object.assign({},t),{sectorFormat:Object.assign({},t.sectorFormat)})))),t.update(i),this.ctx.animationManager.isSkipped()&&t.cleanup()};r(t,!1),r(e,!0),i.update(this.nodeData,(t=>{const e=new Sk;e.tag=dP.Callout,e.pointerEvents=cM.None,t.appendChild(e);const i=new xM;i.tag=dP.Label,i.pointerEvents=cM.None,t.appendChild(i)})),o.update(this.nodeData,(t=>{t.pointerEvents=cM.None})),n.update(this.innerLabels,(t=>{t.pointerEvents=cM.None}))}))}updateInnerCircleSelection(){const{innerCircle:t}=this;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius()),o=1;e=Math.ceil(2*t+o)}const o=t?[{radius:e}]:[];this.innerCircleSelection.update(o)}updateNodes(t){return hA(this,void 0,void 0,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null===e||void 0===e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((t,e)=>{let{radius:i}=e;var o,n;t.setProperties({fill:null===(o=this.innerCircle)||void 0===o?void 0:o.fill,opacity:null===(n=this.innerCircle)||void 0===n?void 0:n.fillOpacity,size:i})}));const o=(t,e,i,o)=>{const n=this.getSectorFormat(e.datum,e.itemId,o);e.sectorFormat.fill=n.fill,e.sectorFormat.stroke=n.stroke;const r=this.ctx.animationManager.isSkipped();r&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(o||r)&&(t.fill=n.fill,t.stroke=n.stroke),t.strokeWidth=n.strokeWidth,t.fillOpacity=n.fillOpacity,t.strokeOpacity=this.strokeOpacity,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=this.shadow,t.lineJoin="round"};this.itemSelection.each(((t,e,i)=>o(t,e,0,!1))),this.highlightSelection.each(((t,i,n)=>{const r=(null===e||void 0===e?void 0:e.series)===this&&t.datum.itemId===e.itemId;o(t,i,0,r),t.visible=r})),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this,i=e.length,o=e.strokeWidth,n=null!==(t=e.colors)&&void 0!==t?t:this.strokes,{offset:r}=this.calloutLabel;this.calloutLabelSelection.selectByTag(dP.Callout).forEach(((t,e)=>{const s=t.datum,{calloutLabel:a,outerRadius:l}=s;if((null===a||void 0===a?void 0:a.text)&&!a.hidden&&0!==l){t.visible=!0,t.strokeWidth=o,t.stroke=n[e%n.length],t.fill=void 0;const c=s.midCos*l,d=s.midSin*l;let u=s.midCos*(l+i),h=s.midSin*(l+i);if((a.collisionTextAlign||0!==a.collisionOffsetY)&&null!=a.box){const t=a.box;let e=u,i=h;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),h<t.y?i=t.y:h>t.y+t.height&&(i=t.y+t.height);const o=e-u,n=i-h,s=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),l=s-r;l>0&&(u+=o*l/s,h+=n*l/s)}t.x1=c,t.y1=d,t.x2=u,t.y2=h}else t.visible=!1}))}getLabelOverflow(t,e,i){const o=i.x-this.centerX,n=i.x+i.width-this.centerX,r=i.y-this.centerY,s=i.y+i.height-this.centerY;let a=1;e.x+1<o?a=(e.x+e.width-o)/e.width:e.x+e.width-1>n&&(a=(n-e.x)/e.width);const l=e.y+1<r||e.y+e.height-1>s;return{textLength:1===a?t.length:Math.floor(t.length*a)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{surroundingRadius:o}=this;if(null==o)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],r=Math.pow(o,2);return n.some((t=>Math.pow(t.x,2)+Math.pow(t.y,2)>r))}computeCalloutLabelCollisionOffsets(){const{radiusScale:t,calloutLabel:e,calloutLine:i}=this,{offset:o,minSpacing:n}=e,r=t.convert(0),s=this.nodeData,a=this.nodeData.filter((t=>{return!(!(e=t).calloutLabel||0===e.outerRadius);var e}));if(a.forEach((t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),a.length<=1)return;const l=a.filter((t=>t.midCos<0)).sort(((t,e)=>t.midSin-e.midSin)),c=a.filter((t=>t.midCos>=0)).sort(((t,e)=>t.midSin-e.midSin)),d=a.filter((t=>{var e;return t.midSin<0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),u=a.filter((t=>{var e;return t.midSin>=0&&"center"===(null===(e=t.calloutLabel)||void 0===e?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),h=new xM,p=t=>{var e;const n=t.calloutLabel;if(null==n)return new aM(0,0,0,0);const r=t.outerRadius+i.length+o,s=t.midCos*r,a=t.midSin*r+n.collisionOffsetY;return h.text=n.text,h.x=s,h.y=a,h.setFont(this.calloutLabel),h.setAlign({textAlign:null!==(e=n.collisionTextAlign)&&void 0!==e?e:n.textAlign,textBaseline:n.textBaseline}),h.computeBBox()},f=(t,e,i)=>{const o=p(t).grow(n/2),r=p(e).grow(n/2);if(o.x<r.x+r.width&&o.x+o.width>r.x&&("to-top"===i?o.y<r.y+r.height:o.y+o.height>r.y)){const t="to-top"===i?o.y-r.y-r.height:o.y+o.height-r.y;e.calloutLabel.collisionOffsetY=t}},g=t=>{const e=t.slice().sort(((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin)))[0],i=t.indexOf(e);for(let o=i-1;o>=0;o--){const e=t[o+1],i=t[o];f(e,i,"to-top")}for(let o=i+1;o<t.length;o++){const e=t[o-1],i=t[o];f(e,i,"to-bottom")}},v=t=>{const e=a.some((t=>0!==t.calloutLabel.collisionOffsetY)),i=t.map((t=>p(t))),o=i.map((t=>t.clone().grow(n/2)));let l=!1;for(let n=0;n<o.length&&!l;n++){const e=o[n];for(let i=n+1;i<t.length;i++){const t=o[i];if(e.collidesBBox(t)){l=!0;break}}}const c=s.map((t=>{const{startAngle:e,endAngle:i,outerRadius:o}=t;return{startAngle:e,endAngle:i,innerRadius:r,outerRadius:o}})),d=i.some((t=>c.some((e=>function(t,e){const i={x:t.x,y:t.y},o={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},r={x:t.x+t.width,y:t.y+t.height};return Ak({start:i,end:o},e)||Ak({start:n,end:r},e)}(t,e)))));(l||e||d)&&t.filter((t=>"center"===t.calloutLabel.textAlign)).forEach((t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};g(l),g(c),v(d),v(u)}updateCalloutLabelNodes(t){const{radiusScale:e,calloutLabel:i,calloutLine:o}=this,n=o.length,{offset:r,color:s}=i,a=new xM;this.calloutLabelSelection.selectByTag(dP.Label).forEach((o=>{var l;const{datum:c}=o,d=c.calloutLabel,u=e.convert(c.radius),h=Math.max(0,u);if(!(null===d||void 0===d?void 0:d.text)||0===h||d.hidden)return void(o.visible=!1);const p=h+n+r,f=c.midCos*p,g=c.midSin*p+d.collisionOffsetY,v={textAlign:null!==(l=d.collisionTextAlign)&&void 0!==l?l:d.textAlign,textBaseline:d.textBaseline};a.text=d.text,a.x=f,a.y=g,a.setFont(this.calloutLabel),a.setAlign(v);const y=a.computeBBox();let m=d.text,b=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(d.text,y,t);m=d.text.length===e?d.text:`${d.text.substring(0,e)}\u2026`,b=!i}o.text=m,o.x=f,o.y=g,o.setFont(this.calloutLabel),o.setAlign(v),o.fill=s,o.visible=b}))}computeLabelsBBox(t,e){var i;return hA(this,void 0,void 0,(function*(){const{calloutLabel:o,calloutLine:n}=this,r=n.length,{offset:s,maxCollisionOffset:a,minSpacing:l}=o;if(!o.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const c=[],d=new xM;let u;if((null===(i=this.title)||void 0===i?void 0:i.text)&&this.title.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(d.text=this.title.text,d.x=0,d.y=t,d.setFont(this.title),d.setAlign({textBaseline:"bottom",textAlign:"center"}),u=d.computeBBox(),c.push(u))}return this.nodeData.forEach((i=>{var o;const n=i.calloutLabel;if(!n||0===i.outerRadius)return null;const h=i.outerRadius+r+s,p=i.midCos*h,f=i.midSin*h+n.collisionOffsetY;d.text=n.text,d.x=p,d.y=f,d.setFont(this.calloutLabel),d.setAlign({textAlign:null!==(o=n.collisionTextAlign)&&void 0!==o?o:n.textAlign,textBaseline:n.textBaseline});const g=d.computeBBox();if(n.box=g,Math.abs(n.collisionOffsetY)>a)n.hidden=!0;else{if(u){const t=e.y-this.centerY,i=new aM(u.x-l,t,u.width+2*l,u.y+u.height+l-t);if(g.collidesBBox(i))return void(n.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:o}=this.getLabelOverflow(n.text,g,e),r=n.text.length>2&&t<2;if(i||r||o)return void(n.hidden=!0)}n.hidden=!1,c.push(g)}})),0===c.length?null:aM.merge(c)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:o,fontWeight:n,fontFamily:r,positionOffset:s,positionRatio:a,color:l}=this.sectorLabel,c=e>0,d=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each(((t,u)=>{const{sectorLabel:h,outerRadius:p}=u;let f=!1;if(h&&0!==p){const g=e*(1-a)+p*a+s;t.fill=l,t.fontStyle=o,t.fontWeight=n,t.fontSize=i,t.fontFamily=r,t.text=h.text;!c&&d?(t.x=0,t.y=0):(t.x=u.midCos*g,t.y=u.midSin*g),t.textAlign="center",t.textBaseline="middle";const v=t.computeBBox(),y=[[v.x,v.y],[v.x+v.width,v.y],[v.x+v.width,v.y+v.height],[v.x,v.y+v.height]],{startAngle:m,endAngle:b}=u,S={startAngle:m,endAngle:b,innerRadius:e,outerRadius:p};y.every((t=>{let[e,i]=t;return Dk(e,i,S)}))&&(f=!0)}t.visible=f}))}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each(((i,o)=>{const{fontStyle:n,fontWeight:r,fontSize:s,fontFamily:a,color:l}=o;i.fontStyle=n,i.fontWeight=r,i.fontSize=s,i.fontFamily=a,i.text=o.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(o.margin)}));const i=t=>0===t?0:e[t],o=t=>t===e.length-1?0:e[t],n=t.reduce(((t,e,n)=>t+e.height+i(n)+o(n)),0),r=Math.max(...t.map((t=>t.width))),s=this.getInnerRadius(),a=Math.sqrt(Math.pow(r/2,2)+Math.pow(n/2,2))<=(s>0?s:this.getOuterRadius()),l=[];for(let c=0,d=-n/2;c<t.length;c++){const e=t[c].height+d+i(c);l.push(e),d=e+o(c)}this.innerLabelsSelection.each(((t,e,i)=>{t.y=l[i],t.visible=a}))}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:o,legendItemKey:n}=this,{sectorLabel:r,calloutLabel:s,legendItem:a}=t;return n&&void 0!==a?a.text:i&&i!==e&&void 0!==(null===s||void 0===s?void 0:s.text)?s.text:o&&o!==e&&void 0!==(null===r||void 0===r?void 0:r.text)?r.text:void 0}getTooltipHtml(t){var e;if(!this.angleKey)return"";const{datum:i,angleValue:o,sectorFormat:{fill:n}}=t,r=Bk(null===(e=this.title)||void 0===e?void 0:e.text),s=Uk(o)?XA(o):String(o),a=this.getDatumLegendName(t);return this.tooltip.toTooltipHtml({title:null!==r&&void 0!==r?r:a,content:r&&a?`${a}: ${s}`:s,backgroundColor:n},{datum:i,title:r,color:n,seriesId:this.id,angleKey:this.angleKey,angleName:this.angleName,radiusKey:this.radiusKey,radiusName:this.radiusName,calloutLabelKey:this.calloutLabelKey,calloutLabelName:this.calloutLabelName,sectorLabelKey:this.sectorLabelKey,sectorLabelName:this.sectorLabelName})}getLegendData(t){var e,i,o,n,r;const{processedData:s,angleKey:a,calloutLabelKey:l,sectorLabelKey:c,legendItemKey:d,id:u,dataModel:h}=this;if(!h||!s||0===s.data.length||"category"!==t)return[];if(!d&&(!l||l===a)&&(!c||c===a))return[];const{calloutLabelIdx:p,sectorLabelIdx:f,legendItemIdx:g}=this.getProcessedDataIndexes(h),v=(null===(e=this.title)||void 0===e?void 0:e.showInLegend)&&this.title.text,y=[];for(let m=0;m<s.data.length;m++){const{datum:t,values:e}=s.data[m],h=[];v&&h.push(v);const b=this.getLabels(t,2*Math.PI,2*Math.PI,!1,e[p],e[f],e[g]);if(d&&void 0!==b.legendItem?h.push(b.legendItem.text):l&&l!==a&&void 0!==(null===(i=b.calloutLabel)||void 0===i?void 0:i.text)?h.push(null===(o=b.calloutLabel)||void 0===o?void 0:o.text):c&&c!==a&&void 0!==(null===(n=b.sectorLabel)||void 0===n?void 0:n.text)&&h.push(null===(r=b.sectorLabel)||void 0===r?void 0:r.text),0===h.length)continue;const S=this.getSectorFormat(t,m,!1);y.push({legendType:"category",id:u,itemId:m,seriesId:u,enabled:this.seriesItemEnabled[m],label:{text:h.join(" - ")},marker:{fill:S.fill,stroke:S.stroke,fillOpacity:this.fillOpacity,strokeOpacity:this.strokeOpacity,strokeWidth:this.strokeWidth}})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:o}=t;o.id===this.id?this.toggleSeriesItem(i,e):"pie"===o.type&&this.toggleOtherSeriesItems(o,i,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e,i){var o,n;const{legendItemKey:r,dataModel:s}=this;if(!r||!s)return;const a=t.legendItemKey&&(null===(o=t.data)||void 0===o?void 0:o.find(((t,i)=>i===e))[t.legendItemKey]);if(!a)return;const l=s.resolveProcessedDataIndexById(this,"legendItemValue").index;null===(n=this.processedData)||void 0===n||n.data.forEach(((t,e)=>{let{values:o}=t;o[l]===a&&this.toggleSeriesItem(e,i)}))}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=aP(!0,this.rotation,this.radiusScale,this.previousRadiusScale);zM(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),zM(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),FR(this,"callout",e,[this.calloutLabelSelection]),FR(this,"sector",e,[this.sectorLabelSelection]),FR(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,o,n,r;const{itemSelection:s,highlightSelection:a,processedData:l,radiusScale:c,previousRadiusScale:d}=this,{animationManager:u}=this.ctx,h=null===(t=null===l||void 0===l?void 0:l.reduced)||void 0===t?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!==(e=null===h||void 0===h?void 0:h.moved.length)&&void 0!==e?e:0)&&(null===h||void 0===h?void 0:h.addedIndices.every((t=>!h.removedIndices.includes(t)))),f=(null!==(i=null===l||void 0===l?void 0:l.defs.keys.length)&&void 0!==i?i:0)>0,g=null===(r=null===(n=null===(o=null===l||void 0===l?void 0:l.reduced)||void 0===o?void 0:o.animationValidation)||void 0===n?void 0:n.uniqueKeys)||void 0===r||r;p&&f&&g||this.ctx.animationManager.skipCurrentBatch();const v=aP(!1,this.rotation,c,d);zM(this.id,"nodes",u,[s,a],v.nodes,((t,e)=>this.getDatumId(e)),h),zM(this.id,"innerCircle",u,[this.innerCircleSelection],v.innerCircle),FR(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),FR(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),FR(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:o}=this,{animationManager:n}=this.ctx,r=aP(!1,this.rotation,i,o);zM(this.id,"nodes",n,[t,e],r.nodes),zM(this.id,"innerCircle",n,[this.innerCircleSelection],r.innerCircle),GR(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),GR(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),GR(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,o;const{calloutLabelKey:n,sectorLabelKey:r,legendItemKey:s}=this;if(null===(o=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.animationValidation)||void 0===o?void 0:o.uniqueKeys)return s?t[s]:n?t[n]:r?t[r]:void 0}getDatumId(t){var e;const{index:i}=t;return null!==(e=this.getDatumIdFromData(t.datum))&&void 0!==e?e:`${i}`}onDataChange(){this.processSeriesItemEnabled()}}xP.className="PieSeries",xP.type="pie",dA([ZA(uT),uA("design:type",Object)],xP.prototype,"angleKey",void 0),dA([ZA(uT),uA("design:type",Object)],xP.prototype,"angleName",void 0),dA([ZA(hT),uA("design:type",String)],xP.prototype,"radiusKey",void 0),dA([ZA(hT),uA("design:type",String)],xP.prototype,"radiusName",void 0),dA([ZA(ET(0)),uA("design:type",Number)],xP.prototype,"radiusMin",void 0),dA([ZA(ET(0)),uA("design:type",Number)],xP.prototype,"radiusMax",void 0),dA([ZA(hT),uA("design:type",String)],xP.prototype,"calloutLabelKey",void 0),dA([ZA(hT),uA("design:type",String)],xP.prototype,"calloutLabelName",void 0),dA([ZA(hT),uA("design:type",String)],xP.prototype,"sectorLabelKey",void 0),dA([ZA(hT),uA("design:type",String)],xP.prototype,"sectorLabelName",void 0),dA([ZA(hT),uA("design:type",String)],xP.prototype,"legendItemKey",void 0),dA([ZA(ST),uA("design:type",Array)],xP.prototype,"fills",void 0),dA([ZA(ST),uA("design:type",Array)],xP.prototype,"strokes",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],xP.prototype,"fillOpacity",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],xP.prototype,"strokeOpacity",void 0),dA([ZA(FT),uA("design:type",Array)],xP.prototype,"lineDash",void 0),dA([ZA(wT(0)),uA("design:type",Number)],xP.prototype,"lineDashOffset",void 0),dA([ZA(lT),uA("design:type",Function)],xP.prototype,"formatter",void 0),dA([ZA(wT(-360,360)),uA("design:type",Object)],xP.prototype,"rotation",void 0),dA([ZA(wT()),uA("design:type",Object)],xP.prototype,"outerRadiusOffset",void 0),dA([ZA(wT(0)),uA("design:type",Object)],xP.prototype,"outerRadiusRatio",void 0),dA([ZA(wT()),uA("design:type",Object)],xP.prototype,"innerRadiusOffset",void 0),dA([ZA(wT(0)),uA("design:type",Object)],xP.prototype,"innerRadiusRatio",void 0),dA([ZA(wT(0)),uA("design:type",Object)],xP.prototype,"strokeWidth",void 0);const CP={constructors:{},constructedArrays:new WeakMap};class wP extends bM{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new aM(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:o,stats:n}=t;if(this.dirty===tM.NONE&&!o)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:s,x2:a,y2:l}=this;r=this.align(r),s=this.align(s),a=this.align(a),l=this.align(l);const{fill:c,opacity:d,isRange:u}=this;if(!(!u||!c)){const{fillOpacity:t}=this;i.fillStyle=c,i.globalAlpha=d*t,i.beginPath(),i.moveTo(r,s),i.lineTo(a,s),i.lineTo(a,l),i.lineTo(r,l),i.closePath(),i.fill()}const{stroke:h,strokeWidth:p,startLine:f,endLine:g}=this;if(!(!f&&!g||!h||!p)){const{strokeOpacity:t,lineDash:e,lineDashOffset:o,lineCap:n,lineJoin:c}=this;i.strokeStyle=h,i.globalAlpha=d*t,i.lineWidth=p,e&&i.setLineDash(e),o&&(i.lineDashOffset=o),n&&(i.lineCap=n),c&&(i.lineJoin=c),i.beginPath(),f&&(i.moveTo(r,s),i.lineTo(a,s)),g&&(i.moveTo(a,l),i.lineTo(r,l)),i.stroke()}null===(e=this.fillShadow)||void 0===e||e.markClean(),super.render(t)}}wP.className="Range",wP.defaultStyles=Object.assign(Object.assign({},bM.defaultStyles),{strokeWidth:1}),dA([iM({redraw:tM.MINOR}),uA("design:type",Number)],wP.prototype,"x1",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Number)],wP.prototype,"y1",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Number)],wP.prototype,"x2",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Number)],wP.prototype,"y2",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Boolean)],wP.prototype,"startLine",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Boolean)],wP.prototype,"endLine",void 0),dA([iM({redraw:tM.MINOR}),uA("design:type",Boolean)],wP.prototype,"isRange",void 0);const EP={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},OP={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function DP(t){let{yDirection:e,padding:i=0,position:o="top",bbox:n}=t;const r=e?EP:OP,{xTranslationDirection:s,yTranslationDirection:a}=r[o];return{xTranslation:s*(i+(e?n.width:n.height)/2),yTranslation:a*(i+(e?n.height:n.width)/2)}}const AP=t=>{let{yDirection:e,xEnd:i,yStart:o,yEnd:n}=t;return e?{x:i/2,y:o}:{x:i,y:isNaN(n)?o:(o+n)/2}},TP=t=>{let{yDirection:e,xStart:i,xEnd:o,yStart:n,yEnd:r}=t;return e?{x:i,y:isNaN(r)?n:(n+r)/2}:{x:o/2,y:n}},MP=t=>{let{yDirection:e,xEnd:i,yStart:o,yEnd:n}=t;return e?{x:i,y:isNaN(n)?o:(o+n)/2}:{x:i/2,y:isNaN(n)?o:n}},kP=t=>{let{yDirection:e,xStart:i,xEnd:o,yStart:n,yEnd:r}=t;return e?{x:o/2,y:isNaN(r)?n:r}:{x:i,y:isNaN(r)?n:(n+r)/2}},RP=t=>{let{yDirection:e,xStart:i,xEnd:o,yStart:n}=t;return e?{x:i/2,y:n}:{x:o,y:n}},PP=t=>{let{yDirection:e,xStart:i,yStart:o,yEnd:n}=t;return e?{x:i,y:isNaN(n)?o:n}:{x:i,y:o}},NP=t=>{let{yDirection:e,xEnd:i,yStart:o,yEnd:n}=t;return e?{x:i,y:o}:{x:i,y:isNaN(n)?o:n}},LP=t=>{let{yDirection:e,xStart:i,xEnd:o,yStart:n,yEnd:r}=t;return e?{x:o,y:isNaN(r)?n:r}:{x:i,y:isNaN(r)?n:r}},_P={top:{c:AP},bottom:{c:kP},left:{c:TP},right:{c:MP},topLeft:{c:RP},topRight:{c:NP},bottomLeft:{c:PP},bottomRight:{c:LP},inside:{c:t=>{let{xEnd:e,yStart:i,yEnd:o}=t;return{x:e/2,y:isNaN(o)?i:(i+o)/2}}},insideLeft:{c:TP},insideRight:{c:MP},insideTop:{c:AP},insideBottom:{c:kP},insideTopLeft:{c:RP},insideBottomLeft:{c:PP},insideTopRight:{c:NP},insideBottomRight:{c:LP}},IP=["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],FP=QA(((t,e)=>tT(t,e,(t=>IP.includes(t)))),"expecting an optional crossLine label position keyword such as 'topLeft', 'topRight' or 'inside'"),GP=QA(((t,e)=>tT(t,e,(t=>"range"===t||"line"===t))),"expecting a crossLine type keyword such as 'range' or 'line'");class BP{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}}dA([ZA(dT),uA("design:type",Boolean)],BP.prototype,"enabled",void 0),dA([ZA(hT),uA("design:type",String)],BP.prototype,"text",void 0),dA([ZA(NT),uA("design:type",String)],BP.prototype,"fontStyle",void 0),dA([ZA(_T),uA("design:type",String)],BP.prototype,"fontWeight",void 0),dA([ZA(wT(0)),uA("design:type",Number)],BP.prototype,"fontSize",void 0),dA([ZA(uT),uA("design:type",String)],BP.prototype,"fontFamily",void 0),dA([ZA(wT()),uA("design:type",Number)],BP.prototype,"padding",void 0),dA([ZA(bT),uA("design:type",String)],BP.prototype,"color",void 0),dA([ZA(FP),uA("design:type",String)],BP.prototype,"position",void 0),dA([ZA(ET(-360,360)),uA("design:type",Number)],BP.prototype,"rotation",void 0),dA([ZA(dT),uA("design:type",Boolean)],BP.prototype,"parallel",void 0);class VP{constructor(){this.id=rM(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new BP,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction=QT.X,this.group=new mk({name:`${this.id}`,layer:!0,zIndex:VP.LINE_LAYER_ZINDEX}),this.crossLineRange=new wP,this.crossLineLabel=new xM,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:t,crossLineRange:e,crossLineLabel:i}=this;t.append([e,i]),e.pointerEvents=cM.None}update(t){this.enabled&&t&&0!==this.data.length?(this.group.visible=!0,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()):this.group.visible=!1}calculateLayout(t){if(!t)return;if(!this.createNodeData())return;const{sideFlag:e,gridLength:i,data:o}=this,n=[],r=e*i,s=o[0],a=o[1],l=new aM(Math.min(0,r),Math.min(s,a),Math.abs(0-r),Math.abs(s-a));n.push(l);const c=this.computeLabelBBox();return c&&n.push(c),aM.merge(n)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(){var t,e;const{scale:i,gridLength:o,sideFlag:n,direction:r,label:{position:s="top"},clippedRange:a,strokeWidth:l=0}=this;if(this.data=[],!i)return!1;const c=null!==(t=i.bandwidth)&&void 0!==t?t:0,d=t=>Math.max(Math.min(...a),Math.min(Math.max(...a),t)),[u,h]=[0,n*o];let[p,f]=this.getRange(),[g,v]=[Number(i.convert(p,{clampMode:"clamped"})),i.convert(f,{clampMode:"clamped"})+c];g=d(g),v=d(v),[p,f]=[Number(i.convert(p)),i.convert(f)+c];const y=!isNaN(g)&&!isNaN(v)&&(p===g||f===v||g!==v)&&Math.abs(v-g)>0;if(y){g!==Math.min(g,v)&&([g,v]=[Math.min(g,v),Math.max(g,v)],[p,f]=[f,p])}if(this.isRange=y,this.startLine=!isNaN(p)&&l>0&&p===g,this.endLine=!isNaN(f)&&l>0&&f===v,!y&&!this.startLine&&!this.endLine)return!1;if(this.data=[g,v],this.label.enabled){const t=r===QT.Y,{c:i=AP}=null!==(e=_P[s])&&void 0!==e?e:{},{x:o,y:n}=i({yDirection:t,xStart:u,xEnd:h,yStart:g,yEnd:v});this.labelPoint={x:o,y:n}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:o,data:n,startLine:r,endLine:s,isRange:a,fill:l,fillOpacity:c,stroke:d,strokeWidth:u,lineDash:h}=this;e.x1=0,e.x2=i*o,e.y1=n[0],e.y2=n[1],e.startLine=r,e.endLine=s,e.isRange=a,e.fill=l,e.fillOpacity=null!==c&&void 0!==c?c:1,e.stroke=d,e.strokeWidth=null!==u&&void 0!==u?u:1,e.strokeOpacity=null!==(t=this.strokeOpacity)&&void 0!==t?t:1,e.lineDash=h}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:o,rotation:n,position:r="top",padding:s=0},direction:a,parallelFlipRotation:l,regularFlipRotation:c}=this;if(void 0===e||void 0===i)return;const{defaultRotation:d,configuredRotation:u}=aR({rotation:n,parallel:o,regularFlipRotation:c,parallelFlipRotation:l});t.rotation=d+u,t.textBaseline="middle",t.textAlign="center";const h=t.computeTransformedBBox();if(!h)return;const p=a===QT.Y,{xTranslation:f,yTranslation:g}=DP({yDirection:p,padding:s,position:r,bbox:h});t.translationX=e+f,t.translationY=i+g}getZIndex(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?VP.RANGE_LAYER_ZINDEX:VP.LINE_LAYER_ZINDEX}getRange(){const{value:t,range:e,scale:i}=this,o=fk.is(i);let[n,r]=null!==e&&void 0!==e?e:[t,void 0];return o||void 0!==r||(r=n),n=null!=Hk(n,o)?n:void 0,r=null!=Hk(r,o)?r:void 0,o&&n===r&&(r=void 0),void 0===n&&void 0!==r&&(n=r,r=void 0),[n,r]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new xM;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:o}={},label:{parallel:n,rotation:r,position:s="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:d}=this;if(void 0===i||void 0===o)return;const{configuredRotation:u}=aR({rotation:r,parallel:n,regularFlipRotation:d,parallelFlipRotation:c});e.rotation=u,e.textBaseline="middle",e.textAlign="center";const h=e.computeTransformedBBox();if(!h)return;const p=l===QT.Y,{xTranslation:f,yTranslation:g}=DP({yDirection:p,padding:a,position:s,bbox:h});return e.translationX=i+f,e.translationY=o+g,e.computeTransformedBBox()}calculatePadding(t){var e,i,o,n,r,s,a,l;const{isRange:c,startLine:d,endLine:u,direction:h,label:{padding:p=0,position:f="top"}}=this;if(!c&&!d&&!u)return;const g=this.computeLabelBBox(),v=null===g||void 0===g?void 0:g.x,y=null===g||void 0===g?void 0:g.y;if(!g||void 0==v||void 0==y)return;const m=function(t){let{yDirection:e,bbox:i,padding:o=0,position:n="top"}=t;const r={};return n.startsWith("inside")||("top"!==n||e?"bottom"!==n||e?"left"===n&&e?r.left=o+i.width:"right"===n&&e&&(r.right=o+i.width):r.bottom=o+i.height:r.top=o+i.height),r}({yDirection:h===QT.Y,padding:p,position:f,bbox:g});t.left=Math.max(null!==(e=t.left)&&void 0!==e?e:0,null!==(i=m.left)&&void 0!==i?i:0),t.right=Math.max(null!==(o=t.right)&&void 0!==o?o:0,null!==(n=m.right)&&void 0!==n?n:0),t.top=Math.max(null!==(r=t.top)&&void 0!==r?r:0,null!==(s=m.top)&&void 0!==s?s:0),t.bottom=Math.max(null!==(a=t.bottom)&&void 0!==a?a:0,null!==(l=m.bottom)&&void 0!==l?l:0)}}VP.LINE_LAYER_ZINDEX=dR.SERIES_CROSSLINE_LINE_ZINDEX,VP.RANGE_LAYER_ZINDEX=dR.SERIES_CROSSLINE_RANGE_ZINDEX,VP.className="CrossLine",dA([ZA(dT),uA("design:type",Boolean)],VP.prototype,"enabled",void 0),dA([ZA(GP),uA("design:type",String)],VP.prototype,"type",void 0),dA([ZA(iT(2)),uA("design:type",Array)],VP.prototype,"range",void 0),dA([ZA(bT),uA("design:type",String)],VP.prototype,"fill",void 0),dA([ZA(ET(0,1)),uA("design:type",Number)],VP.prototype,"fillOpacity",void 0),dA([ZA(bT),uA("design:type",String)],VP.prototype,"stroke",void 0),dA([ZA(ET()),uA("design:type",Number)],VP.prototype,"strokeWidth",void 0),dA([ZA(ET(0,1)),uA("design:type",Number)],VP.prototype,"strokeOpacity",void 0),dA([ZA(FT),uA("design:type",Array)],VP.prototype,"lineDash",void 0);const jP=t=>t;class WP extends fk{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.cacheProps=["domain","range","nice","tickCount","base"],this.baseLog=jP,this.basePow=jP,this.log=t=>this.domain[0]>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>this.domain[0]>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return this.domain[0]>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return this.domain[0]>=0?Math.exp(t):-Math.exp(-t)}update(){!this.domain||this.domain.length<2||(this.updateLogFn(),this.updatePowFn(),this.nice&&this.updateNiceDomain())}updateLogFn(){const{base:t}=this;let e;if(10===t)e=Math.log10;else if(t===Math.E)e=Math.log;else if(2===t)e=Math.log2;else{const i=Math.log(t);e=t=>Math.log(t)/i}this.baseLog=e}updatePowFn(){const{base:t}=this;let e;e=10===t?WP.pow10:t===Math.E?Math.exp:e=>Math.pow(t,e),this.basePow=e}updateNiceDomain(){const[t,e]=this.domain,i=this.pow(Math.floor(this.log(t))),o=this.pow(Math.ceil(this.log(e)));this.niceDomain=[i,o]}static pow10(t){return t>=0?Math.pow(10,t):1/Math.pow(10,-t)}ticks(){var t;const e=null!==(t=this.tickCount)&&void 0!==t?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[o,n]=this.getDomain();let r=this.log(o),s=this.log(n);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(s-r),i=pk(r,s,Math.min(e,t)).map((t=>this.pow(t))).filter((t=>t>=o&&t<=n));if(!this.isDenseInterval({start:o,stop:n,interval:t,count:i.length}))return i}if(!(i%1===0)||s-r>=e)return ck(r,s,Math.min(s-r,e)).map((t=>this.pow(t)));const a=[],l=o>0;r=Math.floor(r)-1,s=Math.round(s)+1;const c=Math.min(...this.range),d=(Math.max(...this.range)-c)/e;let u=1/0;for(let h=r;h<=s;h++){const t=this.convert(this.pow(h+1));for(let e=1;e<i;e++){const r=l?e:i-e+1,s=this.pow(h)*r,c=this.convert(s),p=Math.abs(u-c),f=Math.abs(c-t);s>=o&&s<=n&&(1===e||p>=d&&f>=d)&&(a.push(s),u=c)}}return a}tickFormat(t){let{count:e,ticks:i,specifier:o}=t;const{base:n}=this;return null==o&&(o=10===n?".0e":","),"string"===typeof o&&(o=QM(o)),e===1/0?o:(null==i&&this.ticks(),t=>o(t))}}var zP;dA([ZA(wT(0)),uA("design:type",Object)],WP.prototype,"base",void 0),function(t){t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR"}(zP||(zP={}));const HP={[zP.MILLISECOND]:".%L",[zP.SECOND]:":%S",[zP.MINUTE]:"%I:%M",[zP.HOUR]:"%I %p",[zP.WEEK_DAY]:"%a",[zP.SHORT_MONTH]:"%b %d",[zP.MONTH]:"%B",[zP.SHORT_YEAR]:"%y",[zP.YEAR]:"%Y"};function UP(t){return t instanceof Date?t.getTime():t}class KP extends fk{constructor(){super([new Date(2022,11,7),new Date(2022,11,8)],[0,1]),this.type="time",this.cacheProps=["domain","range","nice","tickCount","interval","minTickCount","maxTickCount"],this.year=lA,this.month=aA,this.week=sA,this.day=nA,this.hour=oA,this.minute=eA,this.second=QD,this.millisecond=HD,this.tickIntervals=[[this.second,1,UD],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,KD],[this.minute,5,3e5],[this.minute,15,9e5],[this.minute,30,18e5],[this.hour,1,YD],[this.hour,3,108e5],[this.hour,6,216e5],[this.hour,12,432e5],[this.day,1,XD],[this.day,2,1728e5],[this.week,1,$D],[this.week,2,12096e5],[this.week,3,18144e5],[this.month,1,qD],[this.month,2,5184e6],[this.month,3,7776e6],[this.month,4,10368e6],[this.month,6,15552e6],[this.year,1,ZD]]}toDomain(t){return new Date(t)}calculateDefaultTickFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=zP.YEAR;const i=t=>{t<e&&(e=t)};for(const a of t){i(this.getLowestGranularityFormat(a))}const o=UP(t[0]),n=UP(t[t.length-1]),r=new Date(o).getFullYear(),s=new Date(n).getFullYear()-r>0;return this.buildFormatString(e,s)}buildFormatString(t,e){let i=[HP[t]],o=0;const n=this.getDomain(),r=Math.min(...n.map(UP)),s=Math.max(...n.map(UP))-r;switch(t){case zP.SECOND:s/KD>1&&i.push(HP[zP.MINUTE]);case zP.MINUTE:s/YD>1&&i.push(HP[zP.HOUR]);case zP.HOUR:o=i.length,s/XD>1&&i.push(HP[zP.WEEK_DAY]);case zP.WEEK_DAY:if(s/$D>1||e){const t=i.indexOf(HP[zP.WEEK_DAY]);t>-1&&i.splice(t,1,HP[zP.SHORT_MONTH])}case zP.SHORT_MONTH:case zP.MONTH:(s/ZD>1||e)&&i.push(HP[zP.YEAR])}return o<i.length&&(i=[...i.slice(0,o),i.slice(o).join(" ")]),o>0&&(i=[...i.slice(0,o).reverse(),...i.slice(o)],o<i.length&&i.splice(o,0," ")),i.join("")}getLowestGranularityFormat(t){return this.second.floor(t)<t?zP.MILLISECOND:this.minute.floor(t)<t?zP.SECOND:this.hour.floor(t)<t?zP.MINUTE:this.day.floor(t)<t?zP.HOUR:this.month.floor(t)<t?this.week.floor(t)<t?zP.WEEK_DAY:zP.SHORT_MONTH:this.year.floor(t)<t?zP.MONTH:zP.YEAR}defaultTickFormat(t){const e=this.calculateDefaultTickFormat(t);return t=>YR(e)(t)}getTickInterval(t){let{start:e,stop:i,count:o,minCount:n,maxCount:r}=t;const{tickIntervals:s}=this;let a,l;const c=null!==o&&void 0!==o?o:fk.defaultTickCount,d=Math.abs(i-e)/Math.max(c,1);let u=0;for(;u<s.length&&d>s[u][2];)u++;if(0===u)l=Math.max(uk(e,i,c,n,r),1),a=this.millisecond;else if(u===s.length){l=uk(e/ZD,i/ZD,c,n,r),a=this.year}else{const t=d-s[u-1][2]<s[u][2]-d?u-1:u;[a,l]=s[t]}return a.every(l)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[t,e]=this.getDomain().map(UP);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:e});if(this.nice){const{tickCount:t}=this;if(2===t)return this.niceDomain;if(1===t)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:e})}getDefaultTicks(t){let{start:e,stop:i}=t;const o=this.getTickInterval({start:e,stop:i,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return o?o.range(new Date(e),new Date(i)):[]}getTicksForInterval(t){let{start:e,stop:i}=t;const{interval:o,tickIntervals:n}=this;if(!o)return[];if(o instanceof WD){const t=o.range(new Date(e),new Date(i));return this.isDenseInterval({start:e,stop:i,interval:o,count:t.length})?this.getDefaultTicks({start:e,stop:i}):t}const r=Math.abs(o);if(this.isDenseInterval({start:e,stop:i,interval:r}))return this.getDefaultTicks({start:e,stop:i});const s=[...n];s.reverse();const a=s.find((t=>r%t[2]===0));if(a){return a[0].every(r/(a[2]/a[1])).range(new Date(e),new Date(i))}let l=new Date(e);const c=new Date(i),d=[];for(;l<=c;)d.push(l),l=new Date(l),l.setMilliseconds(l.getMilliseconds()+r);return d}tickFormat(t){let{ticks:e,specifier:i}=t;return void 0==i?this.defaultTickFormat(e):YR(i)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,o]=this.niceDomain;if(UP(t)===UP(i)&&UP(e)===UP(o))break;t=i,e=o}}updateNiceDomainIteration(t,e){const i=UP(t),o=UP(e),{interval:n}=this;let r;if(n instanceof WD)r=n;else{const t="number"===typeof n?(o-i)/Math.max(n,1):this.tickCount;r=this.getTickInterval({start:i,stop:o,count:t,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(r){const i=r.range(t,e,!0),o=i[0],n=i[i.length-1];this.niceDomain=[o,n]}}}class YP{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;this.top=t,this.right=e,this.bottom=i,this.left=o}clear(){this.top=this.right=this.bottom=this.left=0}}dA([ZA(wT(0)),uA("design:type",Number)],YP.prototype,"top",void 0),dA([ZA(wT(0)),uA("design:type",Number)],YP.prototype,"right",void 0),dA([ZA(wT(0)),uA("design:type",Number)],YP.prototype,"bottom",void 0),dA([ZA(wT(0)),uA("design:type",Number)],YP.prototype,"left",void 0);var XP=Object.freeze({__proto__:null,extent:gA,normalisedExtent:function(t,e,i){return vA(t,e,i).extent},normalisedExtentWithMetadata:vA,toFixed:XA,isNumberEqual:UA,tickFormat:lk,interpolateString:$R,ticks:ck,tickStep:uk,range:pk,Color:qA,isString:Vk,isStringObject:jk,isDate:t=>t instanceof Date&&!isNaN(+t),isDiscrete:Wk,isContinuous:zk,checkDatum:Hk,isNumber:Uk,resetIds:function(){for(const t in nM)delete nM[t]},createId:rM,Padding:YP,jsonDiff:RA,DELETE:PA,jsonMerge:LA,jsonApply:function t(e,i){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n,r,s;const{path:a,matcherPath:l=(a?a.replace(/(\[[0-9+]+])/i,"[]"):void 0),skip:c=[],constructors:d={},constructedArrays:u=new WeakMap,allowedTypes:h={},idx:p}=o;if(null==e)throw new Error(`AG Charts - target is uninitialised: ${null!==a&&void 0!==a?a:"<root>"}`);if(null==i)return e;const f=e;null!=p&&"_declarationOrder"in f&&(f._declarationOrder=p);const g=FA(e);for(const y in i){const p=`${l?l+".":""}${y}`;if(c.indexOf(p)>=0)continue;const m=i[y],b=`${a?a+".":""}${y}`,S=f.constructor,x=f[y];let C=null!==(n=d[p])&&void 0!==n?n:d[y];try{const i=FA(x),n=FA(m);if(g===kA&&!(y in e)&&!Object.prototype.hasOwnProperty.call(f,y)){xA.warn(`unable to set [${b}] in ${null===S||void 0===S?void 0:S.name} - property is unknown`);continue}const a=null!==(r=h[p])&&void 0!==r?r:[i];if(i===kA&&"object"===n);else if(null!=i&&null!=n&&!a.includes(n)){xA.warn(`unable to set [${b}] in ${null===S||void 0===S?void 0:S.name} - can't apply type of [${n}], allowed types are: [${a}]`);continue}if("array"===n)if(C=null!==(s=null!==C&&void 0!==C?C:u.get(x))&&void 0!==s?s:d[`${p}[]`],null!=C){const e=m;f[y]=e.map(((e,i)=>t(new C,e,Object.assign(Object.assign({},o),{path:b,matcherPath:p+"[]",idx:i}))))}else f[y]=m;else n===kA?f[y]=m:"object"===n?null!=x?t(x,m,Object.assign(Object.assign({},o),{path:b,matcherPath:p,idx:void 0})):f[y]=null!=C?t(new C,m,Object.assign(Object.assign({},o),{path:b,matcherPath:p,idx:void 0})):m:f[y]=m}catch(v){xA.warn(`unable to set [${b}] in [${null===S||void 0===S?void 0:S.name}]; nested error is: ${v.message}`)}}return e},jsonWalk:_A,normalizeAngle360:BA,normalizeAngle360Inclusive:function(t){return t%=GA,(t+=GA)!==GA&&(t%=GA),t},normalizeAngle180:VA,toRadians:jA,toDegrees:function(t){return t/Math.PI*180},angleBetween:function(t,e){return t=BA(t),(e=BA(e))-t+(t>e?2*Math.PI:0)},zipObject:PM,clamp:HA,isEqual:UA,isNegative:KA,round:YA,mod:$A,sanitizeHtml:Bk,Logger:xA});function $P(t,e){return t.length===e.length&&t.every(((t,i)=>Number(t)===Number(e[i])))}function qP(t,e,i,o,n){let r=t.x;t.x<e?r=e:t.x>e+o&&(r=e+o);let s=t.y;t.y<i?s=i:t.y>i+n&&(s=i+n);const a=t.x-r,l=t.y-s;return Math.sqrt(a*a+l*l)<=.5*t.size}function ZP(t,e,i,o,n){const r=t.x+t.width>e&&t.x<e+o,s=t.y+t.height>i&&t.y<i+n;return r&&s}const JP=["stroke","lineDash"],QP=QA(eT(void 0,(t=>{for(const e in t)if(!JP.includes(e))return!1;return!0})),"expecting an Array of objects with gridline style properties such as 'stroke' and 'lineDash'");class tN{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}}function eN(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[void 0];return AA(((i,o,n)=>e.includes(n)?t:n))}dA([ZA(cT),uA("design:type",Object)],tN.prototype,"enabled",void 0),dA([ZA(wT(0)),uA("design:type",Number)],tN.prototype,"width",void 0),dA([ZA(QP),uA("design:type",Array)],tN.prototype,"style",void 0);class iN{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return CM(this)}}dA([ZA(cT),uA("design:type",Object)],iN.prototype,"enabled",void 0),dA([ZA(dT),uA("design:type",Boolean)],iN.prototype,"autoWrap",void 0),dA([ZA(ET(0)),uA("design:type",Number)],iN.prototype,"maxWidth",void 0),dA([ZA(ET(0)),uA("design:type",Number)],iN.prototype,"maxHeight",void 0),dA([ZA(NT),uA("design:type",String)],iN.prototype,"fontStyle",void 0),dA([ZA(_T),uA("design:type",String)],iN.prototype,"fontWeight",void 0),dA([ZA(wT(1)),uA("design:type",Number)],iN.prototype,"fontSize",void 0),dA([ZA(uT),uA("design:type",String)],iN.prototype,"fontFamily",void 0),dA([ZA(wT(0)),uA("design:type",Number)],iN.prototype,"padding",void 0),dA([ZA(OT()),eN(NaN),uA("design:type",Number)],iN.prototype,"minSpacing",void 0),dA([ZA(bT),uA("design:type",String)],iN.prototype,"color",void 0),dA([ZA(ET(-360,360)),uA("design:type",Number)],iN.prototype,"rotation",void 0),dA([ZA(cT),uA("design:type",Boolean)],iN.prototype,"avoidCollisions",void 0),dA([ZA(cT),uA("design:type",Boolean)],iN.prototype,"mirrored",void 0),dA([ZA(cT),uA("design:type",Boolean)],iN.prototype,"parallel",void 0),dA([ZA(hT),uA("design:type",String)],iN.prototype,"format",void 0);class oN{constructor(){this.enabled=!0,this.width=1,this.color=void 0}}dA([ZA(cT),uA("design:type",Object)],oN.prototype,"enabled",void 0),dA([ZA(wT(0)),uA("design:type",Number)],oN.prototype,"width",void 0),dA([ZA(bT),uA("design:type",String)],oN.prototype,"color",void 0);const nN=QA(((t,e)=>tT(t,e,((t,e)=>0!==t&&wT(0)(t,e)||t instanceof WD))),"expecting an optional non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'");class rN{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}}function sN(t){const e=Math.min(...t.range),i=Math.max(...t.range),o=Math.floor(e),n=Math.ceil(i);return{min:o,max:n,visible:o!==n}}dA([ZA(cT),uA("design:type",Object)],rN.prototype,"enabled",void 0),dA([ZA(wT(0)),uA("design:type",Number)],rN.prototype,"width",void 0),dA([ZA(wT(0)),uA("design:type",Number)],rN.prototype,"size",void 0),dA([ZA(bT),uA("design:type",String)],rN.prototype,"color",void 0),dA([ZA(nN),uA("design:type",Object)],rN.prototype,"interval",void 0),dA([ZA(iT()),uA("design:type",Array)],rN.prototype,"values",void 0),dA([ZA(oT(OT(1),rT("maxSpacing"))),eN(NaN),uA("design:type",Number)],rN.prototype,"minSpacing",void 0);const aN=2*Math.PI,lN=aN/2;function cN(t){const e=e=>{var i,o;const n=Math.min(...null!==(i=e.range)&&void 0!==i?i:[t.min]),r=Math.max(...null!==(o=e.range)&&void 0!==o?o:[t.max]),s=Math.round(e.translationY);return s<n||s>r},i=(t,i,o)=>{const n={translationY:Math.round(t.translationY),opacity:t.opacity};return o=((t,i,o)=>"removed"!==o&&e(t)?"removed":"added"!==o&&e(i)?"added":o)(i,t.datum,o),"added"===o&&(n.translationY=Math.round(i.translationY),n.opacity=0),Object.assign(Object.assign({},n),WM[o])},o=(t,e,i)=>{const o={translationY:Math.round(e.translationY),opacity:1};return"removed"===i&&(o.opacity=0),o};return{tick:{fromFn:i,toFn:o,intermediateFn:(t,i,o)=>({visible:!e(t)})},line:{fromFn:(t,e)=>{var i,o;return Object.assign(Object.assign({},null!==(o=null!==(i=t.previousDatum)&&void 0!==i?i:e)&&void 0!==o?o:{y:t.y,x1:t.x1,x2:t.x2}),WM.updated)},toFn:(t,e)=>Object.assign({},e)},label:{fromFn:(t,e,o)=>{var n;const r=null!==(n=t.previousDatum)&&void 0!==n?n:e;let s=r.rotation;return"added"!==o&&"removed"!==o||(s=e.rotation),Object.assign(Object.assign({},i(t,e,o)),{x:r.x,y:r.y,rotation:s,rotationCenterX:r.rotationCenterX})},toFn:(t,e,i)=>{var n,r;let s;var a,l;return"added"===i||"removed"===i?s=e.rotation:(a=null!==(r=null===(n=t.previousDatum)||void 0===n?void 0:n.rotation)&&void 0!==r?r:e.rotation,l=e.rotation,s=Math.abs(l-a)<lN?l:a>l?l+aN:l-aN),Object.assign(Object.assign({},o(0,e,i)),{x:e.x,y:e.y,rotation:s,rotationCenterX:e.rotationCenterX,finish:{rotation:e.rotation}})}},group:{fromFn:(t,e)=>{const{rotation:i,translationX:o,translationY:n}=t;return Object.assign({rotation:i,translationX:o,translationY:n},WM.updated)},toFn:(t,e)=>{const{rotation:i,translationX:o,translationY:n}=e;return{rotation:i,translationX:o,translationY:n}}}}}var dN,uN,hN;!function(t){t[t.TickLine=0]="TickLine",t[t.TickLabel=1]="TickLabel",t[t.GridLine=2]="GridLine",t[t.GridArc=3]="GridArc",t[t.AxisLine=4]="AxisLine"}(dN||(dN={})),function(t){t[t.CREATE=0]="CREATE",t[t.CREATE_SECONDARY=1]="CREATE_SECONDARY",t[t.FILTER=2]="FILTER",t[t.VALUES=3]="VALUES"}(uN||(uN={}));class pN{get type(){var t;return null!==(t=this.constructor.type)&&void 0!==t?t:""}set crossLines(t){var e,i;null===(e=this._crossLines)||void 0===e||e.forEach((t=>this.detachCrossLine(t))),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null===(i=this._crossLines)||void 0===i||i.forEach((t=>{this.attachCrossLine(t),this.initCrossLine(t)}))}get crossLines(){return this._crossLines}constructor(t,e){let i;this.moduleCtx=t,this.scale=e,this.id=rM(this),this.nice=!0,this.dataDomain={domain:[],clipped:!1},this.keys=[],this.boundSeries=[],this.includeInvisibleDomains=!1,this.axisGroup=new mk({name:`${this.id}-axis`,zIndex:dR.AXIS_ZINDEX}),this.lineNode=this.axisGroup.appendChild(new Sk),this.tickLineGroup=this.axisGroup.appendChild(new mk({name:`${this.id}-Axis-tick-lines`,zIndex:dR.AXIS_ZINDEX})),this.tickLabelGroup=this.axisGroup.appendChild(new mk({name:`${this.id}-Axis-tick-labels`,zIndex:dR.AXIS_ZINDEX})),this.crossLineGroup=new mk({name:`${this.id}-CrossLines`}),this.gridGroup=new mk({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new mk({name:`${this.id}-gridLines`,zIndex:dR.AXIS_GRID_ZINDEX})),this.tickLineGroupSelection=bk.select(this.tickLineGroup,Sk,!1),this.tickLabelGroupSelection=bk.select(this.tickLabelGroup,xM,!1),this.gridLineGroupSelection=bk.select(this.gridLineGroup,Sk,!1),this.line=new oN,this.tick=this.createTick(),this.gridLine=new tN,this.label=this.createLabel(),this.defaultTickMinSpacing=pN.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new kM,this._gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new gR(this),this.refreshScale(),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(t.interactionManager.addListener("hover",(t=>this.checkAxisHover(t)))),this.animationManager=t.animationManager,this.animationState=new hP("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()}},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes()}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines),this.destroyFns.push(t.layoutService.addListener("layout-complete",(t=>{null!=i&&null!=RA(t.chart,i)&&this.animationState.transition("resize"),i=Object.assign({},t.chart)}))),this.destroyFns.push(t.updateService.addListener("update-complete",(t=>{this.minRect=t.minRect})))}attachCrossLine(t){this.crossLineGroup.appendChild(t.group)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach((t=>t()))}refreshScale(){var t;this.range=this.scale.range.slice(),null===(t=this.crossLines)||void 0===t||t.forEach((t=>{this.initCrossLine(t)}))}updateRange(){var t;const{range:e,visibleRange:i,scale:o}=this,n=(e[1]-e[0])/(i[1]-i[0]),r=n*i[0],s=e[0]-r;o.range=[s,s+n],null===(t=this.crossLines)||void 0===t||t.forEach((t=>{t.clippedRange=[e[0],e[1]]}))}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=Math.min(...this.range),n=Math.max(...this.range);return t+e>=o-i&&t<=n+i}onLabelFormatChange(t,e){const{scale:i,fractionDigits:o}=this,n=!(i instanceof WP)&&o>0?t=>"number"===typeof t?t.toFixed(o):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch(r){this.labelFormatter=n,xA.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=n}setDomain(){var t;const{scale:e,dataDomain:{domain:i},tick:{values:o}}=this;if(o&&fk.is(e)){const[n,r]=null!==(t=gA(o))&&void 0!==t?t:[1/0,-1/0],s=Math.min(e.fromDomain(i[0]),n),a=Math.max(e.fromDomain(i[1]),r);e.domain=[e.toDomain(s),e.toDomain(a)]}else e.domain=i}setTickInterval(t){var e;this.scale.interval=null!==(e=this.tick.interval)&&void 0!==e?e:t}setTickCount(t,e,i){const{scale:o}=this;if(t&&fk.is(o))return"number"===typeof t?(o.tickCount=t,o.minTickCount=null!==e&&void 0!==e?e:0,void(o.maxTickCount=null!==i&&void 0!==i?i:1/0)):void(o instanceof KP&&this.setTickInterval(t))}set gridLength(t){var e;(this._gridLength&&!t||!this._gridLength&&t)&&this.gridLineGroupSelection.clear(),this._gridLength=t,null===(e=this.crossLines)||void 0===e||e.forEach((t=>{this.initCrossLine(t)}))}get gridLength(){return this._gridLength}createTick(){return new rN}createLabel(){return new iN}checkAxisHover(t){this.computeBBox().containsPoint(t.offsetX,t.offsetY)&&this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(t){if(!this.tickGenerationResult)return;const{rotation:e,parallelFlipRotation:i,regularFlipRotation:o}=this.calculateRotations(),n=this.label.getSideFlag();this.updatePosition();const r=this.getAxisLineCoordinates(),s=this.tickGenerationResult,{tickData:a,combinedRotation:l,textBaseline:c,textAlign:d}=s,u=cA(s,["tickData","combinedRotation","textBaseline","textAlign"]),h=this.tickLabelGroupSelection.nodes().map((t=>t.datum.tickId));if(this.updateSelections(r,a.ticks,{combinedRotation:l,textAlign:d,textBaseline:c,range:this.scale.range}),this.animationManager.isSkipped())this.resetSelectionNodes();else{const t=this.calculateUpdateDiff(h,a);this.animationState.transition("update",t)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(n),this.updateTickLines(),this.updateTitle({anyTickVisible:a.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:o}),this.updateLayoutState(),u.primaryTickCount}getAxisLineCoordinates(){const{range:[t,e]}=this;return{x:0,y1:Math.min(t,e),y2:Math.max(t,e)}}getTickLineCoordinates(t){const{tick:e,label:i}=this,o=i.getSideFlag()*e.size,n=Math.min(0,o);return{x1:n,x2:n+Math.abs(o),y:Math.round(t.translationY)}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:o,textBaseline:n,textAlign:r,range:s}=e,a=t.tickLabel,l=i.getSideFlag()*(this.tick.size+i.padding+this.seriesAreaPadding),c=""!==a&&void 0!=a;return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:o,rotationCenterX:l,text:a,textAlign:r,textBaseline:n,visible:c,x:l,y:0,range:s}}setTitleProps(t,e){var i;const{title:o}=this;if(o){if(t.color=o.color,t.fontFamily=o.fontFamily,t.fontSize=o.fontSize,t.fontStyle=o.fontStyle,t.fontWeight=o.fontWeight,t.enabled=o.enabled,t.wrapping=o.wrapping,o.enabled){const n=t.node,{tickSpace:r}=e,s=(null!==(i=o.spacing)&&void 0!==i?i:0)+r,a=this.label.getSideFlag(),l=BA(this.rotation),c=-1===a&&l>Math.PI&&l<2*Math.PI?-1:1,d=c*a*Math.PI/2,u=1===c?"bottom":"top",{range:h}=this,p=Math.floor(c*a*(h[0]+h[1])/2),f=-1===a?Math.floor(c*-s):Math.floor(-s),{callbackCache:g}=this.moduleCtx,{formatter:v=t=>t.defaultValue}=o,y=g.call(v,this.getTitleFormatterParams());n.setProperties({rotation:d,text:y,textBaseline:u,visible:!0,x:p,y:f})}}else t.enabled=!1}calculateLayout(t){var e;const{rotation:i,parallelFlipRotation:o,regularFlipRotation:n}=this.calculateRotations(),r=this.label.getSideFlag(),s=r*(this.tick.size+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:o,regularFlipRotation:n,labelX:s,sideFlag:r});const a=this.tickGenerationResult,{tickData:l,combinedRotation:c,textBaseline:d,textAlign:u}=a,h=cA(a,["tickData","combinedRotation","textBaseline","textAlign"]),p=[],{x:f,y1:g,y2:v}=this.getAxisLineCoordinates(),y=new aM(f,g,0,v-g);p.push(y);const{tick:m}=this;m.enabled&&l.ticks.forEach((t=>{const{x1:e,x2:i,y:o}=this.getTickLineCoordinates(t),n=new aM(e,o,i-e,0);p.push(n)}));const{label:b}=this;if(b.enabled){const t=new xM;l.ticks.forEach((e=>{const i=this.getTickLabelProps(e,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range});if(!i.visible)return;t.setProperties(Object.assign(Object.assign({},i),{translationY:Math.round(e.translationY)}));const o=t.computeTransformedBBox();o&&p.push(o)}))}const{title:S}=this;if(null===S||void 0===S?void 0:S.enabled){const t=new kM;let e=0;if(l.ticks.length>0){const t=aM.merge(p).width;isFinite(t)&&(e+=t)}this.setTitleProps(t,{tickSpace:e});const i=t.node.computeTransformedBBox();i&&p.push(i)}const x=(t=>{const e=new lM,{rotation:i,translationX:o,translationY:n,rotationCenterX:r,rotationCenterY:s}=this.getAxisTransform();return lM.updateTransformMatrix(e,1,1,i,o,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:s}),e.transformBBox(t)})(aM.merge(p)),C=this.isAnySeriesActive();return null===(e=this.crossLines)||void 0===e||e.forEach((t=>{var e;t.sideFlag=-r,t.direction=i===-Math.PI/2?QT.X:QT.Y,t instanceof VP&&(t.label.parallel=null!==(e=t.label.parallel)&&void 0!==e?e:this.label.parallel),t.parallelFlipRotation=o,t.regularFlipRotation=n,t.calculateLayout(C)})),this.updateLayoutState(),{primaryTickCount:t=h.primaryTickCount,bbox:x}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}updateScale(){this.updateRange(),this.calculateDomain(),this.setDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;fk.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=jA(this.rotation);return{rotation:t,parallelFlipRotation:BA(t),regularFlipRotation:BA(t-Math.PI/2)}}generateTicks(t){let{primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:o,labelX:n,sideFlag:r}=t;var s;const{scale:a,tick:l,label:{parallel:c,rotation:d,fontFamily:u,fontSize:h,fontStyle:p,fontWeight:f}}=this,g=void 0!==e,{defaultRotation:v,configuredRotation:y,parallelFlipFlag:m,regularFlipFlag:b}=aR({rotation:d,parallel:c,regularFlipRotation:o,parallelFlipRotation:i}),S=y+v,x=new lM,{maxTickCount:C}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!==(s=l.maxSpacing)&&void 0!==s?s:NaN}),w=!fk.is(a)||isNaN(C)?10:C;let E=lR(c,y,0,r,b);const O=function(t,e,i,o){return t&&!e?i*o===-1?"hanging":"bottom":"middle"}(c,y,r,m),D={fontFamily:u,fontSize:h,fontStyle:p,fontWeight:f,textBaseline:O,textAlign:E};let A={rawTicks:[],ticks:[],labelCount:0},T=0,M=0,k=!0,R=!1;for(;k&&T<=w&&!R;){M=0,E=lR(c,y,0,r,b);const t=this.getTickStrategies({secondaryAxis:g,index:T});for(const i of t){({tickData:A,index:T,autoRotation:M,terminate:R}=i({index:T,tickData:A,textProps:D,labelOverlap:k,terminate:R,primaryTickCount:e}));const t=0!==y||0!==M,o=S+M;E=lR(c,y,M,r,b),k=this.checkLabelOverlap(o,t,x,A.ticks,n,Object.assign(Object.assign({},D),{textAlign:E}))}}const P=v+y+M;return!g&&A.rawTicks.length>0&&(e=A.rawTicks.length),{tickData:A,primaryTickCount:e,combinedRotation:P,textBaseline:O,textAlign:E}}getTickStrategies(t){let{index:e,secondaryAxis:i}=t;const{scale:o,label:n,tick:r}=this,s=fk.is(o),a=n.enabled&&n.avoidCollisions,l=!s&&0!==e&&a,c=!0===n.autoRotate&&void 0===n.rotation,d=[];let u;u=this.tick.values?uN.VALUES:i?uN.CREATE_SECONDARY:l?uN.FILTER:uN.CREATE;if(d.push((t=>{let{index:e,tickData:i,primaryTickCount:o,terminate:n}=t;return this.createTickData(u,e,i,n,o)})),!s&&!isNaN(r.minSpacing)){const t=t=>{let{index:e,tickData:i,primaryTickCount:o,terminate:n}=t;return this.createTickData(uN.FILTER,e,i,n,o)};d.push(t)}if(!a)return d;if(n.autoWrap){const t=t=>{let{index:e,tickData:i,textProps:o}=t;return this.wrapLabels(i,e,o)};d.push(t)}else if(c){const t=t=>{let{index:e,tickData:i,labelOverlap:o,terminate:n}=t;return{index:e,tickData:i,autoRotation:this.getAutoRotation(o),terminate:n}};d.push(t)}return d}createTickData(t,e,i,o,n){var r;const{scale:s,tick:a}=this,{maxTickCount:l,minTickCount:c,defaultTickCount:d}=this.estimateTickCount({minSpacing:a.minSpacing,maxSpacing:null!==(r=a.maxSpacing)&&void 0!==r?r:NaN}),u=fk.is(s),h=!u||isNaN(l)?10:l;let p=u?Math.max(d-e,c):l;const f=void 0===a.interval&&void 0===a.values&&p>c&&(u||t===uN.FILTER);let g=!0;for(;g&&e<=h;){const o=i.rawTicks;p=u?Math.max(d-e,c):l;const{rawTicks:r,ticks:s,labelCount:a}=this.getTicks({tickGenerationType:t,previousTicks:o,tickCount:p,minTickCount:c,maxTickCount:l,primaryTickCount:n});i.rawTicks=r,i.ticks=s,i.labelCount=a,g=!!f&&$P(r,o),e++}const v=void 0!==a.interval||void 0!==a.values;return o||(o=v),{tickData:i,index:e,autoRotation:0,terminate:o}}checkLabelOverlap(t,e,i,o,n,r){lM.updateTransformMatrix(i,1,1,t,0,0);const s=this.createLabelData(o,n,r,i),a=function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e);return function(t,e){const i=[];for(let o=0;o<t.length;o++){const n=t[o],{point:{x:r,y:s},label:{text:a}}=n;let{label:{width:l,height:c}}=n;if(l+=null!==e&&void 0!==e?e:0,c+=null!==e&&void 0!==e?e:0,i.some((t=>ZP(t,r,s,l,c))))return!0;i.push({index:o,text:a,x:r,y:s,width:l,height:c,datum:n})}return!1}(s,a)}createLabelData(t,e,i,o){const n=[];for(const r of t){const{tickLabel:t,translationY:s}=r;if(""===t||void 0==t)continue;const a=AM(t),{width:l,height:c}=wM(a,e,s,i),d=cR(t,new aM(e,s,l,c),e,s,o);n.push(d)}return n}getAutoRotation(t){var e;return t?BA(jA(null!==(e=this.label.autoRotateAngle)&&void 0!==e?e:0)):0}getTicks(t){let{tickGenerationType:e,previousTicks:i,tickCount:o,minTickCount:n,maxTickCount:r,primaryTickCount:s}=t;var a;const{range:l,scale:c,visibleRange:d}=this;let u=[];switch(e){case uN.VALUES:u=this.tick.values;break;case uN.CREATE_SECONDARY:u=this.updateSecondaryAxisTicks(s);break;case uN.FILTER:u=this.filterTicks(i,o);break;default:u=this.createTicks(o,n,r)}this.onLabelFormatChange(u,this.label.format),this.fractionDigits=u.fractionDigits>=0?u.fractionDigits:0;const h=(null!==(a=c.bandwidth)&&void 0!==a?a:0)/2,p=[];let f=0;const g=new Map,v=Math.max(0,Math.floor(d[0]*u.length)),y=Math.min(u.length,Math.ceil(d[1]*u.length));for(let m=v;m<y;m++){const t=u[m],e=c.convert(t)+h;if(l.length>0&&!this.inRange(e,0,.001))continue;const i=this.formatTick(t,m);let o=i;if(g.has(o)){const t=g.get(o);g.set(o,t+1),o=`${o}_${t}`}else g.set(o,1);p.push({tick:t,tickId:o,tickLabel:i,translationY:e}),""!==i&&void 0!=i&&f++}return{rawTicks:u,ticks:p,labelCount:f}}filterTicks(t,e){var i;const o=!isNaN(this.tick.minSpacing)||!isNaN(null!==(i=this.tick.maxSpacing)&&void 0!==i?i:NaN)?Math.ceil(t.length/e):2;return t.filter(((t,e)=>e%o===0))}createTicks(t,e,i){var o,n,r;return this.setTickCount(t,e,i),null!==(r=null===(n=(o=this.scale).ticks)||void 0===n?void 0:n.call(o))&&void 0!==r?r:[]}estimateTickCount(t){let{minSpacing:e,maxSpacing:i}=t;const{minRect:o}=this,n=this.calculateRangeWithBleed(),r=Math.max(this.defaultTickMinSpacing,n/fk.defaultMaxTickCount);let s=!isNaN(i);isNaN(e)&&(e=r),isNaN(i)&&(i=n),e>i&&(e===r?e=i:i=e);const a=o?this.direction===QT.X?o.width:o.height:1;s&&(s=a<r);const l=HA(1,Math.floor(n/e),s?Math.floor(n/a):1/0),c=Math.min(l,Math.ceil(n/i));return{minTickCount:c,maxTickCount:l,defaultTickCount:HA(c,fk.defaultTickCount,l)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines(t){let{rotation:e,parallelFlipRotation:i,regularFlipRotation:o}=t;var n;const r=this.label.getSideFlag(),s=this.isAnySeriesActive();null===(n=this.crossLines)||void 0===n||n.forEach((t=>{var n;t.sideFlag=-r,t.direction=e===-Math.PI/2?QT.X:QT.Y,t instanceof VP&&(t.label.parallel=null!==(n=t.label.parallel)&&void 0!==n?n:this.label.parallel),t.parallelFlipRotation=i,t.regularFlipRotation=o,t.update(s)}))}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each((e=>{e.strokeWidth=t.width,e.stroke=t.color,e.x1=i*t.size,e.x2=0,e.y1=0,e.y2=0}))}calculateAvailableRange(){const{range:t}=this,e=Math.min(...t);return Math.max(...t)-e}calculateRangeWithBleed(){const{visibleRange:t}=this,e=1/(t[1]-t[0]);return YA(this.calculateAvailableRange()*e,2)}calculateDomain(){if(this.linkedTo)this.dataDomain=this.linkedTo.dataDomain;else{const t=this.boundSeries.filter((t=>this.includeInvisibleDomains||t.isEnabled())).flatMap((t=>t.getDomain(this.direction)));this.dataDomain=this.normaliseDataDomain(t)}}getAxisTransform(){return{rotation:jA(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:this.translation.x,translationY:this.translation.y}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:o,gridLineGroupSelection:n,gridPadding:r,gridLength:s}=this,{rotation:a}=this.calculateRotations(),l=this.label.getSideFlag(),c=Math.floor(o.x),d=Math.floor(o.y);t.setProperties({rotation:a,translationX:c,translationY:d}),e.datum=this.getAxisTransform(),i.setProperties({rotation:a,translationX:c,translationY:d}),n.each((t=>{t.x1=r,t.x2=-l*s+r,t.y=0}))}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],(t=>t.append(new Sk({tag:dN.GridLine}))),(t=>t.tickId)),this.tickLineGroupSelection.update(e,(t=>t.appendChild(new Sk({tag:dN.TickLine}))),(t=>t.tickId)),this.tickLabelGroupSelection.update(e.map((t=>this.getTickLabelProps(t,i))),(t=>t.appendChild(new xM({tag:dN.TickLabel}))),(t=>t.tickId))}updateAxisLine(){const{line:t}=this,e=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:e})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:o,gridLength:n}=this;0!==n&&0!==e.length&&this.gridLineGroupSelection.each(((r,s,a)=>{const{stroke:l,lineDash:c}=e[a%e.length];r.setProperties({x1:o,x2:-t*n+o,y:0,fill:void 0,stroke:l,strokeWidth:i,lineDash:c})}))}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each(((t,e)=>{t.setProperties(e,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])}))}wrapLabels(t,e,i){const{parallel:o,maxWidth:n,maxHeight:r}=this.label;let s=this.maxThickness,a=Math.round(this.calculateAvailableRange()/t.labelCount);return o&&([s,a]=[a,s]),t.ticks.forEach((t=>{t.tickLabel=xM.wrap(t.tickLabel,null!==n&&void 0!==n?n:s,null!==r&&void 0!==r?r:a,i,"hyphenate")})),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:o,lineNode:n,tickLineGroup:r,tickLabelGroup:s}=this;if(!i)return void(o.enabled=!1);let a=0;const{anyTickVisible:l}=t;if(i.enabled&&l){const t=mk.computeBBox([r,s,n]),i=0===e?t.width:t.height;Math.abs(i)<1/0&&(a+=i)}this.setTitleProps(o,{tickSpace:a})}formatTick(t,e){var i,o;const{label:n,labelFormatter:r,fractionDigits:s,moduleCtx:{callbackCache:a}}=this;if(n.formatter){const o=s>0?t:String(t);return null!==(i=a.call(n.formatter,{value:o,index:e,fractionDigits:s,formatter:r}))&&void 0!==i?i:o}return r&&null!==(o=a.call(r,t))&&void 0!==o?o:String(t)}formatDatum(t){return String(t)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some((t=>this.includeInvisibleDomains||t.isEnabled()))}clipTickLines(t,e,i,o){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new aM(t,e,i,o))}clipGrid(t,e,i,o){this.gridGroup.setClipRectInGroupCoordinateSpace(new aM(t,e,i,o))}calculatePadding(t,e){return[Math.abs(.01*t),Math.abs(.01*t)]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce(((t,e)=>{const i=e.getKeys(this.direction),o=e.getNames(this.direction);for(let n=0;n<i.length;n++)t.push({key:i[n],name:o[n]});return t}),[]);return{direction:this.direction,boundSeries:e,defaultValue:null===(t=this.title)||void 0===t?void 0:t.text}}normaliseDataDomain(t){return{domain:t,clipped:!1}}getLayoutState(){return Object.assign({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.tick.size},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){var t;return null!==(t=this.axisContext)&&void 0!==t||(this.axisContext=this.createAxisContext()),Object.assign(Object.assign({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:fk.is(this.scale),keys:()=>this.boundSeries.flatMap((t=>t.getKeys(this.direction))),scaleValueFormatter:t=>{var e,i;return null===(i=(e=this.scale).tickFormat)||void 0===i?void 0:i.call(e,{specifier:t})},scaleBandwidth:()=>{var t;return null!==(t=this.scale.bandwidth)&&void 0!==t?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null===(i=(e=this.scale).invert)||void 0===i?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,i=cN(sN(this));zM(this.id,"axis-group",e,[this.axisGroup],i.group),zM(this.id,"line",e,[this.lineNode],i.line),zM(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,((t,e)=>e.tickId),t),zM(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,((t,e)=>e.tickId),t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:o}=this,n=sN(this);cP([this.axisGroup],((t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY}))),cP([t,e],function(t){const{visible:e,min:i,max:o}=t;return(t,n)=>{const r=Math.round(n.translationY);return{translationY:r,opacity:1,visible:e&&r>=i&&r<=o}}}(n)),cP([i],((t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX}))),cP([o],((t,e)=>Object.assign({},e)))}calculateUpdateDiff(t,e){const i=new Set,o=new Set,n=Math.max(t.length,e.ticks.length);for(let r=0;r<n;r++){const n=e.ticks[r],s=t[r],a=null===n||void 0===n?void 0:n.tickId;s!==a&&(o.has(a)?o.delete(a):a&&i.add(a),i.has(s)?i.delete(s):s&&o.add(s))}return{changed:i.size>0||o.size>0,added:[...i.values()],removed:[...o.values()]}}}pN.defaultTickMinSpacing=50,dA([ZA(cT),uA("design:type",Boolean)],pN.prototype,"nice",void 0),dA([ZA(TT),uA("design:type",Array)],pN.prototype,"keys",void 0);class fN extends iN{constructor(){super(...arguments),this.autoRotateAngle=335}}dA([ZA(dT),uA("design:type",Boolean)],fN.prototype,"autoRotate",void 0),dA([ZA(wT(-360,360)),uA("design:type",Number)],fN.prototype,"autoRotateAngle",void 0);class gN extends pN{constructor(){super(...arguments),this.thickness=0,this.position="left"}get direction(){return["top","bottom"].includes(this.position)?QT.X:QT.Y}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){return this.updateDirection(),super.update(t)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return Object.assign(Object.assign({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){!function(t,e){var i;null===(i=CP.constructedArrays)||void 0===i||i.set(t,e)}(t,VP)}createLabel(){return new fN}}dA([ZA(wT(0)),uA("design:type",Number)],gN.prototype,"thickness",void 0),dA([ZA(zT),uA("design:type",String)],gN.prototype,"position",void 0);class vN extends gN{constructor(t){super(t,new zA),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const o of t){const t=o instanceof Date?o.getTime():o;i.has(t)||(i.add(t),e.push(o))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map((t=>{var e;return null===(e=t.getBandScalePadding)||void 0===e?void 0:e.call(t)})).filter((t=>null!=t));t.length>0&&(this.scale.paddingInner=Math.min(...t.map((t=>t.inner))),this.scale.paddingOuter=Math.max(...t.map((t=>t.outer))))}return super.calculateDomain()}}vN.className="CategoryAxis",vN.type="category",dA([ZA(wT(0,1)),uA("design:type",Number)],vN.prototype,"groupPaddingInner",void 0);class yN{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter(((t,e)=>e!==this.number)):[]}}function mN(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new yN;let o=0;return e&&t.forEach((t=>o=Math.max(o,t.labels.length))),t.forEach((t=>{if(e)for(;t.labels.length<o;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),o=i.length-1;i.forEach(((e,i)=>{const n=t.children,r=n.find((t=>t.label===e)),s=i!==o;if(r&&s)t=r;else{const i=new yN(e,t);i.number=n.length,n.push(i),s&&(t=i)}}))}(i,t)})),i}function bN(t,e,i){const o=i/(e.number-t.number);e.change-=o,e.shift+=i,t.change+=o,e.prelim+=i,e.mod+=i}function SN(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function xN(t,e){const i=t.children;if(i.length){let o=i[0];i.forEach((t=>{xN(t,e),o=function(t,e,i){const o=t.getLeftSibling();if(o){let n=t,r=t,s=o,a=r.getLeftmostSibling(),l=r.mod,c=n.mod,d=s.mod,u=a.mod;for(;s.nextRight()&&r.nextLeft();){s=s.nextRight(),r=r.nextLeft(),a=a.nextLeft(),n=n.nextRight(),n.ancestor=t;const o=s.prelim+d-(r.prelim+l)+i;o>0&&(bN(SN(s,t,e),t,o),l+=o,c+=o),d+=s.mod,l+=r.mod,u+=a.mod,c+=n.mod}s.nextRight()&&!n.nextRight()?(n.thread=s.nextRight(),n.mod+=d-c):(r.nextLeft()&&!a.nextLeft()&&(a.thread=r.nextLeft(),a.mod+=l-u),e=t)}return e}(t,o,e)})),function(t){const e=t.children;if(e){let t=0,i=0;for(let o=e.length-1;o>=0;o--){const n=e[o];n.prelim+=t,n.mod+=t,i+=n.change,t+=n.shift+i}}}(t);const n=(i[0].prelim+i[i.length-1].prelim)/2,r=t.getLeftSibling();r?(t.prelim=r.prelim+e,t.mod=t.prelim-n):t.prelim=n}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}class CN{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:o}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),o>this.bottom&&(this.bottom=o),o<this.top&&(this.top=o)}}function wN(t,e,i){t.x=t.prelim+e,t.y=t.depth,i.update(t),t.children.forEach((o=>wN(o,e+t.mod,i)))}function EN(t){const e=t.children;let i=0;e.forEach((t=>{EN(t),t.children.length?i+=t.leafCount:i++})),t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function ON(t){const e=new DN;return xN(t,1),wN(t,-t.prelim,e),EN(t),e}class DN{constructor(){this.dimensions=new CN,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,(t=>({x:t.x,y:t.y}))),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this.leafCount-1,s=this.depth,a=this.dimensions;let l=1,c=1;if(t>0&&r){const e=(a.right-a.left)/r;l=t/r/e,n&&(l=-l)}if(e>0&&s){const t=(a.bottom-a.top)/s;c=e/s/t}const d=new CN;this.nodes.forEach((t=>{t.screenX=t.x*l,t.screenY=t.y*c,d.update(t,(t=>({x:t.screenX,y:t.screenY})))}));const u=-d.left,h=-d.top;this.nodes.forEach((t=>{t.screenX+=u+i,t.screenY+=h+o}))}}class AN extends iN{constructor(){super(...arguments),this.grid=!1}}dA([ZA(cT),uA("design:type",Boolean)],AN.prototype,"grid",void 0);class TN extends gN{constructor(t){super(t,new zA),this.tickScale=new zA,this.line=new oN,this.label=new AN,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:o,tickScale:n,scale:r}=this;r.paddingOuter=.1,r.paddingInner=2*r.paddingOuter,this.range=r.range.slice(),this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=bk.select(o,Sk),this.axisLineSelection=bk.select(e,Sk),this.separatorSelection=bk.select(e,Sk),this.labelSelection=bk.select(i,xM)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,o=(t[1]-t[0])/(e[1]-e[0]),n=o*e[0],r=t[0]-n;this.tickScale.range=i.range=[r,r+o],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,o=this.tickTreeLayout,n=this.lineHeight;o&&o.resize(Math.abs(i[1]-i[0]),o.depth*n,(Math.min(i[0],i[1])||0)+(null!==(t=e.bandwidth)&&void 0!==t?t:0)/2,-o.depth*n,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}set gridLength(t){(this._gridLength&&!t||!this._gridLength&&t)&&(this.gridLineSelection.clear(),this.labelSelection.clear()),this._gridLength=t}get gridLength(){return this._gridLength}calculateDomain(){var t;const{direction:e}=this,i=[];let o;this.boundSeries.filter((t=>t.visible)).forEach((t=>{if(e===QT.X)if(void 0===o){const n=t.getDomain(e);i.push(n),o="number"===typeof n[0]}else o&&i.push(t.getDomain(e));else i.push(t.getDomain(e))}));const n=(new Array).concat(...i),r=null!==(t=gA(n))&&void 0!==t?t:n;this.dataDomain=this.normaliseDataDomain(r),this.scale.domain=this.dataDomain.domain}normaliseDataDomain(t){const e=t.filter(((t,e,i)=>i.indexOf(t)===e)),i=mN(e);this.tickTreeLayout=ON(i);const o=e.slice();return o.push(""),this.tickScale.domain=o,this.resizeTickTree(),{domain:e,clipped:!1}}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each(((t,e)=>{t.setProperties(e)}))}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each(((t,i)=>{t.x1=i.x1,t.x2=i.x2,t.y1=i.y,t.y2=i.y,t.visible=i.y>=e[0]-1e-7&&i.y<=e[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1}))}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each(((t,e)=>{t.setProperties(Object.assign(Object.assign({},e),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=e.x,t.x2=e.x,t.y1=e.y1,t.y2=e.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color}))}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:o,tickScale:n}=this,r=n.ticks(),s=i.getSideFlag(),a=this.gridLineSelection.update(t?r:[]);if(t){const{width:i,style:r}=e,l=r.length;a.each(((e,a,c)=>{const d=Math.round(n.convert(a));e.x1=0,e.x2=-s*t,e.y1=d,e.y2=d,e.visible=d>=o[0]&&d<=o[1];const{stroke:u,lineDash:h}=r[c%l];e.stroke=u,e.strokeWidth=i,e.lineDash=h,e.fill=void 0}))}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:o},range:n,title:r,title:{formatter:s=t=>t.defaultValue}={}}=this,a=t.range[0],l=t.range[1],c=Math.abs(l-a)/t.domain.length||0,d=jA(this.rotation),u=Math.abs(Math.cos(d))<1e-8,h=e.getSideFlag(),p=this.lineHeight,f=this.tickTreeLayout,g=t.ticks(),v=f?f.nodes:[],y=!!f&&f.depth>1,{defaultRotation:m,configuredRotation:b,parallelFlipFlag:S}=aR({rotation:e.rotation,parallel:i,regularFlipRotation:BA(d-Math.PI/2),parallelFlipRotation:BA(d)}),x=[],C=new Map;let w=0;const E=new xM,O=(t,i)=>{var a;if(E.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===S?"bottom":"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX}),0===i){if(!((null===r||void 0===r?void 0:r.enabled)&&g.length>0))return!1;const i=o.call(s,this.getTitleFormatterParams());E.setProperties({fill:r.color,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:i,textBaseline:"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX})}else{if(!(t.screenX>=n[0]&&t.screenX<=n[1]))return!1;e.formatter?E.text=null!==(a=o.call(e.formatter,{value:String(t.label),index:i}))&&void 0!==a?a:String(t.label):E.text=String(t.label)}return!0};v.forEach(((t,e)=>{if(O(t,e)){const t=E.computeTransformedBBox();t&&(C.set(e,t),t.width>w&&(w=t.width))}}));const D=h*e.padding,A=this.label.grid,T=[];v.forEach(((t,e)=>{let i=O(t,e);const o=e;E.x=D,E.rotationCenterX=D;const n=!t.children.length;if(n){E.rotation=b,E.textAlign="end",E.textBaseline="middle";const t=C.get(o);t&&t.height>c&&(i=!1,C.delete(o))}else{E.translationX-=w-p+this.label.padding;const e=t.leafCount*c,n=C.get(o);n&&n.width>e?(i=!1,C.delete(o)):E.rotation=u?m:-Math.PI/2}if(t.parent&&y){const e=n?t.screenX-c/2:t.screenX-t.leafCount*c/2;if(n)(t.number!==t.children.length-1||A)&&T.push({y:e,x1:0,x2:-w-2*this.label.padding});else{const i=-w-2*this.label.padding+t.screenY;T.push({y:e,x1:i+p,x2:i})}}let r;if(i){const t=E.computeTransformedBBox();t&&C.set(e,t),r=Object.assign(Object.assign({},{fill:(s=E).fill,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,rotation:s.rotation,rotationCenterX:s.rotationCenterX,rotationCenterY:s.rotationCenterY,text:s.text,textAlign:s.textAlign,textBaseline:s.textBaseline,translationX:s.translationX,translationY:s.translationY,visible:s.visible,x:s.x,y:s.y}),{visible:i})}else C.delete(e),r={visible:i};var s;x.push(r)}));let M=0;T.forEach((t=>M=Math.min(M,t.x2))),T.push({y:Math.max(a,l),x1:0,x2:M});const k=[],R=[];T.forEach((t=>{if(t.y>=n[0]-1e-7&&t.y<=n[1]+1e-7){const{x1:e,x2:i,y:o}=t,n=new aM(Math.min(e,i),o,Math.abs(e-i),0);R.push(n),k.push({x1:e,x2:i,y:o})}}));const P=[],N=[],L=f?f.depth+1:1;for(let I=0;I<L;I++){const t=g.length>0&&(0===I||A&&y),e=I>0?-w-2*this.label.padding-(I-1)*p:0,i=new aM(e,Math.min(...n),0,Math.abs(n[1]-n[0]));N.push(i),P.push({x:e,y1:n[0],y2:n[1],visible:t})}const _=(t=>{const e=new lM,{rotation:i,translationX:o,translationY:n,rotationCenterX:r,rotationCenterY:s}=this.getAxisTransform();return lM.updateTransformMatrix(e,1,1,i,o,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:r,rotationCenterY:s}),e.transformBBox(t)})(aM.merge([...C.values(),...R,...N]));return{bbox:_,tickLabelLayout:x,separatorLayout:k,axisLineLayout:P}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:o}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:o,primaryTickCount:void 0}}}TN.className="GroupedCategoryAxis",TN.type="grouped-category",dA([ZA(bT),uA("design:type",String)],TN.prototype,"labelColor",void 0);class MN{static isSupported(){return"undefined"!==typeof OffscreenCanvas&&null!=OffscreenCanvas.prototype.transferToImageBitmap}constructor(t){let{width:e=600,height:i=300,overrideDevicePixelRatio:o}=t;this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(e,i),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(o),this.resize(e,i)}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(t){let e=null!==t&&void 0!==t?t:window.devicePixelRatio;return fM()||(e=1),this._pixelRatio=e,gM.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:o,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),o.resetTransform(),this._width=t,this._height=e}}!function(t){t.SCENE="scene",t.SCENE_STATS="scene:stats",t.SCENE_STATS_VERBOSE="scene:stats:verbose",t.SCENE_DIRTY_TREE="scene:dirtyTree"}(hN||(hN={}));const kN="adv-composite",RN="dom-composite";class PN{constructor(t){var e;this.id=rM(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=EA.create(!0,hN.SCENE);const{document:i,window:o,mode:n=(null!==(e=CA("agChartsSceneRenderModel"))&&void 0!==e?e:kN),width:r,height:s,overrideDevicePixelRatio:a}=t;this.overrideDevicePixelRatio=a,this.opts={document:i,window:o,mode:n},this.canvas=new gM({document:i,window:o,width:r,height:s,overrideDevicePixelRatio:a})}set container(t){this.canvas.container=t}get container(){return this.canvas.container}download(t,e){this.canvas.download(t,e)}getDataURL(t){return this.canvas.getDataURL(t)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(t,e){t=Math.round(t),e=Math.round(e);const i=t<=0||e<=0,o=isNaN(t)||isNaN(e);return!(t===this.width&&e===this.height||o||i)&&(this.pendingSize=[t,e],this.markDirty(),!0)}addLayer(t){var e;const{mode:i}=this.opts;if(!["composite",RN,kN].includes(i))return;const{zIndex:o=this._nextZIndex++,name:n,zIndexSubOrder:r,getComputedOpacity:s,getVisibility:a}=t,{width:l,height:c,overrideDevicePixelRatio:d}=this,u=i===RN,h=i===kN&&MN.isSupported()?new MN({width:l,height:c,overrideDevicePixelRatio:d}):new gM({document:this.opts.document,window:this.opts.window,width:l,height:c,domLayer:u,zIndex:o,name:n,overrideDevicePixelRatio:d}),p={id:this._nextLayerId++,name:n,zIndex:o,zIndexSubOrder:r,canvas:h,getComputedOpacity:s,getVisibility:a};if(o>=this._nextZIndex&&(this._nextZIndex=o+1),this.layers.push(p),this.sortLayers(),u){const t=this.layers.map((t=>t.canvas)).filter((t=>t instanceof gM)),i=t.findIndex((t=>t===h));(null!==(e=t[i-1])&&void 0!==e?e:this.canvas).element.insertAdjacentElement("afterend",h.element)}return this.debug("Scene.addLayer() - layers",this.layers),p.canvas}removeLayer(t){const e=this.layers.findIndex((e=>e.canvas===t));e>=0&&(this.layers.splice(e,1),t.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(t,e,i){const o=this.layers.find((e=>e.canvas===t));o&&(o.zIndex=e,o.zIndexSubOrder=i,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort(((t,e)=>{var i,o;return yk([t.zIndex,...null!==(i=t.zIndexSubOrder)&&void 0!==i?i:[void 0,void 0],t.id],[e.zIndex,...null!==(o=e.zIndexSubOrder)&&void 0!==o?o:[void 0,void 0],e.id],vk)}))}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(t){var e,i=this;t!==this._root&&(null===(e=this._root)||void 0===e||e._setLayerManager(),this._root=t,t&&t._setLayerManager({addLayer:t=>this.addLayer(t),moveLayer:function(){return i.moveLayer(...arguments)},removeLayer:function(){return i.removeLayer(...arguments)},markDirty:()=>this.markDirty(),canvas:this.canvas,debug:EA.create(hN.SCENE)}),this.markDirty())}get root(){return this._root}strip(){const{layers:t}=this;for(const e of t)e.canvas.destroy(),delete e.canvas;t.splice(0,t.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(t){var e,i;return hA(this,void 0,void 0,(function*(){const{debugSplitTimes:o={start:performance.now()},extraDebugStats:n={}}=null!==t&&void 0!==t?t:{},{canvas:r,canvas:{context:s},root:a,layers:l,pendingSize:c,opts:{mode:d}}=this;if(c&&(this.canvas.resize(...c),this.layers.forEach((t=>t.canvas.resize(...c))),this.pendingSize=void 0),a&&!a.visible)return void(this._dirty=!1);if(a&&!this.dirty)return this.debug("Scene.render() - no-op",{redrawType:tM[a.dirty],tree:this.buildTree(a)}),void this.debugStats(o,s,void 0,n);const u={ctx:s,devicePixelRatio:null!==(e=this.canvas.pixelRatio)&&void 0!==e?e:1,forceRender:!0,resized:!!c,debugNodes:{}};EA.check(hN.SCENE_STATS_VERBOSE)&&(u.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let h=!1;if((!a||a.dirty>=tM.TRIVIAL)&&(h=!0,r.clear()),a){const{dirtyTree:t,paths:e}=this.buildDirtyTree(a);EA.create(hN.SCENE_DIRTY_TREE)("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}a&&h&&(this.debug("Scene.render() - before",{redrawType:tM[a.dirty],canvasCleared:h,tree:this.buildTree(a)}),a.visible&&(s.save(),a.render(u),s.restore())),o["\u270d\ufe0f"]=performance.now(),d!==RN&&l.length>0&&h&&(this.sortLayers(),s.save(),s.setTransform(1/r.pixelRatio,0,0,1/r.pixelRatio,0,0),l.forEach((t=>{let{canvas:{imageSource:e,enabled:i},getComputedOpacity:o,getVisibility:n}=t;i&&n()&&(s.globalAlpha=o(),s.drawImage(e,0,0))})),s.restore(),o["\u26d9"]=performance.now()),null===(i=s.verifyDepthZero)||void 0===i||i.call(s),this._dirty=!1,this.debugStats(o,s,u.stats,n),this.debugSceneNodeHighlight(s,u.debugNodes),a&&this.debug("Scene.render() - after",{redrawType:tM[a.dirty],canvasCleared:h,tree:this.buildTree(a)})}))}debugStats(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(EA.check(hN.SCENE_STATS,hN.SCENE_STATS_VERBOSE)){const n=performance.now(),r=t.start;t.end=performance.now();const s=(t,e)=>{const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`},a=(t,e,i)=>`${t}: ${Math.round(100*(i-e))/100}ms`,{layersRendered:l=0,layersSkipped:c=0,nodesRendered:d=0,nodesSkipped:u=0}=null!==i&&void 0!==i?i:{};let h=0;const p=Object.entries(t).filter((t=>{let[e]=t;return"end"!==e})).map(((t,e)=>{let[i,o]=t;const n=e>0?a(i,h,o):null;return h=o,n})).filter((t=>null!=t)).join(" + "),f=Object.entries(o).map((t=>{let[e,i]=t;return`${e}: ${i}`})).join(" ; "),g=EA.check(hN.SCENE_STATS_VERBOSE),v=[`${a("\u23f1\ufe0f",r,n)} (${p})`,`${f}`,`Layers: ${g?s(l,c):this.layers.length}`,g?`Nodes: ${s(d,u)}`:null].filter((t=>null!=t)).map((t=>[t,gM.getTextSize(t,e.font)])),y=Math.max(...v.map((t=>{let[,{width:e}]=t;return e}))),m=v.reduce(((t,e)=>{let[,{height:i}]=e;return t+i}),0);e.save(),e.fillStyle="white",e.fillRect(0,0,y,m),e.fillStyle="black";let b=0;for(const[t,i]of v)b+=i.height,e.fillText(t,2,b);e.restore()}}debugSceneNodeHighlight(t,e){var i;const o=t=>e=>!!t.test(e.id)||e instanceof mk&&null!=e.name&&t.test(e.name),n=t=>e=>t===e.id||e instanceof mk&&null!=e.name&&t===e.name,r=mA(CA("agChartsSceneDebug")).flatMap((t=>"layout"===t?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:t));for(const s of r){if("string"===typeof s&&null!=e[s])continue;const t="string"===typeof s?n(s):o(s),r=null===(i=this.root)||void 0===i?void 0:i.findNodes(t);if(r&&0!==r.length)for(const i of r)i instanceof mk&&i.name?e[i.name]=i:e[i.id]=i;else xA.log(`Scene.render() - no debugging node with id [${s}] in scene graph.`)}t.save();for(const[s,a]of Object.entries(e)){const e=a.computeTransformedBBox();e?(t.globalAlpha=.8,t.strokeStyle="red",t.lineWidth=1,t.strokeRect(e.x,e.y,e.width,e.height),t.fillStyle="red",t.strokeStyle="white",t.font="16px sans-serif",t.textBaseline="top",t.textAlign="left",t.lineWidth=2,t.strokeText(s,e.x,e.y,e.width),t.fillText(s,e.x,e.y,e.width)):xA.log(`Scene.render() - no bbox for debugged node [${s}].`)}t.restore()}buildTree(t){var e,i;const o=null!==(e=t instanceof mk?t.name:null)&&void 0!==e?e:t.id;return Object.assign(Object.assign({name:o,node:t,dirty:tM[t.dirty]},(null===(i=t.parent)||void 0===i?void 0:i.isVirtual)?{virtualParentDirty:tM[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map((t=>this.buildTree(t))).reduce(((t,e)=>{let{name:i}=e;const{node:{visible:o,opacity:n,zIndex:r,zIndexSubOrder:s},node:a,virtualParent:l}=e;(!o||n<=0)&&(i=`(${i})`),a instanceof mk&&a.isLayer()&&(i=`*${i}*`);const c=[`${null!==i&&void 0!==i?i:"<unknown>"}`,`z: ${r}`,s&&`zo: ${s.map((t=>"function"===typeof t?`${t()} (fn)`:t)).join(" / ")}`,l&&"(virtual parent)"].filter((t=>!!t)).join(" ");let d=c,u=1;for(;null!=t[d]&&u<100;)d=`${c} (${u++})`;return t[d]=e,t}),{}))}buildDirtyTree(t){var e;if(t.dirty===tM.NONE)return{dirtyTree:{},paths:[]};const i=t.children.map((t=>this.buildDirtyTree(t))).filter((t=>t.paths.length>0)),o=null!==(e=t instanceof mk?t.name:null)&&void 0!==e?e:t.id,n=0===i.length?[o]:i.map((t=>t.paths)).reduce(((t,e)=>t.concat(e)),[]).map((t=>`${o}.${t}`));return{dirtyTree:Object.assign({name:o,node:t,dirty:tM[t.dirty]},i.map((t=>t.dirtyTree)).filter((t=>void 0!==t.dirty)).reduce(((t,e)=>{var i;return t[null!==(i=e.name)&&void 0!==i?i:"<unknown>"]=e,t}),{})),paths:n}}}function NN(t){return new Promise((e=>{setTimeout((()=>e(void 0)),t)}))}PN.className="Scene";class LN{constructor(){this.cache=new WeakMap}call(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];let n,r=this.cache.get(t);const s=()=>{try{const e=t(...i);return r&&null!=n&&r.set(n,e),e}catch(e){return void xA.warnOnce("User callback errored, ignoring",e)}};try{n=JSON.stringify(i)}catch(a){return s()}return null==r&&(r=new Map,this.cache.set(t,r)),r.has(n)?r.get(n):s()}invalidateCache(){this.cache=new WeakMap}}class _N{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise((e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext()}))}acquireImmediately(t){return hA(this,void 0,void 0,(function*(){return!!this.available&&(yield this.acquire(t),!0)}))}waitForClearAcquireQueue(){return hA(this,void 0,void 0,(function*(){return this.acquire((()=>hA(this,void 0,void 0,(function*(){}))))}))}dispatchNext(){var t,e;return hA(this,void 0,void 0,(function*(){this.available=!1;let[i,o]=null!==(t=this.acquireQueue.shift())&&void 0!==t?t:[];for(;i;){try{yield i(),null===o||void 0===o||o()}catch(n){xA.error("mutex callback error",n),null===o||void 0===o||o()}[i,o]=null!==(e=this.acquireQueue.shift())&&void 0!==e?e:[]}this.available=!0}))}}function IN(t,e){let i,o,n=0,r=!1;const s=()=>r,a=()=>{r=!1,null===o||void 0===o||o(),o=void 0,i=void 0,n>0&&t(l)},l=()=>{const t=n;n=0,r=!0;const i=e({count:t});i?i.then(a).catch(a):a()};return{schedule(e){0!==n||s()||t(l,e),n++},await(){return hA(this,void 0,void 0,(function*(){if(s())for(null==i&&(i=new Promise((t=>{o=t})));s();)yield i}))}}}class FN{static init(t){if("undefined"!==typeof ResizeObserver)this.resizeObserver=new ResizeObserver((t=>{for(const e of t){const{width:t,height:i}=e.contentRect;this.checkSize(this.elements.get(e.target),e.target,t,i)}}));else{const t=()=>{this.elements.forEach(((t,e)=>{this.checkClientSize(e,t)}))};this.pollerHandler=window.setInterval(t,100)}this.ready=!0,this.documentReady="loading"!==t.readyState,this.documentReady||(this.readyEventFn=()=>{const e="loading"!==t.readyState,i=this.documentReady;if(this.documentReady=e,e&&e!==i){for(const[t,e]of this.queuedObserveRequests)this.observe(t,e);this.queuedObserveRequests.length=0}},t.addEventListener("DOMContentLoaded",this.readyEventFn))}static destroy(){var t;null!=this.pollerHandler&&(clearInterval(this.pollerHandler),this.pollerHandler=void 0),this.readyEventFn&&(document.removeEventListener("DOMContentLoaded",this.readyEventFn),this.readyEventFn=void 0),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.resizeObserver=void 0,this.ready=!1}static checkSize(t,e,i,o){t&&(t.size&&i===t.size.width&&o===t.size.height||(t.size={width:i,height:o},t.cb(t.size,e)))}static observe(t,e){this.ready||this.init(t.ownerDocument),this.documentReady?(this.unobserve(t,!1),this.resizeObserver&&this.resizeObserver.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}static unobserve(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.resizeObserver&&this.resizeObserver.unobserve(t),this.elements.delete(t),this.queuedObserveRequests=this.queuedObserveRequests.filter((e=>{let[i]=e;return i===t})),e&&0===this.elements.size&&this.destroy()}static checkClientSize(t,e){const i=t.clientWidth?t.clientWidth:0,o=t.clientHeight?t.clientHeight:0;this.checkSize(e,t,i,o)}}FN.elements=new Map,FN.ready=!1,FN.documentReady=!1,FN.queuedObserveRequests=[];class GN{constructor(){this.range="tooltip"}}var BN;dA([ZA(MT("tooltip","node")),uA("design:type",String)],GN.prototype,"range",void 0),function(t){t[t.FULL=0]="FULL",t[t.PROCESS_DATA=1]="PROCESS_DATA",t[t.PERFORM_LAYOUT=2]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=3]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=4]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=5]="SCENE_RENDER",t[t.NONE=6]="NONE"}(BN||(BN={}));class VN{constructor(t){this.type=t,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(t){"discrete"===this.type?this.discreteDomain.add(t):"continuous"===this.type&&(this.continuousDomain[0]>t&&(this.continuousDomain[0]=t),this.continuousDomain[1]<t&&(this.continuousDomain[1]=t))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}}function jN(t){return t.map((t=>null==t||"number"===typeof t||"string"===typeof t||"boolean"===typeof t?t:"object"===typeof t?JSON.stringify(t):t)).join("-")}function WN(t){const e=1e4;return Number.isInteger(t)?t:Math.abs(t)>e?Math.trunc(t):Math.round(t*e)/e}function zN(t,e){var i;const o=function(t){if(void 0===t)return[];let[e,i]=t;return e=+e,i=+i,0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0&&(e=0),i===-1/0&&(i=0),Uk(e)&&Uk(i)?[e,i]:[])}(t);if(0===o.length)return o;let[n,r]=o;if(n===r){const[t,o]=null!==(i=null===e||void 0===e?void 0:e.calculatePadding(n,r))&&void 0!==i?i:[1,1];n-=t,r+=o}return[n,r]}const HN=Symbol("invalid");class UN{constructor(t){const{props:e,mode:i="standalone"}=t;this.mode=i;let o=!0;for(const s of e){if("key"===s.type&&!o)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===s.type&&o&&(o=!1)}this.opts=Object.assign({dataVisible:!0},t),this.keys=e.filter((t=>"key"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:0}))),this.values=e.filter((t=>"value"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e,missing:0}))),this.aggregates=e.filter((t=>"aggregate"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))),this.groupProcessors=e.filter((t=>"group-value-processor"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))),this.propertyProcessors=e.filter((t=>"property-value-processor"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))),this.reducers=e.filter((t=>"reducer"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e}))),this.processors=e.filter((t=>"processor"===t.type)).map(((t,e)=>Object.assign(Object.assign({},t),{index:e})));for(const s of this.values)if(null==s.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(s)}`);const n=t=>{let{matchGroupIds:e}=t;for(const i of null!==e&&void 0!==e?e:[])if(!this.values.some((t=>t.groupId===i)))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${i}).`)},r=t=>{let{matchIds:e}=t;for(const i of null!==e&&void 0!==e?e:[])if(!this.values.some((t=>{var e;return null===(e=t.ids)||void 0===e?void 0:e.some((t=>{let[e,o]=t;return e===i[0]&&o===i[1]}))})))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${i}).`)};for(const s of[...this.groupProcessors,...this.aggregates])r(s),n(s)}resolveProcessedDataIndexById(t,e){var i;const{index:o,def:n}=null!==(i=this.resolveProcessedDataDefById(t,e))&&void 0!==i?i:{};return{index:o,def:n}}resolveProcessedDataIndicesById(t,e){return this.resolveProcessedDataDefsById(t,e).map((t=>{let{index:e,def:i}=t;return{index:e,def:i}}))}resolveProcessedDataDefById(t,e){return this.resolveProcessedDataDefsById(t,e)[0]}resolveProcessedDataDefsByIds(t,e){const i=[];for(const o of e)i.push([o,this.resolveProcessedDataDefsById(t,o)]);return i}resolveProcessedDataDefsValues(t,e){let{keys:i,values:o}=e;const n={};for(const[r,[{index:s,def:a}]]of t){const t="key"===a.type?i:o;n[r]=t[s]}return n}resolveProcessedDataDefsById(t,e){const{keys:i,values:o,aggregates:n,groupProcessors:r,reducers:s}=this,a=i=>{const{ids:o,scopes:n}=i;return null!=o&&(!(null!=t&&!(null===n||void 0===n?void 0:n.some((e=>e===t.id))))&&o.some((i=>{let[o,n]=i;return o===t.id&&("string"===typeof e?n===e:e.test(n))})))},l=[i,o,n,r,s],c=[];for(const d of l)c.push(...d.filter(a).map((t=>({index:t.index,def:t}))));if(c.length>0)return c;throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`)}getDomain(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",o=arguments.length>3?arguments[3]:void 0;var n,r,s,a;let l,c;try{l=this.resolveProcessedDataIndicesById(t,e)}catch(h){if("string"!==typeof e&&/didn't find property definition/.test(h.message))return[];throw h}switch(i){case"key":c="keys";break;case"value":c="values";break;case"aggregate":c="aggValues";break;case"group-value-processor":c="groups";break;default:return[]}const d=null!==(r=null===(n=o.domain[c])||void 0===n?void 0:n[l[0].index])&&void 0!==r?r:[];if(1===l.length)return d;const u=[...d];for(const p of l.slice(1))mR(null!==(a=null===(s=o.domain[c])||void 0===s?void 0:s[p.index])&&void 0!==a?a:[],u);return u}processData(t){const{opts:{groupByKeys:e,groupByFn:i},aggregates:o,groupProcessors:n,reducers:r,processors:s,propertyProcessors:a}=this,l=performance.now();for(const u of[...this.keys,...this.values])u.missing=0;if(e&&0===this.keys.length)return;let c=this.extractData(t);e?c=this.groupData(c):i&&(c=this.groupData(c,i(c))),n.length>0&&this.postProcessGroups(c),o.length>0&&this.aggregateData(c),a.length>0&&this.postProcessProperties(c),r.length>0&&this.reduceData(c),s.length>0&&this.postProcessData(c);for(const u of[...this.keys,...this.values])t.length>0&&u.missing>=t.length&&xA.warnOnce(`the key '${u.property}' was not found in any data element.`);const d=performance.now();return c.time=d-l,EA.check(!0,"data-model")&&function(t){var e,i;const o=(t,e)=>{e.length>0&&(xA.log(`DataModel.processData() - ${t}`),xA.table(e))};if(xA.log("DataModel.processData() - processedData",t),o("Key Domains",t.domain.keys),o("Group Domains",null!==(e=t.domain.groups)&&void 0!==e?e:[]),o("Value Domains",t.domain.values),o("Aggregate Domains",null!==(i=t.domain.aggValues)&&void 0!==i?i:[]),"grouped"===t.type){const e=t.data.reduce(((t,e)=>{var i,o;const n=null!==(i=e.keys)&&void 0!==i?i:[],r=null!==(o=e.aggValues)&&void 0!==o?o:[],s=e.keys.map((()=>{})),a=null===r||void 0===r?void 0:r.map((()=>{}));return t.push(...e.values.map(((t,e)=>[...0===e?n:s,...null!==t&&void 0!==t?t:[],...0==e?r:a]))),t}),[]);o("Values",e)}else{const e=t.data.reduce(((t,e)=>{var i;const o=null!==(i=e.aggValues)&&void 0!==i?i:[];return t.push([...e.keys,...e.values,...o]),t}),[]);o("Values",e)}}(c),c}valueGroupIdxLookup(t){let{matchGroupIds:e,matchIds:i}=t;return this.values.map(((t,e)=>({def:t,index:e}))).filter((t=>{let{def:o}=t;return!(e&&(null==o.groupId||!e.includes(o.groupId)))&&(!i||null!=o.ids&&i.some((t=>{let[e,i]=t;var n;return null===(n=o.ids)||void 0===n?void 0:n.some((t=>{let[o,n]=t;return o===e&&n===i}))})))})).map((t=>{let{index:e}=t;return e}))}valueIdxLookup(t,e){const i=null==t||0===t.length,o=e=>{if(null==e)return!0;const o=null==e||0===e.length;return i===o||(null===e||void 0===e?void 0:e.some((e=>t.includes(e))))},n="string"===typeof e?e:e.id,r=this.values.findIndex((t=>{var e;return o(t.scopes)&&((null===(e=t.ids)||void 0===e?void 0:e.some((t=>(t=>{let[e,i]=t;return o([e])&&i===n})(t))))||t.property===n||t.id===n)}));if(r>=0)return r;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`)}extractData(t){var e;const{keys:i,values:o,opts:{dataVisible:n}}=this,{dataDomain:r,processValue:s,scopes:a,allScopesHaveSameDefs:l}=this.initDataDomainProcessor(),c=new Array(n?t.length:0);let d=0,u=0;for(const p of t){const t=a.size>0?new Set(a):void 0,r=n?new Array(i.length):void 0;let h,f=0;for(const e of i){if(h=s(e,p,h),h===HN)break;r&&(r[f++]=h)}if(h===HN)continue;const g=n&&o.length>0?new Array(o.length):void 0;let v,y=0;for(const i of o)if(v=s(i,p,v),v===HN){if(l)break;for(const o of null!==(e=i.scopes)&&void 0!==e?e:a)null===t||void 0===t||t.delete(o);if(y++,0===(null===t||void 0===t?void 0:t.size))break}else g&&(g[y++]=v);if((v!==HN||!l)&&(0!==(null===t||void 0===t?void 0:t.size)&&n)){const e={datum:p,keys:r,values:g};!l&&t&&t.size<a.size&&(u++,e.validScopes=[...t]),c[d++]=e}}c.length=d;const h=t=>{const e=r.get(t).getDomain();return Array.isArray(e)&&e[0]>e[1]?[]:[...e]};return{type:"ungrouped",input:{count:t.length},data:c,domain:{keys:i.map((t=>h(t))),values:o.map((t=>h(t)))},defs:{allScopesHaveSameDefs:l,keys:i,values:o},partialValidDataCount:u,time:0}}groupData(t,e){var i,o,n,r;const s=new Map;for(const d of t.data){const{keys:t,values:a,datum:l,validScopes:c}=d,u=e?e(d):t,h=jN(u);if(s.has(h)){const t=s.get(h);if(t.values.push(a),t.datum.push(l),null!=c)for(let e=0;e<(null!==(o=null===(i=t.validScopes)||void 0===i?void 0:i.length)&&void 0!==o?o:0);e++){const i=null===(n=t.validScopes)||void 0===n?void 0:n[e];c.some((t=>t===i))||(null===(r=t.validScopes)||void 0===r||r.splice(e,1))}}else s.set(h,{keys:u,values:[a],datum:[l],validScopes:c})}const a=new Array(s.size),l=new Array(s.size);let c=0;for(const[,{keys:d,values:u,datum:h,validScopes:p}]of s.entries())0!==(null===p||void 0===p?void 0:p.length)&&(l[c]=d,a[c++]={keys:d,values:u,datum:h,validScopes:p});return Object.assign(Object.assign({},t),{type:"grouped",data:a,domain:Object.assign(Object.assign({},t.domain),{groups:l})})}aggregateData(t){var e,i,o,n,r,s,a,l;const{aggregates:c}=this;if(!c)return;const d=c.map((()=>[1/0,-1/0])),u=c.map((t=>this.valueGroupIdxLookup(t))),h=c.map((t=>t.aggregateFunction)),p=c.map((t=>t.groupAggregateFunction)),f=c.map((t=>t.finalFunction));for(const g of t.data){let{values:v}=g;const{validScopes:y}=g;null!==(e=g.aggValues)&&void 0!==e||(g.aggValues=new Array(u.length)),"ungrouped"===t.type&&(v=[v]);let m=0;for(const t of u){const e=null===(i=null===y||void 0===y?void 0:y.some((t=>{var e;return null===(e=c[m].matchScopes)||void 0===e?void 0:e.some((e=>t===e))})))||void 0===i||i;if(!e){m++;continue}let u=null!==(n=null===(o=p[m])||void 0===o?void 0:o.call(p))&&void 0!==n?n:mR([]);for(const i of v){const e=t.map((t=>i[t])),o=h[m](e,g.keys);o&&(u=null!==(s=null===(r=p[m])||void 0===r?void 0:r.call(p,o,u))&&void 0!==s?s:mR(o,u))}const b=(null!==(l=null===(a=f[m])||void 0===a?void 0:a.call(f,u))&&void 0!==l?l:u).map((t=>WN(t)));mR(b,d[m]),g.aggValues[m++]=b}}t.domain.aggValues=d}postProcessGroups(t){var e,i,o,n,r;const{groupProcessors:s}=this;if(!s)return;const a=new Set,l=new Map,c=new Map,d=new Map;for(const h of s){const t=this.valueGroupIdxLookup(h);c.set(h,t),d.set(h,h.adjust());for(const e of t){const t=this.values[e];a.add(e),l.set(e,new VN("category"===t.valueType?"discrete":"continuous"))}}const u=t=>{var e;for(const i of a)null===(e=l.get(i))||void 0===e||e.extend(t[i])};for(const h of t.data){for(const a of s){if(!(null===(i=null===(e=h.validScopes)||void 0===e?void 0:e.some((t=>{var e;return null===(e=a.matchScopes)||void 0===e?void 0:e.some((e=>t===e))})))||void 0===i||i))continue;const s=null!==(o=c.get(a))&&void 0!==o?o:[],l=null!==(r=null===(n=d.get(a))||void 0===n?void 0:n())&&void 0!==r?r:()=>{};if("grouped"!==t.type)h.values&&l(h.values,s);else for(const t of h.values)t&&l(t,s)}if("grouped"===t.type)for(const t of h.values)u(t);else u(h.values)}for(const[h,p]of l)t.domain.values[h]=[...p.getDomain()]}postProcessProperties(t){const{propertyProcessors:e}=this;if(e)for(const{adjust:i,property:o,scopes:n}of e)i()(t,this.valueIdxLookup(null!==n&&void 0!==n?n:[],o))}reduceData(t){var e,i,o;const{reducers:n}=this,r=n.map((t=>t.scopes)),s=n.map((t=>t.reducer())),a=n.map((t=>t.initialValue));for(const l of t.data){let t=0;for(const o of s){null===(i=null===(e=l.validScopes)||void 0===e?void 0:e.some((e=>{var i;return null===(i=r[t])||void 0===i?void 0:i.some((t=>e===t))})))||void 0===i||i?(a[t]=o(a[t],l),t++):t++}}for(let l=0;l<a.length;l++)null!==(o=t.reduced)&&void 0!==o||(t.reduced={}),t.reduced[n[l].property]=a[l]}postProcessData(t){var e;const{processors:i}=this;for(const o of i)null!==(e=t.reduced)&&void 0!==e||(t.reduced={}),t.reduced[o.property]=o.calculate(t)}initDataDomainProcessor(){var t;const{keys:e,values:i}=this,o=new Set;for(const u of i)for(const e of null!==(t=u.scopes)&&void 0!==t?t:[])o.add(e);const n=o.size,r=new Map,s=new Map;let a=!0;const l=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;var o;"category"===e?i.set(t,new VN("discrete")):(i.set(t,new VN("continuous")),a&&(a=(null!==(o=t.scopes)&&void 0!==o?o:[]).length===n))},c=()=>{e.forEach((t=>l(t,t.valueType))),i.forEach((t=>l(t,t.valueType)))};c();const d=this.buildAccessors(...e,...i);return{dataDomain:r,processValue:(t,e,i)=>{var o,n,a,l;let u,h=!1;if(t.property in d){try{u=d[t.property](e)}catch(p){}h=void 0!==u}else h=t.property in e,u=h?e[t.property]:t.missingValue;if(null!=t.forceValue){u=h&&KA(u)?-1*t.forceValue:t.forceValue,h=!0}if(h||"missingValue"in t||t.missing++,r.has(t)||c(),h){if(!(null===(n=null===(o=t.validation)||void 0===o?void 0:o.call(t,u,e))||void 0===n||n)){if(!("invalidValue"in t))return HN;u=t.invalidValue}}return t.processor&&(s.has(t)||s.set(t,t.processor()),u=null===(a=s.get(t))||void 0===a?void 0:a(u,i!==HN?i:void 0)),null===(l=r.get(t))||void 0===l||l.extend(u),u},initDataDomain:c,scopes:o,allScopesHaveSameDefs:a}}buildAccessors(){const t={};if("integrated"===this.mode)return t;for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];for(const n of i){if(!(n.property.indexOf(".")>=0||n.property.indexOf("[")>=0))continue;let e;e=n.property.startsWith("[")?`return datum${n.property};`:`return datum.${n.property};`,t[n.property]=new Function("datum",e)}return t}}class KN{constructor(t){this.mode=t,this.debug=EA.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return hA(this,void 0,void 0,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise(((o,n)=>{this.requested.push({id:t,opts:i,data:e,resultCb:o,reject:n})}))}))}execute(){return hA(this,void 0,void 0,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.mergeRequested();this.debug("DataController.execute() - merged",t);const e=EA.check(!0,"data-model");e&&(window.processedData=[]);for(const{opts:o,data:n,resultCbs:r,rejects:s,ids:a}of t)try{const t=new UN(Object.assign(Object.assign({},o),{mode:this.mode})),i=t.processData(n);e&&window.processedData.push(i),i&&0===i.partialValidDataCount?r.forEach((e=>e({dataModel:t,processedData:i}))):i?this.splitResult(t,i,a,r):s.forEach((t=>t(new Error("AG Charts - no processed data generated"))))}catch(i){s.forEach((t=>t(i)))}}))}mergeRequested(){const t=[],e=t=>t.filter((t=>"key"===t.type)).map((t=>t.property)).join(";"),i=t=>{let{opts:i,data:o}=t;return t=>t[0].data===o&&t[0].opts.groupByKeys===i.groupByKeys&&t[0].opts.dataVisible===i.dataVisible&&t[0].opts.groupByFn===i.groupByFn&&e(t[0].opts.props)===e(i.props)},o=t=>e=>{var i;if(e.type!==t.type)return!1;const o=null!==(i=RA(e,t))&&void 0!==i?i:{};return delete o.scopes,delete o.id,delete o.ids,0===Object.keys(o).length};for(const n of this.requested){const e=t.find(i(n));e?e.push(n):t.push([n])}return t.map((t=>{return{ids:t.map((t=>{let{id:e}=t;return e})),resultCbs:t.map((t=>{let{resultCb:e}=t;return e})),rejects:t.map((t=>{let{reject:e}=t;return e})),data:t[0].data,opts:(e=t.map((t=>{let{opts:e}=t;return e})),Object.assign(Object.assign({},e[0]),{props:e.reduce(((t,e)=>{var i,n,r,s,a,l;for(const c of e.props){null!=c.id&&(null!==(i=c.ids)&&void 0!==i||(c.ids=[]),null===(n=c.scopes)||void 0===n||n.forEach((t=>{var e;return null===(e=c.ids)||void 0===e?void 0:e.push([t,c.id])})));const e=t.find(o(c));e?(null!==(r=e.scopes)&&void 0!==r||(e.scopes=[]),e.scopes.push(...null!==(s=c.scopes)&&void 0!==s?s:[]),"key"!==e.type&&"value"!==e.type||null===(a=e.ids)||void 0===a||a.push(...null!==(l=c.ids)&&void 0!==l?l:[])):t.push(c)}return t}),[])}))};var e}))}splitResult(t,e,i,o){for(let n=0;n<i.length;n++){const r=i[n];(0,o[n])({dataModel:t,processedData:Object.assign(Object.assign({},e),{data:e.data.filter((t=>{let{validScopes:e}=t;return null==e||e.some((t=>t===r))}))})})}}}class YN{constructor(t){this.getSeries=t}}class XN{constructor(){this.listeners=new vR}addListener(t,e,i){return this.listeners.addListener(t,e,i)}removeListener(t){this.listeners.removeListener(t)}}const $N=[!0,"animation"];class qN extends XN{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new ZN,this.debug=EA.create(...$N),this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i,{disableInteractions:o=!0,immutable:n=!0}=t,r=cA(t,["disableInteractions","immutable"]);const{batch:s}=this;try{if(null!=r.id&&s.controllers.has(r.id)){if(!n)return s.controllers.get(r.id).reset(r);s.controllers.get(r.id).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${r.id}`),this.batch.skip()}}catch(c){return void this.failsafeOnError(c)}const a=null!==(e=r.id)&&void 0!==e?e:Math.random().toString(),l=this.isSkipped();return l&&this.debug("AnimationManager - skipping animation"),new jM(Object.assign(Object.assign({},r),{id:a,skip:l,autoplay:!!this.isPlaying&&r.autoplay,duration:null!==(i=r.duration)&&void 0!==i?i:this.defaultDuration,onPlay:t=>{var e;s.controllers.set(a,t),this.requestAnimation(),o&&this.interactionManager.pause("animation"),null===(e=r.onPlay)||void 0===e||e.call(t,t)},onStop:t=>{var e;s.controllers.delete(a),o&&this.interactionManager.resume("animation"),null===(e=r.onStop)||void 0===e||e.call(t,t)}}))}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");for(const e of this.batch.controllers.values())try{e.play()}catch(t){this.failsafeOnError(t)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");for(const e of this.batch.controllers.values())try{e.pause()}catch(t){this.failsafeOnError(t)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()");for(const e of this.batch.controllers.values())try{e.stop()}catch(t){this.failsafeOnError(t,!1)}}stopByAnimationId(t){var e;try{null!=t&&this.batch.controllers.has(t)&&(null===(e=this.batch.controllers.get(t))||void 0===e||e.stop())}catch(i){return void this.failsafeOnError(i)}}stopByAnimationGroupId(t){for(const e of this.batch.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.skipAnimations=t}isSkipped(){return this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){EA.check(...$N)&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}requestAnimation(){if(!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>hA(this,void 0,void 0,(function*(){const o=()=>hA(this,void 0,void 0,(function*(){const e=i-(null!==t&&void 0!==t?t:i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.controllers.size});for(const t of this.batch.controllers.values())try{t.update(e)}catch(o){this.failsafeOnError(o)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:e})}));this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(o):yield this.chartUpdateMutex.acquire(o),this.batch.isActive()&&this.scheduleAnimationFrame(e)}));this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];xA.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.destroy(),this.batch=new ZN,!0===t&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.controllers.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1)}}class ZN{constructor(){this.controllers=new Map,this.skipAnimations=!1}isActive(){return this.controllers.size>0}skip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===this.skipAnimations&&!0===t){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}isSkipped(){return this.skipAnimations}destroy(){}}class JN extends XN{legendItemClick(t,e,i,o){const n={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:o};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,o,n){const r={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:n,numVisibleItems:o};this.listeners.dispatch("legend-item-double-click",r)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}}class QN{constructor(t){this.states={},this.element=t}updateCursor(t,e){delete this.states[t],null!=e&&(this.states[t]={style:e}),this.applyStates()}applyStates(){let t="default";Object.entries(this.states).reverse().slice(0,1).forEach((e=>{let[i,{style:o}]=e;return t=o})),this.element.style.cursor=t}getCursor(){return this.element.style.cursor}}class tL extends XN{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(t,e){this.highlightStates.delete(t),null!=e&&this.highlightStates.set(t,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.delete(t),null!=e&&this.pickedStates.set(t,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:t}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,t)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:t})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(t,e){return t===e||(null===t||void 0===t?void 0:t.series)===(null===e||void 0===e?void 0:e.series)&&(null===t||void 0===t?void 0:t.itemId)===(null===e||void 0===e?void 0:e.itemId)&&(null===t||void 0===t?void 0:t.datum)===(null===e||void 0===e?void 0:e.datum)}}const eL=["pagehide","mousemove","mouseup"],iL=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"];class oL extends XN{constructor(t,e,i){super(),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.pausers={animation:0,"context-menu":0},this.rootElement=e.body,this.element=t,this.window=i;for(const o of iL)o.startsWith("touch")?t.addEventListener(o,this.eventHandler,{passive:!0}):"wheel"===o?t.addEventListener(o,this.eventHandler,{passive:!1}):t.addEventListener(o,this.eventHandler);for(const o of eL)this.window.addEventListener(o,this.eventHandler);oL.interactionDocuments.includes(e)||(qR(e,"\n.ag-chart-wrapper {\n    touch-action: none;\n}\n"),oL.interactionDocuments.push(e))}destroy(){for(const t of eL)this.window.removeEventListener(t,this.eventHandler);for(const t of iL)this.element.removeEventListener(t,this.eventHandler)}resume(t){this.pausers[t]--}pause(t){this.pausers[t]++}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch((t=>xA.errorOnce(t)))}dispatchEvent(t,e){return hA(this,void 0,void 0,(function*(){const i=this.calculateCoordinates(t);if(null==i)return;const o=Object.entries(this.pausers).filter((t=>{let[,e]=t;return e>0})).map((t=>{let[e]=t;return e}));for(const n of e)this.listeners.dispatchWrapHandlers(n,((t,e,i)=>{var n;o.length>0&&!(null===(n=null===e||void 0===e?void 0:e.bypassPause)||void 0===n?void 0:n.some((t=>o.includes(t))))||i.consumed||t(i)}),this.buildEvent(Object.assign({type:n,event:t,pauses:o},i)))}))}decideInteractionEventTypes(t){const e="drag-start";switch(t.type){case"click":return["click"];case"dblclick":return["dblclick"];case"contextmenu":return["contextmenu"];case"mousedown":return this.mouseDown=!0,this.dragStartElement=t.target,[e];case"touchstart":return this.touchDown=!0,this.dragStartElement=t.target,[e];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const i=t instanceof MouseEvent&&1===(1&t.buttons);return this.mouseDown!==i?(this.mouseDown=i,[i?e:"drag-end"]):[];case"pagehide":return["page-left"];case"wheel":return["wheel"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null===(e=t.target)||void 0===e?void 0:e.parentElement)===this.element}calculateCoordinates(t){var e;if(t instanceof MouseEvent){const{clientX:e,clientY:i,pageX:o,pageY:n,offsetX:r,offsetY:s}=t;return this.fixOffsets(t,{clientX:e,clientY:i,pageX:o,pageY:n,offsetX:r,offsetY:s})}if("undefined"!==typeof TouchEvent&&t instanceof TouchEvent){const i=null!==(e=t.touches[0])&&void 0!==e?e:t.changedTouches[0],{clientX:o,clientY:n,pageX:r,pageY:s}=i;return Object.assign(Object.assign({},oL.NULL_COORDS),{clientX:o,clientY:n,pageX:r,pageY:s})}if(t instanceof PageTransitionEvent){if(t.persisted)return;return oL.NULL_COORDS}}fixOffsets(t,e){const i=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const o=i(this.dragStartElement),n=i(t.target);e.offsetX-=o.x-n.x,e.offsetY-=o.y-n.y}return e}buildEvent(t){const{type:e,event:i,clientX:o,clientY:n,pauses:r}=t;let{offsetX:s,offsetY:a,pageX:l,pageY:c}=t;if(!Uk(s)||!Uk(a)){const t=this.element.getBoundingClientRect();s=o-t.left,a=n-t.top}if(!Uk(l)||!Uk(c)){const t=this.rootElement.getBoundingClientRect();l=o-t.left,c=n-t.top}const d={type:e,offsetX:s,offsetY:a,pageX:l,pageY:c,sourceEvent:i,consumed:!1,pauses:r,consume(){d.consumed=!0}};return d}}oL.interactionDocuments=[],oL.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};class nL{constructor(t,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=t,this.destroyFns.push(e.addListener("hover",(t=>this.checkExclusiveRects(t))))}getRange(){return this.tooltip.range}updateTooltip(t,e,i){var o;null==i&&(i=null===(o=this.states[t])||void 0===o?void 0:o.content),this.states[t]={content:i,meta:e},this.applyStates()}updateExclusiveRect(t,e){e?this.exclusiveAreas[t]=e:delete this.exclusiveAreas[t]}removeTooltip(t){delete this.states[t],this.applyStates()}getTooltipMeta(t){var e;return null===(e=this.states[t])||void 0===e?void 0:e.meta}destroy(){for(const t of this.destroyFns)t()}checkExclusiveRects(t){let e;for(const[i,o]of Object.entries(this.exclusiveAreas))if(o.containsPoint(t.offsetX,t.offsetY)){e=i;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var t;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let i,o;if(e.reverse(),e.slice(0,1).forEach((t=>{var e;const{content:n,meta:r}=null!==(e=this.states[t])&&void 0!==e?e:{};i=n,o=r})),void 0===o||void 0===i)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null===(t=this.appliedState)||void 0===t?void 0:t.content)===i){const t=this.tooltip.isVisible();this.tooltip.show(o,void 0,t)}else this.tooltip.show(o,i);this.appliedState={content:i,meta:o}}static makeTooltipMeta(t,e,i,o){var n,r,s,a;const{pageX:l,pageY:c,offsetX:d,offsetY:u}=t,h={xOffset:i.series.tooltip.position.xOffset,yOffset:i.series.tooltip.position.yOffset},p={pageX:l,pageY:c,offsetX:d,offsetY:u,event:t,showArrow:i.series.tooltip.showArrow,position:h},f=null!==(r=null===(n=i.yBar)||void 0===n?void 0:n.upperPoint)&&void 0!==r?r:i.midPoint;if("node"===i.series.tooltip.position.type&&f){const{x:t,y:n}=f,r=i.series.contentGroup.inverseTransformPoint(t,n),s=e.element.getBoundingClientRect();return Object.assign(Object.assign({},p),{pageX:Math.round(s.left+o.scrollX+r.x),pageY:Math.round(s.top+o.scrollY+r.y),offsetX:Math.round(r.x),offsetY:Math.round(r.y)})}return p.enableInteraction=null!==(a=null===(s=i.series.tooltip.interaction)||void 0===s?void 0:s.enabled)&&void 0!==a&&a,p}}class rL extends XN{constructor(){super(...arguments),this.axes={}}updateAxes(t){var e;const i=new Set(Object.keys(this.axes));t.forEach((t=>{var e,o,n;i.delete(t.id),null!==(e=(o=this.axes)[n=t.id])&&void 0!==e||(o[n]=new sL(t))})),i.forEach((t=>{delete this.axes[t]})),(null===(e=this.initialZoom)||void 0===e?void 0:e.newZoom)&&this.updateZoom(this.initialZoom.callerId,this.initialZoom.newZoom),this.initialZoom=void 0}updateZoom(t,e){0!==Object.keys(this.axes).length?(Object.values(this.axes).forEach((i=>{i.updateZoom(t,null===e||void 0===e?void 0:e[i.getDirection()])})),this.applyStates()):this.initialZoom={callerId:t,newZoom:e}}updateAxisZoom(t,e,i){var o;null===(o=this.axes[e])||void 0===o||o.updateZoom(t,i),this.applyStates()}getZoom(){let t,e;if(Object.values(this.axes).forEach((i=>{i.getDirection()===QT.X?t=i.getZoom():i.getDirection()===QT.Y&&(e=i.getZoom())})),t||e)return{x:t,y:e}}getAxisZoom(t){var e;return null===(e=this.axes[t])||void 0===e?void 0:e.getZoom()}getAxisZooms(){const t={};for(const[e,i]of Object.entries(this.axes))t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyStates(){if(!Object.values(this.axes).map((t=>t.applyStates())).some(Boolean))return;const t=this.getZoom(),e={};for(const[i,o]of Object.entries(this.axes))e[i]=o.getZoom();this.listeners.dispatch("zoom-change",Object.assign(Object.assign({type:"zoom-change"},null!==t&&void 0!==t?t:{}),{axes:e}))}}class sL{constructor(t){this.states={},this.axis=t;const[e=0,i=1]=t.visibleRange;this.currentZoom={min:e,max:i},this.states.__initial__=this.currentZoom}getDirection(){return this.axis.direction}updateZoom(t,e){delete this.states[t],null!=e&&(this.states[t]=Object.assign({},e))}getZoom(){return this.currentZoom}applyStates(){var t,e;const i=this.currentZoom,o=Object.keys(this.states)[Object.keys(this.states).length-1];return this.currentZoom=Object.assign({},this.states[o]),(null===i||void 0===i?void 0:i.min)!==(null===(t=this.currentZoom)||void 0===t?void 0:t.min)||(null===i||void 0===i?void 0:i.max)!==(null===(e=this.currentZoom)||void 0===e?void 0:e.max)}}class aL extends vR{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error(`AG Charts - unsupported listener type: ${t}`)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce(((t,e)=>{try{return e.handler(t)}catch(i){return xA.errorOnce(i),t}}),e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}}function lL(t){let{orientation:e,bboxes:i,maxHeight:o,maxWidth:n,itemPaddingY:r=0,itemPaddingX:s=0,forceResult:a=!1}=t;const l="horizontal"===e,c={max:l?n:o,fn:l?t=>t.width:t=>t.height,padding:l?s:r},d={max:l?o:n,fn:l?t=>t.height:t=>t.width,padding:l?r:s};let u=0;const h=[];for(;u<i.length;){const t=cL(i.slice(u),u,c,d,a);if(!t)return;u+=t.processedBBoxCount,h.push(t.pageIndices)}return function(t,e,i,o,n){let r=0,s=0;const a=t.map((t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach(((t,i)=>{t.forEach(((t,o)=>{e[o][i]=t}))})),e}(t));let a=0;const l=t.map((t=>{const e=t.map((t=>(a=Math.max(t,a),i[t])));let r=0,s=0;return e.forEach((t=>{r+=t.height+o,s=Math.max(s,t.width+n)})),{indices:t,bboxes:e,columnHeight:Math.ceil(r),columnWidth:Math.ceil(s)}}));let c=0,d=0;return l.forEach((t=>{c+=t.columnWidth,d=Math.max(d,t.columnHeight)})),r=Math.max(c,r),s=Math.max(d,s),{columns:l,startIndex:t[0][0],endIndex:a,pageWidth:c,pageHeight:d}}));return{pages:a,maxPageWidth:r,maxPageHeight:s}}(h,e,i,r,s)}function cL(t,e,i,o,n){let r=function(t,e){const i=t.length;let o=0;for(let n=0;n<i;n++)if(o+=e.fn(t[n])+e.padding,o>e.max){return i/n<2?Math.ceil(i/2):n}return i}(t,i);if(r<1){if(!n)return;r=1}for(let s=r;s>=1;s--){const r=dL(t,e,s,i,o,n);if(null==r&&s<=1)return;if(null==r)continue;if("number"===typeof r){if(r<=1)return;s=r<s&&r>1?r:s;continue}return{processedBBoxCount:r.length*r[0].length,pageIndices:r}}}function dL(t,e,i,o,n,r){var s;const a=[];let l=0,c=0,d=[];const u=[];for(let h=0;h<t.length;h++){const p=(h+i)%i;0===p&&(l+=c,c=0,d.length>0&&a.push(d),d=[]);const f=o.fn(t[h])+o.padding;u[p]=Math.max(null!==(s=u[p])&&void 0!==s?s:0,f),c=Math.max(c,n.fn(t[h])+n.padding);const g=l+c,v=!r||a.length>0;if(g>n.max&&v){d=[];break}if(u.reduce(((t,e)=>t+e),0)>o.max&&!r)return u.length<i?u.length:void 0;d.push(h+e)}return d.length>0&&a.push(d),a.length>0?a:void 0}class uL extends uR{updatePath(){const t=this.size/4.2;super.applyPath(t,uL.moves)}}uL.className="Cross",uL.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];class hL extends uR{updatePath(){const t=this.size/2;super.applyPath(t,hL.moves)}}hL.className="Diamond",hL.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];class pL extends uR{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:o}=this,n=i/4,r=this.y+n/2;e.clear(),e.arc(t-n,r-n,n,o(130),o(330)),e.arc(t+n,r-n,n,o(220),o(50)),e.lineTo(t,r+n),e.closePath()}}pL.className="Heart";class fL extends uR{updatePath(){const t=this.size/3;super.applyPath(t,fL.moves)}}fL.className="Plus",fL.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];class gL extends uR{updatePath(){const{path:t,x:e,y:i}=this,o=this.size/2;t.clear(),t.moveTo(this.align(e-o),this.align(i-o)),t.lineTo(this.align(e+o),this.align(i-o)),t.lineTo(this.align(e+o),this.align(i+o)),t.lineTo(this.align(e-o),this.align(i+o)),t.closePath()}}gL.className="Square";class vL extends uR{updatePath(){const t=1.1*this.size;super.applyPath(t,vL.moves)}}vL.className="Triangle",vL.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];const yL={circle:hR,cross:uL,diamond:hL,heart:pL,plus:fL,square:gL,triangle:vL},mL=Object.keys(yL);function bL(t){return mL.includes(t)}function SL(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gL;return bL(t)?yL[t]:"function"===typeof t?t:gL}class xL extends mk{constructor(){super({name:"markerLabelGroup"}),this.label=new xM,this._marker=new gL,this._markerSize=15,this._spacing=8;const t=this.label;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=gM.has.textMetrics?1:0,this.append([this.marker,t]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}update(){const t=this.marker,e=this.markerSize;t.size=e,this.label.x=e/2+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,super.render(t)}}xL.className="MarkerLabel",dA([TM("label"),uA("design:type",String)],xL.prototype,"text",void 0),dA([TM("label"),uA("design:type",String)],xL.prototype,"fontStyle",void 0),dA([TM("label"),uA("design:type",String)],xL.prototype,"fontWeight",void 0),dA([TM("label"),uA("design:type",Number)],xL.prototype,"fontSize",void 0),dA([TM("label"),uA("design:type",String)],xL.prototype,"fontFamily",void 0),dA([TM("label","fill"),uA("design:type",String)],xL.prototype,"color",void 0),dA([TM("marker","fill"),uA("design:type",String)],xL.prototype,"markerFill",void 0),dA([TM("marker","stroke"),uA("design:type",String)],xL.prototype,"markerStroke",void 0),dA([TM("marker","strokeWidth"),uA("design:type",Number)],xL.prototype,"markerStrokeWidth",void 0),dA([TM("marker","fillOpacity"),uA("design:type",Number)],xL.prototype,"markerFillOpacity",void 0),dA([TM("marker","strokeOpacity"),uA("design:type",Number)],xL.prototype,"markerStrokeOpacity",void 0);class CL{constructor(){this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}}dA([ZA(mT),uA("design:type",String)],CL.prototype,"color",void 0),dA([ZA(NT),uA("design:type",String)],CL.prototype,"fontStyle",void 0),dA([ZA(_T),uA("design:type",String)],CL.prototype,"fontWeight",void 0),dA([ZA(wT(0)),uA("design:type",Number)],CL.prototype,"fontSize",void 0),dA([ZA(uT),uA("design:type",String)],CL.prototype,"fontFamily",void 0);class wL{constructor(){this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}}dA([ZA(wT(0)),uA("design:type",Object)],wL.prototype,"size",void 0),dA([ZA(bT),uA("design:type",String)],wL.prototype,"fill",void 0),dA([ZA(ET(0,1)),uA("design:type",Number)],wL.prototype,"fillOpacity",void 0),dA([ZA(bT),uA("design:type",String)],wL.prototype,"stroke",void 0),dA([ZA(wT(0)),uA("design:type",Number)],wL.prototype,"strokeWidth",void 0),dA([ZA(wT(0,1)),uA("design:type",Number)],wL.prototype,"strokeOpacity",void 0);class EL{constructor(t){this.parent=t,this.shape=vL,this.size=15,this.padding=8}}dA([MM({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}}),uA("design:type",Object)],EL.prototype,"shape",void 0),dA([ZA(wT(0)),uA("design:type",Object)],EL.prototype,"size",void 0),dA([ZA(wT(0)),uA("design:type",Number)],EL.prototype,"padding",void 0);class OL{constructor(t,e,i,o){this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.interactionManager=i,this.cursorManager=o,this.id=rM(this),this.group=new mk({name:"pagination"}),this.labelNode=new xM,this.marker=new EL(this),this.activeStyle=new wL,this.inactiveStyle=new wL,this.highlightStyle=new wL,this.label=new CL,this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new vL,this._previousButton=new vL;const{labelNode:n}=this;n.textBaseline="middle",n.fontSize=12,n.fontFamily="Verdana, sans-serif",n.fill="black",n.y=gM.has.textMetrics?1:0,this.group.append([this.nextButton,this.previousButton,n]),this.interactionManager.addListener("click",(t=>this.onPaginationClick(t))),this.interactionManager.addListener("hover",(t=>this.onPaginationMouseMove(t))),this.update(),this.updateMarkers()}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){if(this._orientation=t,"horizontal"===t)this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:o,fontStyle:n,fontWeight:r,fontSize:s,fontFamily:a}}=this;i.text=`${t+1} / ${e}`,i.fill=o,i.fontStyle=n,i.fontWeight=r,i.fontSize=s,i.fontFamily=a}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:o,activeStyle:n,inactiveStyle:r,highlightStyle:s,highlightActive:a}=this,l=(t,e)=>e?r:t===a?s:n;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",o))}updateMarker(t,e){var i;const{size:o}=this.marker;t.size=o,t.fill=e.fill,t.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,o=t===e-1,n=0===t;this.nextButtonDisabled=o||i,this.previousButtonDisabled=n||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(BN.SCENE_RENDER)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=SL(this.marker.shape||vL);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(BN.SCENE_RENDER)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}}OL.className="Pagination";const DL=["horizontal","vertical"],AL=QA(((t,e)=>tT(t,e,(t=>DL.includes(t)))),"expecting an orientation keyword such as 'horizontal' or 'vertical'");class TL{constructor(){this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}}dA([ZA(ET(0)),uA("design:type",Number)],TL.prototype,"maxLength",void 0),dA([ZA(mT),uA("design:type",String)],TL.prototype,"color",void 0),dA([ZA(NT),uA("design:type",String)],TL.prototype,"fontStyle",void 0),dA([ZA(_T),uA("design:type",String)],TL.prototype,"fontWeight",void 0),dA([ZA(wT(0)),uA("design:type",Number)],TL.prototype,"fontSize",void 0),dA([ZA(uT),uA("design:type",String)],TL.prototype,"fontFamily",void 0),dA([ZA(lT),uA("design:type",Function)],TL.prototype,"formatter",void 0);class ML{constructor(){this.size=15,this._shape=void 0,this.padding=8,this.strokeWidth=void 0}set shape(t){var e;this._shape=t,null===(e=this.parent)||void 0===e||e.onMarkerShapeChange()}get shape(){return this._shape}}dA([ZA(wT(0)),uA("design:type",Object)],ML.prototype,"size",void 0),dA([ZA(wT(0)),uA("design:type",Number)],ML.prototype,"padding",void 0),dA([ZA(ET(0)),uA("design:type",Object)],ML.prototype,"strokeWidth",void 0);class kL{constructor(){this.marker=new ML,this.label=new TL,this.maxWidth=void 0,this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0}}dA([ZA(ET(0)),uA("design:type",Number)],kL.prototype,"maxWidth",void 0),dA([ZA(wT(0)),uA("design:type",Object)],kL.prototype,"paddingX",void 0),dA([ZA(wT(0)),uA("design:type",Object)],kL.prototype,"paddingY",void 0),dA([ZA(cT),uA("design:type",Boolean)],kL.prototype,"toggleSeriesVisible",void 0);class RL{constructor(){this.legendItemClick=void 0,this.legendItemDoubleClick=void 0}}dA([ZA(lT),uA("design:type",Function)],RL.prototype,"legendItemClick",void 0);class PL{set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}constructor(t){this.ctx=t,this.id=rM(this),this.group=new mk({name:"legend",layer:!0,zIndex:dR.LEGEND_ZINDEX}),this.itemSelection=bk.select(this.group,xL),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.item=new kL,this.listeners=new RL,this.truncatedItems=new Set,this._data=[],this._enabled=!0,this.position="bottom",this.maxWidth=void 0,this.maxHeight=void 0,this.reverseOrder=void 0,this.destroyFns=[],this.spacing=20,this.characterWidths=new Map,this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new OL((e=>t.updateService.update(e)),(t=>this.updatePageNumber(t)),t.interactionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("click",(t=>this.checkLegendClick(t)),e),t.interactionManager.addListener("dblclick",(t=>this.checkLegendDoubleClick(t)),e),t.interactionManager.addListener("hover",(t=>this.handleLegendMouseMove(t))),t.layoutService.addListener("start-layout",(t=>this.positionLegend(t.shrinkRect))),(()=>this.detachLegend()))}destroy(){this.destroyFns.forEach((t=>t()))}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,tM.MINOR)}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":gM.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.append(this.group)}detachLegend(){var t;null===(t=this.group.parent)||void 0===t||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}performLayout(t,e){const{paddingX:i,paddingY:o,label:n,maxWidth:r,marker:{size:s,padding:a,shape:l},label:{maxLength:c=1/0,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p}}=this.item,f=[...this.data];this.reverseOrder&&f.reverse(),this.itemSelection.update(f);const g=[],v=CM(n),y=null!==r&&void 0!==r?r:.8*t,m=s+a+i;if(this.itemSelection.each(((t,e)=>{var i;const o=SL(null!==l&&void 0!==l?l:e.marker.shape);t.marker&&t.marker instanceof o||(t.marker=new o),t.markerSize=s,t.spacing=a,t.fontStyle=d,t.fontWeight=u,t.fontSize=h,t.fontFamily=p;const n=null!==(i=e.itemId)&&void 0!==i?i:e.id,r=this.getItemLabel(e),f=(null!==r&&void 0!==r?r:"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(f,c,y,m,v,n),g.push(t.computeBBox())})),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const b=this.size,S=this.oldSize;b[0]=t,b[1]=e,b[0]===S[0]&&b[1]===S[1]||(S[0]=b[0],S[1]=b[1]);const{pages:x,maxPageHeight:C,maxPageWidth:w}=this.updatePagination(g,t,e);this.pages=x,this.maxPageSize=[w-i,C-o];const E=this.pagination.currentPage,O=this.pages[E];this.pages.length<1||!O?this.visible=!1:(this.visible=!0,this.updatePositions(E),this.update())}truncate(t,e,i,o,n,r){const s=t.split("");let a=!1;t.length>e&&(t=`${t.substring(0,e)}`,a=!0);if(Math.floor(o+gM.getTextSize(t,n).width)>i){let e="";const r=this.getCharacterWidths(n);let l=o+r["..."];for(const t of s){if(r[t]||(r[t]=gM.getTextSize(t,n).width),l+=r[t],l>i)break;e+=t}t=e,a=!0}return a?(t+="...",this.truncatedItems.add(r)):this.truncatedItems.delete(r),t}updatePagination(t,e,i){const o=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=o,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:r,maxPageHeight:s,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(t,e,i),d=r.findIndex((t=>t.endIndex>=n));this.pagination.currentPage=Math.min(Math.max(d,0),r.length-1);const{paddingX:u,paddingY:h}=this.item,p=a-u,f=s-h;let g=0,v=-l.y-this.item.marker.size/2;return c?v+=f+8:(g+=-l.x+p+8,v+=(f-l.height)/2),this.pagination.translationX=g,this.pagination.translationY=v,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:s,maxPageWidth:a,pages:r}}calculatePagination(t,e,i){var o,n,r;const{paddingX:s,paddingY:a}=this.item,l=this.getOrientation(),c=["left","right"].includes(this.position);let d=this.pagination.computeBBox(),u=new aM(0,0,0,0),h=[],p=0,f=0,g=0;const v=t=>{const{width:e,height:i}=t;return e===d.width&&i===d.height},y=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(g++>10){xA.warn("unable to find stable legend layout.");break}d=u;const v=e-(c?0:d.width),m=lL({orientation:l,bboxes:t,maxHeight:i-(c?d.height:0),maxWidth:v,itemPaddingY:a,itemPaddingX:s,forceResult:y});h=null!==(o=null===m||void 0===m?void 0:m.pages)&&void 0!==o?o:[],p=null!==(n=null===m||void 0===m?void 0:m.maxPageWidth)&&void 0!==n?n:0,f=null!==(r=null===m||void 0===m?void 0:m.maxPageHeight)&&void 0!==r?r:0;const b=h.length;if(this.pagination.visible=b>1,this.pagination.totalPages=b,this.pagination.update(),u=this.pagination.computeBBox(),!this.pagination.visible)break}while(!v(u));return{maxPageWidth:p,maxPageHeight:f,pages:h,paginationBBox:d,paginationVertical:c}}updatePositions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{item:{paddingY:e},itemSelection:i,pages:o}=this;if(o.length<1||!o[t])return;const{columns:n,startIndex:r,endIndex:s}=o[t];let a=0,l=0;const c=n.length,d=n[0].indices.length,u="horizontal"===this.getOrientation(),h=n[0].bboxes[0].height+e,p=[];i.each(((t,e,i)=>{var o,f;if(i<r||i>s)return void(t.visible=!1);const g=i-r;let v=0,y=0;u?(v=g%c,y=Math.floor(g/c)):(v=Math.floor(g/d),y=g%d),t.visible=!0;const m=n[v];m&&(l=h*y,a=null!==(o=p[y])&&void 0!==o?o:0,p[y]=(null!==(f=p[y])&&void 0!==f?f:0)+m.columnWidth,t.translationX=Math.floor(a),t.translationY=Math.floor(l))}))}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:o}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=o:this.paginationTrackingIndex=Math.floor((i+o)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(BN.SCENE_RENDER)}update(){const{label:{color:t},marker:e}=this.item;this.itemSelection.each(((i,o)=>{var n;const r=o.marker;i.markerFill=r.fill,i.markerStroke=r.stroke,i.markerStrokeWidth=null!==(n=e.strokeWidth)&&void 0!==n?n:Math.min(2,r.strokeWidth),i.markerFillOpacity=r.fillOpacity,i.markerStrokeOpacity=r.strokeOpacity,i.opacity=o.enabled?1:.5,i.color=t}))}getDatumForPoint(t,e){const i=[],o={dist:1/0,datum:void 0};for(const n of this.group.children){if(!n.visible)continue;if(!(n instanceof xL))continue;const r=n.computeBBox();if(r.grow(this.item.paddingX/2,"horizontal"),r.grow(this.item.paddingY/2,"vertical"),r.containsPoint(t,e))return n.datum;const s=t-r.x-this.item.paddingX/2,a=e-r.y-this.item.paddingY/2,l=Math.pow(s,2)+Math.pow(a,2);s>=0&&a>=0&&l<o.dist&&(o.dist=l,o.datum=n.datum),i.push(r)}if(aM.merge(i).containsPoint(t,e))return o.datum}computeBBox(){return this.group.computeBBox()}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{dataService:i,highlightManager:o},item:{toggleSeriesVisible:n}}=this,{offsetX:r,offsetY:s}=t,a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,s),c=this.getDatumForPoint(r,s);if(!l||!c)return;const{id:d,itemId:u,enabled:h}=c,p=i.getSeries().find((t=>t.id===d));if(!p)return;t.consume();let f=h;n&&(f=!h,this.ctx.chartEventManager.legendItemClick(p,u,f,c.legendItemName)),f?o.updateHighlight(this.id,{series:p,itemId:u,datum:void 0}):o.updateHighlight(this.id),this.ctx.updateService.update(BN.PROCESS_DATA,{forceNodeDataRefresh:!0}),null===e||void 0===e||e({type:"click",enabled:f,itemId:u,seriesId:p.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{dataService:o},item:{toggleSeriesVisible:n}}=this,{offsetX:r,offsetY:s}=t;if("integrated"===this.ctx.mode)return;const a=this.computeBBox(),l=this.group.visible&&a.containsPoint(r,s),c=this.getDatumForPoint(r,s);if(!l||!c)return;const{id:d,itemId:u,seriesId:h}=c,p=o.getSeries(),f=p.find((t=>t.id===d));if(f){if(t.consume(),n){const t={},i=p.flatMap((t=>t.getLegendData("category")));i.forEach((e=>{var i,o;null!==(i=t[o=e.seriesId])&&void 0!==i||(t[o]=0),e.enabled&&t[e.seriesId]++}));const o=i.find((t=>t.itemId===u&&t.seriesId===h));this.ctx.chartEventManager.legendItemDoubleClick(f,u,null!==(e=null===o||void 0===o?void 0:o.enabled)&&void 0!==e&&e,t,null===o||void 0===o?void 0:o.legendItemName)}this.ctx.updateService.update(BN.PROCESS_DATA,{forceNodeDataRefresh:!0}),null===i||void 0===i||i({type:"dblclick",enabled:!0,itemId:u,seriesId:f.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:o},listeners:n}=this;if(!i)return;const r=this.computeBBox(),{pageX:s,pageY:a,offsetX:l,offsetY:c}=t,d=this.group.visible&&r.containsPoint(l,c);if(!d)return this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),void this.ctx.tooltipManager.removeTooltip(this.id);t.consume();const u=this.getDatumForPoint(l,c);if(!(d&&void 0!==u))return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const h=u?this.ctx.dataService.getSeries().find((t=>t.id===(null===u||void 0===u?void 0:u.id))):void 0;u&&this.truncatedItems.has(null!==(e=u.itemId)&&void 0!==e?e:u.id)?this.ctx.tooltipManager.updateTooltip(this.id,{pageX:s,pageY:a,offsetX:l,offsetY:c,event:t,showArrow:!1},tP({content:this.getItemLabel(u)})):this.ctx.tooltipManager.removeTooltip(this.id),(o||null!=n.legendItemClick||null!=n.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),(null===u||void 0===u?void 0:u.enabled)&&h?this.ctx.highlightManager.updateHighlight(this.id,{series:h,itemId:null===u||void 0===u?void 0:u.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,o]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.performLayout(i,o);const n=this.computePagedBBox(),r=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-n.height;default:return t.width-n.width}};if(this.visible){let i,o;switch(this.position){case"top":case"bottom":i=(t.width-n.width)/2,o=r(),e.shrink(n.height,this.position);break;default:i=r(),o=(t.height-n.height)/2,e.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+t.x+i),this.group.translationY=Math.floor(-n.y+t.y+o)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=n.clone();i.x+=this.group.translationX,i.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,i)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,o=e/i;let n,r;switch(this.position){case"top":case"bottom":const t=o<1?Math.min(.5,1/o*.2):.2;n=this.maxWidth?Math.min(this.maxWidth,e):e,r=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;default:const s=o>1?Math.min(.5,.25*o):.25;n=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*s),r=this.maxHeight?Math.min(this.maxHeight,i):i}return[n,r]}}PL.className="Legend",dA([ZA(cT),uA("design:type",Object)],PL.prototype,"_enabled",void 0),dA([ZA(zT),uA("design:type",String)],PL.prototype,"position",void 0),dA([ZA(ET(0)),uA("design:type",Number)],PL.prototype,"maxWidth",void 0),dA([ZA(ET(0)),uA("design:type",Number)],PL.prototype,"maxHeight",void 0),dA([ZA(dT),uA("design:type",Boolean)],PL.prototype,"reverseOrder",void 0),dA([ZA(AL),uA("design:type",String)],PL.prototype,"orientation",void 0),dA([ZA(wT(0)),uA("design:type",Object)],PL.prototype,"spacing",void 0);class NL{constructor(t,e,i){this.text=void 0,this.className=t,this.parentElement=e,this.document=i}show(t){var e,i;let o=this.element;if(o||(o=this.document.createElement("div"),o.className=this.className,this.element=o),o.style.position="absolute",o.style.left=`${t.x}px`,o.style.top=`${t.y}px`,o.style.width=`${t.width}px`,o.style.height=`${t.height}px`,this.renderer)o.innerHTML=this.renderer();else{const t=this.document.createElement("div");t.style.alignItems="center",t.style.boxSizing="border-box",t.style.display="flex",t.style.justifyContent="center",t.style.margin="8px",t.style.height="100%",t.style.font="12px Verdana, sans-serif",t.innerText=null!==(e=this.text)&&void 0!==e?e:"No data to display",o.append(t)}null===(i=this.parentElement)||void 0===i||i.append(o)}hide(){var t;null===(t=this.element)||void 0===t||t.remove(),this.element=void 0}}dA([ZA(lT),uA("design:type",Function)],NL.prototype,"renderer",void 0),dA([ZA(hT),uA("design:type",String)],NL.prototype,"text",void 0);class LL{constructor(t){this.noData=new NL("ag-chart-no-data-overlay",t,t.ownerDocument)}}class _L{constructor(t){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=t}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,o,n;const{id:r,type:s,rootGroup:a,highlightGroup:l,annotationGroup:c,seriesGrouping:d}=t,{groupIndex:u=r}=null!==d&&void 0!==d?d:{};if(null!=this.series[r])throw new Error(`AG Charts - series already has an allocated layer: ${this.series[r]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!==(e=(o=this.groups)[s])&&void 0!==e||(o[s]={});const h=this.lookupIdx(u);let p=this.groups[s][h];return p||(p=null!==(i=(n=this.groups[s])[h])&&void 0!==i?i:n[h]={seriesIds:[],group:this.rootGroup.appendChild(new mk({name:`${s}-content`,layer:!0,zIndex:dR.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new mk({name:`${s}-highlight`,layer:!0,zIndex:dR.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new mk({name:`${s}-annotation`,layer:!0,zIndex:dR.SERIES_LAYER_ZINDEX,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[r]={layerState:p,seriesConfig:t},p.seriesIds.push(r),p.group.appendChild(a),p.highlight.appendChild(l),p.annotation.appendChild(c),p.group}changeGroup(t){var e,i;const{id:o,seriesGrouping:n,type:r,rootGroup:s,highlightGroup:a,annotationGroup:l,oldGrouping:c}=t,{groupIndex:d=o}=null!==n&&void 0!==n?n:{};(null===(i=null===(e=this.groups[r])||void 0===e?void 0:e[d])||void 0===i?void 0:i.seriesIds.includes(o))||(null!=this.series[o]&&this.releaseGroup({id:o,seriesGrouping:c,type:r,rootGroup:s,highlightGroup:a,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,o,n,r;const{id:s,seriesGrouping:a,rootGroup:l,highlightGroup:c,annotationGroup:d,type:u}=t,{groupIndex:h=s}=null!==a&&void 0!==a?a:{};if(null==this.series[s])throw new Error(`AG Charts - series doesn't have an allocated layer: ${s}`);const p=this.lookupIdx(h),f=null!==(i=null===(e=this.groups[u])||void 0===e?void 0:e[p])&&void 0!==i?i:null===(o=this.series[s])||void 0===o?void 0:o.layerState;if(f&&(f.seriesIds=f.seriesIds.filter((t=>t!==s)),f.group.removeChild(l),f.highlight.removeChild(c),f.annotation.removeChild(d)),0===(null===f||void 0===f?void 0:f.seriesIds.length))this.rootGroup.removeChild(f.group),this.rootGroup.removeChild(f.highlight),this.rootGroup.removeChild(f.annotation),delete this.groups[u][p],delete this.groups[u][s];else if((null===f||void 0===f?void 0:f.seriesIds.length)>0){const t=null===(r=this.series[null===(n=null===f||void 0===f?void 0:f.seriesIds)||void 0===n?void 0:n[0]])||void 0===r?void 0:r.seriesConfig;f.group.zIndexSubOrder=null===t||void 0===t?void 0:t.getGroupZIndexSubOrder("data"),f.highlight.zIndexSubOrder=null===t||void 0===t?void 0:t.getGroupZIndexSubOrder("highlight"),f.annotation.zIndexSubOrder=null===t||void 0===t?void 0:t.getGroupZIndexSubOrder("annotation")}delete this.series[s]}lookupIdx(t){return"normal"===this.mode?t:"string"!==typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(t/this.expectedSeriesCount,1),0)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}}class IL{constructor(){this.groups={}}registerSeries(t){let{id:e,seriesGrouping:i,visible:o,type:n}=t;var r,s;i&&(null!==(r=(s=this.groups)[n])&&void 0!==r||(s[n]={}),this.groups[n][e]={grouping:i,visible:o})}deregisterSeries(t){let{id:e,type:i}=t;this.groups[i]&&delete this.groups[i][e],this.groups[i]&&0===Object.keys(this.groups[i]).length&&delete this.groups[i]}getVisiblePeerGroupIndex(t){let{type:e,seriesGrouping:i}=t;var o;if(!i)return{visibleGroupCount:1,index:0};const n=[...Object.entries(null!==(o=this.groups[e])&&void 0!==o?o:{}).filter((t=>{let[e,i]=t;return i.visible})).reduce(((t,e)=>{let[i,o]=e;return o.visible&&t.add(o.grouping.groupIndex),t}),new Set).values()];return n.sort(((t,e)=>t-e)),{visibleGroupCount:n.length,index:n.indexOf(i.groupIndex)}}}class FL{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",(t=>this.layoutComplete(t))),this.layoutService.addListener("start-layout",(t=>this.positionPadding(t.shrinkRect))),this.layoutService.addListener("start-layout",(t=>this.positionCaptions(t.shrinkRect))))}destroy(){this.destroyFns.forEach((t=>t()))}layoutComplete(t){let{clipSeries:e,series:{paddedRect:i}}=t;const{seriesArea:o,seriesRoot:n}=this.chartLike;o.clip||e?n.setClipRectInGroupCoordinateSpace(i):n.setClipRectInGroupCoordinateSpace()}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i,o,n;const{title:r,subtitle:s,footnote:a}=this.chartLike,l=t.clone(),c=e=>{var i;const o=t.height/10,n=null!==(i=e.lineHeight)&&void 0!==i?i:e.fontSize*xM.defaultLineHeightRatio,r=t.width,s=Math.max(n,o);e.computeTextWrap(r,s)},d=(t,e)=>{const i=l.y;t.node.x=l.x+l.width/2,t.node.y=i,t.node.textBaseline="top",c(t);const o=t.node.computeBBox(),n=Math.ceil(o.y-i+o.height+e);l.shrink(n,"top")};if(s&&(s.node.visible=null!==(e=s.enabled)&&void 0!==e&&e),r&&(r.node.visible=r.enabled,r.node.visible)){const t=(null===s||void 0===s?void 0:s.node.visible)?kM.SMALL_PADDING:kM.LARGE_PADDING;d(r,null!==(i=r.spacing)&&void 0!==i?i:t)}return s&&s.node.visible&&d(s,null!==(o=s.spacing)&&void 0!==o?o:0),a&&(a.node.visible=a.enabled,a.node.visible&&((t,e)=>{const i=l.y+l.height;t.node.x=l.x+l.width/2,t.node.y=i,t.node.textBaseline="bottom",c(t);const o=t.node.computeBBox(),n=Math.ceil(i-o.y+e);l.shrink(n,"bottom")})(a,null!==(n=a.spacing)&&void 0!==n?n:0)),{shrinkRect:l}}}class GL extends vR{constructor(t){super(),this.updateCallback=t}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BN.FULL,{forceNodeDataRefresh:e=!1,skipAnimations:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.updateCallback(t,{forceNodeDataRefresh:e,skipAnimations:i})}dispatchUpdateComplete(t){const e={type:"update-complete",minRect:t};this.dispatch("update-complete",e)}}function BL(t){let e,o;if(null!=t.window)e=t.window;else if("undefined"!==typeof window)e=window;else{if("undefined"===typeof i.g)throw new Error("AG Charts - unable to resolve global window");e=i.g.window}if(null!=t.document)o=t.document;else if("undefined"!==typeof document)o=document;else{if("undefined"===typeof i.g)throw new Error("AG Charts - unable to resolve global document");o=i.g.document}return{document:o,window:e,overrideDevicePixelRatio:t.overrideDevicePixelRatio,sceneMode:t.sceneMode}}class VL{constructor(){this.clip=void 0,this.padding=new YP(0)}}dA([ZA(dT),uA("design:type",Boolean)],VL.prototype,"clip",void 0);class jL extends yR{getOptions(){var t;const{queuedUserOptions:e}=this;return LA([null!==(t=e[e.length-1])&&void 0!==t?t:this.userOptions])}autoSizeChanged(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}get destroyed(){return this._destroyed}constructor(t,e){var i,o;super(),i=this,this.id=rM(this),this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this.seriesRoot=new mk({name:`${this.id}-Series-root`}),this.debug=EA.create(),this.extraDebugStats={},this.container=void 0,this.data=[],this._firstAutoSize=!0,this.padding=new YP(20),this.seriesArea=new VL,this.title=void 0,this.subtitle=void 0,this.footnote=void 0,this.mode="standalone",this._destroyed=!1,this._destroyFns=[],this.modules={},this.legendModules={},this.processors=[],this.legends=new Map,this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateType=BN.NONE,this._performUpdateSkipAnimations=!1,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new _N,this.updateRequestors={},this.performUpdateTrigger=IN((function(t){return setTimeout(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}),(t=>{let{count:e}=t;return hA(this,void 0,void 0,(function*(){this._destroyed||this.updateMutex.acquire((()=>hA(this,void 0,void 0,(function*(){try{yield this.performUpdate(e)}catch(t){this._lastPerformUpdateError=t,xA.error("update error",t)}}))))}))})),this._axes=[],this._series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=function(t){return IN(((t,e)=>requestAnimationFrame(t)),t)}((()=>{this.lastInteractionEvent&&this.handlePointer(this.lastInteractionEvent),this.lastInteractionEvent=void 0})),this.onSeriesNodeClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=Object.assign(Object.assign({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)},this.specialOverrides=BL(t);const{window:n,document:r}=this.specialOverrides,s=null===e||void 0===e?void 0:e.scene,a=null!==(o=null===e||void 0===e?void 0:e.element)&&void 0!==o?o:r.createElement("div"),l=null===e||void 0===e?void 0:e.container,c=new mk({name:"root"});c.visible=!1,c.append(this.seriesRoot),this.axisGridGroup=new mk({name:"Axes-Grids",layer:!0,zIndex:dR.AXIS_GRID_ZINDEX}),c.appendChild(this.axisGridGroup),this.axisGroup=new mk({name:"Axes",layer:!0,zIndex:dR.AXIS_ZINDEX}),c.appendChild(this.axisGroup),this.element=a,a.classList.add("ag-chart-wrapper"),a.style.position="relative",this.scene=null!==s&&void 0!==s?s:new PN(this.specialOverrides),this.scene.root=c,this.scene.container=a,this.autoSize=!0,this.chartEventManager=new JN,this.cursorManager=new QN(a),this.highlightManager=new tL,this.interactionManager=new oL(a,r,n),this.zoomManager=new rL,this.dataService=new YN((()=>this.series)),this.layoutService=new aL,this.updateService=new GL((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BN.FULL,{forceNodeDataRefresh:e,skipAnimations:o}=arguments.length>1?arguments[1]:void 0;return i.update(t,{forceNodeDataRefresh:e,skipAnimations:o})})),this.seriesStateManager=new IL,this.seriesLayerManager=new _L(this.seriesRoot),this.callbackCache=new LN,this.animationManager=new qN(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.processors=[new FL(this,this.layoutService)],this.tooltip=new nP(this.scene.canvas.element,r,n,r.body),this.tooltipManager=new nL(this.tooltip,this.interactionManager),this.overlays=new LL(this.element),this.highlight=new GN,this.container=l,FN.observe(this.element,(t=>this.rawResize(t))),this._destroyFns.push(this.interactionManager.addListener("click",(t=>this.onClick(t))),this.interactionManager.addListener("dblclick",(t=>this.onDoubleClick(t))),this.interactionManager.addListener("hover",(t=>this.onMouseMove(t))),this.interactionManager.addListener("leave",(t=>this.onLeave(t))),this.interactionManager.addListener("page-left",(()=>this.destroy())),this.interactionManager.addListener("wheel",(()=>this.disablePointer())),this.interactionManager.addListener("drag-start",(()=>this.disablePointer())),this.animationManager.addListener("animation-frame",(t=>{this.update(BN.SCENE_RENDER)})),this.highlightManager.addListener("highlight-change",(t=>this.changeHighlightDatum(t))),this.zoomManager.addListener("zoom-change",(t=>this.update(BN.PROCESS_DATA,{forceNodeDataRefresh:!0,skipAnimations:!0})))),this.legend=this.attachLegend("category",PL)}addModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=new t.instanceConstructor(this.getModuleContext());this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeModule(t){var e;null===(e=this.modules[t.optionsKey])||void 0===e||e.instance.destroy(),delete this.modules[t.optionsKey],delete this[t.optionsKey]}attachLegend(t,e){const i=new e(this.getModuleContext());return this.legends.set(t,i),i.attachLegend(this.scene.root),i}addLegendModule(t){if(null!=this.modules[t.optionsKey])throw new Error("AG Charts - module already initialised: "+t.optionsKey);const e=this.attachLegend(t.identifier,t.instanceConstructor);this.modules[t.optionsKey]={instance:e},this[t.optionsKey]=e}removeLegendModule(t){this.legends.delete(t.identifier),this.removeModule(t)}isModuleEnabled(t){return null!=this.modules[t.optionsKey]}getModuleContext(){const{scene:t,animationManager:e,chartEventManager:i,cursorManager:o,highlightManager:n,interactionManager:r,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:d,seriesStateManager:u,seriesLayerManager:h,mode:p,callbackCache:f,specialOverrides:{window:g,document:v}}=this;return{window:g,document:v,scene:t,animationManager:e,chartEventManager:i,cursorManager:o,highlightManager:n,interactionManager:r,tooltipManager:s,zoomManager:a,dataService:l,layoutService:c,updateService:d,mode:p,seriesStateManager:u,seriesLayerManager:h,callbackCache:f}}destroy(t){if(this._destroyed)return;const e=null===t||void 0===t?void 0:t.keepTransferableResources;let i;this._performUpdateType=BN.NONE,this._destroyFns.forEach((t=>t())),this.processors.forEach((t=>t.destroy())),this.tooltipManager.destroy(),this.tooltip.destroy(),Object.values(this.legends).forEach((t=>t.destroy())),this.legends.clear(),this.overlays.noData.hide(),FN.unobserve(this.element);for(const o of Object.keys(this.modules))this.removeModule({optionsKey:o});return this.interactionManager.destroy(),this.animationManager.stop(),e?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.removeAllSeries(),this.seriesLayerManager.destroy(),this.axes.forEach((t=>t.destroy())),this.axes=[],this.callbackCache.invalidateCache(),this._destroyed=!0,i}disablePointer(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent&&(this.lastInteractionEvent=void 0)}requestFactoryUpdate(t){this._pendingFactoryUpdatesCount++,this.updateMutex.acquire((()=>hA(this,void 0,void 0,(function*(){yield t(),this._pendingFactoryUpdatesCount--}))))}get performUpdateType(){return this._performUpdateType}get lastPerformUpdateError(){return this._lastPerformUpdateError}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:BN.FULL,e=arguments.length>1?arguments[1]:void 0;var i,o;const{forceNodeDataRefresh:n=!1,skipAnimations:r,seriesToUpdate:s=this.series,newAnimationBatch:a}=null!==e&&void 0!==e?e:{};n&&this.series.forEach((t=>t.markNodeDataDirty()));for(const l of s)this.seriesToUpdate.add(l);if(r&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),a&&(this.animationManager.isActive()?this._performUpdateSkipAnimations=!0:null!==(i=this._performUpdateSkipAnimations)&&void 0!==i||(this._performUpdateSkipAnimations=!1)),EA.check(!0)){let e=null!==(o=(new Error).stack)&&void 0!==o?o:"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this._performUpdateType&&(this._performUpdateType=t,this.performUpdateTrigger.schedule(null===e||void 0===e?void 0:e.backOffMs))}performUpdate(t){var e;return hA(this,void 0,void 0,(function*(){const{_performUpdateType:i,extraDebugStats:o}=this,n=[...this.seriesToUpdate];this._performUpdateType=BN.NONE,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&i<BN.SCENE_RENDER&&this.animationManager.startBatch(this._performUpdateSkipAnimations),this.debug("Chart.performUpdate() - start",BN[i]);const r={start:performance.now()};switch(i){case BN.FULL:case BN.PROCESS_DATA:yield this.processData(),this.disablePointer(!0),r["\ud83c\udfed"]=performance.now();case BN.PERFORM_LAYOUT:if(this.checkUpdateShortcut(BN.PERFORM_LAYOUT))break;if(!this.checkFirstAutoSize(n))break;yield this.processLayout(),r["\u2316"]=performance.now();case BN.SERIES_UPDATE:if(this.checkUpdateShortcut(BN.SERIES_UPDATE))break;const{seriesRect:t}=this,s=[...n].map((e=>e.update({seriesRect:t})));yield Promise.all(s),r["\ud83e\udd14"]=performance.now();case BN.TOOLTIP_RECALCULATION:if(this.checkUpdateShortcut(BN.TOOLTIP_RECALCULATION))break;const a=this.tooltipManager.getTooltipMeta(this.id),l="hover"===(null===(e=null===a||void 0===a?void 0:a.event)||void 0===e?void 0:e.type);i<=BN.SERIES_UPDATE&&l&&this.handlePointer(a.event),r["\u2196"]=performance.now();case BN.SCENE_RENDER:if(this.checkUpdateShortcut(BN.SCENE_RENDER))break;o.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:r,extraDebugStats:o}),this.extraDebugStats={};case BN.NONE:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=void 0,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const s=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(s-r.start))/100,count:t,performUpdateType:BN[i]})}))}checkUpdateShortcut(t){return this.updateShortcutCount>3?(xA.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=10*(2^e);if(e<8)return this.update(BN.PERFORM_LAYOUT,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}set axes(t){const e=new Set;this._axes.forEach((t=>{t.detachAxis(this.axisGroup,this.axisGridGroup),e.add(t)})),this._axes=t.filter((t=>!t.linkedTo)).concat(t.filter((t=>t.linkedTo))),this._axes.forEach((t=>{t.attachAxis(this.axisGroup,this.axisGridGroup),e.delete(t)})),this.zoomManager.updateAxes(this._axes),e.forEach((t=>t.destroy()))}get axes(){return this._axes}set series(t){this.removeAllSeries(),this.seriesLayerManager.setSeriesCount(t.length),t.forEach((t=>this.addSeries(t)))}get series(){return this._series}addSeries(t){const{series:e}=this;return!!(e.indexOf(t)<0)&&(e.push(t),null==t.rootGroup.parent&&this.seriesLayerManager.requestGroup(t),this.initSeries(t),!0)}initSeries(t){const e=this;t.chart={get mode(){return e.mode},get seriesRect(){return e.seriesRect},placeLabels:()=>e.placeLabels()},t.setChartData(this.data),this.addSeriesListeners(t),t.addChartEventListeners()}removeAllSeries(){this.series.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.destroy(),t.chart=void 0})),this._series=[]}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick)}updateAllSeriesListeners(){this.series.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)}))}assignSeriesToAxes(){this.axes.forEach((t=>{t.boundSeries=this.series.filter((e=>e.axes[t.direction]===t))}))}assignAxesToSeries(){const t={};this.axes.forEach((e=>{var i;const o=e.direction;(null!==(i=t[o])&&void 0!==i?i:t[o]=[]).push(e)})),this.series.forEach((e=>{e.directions.forEach((i=>{const o=t[i];if(!o)return void xA.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const n=e.getKeys(i),r=this.findMatchingAxis(o,n);r?e.axes[i]=r:xA.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`)}))}))}findMatchingAxis(t,e){for(const i of t){const t=i.keys;if(!t.length)return i;if(e)for(const o of e)if(t.indexOf(o)>=0)return i}}rawResize(t){var e;let{width:i,height:o}=t;if(i=Math.floor(i),o=Math.floor(o),!this.autoSize)return;if(0===i&&0===o)return;const[n=0,r=0]=null!==(e=this._lastAutoSize)&&void 0!==e?e:[];n===i&&r===o||(this._lastAutoSize=[i,o],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var o,n,r,s;if(null!==t&&void 0!==t||(t=null!==(o=this.width)&&void 0!==o?o:this.autoSize?null===(n=this._lastAutoSize)||void 0===n?void 0:n[0]:this.scene.canvas.width),null!==e&&void 0!==e||(e=null!==(r=this.height)&&void 0!==r?r:this.autoSize?null===(s=this._lastAutoSize)||void 0===s?void 0:s[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${i}`,{width:t,height:e,stack:(new Error).stack}),t&&e&&Number.isFinite(t)&&Number.isFinite(e)&&this.scene.resize(t,e)){this.disablePointer(),this.animationManager.reset();let t=!0;this.autoSize&&this._firstAutoSize&&(t=!1,this._firstAutoSize=!1),this.update(BN.PERFORM_LAYOUT,{forceNodeDataRefresh:!0,skipAnimations:t})}}processData(){return hA(this,void 0,void 0,(function*(){this.series.some((t=>t.canHaveAxes))&&(this.assignAxesToSeries(),this.assignSeriesToAxes());const t=new KN(this.mode),e=this.series.map((e=>e.processData(t)));yield t.execute(),yield Promise.all(e),yield this.updateLegend()}))}placeLabels(){const t=[],e=[];for(const r of this.series){if(!r.visible)continue;const o=r.getLabelData();o&&(null!=(i=o[0])&&"object"===typeof i.point&&"object"===typeof i.label)&&(e.push(o),t.push(r))}var i;const{seriesRect:o}=this,n=o&&e.length>0?function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const o=[];t=t.map((t=>t.slice().sort(((t,e)=>e.point.size-t.point.size))));for(let l=0;l<t.length;l++){const c=o[l]=[],d=t[l];if((null===d||void 0===d?void 0:d.length)&&d[0].label)for(let l=0,u=d.length;l<u;l++){const u=d[l],h=u.label,p=.5*u.point.size,f=u.point.x-.5*h.width,g=u.point.y-p-h.height-i,{width:v,height:y}=h;if(e&&(s=g,a=y,!((r=f)+v<(n=e).x+n.width&&r>n.x&&s>n.y&&s+a<n.y+n.height)))continue;const m=t.some((t=>t.some((t=>qP(t.point,f,g,v,y)))));if(m)continue;const b=o.some((t=>t.some((t=>ZP(t,f,g,v,y)))));b||c.push({index:l,text:h.text,x:f,y:g,width:v,height:y,datum:u})}}var n,r,s,a;return o}(e,{x:0,y:0,width:o.width,height:o.height}):[];return new Map(n.map(((e,i)=>[t[i],e])))}updateLegend(){return hA(this,void 0,void 0,(function*(){this.legends.forEach(((t,e)=>{const i=this.series.filter((t=>t.showInLegend)).flatMap((t=>t.getLegendData(e)));i.every((t=>"category"===t.legendType))&&this.validateCategoryLegendData(i),t.data=i}))}))}validateCategoryLegendData(t){const e={};t.forEach((t=>{var i,o,n,r,s;const a=null===(i=this.series.find((e=>e.id===t.seriesId)))||void 0===i?void 0:i.type;a&&(null!==(o=e[a])&&void 0!==o||(e[a]={}),null!==(n=(r=e[a])[s=t.label.text])&&void 0!==n||(r[s]=new Set),null!=t.marker.fill&&e[a][t.label.text].add(t.marker.fill))}));for(const i of Object.values(e))for(const[t,e]of Object.entries(i))e.size>1&&xA.warnOnce(`legend item '${t}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){var t;return hA(this,void 0,void 0,(function*(){const e=this.animationRect;yield this.performLayout(),e&&!(null===(t=this.animationRect)||void 0===t?void 0:t.equals(e))&&this.animationManager.skipCurrentBatch(),this.handleNoDataOverlay(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}))}performLayout(){return hA(this,void 0,void 0,(function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:t,height:e}=this.scene;let i={shrinkRect:new aM(0,0,t,e)};return i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i),i.shrinkRect}))}pickSeriesNode(t,e,i){var o,n;const r=performance.now(),s=e?[wR.EXACT_SHAPE_MATCH]:void 0,a=[...this.series].reverse();let l;for(const c of a){if(!c.visible||!c.rootGroup.visible)continue;const{match:e,distance:n}=null!==(o=c.pickNode(t,s))&&void 0!==o?o:{};if(e&&null!=n&&((!l||l.distance>n)&&n<=(null!==i&&void 0!==i?i:1/0)&&(l={series:c,distance:n,datum:e}),0===n))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!==(n=this.extraDebugStats.pickSeriesNode)&&void 0!==n?n:0)+(performance.now()-r)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(BN.SCENE_RENDER)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||this.disablePointer()}handlePointer(t){var e=this;const{lastPick:i,hoverRect:o}=this,{offsetX:n,offsetY:r}=t,s=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];i&&e.disablePointer(t)};(null===o||void 0===o?void 0:o.containsPoint(n,r))?(this.handlePointerTooltip(t,s),this.handlePointerNode(t)):s()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:o}=this,{range:n}=o,{offsetX:r,offsetY:s}=t;let a;"number"===typeof n&&Number.isFinite(n)&&(a=n);const l=this.pickSeriesNode({x:r,y:s},"exact"===n,a);if(!l)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const c="node"===this.highlight.range||!i||i.datum!==l.datum;let d;c?(d=l.series.getTooltipHtml(l.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,l.datum)):i&&(i.event=t.sourceEvent);const u=null!=a,h=this.tooltip.enabled&&l.series.tooltip.enabled,p="exact"===n&&0===l.distance,f=h&&("nearest"===n||u||p)&&(!c||void 0!==d),g=nL.makeTooltipMeta(t,this.scene.canvas,l.datum,this.specialOverrides.window);f&&this.tooltipManager.updateTooltip(this.id,g,d)}handlePointerNode(t){this.checkSeriesNodeRange(t,((t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)}))||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(BN.SERIES_UPDATE):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(BN.SERIES_UPDATE):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,((e,i)=>e.fireNodeClickEvent(t.sourceEvent,i)))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,((e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i)))}checkSeriesNodeRange(t,e){const i=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),o=null===i||void 0===i?void 0:i.datum,n=null===o||void 0===o?void 0:o.series.nodeClickRange;let r;"number"===typeof n&&Number.isFinite(n)&&(r=n);let s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(s?this.highlightManager.updatePicked(this.id,s.datum):this.highlightManager.updatePicked(this.id),o&&"nearest"===n)return e(o.series,o),!0;if("exact"!==n&&(s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,r)),!s)return!1;const a=null!=r,l="exact"===n&&0===s.distance;return!(!a&&!l)&&(e(s.series,s.datum),!0)}changeHighlightDatum(t){var e,i;const o=new Set,{series:n,datum:r}=null!==(e=t.currentHighlight)&&void 0!==e?e:{},{series:s,datum:a}=null!==(i=t.previousHighlight)&&void 0!==i?i:{};s&&o.add(s),n&&o.add(n),(null===s||void 0===s?void 0:s.cursor)&&a&&this.cursorManager.updateCursor(s.id),(null===n||void 0===n?void 0:n.cursor)&&r&&this.cursorManager.updateCursor(n.id,n.cursor),this.lastPick=t.currentHighlight?{datum:t.currentHighlight}:void 0;null==n||null==s?this.update(BN.SERIES_UPDATE):this.update(BN.SERIES_UPDATE,{seriesToUpdate:o})}waitForUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;return hA(this,void 0,void 0,(function*(){const e=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());this._performUpdateType!==BN.NONE;){if(performance.now()-e>t)throw new Error("waitForUpdate() timeout reached.");yield NN(5)}yield this.updateMutex.waitForClearAcquireQueue()}))}handleNoDataOverlay(){!this.series.some((t=>t.hasData()))&&this.seriesRect?this.overlays.noData.show(this.seriesRect):this.overlays.noData.hide()}getMinRect(){const t=this.series.map((t=>t.getMinRect())).filter((t=>void 0!==t));if(t.length)return new aM(0,0,t.reduce(((t,e)=>Math.max(t,e.width)),0),t.reduce(((t,e)=>Math.max(t,e.height)),0))}}var WL;dA([MM({newValue(t){this.destroyed||t.appendChild(this.element)},oldValue(t){t.removeChild(this.element)}}),uA("design:type",Object)],jL.prototype,"container",void 0),dA([MM({newValue(t){var e;null===(e=this.series)||void 0===e||e.forEach((e=>{e.setChartData(t)}))}}),uA("design:type",Object)],jL.prototype,"data",void 0),dA([MM({newValue(t){this.resize(t,void 0,"width option")}}),uA("design:type",Number)],jL.prototype,"width",void 0),dA([MM({newValue(t){this.resize(void 0,t,"height option")}}),uA("design:type",Number)],jL.prototype,"height",void 0),dA([MM({changeValue(t){this.autoSizeChanged(t)}}),ZA(cT),uA("design:type",Object)],jL.prototype,"autoSize",void 0),dA([MM({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),uA("design:type",Function)],jL.prototype,"title",void 0),dA([MM({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),uA("design:type",Function)],jL.prototype,"subtitle",void 0),dA([MM({newValue(t){var e;null===(e=this.scene.root)||void 0===e||e.appendChild(t.node)},oldValue(t){var e;null===(e=this.scene.root)||void 0===e||e.removeChild(t.node)}}),uA("design:type",Function)],jL.prototype,"footnote",void 0),dA([ZA(MT("standalone","integrated")),uA("design:type",String)],jL.prototype,"mode",void 0),function(t){t[t.Open=0]="Open",t[t.Chord=1]="Chord",t[t.Round=2]="Round"}(WL||(WL={}));class zL extends Rk{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=WL.Open,this.restoreOwnStyles()}get fullPie(){return UA(BA(this.startAngle),BA(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===WL.Chord?t.closePath():this.type!==WL.Round||this.fullPie||(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new aM(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),o=this.computeBBox();return this.type!==WL.Open&&o.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}}zL.className="Arc",zL.defaultStyles=Object.assign({},bM.defaultStyles,{lineWidth:1,fillStyle:null}),dA([kk(),uA("design:type",Number)],zL.prototype,"centerX",void 0),dA([kk(),uA("design:type",Number)],zL.prototype,"centerY",void 0),dA([kk(),uA("design:type",Number)],zL.prototype,"radius",void 0),dA([kk(),uA("design:type",Number)],zL.prototype,"startAngle",void 0),dA([kk(),uA("design:type",Number)],zL.prototype,"endAngle",void 0),dA([kk(),uA("design:type",Boolean)],zL.prototype,"counterClockwise",void 0),dA([kk(),uA("design:type",Number)],zL.prototype,"type",void 0);const HL=t=>{const e=qA.fromString(t),[i,o,n]=qA.RGBtoHSL(e.r,e.g,e.b);return{h:i,s:o,l:n,a:e.a}};class UL{constructor(){this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(HL)}update(){const{domain:t,range:e}=this;t.length<2&&(xA.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let i=1;i<t.length;i++){if(t[i-1]>=t[i]){xA.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort(((t,e)=>t-e));break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(HL)}convert(t){const{domain:e,range:i,parsedRange:o}=this,n=e[0],r=e[e.length-1],s=i[0],a=i[i.length-1];if(t<=n)return s;if(t>=r)return a;let l,c;if(2===e.length){const e=(t-n)/(r-n),o=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),c=(e-l*o)/o}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];c=(t-i)/(e[l+1]-i)}return((t,e,i)=>{let o,n;if(i=Math.min(Math.max(i,0),1),Number.isNaN(t.h)&&Number.isNaN(e.h))o=0,n=0;else if(Number.isNaN(t.h))o=e.h,n=e.s;else if(Number.isNaN(e.h))o=t.h,n=t.s;else{const r=t.h;let s=e.h;const a=e.h-t.h;a>180?s-=360:a<-180&&(s+=360),o=r*(1-i)+s*i,n=t.s*(1-i)+e.s*i}const r=t.l*(1-i)+e.l*i,s=t.a*(1-i)+e.a*i;return qA.fromHSL(o,n,r,s)})(o[l],o[l+1],c).toRgbaString()}}class KL extends bM{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,o;return null!==(o=null===(i=this.mask)||void 0===i?void 0:i.isPointInPath(t,e))&&void 0!==o&&o}computeBBox(){var t;return null===(t=this.mask)||void 0===t?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:o,devicePixelRatio:n}=t,r=1/n,s=null===e||void 0===e?void 0:e.computeTransformedBBox();if(null==e||null==i||null==s)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),o.save(),o.beginPath(),e.path.draw(o),o.clip(),o.resetTransform();const a=Math.floor(s.x),l=Math.ceil(s.x+s.width),c=Math.floor(s.y),d=Math.ceil(s.y+s.height),u=new UL,[h,p]="to-right"===this.direction?[a,l]:[c,d];if(u.domain=i.map(((t,e)=>h+(p-h)*e/(i.length-1))),u.range=i,u.update(),"to-right"===this.direction){const t=d-c;for(let e=a;e<=l;e+=r)o.fillStyle=u.convert(e),o.fillRect(e,c,r,t)}else{const t=l-a;for(let e=c;e<=d;e+=r)o.fillStyle=u.convert(e),o.fillRect(a,e,t,r)}o.restore()}}dA([iM({redraw:tM.MAJOR}),uA("design:type",String)],KL.prototype,"direction",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Array)],KL.prototype,"stops",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Function)],KL.prototype,"_mask",void 0);class YL extends Rk{constructor(){super(...arguments),this.borderPath=new Mk,this.x=0,this.y=0,this.width=10,this.height=10,this.radius=0,this.crisp=!1,this.lastUpdatePathStrokeWidth=bM.defaultStyles.strokeWidth,this.effectiveStrokeWidth=bM.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}isDirtyPath(){var t;return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty()||(null===(t=this.clipPath)||void 0===t?void 0:t.isDirty()))}updatePath(){var t,e,i;const{path:o,borderPath:n,crisp:r}=this;let{x:s,y:a,width:l,height:c,strokeWidth:d}=this;const u=1/(null!==(e=null===(t=this.layerManager)||void 0===t?void 0:t.canvas.pixelRatio)&&void 0!==e?e:1);let h=1;if(o.clear({trackChanges:!0}),n.clear({trackChanges:!0}),r&&(l<=u&&(h*=l/u),c<=u&&(h*=c/u),l=this.align(s,l),c=this.align(a,c),s=this.align(s),a=this.align(a)),d)if(l<u){const t=s+u/2;n.moveTo(t,a),n.lineTo(t,a+c),d=u,this.borderClipPath=void 0}else if(c<u){const t=a+u/2;n.moveTo(s,t),n.lineTo(s+l,t),d=u,this.borderClipPath=void 0}else if(d<l&&d<c){const t=d/2;s+=t,a+=t,l-=d,c-=d,this.borderClipPath=void 0,o.rect(s,a,l,c),n.rect(s,a,l,c)}else this.borderClipPath=null!==(i=this.borderClipPath)&&void 0!==i?i:new Mk,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(s,a,l,c),n.rect(s,a,l,c);else this.borderClipPath=void 0,o.rect(s,a,l,c);this.effectiveStrokeWidth=d,this.lastUpdatePathStrokeWidth=d,this.microPixelEffectOpacity=h}computeBBox(){const{x:t,y:e,width:i,height:o}=this;return new aM(t,e,i,o)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:o}=this,{globalAlpha:n}=t;t.globalAlpha=n*o*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:o,borderClipPath:n,opacity:r,microPixelEffectOpacity:s}=this;if(!!e&&!!i){const{strokeOpacity:a,lineDash:l,lineDashOffset:c,lineCap:d,lineJoin:u}=this;n&&(n.draw(t),t.clip()),o.draw(t);const{globalAlpha:h}=t;t.strokeStyle=e,t.globalAlpha=h*r*a*s,t.lineWidth=i,l&&t.setLineDash(l),c&&(t.lineDashOffset=c),d&&(t.lineCap=d),u&&(t.lineJoin=u),t.stroke(),t.globalAlpha=h}}}YL.className="Rect",dA([kk(),uA("design:type",Number)],YL.prototype,"x",void 0),dA([kk(),uA("design:type",Number)],YL.prototype,"y",void 0),dA([kk(),uA("design:type",Number)],YL.prototype,"width",void 0),dA([kk(),uA("design:type",Number)],YL.prototype,"height",void 0),dA([kk(),uA("design:type",Number)],YL.prototype,"radius",void 0),dA([kk(),uA("design:type",Boolean)],YL.prototype,"crisp",void 0);class XL extends uM{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:o}=t;if(this.dirty===tM.NONE&&!i)return void(o&&o.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const n=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(t)}}dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],XL.prototype,"x",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],XL.prototype,"y",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],XL.prototype,"width",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],XL.prototype,"height",void 0),dA([iM({redraw:tM.MAJOR}),uA("design:type",Number)],XL.prototype,"opacity",void 0);const $L=Object.assign(Object.assign({},KM),uP);var qL=Object.freeze({__proto__:null,motion:$L,Caption:kM,DropShadow:hM,Group:mk,Scene:PN,Node:uM,get PointerEvents(){return cM},get RedrawType(){return tM},SceneChangeDetection:iM,Selection:bk,Arc:zL,Line:Sk,LinearGradientFill:KL,Path:Rk,ScenePathChangeDetection:kk,Rect:YL,Sector:Pk,Shape:bM,Text:xM,getFont:CM,ContinuousScale:fk,BandScale:zA,LinearScale:gk,toRadians:jA,Label:sR,Marker:uR,getMarker:SL,Circle:hR,Diamond:hL,Square:gL,Triangle:vL,Tooltip:nP,toTooltipHtml:tP,BBox:aM,nearestSquared:sM,nearestSquaredInContainer:function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const o=e.transformPoint(t.x,t.y),n={nearest:void 0,distanceSquared:i};for(const r of e.children){const{nearest:t,distanceSquared:e}=r.nearestSquared(o,n.distanceSquared);if(0===e)return{nearest:t,distanceSquared:e};e<n.distanceSquared&&(n.nearest=t,n.distanceSquared=e)}return n},HdpiCanvas:gM,Image:XL,Path2D:Mk,easing:FM});const ZL={[QT.X]:["xKey"],[QT.Y]:["yKey"]},JL={[QT.X]:["xName"],[QT.Y]:["yName"]};class QL extends RR{constructor(t,e,i,o){super(t,e,i,o),this.xKey=o.xKey,this.yKey=o.yKey}}class t_ extends pP{get contextNodeData(){return this._contextNodeData.slice()}constructor(t){var{pathsPerSeries:e=1,hasMarkers:i=!1,hasHighlightedLabels:o=!1,pathsZIndexSubOrderOffset:n=[],directionKeys:r=ZL,directionNames:s=JL,datumSelectionGarbageCollection:a=!0,markerSelectionGarbageCollection:l=!0,animationResetFns:c}=t,d=cA(t,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationResetFns"]);super(Object.assign({directionKeys:r,directionNames:s,useSeriesGroupLayer:!0,canHaveAxes:!0},d)),this.legendItemName=void 0,this._contextNodeData=[],this.NodeClickEvent=QL,this.highlightSelection=bk.select(this.highlightNode,(()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory())),this.highlightLabelSelection=bk.select(this.highlightLabel,xM),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=EA.create(),this.opts={pathsPerSeries:e,hasMarkers:i,hasHighlightedLabels:o,pathsZIndexSubOrderOffset:n,directionKeys:r,directionNames:s,animationResetFns:c,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:l},this.animationState=new hP("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},(()=>this.checkProcessedDataAnimatable()))}addChartEventListeners(){this.ctx.chartEventManager.addListener("legend-item-click",(t=>this.onLegendItemClick(t))),this.ctx.chartEventManager.addListener("legend-item-double-click",(t=>this.onLegendItemDoubleClick(t)))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update(t){let{seriesRect:e}=t;var i,o;return hA(this,void 0,void 0,(function*(){const{visible:t,_contextNodeData:n}=this,{series:r}=null!==(o=null===(i=this.ctx.highlightManager)||void 0===i?void 0:i.getActiveHighlight())&&void 0!==o?o:{},s=r?r===this:void 0,a=this.checkResize(e),l=yield this.updateHighlightSelection(s);yield this.updateSelections(t),yield this.updateNodes(l,s,t);const c=this.getAnimationData(e,n);a&&this.animationState.transition("resize",c),this.animationState.transition("update",c)}))}updateSelections(t){return hA(this,void 0,void 0,(function*(){if((t||!this.ctx.animationManager.isSkipped())&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData.forEach((e=>{var i;null!==(i=e.animationValid)&&void 0!==i||(e.animationValid=t)})),yield this.updateSeriesGroups();const{dataModel:e,processedData:i}=this;void 0!==e&&void 0!==i&&this.dispatch("data-update",{dataModel:e,processedData:i})}yield Promise.all(this.subGroups.map(((t,e)=>this.updateSeriesGroupSelections(t,e))))}}))}updateSeriesGroupSelections(t,e,i){return hA(this,void 0,void 0,(function*(){const{datumSelection:o,labelSelection:n,markerSelection:r,paths:s}=t,a=this._contextNodeData[e],{nodeData:l,labelData:c,itemId:d}=a;yield this.updatePaths({seriesHighlighted:i,itemId:d,contextData:a,paths:s,seriesIdx:e}),t.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:o,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:c,labelSelection:n,seriesIdx:e}),r&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:r,seriesIdx:e}))}))}markerFactory(){return new(SL())}updateSeriesGroups(){return hA(this,void 0,void 0,(function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:o,hasMarkers:n,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:s}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach((t=>{let{dataNodeGroup:i,markerGroup:o,labelGroup:n,paths:r}=t;e.removeChild(i),o&&e.removeChild(o),n&&e.removeChild(n);for(const s of r)e.removeChild(s)}));const a=t.length;for(;a>i.length;){const t=!1,a=this.subGroupId++,l=new mk({name:`${this.id}-series-sub${a}-dataNodes`,layer:t,zIndex:dR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("data",a)}),c=n?new mk({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:t,zIndex:dR.SERIES_LAYER_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",a)}):void 0,d=new mk({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:t,zIndex:dR.SERIES_LABEL_ZINDEX,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",a)});e.appendChild(l),e.appendChild(d),c&&e.appendChild(c);const u=[];for(let i=0;i<o;i++)u[i]=new Rk,u[i].zIndex=dR.SERIES_LAYER_ZINDEX,u[i].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",i),e.appendChild(u[i]);i.push({paths:u,dataNodeGroup:l,markerGroup:c,labelGroup:d,labelSelection:bk.select(d,xM),datumSelection:bk.select(l,(()=>this.nodeFactory()),r),markerSelection:c?bk.select(c,(()=>this.markerFactory()),s):void 0})}}))}getGroupZIndexSubOrder(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var i;const o=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const t=null!==(i=this.opts.pathsZIndexSubOrderOffset[e])&&void 0!==i?i:0,n=o[0];o[0]="function"===typeof n?()=>+n()+t:+n+t}return o}updateNodes(t,e,i){var o;return hA(this,void 0,void 0,(function*(){const{highlightSelection:n,highlightLabelSelection:r,opts:{hasMarkers:s,hasHighlightedLabels:a}}=this,l=!this.ctx.animationManager.isSkipped(),c=this.visible&&(null===(o=this._contextNodeData)||void 0===o?void 0:o.length)>0&&i;this.rootGroup.visible=l||c,this.contentGroup.visible=l||c,this.highlightGroup.visible=(l||c)&&!!e;const d=this.getOpacity();s?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),a&&(yield this.updateLabelNodes({labelSelection:r,seriesIdx:-1})),yield Promise.all(this.subGroups.map(((i,o)=>hA(this,void 0,void 0,(function*(){const{dataNodeGroup:n,markerGroup:r,datumSelection:a,labelSelection:u,markerSelection:h,paths:p,labelGroup:f}=i,{itemId:g}=this.contextNodeData[o],v=c;n.opacity=d,n.visible=l||v,f.visible=v,r&&(r.opacity=d,r.zIndex=n.zIndex>=dR.SERIES_LAYER_ZINDEX?n.zIndex:n.zIndex+1,r.visible=v),f&&(f.opacity=d),yield this.updatePathNodes({seriesHighlighted:e,itemId:g,paths:p,seriesIdx:o,opacity:d,visible:v,animationEnabled:l}),n.visible&&(yield this.updateDatumNodes({datumSelection:a,highlightedItems:t,isHighlight:!1,seriesIdx:o}),yield this.updateLabelNodes({labelSelection:u,seriesIdx:o}),s&&h&&(yield this.updateMarkerNodes({markerSelection:h,isHighlight:!1,seriesIdx:o})))})))))}))}getHighlightLabelData(t,e){const i=t.find((t=>t.datum===e.datum&&t.itemId===e.itemId));return i?[i]:void 0}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){var e;return hA(this,void 0,void 0,(function*(){const{highlightSelection:i,highlightLabelSelection:o,_contextNodeData:n}=this,r=null===(e=this.ctx.highlightManager)||void 0===e?void 0:e.getActiveHighlight(),s=t&&(null===r||void 0===r?void 0:r.datum)?r:void 0;let a,l;if(null!=s){const t=this.isLabelEnabled();for(const{labelData:e,nodeData:i}of n)if(l=this.getHighlightData(i,s),a=t?this.getHighlightLabelData(e,s):void 0,(!t||null!=a)&&null!=l)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:o}),l}))}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:o,y:n}=t,{opts:{hasMarkers:r}}=this;for(const{dataNodeGroup:s,markerGroup:a}of this.subGroups){let t=s.pickNode(o,n);if(!t&&r&&(t=null===a||void 0===a?void 0:a.pickNode(o,n)),t)break}for(const s of this.moduleMap){const{datum:i}=null!==(e=s.pickNodeExact(t))&&void 0!==e?e:{};if(void 0!==i)return{datum:i,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:o,y:n}=t,{axes:r,rootGroup:s,_contextNodeData:a}=this,l=r[QT.X],c=r[QT.Y],d=s.transformPoint(o,n);let u,h=1/0;for(const p of a)for(const t of p.nodeData){const{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i))continue;if(!((null===l||void 0===l?void 0:l.inRange(e))&&(null===c||void 0===c?void 0:c.inRange(i))))continue;const o=Math.max(Math.pow(d.x-e,2)+Math.pow(d.y-i,2),0);o<h&&(h=o,u=t)}for(const p of this.moduleMap){const e=p.pickNodeNearest(t);if(void 0!==e&&e.distanceSquared<h){h=e.distanceSquared,u=e.datum;break}}if(u){return{datum:u,distance:Math.max(Math.sqrt(h)-(null!==(i=null===(e=u.point)||void 0===e?void 0:e.size)&&void 0!==i?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,o;const{x:n,y:r}=t,{axes:s,rootGroup:a,_contextNodeData:l}=this,c=s[QT.X],d=s[QT.Y],u=[c,d].filter((t=>t instanceof vN)).map((t=>t.direction));if(e&&0===u.length)return;const[h=QT.X]=u,p=a.transformPoint(n,r),f=h===QT.X?[p.x,p.y]:[p.y,p.x],g=[1/0,1/0];let v;for(const y of l)for(const t of y.nodeData){const{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i))continue;if(!((null===c||void 0===c?void 0:c.inRange(e))&&(null===d||void 0===d?void 0:d.inRange(i))))continue;const o=h===QT.X?[e,i]:[i,e];let n=!0;for(let t=0;t<o.length;t++){const e=Math.abs(o[t]-f[t]);if(e>g[t]){n=!1;break}e<g[t]&&(g[t]=e,g.fill(1/0,t+1,g.length))}n&&(v=t)}if(v){let e=Math.max(Math.pow(g[0],2)+Math.pow(g[1],2)-(null!==(o=null===(i=v.point)||void 0===i?void 0:i.size)&&void 0!==o?o:0),0);for(const i of this.moduleMap){const o=i.pickNodeMainAxisFirst(t);if(void 0!==o&&o.distanceSquared<e){v=o.datum,e=o.distanceSquared;break}}return{datum:v,distance:Math.sqrt(e)}}}onLegendItemClick(t){const{enabled:e,itemId:i,series:o,legendItemName:n}=t,r=null!=this.legendItemName&&this.legendItemName===n;(o.id===this.id||r)&&this.toggleSeriesItem(i,e)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:o,numVisibleItems:n,legendItemName:r}=t,s=Object.values(n).reduce(((t,e)=>t+e),0),a=null!=this.legendItemName&&this.legendItemName===r;o.id===this.id||a||e&&1===s?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[t]=this._contextNodeData;if(!t||0==t.nodeData.length)return;const e=t.nodeData.map((t=>{let{midPoint:e}=t;var i;return null!==(i=null===e||void 0===e?void 0:e.x)&&void 0!==i?i:0})).sort(((t,e)=>t-e)).reduce(((t,e,i,o)=>i>0?Math.max(t,e-o[i-1]):t),0),i=t.nodeData.map((t=>{let{midPoint:e}=t;var i;return null!==(i=null===e||void 0===e?void 0:e.y)&&void 0!==i?i:0})).sort(((t,e)=>t-e)).reduce(((t,e,i,o)=>i>0?Math.max(t,e-o[i-1]):t),0);return new aM(0,0,e,i)}updateHighlightSelectionItem(t){return hA(this,void 0,void 0,(function*(){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:o}=t,n=null!==i&&void 0!==i?i:[];if(e){const t=o;return this.updateMarkerSelection({nodeData:n,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:n,datumSelection:o,seriesIdx:-1})}))}updateHighlightSelectionLabel(t){return hA(this,void 0,void 0,(function*(){const{items:e,highlightLabelSelection:i}=t,o=null!==e&&void 0!==e?e:[];return this.updateLabelSelection({labelData:o,labelSelection:i,seriesIdx:-1})}))}updateDatumSelection(t){return hA(this,void 0,void 0,(function*(){return t.datumSelection}))}updateDatumNodes(t){return hA(this,void 0,void 0,(function*(){}))}updateMarkerSelection(t){return hA(this,void 0,void 0,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return hA(this,void 0,void 0,(function*(){}))}updatePaths(t){return hA(this,void 0,void 0,(function*(){t.paths.forEach((t=>t.visible=!1))}))}updatePathNodes(t){return hA(this,void 0,void 0,(function*(){const{paths:e,opacity:i,visible:o}=t;for(const t of e)t.opacity=i,t.visible=o}))}resetAllAnimation(t){var e,i;const{path:o,datum:n,label:r,marker:s}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),o&&t.paths.forEach((t=>{cP(t,o)})),n&&cP(t.datumSelections,n),r&&cP(t.labelSelections,r),s&&cP(t.markerSelections,s),t.contextData.some((t=>!1===t.animationValid))&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:o}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};o&&cP([t],o)}animateReadyHighlightMarkers(t){var e,i;const{marker:o}=null!==(i=null===(e=this.opts)||void 0===e?void 0:e.animationResetFns)&&void 0!==i?i:{};o&&cP([t],o)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t,e){return{datumSelections:this.subGroups.map((t=>{let{datumSelection:e}=t;return e})),markerSelections:this.subGroups.filter((t=>{let{markerSelection:e}=t;return void 0!==e})).map((t=>{let{markerSelection:e}=t;return e})),labelSelections:this.subGroups.map((t=>{let{labelSelection:e}=t;return e})),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map((t=>{let{paths:e}=t;return e})),seriesRect:t}}calculateScaling(){const t={},e=e=>{const i=this.axes[e];if(i)if(i.scale instanceof WP){const{range:o,domain:n}=i.scale;t[e]={type:"log",convert:t=>i.scale.convert(t),domain:[n[0],n[1]],range:[o[0],o[1]]}}else if(i.scale instanceof fk){const{range:o}=i.scale,n=i.scale.getDomain();t[e]={type:"continuous",domain:[n[0],n[1]],range:[o[0],o[1]]}}else if(i.scale){const{domain:o}=i.scale;t[e]={type:"category",domain:o,range:o.map((t=>i.scale.convert(t)))}}};return e(QT.X),e(QT.Y),t}}dA([ZA(hT),uA("design:type",String)],t_.prototype,"legendItemName",void 0);const e_=["top","right","bottom","left"];class i_ extends jL{constructor(t,e){super(t,e),this.paired=!0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return hA(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{animationRect:i,seriesRect:o,visibility:n,clipSeries:r}=this.updateAxes(e);this.seriesRoot.visible=n.series,this.seriesRect=o,this.animationRect=i,this.seriesRoot.translationX=Math.floor(o.x),this.seriesRoot.translationY=Math.floor(o.y);const{seriesArea:{padding:s}}=this,a=o.clone().grow({top:s.top,right:s.right,bottom:s.bottom,left:s.left});return this.hoverRect=a,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:r,series:{rect:o,paddedRect:a,visible:n.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map((t=>Object.assign({id:t.id},t.getLayoutState())))}),e}))}updateAxes(t){var e;const i=Object.assign({},this._lastAxisWidths),o=Object.assign({},this._lastVisibility),n=new Set(this._axes.map((t=>t.position)));for(const p of Object.keys(i))n.has(p)||delete i[p];const r=(t,e)=>!Object.keys(t).some((t=>null==i[t]))&&(o.crossLines===e.crossLines&&o.series===e.series&&Object.entries(i).every((e=>{let[i,o]=e;const n=t[i];return null==o&&null==n||o===n})));let s={},a={},l=!1,c=null===(e=this.seriesRect)||void 0===e?void 0:e.clone(),d=0,u={};do{Object.assign(i,s),Object.assign(o,a);const e=this.updateAxesPass(i,t.clone(),c);if(h=e.axisWidths,s=Object.entries(h).reduce(((t,e)=>{let[i,o]=e;return o&&Math.abs(o)===1/0&&(o=0),t[i]=null!=o?Math.ceil(o):o,t}),{}),a=e.visibility,l=e.clipSeries,c=e.seriesRect,u=e.primaryTickCounts,d++>10){xA.warn("unable to find stable axis layout.");break}}while(!r(s,a));var h;this.axes.forEach((t=>{const{direction:e}=t,i=u[e];t.update(i)}));return this.axes.forEach((e=>{if(e.setCrossLinesVisible(o.crossLines),c)switch(e.clipGrid(c.x,c.y,c.width+5,c.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,c.y,t.width+5,c.height+5);break;case"top":case"bottom":e.clipTickLines(c.x,t.y,c.width+5,t.height+5)}})),this._lastAxisWidths=i,this._lastVisibility=o,{seriesRect:c,animationRect:t,visibility:o,clipSeries:l}}updateAxesPass(t,e,i){const{axes:o}=this,n={},r={},s={series:!0,crossLines:!0};let a=!1;const l={},c=this.applySeriesPadding(e),d=i?this.buildCrossLinePadding(t):{},u=this.buildAxisBound(c,t,d,s),h=this.buildSeriesRect(u,t);return o.forEach((e=>{var i,o;const{position:s="left"}=e,{clipSeries:d,axisThickness:p,axisOffset:f}=this.calculateAxisDimensions({axis:e,seriesRect:h,paddedBounds:c,axisWidths:t,newAxisWidths:r,primaryTickCounts:l,clipSeries:a,addInterAxisPadding:(null!==(i=n[s])&&void 0!==i?i:0)>0});n[s]=(null!==(o=n[s])&&void 0!==o?o:0)+1,a=a||d,this.positionAxis({axis:e,axisBound:u,axisOffset:f,axisThickness:p,axisWidths:t,primaryTickCounts:l,seriesRect:h})})),{clipSeries:a,seriesRect:h,axisWidths:r,visibility:s,primaryTickCounts:l}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach((t=>{t.crossLines&&t.crossLines.forEach((t=>{t.calculatePadding(i)}))}));for(const[o,n=0]of Object.entries(i))i[o]=Math.max(n-(null!==(e=t[o])&&void 0!==e?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return e_.forEach((t=>{const o=this.seriesArea.padding[t],n=i.find((e=>e.position===t));n?n.seriesAreaPadding=o:e.shrink(o,t)})),e}buildAxisBound(t,e,i,o){var n,r,s,a;const l=t.clone(),{top:c=0,right:d=0,bottom:u=0,left:h=0}=i,p=h+d,f=c+u,g=(null!==(n=e.left)&&void 0!==n?n:0)+(null!==(r=e.right)&&void 0!==r?r:0)+p,v=(null!==(s=e.top)&&void 0!==s?s:0)+(null!==(a=e.bottom)&&void 0!==a?a:0)+f;return l.width<=g||l.height<=v?(o.crossLines=!1,o.series=!1,l):(l.x+=h,l.y+=c,l.width-=p,l.height-=f,l)}buildSeriesRect(t,e){const i=t.clone(),{top:o,bottom:n,left:r,right:s}=e;return i.x+=null!==r&&void 0!==r?r:0,i.y+=null!==o&&void 0!==o?o:0,i.width-=(null!==r&&void 0!==r?r:0)+(null!==s&&void 0!==s?s:0),i.height-=(null!==o&&void 0!==o?o:0)+(null!==n&&void 0!==n?n:0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,o){const{x:n,y:r,width:s,height:a}=t,l=[n,r,n+s,r+a];return(1===o?Math.min:Math.max)(e,l[("x"===i?0:1)+(1===o?0:2)])}calculateAxisDimensions(t){var e,i,o,n,r;const{axis:s,seriesRect:a,paddedBounds:l,axisWidths:c,newAxisWidths:d,primaryTickCounts:u,addInterAxisPadding:h}=t;let{clipSeries:p}=t;const{position:f="left",direction:g}=s,v=null!==(e=d[f])&&void 0!==e?e:0;switch(f){case"top":case"bottom":s.range=[0,a.width],s.gridLength=a.height;break;case"right":case"left":s.range=(t=>t instanceof vN||t instanceof TN?[0,a.height]:[a.height,0])(s),s.gridLength=a.width}const y=this.zoomManager.getAxisZoom(s.id),{min:m=0,max:b=1}=null!==y&&void 0!==y?y:{};s.visibleRange=[m,b];const S=s.dataDomain.clipped||s.visibleRange[0]>0||s.visibleRange[1]<1;p||(p=S);let x=s.nice?u[g]:void 0;null!=s.thickness&&s.thickness>0?s.maxThickness=s.thickness:g===QT.Y?s.maxThickness=.3*l.width:s.maxThickness=.3*l.height;const C=s.calculateLayout(x);x=C.primaryTickCount,u[g]=null!==(i=u[g])&&void 0!==i?i:x;let w=0;if(null!=s.thickness&&s.thickness>0)w=s.thickness;else{const{bbox:t}=C;w=g===QT.X?t.height:t.width}return h&&(w+=15),w=Math.ceil(w),d[f]=(null!==(o=d[f])&&void 0!==o?o:0)+w,s.gridPadding=(null!==(n=c[f])&&void 0!==n?n:0)-(null!==(r=d[f])&&void 0!==r?r:0),{clipSeries:p,axisThickness:w,axisOffset:v,primaryTickCount:x}}positionAxis(t){var e,i,o,n;const{axis:r,axisBound:s,axisWidths:a,seriesRect:l,axisOffset:c,axisThickness:d}=t,{position:u}=r;switch(u){case"top":r.translation.x=s.x+(null!==(e=a.left)&&void 0!==e?e:0),r.translation.y=this.clampToOutsideSeriesRect(l,s.y+1+c+d,"y",1);break;case"bottom":r.translation.x=s.x+(null!==(i=a.left)&&void 0!==i?i:0),r.translation.y=this.clampToOutsideSeriesRect(l,s.y+s.height+1-d-c,"y",-1);break;case"left":r.translation.y=s.y+(null!==(o=a.top)&&void 0!==o?o:0),r.translation.x=this.clampToOutsideSeriesRect(l,s.x+c+d,"x",1);break;case"right":r.translation.y=s.y+(null!==(n=a.top)&&void 0!==n?n:0),r.translation.x=this.clampToOutsideSeriesRect(l,s.x+s.width-d-c,"x",-1)}r.updatePosition({rotation:jA(r.rotation),sideFlag:r.label.getSideFlag()})}shouldFlipXY(){return!this.series.some((t=>!(t instanceof t_&&t.shouldFlipXY())))}}function o_(t,e){let i=Math.floor(t[0]),o=t[1];i=function(t,e,i){const o=Math.abs(e-t)/(i-1),n=Math.floor(Math.log10(o)),r=Math.pow(10,n);return Math.floor(t/r)*r}(i,o,e);const n=function(t,e,i){const o=i-1,n=(e-t)/o;return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),o=t/i*10;if(o>0&&o<=1)return i/10;if(o>1&&o<=2)return 2*i/10;if(o>1&&o<=5)return 5*i/10;if(o>5&&o<=10)return 10*i/10;if(o>10&&o<=20)return 20*i/10;if(o>20&&o<=40)return 40*i/10;if(o>40&&o<=50)return 50*i/10;if(o>50&&o<=100)return 100*i/10;return o}(n)}(i,o,e);o=i+(e-1)*n;const r=[i,o],s=function(t,e,i){const o=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(o):0,r=Math.pow(10,n),s=new hk(n);for(let a=0;a<i;a++){const i=t+e*a;s[a]=Math.round(i*r)/r}return s}(i,n,e);return[r,s]}i_.className="CartesianChart",i_.type="cartesian";class n_ extends rN{constructor(){super(...arguments),this.maxSpacing=NaN}}dA([ZA(oT(OT(1),sT("minSpacing"))),eN(NaN),uA("design:type",Number)],n_.prototype,"maxSpacing",void 0);class r_ extends gN{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gk),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:n}=vA(t,e,i);return{domain:o,clipped:n}}formatDatum(t){return"number"===typeof t?t.toFixed(2):(xA.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new n_}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=o_(this.dataDomain.domain,null!==t&&void 0!==t?t:0);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}}function s_(){return QA((t=>"number"===typeof t&&0!==t),"expecting a non-zero Number")}r_.className="NumberAxis",r_.type="number",dA([ZA(oT(OT(),rT("max"))),eN(NaN),uA("design:type",Number)],r_.prototype,"min",void 0),dA([ZA(oT(OT(),sT("min"))),eN(NaN),uA("design:type",Number)],r_.prototype,"max",void 0);class a_ extends r_{normaliseDataDomain(t){const{min:e,max:i}=this,{extent:o,clipped:n}=vA(t,e,i),r=o[0]>o[1],s=o[0]<0&&o[1]>0,a=0===o[0]&&0===o[1];return(r||s||a)&&(t=[],s?xA.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&xA.warn("the data domain has 0 extent, no data is rendered.")),0===o[0]&&(o[0]=1),0===o[1]&&(o[1]=-1),{domain:o,clipped:n}}set base(t){this.scale.base=t}get base(){return this.scale.base}constructor(t){super(t,new WP),this.min=NaN,this.max=NaN}}a_.className="LogAxis",a_.type="log",dA([ZA(oT(OT(),rT("max"),s_())),eN(NaN),uA("design:type",Number)],a_.prototype,"min",void 0),dA([ZA(oT(OT(),sT("min"),s_())),eN(NaN),uA("design:type",Number)],a_.prototype,"max",void 0);class l_ extends rN{constructor(){super(...arguments),this.maxSpacing=NaN}}dA([ZA(oT(OT(1),sT("minSpacing"))),eN(NaN),uA("design:type",Number)],l_.prototype,"maxSpacing",void 0);class c_ extends gN{constructor(t){super(t,new KP),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:o}=this,n=!1;return"number"===typeof i&&(i=new Date(i)),"number"===typeof o&&(o=new Date(o)),t.length>2&&(t=(null!==(e=gA(t))&&void 0!==e?e:[0,1e3]).map((t=>new Date(t)))),i instanceof Date&&(n||(n=i>t[0]),t=[i,t[1]]),o instanceof Date&&(n||(n=o<t[1]),t=[t[0],o]),t[0]>t[1]&&(t=[]),{domain:t,clipped:n}}createTick(){return new l_}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!==(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))&&void 0!==e?e:String(t)}calculatePadding(t,e){return[0,1]}}c_.className="TimeAxis",c_.type="time",dA([ZA(oT(vT,rT("max"))),uA("design:type",Object)],c_.prototype,"min",void 0),dA([ZA(oT(vT,sT("min"))),uA("design:type",Object)],c_.prototype,"max",void 0);const d_={[r_.type]:r_,[vN.type]:vN,[c_.type]:c_,[TN.type]:TN,[a_.type]:a_},u_={has:t=>Object.prototype.hasOwnProperty.call(d_,t),get axesTypes(){return Object.keys(d_)}},h_={};function p_(t){var e;return null!==(e=h_[t])&&void 0!==e?e:{}}const f_={};class g_ extends pA{constructor(t){var e;super(),this.node=new mk({name:"background",zIndex:dR.SERIES_BACKGROUND_ZINDEX}),this.rectNode=new YL,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null===(e=t.scene.root)||void 0===e||e.appendChild(this.node),this.destroyFns.push((()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.node)}),t.layoutService.addListener("layout-complete",(t=>this.onLayoutComplete(t))))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}}dA([ZA(cT),TM("node","visible"),uA("design:type",Boolean)],g_.prototype,"visible",void 0),dA([ZA(bT),TM("rectNode","fill"),uA("design:type",String)],g_.prototype,"fill",void 0);class v_{set fill(t){this.rh.fill=t}get fill(){return this.rh.fill}set stroke(t){this.rh.stroke=t}get stroke(){return this.rh.stroke}set strokeWidth(t){this.rh.strokeWidth=t}get strokeWidth(){return this.rh.strokeWidth}set width(t){this.rh.width=t}get width(){return this.rh.width}set height(t){this.rh.height=t}get height(){return this.rh.height}set gripLineGap(t){this.rh.gripLineGap=t}get gripLineGap(){return this.rh.gripLineGap}set gripLineLength(t){this.rh.gripLineLength=t}get gripLineLength(){return this.rh.gripLineLength}constructor(t){this.rh=t}}class y_{set fill(t){this.rm.fill=t}get fill(){return this.rm.fill}set stroke(t){this.rm.stroke=t}get stroke(){return this.rm.stroke}set strokeWidth(t){this.rm.strokeWidth=t}get strokeWidth(){return this.rm.strokeWidth}set fillOpacity(t){this.rm.fillOpacity=t}get fillOpacity(){return this.rm.fillOpacity}constructor(t){this.rm=t}}class m_ extends Rk{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:t,centerY:e,width:i,height:o}=this;return new aM(t-i/2,e-o/2,i,o)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){const{path:t,centerX:e,centerY:i,width:o,height:n}=this;t.clear();const r=e-o/2,s=i-n/2,a=this.align(r),l=this.align(s),c=a+this.align(r,o),d=l+this.align(s,n);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,d),t.lineTo(a,d),t.lineTo(a,l);const u=this.gripLineGap/2,h=this.gripLineLength/2;t.moveTo(this.align(e-u),this.align(i-h)),t.lineTo(this.align(e-u),this.align(i+h)),t.moveTo(this.align(e+u),this.align(i-h)),t.lineTo(this.align(e+u),this.align(i+h))}}function b_(t,e){t!==e&&(this.dirtyPath=!0)}m_.className="RangeHandle",dA([ZA(mT),uA("design:type",Object)],m_.prototype,"_fill",void 0),dA([ZA(mT),uA("design:type",Object)],m_.prototype,"_stroke",void 0),dA([ZA(wT(0)),uA("design:type",Object)],m_.prototype,"_strokeWidth",void 0),dA([ZA(BT),uA("design:type",Object)],m_.prototype,"_lineCap",void 0),dA([ZA(wT(0)),uA("design:type",Number)],m_.prototype,"_width",void 0),dA([ZA(wT(0)),uA("design:type",Number)],m_.prototype,"_gripLineGap",void 0),dA([ZA(wT(0)),uA("design:type",Number)],m_.prototype,"_gripLineLength",void 0),dA([ZA(wT(0)),uA("design:type",Number)],m_.prototype,"_height",void 0);class S_ extends Rk{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.05,this._min=0,this._max=1}set min(t){var e;t=HA(0,t,this.max-this.minRange),this._min===t||isNaN(t)||(this._min=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get min(){return this._min}set max(t){var e;t=HA(this.min+this.minRange,t,1),this._max===t||isNaN(t)||(this._max=t,this.dirtyPath=!0,null===(e=this.onRangeChange)||void 0===e||e.call(this))}get max(){return this._max}computeBBox(){const{x:t,y:e,width:i,height:o}=this;return new aM(t,e,i,o)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:o,min:n,max:r}=this,s=t+i*n;return new aM(s,e,t+i*r-s,o)}updatePath(){const{path:t,x:e,y:i,width:o,height:n,min:r,max:s}=this;t.clear();const a=this.align(e),l=this.align(i),c=a+this.align(e,o),d=l+this.align(i,n);t.moveTo(a,l),t.lineTo(c,l),t.lineTo(c,d),t.lineTo(a,d),t.lineTo(a,l);const u=this.align(e+o*r),h=this.align(e+o*s);t.moveTo(u,l),t.lineTo(u,d),t.lineTo(h,d),t.lineTo(h,l),t.lineTo(u,l)}}S_.className="RangeMask",dA([MM({changeValue:b_}),ZA(wT(0)),uA("design:type",Object)],S_.prototype,"x",void 0),dA([MM({changeValue:b_}),ZA(wT(0)),uA("design:type",Object)],S_.prototype,"y",void 0),dA([MM({changeValue:b_}),ZA(wT(0)),uA("design:type",Object)],S_.prototype,"width",void 0),dA([MM({changeValue:b_}),ZA(wT(0)),uA("design:type",Object)],S_.prototype,"height",void 0),dA([ZA(wT()),uA("design:type",Number)],S_.prototype,"_min",void 0),dA([ZA(wT()),uA("design:type",Number)],S_.prototype,"_max",void 0);class x_ extends mk{set x(t){this.mask.x=t,this.updateHandles()}get x(){return this.mask.x}set y(t){this.mask.y=t,this.updateHandles()}get y(){return this.mask.y}set width(t){this.mask.width=t,this.updateHandles()}get width(){return this.mask.width}set height(t){this.mask.height=t,this.updateHandles()}get height(){return this.mask.height}set min(t){this.mask.min=t}get min(){return this.mask.min}set max(t){this.mask.max=t}get max(){return this.mask.max}constructor(){super({name:"rangeSelectorGroup"}),this.minHandle=new m_,this.maxHandle=new m_,this.mask=(()=>{const{x:t,y:e,width:i,height:o,min:n,max:r}=x_.defaults,s=new S_;s.x=t,s.y=e,s.width=i,s.height=o,s.min=n,s.max=r;const{minHandle:a,maxHandle:l}=this;return a.centerX=t,l.centerX=t+i,a.centerY=l.centerY=e+o/2,this.append([s,a,l]),s.onRangeChange=()=>{var t;this.updateHandles(),null===(t=this.onRangeChange)||void 0===t||t.call(this)},s})(),this._x=x_.defaults.x,this._y=x_.defaults.y,this._width=x_.defaults.width,this._height=x_.defaults.height,this._min=x_.defaults.min,this._max=x_.defaults.max,this.isContainerNode=!0}updateHandles(){const{minHandle:t,maxHandle:e,x:i,y:o,width:n,height:r,mask:s}=this;t.centerX=i+n*s.min,e.centerX=i+n*s.max,t.centerY=e.centerY=o+r/2}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}render(t){const{ctx:e,forceRender:i,stats:o}=t;if(this.dirty===tM.NONE&&!i)return void(o&&o.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const{mask:n,minHandle:r,maxHandle:s}=this;[n,r,s].forEach((o=>{o.visible&&(i||o.dirty>tM.NONE)&&(e.save(),o.render(Object.assign(Object.assign({},t),{ctx:e,forceRender:i})),e.restore())})),this.markClean({force:!0}),o&&o.nodesRendered++}}x_.className="Range",x_.defaults={x:0,y:0,width:200,height:30,min:0,max:1};class C_ extends pA{set width(t){this.rs.width=t}get width(){return this.rs.width}set height(t){this.rs.height=t}get height(){return this.rs.height}set min(t){this.rs.min=t}get min(){return this.rs.min}set max(t){this.rs.max=t}get max(){return this.rs.max}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){const t=this.enabled&&this.visible;this.rs.visible=t,t?this.ctx.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}):this.ctx.zoomManager.updateZoom("navigator")}constructor(t){var e;super(),this.ctx=t,this.rs=new x_,this.mask=new y_(this.rs.mask),this.minHandle=new v_(this.rs.minHandle),this.maxHandle=new v_(this.rs.maxHandle),this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.margin=10,this._visible=!0,this.rs.onRangeChange=()=>t.zoomManager.updateZoom("navigator",{x:{min:this.rs.min,max:this.rs.max},y:{min:0,max:1}}),null===(e=t.scene.root)||void 0===e||e.appendChild(this.rs);const i={bypassPause:["animation"]};this.destroyFns.push(t.interactionManager.addListener("drag-start",(t=>this.onDragStart(t)),i),t.interactionManager.addListener("drag",(t=>this.onDrag(t)),i),t.interactionManager.addListener("hover",(t=>this.onDrag(t)),i),t.interactionManager.addListener("drag-end",(()=>this.onDragStop()),i),t.layoutService.addListener("before-series",(t=>this.layout(t))),t.layoutService.addListener("layout-complete",(t=>this.layoutComplete(t))),(()=>{var e;return null===(e=t.scene.root)||void 0===e?void 0:e.removeChild(this.rs)}),(()=>this.ctx.zoomManager.updateZoom("navigator"))),this.updateGroupVisibility()}layout(t){let{shrinkRect:e}=t;if(this.enabled){const t=this.rs.height+this.margin;e.shrink(t,"bottom"),this.rs.y=e.y+e.height+this.margin}return{shrinkRect:e}}layoutComplete(t){let{series:{rect:e,visible:i}}=t;this.enabled&&i&&(this.rs.x=e.x,this.rs.width=e.width),this.visible=i}onDragStart(t){if(!this.enabled)return;const{offsetX:e,offsetY:i}=t,{rs:o}=this,{minHandle:n,maxHandle:r,x:s,width:a,min:l}=o,c=o.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(n.containsPoint(e,i)?this.minHandleDragging=!0:r.containsPoint(e,i)?this.maxHandleDragging=!0:c.containsPoint(e,i)&&(this.panHandleOffset=(e-s)/a-l))}onDrag(t){if(!this.enabled)return;const{rs:e,panHandleOffset:i}=this,{x:o,y:n,width:r,height:s,minHandle:a,maxHandle:l}=e,{offsetX:c,offsetY:d}=t,u=o+r*e.min,h=o+r*e.max,p=new aM(u,n,h-u,s),f=()=>Math.min(Math.max((c-o)/r,0),1);if(a.containsPoint(c,d)||l.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):p.containsPoint(c,d)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=f();else if(this.maxHandleDragging)e.max=f();else if(!isNaN(i)){const t=e.max-e.min,o=Math.min(f()-i,1-t);o<=e.min?(e.min=o,e.max=e.min+t):(e.max=o+t,e.min=e.max-t)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}}dA([MM({changeValue(t){t&&(this.min=0,this.max=1),this.updateGroupVisibility()}}),ZA(cT),uA("design:type",Object)],C_.prototype,"enabled",void 0),dA([ZA(wT(0)),uA("design:type",Object)],C_.prototype,"margin",void 0);const w_=12,E_=13,O_=17,D_="normal",A_="bottom",T_={},M_={},k_={has:t=>Object.prototype.hasOwnProperty.call(T_,t),isCartesian:t=>"cartesian"===T_[t],isPolar:t=>"polar"===T_[t],isHierarchy:t=>"hierarchy"===T_[t],get seriesTypes(){return Object.keys(T_)},get cartesianTypes(){return this.seriesTypes.filter((t=>this.isCartesian(t)))},get polarTypes(){return this.seriesTypes.filter((t=>this.isPolar(t)))},get hierarchyTypes(){return this.seriesTypes.filter((t=>this.isHierarchy(t)))}};function R_(t){var e;return null!==(e=M_[t])&&void 0!==e?e:{}}const P_=Symbol("extends-chart-defaults"),N_=Symbol("extends-legend-defaults"),L_=Symbol("extends-legend-item-defaults"),__=Symbol("extends-legend-item-marker-defaults"),I_=Symbol("extends-axes-defaults"),F_=Symbol("extends-axes-label-defaults"),G_=Symbol("extends-axes-line-defaults"),B_=Symbol("extends-axes-tick-defaults"),V_=Symbol("extends-axes-grid-line-defaults"),j_=Symbol("extends-series-defaults"),W_=Symbol("extends-cartesian-marker-defaults"),z_=Symbol("override-series-label-defaults"),H_=Symbol("default-font"),U_=Symbol("default-label-colour"),K_=Symbol("default-inverted-label-colour"),Y_=Symbol("default-inside-series-label-colour"),X_=Symbol("default-muted-label-colour"),$_=Symbol("default-axis-grid-colour"),q_=Symbol("default-axis-line-colour"),Z_=Symbol("default-cross-lines-colour"),J_=Symbol("default-background-colour"),Q_=Symbol("default-shadow-colour"),tI=Symbol("default-waterfall-series-positive-colors"),eI=Symbol("default-waterfall-series-negative-colors"),iI=Symbol("default-waterfall-series-total-colors"),oI=Symbol("default-waterfall-series-connector-line-stroke"),nI=Symbol("default-polar-series-stroke"),rI=Symbol("default-diverging-series-colour-range"),sI=Symbol("default-hierarchy-fills"),aI=Symbol("default-hierarchy-strokes");function lI(t,e,i,o,n){const{defaultDuration:r}=i,{addPhaseFn:s,updatePhaseFn:a,removePhaseFn:l}=n,c=(o,n,s)=>{i.animate({id:`${t}_${e}_${n.id}_${o}`,groupId:t,from:0,to:1,ease:_M,onUpdate(t,e){e&&"removed"!==o||(n.path.clear({trackChanges:!0}),s(t,n),n.checkPathDirty())},onStop(){"added"===o&&(n.path.clear({trackChanges:!0}),s(1,n),n.checkPathDirty())},duration:WM[o].animationDuration*r,delay:WM[o].animationDelay*r})};for(const d of o)i.isSkipped()||(c("removed",d,l),c("updated",d,a)),c("added",d,s)}const cI=QA((t=>bL(t)||Object.getPrototypeOf(t)===uR),"expecting a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class");class dI extends oM{constructor(){super(...arguments),this.enabled=!0,this.shape=hR,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:o,strokeWidth:n,strokeOpacity:r}=this;return{size:t,fill:e,fillOpacity:i,stroke:o,strokeWidth:n,strokeOpacity:r}}getDiameter(){return this.size+this.strokeWidth}}function uI(t,e,i){let{id:o}=t;HM(o,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1}),i.forEach((t=>t.cleanup()))}function hI(t,e,i,o){let{id:n}=t;zM(n,"markers",e,i,{fromFn:(t,e)=>{var i,n;const r=null!==(n=null===(i=e.midPoint)||void 0===i?void 0:i.x)&&void 0!==n?n:o,s=IM(r/o)-.1;return{scalingX:0,scalingY:0,animationDelay:Math.max(Math.min(s,1),0),animationDuration:.2}},toFn:()=>({scalingX:1,scalingY:1})})}function pI(t){return{opacity:1,scalingX:1,scalingY:1}}function fI(t,e){var i,o,n,r;return{translationX:null!==(o=null===(i=e.point)||void 0===i?void 0:i.x)&&void 0!==o?o:NaN,translationY:null!==(r=null===(n=e.point)||void 0===n?void 0:n.y)&&void 0!==r?r:NaN}}function gI(t,e){const i=(e,i)=>{const o=t[i][e];return Array.isArray(o)?o[0]:o},o=e=>{const{xValue:o}=e;return t.moved[o]?{point:i(o,"moved"),status:"updated"}:t.removed[o]?{point:i(o,"removed"),status:"removed"}:t.added[o]?{point:i(o,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(t,i)=>{var n,r,s,a,l,c;const{status:d,point:u}=o(i);if("unknown"===d)return{opacity:0};const h=Object.assign({translationX:null!==(r=null===(n=null===u||void 0===u?void 0:u.from)||void 0===n?void 0:n.x)&&void 0!==r?r:t.translationX,translationY:null!==(a=null===(s=null===u||void 0===u?void 0:u.from)||void 0===s?void 0:s.y)&&void 0!==a?a:t.translationY,opacity:t.opacity},WM[d]);return"added"===e?Object.assign(Object.assign(Object.assign({},h),{opacity:0,translationX:null===(l=null===u||void 0===u?void 0:u.to)||void 0===l?void 0:l.x,translationY:null===(c=null===u||void 0===u?void 0:u.to)||void 0===c?void 0:c.y}),WM.added):("added"===d&&(h.opacity=0),h)},toFn:(t,i)=>{var n,r;const{status:s,point:a}=o(i);if("unknown"===s)return{opacity:0};const l=Object.assign({translationX:i.point.x,translationY:i.point.y,opacity:1},WM[s]);return"removed"===s||"removed"===e?Object.assign(Object.assign(Object.assign({},l),{translationX:null===(n=null===a||void 0===a?void 0:a.to)||void 0===n?void 0:n.x,translationY:null===(r=null===a||void 0===a?void 0:a.to)||void 0===r?void 0:r.y,opacity:0}),WM.removed):l}}}function vI(t){return t.reduce(((t,e)=>{let{min:i,max:o}=t;return(null==i||i.point.x>e.point.x)&&(i=e),(null==o||o.point.x<e.point.x)&&(o=e),{min:i,max:o}}),{})}function yI(t,e,i){const o=(e.y-t.y)/(e.x-t.x);return{x:i,y:(i-t.x)*o+t.y}}function mI(t,e,i,o){let n=-1,r=0;const s=[];for(;r<t.length;)t[r].change!==e?t[r].change!==i?(s.length>0&&(o(s,n,r),s.length=0),n=r,r++):r++:(s.push(t[r]),r++);s.length>0&&o(s,n,r)}function bI(t,e){mI(t,"out","in",((i,o,n)=>{var r,s;-1===o&&t[n]?i.forEach((e=>e.to=t[n].from)):n===t.length&&t[o]?i.forEach((e=>e.to=t[o].from)):"intersect"===e&&(null===(r=t[o])||void 0===r?void 0:r.from)&&(null===(s=t[n])||void 0===s?void 0:s.from)?i.forEach((e=>e.to=yI(t[o].from,t[n].from,e.from.x))):i.forEach((t=>t.to=t.from))})),mI(t,"in","out",((i,o,n)=>{var r,s;-1===o&&t[n]?i.forEach((e=>e.from=t[n].to)):n===t.length&&t[o]?i.forEach((e=>e.from=t[o].to)):"intersect"===e&&(null===(r=t[o])||void 0===r?void 0:r.to)&&(null===(s=t[n])||void 0===s?void 0:s.to)?i.forEach((e=>e.from=yI(t[o].to,t[n].to,e.to.x))):i.forEach((t=>t.from=t.to))}))}function SI(t,e,i){const o=isNaN(t.x)?e.x:t.x,n=isNaN(t.y)?e.y:t.y,r=e.x-t.x,s=e.y-t.y;return{x:o+(isNaN(r)?0:r*i),y:n+(isNaN(s)?0:s*i)}}function xI(t,e,i){const{path:o}=i;let n;for(const r of t){const t=e[r.change];if(null==t)continue;const{from:i,to:s}=r;if(null==i||null==s)continue;const{x:a,y:l}=SI(i,s,t);if(!1===r.moveTo)o.lineTo(a,l);else if(!0!==r.moveTo&&n){if(n){const e="in"===r.moveTo?t:1-t,{x:i,y:s}=SI(n,{x:a,y:l},e);o.lineTo(i,s),o.moveTo(a,l)}}else o.moveTo(a,l);n={x:a,y:l}}}function CI(t,e,i){let{id:o}=t;HM(o,"path_properties",e,i,{clipScalingX:0},{clipScalingX:1},{start:{clipMode:"normal"},finish:{clipMode:void 0}})}function wI(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function EI(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"===typeof t){return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0]}if("log"===e.type&&"number"===typeof t)return e.convert(t);const i=e.domain.findIndex((e=>e===t));return i>=0?e.range[i]:NaN}function OI(t,e){const i=Number(t),o=Number(e);return isNaN(i)||isNaN(o)?t===e:Math.abs(o-i)<.25}function DI(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?!!t:t?"in":"out"}function AI(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o,n,r,s;const{backfillSplitMode:a="intersect"}=i,l=e=>{var i,o;return{x:EI(null!==(i=e.xValue)&&void 0!==i?i:NaN,t.scales.x),y:EI(null!==(o=e.yValue)&&void 0!==o?o:NaN,t.scales.y)}},c=t=>{var i,o;return{x:EI(null!==(i=t.xValue)&&void 0!==i?i:NaN,e.scales.x),y:EI(null!==(o=t.yValue)&&void 0!==o?o:NaN,e.scales.y)}},d=[],u={added:{},moved:{},removed:{}},h=function(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"move";t&&(isNaN(t.point.x)||isNaN(t.point.y))&&(t=e);const n={from:null===t||void 0===t?void 0:t.point,to:null===e||void 0===e?void 0:e.point,moveTo:DI(null===t||void 0===t?void 0:t.point.moveTo,null===e||void 0===e?void 0:e.point.moveTo),change:o};"move"===o?(u.moved[i]=n,y++,m++):"in"===o?(u.added[i]=n,m++):"out"===o&&(u.removed[i]=n,y++),d.push(n)},{min:p,max:f}=vI(e.nodeData),{min:g,max:v}=vI(t.nodeData);let y=0,m=0;for(;y<e.nodeData.length||m<t.nodeData.length;){const i=e.nodeData[y],a=t.nodeData[m],d=i?l(i):void 0,u=a?c(a):void 0,b=void 0;if(d&&OI(d.x,null===a||void 0===a?void 0:a.point.x))h(i,a,a.xValue,"move");else if(d&&d.x<(null!==(o=null===g||void 0===g?void 0:g.point.x)&&void 0!==o?o:-1/0))h(i,b,i.xValue,"out");else if(d&&d.x>(null!==(n=null===v||void 0===v?void 0:v.point.x)&&void 0!==n?n:1/0))h(i,b,i.xValue,"out");else if(u&&u.x<(null!==(r=null===p||void 0===p?void 0:p.point.x)&&void 0!==r?r:-1/0))h(b,a,a.xValue,"in");else if(u&&u.x>(null!==(s=null===f||void 0===f?void 0:f.point.x)&&void 0!==s?s:1/0))h(b,a,a.xValue,"in");else if(d&&d.x<(null===a||void 0===a?void 0:a.point.x))h(i,b,i.xValue,"out");else if(u&&u.x<(null===i||void 0===i?void 0:i.point.x))h(b,a,a.xValue,"in");else if(i)h(i,b,i.xValue,"out");else{if(!a)throw new Error("Unable to process points");h(b,a,a.xValue,"in")}}return bI(d,a),{result:d,resultMap:u}}function TI(t,e,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var n,r,s;const{backfillSplitMode:a="intersect",multiDatum:l=!1}=o,c=[],d={added:{},moved:{},removed:{}},u={added:{},moved:{},removed:{}};let h,p;const f=(t,e)=>{var i,o;const n="move"===e.change?"moved":"in"===e.change?"added":"removed";l?(null!==(i=(o=u[n])[t])&&void 0!==i||(o[t]=[]),u[n][t].push(e)):d[n][t]=e,h=e,p=t};let g=0,v=0,y=!1;for(;g<e.nodeData.length||v<t.nodeData.length;){const o=e.nodeData[g],a=t.nodeData[v];let d;if((null===o||void 0===o?void 0:o.xValue)===(null===a||void 0===a?void 0:a.xValue))d={change:"move",moveTo:DI(null!==(n=o.point.moveTo)&&void 0!==n&&n,a.point.moveTo),from:o.point,to:a.point},f(o.xValue,d),g++,v++;else if(i.removed.indexOf(null===o||void 0===o?void 0:o.xValue)>=0)d={change:"out",moveTo:null!==(r=o.point.moveTo)&&void 0!==r&&r,from:o.point},f(o.xValue,d),g++;else if(i.added.indexOf(null===a||void 0===a?void 0:a.xValue)>=0)d={change:"in",moveTo:null!==(s=a.point.moveTo)&&void 0!==s&&s,to:a.point},f(a.xValue,d),v++;else if(l&&h&&p===(null===o||void 0===o?void 0:o.xValue))d=Object.assign({},h),f(o.xValue,d),g++;else{if(!l||!h||p!==(null===a||void 0===a?void 0:a.xValue)){y=!0;break}d=Object.assign({},h),f(a.xValue,d),v++}c.push(d)}let m=-1/0;return y||(y=c.some((t=>{const{change:e,to:{x:i=-1/0}={}}=t;if("out"===e)return;const o=i<m;return m=i,o}))),y?{result:void 0,resultMap:void 0}:(bI(c,a),l?{result:c,resultMap:u}:{result:c,resultMap:d})}function MI(t,e,i,o,n){const r=function(t,e){let i="updated";const o=t=>t.visible;return!o(e)&&o(t)?i="added":o(e)&&!o(t)&&(i="removed"),i}(t,e),s=function(t,e){const i="none"===e?"updated":t,o={fromFn:e=>{let o;return o="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},Object.assign(Object.assign({},WM[i]),o)},toFn:t=>Object.assign({},WM[i])};return"fade"===e?{fromFn:e=>{const i="added"===t?0:e.opacity;return Object.assign({opacity:i},o.fromFn(e))},toFn:e=>{const i="removed"===t?0:1;return Object.assign({opacity:i},o.toFn(e))}}:o}(r,o);return{status:r,path:{addPhaseFn:(t,e)=>{n(i,{move:1,in:t},e)},updatePhaseFn:(t,e)=>{n(i,{move:t},e)},removePhaseFn:(t,e)=>{n(i,{move:0,out:t},e)}},pathProperties:s}}var kI,RI;function PI(t){const{points:e}=t.fillData;return{top:e.slice(0,e.length/2),bottom:e.slice(e.length/2).reverse()}}function NI(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function LI(t,e,i){var o;const n="category"===(null===(o=t.scales.x)||void 0===o?void 0:o.type);let r="updated";e.visible&&!t.visible?r="removed":!e.visible&&t.visible&&(r="added");const{resultMap:s}=n&&i?TI(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):AI(t,e,{backfillSplitMode:"static"}),{top:a,bottom:l}=n&&i?function(t,e,i){const o=PI(e),n=PI(t),r={multiDatum:!0};return{top:TI(NI("top",t,n),NI("top",e,o),i,r),bottom:TI(NI("bottom",t,n),NI("bottom",e,o),i,r)}}(t,e,i):function(t,e){const i=PI(e),o=PI(t);return{top:AI(NI("top",t,o),NI("top",e,i)),bottom:AI(NI("bottom",t,o),NI("bottom",e,i))}}(t,e);if(void 0===s||void 0===a.result||void 0===l.result)return;const c=[...a.result,...l.result.reverse()];return{fill:MI(t,e,c,"none",xI),marker:gI(s,r)}}dA([ZA(cT),iM({redraw:tM.MAJOR}),uA("design:type",Object)],dI.prototype,"enabled",void 0),dA([ZA(cI),iM({redraw:tM.MAJOR}),uA("design:type",Object)],dI.prototype,"shape",void 0),dA([ZA(wT(0)),iM({redraw:tM.MAJOR}),uA("design:type",Number)],dI.prototype,"size",void 0),dA([ZA(bT),iM({redraw:tM.MAJOR}),uA("design:type",String)],dI.prototype,"fill",void 0),dA([ZA(ET(0,1)),iM({redraw:tM.MAJOR}),uA("design:type",Number)],dI.prototype,"fillOpacity",void 0),dA([ZA(bT),iM({redraw:tM.MAJOR}),uA("design:type",String)],dI.prototype,"stroke",void 0),dA([ZA(ET(0)),iM({redraw:tM.MAJOR}),uA("design:type",Number)],dI.prototype,"strokeWidth",void 0),dA([ZA(ET(0,1)),iM({redraw:tM.MAJOR}),uA("design:type",Number)],dI.prototype,"strokeOpacity",void 0),dA([ZA(lT),iM({redraw:tM.MAJOR}),uA("design:type",Function)],dI.prototype,"formatter",void 0),function(t){t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label"}(kI||(kI={}));class _I extends t_{constructor(t){super({moduleCtx:t,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[wR.NEAREST_BY_MAIN_AXIS_FIRST,wR.EXACT_SHAPE_MATCH],animationResetFns:{path:wI({getOpacity:()=>this.getOpacity()}),label:BR,marker:(t,e)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),fI(0,e))}}),this.tooltip=new sP,this.marker=new dI,this.label=new sR,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.xName=void 0,this.strokeWidth=2,this.shadow=void 0}processData(t){return hA(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,normalizedTo:o,data:n,visible:r,seriesGrouping:{groupIndex:s=this.id}={}}=this;if(null==e||null==i||null==n)return;const a=!this.ctx.animationManager.isSkipped(),{isContinuousX:l,isContinuousY:c}=this.isContinuous(),d=[`area-stack-${s}-yValues`,`area-stack-${s}-yValues-trailing`,`area-stack-${s}-yValues-prev`,`area-stack-${s}-yValues-trailing-prev`,`area-stack-${s}-yValues-marker`],u=[],h=o&&isFinite(o)?o:void 0;h&&(u.push(Zk(this,[d[0],d[1],d[4]],h,"range")),u.push(Zk(this,[d[2],d[3]],h,"range"))),!l&&a&&this.processedData&&u.push(nR(this.processedData)),a&&u.push(tR(this));const p={invalidValue:null};r||(p.forceValue=0),yield this.requestDataModel(t,n,{props:[AR(this,e,l,{id:"xValue"}),TR(this,i,c,Object.assign({id:"yValueRaw"},p)),...kR(this,i,c,"window","current",Object.assign(Object.assign({id:"yValueEnd"},p),{groupId:d[0]})),...kR(this,i,c,"window-trailing","current",Object.assign(Object.assign({id:"yValueStart"},p),{groupId:d[1]})),...kR(this,i,c,"window","last",Object.assign(Object.assign({id:"yValuePreviousEnd"},p),{groupId:d[2]})),...kR(this,i,c,"window-trailing","last",Object.assign(Object.assign({id:"yValuePreviousStart"},p),{groupId:d[3]})),...kR(this,i,c,"normal","current",Object.assign(Object.assign({id:"yValueCumulative"},p),{groupId:d[4]})),...u],groupByKeys:!0}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:o}=this;if(!e||!i)return[];const n=o[QT.X],r=o[QT.Y],s=i.resolveProcessedDataDefById(this,"xValue"),a=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if(t===QT.X)return"key"===(null===s||void 0===s?void 0:s.def.type)&&"category"===s.def.valueType?a:zN(gA(a),n);if(r instanceof a_||r instanceof c_)return zN(l,r);return zN([l[0]>0?0:l[0],l[1]<0?0:l[1]],r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return hA(this,void 0,void 0,(function*(){const{axes:i,data:o,processedData:{data:n}={},dataModel:r}=this,s=i[QT.X],a=i[QT.Y];if(!s||!a||!o||!r)return[];const{yKey:l="",xKey:c="",marker:d,label:u,fill:h,stroke:p}=this,{scale:f}=s,{scale:g}=a,v=fk.is(g),y=(null!==(e=f.bandwidth)&&void 0!==e?e:0)/2,m=r.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),b=t=>{const{point:e}=t,i=cA(t,["point"]);return Object.assign(Object.assign({},i),{point:Object.assign(Object.assign({},e),{moveTo:!0})})},S=(t,e,i)=>{const o=f.convert(t)+y,n=g.convert(e);return[{point:{x:o,y:g.convert(i)},yValue:i,xValue:t},{point:{x:o,y:n},yValue:e,xValue:t}]},x=(t,e,i)=>{let o;const n=this.normalizedTo&&isFinite(this.normalizedTo),r=n&&v&&zk(i);(!n&&!isNaN(i)||r)&&(o=e);return{x:f.convert(t)+y,y:g.convert(o),size:d.size}},C=l,w=[],E=[],O={itemId:C,fillData:{itemId:C,points:[]},strokeData:{itemId:C,points:[]},labelData:w,nodeData:E,scales:t.calculateScaling.call(this),visible:this.visible},D=O.fillData.points,A=[],T=O.strokeData.points;let M,k=-1,R=-1/0;return null===n||void 0===n||n.forEach((t=>{const{keys:e,keys:[i],datum:o,values:n}=t;n.forEach(((t,n)=>{var s,a,f;k++;const g=o[n],v=r.resolveProcessedDataDefsValues(m,{keys:e,values:t}),{yValueRaw:y,yValueCumulative:O}=v;let{yValueStart:P,yValueEnd:N,yValuePreviousStart:L,yValuePreviousEnd:_}=v;const I=null!=y,F=x(i,+O,y);if(I&&d&&E.push({index:k,series:this,itemId:C,datum:g,midPoint:{x:F.x,y:F.y},cumulativeValue:N,yValue:y,xValue:i,yKey:l,xKey:c,point:F,fill:null!==(s=d.fill)&&void 0!==s?s:h,stroke:null!==(a=d.stroke)&&void 0!==a?a:p,strokeWidth:null!==(f=d.strokeWidth)&&void 0!==f?f:this.getStrokeWidth(this.strokeWidth)}),I&&u){const t=this.getLabelText(u,{value:y,datum:g,xKey:c,yKey:l,xName:this.xName,yName:this.yName},(t=>Uk(t)?t.toFixed(2):String(t)));w.push({index:k,series:this,itemId:l,datum:g,x:F.x,y:F.y,label:t?{text:t,fontStyle:u.fontStyle,fontWeight:u.fontWeight,fontSize:u.fontSize,fontFamily:u.fontFamily,textAlign:"center",textBaseline:"bottom",fill:u.color}:void 0})}null!=R&&null!=y||(P=null!==P&&void 0!==P?P:0,N=null!==P&&void 0!==P?P:0,L=null!==L&&void 0!==L?L:0,_=null!==L&&void 0!==L?L:0);const[G,B]=S(M,L,_),[V,j]=S(i,P,N);null!=M&&null!=i&&(D.push(G),A.push(B),D.push(V),A.push(j)),I&&null!=R&&k>0&&(T.push(b(G)),T.push(V)),M=i,R=y}))})),T.length>0&&(T[0]=b(T[0])),A.reverse(),D.push(...A),[O]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(SL(t))}updatePathNodes(t){return hA(this,void 0,void 0,(function*(){const{opacity:e,visible:i,animationEnabled:o}=t,[n,r]=t.paths,{seriesRectHeight:s,seriesRectWidth:a}=this.nodeDataDependencies,l=this.getStrokeWidth(this.strokeWidth);r.setProperties({tag:kI.Stroke,fill:void 0,lineJoin:r.lineCap="round",pointerEvents:cM.None,stroke:this.stroke,strokeWidth:l,strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,opacity:e,visible:i}),n.setProperties({tag:kI.Fill,stroke:void 0,lineJoin:"round",pointerEvents:cM.None,fill:this.fill,fillOpacity:this.fillOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset,strokeOpacity:this.strokeOpacity,fillShadow:this.shadow,opacity:e,visible:i||o,strokeWidth:l});const c=t=>{var e,i;null==t.clipPath&&(t.clipPath=new Mk,t.clipScalingX=1,t.clipScalingY=1),null===(e=t.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=t.clipPath)||void 0===i||i.rect(-25,-25,(null!==a&&void 0!==a?a:0)+50,(null!==s&&void 0!==s?s:0)+50)};c(r),c(n)}))}updatePaths(t){return hA(this,void 0,void 0,(function*(){this.updateAreaPaths([t.paths],[t.contextData])}))}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(((e,i)=>{let{fillData:o}=e;const[n]=t[i],{path:r}=n;r.clear({trackChanges:!0});for(const{point:t}of o.points)t.moveTo?r.moveTo(t.x,t.y):r.lineTo(t.x,t.y);r.closePath(),n.checkPathDirty()}))}updateStrokePath(t,e){e.forEach(((e,i)=>{let{strokeData:o}=e;const[,n]=t[i],{path:r}=n;r.clear({trackChanges:!0});for(const{point:t}of o.points)t.moveTo?r.moveTo(t.x,t.y):r.lineTo(t.x,t.y);n.checkPathDirty()}))}updateMarkerSelection(t){return hA(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:o}}=this,n=o&&e?e:[];return this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(n)}))}updateMarkerNodes(t){return hA(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:o="",yKey:n="",marker:r,fill:s,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:d}=this,u=Fk(i&&this.highlightStyle.item,r.getStyle(),{fill:s,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:d});e.each(((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:o,yKey:n},u)})),i||this.marker.markClean()}))}updateLabelSelection(t){return hA(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.tag=kI.Label}))}))}updateLabelNodes(t){return hA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:o,fontWeight:n,fontSize:r,fontFamily:s,color:a}=this.label;e.each(((t,e)=>{const{x:l,y:c,label:d}=e;d&&i&&this.visible?(t.fontStyle=o,t.fontWeight=n,t.fontSize=r,t.fontFamily=s,t.textAlign=d.textAlign,t.textBaseline=d.textBaseline,t.text=d.text,t.x=l,t.y=c-10,t.fill=a,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){const{xKey:e,id:i,axes:o,xName:n,yName:r,tooltip:s,marker:a,dataModel:l}=this,{yKey:c,xValue:d,yValue:u,datum:h}=t,p=o[QT.X],f=o[QT.Y];if(!e||!c||!(p&&f&&Uk(u))||!l)return"";const g=p.formatDatum(d),v=f.formatDatum(u),y=Bk(r),m=Bk(g+": "+v),b=Fk({fill:this.fill},a.getStyle(),{stroke:this.stroke,strokeWidth:this.strokeWidth}),{fill:S}=this.getMarkerStyle(a,{datum:t,xKey:e,yKey:c,highlighted:!1},b);return s.toTooltipHtml({title:y,content:m,backgroundColor:S},{datum:h,xKey:e,xName:n,yKey:c,yName:r,color:S,title:y,seriesId:i})}getLegendData(t){var e,i,o,n,r;const{data:s,id:a,xKey:l,yKey:c,yName:d,marker:u,fill:h,stroke:p,fillOpacity:f,strokeOpacity:g,visible:v}=this;return(null===s||void 0===s?void 0:s.length)&&l&&c&&"category"===t?[{legendType:t,id:a,itemId:c,seriesId:a,enabled:v,label:{text:null!==d&&void 0!==d?d:c},marker:{shape:u.shape,fill:null!==(e=u.fill)&&void 0!==e?e:h,stroke:null!==(i=u.stroke)&&void 0!==i?i:p,fillOpacity:null!==(o=u.fillOpacity)&&void 0!==o?o:f,strokeOpacity:null!==(n=u.strokeOpacity)&&void 0!==n?n:g,strokeWidth:null!==(r=u.strokeWidth)&&void 0!==r?r:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:o,paths:n}=t,{animationManager:r}=this.ctx,{seriesRectWidth:s=0}=this.nodeDataDependencies;this.updateAreaPaths(n,o),CI(this,r,n.flat()),cP(e,fI),hI(this,r,e,s),FR(this,"labels",r,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:o}=this.ctx,{markerSelections:n,labelSelections:r,contextData:s,paths:a,previousContextData:l}=t;if(super.resetAllAnimation(t),0===s.length||!l||0===l.length)return o.skipCurrentBatch(),void this.updateAreaPaths(a,s);const[[c,d]]=a,[u]=s,[h]=l,p=LI(u,h,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===p)return o.skipCurrentBatch(),void this.updateAreaPaths(a,s);zM(this.id,"marker_update",o,n,p.marker),zM(this.id,"fill_path_properties",o,[c],p.fill.pathProperties),lI(this.id,"fill_path_update",o,[c],p.fill.path),this.updateStrokePath(a,s),function(t,e,i,o){let{id:n}=t;HM(n,e,i,o,{opacity:0},{opacity:1},GM)}(this,"stroke",o,[d]),FR(this,"labels",o,r)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new mk}}_I.className="AreaSeries",_I.type="area",dA([ZA(mT),uA("design:type",String)],_I.prototype,"fill",void 0),dA([ZA(mT),uA("design:type",String)],_I.prototype,"stroke",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],_I.prototype,"fillOpacity",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],_I.prototype,"strokeOpacity",void 0),dA([ZA(FT),uA("design:type",Array)],_I.prototype,"lineDash",void 0),dA([ZA(wT(0)),uA("design:type",Number)],_I.prototype,"lineDashOffset",void 0),dA([ZA(hT),uA("design:type",String)],_I.prototype,"xKey",void 0),dA([ZA(hT),uA("design:type",String)],_I.prototype,"xName",void 0),dA([ZA(hT),uA("design:type",String)],_I.prototype,"yKey",void 0),dA([ZA(hT),uA("design:type",String)],_I.prototype,"yName",void 0),dA([ZA(ET(0)),uA("design:type",Number)],_I.prototype,"normalizedTo",void 0),dA([ZA(wT(0)),uA("design:type",Object)],_I.prototype,"strokeWidth",void 0);class II extends t_{constructor(){super(...arguments),this.direction="vertical"}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return"horizontal"===this.direction}getBarDirection(){return this.shouldFlipXY()?QT.X:QT.Y}getCategoryDirection(){return this.shouldFlipXY()?QT.Y:QT.X}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}}function FI(t,e){const{startingX:i,startingY:o}=function(t,e){const i=e[t?QT.Y:QT.X];let o=1/0,n=0;if(!i)return{startingX:o,startingY:n};t?n=i.scale.convert(fk.is(i.scale)?0:Math.max(...i.range)):o=i.scale.convert(fk.is(i.scale)?0:Math.min(...i.range));return{startingX:o,startingY:n}}(t,e),n=t=>{var e;return KA(null!==(e=t.yValue)&&void 0!==e?e:0)};return{isVertical:t,calculate:(e,r)=>{let s=t?e.x:i,a=t?o:e.y,l=t?e.width:0,c=t?0:e.height;return r&&(isNaN(s)||isNaN(a))&&(({x:s,y:a}=r),l=t?r.width:0,c=t?0:r.height,t&&!n(r)?a+=r.height:!t&&n(r)&&(s+=r.width)),{x:s,y:a,width:l,height:c}}}}function GI(t){const e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,o,n)=>"removed"===n||e(o)?t.calculate(o,i.previousDatum):{x:o.x,y:o.y,width:o.width,height:o.height},fromFn:(i,o,n)=>{"updated"===n&&e(o)?n="removed":"updated"===n&&e(i.previousDatum)&&(n="added");let r={x:i.x,y:i.y,width:i.width,height:i.height};return"unknown"!==n&&"added"!==n||(r=t.calculate(o,i.previousDatum)),Object.assign(Object.assign({},r),WM[n])}}}function BI(t,e){let{x:i,y:o,width:n,height:r}=e;return{x:i,y:o,width:n,height:r}}dA([ZA(JT),uA("design:type",String)],II.prototype,"direction",void 0),function(t){t[t.Bar=0]="Bar",t[t.Label=1]="Label"}(RI||(RI={}));class VI extends sR{constructor(){super(...arguments),this.placement="inside"}}dA([ZA(MT("inside","outside")),uA("design:type",String)],VI.prototype,"placement",void 0);class jI extends II{constructor(t){super({moduleCtx:t,pickModes:[wR.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationResetFns:{datum:BI,label:BR}}),this.label=new VI,this.tooltip=new sP,this.fill="#c16068",this.stroke="#874349",this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.formatter=void 0,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.stackGroup=void 0,this.strokeWidth=1,this.shadow=void 0,this.groupScale=new zA,this.smallestDataInterval=void 0}resolveKeyDirection(t){return this.getBarDirection()===QT.X?t===QT.X?QT.Y:QT.X:t}processData(t){var e,i,o,n;return hA(this,void 0,void 0,(function*(){const{xKey:r,yKey:s,normalizedTo:a,seriesGrouping:{groupIndex:l=this.id}={},data:c=[]}=this;if(null==r||null==s||null==c)return;const d=!this.ctx.animationManager.isSkipped(),u=Math.abs(null!==a&&void 0!==a?a:NaN),h=fk.is(null===(e=this.getCategoryAxis())||void 0===e?void 0:e.scale),p=fk.is(null===(i=this.getValueAxis())||void 0===i?void 0:i.scale),f=`bar-stack-${l}-yValues`,g=`${f}-trailing`,v=u&&isFinite(u)?u:void 0,y=[];v&&y.push(Zk(this,[f,g],v,"range")),d&&this.processedData&&y.push(nR(this.processedData)),d&&y.push(tR(this));const m=this.visible?{}:{forceValue:0},{processedData:b}=yield this.requestDataModel(t,c,{props:[AR(this,r,h,{id:"xValue"}),TR(this,s,p,Object.assign({id:"yValue-raw",invalidValue:null},m)),...kR(this,s,p,"normal","current",Object.assign({id:"yValue-end",invalidValue:null,missingValue:0,groupId:f,separateNegative:!0},m)),...kR(this,s,p,"trailing","current",Object.assign({id:"yValue-start",invalidValue:null,missingValue:0,groupId:g,separateNegative:!0},m)),...h?[Xk]:[],...y],groupByKeys:!0});this.smallestDataInterval={x:null!==(n=null===(o=b.reduced)||void 0===o?void 0:o.smallestKeyInterval)&&void 0!==n?n:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:o}=this;if(!i||!o)return[];const{reduced:{[Xk.property]:n}={}}=i,r=this.getCategoryAxis(),s=this.getValueAxis(),a=o.resolveProcessedDataDefById(this,"xValue"),l=o.getDomain(this,"xValue","key",i),c=o.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===(null===a||void 0===a?void 0:a.def.type)&&"category"===(null===a||void 0===a?void 0:a.def.valueType))return l;const i=null!=n&&isFinite(n)?n:0,o=null!==(e=gA(l))&&void 0!==e?e:[NaN,NaN];return t===QT.Y?zN([o[0]+-i,o[1]],r):zN([o[0],o[1]+i],r)}if(this.getValueAxis()instanceof a_)return zN(c,s);return zN([c[0]>0?0:c[0],c[1]<0?0:c[1]],s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});return hA(this,void 0,void 0,(function*(){const{dataModel:e}=this,i=this.getCategoryAxis(),o=this.getValueAxis();if(!(e&&i&&o))return[];const n=i.scale,r=o.scale,{groupScale:s,yKey:a="",xKey:l="",fill:c,stroke:d,strokeWidth:u,label:h,processedData:p,ctx:{seriesStateManager:f},smallestDataInterval:g}=this,v=fk.is(n)?n.calcBandwidth(null===g||void 0===g?void 0:g.x):n.bandwidth,y=[],{index:m,visibleGroupCount:b}=f.getVisiblePeerGroupIndex(this);for(let t=0;t<b;t++)y.push(String(t));s.domain=y,s.range=[0,null!==v&&void 0!==v?v:0],i instanceof vN?s.paddingInner=i.groupPaddingInner:s.padding=i instanceof TN?.1:0,s.round=0!==s.padding;const S=s.bandwidth>=1?s.bandwidth:s.rawBandwidth,x=e.resolveProcessedDataIndexById(this,"xValue").index,C=e.resolveProcessedDataIndexById(this,"yValue-raw").index,w=e.resolveProcessedDataIndexById(this,"yValue-start").index,E=e.resolveProcessedDataIndexById(this,"yValue-end").index,O=!this.ctx.animationManager.isSkipped(),D={itemId:a,nodeData:[],labelData:[],scales:t.calculateScaling.call(this),visible:this.visible||O};return null===p||void 0===p||p.data.forEach((t=>{let{keys:e,datum:i,values:o}=t;const p=e[x],f=n.convert(p),g=+o[0][E],v=+o[0][w],y=o[0][C],b=f+s.convert(String(m));if(isNaN(g))return;const O=r.convert(g),A=r.convert(v),T=this.getBarDirection()===QT.X,M={x:T?Math.min(O,A):b,y:T?b:Math.min(O,A),width:T?Math.abs(A-O):S,height:T?S:Math.abs(A-O)},{fontStyle:k,fontWeight:R,fontSize:P,fontFamily:N,color:L,placement:_}=h,I=this.getLabelText(this.label,{datum:i[0],value:y,xKey:l,yKey:a,xName:this.xName,yName:this.yName,legendItemName:this.legendItemName},(t=>Uk(t)?t.toFixed(2):"")),F=I?Object.assign({text:I,fill:L,fontStyle:k,fontWeight:R,fontSize:P,fontFamily:N},function(t){let{isPositive:e,isVertical:i,placement:o,padding:n=0,rect:r}=t,s=r.x+r.width/2,a=r.y+r.height/2,l="center",c="middle";switch(o){case"start":i?(a=e?r.y+r.height+n:r.y-n,c=e?"top":"bottom"):(s=e?r.x-n:r.x+r.width+n,l=e?"start":"end");break;case"outside":case"end":i?(a=e?r.y-n:r.y+r.height+n,c=e?"bottom":"top"):(s=e?r.x+r.width+n:r.x-n,l=e?"start":"end")}return{x:s,y:a,textAlign:l,textBaseline:c}}({isPositive:y>=0,isVertical:!T,placement:_,rect:M})):void 0,G=this.shouldFlipXY()?M.height:M.width,B={series:this,itemId:a,datum:i[0],cumulativeValue:g,xValue:p,yValue:y,yKey:a,xKey:l,capDefaults:{lengthRatioMultiplier:G,lengthMax:G},x:M.x,y:M.y,width:M.width,height:M.height,midPoint:{x:M.x+M.width/2,y:M.y+M.height/2},fill:c,stroke:d,strokeWidth:u,label:F};D.nodeData.push(B),D.labelData.push(B)})),[D]}))}nodeFactory(){return new YL}updateDatumSelection(t){return hA(this,void 0,void 0,(function*(){return t.datumSelection.update(t.nodeData,(t=>{t.tag=RI.Bar}),(t=>t.xValue))}))}updateDatumNodes(t){return hA(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{yKey:o="",fill:n,stroke:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,shadow:d,formatter:u,id:h,highlightStyle:{item:p},ctx:f,stackGroup:g}=this,v=this.axes[QT.X],y=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[e,i]=t;return!(0!==e||1!==i)}(null===v||void 0===v?void 0:v.visibleRange),m=this.getCategoryDirection()===QT.X;e.each(((t,e)=>{const v={fill:n,stroke:r,fillOpacity:s,strokeOpacity:a,lineDash:l,lineDashOffset:c,fillShadow:d,strokeWidth:this.getStrokeWidth(this.strokeWidth)},b=m?e.width>0:e.height>0,S=function(t){var e,i,o,n,r,{datum:s,isHighlighted:a,style:l,highlightStyle:c,formatter:d,seriesId:u,ctx:{callbackCache:h}}=t,p=cA(t,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:f,fillOpacity:g,stroke:v,strokeWidth:y}=Fk(a&&c,l),{strokeOpacity:m,fillShadow:b,lineDash:S,lineDashOffset:x}=l;let C;return d&&(C=h.call(d,Object.assign({datum:s.datum,xKey:s.xKey,fill:f,stroke:v,strokeWidth:y,highlighted:a,seriesId:u},p))),{fill:null!==(e=null===C||void 0===C?void 0:C.fill)&&void 0!==e?e:f,stroke:null!==(i=null===C||void 0===C?void 0:C.stroke)&&void 0!==i?i:v,strokeWidth:null!==(o=null===C||void 0===C?void 0:C.strokeWidth)&&void 0!==o?o:y,fillOpacity:null!==(n=null===C||void 0===C?void 0:C.fillOpacity)&&void 0!==n?n:g,strokeOpacity:null!==(r=null===C||void 0===C?void 0:C.strokeOpacity)&&void 0!==r?r:m,lineDash:S,lineDashOffset:x,fillShadow:b}}({datum:e,isHighlighted:i,style:v,highlightStyle:p,formatter:u,seriesId:h,stackGroup:g,ctx:f,yKey:o});S.crisp=y,S.visible=b,function(t){let{rect:e,config:i}=t;const{crisp:o=!0,fill:n,stroke:r,strokeWidth:s,fillOpacity:a,strokeOpacity:l,lineDash:c,lineDashOffset:d,fillShadow:u,visible:h=!0}=i;e.crisp=o,e.fill=n,e.stroke=r,e.strokeWidth=s,e.fillOpacity=a,e.strokeOpacity=l,e.lineDash=c,e.lineDashOffset=d,e.fillShadow=u,e.visible=h}({rect:t,config:S})}))}))}updateLabelSelection(t){return hA(this,void 0,void 0,(function*(){const e=this.label.enabled?t.labelData:[];return t.labelSelection.update(e,(t=>{t.tag=RI.Label,t.pointerEvents=cM.None}))}))}updateLabelNodes(t){return hA(this,void 0,void 0,(function*(){t.labelSelection.each(((t,e)=>{!function(t,e,i){if(e.enabled&&i){const{x:o,y:n,text:r,textAlign:s,textBaseline:a}=i,{color:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h}=e;t.setProperties({visible:!0,x:o,y:n,text:r,fill:l,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:h,textAlign:s,textBaseline:a})}else t.visible=!1}(t,this.label,e.label)}))}))}getTooltipHtml(t){var e;const{xKey:i,yKey:o,processedData:n,ctx:{callbackCache:r}}=this,s=this.getCategoryAxis(),a=this.getValueAxis(),{xValue:l,yValue:c,datum:d}=t;if(!n||!i||!o||!s||!a)return"";const{xName:u,yName:h,fill:p,stroke:f,tooltip:g,formatter:v,id:y,stackGroup:m}=this,b=this.getStrokeWidth(this.strokeWidth),S=s.formatDatum(l),x=a.formatDatum(c),C=Bk(h),w=Bk(S+": "+x);let E;v&&(E=r.call(v,{datum:d,fill:p,stroke:f,strokeWidth:b,highlighted:!1,xKey:i,yKey:o,seriesId:y,stackGroup:m}));const O=null!==(e=null===E||void 0===E?void 0:E.fill)&&void 0!==e?e:p;return g.toTooltipHtml({title:C,content:w,backgroundColor:O},Object.assign({datum:d,xKey:i,xName:u,yKey:o,yName:h,color:O,title:C,seriesId:y,stackGroup:m},this.getModuleTooltipParams(d)))}getLegendData(t){var e;const{id:i,data:o,xKey:n,yKey:r,yName:s,legendItemName:a,fill:l,stroke:c,strokeWidth:d,fillOpacity:u,strokeOpacity:h,visible:p,showInLegend:f}=this;return"category"===t&&f&&(null===o||void 0===o?void 0:o.length)&&n&&r?[{legendType:"category",id:i,itemId:r,seriesId:i,enabled:p,label:{text:null!==(e=null!==a&&void 0!==a?a:s)&&void 0!==e?e:r},marker:{fill:l,stroke:c,fillOpacity:u,strokeOpacity:h,strokeWidth:d},legendItemName:a}]:[]}animateEmptyUpdateReady(t){let{datumSelections:e,labelSelections:i,annotationSelections:o}=t;const n=GI(FI("vertical"===this.direction,this.axes));zM(this.id,"nodes",this.ctx.animationManager,e,n),FR(this,"labels",this.ctx.animationManager,i),FR(this,"annotations",this.ctx.animationManager,o)}animateWaitingUpdateReady(t){var e,i;const{datumSelections:o,labelSelections:n,annotationSelections:r}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const s=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,a=GI(FI("vertical"===this.direction,this.axes));zM(this.id,"nodes",this.ctx.animationManager,o,a,((t,e)=>String(e.xValue)),s),FR(this,"labels",this.ctx.animationManager,n),FR(this,"annotations",this.ctx.animationManager,r)}isLabelEnabled(){return this.label.enabled}}jI.className="BarSeries",jI.type="bar",dA([ZA(bT),uA("design:type",String)],jI.prototype,"fill",void 0),dA([ZA(bT),uA("design:type",String)],jI.prototype,"stroke",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],jI.prototype,"fillOpacity",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],jI.prototype,"strokeOpacity",void 0),dA([ZA(FT),uA("design:type",Array)],jI.prototype,"lineDash",void 0),dA([ZA(wT(0)),uA("design:type",Number)],jI.prototype,"lineDashOffset",void 0),dA([ZA(lT),uA("design:type",Function)],jI.prototype,"formatter",void 0),dA([ZA(hT),uA("design:type",String)],jI.prototype,"xKey",void 0),dA([ZA(hT),uA("design:type",String)],jI.prototype,"xName",void 0),dA([ZA(hT),uA("design:type",String)],jI.prototype,"yKey",void 0),dA([ZA(hT),uA("design:type",String)],jI.prototype,"yName",void 0),dA([ZA(hT),uA("design:type",String)],jI.prototype,"stackGroup",void 0),dA([ZA(ET()),uA("design:type",Number)],jI.prototype,"normalizedTo",void 0),dA([ZA(wT(0)),uA("design:type",Number)],jI.prototype,"strokeWidth",void 0);class WI extends QL{constructor(t,e,i,o){super(t,e,i,o),this.sizeKey=o.sizeKey}}class zI extends dI{constructor(){super(...arguments),this.maxSize=30,this.domain=void 0}}dA([ZA(wT(0)),iM({redraw:tM.MAJOR}),uA("design:type",Object)],zI.prototype,"maxSize",void 0),dA([ZA(AT),iM({redraw:tM.MAJOR}),uA("design:type",Array)],zI.prototype,"domain",void 0);class HI extends t_{constructor(t){super({moduleCtx:t,pickModes:[wR.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,wR.NEAREST_NODE,wR.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:BR,marker:pI}}),this.NodeClickEvent=WI,this.sizeScale=new gk,this.marker=new zI,this.label=new sR,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.sizeName="Size",this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.sizeKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new UL,this.tooltip=new sP}processData(t){var e,i;return hA(this,void 0,void 0,(function*(){const{xKey:o,yKey:n,sizeKey:r,labelKey:s,colorScale:a,colorDomain:l,colorRange:c,colorKey:d,marker:u,data:h}=this;if(null==o||null==n||null==r||null==h)return;const{isContinuousX:p,isContinuousY:f}=this.isContinuous(),{dataModel:g,processedData:v}=yield this.requestDataModel(t,h,{props:[AR(this,o,p,{id:"xKey-raw"}),AR(this,n,f,{id:"yKey-raw"}),...s?[AR(this,s,!1,{id:"labelKey-raw"})]:[],TR(this,o,p,{id:"xValue"}),TR(this,n,f,{id:"yValue"}),TR(this,r,!0,{id:"sizeValue"}),...d?[TR(this,d,!0,{id:"colorValue"})]:[],...s?[TR(this,s,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),y=g.resolveProcessedDataIndexById(this,"sizeValue").index,m=null!==(e=v.domain.values[y])&&void 0!==e?e:[];if(this.sizeScale.domain=u.domain?u.domain:m,d){const t=g.resolveProcessedDataIndexById(this,"colorValue").index;a.domain=null!==(i=null!==l&&void 0!==l?l:v.domain.values[t])&&void 0!==i?i:[],a.range=c,a.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const o=t===QT.X?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,o),r=e.getDomain(this,o,"value",i);if("value"===(null===n||void 0===n?void 0:n.def.type)&&"category"===(null===n||void 0===n?void 0:n.def.valueType))return r;const s=this.axes[t];return zN(gA(r),s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,o,n;return hA(this,void 0,void 0,(function*(){const{visible:r,axes:s,yKey:a="",xKey:l="",label:c,labelKey:d,dataModel:u,processedData:h,colorScale:p,sizeKey:f="",colorKey:g}=this,v=s[QT.X],y=s[QT.Y];if(!(u&&h&&r&&v&&y))return[];const m=u.resolveProcessedDataIndexById(this,"xValue").index,b=u.resolveProcessedDataIndexById(this,"yValue").index,S=f?u.resolveProcessedDataIndexById(this,"sizeValue").index:-1,x=g?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,C=d?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,w=v.scale,E=y.scale,O=(null!==(e=w.bandwidth)&&void 0!==e?e:0)/2,D=(null!==(i=E.bandwidth)&&void 0!==i?i:0)/2,{sizeScale:A,marker:T}=this,M=[];A.range=[T.size,T.maxSize];const k=c.getFont();for(const{values:t,datum:e}of null!==(o=h.data)&&void 0!==o?o:[]){const i=t[m],o=t[b],n=w.convert(i)+O,r=E.convert(o)+D,s=this.getLabelText(c,{value:d?t[C]:o,datum:e,xKey:l,yKey:a,sizeKey:f,labelKey:d,xName:this.xName,yName:this.yName,sizeName:this.sizeName,labelName:this.labelName}),u=gM.getTextSize(String(s),k),h=f?A.convert(t[S]):T.size,v=g?p.convert(t[x]):void 0;M.push({series:this,itemId:a,yKey:a,xKey:l,datum:e,xValue:i,yValue:o,sizeValue:t[S],point:{x:n,y:r,size:h},midPoint:{x:n,y:r},fill:v,label:Object.assign({text:s},u)})}return[{itemId:null!==(n=this.yKey)&&void 0!==n?n:this.id,nodeData:M,labelData:M,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce(((t,e)=>t.concat(e.labelData)),[])}markerFactory(){const{shape:t}=this.marker;return new(SL(t))}updateMarkerSelection(t){return hA(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t;this.marker.isDirty()&&(i.clear(),i.cleanup());const o=this.marker.enabled?e:[];return i.update(o,void 0,(t=>this.getDatumId(t)))}))}updateMarkerNodes(t){return hA(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:o="",yKey:n="",sizeKey:r="",labelKey:s,marker:a}=this,l=Fk(i&&this.highlightStyle.item,a.getStyle());this.sizeScale.range=[a.size,a.maxSize],e.each(((t,e)=>{this.updateMarkerStyle(t,a,{datum:e,highlighted:i,xKey:o,yKey:n,sizeKey:r,labelKey:s},l)})),i||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return hA(this,void 0,void 0,(function*(){const{labelSelection:o}=t,{label:{enabled:n}}=this,r=(n&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map((t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}})));return o.update(r)}))}updateLabelNodes(t){return hA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each(((t,e)=>{var o,n,r,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(n=null===(o=e.point)||void 0===o?void 0:o.x)&&void 0!==n?n:0,t.y=null!==(s=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"}))}))}getTooltipHtml(t){var e;const{xKey:i,yKey:o,sizeKey:n,axes:r}=this,s=r[QT.X],a=r[QT.Y];if(!i||!o||!s||!a||!n)return"";const{marker:l,tooltip:c,xName:d,yName:u,sizeName:h,labelKey:p,labelName:f,id:g}=this,v=Fk({fill:t.fill,strokeWidth:this.getStrokeWidth(l.strokeWidth)},l.getStyle()),{fill:y="gray"}=this.getMarkerStyle(l,{datum:t,highlighted:!1,xKey:i,yKey:o,sizeKey:n,labelKey:p},v),m=null!==(e=this.title)&&void 0!==e?e:u,{datum:b,xValue:S,yValue:x,sizeValue:C,label:{text:w}}=t,E=Bk(s.formatDatum(S)),O=Bk(a.formatDatum(x));let D=`<b>${Bk(null!==d&&void 0!==d?d:i)}</b>: ${E}<br><b>${Bk(null!==u&&void 0!==u?u:o)}</b>: ${O}`;return n&&(D+=`<br><b>${Bk(null!==h&&void 0!==h?h:n)}</b>: ${Bk(String(C))}`),p&&(D=`<b>${Bk(null!==f&&void 0!==f?f:p)}</b>: ${Bk(w)}<br>`+D),c.toTooltipHtml({title:m,content:D,backgroundColor:y},{datum:b,xKey:i,xName:d,yKey:o,yName:u,sizeKey:n,sizeName:h,labelKey:p,labelName:f,title:m,color:y,seriesId:g})}getLegendData(){var t;const{id:e,data:i,xKey:o,yKey:n,sizeKey:r,yName:s,title:a,visible:l,marker:c}=this,{shape:d,fill:u,stroke:h,fillOpacity:p,strokeOpacity:f,strokeWidth:g}=c;return(null===i||void 0===i?void 0:i.length)&&o&&n&&r?[{legendType:"category",id:e,itemId:n,seriesId:e,enabled:l,label:{text:null!==(t=null!==a&&void 0!==a?a:s)&&void 0!==t?t:n},marker:{shape:d,fill:null!==u&&void 0!==u?u:"rgba(0, 0, 0, 0)",stroke:null!==h&&void 0!==h?h:"rgba(0, 0, 0, 0)",fillOpacity:null!==p&&void 0!==p?p:1,strokeOpacity:null!==f&&void 0!==f?f:1,strokeWidth:null!==g&&void 0!==g?g:0}}]:[]}animateEmptyUpdateReady(t){let{markerSelections:e,labelSelections:i}=t;uI(this,this.ctx.animationManager,e),FR(this,"labels",this.ctx.animationManager,i)}getDatumId(t){return rR([`${t.xValue}`,`${t.yValue}`,t.label.text])}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new mk}}HI.className="BubbleSeries",HI.type="bubble",dA([ZA(hT),uA("design:type",String)],HI.prototype,"title",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"labelKey",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"xName",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"yName",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"sizeName",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"labelName",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"xKey",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"yKey",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"sizeKey",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"colorKey",void 0),dA([ZA(hT),uA("design:type",String)],HI.prototype,"colorName",void 0),dA([ZA(AT),uA("design:type",Array)],HI.prototype,"colorDomain",void 0),dA([ZA(ST),uA("design:type",Array)],HI.prototype,"colorRange",void 0);const UI=["count","sum","mean"],KI=QA((t=>UI.includes(t)),"expecting a histogram aggregation keyword such as 'count', 'sum' or 'mean");var YI;!function(t){t[t.Bin=0]="Bin",t[t.Label=1]="Label"}(YI||(YI={}));class XI extends t_{constructor(t){super({moduleCtx:t,pickModes:[wR.EXACT_SHAPE_MATCH],datumSelectionGarbageCollection:!1,animationResetFns:{datum:BI,label:BR}}),this.label=new sR,this.tooltip=new sP,this.fill=void 0,this.stroke=void 0,this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.xKey=void 0,this.areaPlot=!1,this.aggregation="sum",this.binCount=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0,this.strokeWidth=1,this.shadow=void 0,this.calculatedBins=[]}deriveBins(t){if(void 0===this.binCount){const e=ck(t[0],t[1],10),i=uk(t[0],t[1],10),o=e[0],n=t=>[t,t+i];return[[o-i,o],...e.map(n)]}return this.calculateNiceBins(t,this.binCount)}calculateNiceBins(t,e){const i=Math.floor(t[0]),o=t[1],n=e||1,{start:r,binSize:s}=this.calculateNiceStart(i,o,n);return this.getBins(r,o,s,n)}getBins(t,e,i,o){const n=[];for(let r=0;r<o;r++){const s=Math.round(10*(t+r*i))/10;let a=Math.round(10*(t+(r+1)*i))/10;r===o-1&&(a=Math.max(a,e)),n[r]=[s,a]}return n}calculateNiceStart(t,e,i){const o=Math.abs(e-t)/i,n=Math.floor(Math.log10(o)),r=Math.pow(10,n);return{start:Math.floor(t/r)*r,binSize:o}}processData(t){return hA(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,data:o,areaPlot:n,aggregation:r}=this,s=[AR(this,e,!0),$k];if(i){let t=SR(this,"groupCount");"count"===r||("sum"===r?t={id:"groupAgg",scopes:[this.id],type:"aggregate",matchGroupIds:a?[a]:void 0,aggregateFunction:t=>bR(t),groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,o;return e[0]+=null!==(i=null===t||void 0===t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(o=null===t||void 0===t?void 0:t[1])&&void 0!==o?o:0,e}}:"mean"===r&&(t=function(t,e,i){const o={id:e,scopes:[t.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:t=>bR(t),groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,-1];var i,o;return e[0]+=null!==(i=null===t||void 0===t?void 0:t[0])&&void 0!==i?i:0,e[1]+=null!==(o=null===t||void 0===t?void 0:t[1])&&void 0!==o?o:0,e[2]++,e},finalFunction:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}};return o}(this,"groupAgg"))),n&&(t=xR(this,"groupAgg",t)),s.push(TR(this,i,!0,{invalidValue:void 0}),t)}else{let t=SR(this,"groupAgg");n&&(t=xR(this,"groupAgg",t)),s.push(t)}var a;!this.ctx.animationManager.isSkipped()&&this.processedData&&s.push(nR(this.processedData,!1)),yield this.requestDataModel(t,null!==o&&void 0!==o?o:[],{props:s,dataVisible:this.visible,groupByFn:t=>{var e;const i=zN(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const o=null!==(e=this.bins)&&void 0!==e?e:this.deriveBins(i),n=o.length;return this.calculatedBins=[...o],t=>{const e=t.keys[0];for(let i=0;i<n;i++){const t=o[i];if(e>=t[0]&&e<t[1])return t;if(i===n-1&&e<=t[1])return t}return[]}}}),this.animationState.transition("updateData")}))}getSeriesDomain(t){var e,i,o,n;const{processedData:r,dataModel:s}=this;if(!r||!s||!this.calculatedBins.length)return[];const a=s.getDomain(this,"groupAgg","aggregate",r),l=null===(e=this.calculatedBins)||void 0===e?void 0:e[0][0],c=null===(i=this.calculatedBins)||void 0===i?void 0:i[(null!==(n=null===(o=this.calculatedBins)||void 0===o?void 0:o.length)&&void 0!==n?n:0)-1][1];return t===QT.X?zN([l,c]):zN(a)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e;return hA(this,void 0,void 0,(function*(){const{axes:i,processedData:o,ctx:{callbackCache:n}}=this,r=i[QT.X],s=i[QT.Y];if(!this.visible||!r||!s||!o||"grouped"!==o.type)return[];const{scale:a}=r,{scale:l}=s,{fill:c,stroke:d,strokeWidth:u,id:h,yKey:p="",xKey:f=""}=this,g=[],{label:{formatter:v=t=>String(t.value),fontStyle:y,fontWeight:m,fontSize:b,fontFamily:S,color:x}}=this;return o.data.forEach((t=>{var e;const{aggValues:[[i,o]]=[[0,0]],datum:r,datum:{length:s},keys:C,keys:[w,E]}=t,O=a.convert(w),D=a.convert(E),A=i+o,T=l.convert(0),M=l.convert(A),k=D-O,R=Math.abs(M-T),P=0!==A?{text:null!==(e=n.call(v,{value:A,datum:r,seriesId:h,xKey:f,yKey:p,xName:this.xName,yName:this.yName}))&&void 0!==e?e:String(A),fontStyle:y,fontWeight:m,fontSize:b,fontFamily:S,fill:x,x:O+k/2,y:M+R/2}:void 0,N={x:O+k/2,y:M+R/2};g.push({series:this,datum:r,aggregatedValue:A,frequency:s,domain:C,yKey:p,xKey:f,x:O,y:M,xValue:O,yValue:M,width:k,height:R,midPoint:N,fill:c,stroke:d,strokeWidth:u,label:P})})),[{itemId:null!==(e=this.yKey)&&void 0!==e?e:this.id,nodeData:g,labelData:g,scales:t.calculateScaling.call(this),animationValid:!0,visible:this.visible}]}))}nodeFactory(){return new YL}updateDatumSelection(t){return hA(this,void 0,void 0,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,(t=>{t.tag=YI.Bin,t.crisp=!0}),(t=>t.domain.join("_")))}))}updateDatumNodes(t){return hA(this,void 0,void 0,(function*(){const{datumSelection:e,isHighlight:i}=t,{fillOpacity:o,strokeOpacity:n,shadow:r,highlightStyle:{item:{fill:s,fillOpacity:a=o,stroke:l,strokeWidth:c}}}=this;e.each(((t,e,d)=>{var u,h;const p=i&&void 0!==c?c:e.strokeWidth,f=i?a:o;t.fill=null!==(u=i?s:void 0)&&void 0!==u?u:e.fill,t.stroke=null!==(h=i?l:void 0)&&void 0!==h?h:e.stroke,t.fillOpacity=f,t.strokeOpacity=n,t.strokeWidth=p,t.lineDash=this.lineDash,t.lineDashOffset=this.lineDashOffset,t.fillShadow=r,t.zIndex=i?IR.highlightedZIndex:d,t.visible=e.height>0}))}))}updateLabelSelection(t){return hA(this,void 0,void 0,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.tag=YI.Label,t.pointerEvents=cM.None,t.textAlign="center",t.textBaseline="middle"}))}))}updateLabelNodes(t){return hA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,i=this.label.enabled;e.each(((t,e)=>{const o=e.label;o&&i?(t.text=o.text,t.x=o.x,t.y=o.y,t.fontStyle=o.fontStyle,t.fontWeight=o.fontWeight,t.fontSize=o.fontSize,t.fontFamily=o.fontFamily,t.fill=o.fill,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){const{xKey:e,yKey:i="",axes:o}=this,n=o[QT.X],r=o[QT.Y];if(!e||!n||!r)return"";const{xName:s,yName:a,fill:l,tooltip:c,aggregation:d,id:u}=this,{aggregatedValue:h,frequency:p,domain:[f,g]}=t,v=`${Bk(null!==s&&void 0!==s?s:e)}: ${n.formatDatum(f)} - ${n.formatDatum(g)}`;let y=i?`<b>${Bk(null!==a&&void 0!==a?a:i)} (${d})</b>: ${r.formatDatum(h)}<br>`:"";y+=`<b>Frequency</b>: ${p}`;const m={title:v,backgroundColor:l,content:y};return c.toTooltipHtml(m,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:e,xName:s,yKey:i,yName:a,color:l,title:v,seriesId:u})}getLegendData(t){var e;const{id:i,data:o,xKey:n,yName:r,visible:s,fill:a,stroke:l,fillOpacity:c,strokeOpacity:d,strokeWidth:u}=this;return o&&0!==o.length&&"category"===t?[{legendType:"category",id:i,itemId:n,seriesId:i,enabled:s,label:{text:null!==(e=null!==r&&void 0!==r?r:n)&&void 0!==e?e:"Frequency"},marker:{fill:null!==a&&void 0!==a?a:"rgba(0, 0, 0, 0)",stroke:null!==l&&void 0!==l?l:"rgba(0, 0, 0, 0)",fillOpacity:c,strokeOpacity:d,strokeWidth:u}}]:[]}animateEmptyUpdateReady(t){let{datumSelections:e,labelSelections:i}=t;const o=GI(FI(!0,this.axes));zM(this.id,"datums",this.ctx.animationManager,e,o),FR(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i;const o=null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff,n=GI(FI(!0,this.axes));zM(this.id,"datums",this.ctx.animationManager,t.datumSelections,n,((t,e)=>this.getDatumId(e)),o),FR(this,"labels",this.ctx.animationManager,t.labelSelections)}getDatumId(t){return rR(t.domain.map((t=>`${t}`)))}isLabelEnabled(){return this.label.enabled}}XI.className="HistogramSeries",XI.type="histogram",dA([ZA(bT),uA("design:type",String)],XI.prototype,"fill",void 0),dA([ZA(bT),uA("design:type",String)],XI.prototype,"stroke",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],XI.prototype,"fillOpacity",void 0),dA([ZA(wT(0,1)),uA("design:type",Object)],XI.prototype,"strokeOpacity",void 0),dA([ZA(FT),uA("design:type",Array)],XI.prototype,"lineDash",void 0),dA([ZA(wT(0)),uA("design:type",Number)],XI.prototype,"lineDashOffset",void 0),dA([ZA(hT),uA("design:type",String)],XI.prototype,"xKey",void 0),dA([ZA(cT),uA("design:type",Boolean)],XI.prototype,"areaPlot",void 0),dA([ZA(iT()),uA("design:type",Array)],XI.prototype,"bins",void 0),dA([ZA(KI),uA("design:type",String)],XI.prototype,"aggregation",void 0),dA([ZA(ET(0)),uA("design:type",Number)],XI.prototype,"binCount",void 0),dA([ZA(hT),uA("design:type",String)],XI.prototype,"xName",void 0),dA([ZA(hT),uA("design:type",String)],XI.prototype,"yKey",void 0),dA([ZA(hT),uA("design:type",String)],XI.prototype,"yName",void 0),dA([ZA(wT(0)),uA("design:type",Number)],XI.prototype,"strokeWidth",void 0);class $I extends t_{constructor(t){super({moduleCtx:t,hasMarkers:!0,pickModes:[wR.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,wR.NEAREST_NODE,wR.EXACT_SHAPE_MATCH],markerSelectionGarbageCollection:!1,animationResetFns:{path:wI({getOpacity:()=>this.getOpacity()}),label:BR,marker:(t,e)=>Object.assign(Object.assign({},{opacity:1,scalingX:1,scalingY:1}),fI(0,e))}}),this.label=new sR,this.marker=new dI,this.tooltip=new sP,this.title=void 0,this.stroke="#874349",this.lineDash=[0],this.lineDashOffset=0,this.strokeWidth=2,this.strokeOpacity=1,this.xKey=void 0,this.xName=void 0,this.yKey=void 0,this.yName=void 0}processData(t){return hA(this,void 0,void 0,(function*(){const{xKey:e,yKey:i,data:o}=this;if(null==e||null==i||null==o)return;const n=!this.ctx.animationManager.isSkipped(),{isContinuousX:r,isContinuousY:s}=this.isContinuous(),a=[];r||(a.push(AR(this,e,r,{id:"xKey"})),n&&this.processedData&&a.push(nR(this.processedData))),n&&a.push(tR(this,r?["xValue"]:[])),a.push(TR(this,e,r,{id:"xValue"}),TR(this,i,s,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,o,{props:a}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:o}=this;if(!o||!i)return[];const n=e[QT.X],r=e[QT.Y],s=i.resolveProcessedDataDefById(this,"xValue");if(t===QT.X){const t=i.getDomain(this,"xValue","value",o);return"value"===(null===s||void 0===s?void 0:s.def.type)&&"category"===s.def.valueType?t:zN(gA(t),n)}return zN(i.getDomain(this,"yValue","value",o),r)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,o;return hA(this,void 0,void 0,(function*(){const{processedData:n,dataModel:r,axes:s}=this,a=s[QT.X],l=s[QT.Y];if(!n||!r||!a||!l)return[];const{label:c,yKey:d="",xKey:u=""}=this,h=a.scale,p=l.scale,f=(null!==(e=h.bandwidth)&&void 0!==e?e:0)/2,g=(null!==(i=p.bandwidth)&&void 0!==i?i:0)/2,v=[],y=this.marker.enabled?this.marker.size:0,m=r.resolveProcessedDataIndexById(this,"xValue").index,b=r.resolveProcessedDataIndexById(this,"yValue").index;let S,x=!0;for(let t=0;t<n.data.length;t++){const{datum:e,values:i}=null!==S&&void 0!==S?S:n.data[t],r=i[m],s=i[b];if(void 0===s)x=!0;else{const i=h.convert(r)+f;if(isNaN(i)){x=!0,S=void 0;continue}S=void 0===(null===(o=n.data[t+1])||void 0===o?void 0:o.values[b])?void 0:n.data[t+1];const a=p.convert(s)+g,l=this.getLabelText(c,{value:s,datum:e,xKey:u,yKey:d,xName:this.xName,yName:this.yName},(t=>Uk(t)?t.toFixed(2):String(t)));v.push({series:this,datum:e,yKey:d,xKey:u,point:{x:i,y:a,moveTo:x,size:y},midPoint:{x:i,y:a},yValue:s,xValue:r,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},label:l?{text:l,fontStyle:c.fontStyle,fontWeight:c.fontWeight,fontSize:c.fontSize,fontFamily:c.fontFamily,textAlign:"center",textBaseline:"bottom",fill:c.color}:void 0}),x=!1}}return[{itemId:d,nodeData:v,labelData:v,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}markerFactory(){const{shape:t}=this.marker;return new(SL(t))}updatePathNodes(t){var e,i;return hA(this,void 0,void 0,(function*(){const{paths:[o],opacity:n,visible:r,animationEnabled:s}=t,{seriesRectHeight:a,seriesRectWidth:l}=this.nodeDataDependencies;o.setProperties({fill:void 0,lineJoin:"round",pointerEvents:cM.None,opacity:n,stroke:this.stroke,strokeWidth:this.getStrokeWidth(this.strokeWidth),strokeOpacity:this.strokeOpacity,lineDash:this.lineDash,lineDashOffset:this.lineDashOffset}),s||(o.visible=r),null==o.clipPath&&(o.clipPath=new Mk,o.clipScalingX=1,o.clipScalingY=1),null===(e=o.clipPath)||void 0===e||e.clear({trackChanges:!0}),null===(i=o.clipPath)||void 0===i||i.rect(-25,-25,(null!==l&&void 0!==l?l:0)+50,(null!==a&&void 0!==a?a:0)+50)}))}updateMarkerSelection(t){return hA(this,void 0,void 0,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:o,enabled:n}=this.marker;return e=o&&n?e:[],this.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,(t=>this.getDatumId(t)))}))}updateMarkerNodes(t){return hA(this,void 0,void 0,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:o="",yKey:n="",marker:r,stroke:s,strokeWidth:a,strokeOpacity:l}=this,c=Fk(i&&this.highlightStyle.item,r.getStyle(),{stroke:s,strokeWidth:a,strokeOpacity:l}),d=this.ctx.animationManager.isSkipped();e.each(((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:o,yKey:n},c,{applyTranslation:d})})),i||this.marker.markClean()}))}updateLabelSelection(t){return hA(this,void 0,void 0,(function*(){let{labelData:e}=t;const{labelSelection:i}=t,{shape:o,enabled:n}=this.marker;return e=o&&n?e:[],i.update(e)}))}updateLabelNodes(t){return hA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:o,fontWeight:n,fontSize:r,fontFamily:s,color:a}=this.label;e.each(((t,e)=>{const{point:l,label:c}=e;e&&c&&i?(t.fontStyle=o,t.fontWeight=n,t.fontSize=r,t.fontFamily=s,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l.x,t.y=l.y-10,t.fill=a,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){var e;const{xKey:i,yKey:o,axes:n}=this,r=n[QT.X],s=n[QT.Y];if(!i||!o||!r||!s)return"";const{xName:a,yName:l,tooltip:c,marker:d,id:u}=this,{datum:h,xValue:p,yValue:f}=t,g=r.formatDatum(p),v=s.formatDatum(f),y=Bk(null!==(e=this.title)&&void 0!==e?e:l),m=Bk(g+": "+v),b=Fk({fill:d.stroke},d.getStyle(),{strokeWidth:this.strokeWidth}),{fill:S}=this.getMarkerStyle(d,{datum:t,xKey:i,yKey:o,highlighted:!1},b);return c.toTooltipHtml({title:y,content:m,backgroundColor:S},Object.assign({datum:h,xKey:i,xName:a,yKey:o,yName:l,title:y,color:S,seriesId:u},this.getModuleTooltipParams(h)))}getLegendData(t){var e,i,o,n,r,s,a,l;const{id:c,data:d,xKey:u,yKey:h,yName:p,visible:f,title:g,marker:v,stroke:y,strokeOpacity:m}=this;return(null===d||void 0===d?void 0:d.length)&&u&&h&&"category"===t?[{legendType:"category",id:c,itemId:h,seriesId:c,enabled:f,label:{text:null!==(e=null!==g&&void 0!==g?g:p)&&void 0!==e?e:h},marker:{shape:v.shape,fill:null!==(i=v.fill)&&void 0!==i?i:"rgba(0, 0, 0, 0)",stroke:null!==(n=null!==(o=v.stroke)&&void 0!==o?o:y)&&void 0!==n?n:"rgba(0, 0, 0, 0)",fillOpacity:null!==(r=v.fillOpacity)&&void 0!==r?r:1,strokeOpacity:null!==(a=null!==(s=v.strokeOpacity)&&void 0!==s?s:m)&&void 0!==a?a:1,strokeWidth:null!==(l=v.strokeWidth)&&void 0!==l?l:0}}]:[]}updatePaths(t){return hA(this,void 0,void 0,(function*(){this.updateLinePaths([t.paths],[t.contextData])}))}updateLinePaths(t,e){e.forEach(((e,i)=>{let{nodeData:o}=e;const[n]=t[i],{path:r}=n;r.clear({trackChanges:!0});for(const t of o)t.point.moveTo?r.moveTo(t.point.x,t.point.y):r.lineTo(t.point.x,t.point.y);n.checkPathDirty()}))}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:o,contextData:n,paths:r}=t,{animationManager:s}=this.ctx,{seriesRectWidth:a=0}=this.nodeDataDependencies;this.updateLinePaths(r,n),CI(this,s,r.flat()),cP(e,fI),hI(this,s,e,a),FR(this,"labels",s,i),FR(this,"annotations",s,o)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:o}=this.ctx,{markerSelections:n,labelSelections:r,annotationSelections:s,contextData:a,paths:l,previousContextData:c}=t;if(super.resetAllAnimation(t),0===a.length||!c||0===c.length)return o.skipCurrentBatch(),void this.updateLinePaths(l,a);const[d]=l,[u]=a,[h]=c,p=function(t,e,i){var o;const n="category"===(null===(o=t.scales.x)||void 0===o?void 0:o.type),{result:r,resultMap:s}=n&&i?TI(t,e,i):AI(t,e);let a="updated";if(e.visible&&!t.visible?a="removed":!e.visible&&t.visible&&(a="added"),void 0===r||void 0===s)return;const l=MI(t,e,r,"fade",xI),c=gI(s,a);return Object.assign(Object.assign({},l),{marker:c})}(u,h,null===(i=null===(e=this.processedData)||void 0===e?void 0:e.reduced)||void 0===i?void 0:i.diff);if(void 0===p)return o.skipCurrentBatch(),void this.updateLinePaths(l,a);zM(this.id,"marker",o,n,p.marker),zM(this.id,"path_properties",o,d,p.pathProperties),lI(this.id,"path_update",o,d,p.path),FR(this,"labels",o,r),FR(this,"annotations",o,s)}getDatumId(t){return rR([`${t.xValue}`])}isLabelEnabled(){return this.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new mk}}$I.className="LineSeries",$I.type="line",dA([ZA(hT),uA("design:type",String)],$I.prototype,"title",void 0),dA([ZA(bT),uA("design:type",String)],$I.prototype,"stroke",void 0),dA([ZA(FT),uA("design:type",Array)],$I.prototype,"lineDash",void 0),dA([ZA(wT(0)),uA("design:type",Number)],$I.prototype,"lineDashOffset",void 0),dA([ZA(wT(0)),uA("design:type",Number)],$I.prototype,"strokeWidth",void 0),dA([ZA(wT(0,1)),uA("design:type",Number)],$I.prototype,"strokeOpacity",void 0),dA([ZA(hT),uA("design:type",String)],$I.prototype,"xKey",void 0),dA([ZA(hT),uA("design:type",String)],$I.prototype,"xName",void 0),dA([ZA(hT),uA("design:type",String)],$I.prototype,"yKey",void 0),dA([ZA(hT),uA("design:type",String)],$I.prototype,"yName",void 0);class qI extends t_{constructor(t){super({moduleCtx:t,pickModes:[wR.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST,wR.NEAREST_NODE,wR.EXACT_SHAPE_MATCH],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:pI,label:BR}}),this.marker=new dI,this.label=new sR,this.title=void 0,this.labelKey=void 0,this.xName=void 0,this.yName=void 0,this.labelName="Label",this.xKey=void 0,this.yKey=void 0,this.colorKey=void 0,this.colorName="Color",this.colorRange=["#ffff00","#00ff00","#0000ff"],this.colorScale=new UL,this.tooltip=new sP}processData(t){var e;return hA(this,void 0,void 0,(function*(){const{xKey:i,yKey:o,labelKey:n,data:r}=this;if(null==i||null==o||null==r)return;const{isContinuousX:s,isContinuousY:a}=this.isContinuous(),{colorScale:l,colorDomain:c,colorRange:d,colorKey:u}=this,{dataModel:h,processedData:p}=yield this.requestDataModel(t,r,{props:[AR(this,i,s,{id:"xKey-raw"}),AR(this,o,a,{id:"yKey-raw"}),...n?[AR(this,n,!1,{id:"labelKey-raw"})]:[],TR(this,i,s,{id:"xValue"}),TR(this,o,a,{id:"yValue"}),...u?[TR(this,u,!0,{id:"colorValue"})]:[],...n?[TR(this,n,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(u){const t=h.resolveProcessedDataIndexById(this,"colorValue").index;l.domain=null!==(e=null!==c&&void 0!==c?c:p.domain.values[t])&&void 0!==e?e:[],l.range=d,l.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const o=t===QT.X?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,o),r=e.getDomain(this,o,"value",i);if("value"===(null===n||void 0===n?void 0:n.def.type)&&"category"===(null===n||void 0===n?void 0:n.def.valueType))return r;const s=this.axes[t];return zN(gA(r),s)}createNodeData(){const t=Object.create(null,{calculateScaling:{get:()=>super.calculateScaling}});var e,i,o,n;return hA(this,void 0,void 0,(function*(){const{visible:r,axes:s,yKey:a="",xKey:l="",label:c,labelKey:d,dataModel:u,processedData:h}=this,p=s[QT.X],f=s[QT.Y];if(!(u&&h&&r&&p&&f))return[];const g=u.resolveProcessedDataIndexById(this,"xValue").index,v=u.resolveProcessedDataIndexById(this,"yValue").index,y=this.colorKey?u.resolveProcessedDataIndexById(this,"colorValue").index:-1,m=this.labelKey?u.resolveProcessedDataIndexById(this,"labelValue").index:-1,{colorScale:b,colorKey:S}=this,x=p.scale,C=f.scale,w=(null!==(e=x.bandwidth)&&void 0!==e?e:0)/2,E=(null!==(i=C.bandwidth)&&void 0!==i?i:0)/2,{marker:O}=this,D=[],A=c.getFont();for(const{values:t,datum:e}of null!==(o=h.data)&&void 0!==o?o:[]){const i=t[g],o=t[v],n=x.convert(i)+w,r=C.convert(o)+E,s=this.getLabelText(this.label,{value:d?t[m]:o,datum:e,xKey:l,yKey:a,labelKey:d,xName:this.xName,yName:this.yName,labelName:this.labelName}),c=gM.getTextSize(s,A),u=S?b.convert(t[y]):void 0;D.push({series:this,itemId:a,yKey:a,xKey:l,datum:e,xValue:i,yValue:o,capDefaults:{lengthRatioMultiplier:this.marker.getDiameter(),lengthMax:1/0},point:{x:n,y:r,size:O.size},midPoint:{x:n,y:r},fill:u,label:Object.assign({text:s},c)})}return[{itemId:null!==(n=this.yKey)&&void 0!==n?n:this.id,nodeData:D,labelData:D,scales:t.calculateScaling.call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.marker.isDirty()}getLabelData(){var t;return null===(t=this.contextNodeData)||void 0===t?void 0:t.reduce(((t,e)=>t.concat(e.labelData)),[])}markerFactory(){const{shape:t}=this.marker;return new(SL(t))}updateMarkerSelection(t){return hA(this,void 0,void 0,(function*(){const{nodeData:e,markerSelection:i}=t,{marker:{enabled:o}}=this;this.marker.isDirty()&&(i.clear(),i.cleanup());const n=o?e:[];return i.update(n)}))}updateMarkerNodes(t){return hA(this,void 0,void 0,(function*(){const{xKey:e="",yKey:i="",labelKey:o,marker:n}=this,{markerSelection:r,isHighlight:s}=t,a=Fk(s&&this.highlightStyle.item,n.getStyle());r.each(((t,r)=>{this.updateMarkerStyle(t,n,{datum:r,highlighted:s,xKey:e,yKey:i,labelKey:o},a)})),s||this.marker.markClean()}))}updateLabelSelection(t){var e,i;return hA(this,void 0,void 0,(function*(){const{labelSelection:o}=t,{label:{enabled:n}}=this,r=(n&&null!==(i=null===(e=this.chart)||void 0===e?void 0:e.placeLabels().get(this))&&void 0!==i?i:[]).map((t=>Object.assign(Object.assign({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}})));return o.update(r)}))}updateLabelNodes(t){return hA(this,void 0,void 0,(function*(){const{labelSelection:e}=t,{label:i}=this;e.each(((t,e)=>{var o,n,r,s;t.text=e.label.text,t.fill=i.color,t.x=null!==(n=null===(o=e.point)||void 0===o?void 0:o.x)&&void 0!==n?n:0,t.y=null!==(s=null===(r=e.point)||void 0===r?void 0:r.y)&&void 0!==s?s:0,t.fontStyle=i.fontStyle,t.fontWeight=i.fontWeight,t.fontSize=i.fontSize,t.fontFamily=i.fontFamily,t.textAlign="left",t.textBaseline="top"}))}))}getTooltipHtml(t){const{xKey:e,yKey:i,axes:o}=this,n=o[QT.X],r=o[QT.Y];if(!e||!i||!n||!r)return"";const{marker:s,tooltip:a,xName:l,yName:c,labelKey:d,labelName:u,id:h,title:p=c}=this,f=Fk({fill:t.fill,strokeWidth:this.getStrokeWidth(s.strokeWidth)},s.getStyle()),{fill:g="gray"}=this.getMarkerStyle(s,{datum:t,highlighted:!1,xKey:e,yKey:i,labelKey:d},f),{datum:v,xValue:y,yValue:m,label:b}=t,S=Bk(n.formatDatum(y)),x=Bk(r.formatDatum(m));let C=`<b>${Bk(null!==l&&void 0!==l?l:e)}</b>: ${S}<br><b>${Bk(null!==c&&void 0!==c?c:i)}</b>: ${x}`;return d&&(C=`<b>${Bk(null!==u&&void 0!==u?u:d)}</b>: ${Bk(b.text)}<br>`+C),a.toTooltipHtml({title:p,content:C,backgroundColor:g},Object.assign({datum:v,xKey:e,xName:l,yKey:i,yName:c,labelKey:d,labelName:u,title:p,color:g,seriesId:h},this.getModuleTooltipParams(v)))}getLegendData(t){var e,i,o,n,r;const{id:s,data:a,xKey:l,yKey:c,yName:d,title:u,visible:h,marker:p}=this,{fill:f,stroke:g,fillOpacity:v,strokeOpacity:y,strokeWidth:m}=p;return(null===a||void 0===a?void 0:a.length)&&l&&c&&"category"===t?[{legendType:"category",id:s,itemId:c,seriesId:s,enabled:h,label:{text:null!==(e=null!==u&&void 0!==u?u:d)&&void 0!==e?e:c},marker:{shape:p.shape,fill:null!==(o=null!==(i=p.fill)&&void 0!==i?i:f)&&void 0!==o?o:"rgba(0, 0, 0, 0)",stroke:null!==(r=null!==(n=p.stroke)&&void 0!==n?n:g)&&void 0!==r?r:"rgba(0, 0, 0, 0)",fillOpacity:null!==v&&void 0!==v?v:1,strokeOpacity:null!==y&&void 0!==y?y:1,strokeWidth:null!==m&&void 0!==m?m:0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:o}=t;uI(this,this.ctx.animationManager,e),FR(this,"labels",this.ctx.animationManager,i),FR(this,"annotations",this.ctx.animationManager,o)}isLabelEnabled(){return this.label.enabled}nodeFactory(){return new mk}}qI.className="ScatterSeries",qI.type="scatter",dA([ZA(hT),uA("design:type",String)],qI.prototype,"title",void 0),dA([ZA(hT),uA("design:type",String)],qI.prototype,"labelKey",void 0),dA([ZA(hT),uA("design:type",String)],qI.prototype,"xName",void 0),dA([ZA(hT),uA("design:type",String)],qI.prototype,"yName",void 0),dA([ZA(hT),uA("design:type",String)],qI.prototype,"labelName",void 0),dA([ZA(hT),uA("design:type",String)],qI.prototype,"xKey",void 0),dA([ZA(hT),uA("design:type",String)],qI.prototype,"yKey",void 0),dA([ZA(hT),uA("design:type",String)],qI.prototype,"colorKey",void 0),dA([ZA(hT),uA("design:type",String)],qI.prototype,"colorName",void 0),dA([ZA(AT),uA("design:type",Array)],qI.prototype,"colorDomain",void 0),dA([ZA(ST),uA("design:type",Array)],qI.prototype,"colorRange",void 0);class ZI{constructor(t,e,i,o,n,r,s,a,l,c,d){this.series=t,this.index=e,this.datum=i,this.size=o,this.colorValue=n,this.fill=r,this.stroke=s,this.sumSize=a,this.depth=l,this.parent=c,this.children=d,this.midPoint={x:0,y:0}}contains(t){let e=t;for(;null!=e&&e.index>=this.index;){if(e===this)return!0;e=e.parent}return!1}walk(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ZI.Walk.PreOrder;e===ZI.Walk.PreOrder&&t(this),this.children.forEach((i=>{i.walk(t,e)})),e===ZI.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}}ZI.Walk={PreOrder:0,PostOrder:1};class JI extends IR{constructor(t){super({moduleCtx:t,pickModes:[wR.EXACT_SHAPE_MATCH],contentGroupVirtual:!1}),this.childrenKey="children",this.sizeKey=void 0,this.colorKey=void 0,this.colorName=void 0,this.fills=Object.values(pR),this.strokes=Object.values(fR),this.colorRange=void 0,this.rootNode=new ZI(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new hP("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)}},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t)},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)}},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)}}},(()=>this.checkProcessedDataAnimatable()))}hasData(){return Array.isArray(this.data)&&this.data.length>0}processData(){var t,e;return hA(this,void 0,void 0,(function*(){const{childrenKey:i,sizeKey:o,colorKey:n,fills:r,strokes:s,colorRange:a}=this;let l=0;const c=()=>(l+=1,l);let d=0,u=1/0,h=-1/0;const p=new Array((null!==(e=null===(t=this.data)||void 0===t?void 0:t.length)&&void 0!==e?e:0)+1).fill(void 0),f=(t,e)=>{const r=c(),s=null!=e.depth?e.depth+1:0,a=null!=i?t[i]:void 0,l=null==a||0===a.length;let f=null!=o?t[o]:void 0;f=Number.isFinite(f)?Math.max(f,0):l?1:0;const v=f;d=Math.max(d,s);const y=null!=n?t[n]:void 0;return"number"===typeof y&&(p[r]=y,u=Math.min(u,y),h=Math.max(h,y)),g(new ZI(this,r,t,f,y,void 0,void 0,v,s,e,[]),a)},g=(t,e)=>(null===e||void 0===e||e.forEach((e=>{const i=f(e,t);t.children.push(i),t.sumSize+=i.sumSize})),t),v=g(new ZI(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),y=[u,h];let m;null!=a&&Number.isFinite(u)&&Number.isFinite(h)&&(m=new UL,m.domain=y,m.range=a,m.update()),v.children.forEach(((t,e)=>{t.walk((t=>{let i;const o=p[t.index];null!=o&&(i=null===m||void 0===m?void 0:m.convert(o)),null!==i&&void 0!==i||(i=null===r||void 0===r?void 0:r[e%r.length]),t.fill=i,t.stroke=null==m?null===s||void 0===s?void 0:s[e%s.length]:"rgba(0, 0, 0, 0.2)"}))})),this.rootNode=v,this.maxDepth=d,this.colorDomain=y}))}update(t){let{seriesRect:e}=t;return hA(this,void 0,void 0,(function*(){yield this.updateSelections(),yield this.updateNodes();const t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)}))}resetAllAnimation(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&cP(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null===(e=this.animationResetFns)||void 0===e?void 0:e.datum;null!=i&&cP([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){return"gradient"===t&&null!=this.colorKey&&null!=this.colorRange?[{legendType:"gradient",enabled:this.visible,seriesId:this.id,colorName:this.colorName,colorDomain:this.colorDomain,colorRange:this.colorRange}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}}dA([ZA(hT),uA("design:type",String)],JI.prototype,"childrenKey",void 0),dA([ZA(hT),uA("design:type",String)],JI.prototype,"sizeKey",void 0),dA([ZA(hT),uA("design:type",String)],JI.prototype,"colorKey",void 0),dA([ZA(hT),uA("design:type",String)],JI.prototype,"colorName",void 0),dA([ZA(xT),uA("design:type",Array)],JI.prototype,"fills",void 0),dA([ZA(xT),uA("design:type",Array)],JI.prototype,"strokes",void 0),dA([ZA(xT),uA("design:type",Array)],JI.prototype,"colorRange",void 0);class QI extends pN{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}}dA([ZA(wT(0,1)),uA("design:type",Number)],QI.prototype,"innerRadiusRatio",void 0);const tF={},eF={};function iF(t){return fA.some((t=>"enterprise"===t.packageType))?eF[t]:tF[t]}class oF extends jL{constructor(t,e){super(t,e),this._data={}}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return hA(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),{seriesArea:{padding:i},seriesRoot:o}=this,n=e.clone();return e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e,o.translationX=Math.floor(e.x),o.translationY=Math.floor(e.y),yield Promise.all(this.series.map((t=>hA(this,void 0,void 0,(function*(){yield t.update({seriesRect:e})}))))),o.visible=this.series[0].visible,o.setClipRectInGroupCoordinateSpace(new aM(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:e,visible:!0},axes:[]}),e}))}}oF.className="HierarchyChart",oF.type="hierarchy";const nF="white",rF={fills:Array.from(Object.values(pR)),strokes:Array.from(Object.values(fR))},sF={get cartesian(){return{seriesTypes:k_.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:k_.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:k_.hierarchyTypes,commonOptions:[]}}},aF=Object.values(sF).reduce(((t,e)=>{let{commonOptions:i}=e;return[...t,...i]}),[]);class lF{getPalette(){return rF}static getAxisDefaults(){return{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontStyle:void 0,fontWeight:D_,fontSize:E_,fontFamily:H_,color:U_},label:{fontStyle:void 0,fontWeight:void 0,fontSize:w_,fontFamily:H_,padding:5,rotation:void 0,color:U_,formatter:void 0,avoidCollisions:!0},line:{enabled:!0,width:1,color:q_},tick:{enabled:!1,width:1,color:q_},gridLine:{enabled:!0,style:[{stroke:$_,lineDash:[]}]},crossLines:{enabled:!1,fill:Z_,stroke:Z_,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:w_,fontFamily:H_,padding:5,color:U_}}}}static getSeriesDefaults(){return{tooltip:{enabled:!0,renderer:void 0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1,formatter:void 0}}static getLegendItemMarkerDefaults(){return{shape:void 0,size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:J_},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontStyle:void 0,fontWeight:D_,fontSize:O_,fontFamily:H_,color:U_,wrapping:lF.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:E_,fontFamily:H_,color:X_,wrapping:lF.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontStyle:void 0,fontWeight:void 0,fontSize:E_,fontFamily:H_,color:"rgb(140, 140, 140)",wrapping:lF.getCaptionWrappingDefaults()},legend:{position:A_,spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:lF.getLegendItemMarkerDefaults(),label:{color:U_,fontStyle:void 0,fontWeight:void 0,fontSize:w_,fontFamily:H_,formatter:void 0}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:U_},inactiveStyle:{fill:X_},highlightStyle:{fill:U_},label:{color:U_}}},tooltip:{enabled:!0,range:"nearest",delay:0},listeners:{}}}constructor(t){t=Nk({},null!==t&&void 0!==t?t:{});const{overrides:e=null,palette:i=null}=t,o=this.createChartConfigPerChartType(this.getDefaults());if(e){const{common:t}=e,i=(t,e)=>{if(e)for(const i of t){const t=i;o[t]=Nk(o[t],e)}};for(const[,{seriesTypes:e,commonOptions:o}]of Object.entries(sF)){const n=Object.assign({},t);for(const t of aF)o.includes(t)||delete n[t];i(e,n)}k_.seriesTypes.forEach((t=>{const i=t;e[i]&&(o[i]=Nk(o[i],e[i]))}))}this.palette=null!==i&&void 0!==i?i:this.getPalette(),this.config=Object.freeze(this.templateTheme(o))}createChartConfigPerChartType(t){return Object.entries(sF).forEach((e=>{let[i,{seriesTypes:o}]=e;const n=R_(i);o.forEach((e=>{const i=e;t[i]||(t[i]={},Nk(t[i],n))}))})),t}getDefaults(){let t={};const e=t=>Object.assign(Object.assign(Object.assign({},f_),lF.getChartDefaults()),R_(t)),i=(t,i)=>{var o,n,r,s;const a=e(t),l={};for(const e of i){null!==(o=l[e])&&void 0!==o||(l[e]=Nk({},a));const i=null!==(n=(s=l[e]).axes)&&void 0!==n?n:s.axes={},c=iF(e);c&&(l[e].series=Nk(l[e].series,c));for(const e of u_.axesTypes){const o=p_(e);"cartesian"===t&&(i[e]=Nk(i[e],null!==(r=lF.cartesianAxisDefault[e])&&void 0!==r?r:{})),o&&(i[e]=Nk(i[e],o))}}return l};return t=Nk(t,i("cartesian",k_.cartesianTypes)),t=Nk(t,i("polar",k_.polarTypes)),t=Nk(t,i("hierarchy",k_.hierarchyTypes)),t}templateTheme(t){const e=LA([t]),{extensions:i,properties:o}=this.getTemplateParameters();return _A(e,((t,e)=>{if(e.__extends__){const t=e.__extends__,o=i.get(t);if(null==o)throw new Error("AG Charts - no template variable provided for: "+t);Object.keys(o).forEach((t=>{t in e||(e[t]=o[t])})),delete e.__extends__}if(e.__overrides__){const t=e.__overrides__,o=i.get(t);if(null==o)throw new Error("AG Charts - no template variable provided for: "+t);Object.assign(e,o),delete e.__overrides__}if(Array.isArray(e))for(let i=0;i<e.length;i++){const t=e[i];o.has(t)&&(e[i]=o.get(t))}else for(const[i,n]of Object.entries(e))o.has(n)&&(e[i]=o.get(n))})),e}static getWaterfallSeriesDefaultPositiveColors(){return{fill:pR.BLUE,stroke:fR.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:pR.ORANGE,stroke:fR.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:pR.GRAY,stroke:fR.GRAY}}getTemplateParameters(){const t=new Map;t.set(P_,lF.getChartDefaults()),t.set(I_,lF.getAxisDefaults()),t.set(N_,lF.getChartDefaults().legend),t.set(L_,lF.getChartDefaults().legend.item),t.set(__,lF.getLegendItemMarkerDefaults()),t.set(F_,lF.getAxisDefaults().label),t.set(G_,lF.getAxisDefaults().line),t.set(B_,lF.getAxisDefaults().tick),t.set(V_,lF.getAxisDefaults().gridLine),t.set(j_,lF.getSeriesDefaults()),t.set(z_,{}),t.set(W_,lF.getCartesianSeriesMarkerDefaults());const e=new Map;return e.set(H_,"Verdana, sans-serif"),e.set(U_,"rgb(70, 70, 70)"),e.set(K_,"white"),e.set(X_,"rgb(140, 140, 140)"),e.set($_,"rgb(224,234,241)"),e.set(q_,"rgb(195, 195, 195)"),e.set(Z_,"rgb(70, 70, 70)"),e.set(Y_,nF),e.set(J_,nF),e.set(Q_,"rgba(0, 0, 0, 0.5)"),e.set(rI,[pR.ORANGE,pR.YELLOW,pR.GREEN]),e.set(sI,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),e.set(aI,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),e.set(nI,nF),e.set(tI,lF.getWaterfallSeriesDefaultPositiveColors()),e.set(eI,lF.getWaterfallSeriesDefaultNegativeColors()),e.set(iI,lF.getWaterfallSeriesDefaultTotalColors()),e.set(oI,lF.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:t,properties:e}}}lF.cartesianAxisDefault={number:Object.assign(Object.assign({},lF.getAxisDefaults()),{line:Object.assign(Object.assign({},lF.getAxisDefaults().line),{enabled:!1})}),log:Object.assign(Object.assign({},lF.getAxisDefaults()),{base:10,line:Object.assign(Object.assign({},lF.getAxisDefaults().line),{enabled:!1})}),category:Object.assign(Object.assign({},lF.getAxisDefaults()),{groupPaddingInner:.1,label:Object.assign(Object.assign({},lF.getAxisDefaults().label),{autoRotate:!0}),gridLine:Object.assign(Object.assign({},lF.getAxisDefaults().gridLine),{enabled:!1})}),"grouped-category":Object.assign({},lF.getAxisDefaults()),time:Object.assign(Object.assign({},lF.getAxisDefaults()),{gridLine:Object.assign(Object.assign({},lF.getAxisDefaults().gridLine),{enabled:!1})})};const cF="#182732",dF={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},uF={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},hF={fills:Array.from(Object.values(dF)),strokes:Array.from(Object.values(uF))};class pF extends lF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:dF.BLUE,stroke:uF.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:dF.ORANGE,stroke:uF.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:dF.GRAY,stroke:uF.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,pF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,pF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,pF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(oI,pF.getWaterfallSeriesDefaultTotalColors().stroke),t.properties.set(nI,cF),t.properties.set(U_,"white"),t.properties.set(X_,"#7D91A0"),t.properties.set($_,"#545A6E"),t.properties.set(Z_,"white"),t.properties.set(rI,[dF.ORANGE,dF.YELLOW,dF.GREEN]),t.properties.set(sI,["#192834","#253746","#324859","#3f596c","#4d6a80"]),t.properties.set(aI,["#192834","#3b5164","#496275","#577287","#668399"]),t.properties.set(J_,cF),t.properties.set(Y_,cF),t}getPalette(){return hF}constructor(t){super(t)}}const fF={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},gF={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},vF={fills:Array.from(Object.values(fF)),strokes:Array.from(Object.values(gF))};class yF extends pF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:fF.BLUE,stroke:gF.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:fF.RED,stroke:gF.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:fF.GRAY,stroke:gF.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,yF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,yF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,yF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(rI,[fF.ORANGE,fF.YELLOW,fF.GREEN]),t.properties.set(oI,yF.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return vF}}const mF={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},bF={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},SF={fills:Array.from(Object.values(mF)),strokes:Array.from(Object.values(bF))};class xF extends lF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:mF.BLUE,stroke:bF.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:mF.RED,stroke:bF.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:mF.GRAY,stroke:bF.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,xF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,xF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,xF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(rI,[mF.ORANGE,mF.YELLOW,mF.GREEN]),t.properties.set(oI,xF.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return SF}}const CF={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},wF={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},EF={fills:Array.from(Object.values(CF)),strokes:Array.from(Object.values(wF))};class OF extends pF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:CF.BLUE,stroke:wF.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:CF.RED,stroke:wF.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,OF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,OF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,OF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(rI,[CF.BLUE,CF.RED]),t.properties.set(oI,OF.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return EF}}const DF={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},AF={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},TF={fills:Array.from(Object.values(DF)),strokes:Array.from(Object.values(AF))};class MF extends lF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:DF.BLUE,stroke:AF.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:DF.RED,stroke:AF.RED}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888"}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,MF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,MF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,MF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(rI,[DF.BLUE,DF.RED]),t.properties.set(oI,MF.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return TF}}const kF={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},RF={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},PF={fills:Array.from(Object.values(kF)),strokes:Array.from(Object.values(RF))};class NF extends pF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:kF.BLUE,stroke:RF.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:kF.ORANGE,stroke:RF.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:kF.GRAY,stroke:RF.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,NF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,NF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,NF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(rI,[kF.ORANGE,kF.YELLOW,kF.GREEN]),t.properties.set(oI,NF.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return PF}}const LF={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},_F={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},IF={fills:Array.from(Object.values(LF)),strokes:Array.from(Object.values(_F))};class FF extends lF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:LF.BLUE,stroke:_F.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:LF.ORANGE,stroke:_F.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:LF.GRAY,stroke:_F.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,FF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,FF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,FF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(rI,[LF.ORANGE,LF.YELLOW,LF.GREEN]),t.properties.set(oI,FF.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return IF}}const GF={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},BF={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},VF={fills:Array.from(Object.values(GF)),strokes:Array.from(Object.values(BF))};class jF extends pF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:GF.BLUE,stroke:BF.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:GF.ORANGE,stroke:BF.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:GF.GRAY,stroke:BF.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,jF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,jF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,jF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(rI,[GF.ORANGE,GF.YELLOW,GF.GREEN]),t.properties.set(oI,jF.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return VF}}const WF={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},zF={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},HF={fills:Array.from(Object.values(WF)),strokes:Array.from(Object.values(zF))};class UF extends lF{static getWaterfallSeriesDefaultPositiveColors(){return{fill:WF.BLUE,stroke:zF.BLUE}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:WF.ORANGE,stroke:zF.ORANGE}}static getWaterfallSeriesDefaultTotalColors(){return{fill:WF.GRAY,stroke:zF.GRAY}}getTemplateParameters(){const t=super.getTemplateParameters();return t.properties.set(tI,UF.getWaterfallSeriesDefaultPositiveColors()),t.properties.set(eI,UF.getWaterfallSeriesDefaultNegativeColors()),t.properties.set(iI,UF.getWaterfallSeriesDefaultTotalColors()),t.properties.set(rI,[WF.ORANGE,WF.YELLOW,WF.GREEN]),t.properties.set(oI,UF.getWaterfallSeriesDefaultTotalColors().stroke),t}getPalette(){return HF}}const KF=()=>new lF,YF=()=>new pF,XF={undefined:KF,null:KF,"ag-default":KF,"ag-sheets":()=>new FF,"ag-polychroma":()=>new MF,"ag-vivid":()=>new UF,"ag-material":()=>new xF},$F={undefined:YF,null:YF,"ag-default-dark":YF,"ag-sheets-dark":()=>new NF,"ag-polychroma-dark":()=>new OF,"ag-vivid-dark":()=>new jF,"ag-material-dark":()=>new yF},qF=Object.assign(Object.assign({},$F),XF);class ZF extends jL{constructor(t,e){super(t,e),this.padding=new YP(40),this.axisGroup.zIndex=dR.AXIS_FOREGROUND_ZINDEX}performLayout(){const t=Object.create(null,{performLayout:{get:()=>super.performLayout}});return hA(this,void 0,void 0,(function*(){const e=yield t.performLayout.call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach((t=>t.update())),this.hoverRect=e,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e}))}updateAxes(t,e,i){var o,n;const r=this.axes.find((t=>t.direction===QT.X)),s=this.axes.find((t=>t.direction===QT.Y));if(!(r instanceof QI)||!(s instanceof QI))return;const a=r.scale,l=null===(o=a.ticks)||void 0===o?void 0:o.call(a).map((t=>a.convert(t))),c=s.innerRadiusRatio;r.innerRadiusRatio=c,null===(n=r.computeRange)||void 0===n||n.call(r),r.gridLength=i,s.gridAngles=l,s.gridRange=r.range,s.range=[i,i*c],[r,s].forEach((i=>{i.translation.x=t,i.translation.y=e,i.calculateLayout()}))}computeSeriesRect(t){const{seriesArea:{padding:e}}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return hA(this,void 0,void 0,(function*(){var e=this;const i=this.series.filter((t=>t instanceof fP)),o=this.axes.filter((t=>t instanceof QI)),n=(t,e,o)=>{this.updateAxes(t,e,o),i.forEach((i=>{i.centerX=t,i.centerY=e,i.radius=o}));const n=i.filter((t=>t instanceof xP));if(n.length>1){const t=n.map((t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}})).sort(((t,e)=>t.innerRadius-e.innerRadius));t[t.length-1].series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},r=t.x+t.width/2,s=t.y+t.height/2,a=Math.max(0,Math.min(t.width,t.height)/2);let l=a;n(r,s,l);const c=function(){let{hideWhenNecessary:c=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return hA(e,void 0,void 0,(function*(){const e=[];for(const n of[...o,...i]){const i=yield n.computeLabelsBBox({hideWhenNecessary:c},t);i&&e.push(i)}if(0===e.length)return void n(r,s,a);const d=aM.merge(e),u=this.refineCircle(d,l,t);n(u.centerX,u.centerY,u.radius),u.radius!==l&&(l=u.radius)}))};return yield c(),yield c(),yield c(),yield c({hideWhenNecessary:!0}),yield c({hideWhenNecessary:!0}),{radius:l,centerX:r,centerY:s}}))}refineCircle(t,e,i){const o=-e,n=-e,r=e,s=e;let a=Math.max(0,o-t.x),l=Math.max(0,n-t.y),c=Math.max(0,t.x+t.width-r),d=Math.max(0,t.y+t.height-s);a=c=Math.max(a,c),l=d=Math.max(l,d);const u=i.width-a-c,h=i.height-l-d;let p=Math.min(u,h)/2;const f=.5*i.width/2,g=.5*i.height/2,v=Math.min(f,g);if(p<v){p=v;const t=a+c;if(2*p+(l+d)>i.height){const t=i.height-2*p;2*Math.min(l,d)>t?(l=t/2,d=t/2):l>d?l=t-d:d=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(a,c)>t?(a=t/2,c=t/2):a>c?a=t-c:c=t-a}}const y=a+2*p+c,m=l+2*p+d;return{centerX:i.x+(i.width-y)/2+a+p,centerY:i.y+(i.height-m)/2+l+p,radius:p}}}ZF.className="PolarChart",ZF.type="polar",Object.entries(qF).reduce(((t,e)=>{let[i,o]=e;return t[i]=o(),t}),{});var JF,QF=Object.freeze({__proto__:null,TimeScale:KP,BandScale:zA,ContinuousScale:fk,ColorScale:UL,LinearScale:gk}),tG=function(t){var e="function"===typeof Symbol&&Symbol.iterator,i=e&&t[e],o=0;if(i)return i.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eG=XP.extent,iG=XP.isNumber,oG=XP.isString,nG=XP.isStringObject,rG=XP.isDate,sG=XP.createId,aG=XP.Padding,lG=QF.LinearScale,cG=QF.BandScale,dG=QF.TimeScale;!function(t){t[t.SERIES_FILL_ZINDEX=50]="SERIES_FILL_ZINDEX",t[t.AXIS_LINE_ZINDEX=500]="AXIS_LINE_ZINDEX",t[t.SERIES_STROKE_ZINDEX=1e3]="SERIES_STROKE_ZINDEX",t[t.SERIES_LABEL_ZINDEX=1500]="SERIES_LABEL_ZINDEX",t[t.CROSSHAIR_ZINDEX=2e3]="CROSSHAIR_ZINDEX",t[t.SERIES_MARKERS_ZINDEX=2500]="SERIES_MARKERS_ZINDEX"}(JF||(JF={}));var uG=function(){this.type="category",this.stroke="rgb(204, 214, 235)",this.strokeWidth=1},hG=function(){function t(){this.id=sG(this),this.seriesRect={x:0,y:0,width:0,height:0},this._context=void 0,this._container=void 0,this._data=void 0,this.padding=new aG(3),this.xKey="x",this.yKey="y",this.dataType=void 0,this.xData=[],this.yData=[],this.min=void 0,this.max=void 0,this.yScale=new lG,this.axis=new uG,this.highlightStyle={size:6,fill:"yellow",stroke:"silver",strokeWidth:1},this._width=100,this._height=100,this.smallestInterval=void 0,this.layoutId=0,this.defaultDateFormatter=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),this._onMouseMove=this.onMouseMove.bind(this),this._onMouseOut=this.onMouseOut.bind(this);var e=new qL.Group;this.rootGroup=e;var i=document.createElement("div");i.setAttribute("class","ag-sparkline-wrapper");var o=new qL.Scene({window:window,document:document});this.scene=o,this.canvasElement=o.canvas.element,o.root=e,o.container=i,this.resizeAndSetDimensions(this.width,this.height),t.tooltipDocuments.includes(document)||this.initialiseTooltipStyles(),this.setupDomEventListeners(this.canvasElement)}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},set:function(t){this._context!==t&&(this._context=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"container",{get:function(){return this._container},set:function(t){if(this._container!==t){var e=this.canvasElement.parentNode;null!=e&&e.removeChild(this.canvasElement),t&&t.appendChild(this.canvasElement),this._container=t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data!==t&&(this._data=t,this.processData(),this.mouseMoveEvent&&this.highlightedDatum&&this.updateHitPoint(this.mouseMoveEvent))},enumerable:!1,configurable:!0}),t.prototype.resizeAndSetDimensions=function(t,e){this.scene.resize(t,e),this.seriesRect.width=t,this.seriesRect.height=e},t.prototype.initialiseTooltipStyles=function(){var e=document.createElement("style");e.innerHTML="\n.ag-sparkline-tooltip-wrapper {\n    position: absolute;\n    user-select: none;\n    pointer-events: none;\n}\n\n.ag-sparkline-tooltip {\n    position: relative;\n    font: 12px arial,sans-serif;\n    border-radius: 2px;\n    box-shadow: 0 1px 3px rgb(0 0 0 / 20%), 0 1px 1px rgb(0 0 0 / 14%);\n    line-height: 1.7em;\n    overflow: hidden;\n    white-space: nowrap;\n    z-index: 99999;\n    background-color: rgb(255, 255, 255);\n    color: rgba(0,0,0, 0.67);\n}\n\n.ag-sparkline-tooltip-content {\n    padding: 0 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-title {\n    padding-left: 7px;\n    opacity: 1;\n}\n\n.ag-sparkline-tooltip-wrapper-hidden {\n    top: -10000px !important;\n}\n\n.ag-sparkline-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n",document.head.insertBefore(e,document.head.querySelector("style")),t.tooltipDocuments.push(document)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.scene.resize(t,this.height),this.scheduleLayout())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.scene.resize(this.width,t),this.scheduleLayout())},enumerable:!1,configurable:!0}),t.prototype.update=function(){},t.prototype.updateYScale=function(){this.updateYScaleRange(),this.updateYScaleDomain()},t.prototype.updateYScaleDomain=function(){},t.prototype.updateYScaleRange=function(){var t=this.yScale,e=this.seriesRect;t.range=[e.height,0]},t.prototype.updateXScale=function(){var t=this.axis.type;this.xScale=this.getXScale(t),this.updateXScaleRange(),this.updateXScaleDomain()},t.prototype.updateXScaleRange=function(){this.xScale.range=[0,this.seriesRect.width]},t.prototype.updateXScaleDomain=function(){var t,e=this.xData,i=this.xScale;(i instanceof lG||i instanceof dG)&&(t=eG(e)),this.xScale.domain=t?t.slice():e},t.prototype.getXScale=function(t){switch(void 0===t&&(t="category"),t){case"number":return new lG;case"time":return new dG;default:return new cG}},t.prototype.updateAxisLine=function(){},t.prototype.updateAxes=function(){this.updateYScale(),this.updateXScale(),this.updateAxisLine()},t.prototype.updateCrosshairs=function(){this.updateXCrosshairLine(),this.updateYCrosshairLine()},t.prototype.generateNodeData=function(){return[]},t.prototype.getNodeData=function(){return[]},t.prototype.updateNodes=function(){},t.prototype.updateXCrosshairLine=function(){},t.prototype.updateYCrosshairLine=function(){},t.prototype.highlightDatum=function(t){this.updateNodes()},t.prototype.dehighlightDatum=function(){this.highlightedDatum=void 0,this.updateNodes(),this.updateCrosshairs()},t.prototype.onMouseMove=function(t){this.mouseMoveEvent=t,this.updateHitPoint(t)},t.prototype.updateHitPoint=function(t){var e,i,o,n=this.pickClosestSeriesNodeDatum(t.offsetX,t.offsetY);if(n){var r=this.highlightedDatum;this.highlightedDatum=n,(this.highlightedDatum&&!r||this.highlightedDatum&&r&&this.highlightedDatum!==r)&&(this.highlightDatum(n),this.updateCrosshairs(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))),(null===(o=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.enabled)||void 0===o||o)&&this.handleTooltip(t,n)}},t.prototype.onMouseOut=function(t){this.dehighlightDatum(),this.tooltip.toggle(!1),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)}))},t.prototype.processData=function(){var t=this,e=this,i=e.data,o=e.yData,n=e.xData;if(i&&!this.invalidData(this.data)){o.length=0,n.length=0;var r=i.length,s=this.getDataType(i);this.dataType=s;var a,l=this.axis.type,c="number"!==l&&"time"!==l?"category":l,d="number"===c||"time"===c,u=function(e,i){void 0==t.smallestInterval&&(t.smallestInterval={x:1/0,y:1/0});var o=t.smallestInterval.x,n=Math.abs(e-i);n>0&&n<o&&(t.smallestInterval.x=n)};if("number"===s)for(var h=0;h<r;h++){var p=h,f=i[h],g=this.getDatum(p,c),v=this.getDatum(f,"number");d&&u(g,a),n.push(g),o.push(v),a=g}else if("array"===s)for(h=0;h<r;h++){var y=i[h];if(Array.isArray(y)){p=y[0],f=y[1],g=this.getDatum(p,c),v=this.getDatum(f,"number");if(void 0==g)continue;d&&u(g,a),n.push(g),o.push(v),a=g}}else if("object"===s){var m=this.yKey,b=this.xKey;for(h=0;h<r;h++){if("object"===typeof(y=i[h])&&!Array.isArray(y)){p=y[b],f=y[m],g=this.getDatum(p,c),v=this.getDatum(f,"number");if(void 0==g)continue;d&&u(g,a),n.push(g),o.push(v),a=g}}}this.updateAxes(),this.immediateLayout()}},t.prototype.getDataType=function(t){var e,i;try{for(var o=tG(t),n=o.next();!n.done;n=o.next()){var r=n.value;if(void 0!=r){if(iG(r))return"number";if(Array.isArray(r))return"array";if("object"===typeof r)return"object"}}}catch(s){e={error:s}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}},t.prototype.getDatum=function(t,e){if("number"===e&&iG(t)||"time"===e&&(iG(t)||rG(t)))return t;if("category"===e){if(oG(t)||rG(t)||iG(t))return{toString:function(){return String(t)}};if(nG(t))return t}},Object.defineProperty(t.prototype,"layoutScheduled",{get:function(){return!!this.layoutId},enumerable:!1,configurable:!0}),t.prototype.scheduleLayout=function(){var t=this;this.layoutId&&cancelAnimationFrame(this.layoutId),this.layoutId=requestAnimationFrame((function(){t.immediateLayout(),t.layoutId=0}))},t.prototype.immediateLayout=function(){this.setSparklineDimensions(),this.invalidData(this.data)||(this.updateXScaleRange(),this.updateYScaleRange(),this.updateAxisLine(),this.update(),this.scene.render().catch((function(t){return console.error("AG Grid - chart rendering failed",t)})))},t.prototype.setSparklineDimensions=function(){var t=this,e=t.width,i=t.height,o=t.padding,n=t.seriesRect,r=t.rootGroup,s=e-o.left-o.right,a=i-o.top-o.bottom;n.width=s,n.height=a,n.x=o.left,n.y=o.top,r.translationX=n.x,r.translationY=n.y},t.prototype.pickClosestSeriesNodeDatum=function(t,e){for(var i,o=1/0,n=this.rootGroup.transformPoint(t,e),r=this.getNodeData(),s=0;s<r.length;s++){var a=r[s];if(!a.point)return;var l=this.getDistance(n,a.point);l<=o&&(o=l,i=a)}return i},t.prototype.getDistance=function(t,e){return Math.abs(t.x-e.x)},t.prototype.handleTooltip=function(t,e){var i,o,n=e.seriesDatum,r=this.canvasElement,s=t.clientX,a=t.clientY,l=null===(i=this.processedOptions)||void 0===i?void 0:i.tooltip,c={pageX:s,pageY:a,position:{xOffset:null===l||void 0===l?void 0:l.xOffset,yOffset:null===l||void 0===l?void 0:l.yOffset},container:null===l||void 0===l?void 0:l.container};void 0==c.container&&(c.container=r);var d=n.y,u=n.x,h=null===(o=null===l||void 0===l?void 0:l.enabled)||void 0===o||o,p=null===l||void 0===l?void 0:l.renderer;if(p){var f=p({context:this.context,datum:n,yValue:d,xValue:u});h="string"!==typeof f&&void 0!==f.enabled?f.enabled:h}var g=h&&void 0!==n.y&&this.getTooltipHtml(e);g&&this.tooltip.show(c,g)},t.prototype.formatNumericDatum=function(t){return String(Math.round(10*t)/10)},t.prototype.formatDatum=function(t){var e=this.axis.type||"category";return"number"===e&&"number"===typeof t?this.formatNumericDatum(t):"time"===e&&(t instanceof Date||iG(t))?this.defaultDateFormatter.format(t):String(t)},t.prototype.setupDomEventListeners=function(t){t.addEventListener("mousemove",this._onMouseMove),t.addEventListener("mouseout",this._onMouseOut)},t.prototype.cleanupDomEventListeners=function(t){t.removeEventListener("mousemove",this._onMouseMove),t.removeEventListener("mouseout",this._onMouseOut)},t.prototype.invalidData=function(t){return!t||!Array.isArray(t)||0===t.length},t.prototype.destroy=function(){this.scene.container=void 0,this.container=void 0,this.cleanupDomEventListeners(this.scene.canvas.element)},t.tooltipDocuments=[],t}();function pG(t,e){var i,o,n;if("string"===typeof t)return t;e=null!==e&&void 0!==e?e:{};var r,s,a=t.content,l=void 0===a?null!==(i=e.content)&&void 0!==i?i:"":a,c=t.title,d=void 0===c?null!==(o=e.title)&&void 0!==o?o:void 0:c,u=t.color,h=void 0===u?e.color:u,p=t.backgroundColor,f=void 0===p?e.backgroundColor:p,g=t.opacity,v=void 0===g?null!==(n=e.opacity)&&void 0!==n?n:1:g;h?(r=d?'<span class="'.concat(fG.class,'-title"; style="color: ').concat(h,'">').concat(d,"</span>"):"",s='<span class="'.concat(fG.class,'-content" style="color: ').concat(h,'">').concat(l,"</span>")):(r=d?'<span class="'.concat(fG.class,'-title">').concat(d,"</span>"):"",s='<span class="'.concat(fG.class,'-content">').concat(l,"</span>"));var y="opacity: ".concat(v);return f&&(y+="; background-color: ".concat(f.toLowerCase())),'<div class="'.concat(fG.class,'" style="').concat(y,'">\n                ').concat(r,"\n                ").concat(s,"\n            </div>")}var fG=function(){function t(){this.element=document.createElement("div"),document.body.appendChild(this.element)}return t.prototype.isVisible=function(){var e=this.element;if(e.classList)return!e.classList.contains("".concat(t.class,"-wrapper-hidden"));var i=e.getAttribute("class");return!!i&&i.split(" ").indexOf("".concat(t.class,"-wrapper-hidden"))<0},t.prototype.updateClass=function(e){var i=["".concat(t.class,"-wrapper")];!0!==e&&i.push("".concat(t.class,"-wrapper-hidden")),this.element.setAttribute("class",i.join(" "))},t.prototype.show=function(t,e){var i,o,n,r;this.toggle(!1);var s=this.element;if(void 0!==e)s.innerHTML=e;else if(!s.innerHTML)return;var a=null!==(o=null===(i=t.position)||void 0===i?void 0:i.xOffset)&&void 0!==o?o:10,l=null!==(r=null===(n=t.position)||void 0===n?void 0:n.yOffset)&&void 0!==r?r:0,c=t.pageX+a,d=t.pageY+l,u=s.getBoundingClientRect(),h=window.innerWidth-u.width;if(t.container){var p=t.container.getBoundingClientRect();h=p.left+(p.width-u.width)}c>h&&(c=t.pageX-s.clientWidth-a),"undefined"!==typeof scrollX&&(c+=scrollX),"undefined"!==typeof scrollY&&(d+=scrollY),s.style.left="".concat(Math.round(c),"px"),s.style.top="".concat(Math.round(d),"px"),this.toggle(!0)},t.prototype.toggle=function(t){this.updateClass(t)},t.prototype.destroy=function(){var t=this.element.parentNode;t&&t.removeChild(this.element)},t.class="ag-sparkline-tooltip",t}();function gG(t){switch(t){case"circle":default:return qL.Circle;case"square":return qL.Square;case"diamond":return qL.Diamond}}function vG(t,e){void 0===e&&(e="solid");var i={solid:[],dash:[4,3],dot:[1,3],dashDot:[4,3,1,3],dashDotDot:[4,3,1,3,1,3],shortDot:[1,1],shortDash:[3,1],shortDashDot:[3,1,1,1],shortDashDotDot:[3,1,1,1,1,1],longDash:[8,3],longDashDot:[8,3,1,3],longDashDotDot:[8,3,1,3,1,3]},o={solid:[],dash:[3,3],dot:[0,3],dashDot:[3,3,0,3],dashDotDot:[3,3,0,3,0,3],shortDot:[0,2],shortDash:[2,2],shortDashDot:[2,2,0,2],shortDashDotDot:[2,2,0,2,0,2],longDash:[7,3],longDashDot:[7,3,0,3],longDashDotDot:[7,3,0,3,0,3]};return"round"===t||"square"===t?void 0==o[e]?(console.warn("'".concat(e,"' is not a valid 'lineDash' option.")),o.solid):o[e]:void 0==i[e]?(console.warn("'".concat(e,"' is not a valid 'lineDash' option.")),i.solid):i[e]}var yG,mG,bG=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),SG=XP.extent,xG=QF.BandScale,CG=function(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},wG=function(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},EG=function(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},OG=function(t){function e(){var e=t.call(this)||this;return e.fill="rgba(124, 181, 236, 0.25)",e.strokePath=new qL.Path,e.fillPath=new qL.Path,e.xCrosshairLine=new qL.Line,e.yCrosshairLine=new qL.Line,e.areaSparklineGroup=new qL.Group,e.xAxisLine=new qL.Line,e.markers=new qL.Group,e.markerSelection=qL.Selection.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new CG,e.line=new wG,e.crosshairs=new EG,e.rootGroup.append(e.areaSparklineGroup),e.xAxisLine.zIndex=JF.AXIS_LINE_ZINDEX,e.fillPath.zIndex=JF.SERIES_FILL_ZINDEX,e.strokePath.zIndex=JF.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=JF.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=JF.CROSSHAIR_ZINDEX,e.markers.zIndex=JF.SERIES_MARKERS_ZINDEX,e.areaSparklineGroup.append([e.fillPath,e.xAxisLine,e.strokePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return bG(e,t),e.prototype.markerFactory=function(){return new(gG(this.marker.shape))},e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.update=function(){var t=this.generateNodeData();if(t){var e=t.nodeData,i=t.fillData,o=t.strokeData;this.markerSelectionData=e,this.updateSelection(e),this.updateNodes(),this.updateStroke(o),this.updateFill(i)}},e.prototype.updateYScaleDomain=function(){var t=this.yData,e=this.yScale,i=SG(t),o=0,n=1;void 0!==i&&(o=this.min=i[0],n=this.max=i[1]),o=o<0?o:0,n=n<0?0:n,e.domain=[o,n]},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,o=t.xData,n=t.xScale,r=t.yScale;if(e){for(var s,a,l,c,d=!(n instanceof xG),u=d?0:n.bandwidth/2,h=i.length,p=[],f=[],g=[],v=r.convert(0),y=0;y<h;y++){var m=i[y],b=o[y],S=n.convert(d?n.toDomain(b):b)+u,x=void 0===m?NaN:r.convert(m);y+1<h&&(c=n.convert(d?n.toDomain(o[y+1]):o[y+1])+u),g.push({seriesDatum:{x:b,y:m},point:{x:S,y:x}}),void 0===m&&void 0!==l?(f.push({seriesDatum:void 0,point:{x:l,y:v}}),void 0!==c&&f.push({seriesDatum:void 0,point:{x:c,y:v}})):void 0!==m&&(f.push({seriesDatum:{x:b,y:m},point:{x:S,y:x}}),p.push({seriesDatum:{x:b,y:m},point:{x:S,y:x}}),s=void 0!==s?s:S,a=S),l=S}return f.push({seriesDatum:void 0,point:{x:a,y:v}},{seriesDatum:void 0,point:{x:s,y:v}}),{nodeData:p,fillData:f,strokeData:g}}},e.prototype.updateAxisLine=function(){var t=this,e=t.xScale,i=t.yScale,o=t.axis,n=t.xAxisLine;n.x1=e.range[0],n.x2=e.range[1],n.y1=n.y2=0,n.stroke=o.stroke,n.strokeWidth=o.strokeWidth;var r=i.convert(0);n.translationY=r},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this,i=e.highlightedDatum,o=e.highlightStyle,n=e.marker,r=o.size,s=o.fill,a=o.stroke,l=o.strokeWidth,c=n.formatter;this.markerSelection.each((function(e,o,d){var u=o.point,h=o.seriesDatum;if(u){var p,f=o===i,g=f&&void 0!==s?s:n.fill,v=f&&void 0!==a?a:n.stroke,y=f&&void 0!==l?l:n.strokeWidth,m=f&&void 0!==r?r:n.size;if(c){var b=0===d,S=d===t.markerSelectionData.length-1,x=h.y===t.min,C=h.y===t.max;p=c({datum:o,xValue:h.x,yValue:h.y,min:x,max:C,first:b,last:S,fill:g,stroke:v,strokeWidth:y,size:m,highlighted:f})}e.size=p&&void 0!=p.size?p.size:m,e.fill=p&&void 0!=p.fill?p.fill:g,e.stroke=p&&void 0!=p.stroke?p.stroke:v,e.strokeWidth=p&&void 0!=p.strokeWidth?p.strokeWidth:y,e.translationX=u.x,e.translationY=u.y,e.visible=p&&void 0!=p.enabled?p.enabled:n.enabled&&e.size>0}}))},e.prototype.updateStroke=function(t){var e=this,i=e.strokePath,o=e.yData,n=e.line;if(!(o.length<2)){var r=i.path,s=t.length,a=!0;r.clear();for(var l=0;l<s;l++){var c=t[l],d=c.point,u=c.seriesDatum,h=d.x,p=d.y;void 0==u.y?a=!0:a?(r.moveTo(h,p),a=!1):r.lineTo(h,p)}i.lineJoin=i.lineCap="round",i.fill=void 0,i.stroke=n.stroke,i.strokeWidth=n.strokeWidth}},e.prototype.updateFill=function(t){var e=this,i=e.fillPath,o=e.yData,n=e.fill,r=i.path,s=t.length;if(r.clear(),!(o.length<2)){for(var a=0;a<s;a++){var l=t[a].point,c=l.x,d=l.y;a>0?r.lineTo(c,d):r.moveTo(c,d)}r.closePath(),i.lineJoin="round",i.stroke=void 0,i.fill=n}},e.prototype.updateXCrosshairLine=function(){var t,e=this,i=e.yScale,o=e.xCrosshairLine,n=e.highlightedDatum,r=e.crosshairs.xLine;if(r.enabled&&void 0!=n){o.y1=i.range[0],o.y2=i.range[1],o.x1=o.x2=0,o.stroke=r.stroke,o.strokeWidth=null!==(t=r.strokeWidth)&&void 0!==t?t:1,o.lineCap="round"===r.lineCap||"square"===r.lineCap?r.lineCap:void 0;var s=r.lineDash;o.lineDash=Array.isArray(s)?s:vG(o.lineCap,r.lineDash),o.translationX=n.point.x}else o.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this,i=e.xScale,o=e.yCrosshairLine,n=e.highlightedDatum,r=e.crosshairs.yLine;if(r.enabled&&void 0!=n){o.x1=i.range[0],o.x2=i.range[1],o.y1=o.y2=0,o.stroke=r.stroke,o.strokeWidth=null!==(t=r.strokeWidth)&&void 0!==t?t:1,o.lineCap="round"===r.lineCap||"square"===r.lineCap?r.lineCap:void 0;var s=r.lineDash;o.lineDash=Array.isArray(s)?s:vG(o.lineCap,r.lineDash),o.translationY=n.point.y}else o.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,i,o=this.dataType,n=t.seriesDatum,r=n.y,s=n.x,a={content:this.formatNumericDatum(r),title:"array"===o||"object"===o?this.formatDatum(s):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?pG(l({context:this.context,datum:n,yValue:r,xValue:s}),a):pG(a)},e.className="AreaSparkline",e}(hG),DG=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),AG=XP.extent,TG=QF.BandScale,MG=function(){this.enabled=!0,this.shape="circle",this.size=0,this.fill="rgb(124, 181, 236)",this.stroke="rgb(124, 181, 236)",this.strokeWidth=1,this.formatter=void 0},kG=function(){this.stroke="rgb(124, 181, 236)",this.strokeWidth=1},RG=function(){this.xLine={enabled:!0,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0},this.yLine={enabled:!1,stroke:"rgba(0,0,0, 0.54)",strokeWidth:1,lineDash:"solid",lineCap:void 0}},PG=function(t){function e(){var e=t.call(this)||this;return e.linePath=new qL.Path,e.xCrosshairLine=new qL.Line,e.yCrosshairLine=new qL.Line,e.lineSparklineGroup=new qL.Group,e.markers=new qL.Group,e.markerSelection=qL.Selection.select(e.markers,(function(){return e.markerFactory()})),e.markerSelectionData=[],e.marker=new MG,e.line=new kG,e.crosshairs=new RG,e.rootGroup.append(e.lineSparklineGroup),e.linePath.zIndex=JF.SERIES_STROKE_ZINDEX,e.xCrosshairLine.zIndex=JF.CROSSHAIR_ZINDEX,e.yCrosshairLine.zIndex=JF.CROSSHAIR_ZINDEX,e.markers.zIndex=JF.SERIES_MARKERS_ZINDEX,e.lineSparklineGroup.append([e.linePath,e.xCrosshairLine,e.yCrosshairLine,e.markers]),e}return DG(e,t),e.prototype.getNodeData=function(){return this.markerSelectionData},e.prototype.markerFactory=function(){return new(gG(this.marker.shape))},e.prototype.onMarkerShapeChange=function(){this.markerSelection=this.markerSelection.clear(),this.scheduleLayout()},e.prototype.update=function(){var t=this.generateNodeData();t&&(this.markerSelectionData=t,this.updateSelection(t),this.updateNodes(),this.updateLine())},e.prototype.updateYScaleDomain=function(){var t=this.yData,e=this.yScale,i=AG(t),o=0,n=1;if(void 0!==i&&(o=this.min=i[0],n=this.max=i[1]),o===n){var r=Math.abs(.01*o);o-=r,n+=r}e.domain=[o,n]},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,o=t.xData,n=t.xScale,r=t.yScale;if(e){for(var s=!(n instanceof TG),a=s?0:n.bandwidth/2,l=[],c=0;c<i.length;c++){var d=i[c],u=o[c];if(void 0!=d){var h=n.convert(s?n.toDomain(u):u)+a,p=void 0===d?NaN:r.convert(d);l.push({seriesDatum:{x:u,y:d},point:{x:h,y:p}})}}return l}},e.prototype.updateSelection=function(t){this.markerSelection.update(t)},e.prototype.updateNodes=function(){var t=this,e=this,i=e.highlightedDatum,o=e.highlightStyle,n=e.marker,r=o.size,s=o.fill,a=o.stroke,l=o.strokeWidth,c=n.formatter;this.markerSelection.each((function(e,o,d){var u,h=o===i,p=h&&void 0!==s?s:n.fill,f=h&&void 0!==a?a:n.stroke,g=h&&void 0!==l?l:n.strokeWidth,v=h&&void 0!==r?r:n.size,y=o.seriesDatum,m=o.point;if(c){var b=0===d,S=d===t.markerSelectionData.length-1,x=y.y===t.min,C=y.y===t.max;u=c({datum:o,xValue:y.x,yValue:y.y,min:x,max:C,first:b,last:S,fill:p,stroke:f,strokeWidth:g,size:v,highlighted:h})}e.size=u&&void 0!=u.size?u.size:v,e.fill=u&&void 0!=u.fill?u.fill:p,e.stroke=u&&void 0!=u.stroke?u.stroke:f,e.strokeWidth=u&&void 0!=u.strokeWidth?u.strokeWidth:g,e.translationX=m.x,e.translationY=m.y,e.visible=u&&void 0!=u.enabled?u.enabled:n.enabled&&e.size>0}))},e.prototype.updateLine=function(){var t=this,e=t.linePath,i=t.yData,o=t.xData,n=t.xScale,r=t.yScale,s=t.line;if(!(i.length<2)){var a=!(n instanceof TG),l=e.path,c=i.length,d=a?0:n.bandwidth/2,u=!0;l.clear();for(var h=0;h<c;h++){var p=o[h],f=i[h],g=n.convert(a?n.toDomain(p):p)+d,v=void 0===f?NaN:r.convert(f);void 0==f?u=!0:u?(l.moveTo(g,v),u=!1):l.lineTo(g,v)}e.fill=void 0,e.stroke=s.stroke,e.strokeWidth=s.strokeWidth}},e.prototype.updateXCrosshairLine=function(){var t,e=this,i=e.yScale,o=e.xCrosshairLine,n=e.highlightedDatum,r=e.crosshairs.xLine;if(r.enabled&&void 0!=n){o.y1=i.range[0],o.y2=i.range[1],o.x1=o.x2=0,o.stroke=r.stroke,o.strokeWidth=null!==(t=r.strokeWidth)&&void 0!==t?t:1,o.lineCap="round"===r.lineCap||"square"===r.lineCap?r.lineCap:void 0;var s=r.lineDash;o.lineDash=Array.isArray(s)?s:vG(o.lineCap,r.lineDash),o.translationX=n.point.x}else o.strokeWidth=0},e.prototype.updateYCrosshairLine=function(){var t,e=this,i=e.xScale,o=e.yCrosshairLine,n=e.highlightedDatum,r=e.crosshairs.yLine;if(r.enabled&&void 0!=n){o.x1=i.range[0],o.x2=i.range[1],o.y1=o.y2=0,o.stroke=r.stroke,o.strokeWidth=null!==(t=r.strokeWidth)&&void 0!==t?t:1,o.lineCap="round"===r.lineCap||"square"===r.lineCap?r.lineCap:void 0;var s=r.lineDash;o.lineDash=Array.isArray(s)?s:vG(o.lineCap,r.lineDash),o.translationY=n.point.y}else o.strokeWidth=0},e.prototype.getTooltipHtml=function(t){var e,i,o=this.dataType,n=t.seriesDatum,r=n.y,s=n.x,a={content:this.formatNumericDatum(r),title:"array"===o||"object"===o?this.formatDatum(s):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?pG(l({context:this.context,datum:n,yValue:r,xValue:s}),a):pG(a)},e.className="LineSparkline",e}(hG),NG=function(){this.enabled=!0,this.fontSize=8,this.fontFamily="Verdana, sans-serif",this.fontStyle=void 0,this.fontWeight=void 0,this.color="rgba(70, 70, 70, 1)"},LG=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),_G=XP.extent;!function(t){t[t.Rect=0]="Rect",t[t.Label=1]="Label"}(yG||(yG={})),function(t){t.InsideBase="insideBase",t.InsideEnd="insideEnd",t.Center="center",t.OutsideEnd="outsideEnd"}(mG||(mG={}));var IG=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.formatter=void 0,e.placement=mG.InsideEnd,e}return LG(e,t),e}(NG),FG=function(t){function e(){var e=t.call(this)||this;return e.fill="rgb(124, 181, 236)",e.stroke="silver",e.strokeWidth=0,e.paddingInner=.1,e.paddingOuter=.2,e.valueAxisDomain=void 0,e.formatter=void 0,e.axisLine=new qL.Line,e.bandWidth=0,e.sparklineGroup=new qL.Group,e.rectGroup=new qL.Group,e.labelGroup=new qL.Group,e.rectSelection=qL.Selection.select(e.rectGroup,qL.Rect),e.labelSelection=qL.Selection.select(e.labelGroup,qL.Text),e.nodeSelectionData=[],e.label=new IG,e.rootGroup.append(e.sparklineGroup),e.rectGroup.zIndex=JF.SERIES_FILL_ZINDEX,e.axisLine.zIndex=JF.AXIS_LINE_ZINDEX,e.labelGroup.zIndex=JF.SERIES_LABEL_ZINDEX,e.sparklineGroup.append([e.rectGroup,e.axisLine,e.labelGroup]),e.axisLine.lineCap="round",e.label.enabled=!1,e}return LG(e,t),e.prototype.getNodeData=function(){return this.nodeSelectionData},e.prototype.update=function(){this.updateSelections(),this.updateNodes()},e.prototype.updateSelections=function(){var t=this.generateNodeData();t&&(this.nodeSelectionData=t,this.updateRectSelection(t),this.updateLabelSelection(t))},e.prototype.updateNodes=function(){this.updateRectNodes(),this.updateLabelNodes()},e.prototype.calculateStep=function(t){var e,i=this,o=i.xScale,n=i.paddingInner,r=i.paddingOuter,s=i.smallestInterval,a=(o.domain[1]-o.domain[0])/(null!==(e=null===s||void 0===s?void 0:s.x)&&void 0!==e?e:1)+1,l=Math.min(a,50),c=l-1;return t/Math.max(1,2*r+c*n+l)},e.prototype.updateYScaleDomain=function(){var t=this,e=t.yScale,i=t.yData,o=t.valueAxisDomain,n=_G(i),r=0,s=1;void 0!==n&&(r=this.min=n[0],s=this.max=n[1]),r=r<0?r:0,s=s<0?0:s,o&&(o[1]<s&&(o[1]=s),o[0]>r&&(o[0]=r)),e.domain=o||[r,s]},e.prototype.updateRectSelection=function(t){this.rectSelection.update(t)},e.prototype.updateRectNodes=function(){var t=this,e=this,i=e.highlightedDatum,o=e.formatter,n=e.fill,r=e.stroke,s=e.strokeWidth,a=this.highlightStyle,l=a.fill,c=a.stroke,d=a.strokeWidth;this.rectSelection.each((function(e,a,u){var h,p=a===i,f=p&&void 0!==l?l:n,g=p&&void 0!==c?c:r,v=p&&void 0!==d?d:s,y=a.x,m=a.y,b=a.width,S=a.height,x=a.seriesDatum;if(o){var C=0===u,w=u===t.nodeSelectionData.length-1,E=x.y===t.min,O=x.y===t.max;h=o({datum:a,xValue:x.x,yValue:x.y,width:b,height:S,min:E,max:O,first:C,last:w,fill:f,stroke:g,strokeWidth:v,highlighted:p})}e.fill=h&&h.fill||f,e.stroke=h&&h.stroke||g,e.strokeWidth=h&&h.strokeWidth||v,e.x=e.y=0,e.width=b,e.height=S,e.visible=e.height>0,e.translationX=y,e.translationY=m}))},e.prototype.updateLabelSelection=function(t){this.labelSelection.update(t,(function(t){t.tag=yG.Label,t.pointerEvents=qL.PointerEvents.None}))},e.prototype.updateLabelNodes=function(){var t=this.label,e=t.enabled,i=t.fontStyle,o=t.fontWeight,n=t.fontSize,r=t.fontFamily,s=t.color;this.labelSelection.each((function(t,a){var l=a.label;l&&e?(t.fontStyle=i,t.fontWeight=o,t.fontSize=n,t.fontFamily=r,t.textAlign=l.textAlign,t.textBaseline=l.textBaseline,t.text=l.text,t.x=l.x,t.y=l.y,t.fill=s,t.visible=!0):t.visible=!1}))},e.prototype.getTooltipHtml=function(t){var e,i,o=this.dataType,n=t.seriesDatum,r=n.y,s=n.x,a={content:this.formatNumericDatum(r),title:"array"===o||"object"===o?this.formatDatum(s):void 0},l=null===(i=null===(e=this.processedOptions)||void 0===e?void 0:e.tooltip)||void 0===i?void 0:i.renderer;return l?pG(l({context:this.context,datum:n,yValue:r,xValue:s}),a):pG(a)},e.prototype.formatLabelValue=function(t){return t%1!==0?t.toFixed(1):t.toFixed(0)},e}(hG),GG=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),BG=XP.isNumber,VG=QF.BandScale,jG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return GG(e,t),e.prototype.updateYScaleRange=function(){var t=this.seriesRect;this.yScale.range=[0,t.width]},e.prototype.updateXScaleRange=function(){var t=this,e=t.xScale,i=t.seriesRect,o=t.paddingOuter,n=t.paddingInner;if(e instanceof VG)e.range=[0,i.height],e.paddingInner=n,e.paddingOuter=o;else{var r=this.calculateStep(i.height),s=r*o;this.bandWidth=r*(1-n),e.range=[s,i.height-s-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this,e=t.yScale,i=t.axis,o=t.axisLine,n=t.seriesRect,r=i.strokeWidth;o.x1=0,o.x2=0,o.y1=0,o.y2=n.height,o.stroke=i.stroke,o.strokeWidth=r+(r%2===1?1:0);var s=e.convert(0);o.translationX=s},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,o=t.xData,n=t.xScale,r=t.yScale,s=t.fill,a=t.stroke,l=t.strokeWidth,c=t.label;if(e){for(var d=c.fontStyle,u=c.fontWeight,h=c.fontSize,p=c.fontFamily,f=c.color,g=c.formatter,v=c.placement,y=[],m=r.convert(0),b=!(n instanceof VG),S=0,x=i.length;S<x;S++){var C=i[S],w=o[S],E=void 0===C;E&&(C=0);var O=n.convert(b?n.toDomain(w):w),D=Math.min(void 0===C?NaN:r.convert(C),m),A=Math.max(void 0===C?NaN:r.convert(C),m),T=b?this.bandWidth:n.bandwidth,M=A-D,k={x:m,y:O},R=void 0;R=g?g({value:C}):void 0!==C&&BG(C)?this.formatLabelValue(C):"";var P=O+T/2,N=void 0,L=void 0,_=void 0!==C&&C>=0;if(v===mG.Center)N=D+M/2,L="center";else if(v===mG.OutsideEnd)N=D+(_?M+4:-4),L=_?"start":"end";else if(v===mG.InsideEnd){N=D+(_?M-4:4),L=_?"end":"start";var I=qL.HdpiCanvas.getTextSize(R,p).width||20;(_&&N<m+I||!_&&N>m-I)&&(N=m+4*(_?1:-1),L=_?"start":"end")}else N=m+4*(_?1:-1),L=_?"start":"end";y.push({x:D,y:O,width:M,height:T,fill:s,stroke:a,strokeWidth:l,seriesDatum:{x:w,y:E?void 0:C},point:k,label:{x:N,y:P,text:R,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p,textAlign:L,textBaseline:"middle",fill:f}})}return y}},e.prototype.getDistance=function(t,e){return Math.abs(t.y-e.y)},e.className="BarSparkline",e}(FG),WG=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),zG=XP.isNumber,HG=QF.BandScale,UG=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return WG(e,t),e.prototype.updateYScaleRange=function(){var t=this.seriesRect;this.yScale.range=[t.height,0]},e.prototype.updateXScaleRange=function(){var t=this,e=t.xScale,i=t.seriesRect,o=t.paddingOuter,n=t.paddingInner;if(e instanceof HG)e.range=[0,i.width],e.paddingInner=n,e.paddingOuter=o;else{var r=this.calculateStep(i.width),s=r*o;this.bandWidth=r*(1-n),e.range=[s,i.width-s-this.bandWidth]}},e.prototype.updateAxisLine=function(){var t=this,e=t.yScale,i=t.axis,o=t.axisLine,n=t.seriesRect,r=i.strokeWidth;o.x1=0,o.x2=n.width,o.y1=0,o.y2=0,o.stroke=i.stroke,o.strokeWidth=r+(r%2===1?1:0);var s=e.convert(0);o.translationY=s},e.prototype.generateNodeData=function(){var t=this,e=t.data,i=t.yData,o=t.xData,n=t.xScale,r=t.yScale,s=t.fill,a=t.stroke,l=t.strokeWidth,c=t.label;if(e){for(var d=c.fontStyle,u=c.fontWeight,h=c.fontSize,p=c.fontFamily,f=c.color,g=c.formatter,v=c.placement,y=[],m=r.convert(0),b=!(n instanceof HG),S=0,x=i.length;S<x;S++){var C=i[S],w=o[S],E=void 0===C;E&&(C=0);var O=Math.min(void 0===C?NaN:r.convert(C),m),D=n.convert(b?n.toDomain(w):w),A=Math.max(void 0===C?NaN:r.convert(C),m),T=b?this.bandWidth:n.bandwidth,M=A-O,k={x:D+T/2,y:m},R=void 0;R=g?g({value:C}):void 0!==C&&zG(C)?this.formatLabelValue(C):"";var P=D+T/2,N=void 0,L=void 0,_=void 0!==C&&C>=0;if(v===mG.Center)N=O+M/2,L="middle";else if(v===mG.OutsideEnd)N=O+(_?-2:M+2),L=_?"bottom":"top";else if(v===mG.InsideEnd){N=O+(_?2:M-2),L=_?"top":"bottom";var I=qL.HdpiCanvas.getTextSize(R,p).height||10;(_&&N>m-I||!_&&N<m+I)&&(N=m+2*(_?-1:1),L=_?"bottom":"top")}else N=m+2*(_?-1:1),L=_?"bottom":"top";y.push({x:D,y:O,width:T,height:M,fill:s,stroke:a,strokeWidth:l,seriesDatum:{x:w,y:E?void 0:C},point:k,label:{x:P,y:N,text:R,fontStyle:d,fontWeight:u,fontSize:h,fontFamily:p,textAlign:"center",textBaseline:L,fill:f}})}return y}},e.className="ColumnSparkline",e}(FG),KG=XP.isNumber,YG=function(){function t(){}return t.create=function(t,e){var i=function(t){void 0===t&&(t="line");switch(t){case"column":return new UG;case"bar":return new jG;case"area":return new OG;default:return new PG}}((t=XP.jsonMerge([t])).type);return e&&(i.tooltip=e),function(t,e){iB(t,"context",e.context,e),iB(t,"width",e.width,e),iB(t,"height",e.height,e),iB(t,"container",e.container,e),iB(t,"xKey",e.xKey,e),iB(t,"yKey",e.yKey,e),e.padding&&function(t,e){iB(t,"top",e.top,e),iB(t,"right",e.right,e),iB(t,"bottom",e.bottom,e),iB(t,"left",e.left,e)}(t.padding,e.padding);e.axis&&function(t,e){iB(t,"type",e.type,e),iB(t,"stroke",e.stroke,e),iB(t,"strokeWidth",e.strokeWidth,e)}(t.axis,e.axis);e.highlightStyle&&function(t,e){iB(t,"fill",e.fill,e),iB(t,"size",e.size,e),iB(t,"stroke",e.stroke,e),iB(t,"strokeWidth",e.strokeWidth,e)}(t.highlightStyle,e.highlightStyle)}(i,t),function(t,e){switch(e.type){case"bar":case"column":XG(t,e);break;case"area":!function(t,e){iB(t,"fill",e.fill,e),e.marker&&$G(t.marker,e.marker);e.line&&qG(t.line,e.line);e.crosshairs&&ZG(t.crosshairs,e.crosshairs)}(t,e);break;default:!function(t,e){e.marker&&$G(t.marker,e.marker);e.line&&qG(t.line,e.line);e.crosshairs&&ZG(t.crosshairs,e.crosshairs)}(t,e)}}(i,t),t.data&&(i.data=t.data),i.processedOptions=t,i},t}();function XG(t,e){iB(t,"valueAxisDomain",e.valueAxisDomain,e),iB(t,"fill",e.fill,e),iB(t,"stroke",e.stroke,e),iB(t,"strokeWidth",e.strokeWidth,e),iB(t,"paddingInner",e.paddingInner,e),iB(t,"paddingOuter",e.paddingOuter,e),iB(t,"formatter",e.formatter,e),e.label&&function(t,e){iB(t,"enabled",e.enabled,e),iB(t,"fontStyle",e.fontStyle,e),iB(t,"fontWeight",e.fontWeight,e),iB(t,"fontSize",e.fontSize,e),iB(t,"fontFamily",e.fontFamily,e),iB(t,"textAlign",e.textAlign,e),iB(t,"textBaseline",e.textBaseline,e),iB(t,"color",e.color,e),iB(t,"formatter",e.formatter,e),iB(t,"placement",e.placement,e)}(t.label,e.label)}function $G(t,e){iB(t,"enabled",e.enabled,e),iB(t,"size",e.size,e),iB(t,"shape",e.shape,e),iB(t,"fill",e.fill,e),iB(t,"stroke",e.stroke,e),iB(t,"strokeWidth",e.strokeWidth,e),iB(t,"formatter",e.formatter,e)}function qG(t,e){iB(t,"stroke",e.stroke,e),iB(t,"strokeWidth",e.strokeWidth,e)}function ZG(t,e){t.xLine&&e.xLine&&JG(t.xLine,e.xLine),t.yLine&&e.yLine&&JG(t.yLine,e.yLine)}function JG(t,e){iB(t,"enabled",e.enabled,e),iB(t,"stroke",e.stroke,e),iB(t,"strokeWidth",e.strokeWidth,e),iB(t,"lineDash",e.lineDash,e),iB(t,"lineCap",e.lineCap,e)}var QG={};var tB=function(t,e,i){if(KG(e))return!0;var o,n,r="AG Charts: ".concat(t," must be a number, the value you provided is not a valid number. Using the default of ").concat(i,"px.");return o=function(){return console.warn(r)},n="".concat(t," not a number"),QG[n]||(o(),QG[n]=!0),!1},eB={xOffset:tB,yOffset:tB};function iB(t,e,i,o){if(e in o)if(e in t){var n=eB[e];(!n||n(e,i,t[e]))&&t[e]!==i&&(t[e]=i)}else console.warn("Property ".concat(e," does not exist on the target object."))}var oB=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),nB=function(){return nB=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},nB.apply(this,arguments)},rB=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},sB=function(t){function e(){return t.call(this,e.TEMPLATE)||this}return oB(e,t),e.prototype.init=function(t){var e=this,i=!0,o=this.resizeObserverService.observeResize(this.getGui(),(function(){var o=e.getGui(),n=o.clientWidth,r=o.clientHeight;if(0!==n&&0!==r)if(i){var s=nB({data:t.value,width:n,height:r,context:{data:t.data}},t.sparklineOptions);e.sparkline=YG.create(s,e.sparklineTooltipSingleton.getSparklineTooltip()),e.eSparkline.appendChild(e.sparkline.canvasElement),i=!1}else e.sparkline.width=n,e.sparkline.height=r}));this.addDestroyFunc((function(){return o()}))},e.prototype.refresh=function(t){return!!this.sparkline&&(this.sparkline.data=t.value,!0)},e.prototype.destroy=function(){this.sparkline&&this.sparkline.destroy(),t.prototype.destroy.call(this)},e.TEMPLATE='<div class="ag-sparkline-wrapper">\n            <span ref="eSparkline"></span>\n        </div>',rB([(0,o.PIB)("eSparkline")],e.prototype,"eSparkline",void 0),rB([(0,o.dsm)("resizeObserverService")],e.prototype,"resizeObserverService",void 0),rB([(0,o.dsm)("sparklineTooltipSingleton")],e.prototype,"sparklineTooltipSingleton",void 0),e}(o.uAl),aB=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),lB=function(t,e,i,o){var n,r=arguments.length,s=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,i,s):n(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},cB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return aB(e,t),e.prototype.postConstruct=function(){this.tooltip=new fG},e.prototype.getSparklineTooltip=function(){return this.tooltip},e.prototype.destroyTooltip=function(){this.tooltip&&this.tooltip.destroy()},lB([o.o7C],e.prototype,"postConstruct",null),lB([o.yah],e.prototype,"destroyTooltip",null),e=lB([(0,o.dR4)("sparklineTooltipSingleton")],e)}(o.XQb),dB={version:"31.0.0",moduleName:o.zsj.SparklinesModule,beans:[cB],userComponents:[{componentName:"agSparklineCellRenderer",componentClass:sB}],dependantModules:[g]};const uB=[Lt,Kt,ro,ur,Tr,Iw,Kw,fE,wE,xw,DE,Ci,BO,hD,io,FD,jD,dB],hB=o.UcL.concat(uB);o.syG.registerModules(uB)}}]);