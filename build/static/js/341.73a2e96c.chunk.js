"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[341],{341:(t,e,i)=>{i.r(e),i.d(e,{A:()=>zg,M:()=>td,V:()=>Kg,_:()=>C,a:()=>Jg,b:()=>pf,c:()=>Gg,d:()=>tf,e:()=>D,f:()=>M,i:()=>Yg,m:()=>nf,s:()=>ef,t:()=>L});var s=Object.defineProperty,n=Object.defineProperties,a=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,d=Reflect.get,u=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),p=Math.pow,g=(t,e,i)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,f=(t,e)=>{for(var i in e||(e={}))h.call(e,i)&&g(t,i,e[i]);if(o)for(var i of o(e))c.call(e,i)&&g(t,i,e[i]);return t},m=(t,e)=>n(t,r(e)),y=(t,e)=>{var i={};for(var s in t)h.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&o)for(var s of o(t))e.indexOf(s)<0&&c.call(t,s)&&(i[s]=t[s]);return i},v=(t,e)=>{for(var i in e)s(t,i,{get:e[i],enumerable:!0})},x=(t,e,i,n)=>{for(var r,o=n>1?void 0:n?a(e,i):e,l=t.length-1;l>=0;l--)(r=t[l])&&(o=(n?r(e,i,o):r(o))||o);return n&&o&&s(e,i,o),o},b=(t,e,i)=>d(l(t),i,e),S=(t,e,i)=>new Promise(((s,n)=>{var a=t=>{try{o(i.next(t))}catch(e){n(e)}},r=t=>{try{o(i.throw(t))}catch(e){n(e)}},o=t=>t.done?s(t.value):Promise.resolve(t.value).then(a,r);o((i=i.apply(t,e)).next())})),k=function(t,e){this[0]=t,this[1]=e},w=t=>{var e,i=t[u("asyncIterator")],s=!1,n={};return null==i?(i=t[u("iterator")](),e=t=>n[t]=e=>i[t](e)):(i=i.call(t),e=t=>n[t]=e=>{if(s){if(s=!1,"throw"===t)throw e;return e}return s=!0,{done:!1,value:new k(new Promise((s=>{var n=i[t](e);if(!(n instanceof Object))throw TypeError("Object expected");s(n)})),1)}}),n[u("iterator")]=()=>n,e("next"),"throw"in i?e("throw"):n.throw=t=>{throw t},"return"in i&&e("return"),n},D=["bar","line","scatter"],M=(t=>(t.POINTER="pointer",t.NODE="node",t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t.TOP_LEFT="top-left",t.TOP_RIGHT="top-right",t.BOTTOM_RIGHT="bottom-right",t.BOTTOM_LEFT="bottom-left",t))(M||{}),C=0,L={};v(L,{day:()=>tt,friday:()=>lt,hour:()=>J,millisecond:()=>B,minute:()=>j,monday:()=>nt,month:()=>dt,saturday:()=>ht,second:()=>U,sunday:()=>st,thursday:()=>ot,tuesday:()=>at,utcDay:()=>yt,utcHour:()=>mt,utcMinute:()=>ft,utcMonth:()=>vt,utcYear:()=>xt,wednesday:()=>rt,year:()=>pt});var R=new Map;function T(t,e){R.has(e)||(R.set(e,!0),t())}function A(t){return t}function*E(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const s of e)yield*w(s)}function N(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const{leading:s=!0,trailing:n=!0}=i??{};let a,r,o=!1;function l(){n&&r?(a=setTimeout(l,e),t(...r)):o=!1,r=null}return Object.assign((function(){for(var i=arguments.length,n=new Array(i),h=0;h<i;h++)n[h]=arguments[h];o?r=n:(o=!0,a=setTimeout(l,e),s?t(...n):r=n)}),{cancel(){clearTimeout(a),o=!1,r=null}})}T.clear=()=>R.clear();var O={log(){console.log(...arguments)},warn(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];console.warn(`AG Charts - ${t}`,...i)},error(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];"object"==typeof t?console.error("AG Charts error",t,...i):console.error(`AG Charts - ${t}`,...i)},table(){console.table(...arguments)},warnOnce(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];T((()=>O.warn(t,...i)),`Logger.warn: ${t}`)},errorOnce(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];T((()=>O.error(t,...i)),`Logger.error: ${t}`)}},I=class{constructor(t,e,i){this._encode=t,this._decode=e,this._rangeCallback=i}floor(t){const e=new Date(t),i=this._encode(e);return this._decode(i)}ceil(t){const e=new Date(Number(t)-1),i=this._encode(e);return this._decode(i+1)}range(t,e,i){var s;const n=null==(s=this._rangeCallback)?void 0:s.call(this,t,e),a=this._encode(i?this.floor(t):this.ceil(t)),r=this._encode(i?this.ceil(e):this.floor(e));if(r<a)return[];const o=[];for(let l=a;l<=r;l++){const t=this._decode(l);o.push(t)}return null==n||n(),o}},P=class extends I{getOffset(t,e){const i="number"==typeof t||t instanceof Date?this._encode(new Date(t)):0;return Math.floor(i)%e}every(t,e){let i,s=0;const n=t;n!==(t=Math.max(1,Math.round(t)))&&O.warnOnce(`interval step of [${n}] rounded to [${t}].`);const{snapTo:a="start"}=e??{};if("string"==typeof a){const e=s;i=(i,n)=>{const r="start"===a?i:n;return s=this.getOffset(r,t),()=>s=e}}else"number"==typeof a?s=this.getOffset(new Date(a),t):a instanceof Date&&(s=this.getOffset(a,t));return new I((e=>{const i=this._encode(e);return Math.floor((i-s)/t)}),(e=>this._decode(e*t+s)),i)}};var B=new P((function(t){return t.getTime()}),(function(t){return new Date(t)})),_=B;new Date(0).getFullYear();var F=1e3,G=6e4,z=60*G,W=24*z,V=7*W,K=30*W,Y=365*W,$=(new Date).getTimezoneOffset()*G;var U=new P((function(t){return Math.floor((t.getTime()-$)/F)}),(function(t){return new Date($+t*F)})),X=U,H=(new Date).getTimezoneOffset()*G;var j=new P((function(t){return Math.floor((t.getTime()-H)/G)}),(function(t){return new Date(H+t*G)})),q=j,Z=(new Date).getTimezoneOffset()*G;var J=new P((function(t){return Math.floor((t.getTime()-Z)/z)}),(function(t){return new Date(Z+t*z)})),Q=J;var tt=new P((function(t){const e=t.getTimezoneOffset()*G;return Math.floor((t.getTime()-e)/W)}),(function(t){const e=new Date(1970,0,1);return e.setDate(e.getDate()+t),e})),et=tt;function it(t){const e=(7+t-4)%7;return new P((function(t){const i=t.getTimezoneOffset()*G;return Math.floor((t.getTime()-i)/V-e/7)}),(function(t){const i=new Date(1970,0,1);return i.setDate(i.getDate()+7*t+e),i}))}var st=it(0),nt=it(1),at=it(2),rt=it(3),ot=it(4),lt=it(5),ht=it(6),ct=st;var dt=new P((function(t){return 12*t.getFullYear()+t.getMonth()}),(function(t){const e=Math.floor(t/12);return new Date(e,t-12*e,1)})),ut=dt;var pt=new P((function(t){return t.getFullYear()}),(function(t){const e=new Date;return e.setFullYear(t),e.setMonth(0,1),e.setHours(0,0,0,0),e})),gt=pt;var ft=new P((function(t){return Math.floor(t.getTime()/G)}),(function(t){return new Date(t*G)}));var mt=new P((function(t){return Math.floor(t.getTime()/z)}),(function(t){return new Date(t*z)}));var yt=new P((function(t){return Math.floor(t.getTime()/W)}),(function(t){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+t),e.setUTCHours(0,0,0,0),e}));var vt=new P((function(t){return 12*t.getUTCFullYear()+t.getUTCMonth()}),(function(t){const e=Math.floor(t/12),i=t-12*e;return new Date(Date.UTC(e,i,1))}));var xt=new P((function(t){return t.getUTCFullYear()}),(function(t){const e=new Date;return e.setUTCFullYear(t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e})),bt={isEnterprise:!1},St=class{constructor(){this.destroyFns=[]}destroy(){for(const t of this.destroyFns)t()}},kt=new class{constructor(){this.modules=[]}register(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const s of e){const t=this.modules.find((t=>s.type===t.type&&s.optionsKey===t.optionsKey&&s.identifier===t.identifier));if(t){if("enterprise"===s.packageType&&"community"===t.packageType){const e=this.modules.indexOf(t);this.modules.splice(e,1,s)}}else this.modules.push(s)}}hasEnterpriseModules(){return this.modules.some((t=>"enterprise"===t.packageType))}*byType(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const s of this.modules)e.includes(s.type)&&(yield s)}},wt=new class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(t,e){this.axesMap.set(t,e.instanceConstructor),e.themeTemplate&&this.setThemeTemplate(t,e.themeTemplate),e.hidden&&this.hidden.add(t)}create(t,e){const i=this.axesMap.get(t);if(i)return new i(e);throw new Error(`AG Charts - unknown axis type: ${t}`)}has(t){return this.axesMap.has(t)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter((t=>!this.hidden.has(t)))}setThemeTemplate(t,e){return this.themeTemplates.set(t,e),this}getThemeTemplate(t){return this.themeTemplates.get(t)}},Dt=Symbol("BREAK"),Mt="__decorator_config";function Ct(t,e){null==Object.getOwnPropertyDescriptor(t,Mt)&&Object.defineProperty(t,Mt,{value:{}});const i=t[Mt],s=e.toString();if(typeof i[s]<"u")return i[s];const n=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:n};const a=Object.getOwnPropertyDescriptor(t,e),r=null==a?void 0:a.set,o=null==a?void 0:a.get;return Object.defineProperty(t,e,{set:function(t){const{setters:a,observers:l}=i[s];let h;a.some((t=>t.length>2))&&(h=o?o.call(this):n.get(this));for(const i of a)if((t=i(this,e,t,h))===Dt)return;r?r.call(this,t):n.set(this,t);for(const e of l)e(this,t,h)},get:function(){let t=o?o.call(this):n.get(this);for(const n of i[s].getters)if(t=n(this,e,t),t===Dt)return;return t},enumerable:!0,configurable:!1}),i[s]}function Lt(t,e,i){return(s,n)=>{const a=Ct(s,n);a.setters.push(t),e&&a.getters.unshift(e),i&&Object.assign(a,i)}}function Rt(t){return typeof t<"u"&&Mt in t}function Tt(t){const e=new Set;for(;Rt(t);)e.add(null==t?void 0:t[Mt]),t=Object.getPrototypeOf(t);return Array.from(e).flatMap((t=>Object.keys(t)))}function At(t){return Tt(t).reduce(((e,i)=>{var s;return e[i]=null!=(s=t[i])?s:null,e}),{})}function Et(t){return null!=t}function Nt(t){return Array.isArray(t)}function Ot(t){return"boolean"==typeof t}function It(t){return t instanceof Date}function Pt(t){return It(t)&&!isNaN(Number(t))}function Bt(t){return t instanceof RegExp}function _t(t){return"function"==typeof t}function Ft(t){return"object"==typeof t&&null!==t&&!Nt(t)}function Gt(t){return Nt(t)||zt(t)}function zt(t){return"object"==typeof t&&null!==t&&t.constructor===Object}function Wt(t){return"string"==typeof t}function Vt(t){return"number"==typeof t}function Kt(t){return Vt(t)&&Number.isFinite(t)}function Yt(t){return typeof window<"u"&&t instanceof HTMLElement}function $t(t,e){return Wt(e)&&Object.keys(t).includes(e)}function Ut(t,e){return Object.values(t).includes(e)}function Xt(t){return"symbol"==typeof t}function Ht(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return jt(...e.reverse())}function jt(){const t={};for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];for(const n of i){if(!Ft(n))continue;const e=Rt(n)?Tt(n):Object.keys(n);for(const i of e)zt(t[i])&&zt(n[i])?t[i]=jt(t[i],n[i]):null!=t[i]||(t[i]=n[i])}return t}function qt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return i&&Nt(t)?t.map((t=>jt(t,...i))):t}function Zt(t,e){return Object.entries(t).reduce(((i,s)=>{let[n,a]=s;return i[n]=e(a,n,t),i}),{})}function Jt(t,e){const i=f({},t);for(const s of e)delete i[s];return i}function Qt(t,e){return(Nt(e)?e:e.split(".")).reduce(((t,e)=>t[e]),t)}function te(t,e,i){const s=Nt(e)?e.slice():e.split("."),n=s.pop();s.reduce(((t,e)=>t[e]),t)[n]=i}function ee(t,e,i){if(void 0===i)return e;for(const s of t){const t=i[s];void 0!==t&&(e[s]=t)}return e}var ie=class extends Map{get(t){var e;return null!=(e=super.get(t))?e:"unknown"}isCartesian(t){return"cartesian"===this.get(t)}isPolar(t){return"polar"===this.get(t)}isHierarchy(t){return"hierarchy"===this.get(t)}isTopology(t){return"topology"===this.get(t)}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter((t=>this.isCartesian(t)))}get polarTypes(){return this.seriesTypes.filter((t=>this.isPolar(t)))}get hierarchyTypes(){return this.seriesTypes.filter((t=>this.isHierarchy(t)))}get topologyTypes(){return this.seriesTypes.filter((t=>this.isTopology(t)))}},se=class extends Map{set(t,e){return super.set(t,jt(e,this.get(t)))}},ne=new ie,ae=new ie,re=new se,oe=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology"]},{type:"root",optionsKey:"rangeButtons",chartTypes:["cartesian"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function le(t){var e;return null==(e=oe.find((e=>"series"===e.type&&e.identifier===t)))?void 0:e.chartTypes}function he(t){if(!function(t){return"enterprise"===t.packageType}(t))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const e=oe.find((e=>e.type===t.type&&e.optionsKey===t.optionsKey&&e.identifier===t.identifier&&t.chartTypes.every((t=>e.chartTypes.includes(t)))));return e&&(null!=e.useCount||(e.useCount=0),e.useCount++),null!=e}function ce(t){var e,i,s;return null!=(s=null==(i=null==(e=t.series)?void 0:e[0])?void 0:i.type)?s:"line"}function de(t){const e=ce(t);return null==e||("cartesian"===e?(O.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):ne.isCartesian(e)||function(t){var e;return"cartesian"===(null==(e=le(t))?void 0:e.find((t=>"cartesian"===t)))}(e))}function ue(t){const e=ce(t);return null!=e&&("polar"===e?(O.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):ne.isPolar(e)||function(t){var e;return"polar"===(null==(e=le(t))?void 0:e.find((t=>"polar"===t)))}(e))}function pe(t){const e=ce(t);return null!=e&&("hierarchy"===e?(O.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):ne.isHierarchy(e)||function(t){var e;return"hierarchy"===(null==(e=le(t))?void 0:e.find((t=>"hierarchy"===t)))}(e))}function ge(t){const e=ce(t);return null!=e&&("topology"===e?(O.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):ne.isTopology(e)||function(t){var e;return"topology"===(null==(e=le(t))?void 0:e.find((t=>"topology"===t)))}(e))}function fe(t){return null!=t&&wt.has(t)}var me=class{set(t){const{className:e=this.constructor.name}=this.constructor;if("object"!=typeof t)return O.warn(`unable to set ${e} - expecting a properties object`),this;const i=new Set(Object.keys(t));for(const s of Tt(this))if(i.has(s)){const e=t[s],n=this;ve(n[s])?n[s]=n[s]instanceof ye?n[s].reset(e):n[s].set(e):n[s]=e,i.delete(s)}for(const s of i)O.warn(`unable to set [${s}] in ${e} - property is unknown`);return this}isValid(){return Tt(this).every((t=>{const{optional:e}=function(t,e){const i=e.toString();for(;Rt(t);){const e=t[Mt];if(Object.hasOwn(e,i))return e[i];t=Object.getPrototypeOf(t)}}(this,t);return e||typeof this[t]<"u"}))}toJson(){return Tt(this).reduce(((t,e)=>{const i=this[e];return t[e]=ve(i)?i.toJson():i,t}),{})}},ye=class t extends Array{constructor(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];super(i.length),Object.defineProperty(this,"itemFactory",{value:t,enumerable:!1,configurable:!1}),this.set(i)}set(t){if(Nt(t)){this.length=t.length;for(let e=0;e<t.length;e++)this[e]=(new this.itemFactory).set(t[e])}return this}reset(e){return new t(this.itemFactory,...e)}toJson(){return this.map((t=>{var e,i;return null!=(i=null==(e=null==t?void 0:t.toJson)?void 0:e.call(t))?i:t}))}};function ve(t){return t instanceof me||t instanceof ye}var xe="class-instance";function be(t,e,i){if(Nt(e)){if(!Nt(t)||t.length!==e.length||e.some(((e,i)=>null!=be(t[i],e))))return e}else{if(zt(e)){if(!zt(t))return e;const s={},n=new Set([...Object.keys(t),...Object.keys(e)]);for(const a of n)if(!(t[a]===e[a]||null!=i&&i.includes(a)))if(typeof t[a]==typeof e[a]){const i=be(t[a],e[a]);null!==i&&(s[a]=i)}else s[a]=e[a];return Object.keys(s).length?s:null}if(t!==e)return e}return null}function Se(t,e){return Nt(t)?t.map((t=>Se(t,e))):zt(t)?Zt(t,((t,i)=>{var s;return null!=(s=null==e?void 0:e.shallow)&&s.includes(i)?ke(t):Se(t,e)})):ke(t)}function ke(t){return Nt(t)?[...t]:zt(t)?f({},t):It(t)?new Date(t):Bt(t)?new RegExp(t.source,t.flags):t}function we(t,e,i){for(var s=arguments.length,n=new Array(s>3?s-3:0),a=3;a<s;a++)n[a-3]=arguments[a];var r;if(Nt(t))e(t,...n),t.forEach(((t,s)=>{we(t,e,i,...Me(n,s))}));else if(zt(t)){e(t,...n);for(const s of Object.keys(t)){if(null!=(r=null==i?void 0:i.skip)&&r.includes(s))continue;const a=t[s];(Nt(a)||zt(a))&&we(a,e,i,...Me(n,s))}}}function De(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{path:s,constructedArrays:n,matcherPath:a=(null==s?void 0:s.replace(/(\[[0-9+]+])/i,"[]")),skip:r=[]}=i;if(null==t)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(null==e)return t;if(ve(t))return t.set(e);const o=t,l=Ce(t);for(const c in e){const d=`${a?a+".":""}${c}`;if(r.includes(d))continue;const u=e[c],p=`${s?s+".":""}${c}`,g=o.constructor,y=o[c];let v;try{const e=Ce(y),s=Ce(u);if(l===xe&&!(c in t)){O.warn(`unable to set [${p}] in ${null==g?void 0:g.name} - property is unknown`);continue}if(null!=e&&null!=s&&s!==e&&(e!==xe||"object"!==s)){O.warn(`unable to set [${p}] in ${null==g?void 0:g.name} - can't apply type of [${s}], allowed types are: [${e}]`);continue}if(ve(y))o[c].set(u);else if("array"===s)if(v??(v=null==n?void 0:n.get(y)),null!=v){const t=u;o[c]=t.map((t=>De(new v,t,m(f({},i),{path:p,matcherPath:d+"[]"}))))}else o[c]=u;else s===xe?o[c]=u:"object"===s?null!=y?De(y,u,m(f({},i),{path:p,matcherPath:d})):null!=v?o[c]=De(new v,u,m(f({},i),{path:p,matcherPath:d})):(o[c]={},De(o[c],u,m(f({},i),{path:p,matcherPath:d}))):o[c]=u}catch(h){O.warn(`unable to set [${p}] in [${null==g?void 0:g.name}]; nested error is: ${h.message}`)}}return t}function Me(t,e){return t.map((t=>null==t?void 0:t[e]))}function Ce(t){return null==t?null:Yt(t)||It(t)?"primitive":Nt(t)?"array":Ft(t)?zt(t)?"object":xe:_t(t)?"function":"primitive"}var Le=new class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(t,e){let{chartTypes:[i],instanceConstructor:s,defaultAxes:n,themeTemplate:a,enterpriseThemeTemplate:r,paletteFactory:o,solo:l,stackable:h,groupable:c,stackedByDefault:d,swapDefaultAxesCondition:u,hidden:p}=e;this.setThemeTemplate(t,a,r),this.seriesMap.set(t,{instanceConstructor:s,defaultAxes:n,paletteFactory:o,solo:l,stackable:h,groupable:c,stackedByDefault:d,swapDefaultAxesCondition:u}),ne.set(t,i),p||ae.set(t,i)}create(t,e){var i;const s=null==(i=this.seriesMap.get(t))?void 0:i.instanceConstructor;if(s)return new s(e);throw new Error(`AG Charts - unknown series type: ${t}`)}cloneDefaultAxes(t){var e;const i=null==(e=this.seriesMap.get(t))?void 0:e.defaultAxes;return i?{axes:Se(i)}:null}setThemeTemplate(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=this.themeTemplates.get(t);this.themeTemplates.set(t,{community:jt(e,null==s?void 0:s.community),enterprise:jt(i,e,null==s?void 0:s.community)})}getThemeTemplate(t){const e=this.themeTemplates.get(t);return bt.isEnterprise?null==e?void 0:e.enterprise:null==e?void 0:e.community}getPaletteFactory(t){var e;return null==(e=this.seriesMap.get(t))?void 0:e.paletteFactory}isSolo(t){var e,i;return null!=(i=null==(e=this.seriesMap.get(t))?void 0:e.solo)&&i}isGroupable(t){var e,i;return null!=(i=null==(e=this.seriesMap.get(t))?void 0:e.groupable)&&i}isStackable(t){var e,i;return null!=(i=null==(e=this.seriesMap.get(t))?void 0:e.stackable)&&i}isStackedByDefault(t){var e,i;return null!=(i=null==(e=this.seriesMap.get(t))?void 0:e.stackedByDefault)&&i}isDefaultAxisSwapNeeded(t){var e,i,s;let n;for(const a of null!=(e=t.series)?e:[]){const{type:t="line"}=a,e=null==(s=null==(i=this.seriesMap.get(t))?void 0:i.swapDefaultAxesCondition)?void 0:s.call(i,a);if(null!=e){if(null!=n&&n!=e)throw new Error("AG Charts - The provided series have incompatible directions");n=e}}return n}},Re=new class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(t,e){let{optionsKey:i,instanceConstructor:s,themeTemplate:n}=e;this.legendMap.set(t,{optionsKey:i,instanceConstructor:s}),this.themeTemplates.set(i,n)}create(t,e){var i;const s=null==(i=this.legendMap.get(t))?void 0:i.instanceConstructor;if(s)return new s(e);throw new Error(`AG Charts - unknown legend type: ${t}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce(((t,e)=>{let[i,s]=e;return t[i]=s.optionsKey,t}),{})}},Te=(t=>(t[t.SMALL=12]="SMALL",t[t.MEDIUM=13]="MEDIUM",t[t.LARGE=17]="LARGE",t))(Te||{}),Ae=(t=>(t.NORMAL="normal",t.BOLD="bold",t.BOLDER="bolder",t.LIGHTER="lighter",t))(Ae||{}),Ee=(t=>(t.TOP="top",t.RIGHT="right",t.BOTTOM="bottom",t.LEFT="left",t))(Ee||{}),Ne=(t=>(t.CATEGORY="category",t.ORDINAL_TIME="ordinal-time",t.NUMBER="number",t.TIME="time",t.LOG="log",t))(Ne||{}),Oe=(t=>(t.ANGLE_CATEGORY="angle-category",t.ANGLE_NUMBER="angle-number",t.RADIUS_CATEGORY="radius-category",t.RADIUS_NUMBER="radius-number",t))(Oe||{}),Ie=(t=>(t.CIRCLE="circle",t.POLYGON="polygon",t))(Ie||{}),Pe={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Be={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},_e=Symbol("is-dark-theme"),Fe=Symbol("extends-chart-defaults"),Ge=Symbol("extends-legend-defaults"),ze=Symbol("extends-legend-item-defaults"),We=Symbol("extends-legend-item-marker-defaults"),Ve=Symbol("extends-axes-defaults"),Ke=Symbol("extends-axes-label-defaults"),Ye=Symbol("extends-axes-line-defaults"),$e=Symbol("extends-axes-tick-defaults"),Ue=Symbol("extends-axes-grid-line-defaults"),Xe=Symbol("extends-series-defaults"),He=Symbol("extends-cartesian-marker-defaults"),je=Symbol("override-series-label-defaults"),qe=Symbol("default-font"),Ze=Symbol("default-label-colour"),Je=Symbol("default-inverted-label-colour"),Qe=Symbol("default-inside-series-label-colour"),ti=Symbol("default-muted-label-colour"),ei=Symbol("default-axis-grid-colour"),ii=Symbol("default-axis-line-colour"),si=Symbol("default-cross-lines-colour"),ni=Symbol("default-background-colour"),ai=Symbol("default-shadow-colour"),ri=Symbol("default-waterfall-series-positive-colors"),oi=Symbol("default-waterfall-series-negative-colors"),li=Symbol("default-waterfall-series-total-colors"),hi=Symbol("default-waterfall-series-connector-line-stroke"),ci=Symbol("default-polar-series-stroke"),di=Symbol("default-diverging-series-colour-range"),ui=Symbol("default-hierarchy-fills"),pi=Symbol("default-hierarchy-strokes"),gi="white",fi={fills:Object.values(Pe),strokes:Object.values(Be)},mi={get cartesian(){return{seriesTypes:ne.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:ne.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:ne.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:ne.topologyTypes,commonOptions:[]}}},yi=Object.values(mi).reduce(((t,e)=>{let{commonOptions:i}=e;return[...t,...i]}),[]);var vi=class t{getPalette(){return fi}static getAxisDefaults(t){return jt(t,{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:qe,color:Ze},label:{fontSize:12,fontFamily:qe,padding:5,color:Ze,avoidCollisions:!0},line:{enabled:!0,width:1,color:ii},tick:{enabled:!1,width:1,color:ii},gridLine:{enabled:!0,style:[{stroke:ei,lineDash:[]}]},crossLines:{enabled:!1,fill:si,stroke:si,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:qe,padding:5,color:Ze}}})}static getSeriesDefaults(){return{tooltip:{enabled:!0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1}}static getLegendItemMarkerDefaults(){return{size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:ni},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:qe,color:Ze,wrapping:t.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:qe,color:ti,wrapping:t.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:qe,color:"rgb(140, 140, 140)",wrapping:t.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:t.getLegendItemMarkerDefaults(),toggleSeriesVisible:!0,label:{color:Ze,fontSize:12,fontFamily:qe}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Ze},inactiveStyle:{fill:ti},highlightStyle:{fill:Ze},label:{color:Ze}}},tooltip:{enabled:!0,darkTheme:_e,range:"nearest",delay:0},overlays:{loading:{darkTheme:_e},noData:{darkTheme:_e},noVisibleSeries:{darkTheme:_e}},listeners:{}}}constructor(t){var e;t=Se(t??{});const{overrides:i=null,palette:s=null}=t,n=this.createChartConfigPerChartType(this.getDefaults());if(i){const{common:t}=i,e=(t,e)=>{if(e)for(const i of t){const t=i;n[t]=jt(e,n[t])}};for(const{seriesTypes:i,commonOptions:s}of Object.values(mi)){const n=f({},t);for(const t of yi)s.includes(t)||delete n[t];e(i,n)}ne.seriesTypes.forEach((t=>{const e=t;i[e]&&(n[e]=jt(i[e],n[e]))}))}const a=this.getPalette();this.palette=null!=(e=function(t,e){var i,s;return null==t?null:{fills:null!=(i=t.fills)?i:e.fills,strokes:null!=(s=t.strokes)?s:e.strokes}}(s,a))?e:a,this.config=Object.freeze(this.templateTheme(n))}createChartConfigPerChartType(t){return Object.entries(mi).forEach((e=>{let[i,{seriesTypes:s}]=e;const n=re.get(i);s.forEach((e=>{const i=e;t[i]||(t[i]=Se(n))}))})),t}getDefaults(){const e=(e,i)=>{var s;const n=(e=>f(f(f({axes:{}},Re.getThemeTemplates()),t.getChartDefaults()),re.get(e)))(e),a={};for(const r of i){a[r]=jt(Le.getThemeTemplate(r),null!=(s=a[r])?s:Se(n));const{axes:i}=a[r];for(const s of wt.keys())i[s]=jt(i[s],wt.getThemeTemplate(s),"cartesian"===e&&t.cartesianAxisDefault[s])}return a};return jt(e("cartesian",ne.cartesianTypes),e("polar",ne.polarTypes),e("hierarchy",ne.hierarchyTypes),e("topology",ne.topologyTypes))}templateTheme(t){const e=Se(t),{extensions:i,properties:s}=this.getTemplateParameters();return we(e,(t=>{if(t.__extends__){const e=t.__extends__,s=i.get(e);if(null==s)throw new Error(`AG Charts - no template variable provided for: ${e}`);Object.keys(s).forEach((e=>{e in t?Ft(t[e])&&(t[e]=jt(t[e],s[e])):t[e]=s[e]})),delete t.__extends__}if(t.__overrides__){const e=t.__overrides__,s=i.get(e);if(null==s)throw new Error(`AG Charts - no template variable provided for: ${e}`);Object.assign(t,s),delete t.__overrides__}if(Nt(t))for(let e=0;e<t.length;e++){const i=t[e];s.has(i)&&(t[e]=s.get(i))}else for(const[e,i]of Object.entries(t))s.has(i)&&(t[e]=s.get(i))})),Se(e)}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Pe.BLUE,stroke:Be.BLUE,label:{color:Ze}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Pe.ORANGE,stroke:Be.ORANGE,label:{color:Ze}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Pe.GRAY,stroke:Be.GRAY,label:{color:Ze}}}getTemplateParameters(){const e=new Map;e.set(Fe,t.getChartDefaults()),e.set(Ve,t.getAxisDefaults()),e.set(Ge,t.getChartDefaults().legend),e.set(ze,t.getChartDefaults().legend.item),e.set(We,t.getLegendItemMarkerDefaults()),e.set(Ke,t.getAxisDefaults().label),e.set(Ye,t.getAxisDefaults().line),e.set($e,t.getAxisDefaults().tick),e.set(Ue,t.getAxisDefaults().gridLine),e.set(Xe,t.getSeriesDefaults()),e.set(je,{}),e.set(He,t.getCartesianSeriesMarkerDefaults());const i=new Map;return i.set(_e,!1),i.set(qe,"Verdana, sans-serif"),i.set(Ze,"rgb(70, 70, 70)"),i.set(Je,"white"),i.set(ti,"rgb(140, 140, 140)"),i.set(ei,"rgb(224,234,241)"),i.set(ii,"rgb(195, 195, 195)"),i.set(si,"rgb(70, 70, 70)"),i.set(Qe,gi),i.set(ni,gi),i.set(ai,"rgba(0, 0, 0, 0.5)"),i.set(di,[Pe.ORANGE,Pe.YELLOW,Pe.GREEN]),i.set(ui,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),i.set(pi,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),i.set(ci,gi),i.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),i.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),i.set(li,t.getWaterfallSeriesDefaultTotalColors()),i.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:e,properties:i}}};vi.cartesianAxisDefault={number:vi.getAxisDefaults({line:{enabled:!1}}),log:vi.getAxisDefaults({base:10,line:{enabled:!1}}),category:vi.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:!1}}),time:vi.getAxisDefaults({gridLine:{enabled:!1}}),"grouped-category":vi.getAxisDefaults()};var xi=vi,bi="#192232",Si={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},ki={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},wi={fills:Object.values(Si),strokes:Object.values(ki)},Di=class t extends xi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Si.BLUE,stroke:ki.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Si.ORANGE,stroke:ki.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Si.GRAY,stroke:ki.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(_e,!0),e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(ci,bi),e.properties.set(Ze,"white"),e.properties.set(ti,"#7D91A0"),e.properties.set(ei,"#545A6E"),e.properties.set(si,"white"),e.properties.set(di,[Si.ORANGE,Si.YELLOW,Si.GREEN]),e.properties.set(ui,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.properties.set(pi,["#192834","#3b5164","#496275","#577287","#668399"]),e.properties.set(ni,bi),e.properties.set(Qe,bi),e}getPalette(){return wi}constructor(t){super(t)}},Mi={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Ci={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Li={fills:Object.values(Mi),strokes:Object.values(Ci)},Ri=class t extends Di{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Mi.BLUE,stroke:Ci.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Mi.RED,stroke:Ci.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Mi.GRAY,stroke:Ci.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(di,[Mi.ORANGE,Mi.YELLOW,Mi.GREEN]),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Li}},Ti={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Ai={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Ei={fills:Object.values(Ti),strokes:Object.values(Ai)},Ni=class t extends xi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Ti.BLUE,stroke:Ai.BLUE,label:{color:Ze}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Ti.RED,stroke:Ai.RED,label:{color:Ze}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Ti.GRAY,stroke:Ai.GRAY,label:{color:Ze}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(di,[Ti.ORANGE,Ti.YELLOW,Ti.GREEN]),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Ei}},Oi={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Ii={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},Pi={fills:Object.values(Oi),strokes:Object.values(Ii)},Bi=class t extends Di{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Oi.BLUE,stroke:Ii.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Oi.RED,stroke:Ii.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee",label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(di,[Oi.BLUE,Oi.RED]),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Pi}},_i={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},Fi={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},Gi={fills:Object.values(_i),strokes:Object.values(Fi)},zi=class t extends xi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:_i.BLUE,stroke:Fi.BLUE,label:{color:Ze}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:_i.RED,stroke:Fi.RED,label:{color:Ze}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888",label:{color:Ze}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(di,[_i.BLUE,_i.RED]),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Gi}},Wi={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Vi={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Ki={fills:Object.values(Wi),strokes:Object.values(Vi)},Yi=class t extends Di{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Wi.BLUE,stroke:Vi.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Wi.ORANGE,stroke:Vi.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Wi.GRAY,stroke:Vi.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(di,[Wi.ORANGE,Wi.YELLOW,Wi.GREEN]),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Ki}},$i={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},Ui={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Xi={fills:Object.values($i),strokes:Object.values(Ui)},Hi=class t extends xi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:$i.BLUE,stroke:Ui.BLUE,label:{color:Ze}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:$i.ORANGE,stroke:Ui.ORANGE,label:{color:Ze}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:$i.GRAY,stroke:Ui.GRAY,label:{color:Ze}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(di,[$i.ORANGE,$i.YELLOW,$i.GREEN]),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Xi}},ji={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},qi={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Zi={fills:Object.values(ji),strokes:Object.values(qi)},Ji=class t extends Di{static getWaterfallSeriesDefaultPositiveColors(){return{fill:ji.BLUE,stroke:qi.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:ji.ORANGE,stroke:qi.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:ji.GRAY,stroke:qi.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(di,[ji.ORANGE,ji.YELLOW,ji.GREEN]),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return Zi}},Qi={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},ts={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},es={fills:Object.values(Qi),strokes:Object.values(ts)},is=class t extends xi{static getWaterfallSeriesDefaultPositiveColors(){return{fill:Qi.BLUE,stroke:ts.BLUE,label:{color:Ze}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Qi.ORANGE,stroke:ts.ORANGE,label:{color:Ze}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Qi.GRAY,stroke:ts.GRAY,label:{color:Ze}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(ri,t.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(oi,t.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(li,t.getWaterfallSeriesDefaultTotalColors()),e.properties.set(di,[Qi.ORANGE,Qi.YELLOW,Qi.GREEN]),e.properties.set(hi,t.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return es}},ss=()=>new xi,ns=()=>new Di,as={undefined:ss,null:ss,"ag-default":ss,"ag-sheets":()=>new Hi,"ag-polychroma":()=>new zi,"ag-vivid":()=>new is,"ag-material":()=>new Ni},rs=f(f({},{undefined:ns,null:ns,"ag-default-dark":ns,"ag-sheets-dark":()=>new Yi,"ag-polychroma-dark":()=>new Bi,"ag-vivid-dark":()=>new Ji,"ag-material-dark":()=>new Ri}),as);function os(t){return void 0===t||"string"==typeof t||t instanceof xi?t:"object"==typeof t?function(t){if(null===t)return;let e=!0;const{baseTheme:i,palette:s,overrides:n}=t;if(void 0!==i&&"string"!=typeof i&&"object"!=typeof i&&(O.warn(`invalid theme.baseTheme type ${typeof i}, expected (string | object).`),e=!1),void 0!==n&&"object"!=typeof n&&(O.warn(`invalid theme.overrides type ${typeof n}, expected object.`),e=!1),"object"==typeof s){if(null!==s){const{fills:t,strokes:i}=s;void 0!==t&&!Array.isArray(t)&&(O.warn("theme.overrides.fills must be undefined or an array"),e=!1),void 0!==i&&!Array.isArray(i)&&(O.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else void 0!==s&&(O.warn(`invalid theme.palette type ${typeof s}, expected object.`),e=!1);return e?t:void 0}(t):void O.warn(`invalid theme value type ${typeof t}, expected object or string.`)}function ls(t){let e=os(t);if(e instanceof xi)return e;if(null==e||"string"==typeof e){const t=rs[e];return t?t():(O.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),ss())}const i=[];let s;for(;"object"==typeof e;)i.push(e.overrides),s??(s=e.palette),e=e.baseTheme;const n={baseTheme:e,overrides:jt(...i),palette:s};return new((n.baseTheme?ls(n.baseTheme):ss()).constructor)(n)}function hs(t){if(0===t.length)return;let e=1/0,i=-1/0;for(const n of t){let t=n;t instanceof Date&&(t=t.getTime()),"number"==typeof t&&(t<e&&(e=t),t>i&&(i=t))}const s=[e,i];return s.every(isFinite)?s:void 0}function cs(t,e,i){return ds(t,e,i).extent}function ds(t,e,i){var s;let n=!1;return t.length>2&&(t=null!=(s=hs(t))?s:[NaN,NaN]),isNaN(e)||(n||(n=e>t[0]),t=[e,t[1]]),isNaN(i)||(n||(n=i<t[1]),t=[t[0],i]),t[0]>t[1]&&(t=[]),{extent:t,clipped:n}}function us(t,e){if(null==t||null==e||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(Array.isArray(t[i])&&Array.isArray(e[i])){if(!us(t[i],e[i]))return!1}else if(t[i]!==e[i])return!1;return!0}function ps(t){return typeof t>"u"?[]:Array.isArray(t)?t:[t]}function gs(t){return Array.from(new Set(t))}function fs(t,e){return t.reduce(((t,i)=>{const s=e(i);return null!=t[s]||(t[s]=[]),t[s].push(i),t}),{})}function ms(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t.length)return[];const s=[];for(let n=0;n<e;n++)s.push(t.at((n+i)%t.length));return s}function ys(t,e){return e.reduce(((e,i)=>{let[s,n]=e;return t(i)?[[...s,i],n]:[s,[...n,i]]}),[[],[]])}var vs={},xs=new WeakMap;function bs(){return vs.document}function Ss(t){var e;return t?null==(e=vs.window)?void 0:e[t]:vs.window}function ks(t,e){return bs().createElement(t,e)}function ws(t,e){const{body:i}=bs(),s=ks("a");s.href=t,s.download=e,s.style.display="none",i.appendChild(s),s.click(),setTimeout((()=>i.removeChild(s)))}function Ds(t,e){var i,s;const n=bs();if(e&&null!=(i=xs.get(n))&&i.has(e))return;const a=ks("style");a.innerHTML=t,n.head.insertBefore(a,n.head.querySelector("style")),e&&!xs.has(n)?xs.set(n,new Set([e])):e&&(null==(s=xs.get(n))||s.add(e))}function Ms(t){vs.document=t}function Cs(t){vs.window=t}typeof window<"u"?vs.window=window:typeof global<"u"&&(vs.window=global.window),typeof document<"u"?vs.document=document:typeof global<"u"&&(vs.document=global.document);var Ls=Date.now(),Rs={create(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.assign((function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];Rs.check(...e)&&("function"==typeof i[0]&&(i=ps(i[0]())),(()=>{const t=Date.now()-Ls;if(t>2e3){const e=(Math.floor(t/100)/10).toFixed(1);O.log(`**** ${e}s since last log message ****`)}Ls=Date.now()})(),O.log(...i))}),{check:()=>Rs.check(...e)})},check(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return 0===e.length&&e.push(!0),ps(Ss("agChartsDebug")).some((t=>e.includes(t)))}},Ts=new Set(["map-shape-background","map-line-background"]),As=class{constructor(t,e){var i,s;const n={shallow:["data"]},a=Se(t,n),r=this.optionsType(a);this.sanityCheckAndCleanup(a),this.userOptions=a,this.activeTheme=ls(a.theme),this.defaultAxes=this.getDefaultAxes(a),this.specialOverrides=this.specialOverridesDefaults(f({},e));const o=this.getSeriesThemeConfig(r),{axes:l={},series:h}=o,c=y(o,["axes","series"]);this.processedOptions=Se(jt(this.userOptions,c,this.defaultAxes),n),this.processAxesOptions(this.processedOptions,l),this.processSeriesOptions(this.processedOptions),this.processMiniChartSeriesOptions(this.processedOptions),(de(this.processedOptions)||function(t){const e=ce(t);return ue(t)&&"pie"!==e&&"donut"!==e}(this.processedOptions))&&null==(null==(i=this.processedOptions.legend)?void 0:i.enabled)&&(null!=(s=this.processedOptions).legend||(s.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),bt.isEnterprise||function(t){var e,i,s,n;const a=[],r=ne.get(ce(t));for(const{type:o,chartTypes:l,optionsKey:h,optionsInnerKey:c,identifier:d}of oe)if("unknown"===r||l.includes(r))if("root"===o||"legend"===o){const e=t[h];if(null==e)continue;c?e[c]&&(a.push(`${h}.${c}`),delete e[c]):(a.push(h),delete t[h])}else if("axis"===o){if(!("axes"in t)||null==(e=t.axes)||!e.some((t=>t.type===d)))continue;a.push(`axis[type=${d}]`),t.axes=t.axes.filter((t=>t.type!==d))}else if("axis-option"===o){if(!("axes"in t)||null==(i=t.axes)||!i.some((t=>t[h])))continue;a.push(`axis.${h}`),t.axes.forEach((t=>{t[h]&&delete t[h]}))}else if("series"===o){if(null==(s=t.series)||!s.some((t=>t.type===d)))continue;a.push(`series[type=${d}]`),t.series=t.series.filter((t=>t.type!==d))}else if("series-option"===o){if(null==(n=t.series)||!n.some((t=>t[h])))continue;a.push(`series.${h}`),t.series.forEach((t=>{t[h]&&delete t[h]}))}if(a.length){let e="ag-charts-enterprise",i="https://charts.ag-grid.com/javascript/installation/";"integrated"===t.mode&&(e="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",i="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),O.warnOnce([`unable to use these enterprise features as '${e}' has not been loaded:`,"",...a,"",`See: ${i}`].join("\n"))}}(this.processedOptions)}getOptions(){var t;return null!=(t=this.processedOptions)?t:{}}diffOptions(t){return be(t,this.processedOptions)}getSeriesThemeConfig(t){var e,i;return Se(null!=(i=null==(e=this.activeTheme)?void 0:e.config[t])?i:{})}getDefaultAxes(t){const e=this.optionsType(t),i=Le.cloneDefaultAxes(e);return Le.isDefaultAxisSwapNeeded(t)&&this.swapAxesPosition(i),i}optionsType(t){var e,i,s;return null!=(s=null==(i=null==(e=t.series)?void 0:e[0])?void 0:i.type)?s:"line"}sanityCheckAndCleanup(t){var e;this.deprecationWarnings(t),this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t),this.removeDisabledOptions(t),this.removeLeftoverSymbols(t),null!=(e=t.series)&&e.some((t=>"bullet"===t.type))&&null!=t.sync&&!1!==t.sync.enabled&&(O.warnOnce("bullet series cannot be synced, disabling synchronization."),delete t.sync)}swapAxesPosition(t){var e;if(de(t)){const[i,s]=null!=(e=t.axes)?e:[];t.axes=[m(f({},i),{position:s.position}),m(f({},s),{position:i.position})]}}processAxesOptions(t,e){"axes"in t&&(t.axes=t.axes.map((t=>{var i,s,n;const a=jt(null==(i=e[t.type])?void 0:i[t.position],e[t.type]),{crossLines:r}=a,o=y(a,["crossLines"]);t.crossLines&&(t.crossLines=qt(t.crossLines,r));const l=null==(s=o.gridLine)?void 0:s.style;null!=(n=t.gridLine)&&n.style&&null!=l&&l.length&&(t.gridLine.style=t.gridLine.style.map(((t,e)=>null!=t.stroke||null!=t.lineDash?jt(t,l.at(e%l.length)):t)));const h=jt(t,o);return y(h,["top","right","bottom","left"])})))}processSeriesOptions(t){const e=this.getDefaultSeriesType(t),i=this.getTooltipPositionDefaults(t),s=!(!Ft(t.theme)||!t.theme.palette),n={colourIndex:0,userPalette:s},a=t.series.map((t=>{var a;null!=t.type||(t.type=e);const r=null!=(a=this.getSeriesThemeConfig(t.type).series)?a:{},{innerLabels:o}=r,l=y(r,["innerLabels"]),h=Ts.has(t.type)?{colourIndex:0,userPalette:s}:n,c=this.getSeriesPalette(t.type,h),d=jt(this.getSeriesGroupingOptions(t),t,i,l,c);return d.innerLabels&&(d.innerLabels=qt(d.innerLabels,o)),this.activeTheme.templateTheme(d)}));t.series=this.setSeriesGroupingOptions(a)}processMiniChartSeriesOptions(t){var e,i;let s=null==(i=null==(e=t.navigator)?void 0:e.miniChart)?void 0:i.series;if(null==s)return;const n={colourIndex:0,userPalette:!(!Ft(t.theme)||!t.theme.palette)};s=s.map((t=>{var e;null!=t.type||(t.type="line");const i=null!=(e=this.getSeriesThemeConfig(t.type).series)?e:{},s=y(i,["innerLabels"]),a=jt(this.getSeriesGroupingOptions(t),t,s,this.getSeriesPalette(t.type,n));return this.activeTheme.templateTheme(a)})),t.navigator.miniChart.series=this.setSeriesGroupingOptions(s)}getSeriesPalette(t,e){const i=Le.getPaletteFactory(t),{colourIndex:s,userPalette:n}=e,{fills:a=[],strokes:r=[]}=this.activeTheme.palette;return null==i?void 0:i({userPalette:n,colorsCount:Math.max(a.length,r.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),takeColors:t=>(e.colourIndex+=t,{fills:ms(a,t,s),strokes:ms(r,t,s)})})}getSeriesGroupingOptions(t){const e=Le.isGroupable(t.type),i=Le.isStackable(t.type),s=Le.isStackedByDefault(t.type);t.grouped&&!e&&O.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!i&&O.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:n,stacked:a}=t;return a??(a=(s||null!=t.stackGroup)&&!(e&&n)),n??(n=!0),{stacked:i&&a,grouped:e&&n&&!(i&&a)}}setSeriesGroupingOptions(t){const e=this.getSeriesGrouping(t);Rs.create(!0,"opts")("setSeriesGroupingOptions() - series grouping: ",e);const i={},s=e.reduce(((t,e)=>{var i;return"default"===e.groupType||(null!=t[i=e.seriesType]||(t[i]=0),t[e.seriesType]+="stack"===e.groupType?1:e.series.length),t}),{});return e.flatMap((t=>{var e;switch(null!=i[e=t.seriesType]||(i[e]=0),t.groupType){case"stack":const e=i[t.seriesType]++;return t.series.map(((i,n)=>Object.assign(i,{seriesGrouping:{groupIndex:e,groupCount:s[t.seriesType],stackIndex:n,stackCount:t.series.length}})));case"group":return t.series.map((e=>Object.assign(e,{seriesGrouping:{groupIndex:i[t.seriesType]++,groupCount:s[t.seriesType],stackIndex:0,stackCount:0}})))}return t.series})).map((t=>y(t,["stacked","grouped"])))}getSeriesGroupId(t){var e;return t.stacked||t.grouped?[t.type,t.xKey,t.stacked?null!=(e=t.stackGroup)?e:"stacked":"grouped"].filter(Boolean).join("-"):"default-ag-charts-group"}getSeriesGrouping(t){const e=new Map;return t.reduce(((t,i)=>{const s=i.type;if(i.stacked||i.grouped){const n=this.getSeriesGroupId(i);if(!e.has(n)){const a={groupType:i.stacked?"stack":"group",seriesType:s,series:[]};e.set(n,a),t.push(a)}e.get(n).series.push(i)}else t.push({groupType:"default",seriesType:s,series:[i]});return t}),[])}getDefaultSeriesType(t){if(de(t))return"line";if(ue(t))return"pie";if(pe(t))return"treemap";if(ge(t))return"map-shape";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(t){var e;const i=null==(e=t.tooltip)?void 0:e.position;if(!zt(i))return;const{type:s,xOffset:n,yOffset:a}=i,r={};return Wt(s)&&Ut(M,s)&&(r.type=s),Kt(n)&&(r.xOffset=n),Kt(a)&&(r.yOffset=a),{tooltip:{position:r}}}deprecationWarnings(t){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach((e=>{let[i,s]=e;var n;null!=(n=t.series)&&n.some((t=>null!=t[i]))&&O.warnOnce(`Property [series.${i}] is deprecated, please use [series.${s}] and multiple series instead.`)}))}axesTypeIntegrity(t){var e;if("axes"in t){const i=null!=(e=t.axes)?e:[];for(const{type:e}of i)if(!fe(e)){delete t.axes;const i=Array.from(wt.publicKeys()).join(", ");O.warnOnce(`unknown axis type: ${e}; expected one of: ${i}`)}}}seriesTypeIntegrity(t){var e;const i=null!=(e=t.series)?e:[];t.series=i.filter((t=>{let{type:e}=t;if(null==e||function(t){return null!=t&&ne.has(t)}(e)||function(t){return oe.some((e=>"series"===e.type&&e.identifier===t))}(e))return!0;O.warnOnce(`unknown series type: ${e}; expected one of: ${ae.seriesTypes.join(", ")}`)}))}soloSeriesIntegrity(t){const e=t.series;if(e&&e.length>1&&e.some((t=>Le.isSolo(t.type)))){const i=this.optionsType(t);if(Le.isSolo(i))O.warn(`series[0] of type '${i}' is incompatible with other series types. Only processing series[0]`),t.series=e.slice(0,1);else{const{solo:i,nonSolo:s}=fs(e,(t=>Le.isSolo(t.type)?"solo":"nonSolo")),n=gs(i.map((t=>t.type))).join(", ");O.warn(`Unable to mix these series types with the lead series type: ${n}`),t.series=s}}}enableConfiguredOptions(t){we(this.userOptions,((t,e)=>{e&&"enabled"in e&&!e._enabledFromTheme&&null==t.enabled&&(e.enabled=!0)}),{skip:["data","theme"]},t),we(t,(t=>{null!=t._enabledFromTheme&&delete t._enabledFromTheme}),{skip:["data","theme"]})}removeDisabledOptions(t){we(t,(t=>{"enabled"in t&&!1===t.enabled&&Object.keys(t).forEach((e=>{"enabled"!==e&&delete t[e]}))}),{skip:["data","theme"]})}removeLeftoverSymbols(t){we(t,(t=>{if(t&&Ft(t))for(const[e,i]of Object.entries(t))Xt(i)&&delete t[e]}),{skip:["data"]})}specialOverridesDefaults(t){if(null!=t.window?Cs(t.window):typeof window<"u"?t.window=window:typeof global<"u"&&(t.window=global.window),null!=t.document?Ms(t.document):typeof document<"u"?t.document=document:typeof global<"u"&&(t.document=global.document),null==t.window)throw new Error("AG Charts - unable to resolve global window");if(null==t.document)throw new Error("AG Charts - unable to resolve global document");return t}};function Es(){return(t,e)=>{const i=[`Property [${t}] is deprecated.`,e].filter(Boolean).join(" ");O.warnOnce(i)}}function Ns(t,e){const i=Es(),s=null==e?void 0:e.default;return Lt(((e,n,a)=>(a!==s&&i(n.toString(),t),a)))}function Os(t,e){const i=Es();return Lt(((s,n,a)=>(a!==s[t]&&(i(n.toString(),`Use [${t}] instead.`),te(s,t,e?e(a):a)),Dt)),((e,s)=>(i(s.toString(),`Use [${t}] instead.`),Qt(e,t))))}var Is={};v(Is,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>An,fromToMotion:()=>En,staticFromToMotion:()=>Nn});var Ps=new Map;function Bs(){Ps.clear()}function _s(t){var e;const i=t.constructor,s=Object.hasOwn(i,"className")?i.className:i.name;if(!s)throw new Error(`The ${i} is missing the 'className' property.`);const n=(null!=(e=Ps.get(s))?e:0)+1;return Ps.set(s,n),`${s}-${n}`}var Fs="$interpolate",Gs=t=>null!=t[Fs];function zs(t,e,i){return Math.min(i,Math.max(t,e))}function Ws(t,e){const[i,s]=Vs(e);return zs(i,t,s)}function Vs(t){return t.length?[Math.min(...t),Math.max(...t)]:[]}function Ks(t){const[e,i]=Vs(t);return i-e}function Ys(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-10;return Math.abs(t-e)<i}function $s(t){return-1===Math.sign(t)||Object.is(t,-0)}function Us(t){const e=p(10,arguments.length>1&&void 0!==arguments[1]?arguments[1]:2);return Math.round(t*e)/e}function Xs(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const i=Math.floor(Math.log(Math.abs(t))/Math.LN10);return i>=0||!isFinite(i)?t.toFixed(e):t.toFixed(Math.abs(i)-1+e)}function Hs(t,e){return Math.floor(t%e+(t<0?e:0))}function js(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const[,i=""]=(Math.abs(t)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:e}).split(".");return i.length}function qs(t,e,i){const s={nearest:void 0,distanceSquared:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0};for(const n of i){const i=n.distanceSquared(t,e);if(0===i)return{nearest:n,distanceSquared:0};i<s.distanceSquared&&(s.nearest=n,s.distanceSquared=i)}return s}function Zs(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const{x:n,y:a}=i.transformPoint(t,e),r={nearest:void 0,distanceSquared:s};for(const o of i.children){const{nearest:t,distanceSquared:e}=o.nearestSquared(n,a,r.distanceSquared);if(0===e)return{nearest:t,distanceSquared:e};e<r.distanceSquared&&(r.nearest=t,r.distanceSquared=e)}return r}var Js=class t{constructor(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s}clone(){const{x:e,y:i,width:s,height:n}=this;return new t(e,i,s,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,e){if(this.containsPoint(t,e))return 0;const i=t-zs(this.x,t,this.x+this.width),s=e-zs(this.y,e,this.y+this.height);return i*i+s*s}static nearestBox(t,e,i){return qs(t,e,i)}shrink(t,e){const i=(t,e)=>{switch(t){case"top":this.y+=e;case"bottom":this.height-=e;break;case"left":this.x+=e;case"right":this.width-=e;break;case"vertical":this.y+=e,this.height-=2*e;break;case"horizontal":this.x+=e,this.width-=2*e;break;case void 0:this.x+=e,this.width-=2*e,this.y+=e,this.height-=2*e}};return"number"==typeof t?i(e,t):"object"==typeof t&&Object.entries(t).forEach((t=>{let[e,s]=t;return i(e,s)})),this}grow(t,e){if("number"==typeof t)this.shrink(-t,e);else{const e=f({},t);for(const t in e)e[t]*=-1;this.shrink(e)}return this}combine(t){const{x:e,y:i,width:s,height:n}=this;this.x=Math.min(e,t.x),this.y=Math.min(i,t.y),this.width=Math.max(e+s,t.x+t.width)-this.x,this.height=Math.max(i+n,t.y+t.height)-this.y}static merge(e){let i=1/0,s=1/0,n=-1/0,a=-1/0;return e.forEach((t=>{t.x<i&&(i=t.x),t.y<s&&(s=t.y),t.x+t.width>n&&(n=t.x+t.width),t.y+t.height>a&&(a=t.y+t.height)})),new t(i,s,n-i,a-s)}[Fs](e,i){return new t(this.x*(1-i)+e.x*i,this.y*(1-i)+e.y*i,this.width*(1-i)+e.width*i,this.height*(1-i)+e.height*i)}};Js.zero=new Js(0,0,0,0),Js.NaN=new Js(NaN,NaN,NaN,NaN);var Qs=Js,tn=(t=>(t[t.NONE=0]="NONE",t[t.TRIVIAL=1]="TRIVIAL",t[t.MINOR=2]="MINOR",t[t.MAJOR=3]="MAJOR",t))(tn||{});var en=function(){try{return new Function("return true"),!0}catch{return!1}}();function sn(t){const{changeCb:e,convertor:i}=t??{};return function(s,n){const a=`__${n}`;s[n]||(en&&null==e&&null==i?function(t,e,i,s){const{redraw:n=1,type:a="normal",checkDirtyOnAssignment:r=!1}=s??{},o=new Function("value",`\n        const oldValue = this.${i};\n        if (value !== oldValue) {\n            this.${i} = value;\n            ${"normal"===a?`this.markDirty(this, ${n});`:""}\n            ${"transform"===a?`this.markDirtyTransform(${n});`:""}\n            ${"path"===a?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===a?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${r?"if (value != null && value._dirty > 0) { this.markDirty(value, value._dirty); }":""}\n`),l=new Function(`return this.${i};`);Object.defineProperty(t,e,{set:o,get:l,enumerable:!0,configurable:!0})}(s,n,a,t):function(t,e,i,s){const{redraw:n=1,type:a="normal",changeCb:r,convertor:o,checkDirtyOnAssignment:l=!1}=s??{};Object.defineProperty(t,e,{set:function(t){const e=this[i];(t=o?o(t):t)!==e&&(this[i]=t,"normal"===a&&this.markDirty(this,n),"transform"===a&&this.markDirtyTransform(n),"path"===a&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,n)),"font"===a&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,n)),null==r||r(this)),l&&null!=t&&t._dirty>0&&this.markDirty(t,t._dirty)},get:function(){return this[i]},enumerable:!0,configurable:!0})}(s,n,a,t))}}var nn=class{constructor(){this._dirty=3}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},an=class t{get e(){return[...this.elements]}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,0,0,1,0,0];this.elements=t}setElements(t){const e=this.elements;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this}get identity(){const t=this.elements;return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]}AxB(t,e,i){const s=t[0]*e[0]+t[2]*e[1],n=t[1]*e[0]+t[3]*e[1],a=t[0]*e[2]+t[2]*e[3],r=t[1]*e[2]+t[3]*e[3],o=t[0]*e[4]+t[2]*e[5]+t[4],l=t[1]*e[4]+t[3]*e[5]+t[5];(i=i??t)[0]=s,i[1]=n,i[2]=a,i[3]=r,i[4]=o,i[5]=l}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(e){const i=new Array(6);return this.AxB(this.elements,e.elements,i),new t(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const r=e[4],o=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,new t([a,-s,-n,i,n*o-a*r,s*r-i*o])}inverseTo(t){const e=this.elements;let i=e[0],s=e[1],n=e[2],a=e[3];const r=e[4],o=e[5],l=1/(i*a-s*n);return i*=l,s*=l,n*=l,a*=l,t.setElements([a,-s,-n,i,n*o-a*r,s*r-i*o]),this}invertSelf(){const t=this.elements;let e=t[0],i=t[1],s=t[2],n=t[3];const a=t[4],r=t[5],o=1/(e*n-i*s);return e*=o,i*=o,s*=o,n*=o,t[0]=n,t[1]=-i,t[2]=-s,t[3]=e,t[4]=s*r-n*a,t[5]=i*a-e*r,this}transformPoint(t,e){const i=this.elements;return{x:t*i[0]+e*i[2]+i[4],y:t*i[1]+e*i[3]+i[5]}}transformBBox(t,e){const i=this.elements,s=i[0],n=i[1],a=i[2],r=i[3],o=.5*t.width,l=.5*t.height,h=t.x+o,c=t.y+l,d=Math.abs(o*s)+Math.abs(l*a),u=Math.abs(o*n)+Math.abs(l*r);return e||(e=new Qs(0,0,0,0)),e.x=h*s+c*a+i[4]-d,e.y=h*n+c*r+i[5]-u,e.width=d+d,e.height=u+u,e}toContext(t){if(this.identity)return;const e=this.elements;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}static flyweight(e){return t.instance.setElements(e.elements)}static updateTransformMatrix(t,e,i,s,n,a,r){const[o,l]=[0,0],h=e,c=i;let d,u;1===h&&1===c?(d=0,u=0):(d=null==(null==r?void 0:r.scalingCenterX)?o:null==r?void 0:r.scalingCenterX,u=null==(null==r?void 0:r.scalingCenterY)?l:null==r?void 0:r.scalingCenterY);const p=s,g=Math.cos(p),f=Math.sin(p);let m,y;0===p?(m=0,y=0):(m=null==(null==r?void 0:r.rotationCenterX)?o:null==r?void 0:r.rotationCenterX,y=null==(null==r?void 0:r.rotationCenterY)?l:null==r?void 0:r.rotationCenterY);const v=n,x=a,b=d*(1-h)-m,S=u*(1-c)-y;return t.setElements([g*h,f*h,-f*c,g*c,g*b-f*S+m+v,f*b+g*S+y+x]),t}static fromContext(e){const i=e.getTransform();return new t([i.a,i.b,i.c,i.d,i.e,i.f])}};an.instance=new an;var rn=an,on=(t=>(t[t.All=0]="All",t[t.None=1]="None",t))(on||{}),ln=class t extends nn{constructor(){let{isVirtual:e,tag:i,zIndex:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.serialNumber=t._nextSerialNumber++,this.id=_s(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new rn,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=e??!1,this.tag=i??NaN,this.zIndex=s??0}get datum(){var t,e;return null!=(e=this._datum)?e:null==(t=this._parent)?void 0:t.datum}get previousDatum(){return this._previousDatum}set datum(t){this._datum!==t&&(this._previousDatum=this._datum),this._datum=t}_setLayerManager(t){this._layerManager=t,this._debug=null==t?void 0:t.debug;for(const e of this._children)e._setLayerManager(t);for(const e of this._virtualChildren)e._setLayerManager(t)}get layerManager(){return this._layerManager}*ancestors(){let t=this;for(;t=t.parent;)yield t}*traverseUp(){yield this,yield*w(this.ancestors())}get parent(){return this._parent}get children(){return this._virtualChildren.length?this._children.concat(this._virtualChildren.flatMap((t=>t.children))):this._children}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(t,e){const i=e??Object.keys(t);for(const s of i)this[s]=t[s];return this}append(t){Array.isArray(t)||(t=[t]);for(const e of t){if(e.parent)throw new Error(`${e} already belongs to another parent: ${e.parent}.`);if(e.layerManager)throw new Error(`${e} already belongs to a scene: ${e.layerManager}.`);if(this.childSet[e.id])throw new Error(`Duplicate ${e.constructor.name} node: ${e}`);e.isVirtual?this._virtualChildren.push(e):this._children.push(e),this.childSet[e.id]=!0,e._parent=this,e._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(t){return this.append(t),t}removeChild(t){const e=()=>{throw new Error("The node to be removed is not a child of this node.")};if(t.parent!==this&&e(),t.isVirtual){const i=this._virtualChildren.indexOf(t);i<0&&e(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(t);i<0&&e(),this._children.splice(i,1)}return delete this.childSet[t.id],t._parent=void 0,t._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(t,3),t}calculateCumulativeMatrix(){this.computeTransformMatrix();const t=rn.flyweight(this.matrix);let e=this.parent;for(;e;)e.computeTransformMatrix(),t.preMultiplySelf(e.matrix),e=e.parent;return t}transformPoint(t,e){return this.calculateCumulativeMatrix().invertSelf().transformPoint(t,e)}inverseTransformPoint(t,e){return this.calculateCumulativeMatrix().transformPoint(t,e)}transformBBox(t){return this.calculateCumulativeMatrix().invertSelf().transformBBox(t)}inverseTransformBBox(t){return this.calculateCumulativeMatrix().transformBBox(t)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}containsPoint(t,e){return!1}pickNode(t,e){var i;if(!this.visible||1===this.pointerEvents||!this.containsPoint(t,e))return;const{children:s}=this;if(s.length>1e3)for(let n=s.length-1;n>=0;n--){const a=s[n],r=(null==(i=a.computeTransformedBBox())?void 0:i.containsPoint(t,e))?a.pickNode(t,e):void 0;if(r)return r}else if(s.length)for(let n=s.length-1;n>=0;n--){const i=s[n].pickNode(t,e);if(i)return i}else if(!this.isContainerNode)return this}findNodes(t){return this.children.flatMap((e=>e.findNodes(t)))}getCachedBBox(){var t;return null!=(t=this.cachedBBox)?t:Qs.zero}computeBBox(){}computeTransformedBBox(){const t=this.computeBBox();if(!t)return;this.computeTransformMatrix();const e=rn.flyweight(this.matrix);for(const i of this.ancestors())i.computeTransformMatrix(),e.preMultiplySelf(i.matrix);return e.transformBBox(t,t),t}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:t,scalingX:e,scalingY:i,rotation:s,translationX:n,translationY:a,scalingCenterX:r,scalingCenterY:o,rotationCenterX:l,rotationCenterY:h}=this;rn.updateTransformMatrix(t,e,i,s,n,a,{scalingCenterX:r,scalingCenterY:o,rotationCenterX:l,rotationCenterY:h}),this.dirtyTransform=!1}render(t){const{stats:e}=t;this._dirty=0,this.cachedBBox=this.computeBBox(),e&&e.nodesRendered++}clearBBox(t){const e=this.computeBBox();if(null==e)return;const{x:i,y:s,width:n,height:a}=e,r=this.transformPoint(i,s),o=this.transformPoint(i+n,s+a);t.clearRect(r.x,r.y,o.x-r.x,o.y-r.y)}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;this._dirty>e||this._dirty===e&&e===i||(this._dirty=e,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(t){const{force:e=!1,recursive:i=!0}=t??{};if(0!==this._dirty||e){if(this._dirty=0,!1!==i)for(const t of this._virtualChildren)t.markClean({force:e});if(!0===i)for(const t of this._children)t.markClean({force:e})}}onVisibleChange(){}get nodeCount(){let t=1,e=this._dirty>=0||this.dirtyTransform?1:0,i=this.visible?1:0;const s=s=>{const{count:n,visibleCount:a,dirtyCount:r}=s.nodeCount;t+=n,i+=a,e+=r};for(const n of this._children)s(n);for(const n of this._virtualChildren)s(n);return{count:t,visibleCount:i,dirtyCount:e}}onZIndexChange(){this.parent&&(this.parent.dirtyZIndex=!0)}};ln._nextSerialNumber=0,x([sn({type:"transform"})],ln.prototype,"scalingX",2),x([sn({type:"transform"})],ln.prototype,"scalingY",2),x([sn({type:"transform"})],ln.prototype,"scalingCenterX",2),x([sn({type:"transform"})],ln.prototype,"scalingCenterY",2),x([sn({type:"transform"})],ln.prototype,"rotationCenterX",2),x([sn({type:"transform"})],ln.prototype,"rotationCenterY",2),x([sn({type:"transform"})],ln.prototype,"rotation",2),x([sn({type:"transform"})],ln.prototype,"translationX",2),x([sn({type:"transform"})],ln.prototype,"translationY",2),x([sn({redraw:3,changeCb:t=>t.onVisibleChange()})],ln.prototype,"visible",2),x([sn({redraw:1,changeCb:t=>t.onZIndexChange()})],ln.prototype,"zIndex",2),x([sn({redraw:1,changeCb:t=>t.onZIndexChange()})],ln.prototype,"zIndexSubOrder",2);var hn=ln,cn=t=>{const e=t<0?-1:1,i=Math.abs(t);return i<=.04045?t/12.92:e*p((i+.055)/1.055,2.4)},dn=t=>{const e=t<0?-1:1,i=Math.abs(t);return i>.0031308?e*(1.055*p(i,1/2.4)-.055):12.92*t},un=class t{constructor(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=zs(0,t||0,1),this.g=zs(0,e||0,1),this.b=zs(0,i||0,1),this.a=zs(0,s||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!t.parseHex(e):e.indexOf("rgb")>=0?!!t.stringToRgba(e):!!t.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return t.fromHexString(e);const i=t.nameToHex[e.toLowerCase()];if(i)return t.fromHexString(i);if(e.indexOf("rgb")>=0)return t.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static tryParseFromString(e){try{return t.fromString(e)}catch{return O.warnOnce(`invalid color string: '${e}'.`),t.fromArray([0,0,0])}}static parseHex(t){let e;switch((t=t.replace(/ /g,"").slice(1)).length){case 6:case 8:e=[];for(let i=0;i<t.length;i+=2)e.push(parseInt(`${t[i]}${t[i+1]}`,16));break;case 3:case 4:e=t.split("").map((t=>parseInt(t,16))).map((t=>t+16*t))}if((null==e?void 0:e.length)>=3&&e.every((t=>t>=0)))return 3===e.length&&e.push(255),e}static fromHexString(e){const i=t.parseHex(e);if(i){const[e,s,n,a]=i;return new t(e/255,s/255,n/255,a/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(t){let[e,i]=[NaN,NaN];for(let r=0;r<t.length;r++){const s=t[r];if(e||"("!==s){if(")"===s){i=r;break}}else e=r}const s=e&&i&&t.substring(e+1,i);if(!s)return;const n=s.split(","),a=[];for(let r=0;r<n.length;r++){const t=n[r];let e=parseFloat(t);if(isNaN(e))return;t.indexOf("%")>=0?(e=zs(0,e,100),e/=100):3===r?e=zs(0,e,1):(e=zs(0,e,255),e/=255),a.push(e)}return a}static fromRgbaString(e){const i=t.stringToRgba(e);if(i){if(3===i.length)return new t(i[0],i[1],i[2]);if(4===i.length)return new t(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(4===e.length)return new t(e[0],e[1],e[2],e[3]);if(3===e.length)return new t(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=t.HSBtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static fromHSL(e,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=t.HSLtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static fromOKLCH(e,i,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const a=t.OKLCHtoRGB(e,i,s);return new t(a[0],a[1],a[2],n)}static padHex(t){return 1===t.length?"0"+t:t}toHexString(){let e="#"+t.padHex(Math.round(255*this.r).toString(16))+t.padHex(Math.round(255*this.g).toString(16))+t.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=t.padHex(Math.round(255*this.a).toString(16))),e}toRgbaString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const e=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,t);return 1!==this.a?(e.push(Math.round(this.a*i)/i),`rgba(${e.join(", ")})`):`rgb(${e.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return t.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,e,i){const s=cn(t),n=cn(e),a=cn(i),r=Math.cbrt(.4122214708*s+.5363325363*n+.0514459929*a),o=Math.cbrt(.2119034982*s+.6806995451*n+.1073969566*a),l=Math.cbrt(.0883024619*s+.2817188376*n+.6299787005*a),h=.2104542553*r+.793617785*o-.0040720468*l,c=1.9779984951*r-2.428592205*o+.4505937099*l,d=.0259040371*r+.7827717662*o-.808675766*l,u=180*Math.atan2(d,c)/Math.PI;return[h,Math.hypot(c,d),u>=0?u:u+360]}static OKLCHtoRGB(t,e,i){const s=t,n=e*Math.cos(i*Math.PI/180),a=e*Math.sin(i*Math.PI/180),r=p(s+.3963377774*n+.2158037573*a,3),o=p(s-.1055613458*n-.0638541728*a,3),l=p(s-.0894841775*n-1.291485548*a,3),h=-1.2684380046*r+2.6097574011*o-.3413193965*l,c=-.0041960863*r-.7034186147*o+1.707614701*l;return[dn(4.0767416621*r-3.3077115913*o+.2309699292*l),dn(h),dn(c)]}static RGBtoHSL(t,e,i){const s=Math.min(t,e,i),n=Math.max(t,e,i),a=(n+s)/2;let r,o;if(n===s)r=NaN,o=0;else{const l=n-s;o=a>.5?l/(2-n-s):l/(n+s),r=n===t?(e-i)/l+(e<i?6:0):n===e?(i-t)/l+2:(t-e)/l+4,r*=60}return[r,o,a]}static HSLtoRGB(t,e,i){if(0===e)return[i,i,i];const s=i<.5?i*(1+e):i+e-i*e,n=2*i-s;function a(t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(s-n)*t:t<.5?s:t<2/3?n+(s-n)*(2/3-t)*6:n}return[a(t/360+1/3),a(t/360),a(t/360-1/3)]}static RGBtoHSB(t,e,i){const s=Math.min(t,e,i),n=Math.max(t,e,i);let a=NaN;if(s!==n){const r=n-s,o=(n-t)/r,l=(n-e)/r,h=(n-i)/r;a=t===n?h-l:e===n?2+o-h:4+l-o,a/=6,a<0&&(a+=1)}return[360*a,0===n?0:(n-s)/n,n]}static HSBtoRGB(t,e,i){isNaN(t)&&(t=0),t=(t%360+360)%360/360;let s=0,n=0,a=0;if(0===e)s=n=a=i;else{const r=6*(t-Math.floor(t)),o=r-Math.floor(r),l=i*(1-e),h=i*(1-e*o),c=i*(1-e*(1-o));switch(r|0){case 0:s=i,n=c,a=l;break;case 1:s=h,n=i,a=l;break;case 2:s=l,n=i,a=c;break;case 3:s=l,n=h,a=i;break;case 4:s=c,n=l,a=i;break;case 5:s=i,n=l,a=h}}return[s,n,a]}derive(e,i,s,n){const a=t.RGBtoHSB(this.r,this.g,this.b);let r=a[2];0==r&&s>1&&(r=.05);const o=((a[0]+e)%360+360)%360,l=zs(0,a[1]*i,1);r=zs(0,r*s,1);const h=zs(0,this.a*n,1),c=t.HSBtoRGB(o,l,r);return c.push(h),t.fromArray(c)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,i){const s=t.tryParseFromString(e),n=t.tryParseFromString(i);return e=>{const i=(t,i)=>t*(1-e)+i*e;return new t(i(s.r,n.r),i(s.g,n.g),i(s.b,n.b),i(s.a,n.a)).toString()}}};un.didDebug=!1,un.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});var pn=un;function gn(t,e){return i=>Number(t)*(1-i)+Number(e)*i}var fn={};v(fn,{easeIn:()=>yn,easeInOut:()=>xn,easeInOutQuad:()=>kn,easeInQuad:()=>bn,easeOut:()=>vn,easeOutQuad:()=>Sn,inverseEaseOut:()=>wn,linear:()=>mn});var mn=t=>t,yn=t=>1-Math.cos(t*Math.PI/2),vn=t=>Math.sin(t*Math.PI/2),xn=t=>-(Math.cos(t*Math.PI)-1)/2,bn=t=>t*t,Sn=t=>1-p(1-t,2),kn=t=>t<.5?2*t*t:1-p(-2*t+2,2)/2,wn=t=>2*Math.asin(t)/Math.PI,Dn=.2,Mn=["initial","remove","update","add","trailing","end","none"],Cn={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:Dn,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1.2,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},Ln=(t=>(t.Loop="loop",t.Reverse="reverse",t))(Ln||{});function Rn(t){return function(t){return t.every((t=>t instanceof hn))}(t)?{nodes:t,selections:[]}:{nodes:[],selections:t}}var Tn=class{constructor(t){var e,i,s,n,a,r,o;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=t.id,this.groupId=t.groupId,this.autoplay=null==(e=t.autoplay)||e,this.ease=null!=(i=t.ease)?i:mn,this.phase=t.phase;const l=null!=(s=t.duration)?s:Cn[this.phase].animationDuration;this.duration=l*t.defaultDuration,this.delay=(null!=(n=t.delay)?n:0)*t.defaultDuration,this.onComplete=t.onComplete,this.onPlay=t.onPlay,this.onStop=t.onStop,this.onUpdate=t.onUpdate,this.interpolate=this.createInterpolator(t.from,t.to),this.from=t.from,!0===t.skip&&(null==(a=this.onUpdate)||a.call(this,t.to,!1,this),null==(r=this.onStop)||r.call(this,this),null==(o=this.onComplete)||o.call(this,this),this.isComplete=!0),!1!==t.collapsable&&(this.duration=this.checkCollapse(t,this.duration))}checkCollapse(t,e){return t.from===t.to?0:"object"==typeof t.from&&be(t.from,t.to)?e:0}play(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e,i;this.isPlaying||this.isComplete||(this.isPlaying=!0,null==(e=this.onPlay)||e.call(this,this),this.autoplay&&(this.autoplay=!1,t&&(null==(i=this.onUpdate)||i.call(this,this.from,!0,this))))}pause(){this.isPlaying=!1}stop(){var t;this.isPlaying=!1,this.isComplete||(this.isComplete=!0,null==(t=this.onStop)||t.call(this,this))}update(t){var e,i;if(this.isComplete)return t;!this.isPlaying&&this.autoplay&&this.play(!0);const s=this.elapsed;if(this.elapsed+=t,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);null==(e=this.onUpdate)||e.call(this,n,!1,this);const a=this.delay+this.duration;return this.elapsed>=a?(this.stop(),this.isComplete=!0,null==(i=this.onComplete)||i.call(this,this),t-(a-s)):0}get delta(){return this.ease(zs(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(t,e){if("object"!=typeof e||Gs(e))return this.interpolateValue(t,e);const i=[];for(const s in e){const n=this.interpolateValue(t[s],e[s]);null!=n&&i.push([s,n])}return t=>{const e={};for(const[s,n]of i)e[s]=n(t);return e}}interpolateValue(t,e){if(void 0!==t&&void 0!==e){if(Gs(t))return i=>t[Fs](e,i);try{switch(typeof t){case"number":return gn(t,e);case"string":return function(t,e){if("string"==typeof t)try{t=pn.fromString(t)}catch{t=pn.fromArray([0,0,0])}if("string"==typeof e)try{e=pn.fromString(e)}catch{e=pn.fromArray([0,0,0])}const i=gn(t.r,e.r),s=gn(t.g,e.g),n=gn(t.b,e.b),a=gn(t.a,e.a);return t=>pn.fromArray([i(t),s(t),n(t),a(t)]).toRgbaString()}(t,e)}}catch{}throw new Error(`Unable to interpolate values: ${t}, ${e}`)}}},An={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function En(t,e,i,s,n,a,r){const{fromFn:o,toFn:l,intermediateFn:h}=n,{nodes:c,selections:d}=Rn(s),u=(s,n)=>{var c;let d,u=0,p=0;for(const g of n){const m=s[u]===g,v={last:p>=n.length-1,lastLive:u>=s.length-1,prev:n[p-1],prevFromProps:d,prevLive:s[u-1],next:n[p+1],nextLive:s[u+(m?1:0)]},x=`${t}_${e}_${g.id}`;i.stopByAnimationId(x);let b="unknown";m?a&&r&&(b=On(g,g.datum,a,r)):b="removed";const S=o(g,g.datum,b,v),{phase:k,start:w,finish:D,delay:M,duration:C}=S,L=y(S,["phase","start","finish","delay","duration"]),R=l(g,g.datum,b,v),{phase:T,start:A,finish:E,delay:N,duration:O}=R,I=y(R,["phase","start","finish","delay","duration"]),P=null==D&&null==E;i.animate({id:x,groupId:t,phase:null!=(c=k??T)?c:"update",duration:C??O,delay:M??N,from:L,to:I,ease:vn,collapsable:P,onPlay:()=>{g.setProperties(f(f({},w),A))},onUpdate(t){g.setProperties(t),h&&g.setProperties(h(g,g.datum,b,v))},onStop:()=>{g.setProperties(f(f(f(f(f(f({},w),A),L),I),D),E))}}),m&&u++,p++,d=L}};let p=0;for(const g of d){const s=g.nodes();u(s.filter((t=>!g.isGarbage(t))),s),i.animate({id:`${t}_${e}_selection_${p}`,groupId:t,phase:"end",from:0,to:1,ease:vn,onStop(){g.cleanup()}}),p++}u(c,c)}function Nn(t,e,i,s,n,a,r){const{nodes:o,selections:l}=Rn(s),{start:h,finish:c,phase:d}=r,u=null==c;i.animate({id:`${t}_${e}`,groupId:t,phase:d??"update",from:n,to:a,ease:vn,collapsable:u,onPlay:()=>{if(h){for(const t of o)t.setProperties(h);for(const t of l)for(const e of t.nodes())e.setProperties(h)}},onUpdate(t){for(const e of o)e.setProperties(t);for(const e of l)for(const i of e.nodes())i.setProperties(t)},onStop:()=>{for(const t of o)t.setProperties(f(f({},a),c));for(const t of l)for(const e of t.nodes())e.setProperties(f(f({},a),c))}})}function On(t,e,i,s){const n=i(t,e);return s.added.has(n)?"added":"updated"}var In=2*Math.PI;function Pn(t){return t%=In,t+=In,t%=In}function Bn(t){return t%=In,(t+=In)!==In&&(t%=In),t}function _n(t){return(t%=In)<-Math.PI?t+=In:t>=Math.PI&&(t-=In),t}function Fn(t,e,i){const s=Pn(t),n=Pn(e),a=Bn(i);return n<=a?n<=s&&s<=a:n<=s||s<=a}function Gn(t){return t/180*Math.PI}function zn(t){return t/Math.PI*180}function Wn(t,e){return t=Pn(t),(e=Pn(e))-t+(t>e?2*Math.PI:0)}var Vn=(t,e)=>{const i=Symbol(String(e));t[i]=void 0,Object.defineProperty(t,e,{get(){return this[i]},set(t){this[i]!==t&&(this[i]=t,this.invalid=!0)},enumerable:!0,configurable:!1})},Kn=class{constructor(){this.type="band",this.invalid=!0,this.interval=void 0,this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._step=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&O.warnOnce("Expected update to not invalidate scale"))}set domain(t){this.invalid=!0;const e=[];this.index=new Map;const i=this.index;t.forEach((t=>{void 0===this.getIndex(t)&&i.set(t,e.push(t)-1)})),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();let{interval:t=1}=this;"number"!=typeof t&&(t=Number(t));const e=Math.abs(Math.round(t));return this._domain.filter(((t,i)=>i%e===0))}convert(t){this.refresh();const e=this.getIndex(t);if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}invert(t){this.refresh();const e=this.ordinalRange.findIndex((e=>e===t));return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=zs(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=zs(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=zs(0,t,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(0===t)return;const e=this.round,i=this._paddingInner,s=this._paddingOuter,[n,a]=this.range,r=a-n,o=r/Math.max(1,t+2*s-i),l=e?Math.floor(o):o,h=n+(r-l*(t-i))/2,c=e?Math.round(h):h,d=l*(1-i),u=e?Math.round(d):d,p=o*(1-i),g=[];for(let f=0;f<t;f++)g.push(c+l*f);this._bandwidth=u,this._rawBandwidth=p,this._step=l,this.ordinalRange=g}getIndex(t){if(!(t instanceof Date))return this.index.get(t);const e=t.valueOf();let i=0;for(const s of this.index.keys()){if(s instanceof Date&&s.valueOf()===e)return i;i++}}};function Yn(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{optional:i=!1,property:s}=e;return Lt(((n,a,r)=>{var o;const l=m(f({},e),{target:n,property:a});if(i&&typeof r>"u"||t(r,l))return ve(n[a])&&!ve(r)?(n[a].set(r),n[a]):r;const h=s??String(a).replace(/^_*/,""),c=null!=(o=n.constructor.className)?o:n.constructor.name.replace(/Properties$/,"");let d=za(r);if(null!=d&&d.length>50){const t=d.length-50;d=d.slice(0,50)+`... (+${t} characters)`}return O.warn(`Property [${h}] of [${c}] cannot be set to [${d}]${t.message?`; expecting ${Fa(t,l)}`:""}, ignoring.`),Dt}),void 0,{optional:i})}x([Vn],Kn.prototype,"interval",2),x([Vn],Kn.prototype,"range",2),x([Vn],Kn.prototype,"round",2);var $n,Un=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const s=[];return _a(((t,i)=>(s.length=0,e.every((e=>{const n=e(t,i);return n||s.push(Fa(e,i)),n})))),(()=>s.filter(Boolean).join(" AND ")))},Xn=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _a(((t,i)=>e.some((e=>e(t,i)))),(t=>e.map(function(t){return e=>Fa(e,t)}(t)).filter(Boolean).join(" OR ")))},Hn=Ga(_a(((t,e)=>ve(t)||Ft(t)&&ve(e.target[e.property])),"a properties object")),jn=Ga(_a((t=>Ft(t)),"an object")),qn=_a(Ot,"a boolean"),Zn=_a(_t,"a function"),Jn=_a(Wt,"a string"),Qn=($n=_a(Kt,"a number"),Object.assign($n,{restrict(){let{min:t,max:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=["a number"],s=Vt(t),n=Vt(e);return s&&n?i.push(`between ${t} and ${e} inclusive`):s?i.push(`greater than or equal to ${t}`):n&&i.push(`less than or equal to ${e}`),_a((i=>Kt(i)&&(!s||i>=t)&&(!n||i<=e)),i.join(" "))}})),ta=_a((t=>Vt(t)&&isNaN(t)),"NaN"),ea=Qn.restrict({min:0}),ia=Qn.restrict({min:0,max:1}),sa=Qn.restrict({min:-360,max:360}),na=Xn(Qn,ta),aa=function(t){return Object.assign(t,{restrict(){let{length:t,minLength:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i="an array";return Vt(e)&&e>0?i="a non-empty array":Vt(t)&&(i=`an array of length ${t}`),_a((i=>Nt(i)&&(!Vt(t)||i.length===t)&&(!Vt(e)||i.length>=e)),i)}})}(_a(Nt,"an array")),ra=(t,e)=>_a(((e,i)=>Nt(e)&&e.every((e=>t(e,i)))),(t=>{var i;const s=null!=(i=Fa(aa,t))?i:"";return e?`${s} of ${e}`:s})),oa=t=>Kt(t)||Pt(t),la=t=>_a(((e,i)=>!oa(e)||!oa(i.target[t])||e<i.target[t]),`to be less than ${t}`),ha=t=>_a(((e,i)=>!oa(e)||!oa(i.target[t])||e>i.target[t]),`to be greater than ${t}`),ca=_a(Pt,"Date object"),da=Xn(ca,ea),ua="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",pa=_a((t=>Wt(t)&&pn.validColorString(t)),`color String. ${ua}`),ga=_a(ra(pa),`color strings. ${ua}`),fa=ra(qn,"boolean values"),ma=ra(Qn,"numbers"),ya=ra(Jn,"strings"),va=_a(ra(ca),"Date objects"),xa=_a(ra(Hn),"objects"),ba=Ia(["butt","round","square"],"a line cap"),Sa=Ia(["round","bevel","miter"],"a line join"),ka=_a(ra(ea),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),wa=Ia(["top","right","bottom","left"],"a position"),Da=Ia(["normal","italic","oblique"],"a font style"),Ma=Xn(Ia(["normal","bold","bolder","lighter"],"a font weight"),Qn.restrict({min:1,max:1e3})),Ca=Ia(["never","always","hyphenate","on-space"],"a text wrap strategy"),La=Ia(["left","center","right"],"a text align"),Ra=Ia(["top","middle","bottom"],"a vertical align"),Ta=Ia(["ellipsis","hide"],"an overflow strategy"),Aa=Ia(["horizontal","vertical"],"a direction"),Ea=Ia(["inside","outside"],"a placement"),Na=Xn(Ia(["exact","nearest"],"interaction range"),Qn),Oa=Ia(["top","bottom","left","right"]);function Ia(t){return _a((e=>t.includes(e)),`${arguments.length>1&&void 0!==arguments[1]?arguments[1]:"a"} keyword such as ${function(t){const e=t.map((t=>`'${t}'`));if(1===e.length)return e[0];const i=e.pop();return`${e.join(", ")} or ${i}`}(t)}`)}var Pa=Xn(Un(Qn.restrict({min:1}),la("maxSpacing")),ta),Ba=Xn(Un(Qn.restrict({min:1}),ha("minSpacing")),ta);function _a(t,e){return t.message=e,t}function Fa(t,e){return _t(t.message)?t.message(e):t.message}function Ga(t){return Object.assign(t,{restrict:e=>_a((t=>t instanceof e),(i=>{var s;return null!=(s=Fa(t,i))?s:`an instance of ${e.name}`}))})}function za(t){if("number"==typeof t){if(isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity"}return JSON.stringify(t)}var Wa=(t=>(t.X="x",t.Y="y",t))(Wa||{}),Va={constructedArrays:new WeakMap};function Ka(t,e){var i;null==(i=Va.constructedArrays)||i.set(t,e)}var Ya=class t{constructor(e,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=t.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=e,this.range=i}static is(e){return e instanceof t}transform(t){return t}transformInvert(t){return t}calcBandwidth(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const{range:e}=this,i=this.getDomain(),s=Math.abs(e[1]-e[0]),n=Math.abs(i[1]-i[0])/t+1,a=Math.floor(s),r=Math.min(n,a);return s/Math.max(1,r)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,e){var i;const s=null!=(i=null==e?void 0:e.clampMode)?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const n=this.getDomain().map((t=>this.transform(t))),[a,r]=n,{range:o}=this,[l,h]=o;if(t=this.transform(t),"clamped"===s){const[e,i]=Vs(n.map(Number));if(Number(t)<e)return l;if(Number(t)>i)return h}return a===r?(l+h)/2:t===a?l:t===r?h:l+(Number(t)-Number(a))/(Number(r)-Number(a))*(h-l)}invert(t){this.refresh();const e=this.getDomain().map((t=>this.transform(t))),[i,s]=e,{range:n}=this,[a,r]=n,o=a>r;let l;return t<(o?r:a)?o?s:i:t>(o?a:r)?o?i:s:(l=a===r?this.toDomain((Number(i)+Number(s))/2):this.toDomain(Number(i)+(t-a)/(r-a)*(Number(s)-Number(i))),this.transformInvert(l))}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&O.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const[t,e]=this.range;return Math.abs(e-t)}};Ya.defaultTickCount=5,Ya.defaultMaxTickCount=6,x([Vn],Ya.prototype,"domain",2),x([Vn],Ya.prototype,"range",2),x([Vn],Ya.prototype,"nice",2),x([Vn],Ya.prototype,"interval",2),x([Vn],Ya.prototype,"tickCount",2),x([Vn],Ya.prototype,"minTickCount",2),x([Vn],Ya.prototype,"maxTickCount",2);var $a=Ya,Ua={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function Xa(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date(t.getFullYear(),0,1);const i=t.getTimezoneOffset()-e.getTimezoneOffset(),s=t.getTime()-e.getTime()+6e4*i;return Math.floor(s/864e5)}function Ha(t,e){const i=(e-new Date(t.getFullYear(),0,1).getDay()+7)%7,s=new Date(t.getFullYear(),0,i+1);return s<=t?Math.floor(Xa(t,s)/7)+1:0}function ja(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.getFullYear();const i=new Date(e,0,1).getDay(),s=new Date(e,0,(4-i+7)%7-3+1);return s<=t?Math.floor(Xa(t,s)/7)+1:ja(t,e-1)}var qa={a:t=>Ua.shortDays[t.getDay()],A:t=>Ua.days[t.getDay()],b:t=>Ua.shortMonths[t.getMonth()],B:t=>Ua.months[t.getMonth()],c:"%x, %X",d:(t,e)=>Ja(t.getDate(),2,e??"0"),e:"%_d",f:(t,e)=>Ja(1e3*t.getMilliseconds(),6,e??"0"),H:(t,e)=>Ja(t.getHours(),2,e??"0"),I:(t,e)=>{const i=t.getHours()%12;return 0===i?"12":Ja(i,2,e??"0")},j:(t,e)=>Ja(Xa(t)+1,3,e??"0"),m:(t,e)=>Ja(t.getMonth()+1,2,e??"0"),M:(t,e)=>Ja(t.getMinutes(),2,e??"0"),L:(t,e)=>Ja(t.getMilliseconds(),3,e??"0"),p:t=>t.getHours()<12?"AM":"PM",Q:t=>String(t.getTime()),s:t=>String(Math.floor(t.getTime()/1e3)),S:(t,e)=>Ja(t.getSeconds(),2,e??"0"),u:t=>{let e=t.getDay();return e<1&&(e+=7),String(e%7)},U:(t,e)=>Ja(Ha(t,0),2,e??"0"),V:(t,e)=>Ja(ja(t),2,e??"0"),w:(t,e)=>Ja(t.getDay(),2,e??"0"),W:(t,e)=>Ja(Ha(t,1),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(t,e)=>Ja(t.getFullYear()%100,2,e??"0"),Y:(t,e)=>Ja(t.getFullYear(),4,e??"0"),Z:t=>function(t){const e=t.getTimezoneOffset(),i=Math.abs(e);return`${e>0?"-":"+"}${Ja(Math.floor(i/60),2,"0")}${Ja(Math.floor(i%60),2,"0")}`}(t),"%":()=>"%"},Za={_:" ",0:"0","-":""};function Ja(t,e,i){const s=String(Math.floor(t));return s.length>=e?s:`${i.repeat(e-s.length)}${s}`}function Qa(t){const e=[];for(;t.length>0;){let i=t.indexOf("%");if(0!==i){const s=i>0?t.substring(0,i):t;e.push(s)}if(i<0)break;const s=t[i+1],n=Za[s];null!=n&&i++;const a=t[i+1],r=qa[a];if("function"==typeof r)e.push([r,n]);else if("string"==typeof r){const t=Qa(r);e.push([t,n])}else e.push(`${n??""}${a}`);t=t.substring(i+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map((t=>"string"==typeof t?t:t[0](i,t[1]))).join("")}}var tr=(t=>(t[t.MILLISECOND=0]="MILLISECOND",t[t.SECOND=1]="SECOND",t[t.MINUTE=2]="MINUTE",t[t.HOUR=3]="HOUR",t[t.WEEK_DAY=4]="WEEK_DAY",t[t.SHORT_MONTH=5]="SHORT_MONTH",t[t.MONTH=6]="MONTH",t[t.SHORT_YEAR=7]="SHORT_YEAR",t[t.YEAR=8]="YEAR",t))(tr||{}),er={0:".%L",1:":%S",2:"%I:%M",3:"%I %p",4:"%a",5:"%b %d",6:"%B",7:"%y",8:"%Y"};function ir(t){return t instanceof Date?t.getTime():t}function sr(t){const e=nr(t);return t=>Qa(e)(t)}function nr(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=8;const i=t=>{t<e&&(e=t)};for(const o of t){i(ar(o))}const s=ir(t[0]),n=ir(t.at(-1)),a=new Date(s).getFullYear(),r=new Date(n).getFullYear()-a>0;return rr(e,r,t)}function ar(t){return X.floor(t)<t?0:q.floor(t)<t?1:Q.floor(t)<t?2:et.floor(t)<t?3:ut.floor(t)<t?ct.floor(t)<t?4:5:gt.floor(t)<t?6:8}function rr(t,e,i){let s=[er[t]],n=0;const a=ir(i[0]),r=ir(i.at(-1)),o=Math.abs(r-a);switch(t){case 1:o/G>1&&s.push(er[2]);case 2:o/z>1&&s.push(er[3]);case 3:n=s.length,o/W>1&&s.push(er[4]);case 4:if(o/V>1||e){const t=s.indexOf(er[4]);t>-1&&s.splice(t,1,er[5])}case 5:case 6:(o/Y>1||e)&&s.push(er[8])}return n<s.length&&(s=[...s.slice(0,n),s.slice(n).join(" ")]),n>0&&(s=[...s.slice(0,n).reverse(),...s.slice(n)],n<s.length&&s.splice(n,0," ")),s.join("")}var or=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object.assign(e,{fractionDigits:t})};function lr(t,e,i,s,n){if(i<2)return dr(t,e,e-t);const a=cr(t,e,i,s,n);return isNaN(a)?or(0):dr(t=Math.ceil(t/a)*a,e=Math.floor(e/a)*a,a)}var hr=[1,2,5,10];function cr(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const a=Math.abs(e-t),r=a/i,o=Math.floor(Math.log10(r)),l=Math.pow(10,o),h=hr.map((t=>{const e=t*l,r=Math.ceil(a/e);return{multiplier:t,isWithinBounds:r>=s&&r<=n,diffCount:Math.abs(r-i)}})).sort(((t,e)=>t.isWithinBounds!==e.isWithinBounds?t.isWithinBounds?-1:1:t.diffCount-e.diffCount))[0].multiplier;return!h||isNaN(h)?NaN:h*l}function dr(t,e,i){const s=Math.min(t,e),n=Math.max(t,e),a=js(i),r=Math.pow(10,a),o=Math.ceil((n-s)/i),l=or(a);for(let h=0;h<=o;h++){const t=s+i*h;l.push(Math.round(t*r)/r)}return l}function ur(t){let{start:e,stop:i,interval:s,count:n,availableRange:a}=t;return n??(n=(i-e)/("number"==typeof s?s:1)),n>=a&&(O.warn("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}var pr=class t extends $a{constructor(){super([],[0,1]),this.type="time"}toDomain(t){return new Date(t)}static getTickInterval(e){let i,s,{start:n,stop:a,count:r,minCount:o,maxCount:l}=e;const h=r??$a.defaultTickCount,c=Math.abs(a-n)/Math.max(h,1);let d=0;for(;d<t.tickIntervals.length&&c>t.tickIntervals[d][2];)d++;if(0===d)s=Math.max(cr(n,a,h,o,l),1),i=_;else if(d===t.tickIntervals.length){s=cr(n/Y,a/Y,h,o,l),i=gt}else{const e=c-t.tickIntervals[d-1][2]<t.tickIntervals[d][2]-c?d-1:d;[i,s]=t.tickIntervals[e]}return i.every(s)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[e,i]=this.getDomain().map(ir),s=Math.min(e,i),n=Math.max(e,i),{interval:a,nice:r,tickCount:o,minTickCount:l,maxTickCount:h}=this;if(void 0!==a){const e=this.getPixelRange();return t.getTicksForInterval({start:s,stop:n,interval:a,availableRange:e})??t.getDefaultTicks({start:s,stop:n,tickCount:o,minTickCount:l,maxTickCount:h})}if(r){if(2===o)return this.niceDomain;if(1===o)return this.niceDomain.slice(0,1)}return t.getDefaultTicks({start:s,stop:n,tickCount:o,minTickCount:l,maxTickCount:h})}static getDefaultTicks(e){let{start:i,stop:s,tickCount:n,minTickCount:a,maxTickCount:r}=e;const o=t.getTickInterval({start:i,stop:s,count:n,minCount:a,maxCount:r});return o?o.range(new Date(i),new Date(s)):[]}static getTicksForInterval(e){let{start:i,stop:s,interval:n,availableRange:a}=e;if(!n)return[];if(n instanceof I){const t=n.range(new Date(i),new Date(s));return ur({start:i,stop:s,interval:n,count:t.length,availableRange:a})?void 0:t}const r=Math.abs(n);if(ur({start:i,stop:s,interval:r,availableRange:a}))return;const o=[...t.tickIntervals];o.reverse();const l=o.find((t=>r%t[2]===0));if(l)return l[0].every(r/(l[2]/l[1])).range(new Date(i),new Date(s));let h=new Date(i);const c=new Date(s),d=[];for(;h<=c;)d.push(h),h=new Date(h),h.setMilliseconds(h.getMilliseconds()+r);return d}tickFormat(t){let{ticks:e,specifier:i}=t;return null==i?sr(e):Qa(i)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[t,e]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(t,e);const[i,s]=this.niceDomain;if(ir(t)===ir(i)&&ir(e)===ir(s))break;t=i,e=s}}updateNiceDomainIteration(e,i){const s=Math.min(ir(e),ir(i)),n=Math.max(ir(e),ir(i)),a=e>i,{interval:r}=this;let o;if(r instanceof I)o=r;else{const e="number"==typeof r?(n-s)/Math.max(r,1):this.tickCount;o=t.getTickInterval({start:s,stop:n,count:e,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(o){const t=o.range(new Date(s),new Date(n),!0),e=a?[...t].reverse():t,i=e[0],r=e.at(-1);this.niceDomain=[i,r]}}};pr.tickIntervals=[[X,1,F],[X,5,5e3],[X,15,15e3],[X,30,3e4],[q,1,G],[q,5,5*G],[q,15,15*G],[q,30,30*G],[Q,1,z],[Q,3,3*z],[Q,6,6*z],[Q,12,12*z],[et,1,W],[et,2,2*W],[ct,1,V],[ct,2,2*V],[ct,3,3*V],[ut,1,K],[ut,2,2*K],[ut,3,3*K],[ut,4,4*K],[ut,6,6*K],[gt,1,Y]];var gr=pr,fr=class t extends Kn{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=$a.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this.index=new Map,this._domain=[]}static is(e){return e instanceof t}toDomain(t){return new Date(t)}set domain(t){this.invalid=!0;const e=[],i=t.length;if(0===i)return void(this._domain=e);this.index=new Map;const{index:s}=this,n=t[0]>t[i-1];t.forEach(((i,a)=>{const r=this.toDomain(ir(t[a+1])+(n?1:-1)||ir(i)+(n?-1:1)),o=n?[r,i]:[i,r];void 0===s.get(o)&&s.set(o,e.push(i)-1)})),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const[t,e]=[ir(this.domain[0]),ir(this.domain.at(-1))],i=Math.min(t,e),s=Math.max(t,e),{interval:n,tickCount:a,minTickCount:r,maxTickCount:o}=this;let l;if(void 0!==n){const[t,e]=this.range,a=Math.abs(e-t);l=gr.getTicksForInterval({start:i,stop:s,interval:n,availableRange:a})}l??(l=gr.getDefaultTicks({start:i,stop:s,tickCount:a,minTickCount:r,maxTickCount:o}));const h=new Set;return l=l.filter((t=>{const e=this.convert(t);return!h.has(e)&&(h.add(e),!0)})),l}convert(t){if("number"==typeof t&&(t=new Date(t)),!(t instanceof Date))return NaN;let e;this.refresh();for(const[s,n]of this.index.entries())if(t>=s[0]&&t<=s[1]){e=n;break}if(void 0===e)return NaN;const i=this.ordinalRange[e];return void 0===i?NaN:i}tickFormat(t){let{ticks:e,specifier:i}=t;return null==i?sr(e):Qa(i)}invert(t){return new Date(super.invert(t))}};x([Vn],fr.prototype,"tickCount",2),x([Vn],fr.prototype,"minTickCount",2),x([Vn],fr.prototype,"maxTickCount",2),x([Vn],fr.prototype,"interval",2);var mr=fr;function yr(t,e){return"number"==typeof t&&"number"==typeof e?t-e:"string"==typeof t&&"string"==typeof e?t.localeCompare(e):null==t&&null==e?0:null==t?-1:null==e?1:String(t).localeCompare(String(e))}function vr(t){return"function"==typeof t?t():t}function xr(t,e,i){for(const s in t){const n=i(vr(t[s]),vr(e[s]));if(0!==n)return n}return 0}var br=class t extends hn{constructor(t){var e;super({isVirtual:null==t?void 0:t.isVirtual}),this.opts=t,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:s}=t??{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==s&&(this.zIndexSubOrder=s),this.name=null==(e=this.opts)?void 0:e.name}static is(e){return e instanceof t}onZIndexChange(){var t;super.onZIndexChange(),this.layer&&(null==(t=this._layerManager)||t.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(t){var e,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(t),t&&null!=(e=this.opts)&&e.layer){const{zIndex:e,zIndexSubOrder:s,name:n}=null!=(i=this.opts)?i:{};this.layer=t.addLayer({name:n,zIndex:e,zIndexSubOrder:s,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()})}}getComputedOpacity(){let e=1;for(const i of this.traverseUp())i instanceof t&&(e*=i.opacity);return e}getVisibility(){for(const t of this.traverseUp())if(!t.visible)return!1;return!0}onVisibleChange(){this.layer&&(this.layer.enabled=this.visible)}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.isVirtual)return void super.markDirty(t,e);let i=e;(e<2||null!=this.layer)&&(i=1),super.markDirty(t,e,i)}containsPoint(t,e){return!0}computeBBox(){return this.computeTransformMatrix(),t.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(t){var e,i;const{opts:{name:s}={},_debug:n}=this,{dirty:a,dirtyZIndex:r,layer:o,children:l,clipRect:h,dirtyTransform:c}=this;let{ctx:d,forceRender:u,clipBBox:p}=t;const{resized:g,stats:y}=t,v=d.getTransform(),x=a>=2||r||g;let b=x,S=!1;for(const f of l)if(b||(b=null==f.layerManager&&f.dirty>=1),S||(S=null!=f.layerManager&&f.dirty>=1),b)break;if(s&&(null==n||n({name:s,group:this,isDirty:x,isChildDirty:b,dirtyTransform:c,renderCtx:t,forceRender:u})),c)u="dirtyTransform";else if(o){const t=this.computeBBox();(void 0===this.lastBBox||!this.lastBBox.equals(t))&&(u="dirtyTransform",this.lastBBox=t)}if(!x&&!b&&!S&&!u)return s&&y&&(null==n||n({name:s,result:"skipping",renderCtx:t,counts:this.nodeCount,group:this})),o&&y&&(y.layersSkipped++,y.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const k=this.visible;if(o){if(d=o.context,d.save(),d.setTransform(o.pixelRatio,0,0,o.pixelRatio,0,0),"dirtyTransform"!==u&&(u=b||r),u&&o.clear(),p){const{width:e,height:i,x:a,y:r}=p;null==n||n((()=>({name:s,clipBBox:p,ctxTransform:d.getTransform(),renderCtx:t,group:this}))),d.beginPath(),d.rect(a,r,e,i),d.clip()}d.setTransform(v)}else d.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(d),h){const{x:e,y:i,width:a,height:r}=h;d.save(),null==n||n((()=>({name:s,clipRect:h,ctxTransform:d.getTransform(),renderCtx:t,group:this}))),d.beginPath(),d.rect(e,i,a,r),d.clip(),p=this.matrix.transformBBox(h)}const w=this.hasVirtualChildren();r?(this.sortChildren(l),"dirtyTransform"!==u&&(u=!0)):w&&this.sortChildren(l);const D=u!==t.forceRender||p!==t.clipBBox||d!==t.ctx?m(f({},t),{ctx:d,forceRender:u,clipBBox:p}):t;let M=0;for(const f of l)f.visible&&k?u||0!==f.dirty?(d.save(),f.render(D),d.restore()):y&&(M+=f.nodeCount.count):(f.markClean(),y&&(M+=f.nodeCount.count));if(y&&(y.nodesSkipped+=M),super.render(t),h&&d.restore(),w)for(const f of this.virtualChildren)f.markClean({recursive:"virtual"});o&&(y&&y.layersRendered++,d.restore(),u&&o.snapshot(),null==(i=(e=o.context).verifyDepthZero)||i.call(e)),s&&y&&(null==n||n({name:s,result:"rendered",skipped:M,renderCtx:t,counts:this.nodeCount,group:this}))}sortChildren(t){this.dirtyZIndex=!1,t.sort(((t,e)=>{var i,s;return xr([t.zIndex,...null!=(i=t.zIndexSubOrder)?i:[void 0,void 0],t.serialNumber],[e.zIndex,...null!=(s=e.zIndexSubOrder)?s:[void 0,void 0],e.serialNumber],yr)}))}static computeBBox(t){let e=1/0,i=-1/0,s=1/0,n=-1/0;for(const a of t){if(!a.visible)continue;const t=a.computeTransformedBBox();if(!t)continue;const{x:r,y:o,width:l,height:h}=t;r<e&&(e=r),o<s&&(s=o),r+l>i&&(i=r+l),o+h>n&&(n=o+h)}return new Qs(e,s,i-e,n-s)}setClipRectInGroupCoordinateSpace(t){this.clipRect=t?this.transformBBox(t):void 0}};br.className="Group",x([sn({redraw:3,convertor:t=>zs(0,t,1)})],br.prototype,"opacity",2);var Sr=br,kr=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.stops=t}},wr=class extends kr{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(t),this.angle=e}createGradient(t,e){const{stops:i,angle:s}=this,n=Pn(Gn(s+90)),a=Math.cos(n),r=Math.sin(n),o=e.width,l=e.height,h=e.x+.5*o,c=e.y+.5*l;if(o>0&&l>0){const e=Math.sqrt(l*l+o*o)/2,s=Math.atan2(l,o);let d;d=n<Math.PI/2?n:n<Math.PI?Math.PI-n:n<3*Math.PI/2?n-Math.PI:2*Math.PI-n;const u=e*Math.abs(Math.cos(d-s)),p=t.createLinearGradient(h+a*u,c+r*u,h-a*u,c-r*u);return i.forEach((t=>{p.addColorStop(t.offset,t.color)})),p}return"black"}},Dr=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,Mr=class t extends hn{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=t.defaultStyles.fill,this.stroke=t.defaultStyles.stroke,this.strokeWidth=t.defaultStyles.strokeWidth,this.lineDash=t.defaultStyles.lineDash,this.lineDashOffset=t.defaultStyles.lineDashOffset,this.lineCap=t.defaultStyles.lineCap,this.lineJoin=t.defaultStyles.lineJoin,this.opacity=t.defaultStyles.opacity,this.fillShadow=t.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:t}=this.constructor;Object.assign(this,t)}onFillChange(){const{fill:t}=this;let e;if(null!=t&&t.startsWith("linear-gradient")&&(e=Dr.exec(t))){const t=parseFloat(e[1]),i=[],s=e[2],n=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=n.exec(s);)i.push(a[0]);this.gradient=new wr(i.map(((t,e)=>({color:t,offset:e/(i.length-1)}))),t)}else this.gradient=void 0}align(t,e){var i,s,n;const a=null!=(n=null==(s=null==(i=this.layerManager)?void 0:i.canvas)?void 0:s.pixelRatio)?n:1,r=Math.round(t*a)/a;return null==e?r:0===e?0:e<1?Math.ceil(e*a)/a:Math.round((e+t)*a)/a-r}fillStroke(t){this.renderFill(t),this.renderStroke(t)}renderFill(t){if(this.fill){const{globalAlpha:e}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),t.fill(),t.globalAlpha=e}t.shadowColor="rgba(0, 0, 0, 0)"}applyFill(t){this.gradient?t.fillStyle=this.gradient.createGradient(t,this.computeBBox()):t.fillStyle=this.fill}applyFillAlpha(t){const{globalAlpha:e}=t;t.globalAlpha=e*this.opacity*this.fillOpacity}applyShadow(t){var e,i;const s=null!=(i=null==(e=this.layerManager)?void 0:e.canvas.pixelRatio)?i:1,n=this.fillShadow;null!=n&&n.enabled&&(t.shadowColor=n.color,t.shadowOffsetX=n.xOffset*s,t.shadowOffsetY=n.yOffset*s,t.shadowBlur=n.blur*s)}renderStroke(t){if(this.stroke&&this.strokeWidth){const{globalAlpha:e}=t;t.strokeStyle=this.stroke,t.globalAlpha=e*this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),t.stroke(),t.globalAlpha=e}}containsPoint(t,e){return this.isPointInPath(t,e)}};Mr.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0},x([sn({redraw:2})],Mr.prototype,"fillOpacity",2),x([sn({redraw:2})],Mr.prototype,"strokeOpacity",2),x([sn({redraw:2,changeCb:t=>t.onFillChange()})],Mr.prototype,"fill",2),x([sn({redraw:2})],Mr.prototype,"stroke",2),x([sn({redraw:2})],Mr.prototype,"strokeWidth",2),x([sn({redraw:2})],Mr.prototype,"lineDash",2),x([sn({redraw:2})],Mr.prototype,"lineDashOffset",2),x([sn({redraw:2})],Mr.prototype,"lineCap",2),x([sn({redraw:2})],Mr.prototype,"lineJoin",2),x([sn({redraw:2,convertor:t=>zs(0,t,1)})],Mr.prototype,"opacity",2),x([sn({redraw:2,checkDirtyOnAssignment:!0})],Mr.prototype,"fillShadow",2);var Cr=Mr,Lr=class extends Cr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Qs(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(t,e){return!1}render(t){var e;const{ctx:i,forceRender:s,stats:n}=t;if(0===this.dirty&&!s)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:a,y1:r,x2:o,y2:l}=this;a=this.align(a),r=this.align(r),o=this.align(o),l=this.align(l);const{fill:h,opacity:c,isRange:d}=this;if(d&&h){const{fillOpacity:t}=this;i.fillStyle=h,i.globalAlpha=c*t,i.beginPath(),i.moveTo(a,r),i.lineTo(o,r),i.lineTo(o,l),i.lineTo(a,l),i.closePath(),i.fill()}const{stroke:u,strokeWidth:p,startLine:g,endLine:f}=this;if((g||f)&&u&&p){const{strokeOpacity:t,lineDash:e,lineDashOffset:s,lineCap:n,lineJoin:h}=this;i.strokeStyle=u,i.globalAlpha=c*t,i.lineWidth=p,e&&i.setLineDash(e),s&&(i.lineDashOffset=s),n&&(i.lineCap=n),h&&(i.lineJoin=h),i.beginPath(),g&&(i.moveTo(a,r),i.lineTo(o,r)),f&&(i.moveTo(o,l),i.lineTo(a,l)),i.stroke()}null==(e=this.fillShadow)||e.markClean(),super.render(t)}};Lr.className="Range",Lr.defaultStyles=m(f({},Cr.defaultStyles),{strokeWidth:1}),x([sn({redraw:2})],Lr.prototype,"x1",2),x([sn({redraw:2})],Lr.prototype,"y1",2),x([sn({redraw:2})],Lr.prototype,"x2",2),x([sn({redraw:2})],Lr.prototype,"y2",2),x([sn({redraw:2})],Lr.prototype,"startLine",2),x([sn({redraw:2})],Lr.prototype,"endLine",2),x([sn({redraw:2})],Lr.prototype,"isRange",2);var Rr=new WeakMap,Tr=new WeakMap;function Ar(t,e){var i,s,n;const a=JSON.stringify(t,null,0);return Rr.has(e)||Rr.set(e,new Map),null!=(i=Rr.get(e))&&i.has(a)||null==(s=Rr.get(e))||s.set(a,e(t)),null==(n=Rr.get(e))?void 0:n.get(a)}function Er(t){return function(e){var i,s,n;const a=JSON.stringify(e,null,0);for(var r=arguments.length,o=new Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];return Tr.has(t)||Tr.set(t,new Map),null!=(i=Tr.get(t))&&i.has(a)||null==(s=Tr.get(t))||s.set(a,t(e,...o)),null==(n=Tr.get(t))?void 0:n.get(a)}}function Nr(t){const{redraw:e=3,changeCb:i}=t??{};return sn({redraw:e,type:"font",changeCb:i})}var Or=class t extends Cr{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=t.defaultStyles.textAlign,this.textBaseline=t.defaultStyles.textBaseline,this.lineHeight=void 0}onTextChange(){var t,e;this.lines=null!=(e=null==(t=this.text)?void 0:t.split("\n"))?e:[]}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=Br(this)),this._font}computeBBox(){var e,i;const{x:s,y:n,lines:a,lineHeight:r,textBaseline:o=t.defaultStyles.textBaseline,textAlign:l=t.defaultStyles.textAlign}=this;let h=0,c=0,d=0,u=0,p=0;const g=Br(this);for(let f=0;f<a.length;f++){const s=t.measureText(a[f],g,o,l);h=Math.max(h,s.actualBoundingBoxLeft),d=Math.max(d,s.width),0==f?(c+=s.actualBoundingBoxAscent,u+=s.actualBoundingBoxAscent):p+=null!=(e=s.fontBoundingBoxAscent)?e:s.emHeightAscent,f==a.length-1?u+=s.actualBoundingBoxDescent:p+=null!=(i=s.fontBoundingBoxDescent)?i:s.emHeightDescent}return void 0!==r&&(p=(a.length-1)*r),u+=p,c+=p*this.getVerticalModifier(o),new Qs(s-h,n-c,d,u)}getLineHeight(e){var i,s;if(this.lineHeight)return this.lineHeight;const n=t.measureText(e,this.font,this.textBaseline,this.textAlign);return(null!=(i=n.fontBoundingBoxAscent)?i:n.emHeightAscent)+(null!=(s=n.fontBoundingBoxDescent)?s:n.emHeightDescent)}isPointInPath(t,e){const i=this.transformPoint(t,e),s=this.computeBBox();return!!s&&s.containsPoint(i.x,i.y)}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(0===this.dirty&&!i)return void(s&&(s.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(s&&(s.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(e);const{fill:n,stroke:a,strokeWidth:r}=this;e.font=this.font,e.textAlign=this.textAlign,e.textBaseline=this.textBaseline;const o=this.layerManager.canvas.pixelRatio||1,{globalAlpha:l}=e;if(n){e.fillStyle=n,e.globalAlpha=l*this.opacity*this.fillOpacity;const{fillShadow:t}=this;null!=t&&t.enabled&&(e.shadowColor=t.color,e.shadowOffsetX=t.xOffset*o,e.shadowOffsetY=t.yOffset*o,e.shadowBlur=t.blur*o),this.renderLines(((t,i,s)=>e.fillText(t,i,s)))}if(a&&r){e.strokeStyle=a,e.lineWidth=r,e.globalAlpha=l*this.opacity*this.strokeOpacity;const{lineDash:t,lineDashOffset:i,lineCap:s,lineJoin:n}=this;t&&e.setLineDash(t),i&&(e.lineDashOffset=i),s&&(e.lineCap=s),n&&(e.lineJoin=n),this.renderLines(((t,i,s)=>e.strokeText(t,i,s)))}super.render(t)}renderLines(t){const{lines:e,x:i,y:s}=this,n=this.lines.map((t=>this.getLineHeight(t)));let a=-(n.reduce(((t,e)=>t+e),0)-n[0])*this.getVerticalModifier(this.textBaseline);for(let r=0;r<e.length;r++)t(e[r],i,s+a),a+=n[r]}static wrapLines(e,i,s,n,a,r){const o="hide"!==r,l=new Pr(n),h=e.split(/\r?\n/g);if(0===h.length)return{lines:void 0,truncated:!1};if("never"===a){const{text:e,truncated:s}=t.truncateLine(h[0],i,l,o?"auto":"never");return{lines:null!=e?[e]:void 0,truncated:s}}const c=[];let d=0,u=!1;for(const p of h){const e=t.wrapLine(p,i,s,l,n,a,d,o);if(null==e)return{lines:void 0,truncated:!1};if(c.push(...e.result),d=e.cumulativeHeight,e.truncated){u=!0;break}}return{lines:c,truncated:u}}static wrap(e,i,s,n,a){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"ellipsis";var o;const{lines:l,truncated:h}=t.wrapLines(e,i,s,n,a,r);return{text:null!=(o=null==l?void 0:l.join("\n").trim())?o:"",truncated:h}}static wrapLine(e,i,s,n,a,r,o,l){if(!(e=e.trim()))return{result:[],truncated:!1,cumulativeHeight:o};const h=n.size(e);if(h.width<=i)return{result:[e],truncated:!1,cumulativeHeight:o+h.height};if(h.height>s||n.width("W")>i)return l?{result:[],truncated:!0,cumulativeHeight:o}:void 0;const c=e.split(/\s+/g),d=t.wrapLineSequentially(c,i,s,n,a,r,o,l);if(null==d)return;o=d.cumulativeHeight;let{lines:u}=d;if(!d.wordsBrokenOrTruncated&&!d.linesTruncated){const e=d.lines.length,s=t.wrapLineBalanced(c,i,n,e);s.length===u.length&&(u=s)}return{result:u.map((t=>t.join(" "))),truncated:d.linesTruncated,cumulativeHeight:o}}static breakWord(e,i,s,n,a){const r=i=>t.punctuationMarks.includes(e[i]),o=n?a.width("-"):0,l=[];let h=0,c=0;for(let t=0;t<e.length;t++){const n=e[t],r=a.width(n);h+r+o>(0===c?i:s)&&(l.push(t),h=0,c++),h+=r}const d=[];let u=0;for(const t of l){let i=e.substring(u,t);n&&i.length>0&&!r(t-1)&&!r(t)&&(i+="-"),d.push(i),u=t}return d.push(e.substring(u)),d}static truncateLine(t,e,i,s){t=t.trimEnd();const n=i.width(t);if(n>e&&"never"===s)return{text:void 0,truncated:!1};if(n<=e&&"force"!==s)return{text:t,truncated:!1};const a=i.width("\u2026");let r=t,o=n;for(;r.length>0&&o+a>e;)r=r.slice(0,-1).trimEnd(),o=i.width(r);return o+a<=e?{text:`${r}\u2026`,truncated:!0}:{text:void 0,truncated:!1}}static wrapLineSequentially(e,i,s,n,a,r,o,l){const{fontSize:h=0,lineHeight:c=h*t.defaultLineHeightRatio}=a,d="always"===r||"hyphenate"===r,u="hyphenate"===r,p=n.width(" ");let g=!1,f=!1;const m=[];let y=[],v=0;const x=()=>({lines:m,linesTruncated:f,wordsBrokenOrTruncated:g,cumulativeHeight:o}),b=()=>{if(!l)return;const e=y.join(" "),{text:s}=t.truncateLine(e,i,n,"force");return null!=s?(y.splice(0,y.length,s),f=!0,x()):void 0},S=()=>{const t=o+c;return!(t>=s)&&(y=[],v=0,o=t,m.push(y),!0)};if(!S())return b();for(let k=0;k<e.length;k++){const s=e[k],a=n.width(s),r=0===y.length?0:p,o=v+r+a;if(o<=i)y.push(s),v=o;else if(a<=i){if(!S())return b();y.push(s),v=a}else{if(g=!0,!d){if(l){if(!S())return b();const{text:a}=t.truncateLine(s,i,n,"force");if(null==a)return;y.push(a),k<e.length-1&&(f=!0);break}return}{const e=i-v-r,a=t.breakWord(s,e,i,u,n);for(let t=0;t<a.length;t++){const e=a[t];if(e&&y.push(e),t===a.length-1)v=n.width(e);else if(!S())return b()}}}}return x()}static wrapLineBalanced(t,e,i,s){const n=t.reduce(((t,e)=>t+i.width(e)),0),a=i.width(" "),r=(n+a*(t.length-s-2))/s,o=[];let l=[],h=i.width(t[0]),c=!0;for(const d of t){const t=i.width(d);if(c){l=[],l.push(d),h=t,c=!1,o.push(l);continue}const s=h+a+t;s<=r?(l.push(d),h=s):s<=e?(l.push(d),c=!0):(l=[d],h=t,o.push(l))}return o}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}getVerticalModifier(t){switch(t){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}static get textContext(){var t;return null!=(t=this._textContext)?t:this._textContext=ks("canvas").getContext("2d")}static measureText(t,e,i,s){return this._measureText({text:t,font:e,textBaseline:i,textAlign:s})}static getTextSize(t,e){return this._getTextSize({text:t,font:e})}};Or.className="Text",Or.defaultLineHeightRatio=1.15,Or.defaultStyles=Object.assign({},Cr.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),Or.ellipsis="\u2026",Or.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],Or._measureText=Er((t=>{let{text:e,font:i,textBaseline:s,textAlign:n}=t;const a=Or.textContext;return a.font=i,a.textBaseline=s,a.textAlign=n,a.measureText(e)})),Or._getTextSize=Er((t=>{let{text:e,font:i}=t;const s=Or.textContext;s.font=i;const n=s.measureText(e);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}})),x([sn({redraw:3})],Or.prototype,"x",2),x([sn({redraw:3})],Or.prototype,"y",2),x([sn({redraw:3,changeCb:t=>t.onTextChange()})],Or.prototype,"text",2),x([Nr()],Or.prototype,"fontStyle",2),x([Nr()],Or.prototype,"fontWeight",2),x([Nr()],Or.prototype,"fontSize",2),x([Nr()],Or.prototype,"fontFamily",2),x([sn({redraw:3})],Or.prototype,"textAlign",2),x([sn({redraw:3})],Or.prototype,"textBaseline",2),x([sn({redraw:3})],Or.prototype,"lineHeight",2);var Ir=Or,Pr=class{constructor(t){this.font=Wt(t)?t:Br(t)}size(t){return Ir.getTextSize(t,this.font)}width(t){const{width:e}=this.size(t);return e}};function Br(t){const{fontFamily:e,fontSize:i,fontStyle:s,fontWeight:n}=t;return[s??"",n??"",i+"px",e].join(" ").trim()}var _r=class extends me{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Br(this)}};function Fr(t){const{parallelFlipRotation:e=0,regularFlipRotation:i=0}=t,s=t.rotation?Pn(Gn(t.rotation)):0,n=!s&&e>=0&&e<=Math.PI?-1:1,a=!s&&i>=0&&i<=Math.PI?-1:1;let r=0;return t.parallel?r=n*Math.PI/2:-1===a&&(r=Math.PI),{configuredRotation:s,defaultRotation:r,parallelFlipFlag:n,regularFlipFlag:a}}function Gr(t,e,i,s,n){const a=e>0&&e<=Math.PI,r=i>0&&i<=Math.PI;if(t){if(!e&&!i)return"center";if(s*(a||r?-1:1)===-1)return"end"}else if(s*n===-1)return"end";return"start"}function zr(t,e,i,s,n){const{width:a,height:r}=e,o=new Qs(i,s,0,0);n.transformBBox(o,e);const{x:l,y:h}=e;return e.width=a,e.height=r,{point:{x:l,y:h},label:{text:t,width:a,height:r}}}x([Yn(qn)],_r.prototype,"enabled",2),x([Yn(pa,{optional:!0})],_r.prototype,"color",2),x([Yn(Da,{optional:!0})],_r.prototype,"fontStyle",2),x([Yn(Ma,{optional:!0})],_r.prototype,"fontWeight",2),x([Yn(ea)],_r.prototype,"fontSize",2),x([Yn(Jn)],_r.prototype,"fontFamily",2),x([Yn(Zn,{optional:!0})],_r.prototype,"formatter",2);var Wr=(t=>(t[t.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",t[t.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",t[t.AXIS_ZINDEX=2]="AXIS_ZINDEX",t[t.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",t[t.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",t[t.AXIS_FOREGROUND_ZINDEX=5]="AXIS_FOREGROUND_ZINDEX",t[t.SERIES_CROSSHAIR_ZINDEX=6]="SERIES_CROSSHAIR_ZINDEX",t[t.SERIES_LABEL_ZINDEX=7]="SERIES_LABEL_ZINDEX",t[t.SERIES_CROSSLINE_LINE_ZINDEX=8]="SERIES_CROSSLINE_LINE_ZINDEX",t[t.LEGEND_ZINDEX=9]="LEGEND_ZINDEX",t[t.NAVIGATOR_ZINDEX=10]="NAVIGATOR_ZINDEX",t))(Wr||{}),Vr=t=>!!t&&Object.hasOwn(t,"toString")&&Wt(t.toString()),Kr=t=>Kt(t)||(t=>!!t&&Object.hasOwn(t,"valueOf")&&Kt(t.valueOf()))(t)||Pt(t);function Yr(t,e){return e&&Kr(t)?t:e?void 0:Wt(t)||Vr(t)?t:String(t)}function $r(t){return Vr(t)&&Object.hasOwn(t,"id")?t.id:t}var Ur=t=>"value"===t?_a(((t,e)=>"line"===e.target.type),(t=>"range"===t.target.type?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'")):_a(((t,e)=>"range"===e.target.type),(t=>"line"===t.target.type?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'")),Xr=(t,e,i,s)=>{const n="line"===t&&void 0!==e,a="range"===t&&void 0!==i;if(!n&&!a)return!0;const[r,o]=i??[e,void 0],l=$a.is(s)||mr.is(s),h=null!=Yr(r,l)&&!isNaN(s.convert(r)),c=null!=Yr(o,l)&&!isNaN(s.convert(o));if(n&&h||a&&h&&c)return!0;const d=["Expecting crossLine"];return a?(h||d.push(`range start ${za(r)}`),c||d.push(`${h?"":"and "}range end ${za(o)}`)):d.push(`value ${za(r)}`),d.push("to match the axis scale domain."),O.warnOnce(d.join(" ")),!1},Hr={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},jr={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function qr(t){let{yDirection:e,padding:i=0,position:s="top",bbox:n}=t;const a=e?Hr:jr,{xTranslationDirection:r,yTranslationDirection:o}=a[s];return{xTranslation:r*(i+(e?n.width:n.height)/2),yTranslation:o*(i+(e?n.height:n.width)/2)}}var Zr=t=>{let{yDirection:e,xEnd:i,yStart:s,yEnd:n}=t;return e?{x:i/2,y:s}:{x:i,y:isNaN(n)?s:(s+n)/2}},Jr=t=>{let{yDirection:e,xStart:i,xEnd:s,yStart:n,yEnd:a}=t;return e?{x:i,y:isNaN(a)?n:(n+a)/2}:{x:s/2,y:n}},Qr=t=>{let{yDirection:e,xEnd:i,yStart:s,yEnd:n}=t;return e?{x:i,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:isNaN(n)?s:n}},to=t=>{let{yDirection:e,xStart:i,xEnd:s,yStart:n,yEnd:a}=t;return e?{x:s/2,y:isNaN(a)?n:a}:{x:i,y:isNaN(a)?n:(n+a)/2}},eo=t=>{let{yDirection:e,xStart:i,xEnd:s,yStart:n}=t;return e?{x:i/2,y:n}:{x:s,y:n}},io=t=>{let{yDirection:e,xStart:i,yStart:s,yEnd:n}=t;return e?{x:i,y:isNaN(n)?s:n}:{x:i,y:s}},so=t=>{let{yDirection:e,xEnd:i,yStart:s,yEnd:n}=t;return e?{x:i,y:s}:{x:i,y:isNaN(n)?s:n}},no=t=>{let{yDirection:e,xStart:i,xEnd:s,yStart:n,yEnd:a}=t;return e?{x:s,y:isNaN(a)?n:a}:{x:i,y:isNaN(a)?n:a}},ao={top:{c:Zr},bottom:{c:to},left:{c:Jr},right:{c:Qr},topLeft:{c:eo},topRight:{c:so},bottomLeft:{c:io},bottomRight:{c:no},inside:{c:t=>{let{xEnd:e,yStart:i,yEnd:s}=t;return{x:e/2,y:isNaN(s)?i:(i+s)/2}}},insideLeft:{c:Jr},insideRight:{c:Qr},insideTop:{c:Zr},insideBottom:{c:to},insideTopLeft:{c:eo},insideBottomLeft:{c:io},insideTopRight:{c:so},insideBottomRight:{c:no}},ro=Ia(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),oo=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}};x([Yn(qn,{optional:!0})],oo.prototype,"enabled",2),x([Yn(Jn,{optional:!0})],oo.prototype,"text",2),x([Yn(Da,{optional:!0})],oo.prototype,"fontStyle",2),x([Yn(Ma,{optional:!0})],oo.prototype,"fontWeight",2),x([Yn(ea)],oo.prototype,"fontSize",2),x([Yn(Jn)],oo.prototype,"fontFamily",2),x([Yn(Qn)],oo.prototype,"padding",2),x([Yn(pa,{optional:!0})],oo.prototype,"color",2),x([Yn(ro,{optional:!0})],oo.prototype,"position",2),x([Yn(sa,{optional:!0})],oo.prototype,"rotation",2),x([Yn(qn,{optional:!0})],oo.prototype,"parallel",2);var lo=class t{constructor(){this.id=_s(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new oo,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new Sr({name:`${this.id}`,layer:!0,zIndex:t.LINE_LAYER_ZINDEX}),this.labelGroup=new Sr({name:`${this.id}`,layer:!0,zIndex:t.LABEL_LAYER_ZINDEX}),this.crossLineRange=new Lr,this.crossLineLabel=new Ir,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:e,labelGroup:i,crossLineRange:s,crossLineLabel:n}=this;e.append(s),i.append(n),s.pointerEvents=1}update(t){const{enabled:e,data:i,type:s,value:n,range:a,scale:r}=this;if(!s||!r||!e||!t||!Xr(s,n,a,r)||0===i.length)return this.group.visible=!1,void(this.labelGroup.visible=!1);this.group.visible=t,this.labelGroup.visible=t,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(t,e){if(!t||!this.createNodeData(e))return;const{sideFlag:i,gridLength:s,data:n}=this,a=[],r=i*s,o=n[0],l=n[1],h=new Qs(Math.min(0,r),Math.min(o,l),Math.abs(0-r),Math.abs(o-l));a.push(h);const c=this.computeLabelBBox();return c&&a.push(c),Qs.merge(a)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(t){var e,i,s;const{scale:n,gridLength:a,sideFlag:r,direction:o,label:{position:l="top"},clippedRange:h,strokeWidth:c=0}=this;if(this.data=[],!n)return!1;const d=null!=(e=n.bandwidth)?e:0,u=null!=(i=n.step)?i:0,p=(t?-1:1)*(n instanceof Kn?(u-d)/2:0),[g,f]=[0,r*a];let[m,y]=this.getRange();const v=void 0===y&&mr.is(n)?d/2+p:0;let[x,b]=[Number(n.convert(m,{clampMode:"clamped"}))-p+v,n.convert(y,{clampMode:"clamped"})+d+p];x=Ws(x,h),b=Ws(b,h),[m,y]=[Number(n.convert(m))+v,n.convert(y)+d];const S=(m===x||y===b||x!==b)&&Math.abs(b-x)>0;if(S&&x>b&&([x,b]=[b,x],[m,y]=[y,m]),m-p>=x&&(m-=p),y+p<=b&&(y+=p),this.isRange=S,this.startLine=c>0&&m>=x&&m<=x+p,this.endLine=c>0&&y>=b-d-p&&y<=b,!S&&!this.startLine&&!this.endLine)return!1;if(this.data=[x,b],this.label.enabled){const t="y"===o,{c:e=Zr}=null!=(s=ao[l])?s:{},{x:i,y:n}=e({yDirection:t,xStart:g,xEnd:f,yStart:x,yEnd:b});this.labelPoint={x:i,y:n}}return!0}updateRangeNode(){var t;const{crossLineRange:e,sideFlag:i,gridLength:s,data:n,startLine:a,endLine:r,isRange:o,fill:l,fillOpacity:h,stroke:c,strokeWidth:d,lineDash:u}=this;e.x1=0,e.x2=i*s,e.y1=n[0],e.y2=n[1],e.startLine=a,e.endLine=r,e.isRange=o,e.fill=l,e.fillOpacity=h??1,e.stroke=c,e.strokeWidth=d??1,e.strokeOpacity=null!=(t=this.strokeOpacity)?t:1,e.lineDash=u}updateLabel(){const{crossLineLabel:t,label:e}=this;e.text&&(t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.fill=e.color,t.text=e.text)}positionLabel(){const{crossLineLabel:t,labelPoint:{x:e,y:i}={},label:{parallel:s,rotation:n,position:a="top",padding:r=0},direction:o,parallelFlipRotation:l,regularFlipRotation:h}=this;if(void 0===e||void 0===i)return;const{defaultRotation:c,configuredRotation:d}=Fr({rotation:n,parallel:s,regularFlipRotation:h,parallelFlipRotation:l});t.rotation=c+d,t.textBaseline="middle",t.textAlign="center";const u=t.computeTransformedBBox();if(!u)return;const p="y"===o,{xTranslation:g,yTranslation:f}=qr({yDirection:p,padding:r,position:a,bbox:u});t.translationX=e+g,t.translationY=i+f}getZIndex(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?t.RANGE_LAYER_ZINDEX:t.LINE_LAYER_ZINDEX}getRange(){var t;const{value:e,range:i,scale:s}=this,n=$a.is(s)||mr.is(s),a=null!=(t=null==i?void 0:i[0])?t:e;let r=null==i?void 0:i[1];return!n&&void 0===r&&(r=a),n&&a===r&&(r=void 0),[a,r]}computeLabelBBox(){const{label:t}=this;if(!t.enabled)return;const e=new Ir;e.fontFamily=t.fontFamily,e.fontSize=t.fontSize,e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.text=t.text;const{labelPoint:{x:i,y:s}={},label:{parallel:n,rotation:a,position:r="top",padding:o=0},direction:l,parallelFlipRotation:h,regularFlipRotation:c}=this;if(void 0===i||void 0===s)return;const{configuredRotation:d}=Fr({rotation:a,parallel:n,regularFlipRotation:c,parallelFlipRotation:h});e.rotation=d,e.textBaseline="middle",e.textAlign="center";const u=e.computeTransformedBBox();if(!u)return;const p="y"===l,{xTranslation:g,yTranslation:f}=qr({yDirection:p,padding:o,position:r,bbox:u});return e.translationX=i+g,e.translationY=s+f,e.computeTransformedBBox()}calculatePadding(t){var e,i,s,n,a,r,o,l;const{isRange:h,startLine:c,endLine:d,direction:u,label:{padding:p=0,position:g="top"}}=this;if(!h&&!c&&!d)return;const f=this.computeLabelBBox();if(null==(null==f?void 0:f.x)||null==(null==f?void 0:f.y))return;const m=function(t){let{yDirection:e,bbox:i,padding:s=0,position:n="top"}=t;const a={};return n.startsWith("inside")||("top"!==n||e?"bottom"!==n||e?"left"===n&&e?a.left=s+i.width:"right"===n&&e&&(a.right=s+i.width):a.bottom=s+i.height:a.top=s+i.height),a}({yDirection:"y"===u,padding:p,position:g,bbox:f});t.left=Math.max(null!=(e=t.left)?e:0,null!=(i=m.left)?i:0),t.right=Math.max(null!=(s=t.right)?s:0,null!=(n=m.right)?n:0),t.top=Math.max(null!=(a=t.top)?a:0,null!=(r=m.top)?r:0),t.bottom=Math.max(null!=(o=t.bottom)?o:0,null!=(l=m.bottom)?l:0)}};lo.LINE_LAYER_ZINDEX=8,lo.RANGE_LAYER_ZINDEX=3,lo.LABEL_LAYER_ZINDEX=7,lo.className="CrossLine",x([Yn(qn,{optional:!0})],lo.prototype,"enabled",2),x([Yn(Ia(["range","line"],"a crossLine type"),{optional:!0})],lo.prototype,"type",2),x([Yn(Un(Ur("range"),aa.restrict({length:2})),{optional:!0})],lo.prototype,"range",2),x([Yn(Ur("value"),{optional:!0})],lo.prototype,"value",2),x([Yn(pa,{optional:!0})],lo.prototype,"fill",2),x([Yn(ia,{optional:!0})],lo.prototype,"fillOpacity",2),x([Yn(pa,{optional:!0})],lo.prototype,"stroke",2),x([Yn(Qn,{optional:!0})],lo.prototype,"strokeWidth",2),x([Yn(ia,{optional:!0})],lo.prototype,"strokeOpacity",2),x([Yn(ka,{optional:!0})],lo.prototype,"lineDash",2);var ho=lo,co=class{constructor(){this.moduleMap=new Map}*modules(){for(const t of this.moduleMap.values())yield t.moduleInstance}addModule(t,e){if(this.moduleMap.has(t.optionsKey))throw new Error(`AG Charts - module already initialised: ${t.optionsKey}`);this.moduleMap.set(t.optionsKey,{module:t,moduleInstance:e(t)})}removeModule(t){var e;const i=Wt(t)?t:t.optionsKey;null==(e=this.moduleMap.get(i))||e.moduleInstance.destroy(),this.moduleMap.delete(i)}getModule(t){var e;return null==(e=this.moduleMap.get(Wt(t)?t:t.optionsKey))?void 0:e.moduleInstance}isEnabled(t){return this.moduleMap.has(Wt(t)?t:t.optionsKey)}mapModules(t){return Array.from(this.moduleMap.values(),((e,i)=>t(e.moduleInstance,i)))}destroy(){var t;for(const e of this.moduleMap.keys())null==(t=this.moduleMap.get(e))||t.moduleInstance.destroy();this.moduleMap.clear()}},uo={};function po(t,e){const{nodes:i,selections:s}=Rn(t);for(const n of s){for(const t of n.nodes()){const i=e(t,t.datum);t.setProperties(i)}n.cleanup()}for(const n of i){const t=e(n,n.datum);n.setProperties(t)}}v(uo,{resetMotion:()=>po});var go=class{constructor(t,e,i){this.states=e,this.preTransitionCb=i,this.debug=Rs.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,"color: green")}transition(t,e){var i,s;const n=this.states[this.state],a=null==n?void 0:n[t];if(!a)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.state}`,"color: grey");let r=this.state;return"string"==typeof a?r=a:"object"==typeof a&&(r=a.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${r}`,"color: green"),null==(i=this.preTransitionCb)||i.call(this,this.state,r),this.state=r,"function"==typeof a?a(e):"object"==typeof a&&(null==(s=a.action)||s.call(a,e)),this.state}},fo=t=>`(${t})`,mo=t=>`${fo(t)}?`,yo=t=>mo(`?:${t}`),vo=new RegExp(["^",yo(`${mo(".")}${fo("[<>=^]")}`),mo("[+\\-( ]"),mo("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),mo("0"),mo("\\d+"),mo(","),yo(`\\.${fo("\\d+")}`),mo("~"),mo("[%a-z]"),"$"].join(""),"i"),xo=new RegExp(["^",fo(".*?"),`#\\{${fo(".+?")}\\}`,fo(".*?"),"$"].join(""));function bo(t){let e,i;const s=xo.exec(t);s&&([,e,t,i]=s);const n=vo.exec(t);if(!n)throw new Error(`The number formatter is invalid: ${t}`);const[,a,r,o,l,h,c,d,u,p,g]=n;return{fill:a,align:r,sign:o,symbol:l,zero:h,width:parseInt(c),comma:d,precision:parseInt(u),trim:!!p,type:g,prefix:e,suffix:i}}function So(t){const e="string"==typeof t?bo(t):t,{fill:i,align:s,sign:n="-",symbol:a,zero:r,width:o,comma:l,type:h,prefix:c="",suffix:d="",precision:u}=e;let{trim:p}=e;const g=void 0===u||isNaN(u);let f,m;if(h)if(h in Do&&h in wo)f=g?wo[h]:Do[h];else if(h in Do)f=Do[h];else{if(!(h in wo))throw new Error(`The number formatter type is invalid: ${h}`);f=wo[h]}else f=Do.g,p=!0;return m=null==u||g?h?6:12:u,t=>{let e=f(t,m);return p&&(e=function(t){return t.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}(e)),l&&(e=function(t,e){let i=t.indexOf(".");i<0&&(i=t.length);const s=t.substring(0,i).split(""),n=t.substring(i);for(let a=s.length-3;a>0;a-=3)s.splice(a,0,e);return`${s.join("")}${n}`}(e,l)),e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if("("===i)return t>=0?e:`(${e})`;const s="+"===i?"+":"";return`${t>=0?s:To}${e}`}(t,e,n),a&&"#"!==a&&(e=`${a}${e}`),"#"===a&&"x"===h&&(e=`0x${e}`),"s"===h&&(e=`${e}${function(t){return Ro[Mo(t)]}(t)}`),("%"===h||"p"===h)&&(e=`${e}%`),null!=o&&!isNaN(o)&&(e=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:">",n=t;if(">"!==s&&s){if("<"===s)n=n.padEnd(e,i);else if("^"===s){const t=Math.max(0,e-n.length),s=Math.ceil(t/2),a=Math.floor(t/2);n=n.padStart(s+n.length,i),n=n.padEnd(a+n.length,i)}}else n=n.padStart(e,i);return n}(e,o,i??r,s)),e=`${c}${e}${d}`,e}}var ko=t=>Math.floor(Math.abs(t)),wo={b:t=>ko(t).toString(2),c:t=>String.fromCharCode(t),d:t=>Math.round(Math.abs(t)).toFixed(0),o:t=>ko(t).toString(8),x:t=>ko(t).toString(16),X:t=>wo.x(t).toUpperCase(),n:t=>wo.d(t),"%":t=>`${ko(100*t).toFixed(0)}`},Do={e:(t,e)=>Math.abs(t).toExponential(e),E:(t,e)=>Do.e(t,e).toUpperCase(),f:(t,e)=>Math.abs(t).toFixed(e),F:(t,e)=>Do.f(t,e).toUpperCase(),g:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i));return s>=-4&&s<e?i.toFixed(e-1-s):i.toExponential(e-1)},G:(t,e)=>Do.g(t,e).toUpperCase(),n:(t,e)=>Do.g(t,e),p:(t,e)=>Do.r(100*t,e),r:(t,e)=>{if(0===t)return"0";const i=Math.abs(t),s=Math.floor(Math.log10(i))-(e-1);if(s<=0)return i.toFixed(-s);const n=Math.pow(10,s);return(Math.round(i/n)*n).toFixed()},s:(t,e)=>{const i=Mo(t);return Do.r(t/Math.pow(10,i),e)},"%":(t,e)=>Do.f(100*t,e)};function Mo(t){return zs(Co,t?3*Math.floor(Math.log10(Math.abs(t))/3):0,Lo)}var Co=-24,Lo=24,Ro={[Co]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[Lo]:"Y"},To="\u2212";function Ao(t,e){const i=bo(e??",f"),{precision:s}=i;(null==s||isNaN(s))&&("f"===i.type||"%"===i.type?i.precision=Math.max(...t.map((t=>{if("number"!=typeof t||0===t)return 0;const e=Math.floor(Math.log10(Math.abs(t))),s=i.type?6:12,n=t.toExponential(s-1).replace(/\.?0+e/,"e"),a=n.indexOf(".");if(a<0)return e>=0?0:-e;const r=n.indexOf("e")-a;return Math.max(0,r-e-1)}))):(!i.type||i.type in Do)&&(i.precision=Math.max(...t.map((t=>{if("number"!=typeof t)return 0;const e=t.toExponential((i.type?6:12)-1).replace(/\.?0+e/,"e");return e.substring(0,e.indexOf("e")).replace(".","").length})))));const n=So(i);return t=>n(Number(t))}var Eo=class t extends $a{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=A,this.basePow=A,this.log=t=>Math.min(...this.domain)>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>Math.min(...this.domain)>=0?this.basePow(t):-this.basePow(-t),this.defaultClampMode="clamped"}toDomain(t){return t}transform(t){return Math.min(...this.domain)>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return Math.min(...this.domain)>=0?Math.exp(t):-Math.exp(-t)}refresh(){this.base<=0&&(this.base=0,O.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=t.getBaseLogMethod(this.base),this.basePow=t.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[t,e]=this.domain,i=t>e?Math.ceil:Math.floor,s=t>e?Math.floor:Math.ceil,n=this.pow(i(this.log(t))),a=this.pow(s(this.log(e)));this.niceDomain=[n,a]}ticks(){var t;const e=null!=(t=this.tickCount)?t:10;if(!this.domain||this.domain.length<2||e<1)return[];this.refresh();const i=this.base,[s,n]=this.getDomain(),a=Math.min(s,n),r=Math.max(s,n);let o=this.log(a),l=this.log(r);if(this.interval){const t=Math.abs(this.interval),e=Math.abs(l-o);let i=dr(o,l,Math.min(e,t));i=or(i.fractionDigits,i.map((t=>this.pow(t))).filter((t=>t>=a&&t<=r)));const s=this.getPixelRange();if(!ur({start:a,stop:r,interval:t,count:i.length,availableRange:s}))return i}if(!(i%1===0)||l-o>=e){let t=lr(o,l,Math.min(l-o,e));return t=or(t.fractionDigits,t.map((t=>this.pow(t)))),t}const h=[],c=a>0;o=Math.floor(o)-1,l=Math.round(l)+1;const d=Ks(this.range)/e;let u=1/0;for(let p=o;p<=l;p++){const t=this.convert(this.pow(p+1));for(let e=1;e<i;e++){const s=c?e:i-e+1,n=this.pow(p)*s,o=this.convert(n),l=Math.abs(u-o),g=Math.abs(o-t);n>=a&&n<=r&&(1===e||l>=d&&g>=d||0===h.length)&&(h.push(n),u=o)}}return h}tickFormat(t){let{count:e,ticks:i,specifier:s}=t;return e!==1/0&&null==i&&this.ticks(),s??(s=10===this.base?".0e":","),Wt(s)?So(s):s}static getBaseLogMethod(t){switch(t){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:const e=Math.log(t);return t=>Math.log(t)/e}}static getBasePowerMethod(t){switch(t){case 10:return t=>t>=0?p(10,t):1/p(10,-t);case Math.E:return Math.exp;default:return e=>p(t,e)}}};x([Vn],Eo.prototype,"base",2);var No=Eo,Oo=class t{constructor(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.parentNode=t,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Rs.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(hn,e)?()=>new e:e}static select(e,i){return new t(e,i,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}static selectAll(t,e){const i=[],s=t=>{e(t)&&i.push(t),t.children.forEach(s)};return s(t),i}static selectByClass(e,i){return t.selectAll(e,(t=>t instanceof i))}static selectByTag(e,i){return t.selectAll(e,(t=>t.tag===i))}createNode(t,e,i){const s=this.nodeFactory(t);return s.datum=t,null==e||e(s),null==i?this._nodes.push(s):this._nodes.splice(i,0,s),this.parentNode.appendChild(s),s}update(t,e,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${t}`),i){const s=new Map(t.map(((t,e)=>[i(t),[t,e]])));for(const[t,e]of this._nodesMap.entries())if(s.has(e)){const[i]=s.get(e);t.datum=i,this.garbageBin.delete(t),s.delete(e)}else this.garbageBin.add(t);for(const[t,[i,n]]of s.entries())this._nodesMap.set(this.createNode(i,e,n),t)}else{const i=Math.max(t.length,this.data.length);for(let s=0;s<i;s++)s>=t.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(t[s],e):(this._nodes[s].datum=t[s],this.garbageBin.delete(this._nodes[s]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter((t=>!this.garbageBin.has(t)||(this._nodesMap.delete(t),this.garbageBin.delete(t),this.parentNode.removeChild(t),!1)))),this}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){for(const e of this._nodes.entries())t(e[1],e[1].datum,e[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const e=this._nodes[t],i=this._nodes[t].datum;yield{node:e,datum:i,index:t}}}select(e){return t.selectAll(this.parentNode,e)}selectByClass(e){return t.selectByClass(this.parentNode,e)}selectByTag(e){return t.selectByTag(this.parentNode,e)}nodes(){return this._nodes}},Io=class extends Cr{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(t){this.x1=t,this.x2=t}set y(t){this.y1=t,this.y2=t}computeBBox(){return new Qs(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(t,e){if(this.x1===this.x2||this.y1===this.y2){const{x:i,y:s}=this.transformPoint(t,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(i,s)}return!1}render(t){var e;const{ctx:i,forceRender:s,stats:n,devicePixelRatio:a}=t;if(0===this.dirty&&!s)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(i);let{x1:r,y1:o,x2:l,y2:h}=this;if(r===l){const{strokeWidth:t}=this,e=Math.round(r*a)/a+Math.trunc(t*a)%2/(2*a);r=e,l=e}else if(o===h){const{strokeWidth:t}=this,e=Math.round(o*a)/a+Math.trunc(t*a)%2/(2*a);o=e,h=e}i.beginPath(),i.moveTo(r,o),i.lineTo(l,h),this.fillStroke(i),null==(e=this.fillShadow)||e.markClean(),super.render(t)}};function Po(t,e,i,s,n,a){if(0===t.size)return!1;let r=t.x,o=t.y;null!=e&&(r-=(e.x-.5)*t.size,o-=(e.y-.5)*t.size);let l=r;r<i?l=i:r>i+n&&(l=i+n);let h=o;o<s?h=s:o>s+a&&(h=s+a);const c=r-l,d=o-h;return Math.sqrt(c*c+d*d)<=.5*t.size}function Bo(t,e,i,s,n){const a=t.x+t.width>e&&t.x<e+s,r=t.y+t.height>i&&t.y<i+n;return a&&r}function _o(t,e,i,s,n){return e+s<t.x+t.width&&e>t.x&&i>t.y&&i+n<t.y+t.height}function Fo(t){return null!=t&&"object"==typeof t.point&&"object"==typeof t.label}Io.className="Line",Io.defaultStyles=Object.assign({},Cr.defaultStyles,{fill:void 0,strokeWidth:1}),x([sn({redraw:3})],Io.prototype,"x1",2),x([sn({redraw:3})],Io.prototype,"y1",2),x([sn({redraw:3})],Io.prototype,"x2",2),x([sn({redraw:3})],Io.prototype,"y2",2);var Go={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0}};function zo(t,e){return t.length===e.length&&t.every(((t,i)=>{const s=e[i];return Array.isArray(t)&&Array.isArray(s)?zo(t,s):t===s}))}function Wo(t,e){return t.length===e.length&&t.every(((t,i)=>Number(t)===Number(e[i])))}function Vo(t){const e=Nt(t)?t:t.split(".");if(1===e.length){const[t]=e;return Lt(((e,i,s)=>e[t]=s),(e=>e[t]))}return Lt(((t,i,s)=>te(t,e,s)),(t=>Qt(t,e)))}function Ko(t){return Lt(((e,i,s)=>e[t]=s))}function Yo(t,e){return Lt(((i,s,n)=>i[t][e??s]=n))}function $o(t){const{newValue:e,oldValue:i,changeValue:s}=t;return Lt(((t,n,a,r)=>(a!==r&&(void 0!==r&&(null==i||i.call(t,r)),void 0!==a&&(null==e||e.call(t,a)),null==s||s.call(t,a,r)),a)))}function Uo(t){return function(t){return(e,i)=>{Ct(e,i).observers.push(t)}}(t)}function Xo(t,e,i,s,n){let{top:a,right:r,bottom:o,left:l,width:h,height:c}=n;return null!=l?null!=h?r=i-l+h:null!=r&&(h=i-l-r):null!=r&&null!=h&&(l=i-r-h),null!=a?null!=c?o=s-a-c:null!=o&&(c=s-o-a):null!=o&&null!=c&&(a=s-o-c),null==h?null==c?(h=t,c=e):h=Math.ceil(t*c/e):null==c&&(c=Math.ceil(e*h/t)),null==l&&(l=null==r?Math.floor((i-h)/2):i-r-h),null==a&&(a=null==o?Math.floor((s-c)/2):s-c-o),{x:l,y:a,width:h,height:c}}var Ho="ag-chart-tooltip";function jo(t,e){var i,s,n;if("string"==typeof t)return t;const{content:a=(null!=(i=null==e?void 0:e.content)?i:""),title:r=(null==e?void 0:e.title),color:o=(null!=(s=null==e?void 0:e.color)?s:"white"),backgroundColor:l=(null!=(n=null==e?void 0:e.backgroundColor)?n:"#888")}=t;return`${r?`<div class="${Ho}-title"\n        style="color: ${o}; background-color: ${l}">${r}</div>`:""}${a?`<div class="${Ho}-content">${a}</div>`:""}`}var qo=class extends me{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};x([Yn(Ia(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left"],"a position type"))],qo.prototype,"type",2),x([Yn(Qn)],qo.prototype,"xOffset",2),x([Yn(Qn)],qo.prototype,"yOffset",2);var Zo=class extends me{constructor(){super(),this.enabled=!0,this.delay=0,this.range="nearest",this.wrapping="hyphenate",this.position=new qo,this.darkTheme=!1,this.enableInteraction=!1,this.lastVisibilityChange=Date.now(),this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this.element=ks("div"),this.element.classList.add(Ho),this.root=bs().body,this.root.appendChild(this.element)}destroy(){this.element.remove()}isVisible(){return!this.element.classList.contains(Ho+"-hidden")}show(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n,a,r,o,l,h,c,d,u;const{element:p}=this;if(null!=i)p.innerHTML=i;else if(!p.innerHTML)return void this.toggle(!1);const g=null!=(a=null==(n=e.position)?void 0:n.type)?a:this.position.type,f=null!=(o=null==(r=e.position)?void 0:r.xOffset)?o:0,m=null!=(h=null==(l=e.position)?void 0:l.yOffset)?h:0,y=this.getTooltipBounds({positionType:g,meta:e,yOffset:m,xOffset:f,canvasRect:t}),v=this.getWindowBoundingBox(),x=v.x+v.width-p.clientWidth-1,b=v.y+v.height-p.clientHeight,S=Xo(p.clientWidth,p.clientHeight,t.width,t.height,y);S.x+=t.x,S.y+=t.y;const k=zs(v.x,S.x,x),w=zs(v.y,S.y,b),D=k!==S.x||w!==S.y,M=("node"===g||"pointer"===g)&&!D&&!f&&!m,C=null!=(d=null!=(c=e.showArrow)?c:this.showArrow)?d:M;this.updateShowArrow(C),p.style.transform=`translate(${Math.round(k)}px, ${Math.round(w)}px)`,this.enableInteraction=null!=(u=e.enableInteraction)&&u,this.delay>0&&!s?(this.toggle(!1),this.showTimeout=setTimeout((()=>{this.toggle(!0)}),this.delay)):this.toggle(!0)}getWindowBoundingBox(){const{innerWidth:t,innerHeight:e}=Ss();return new Qs(0,0,t,e)}toggle(t){const{classList:e}=this.element,i=(t,i)=>e.toggle(`${Ho}-${t}`,i),s=this.isVisible();let n=1/0;if(t||clearTimeout(this.showTimeout),s!==t){const t=Date.now();n=t-this.lastVisibilityChange,this.lastVisibilityChange=t}n>5&&i("no-animation",!s&&t&&n>100),i("no-interaction",!this.enableInteraction),i("hidden",!t),i("arrow",this._showArrow),e.toggle("ag-chart-dark-tooltip",this.darkTheme);for(const a of this.wrapTypes)e.toggle(`${Ho}-wrap-${a}`,a===this.wrapping)}pointerLeftOntoTooltip(t){var e;if(!this.enableInteraction)return!1;const i=null==(e=t.sourceEvent.relatedTarget)?void 0:e.classList,s=!!["","-title","-content"].filter((t=>null==i?void 0:i.contains(`${Ho}${t}`)));return void 0!==i&&s}updateShowArrow(t){this._showArrow=t}getTooltipBounds(t){let{positionType:e,meta:i,yOffset:s,xOffset:n,canvasRect:a}=t;const{clientWidth:r,clientHeight:o}=this.element,l={width:r,height:o};switch(e){case"node":case"pointer":return l.top=i.offsetY+s-o-8,l.left=i.offsetX+n-r/2,l;case"top":return l.top=s,l.left=a.width/2-r/2+n,l;case"right":return l.top=a.height/2-o/2+s,l.left=a.width-r/2+n,l;case"left":return l.top=a.height/2-o/2+s,l.left=n,l;case"bottom":return l.top=a.height-o+s,l.left=a.width/2-r/2+n,l;case"top-left":return l.top=s,l.left=n,l;case"top-right":return l.top=s,l.left=a.width-r+n,l;case"bottom-right":return l.top=a.height-o+s,l.left=a.width-r+n,l;case"bottom-left":return l.top=a.height-o+s,l.left=n,l}}};x([Yn(qn)],Zo.prototype,"enabled",2),x([Yn(qn,{optional:!0})],Zo.prototype,"showArrow",2),x([Uo(((t,e,i)=>{e&&t.element.classList.add(e),i&&t.element.classList.remove(i)})),Yn(Jn,{optional:!0})],Zo.prototype,"class",2),x([Yn(ea)],Zo.prototype,"delay",2),x([Yn(Na)],Zo.prototype,"range",2),x([Yn(Ca)],Zo.prototype,"wrapping",2),x([Yn(Hn)],Zo.prototype,"position",2),x([Yn(qn)],Zo.prototype,"darkTheme",2);var Jo=class extends me{constructor(){super(...arguments),this.id=_s(this),this.node=new Ir({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1}registerInteraction(t){return t.regionManager.getRegion("root").addListener("hover",(e=>this.handleMouseMove(t,e)))}computeTextWrap(t,e){var i,s;const{text:n,wrapping:a}=this,r=Math.min(null!=(i=this.maxWidth)?i:1/0,t),o=null!=(s=this.maxHeight)?s:e;if(!isFinite(r)&&!isFinite(o))return void(this.node.text=n);const{text:l,truncated:h}=Ir.wrap(n??"",r,o,this,a);this.node.text=l,this.truncated=h}handleMouseMove(t,e){if(!this.enabled)return;const{offsetX:i,offsetY:s}=e,n=this.node.computeBBox(),a=this.node.visible&&n.containsPoint(i,s);a&&e.consume(),this.truncated&&a?t.tooltipManager.updateTooltip(this.id,{offsetX:i,offsetY:s,lastPointerEvent:e,showArrow:!1},jo({content:this.text})):t.tooltipManager.removeTooltip(this.id)}};Jo.SMALL_PADDING=10,Jo.LARGE_PADDING=20,x([Yn(qn)],Jo.prototype,"enabled",2),x([Yn(Jn,{optional:!0}),Yo("node")],Jo.prototype,"text",2),x([Yn(La,{optional:!0}),Yo("node")],Jo.prototype,"textAlign",2),x([Yn(Da,{optional:!0}),Yo("node")],Jo.prototype,"fontStyle",2),x([Yn(Ma,{optional:!0}),Yo("node")],Jo.prototype,"fontWeight",2),x([Yn(ea),Yo("node")],Jo.prototype,"fontSize",2),x([Yn(Jn),Yo("node")],Jo.prototype,"fontFamily",2),x([Yn(pa,{optional:!0}),Yo("node","fill")],Jo.prototype,"color",2),x([Yn(ea,{optional:!0})],Jo.prototype,"spacing",2),x([Yn(ea,{optional:!0})],Jo.prototype,"lineHeight",2),x([Yn(ea,{optional:!0})],Jo.prototype,"maxWidth",2),x([Yn(ea,{optional:!0})],Jo.prototype,"maxHeight",2),x([Yn(Ca)],Jo.prototype,"wrapping",2);var Qo=["stroke","lineDash"],tl=ra((t=>Ft(t)&&Object.keys(t).every((t=>Qo.includes(t)))),"objects with gridline style properties such as 'stroke' or 'lineDash'"),el=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};function il(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[void 0];return Lt(((i,s,n)=>e.includes(n)?_t(t)?t(n):t:n))}x([Yn(qn)],el.prototype,"enabled",2),x([Yn(ea)],el.prototype,"width",2),x([Yn(tl)],el.prototype,"style",2);var sl=class extends me{constructor(){super(...arguments),this.enabled=!0,this.autoWrap=!1,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};x([Yn(qn)],sl.prototype,"enabled",2),x([Yn(qn,{optional:!0})],sl.prototype,"autoWrap",2),x([Yn(ea,{optional:!0})],sl.prototype,"maxWidth",2),x([Yn(ea,{optional:!0})],sl.prototype,"maxHeight",2),x([Yn(Da,{optional:!0})],sl.prototype,"fontStyle",2),x([Yn(Ma,{optional:!0})],sl.prototype,"fontWeight",2),x([Yn(Qn.restrict({min:1}))],sl.prototype,"fontSize",2),x([Yn(Jn)],sl.prototype,"fontFamily",2),x([Yn(ea)],sl.prototype,"padding",2),x([Yn(na),il(NaN)],sl.prototype,"minSpacing",2),x([Yn(pa,{optional:!0})],sl.prototype,"color",2),x([Yn(sa,{optional:!0})],sl.prototype,"rotation",2),x([Yn(qn)],sl.prototype,"avoidCollisions",2),x([Yn(qn)],sl.prototype,"mirrored",2),x([Yn(qn)],sl.prototype,"parallel",2),x([Yn(Zn,{optional:!0})],sl.prototype,"formatter",2),x([Yn(Jn,{optional:!0})],sl.prototype,"format",2);var nl=class{constructor(){this.enabled=!0,this.width=1,this.color=void 0}};x([Yn(qn)],nl.prototype,"enabled",2),x([Yn(ea)],nl.prototype,"width",2),x([Yn(pa,{optional:!0})],nl.prototype,"color",2);var al=_a((t=>Kt(t)&&t>0||t instanceof I),"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),rl=class extends me{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}};x([Yn(qn)],rl.prototype,"enabled",2),x([Yn(ea)],rl.prototype,"width",2),x([Yn(ea)],rl.prototype,"size",2),x([Yn(pa,{optional:!0})],rl.prototype,"color",2),x([Yn(al,{optional:!0})],rl.prototype,"interval",2),x([Yn(aa,{optional:!0})],rl.prototype,"values",2),x([Yn(Pa),il(NaN)],rl.prototype,"minSpacing",2);var ol=class extends me{constructor(){super(...arguments),this.enabled=!1,this.spacing=Jo.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};function ll(t){const[e,i]=Vs(t.range),s=Math.floor(e),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}x([Yn(qn)],ol.prototype,"enabled",2),x([Yn(Jn,{optional:!0})],ol.prototype,"text",2),x([Yn(ea,{optional:!0})],ol.prototype,"spacing",2),x([Yn(Da,{optional:!0})],ol.prototype,"fontStyle",2),x([Yn(Ma,{optional:!0})],ol.prototype,"fontWeight",2),x([Yn(ea)],ol.prototype,"fontSize",2),x([Yn(Jn)],ol.prototype,"fontFamily",2),x([Yn(pa,{optional:!0})],ol.prototype,"color",2),x([Yn(Ca)],ol.prototype,"wrapping",2),x([Yn(Zn,{optional:!0})],ol.prototype,"formatter",2);var hl=2*Math.PI,cl=hl/2;function dl(t){const e=(e,i)=>{const[s=t.min,n=t.max]=Vs(i??[]);return e<s||e>n};return{tick:{fromFn(t,i,s){let n=t.y1+t.translationY,a=t.opacity;return("added"===s||e(t.datum.translationY,t.datum.range))&&(n=i.translationY,a=0),{y:0,translationY:n,opacity:a,phase:An[s]}},toFn(t,e,i){const s=e.translationY;let n=1;return"removed"===i&&(n=0),{y:0,translationY:s,opacity:n,finish:{y:s,translationY:0}}},intermediateFn:(t,i,s)=>({visible:!e(t.y)})},line:{fromFn(t,e){var i;return m(f({},null!=(i=t.previousDatum)?i:e),{phase:An.updated})},toFn:(t,e)=>f({},e)},label:{fromFn(t,i,s){var n;const a=null!=(n=t.previousDatum)?n:i,r=a.x,o=a.y,l=a.rotationCenterX;let h=Math.round(t.translationY),c=a.rotation,d=t.opacity;return"removed"===s||e(a.y,a.range)?c=i.rotation:("added"===s||e(t.datum.y,t.datum.range))&&(h=Math.round(a.translationY),d=0,c=i.rotation),{x:r,y:o,rotationCenterX:l,translationY:h,rotation:c,opacity:d,phase:An[s]}},toFn(t,e,i){var s,n;const a=e.x,r=e.y,o=e.rotationCenterX,l=Math.round(e.translationY);let h=0,c=1;return"added"===i?(c=1,h=e.rotation):"removed"===i?(c=0,h=e.rotation):h=function(t,e){return Math.abs(e-t)<cl?e:t>e?e+hl:e-hl}(null!=(n=null==(s=t.previousDatum)?void 0:s.rotation)?n:e.rotation,e.rotation),{x:a,y:r,rotationCenterX:o,translationY:l,rotation:h,opacity:c,finish:{rotation:e.rotation}}}},group:{fromFn(t,e){const{rotation:i,translationX:s,translationY:n}=t;return{rotation:i,translationX:s,translationY:n,phase:An.updated}},toFn(t,e){const{rotation:i,translationX:s,translationY:n}=e;return{rotation:i,translationX:s,translationY:n}}}}}function ul(){return(t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function pl(t){const{visible:e,min:i,max:s}=t;return(t,n)=>{const a=n.translationY;return{y:a,translationY:0,opacity:1,visible:e&&a>=i&&a<=s}}}function gl(){return(t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function fl(){return(t,e)=>f({},e)}var ml=class t{constructor(e,i,s){let n;this.moduleCtx=e,this.scale=i,this.id=_s(this),this.nice=!0,this.reverse=!1,this.keys=[],this.dataDomain={domain:[],clipped:!1},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Sr({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new Io),this.tickLineGroup=this.axisGroup.appendChild(new Sr({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new Sr({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new Sr({name:`${this.id}-CrossLines`}),this.gridGroup=new Sr({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new Sr({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=Oo.select(this.tickLineGroup,Io,!1),this.tickLabelGroupSelection=Oo.select(this.tickLabelGroup,Ir,!1),this.gridLineGroupSelection=Oo.select(this.gridLineGroup,Io,!1),this.line=new nl,this.tick=this.createTick(),this.gridLine=new el,this.label=this.createLabel(),this.defaultTickMinSpacing=t.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new ol,this._titleCaption=new Jo,this.gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new co,this.refreshScale(),this._titleCaption.registerInteraction(this.moduleCtx),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(e.regionManager.getRegion("series").addListener("hover",(t=>this.checkAxisHover(t)))),this.animationManager=e.animationManager,this.animationState=new go("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:t=>this.animateReadyUpdate(t),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines),this.destroyFns.push(e.layoutService.addListener("layout-complete",(t=>{null!=n&&null!=be(t.chart,n)&&this.animationState.transition("resize"),n=f({},t.chart)}))),!1!==(null==s?void 0:s.respondsToZoom)&&this.destroyFns.push(e.updateService.addListener("update-complete",(t=>{this.minRect=t.minRect})))}get type(){var t;return null!=(t=this.constructor.type)?t:""}set crossLines(t){var e,i;null==(e=this._crossLines)||e.forEach((t=>this.detachCrossLine(t))),t&&this.assignCrossLineArrayConstructor(t),this._crossLines=t,null==(i=this._crossLines)||i.forEach((t=>{this.attachCrossLine(t),this.initCrossLine(t)}))}get crossLines(){return this._crossLines}resetAnimation(t){"initial"===t&&this.animationState.transition("reset")}attachCrossLine(t){this.crossLineGroup.appendChild(t.group),this.crossLineGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineGroup.removeChild(t.group),this.crossLineGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach((t=>t()))}refreshScale(){var t;this.range=this.scale.range.slice(),null==(t=this.crossLines)||t.forEach(this.initCrossLine,this)}updateRange(){var t;const{range:e,visibleRange:i,scale:s}=this,n=(e[1]-e[0])/(i[1]-i[0]),a=n*i[0],r=e[0]-a;s.range=[r,r+n],null==(t=this.crossLines)||t.forEach((t=>{t.clippedRange=[e[0],e[1]]}))}setCrossLinesVisible(t){this.crossLineGroup.visible=t}attachAxis(t,e){e.appendChild(this.gridGroup),t.appendChild(this.axisGroup),t.appendChild(this.crossLineGroup)}detachAxis(t,e){e.removeChild(this.gridGroup),t.removeChild(this.axisGroup),t.removeChild(this.crossLineGroup)}inRange(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const[s,n]=Vs(this.range);return t+e>=s-i&&t<=n+i}onLabelFormatChange(t,e){const{scale:i,fractionDigits:s}=this,n=!(i instanceof No)&&s>0?t=>"number"==typeof t?t.toFixed(s):String(t):t=>String(t);if(e&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:t,specifier:e})}catch{this.labelFormatter=n,O.warnOnce(`the axis label format string ${e} is invalid. No formatting will be applied`)}else this.labelFormatter=n}setTickInterval(t){var e;this.scale.interval=null!=(e=this.tick.interval)?e:t}setTickCount(t,e,i){const{scale:s}=this,n=$a.is(s)||mr.is(s);if(t&&n){if("number"==typeof t)return s.tickCount=t,s.minTickCount=e??0,void(s.maxTickCount=i??1/0);s instanceof gr&&this.setTickInterval(t)}}onGridLengthChange(t,e){var i;(e&&!t||!e&&t)&&this.onGridVisibilityChange(),null==(i=this.crossLines)||i.forEach(this.initCrossLine,this)}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createTick(){return new rl}createLabel(){return new sl}checkAxisHover(t){!this.interactionEnabled||!this.computeBBox().containsPoint(t.offsetX,t.offsetY)||this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!this.tickGenerationResult)return;const{rotation:e,parallelFlipRotation:i,regularFlipRotation:s}=this.calculateRotations(),n=this.label.getSideFlag();this.updatePosition();const a=this.getAxisLineCoordinates(),{tickData:r,combinedRotation:o,textBaseline:l,textAlign:h,primaryTickCount:c}=this.tickGenerationResult,d=this.tickLabelGroupSelection.nodes().map((t=>t.datum.tickId));if(this.updateSelections(a,r.ticks,{combinedRotation:o,textAlign:h,textBaseline:l,range:this.scale.range}),!t||this.animationManager.isSkipped())this.resetSelectionNodes();else{const t=this.calculateUpdateDiff(d,r);this.animationState.transition("update",t)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(n),this.updateTickLines(),this.updateTitle({anyTickVisible:r.ticks.length>0}),this.updateCrossLines({rotation:e,parallelFlipRotation:i,regularFlipRotation:s}),this.updateLayoutState(),c}getAxisLineCoordinates(){const[t,e]=Vs(this.range);return{x:0,y1:t,y2:e}}getTickLineCoordinates(t){const e=this.label.getSideFlag()*this.getTickSize(),i=Math.min(0,e);return{x1:i,x2:i+Math.abs(e),y:t.translationY}}getTickLabelProps(t,e){const{label:i}=this,{combinedRotation:s,textBaseline:n,textAlign:a,range:r}=e,o=t.tickLabel,l=i.getSideFlag()*(this.getTickSize()+i.padding+this.seriesAreaPadding),h=""!==o&&null!=o;return{tickId:t.tickId,translationY:t.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:s,rotationCenterX:l,text:o,textAlign:a,textBaseline:n,visible:h,x:l,y:0,range:r}}getTickSize(){return this.tick.enabled?this.tick.size:this.createTick().size}setTitleProps(t,e){var i;const{title:s}=this;if(s.enabled){if(t.color=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.enabled=s.enabled,t.wrapping=s.wrapping,s.enabled){const n=t.node,a=(null!=(i=s.spacing)?i:0)+e.spacing,r=this.label.getSideFlag(),o=Pn(this.rotation),l=-1===r&&o>Math.PI&&o<2*Math.PI?-1:1,h=l*r*Math.PI/2,c=1===l?"bottom":"top",{range:d}=this,u=Math.floor(l*r*(d[0]+d[1])/2),p=Math.floor(-1===r?l*-a:-a),{callbackCache:g}=this.moduleCtx,{formatter:f=t=>t.defaultValue}=s,m=g.call(f,this.getTitleFormatterParams());n.setProperties({rotation:h,text:m,textBaseline:c,visible:!0,x:u,y:p})}}else t.enabled=!1}calculateLayout(t){var e,i;const{rotation:s,parallelFlipRotation:n,regularFlipRotation:a}=this.calculateRotations(),r=this.label.getSideFlag(),o=r*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:t,parallelFlipRotation:n,regularFlipRotation:a,labelX:o,sideFlag:r}),this.updateLayoutState();const l=this.tickGenerationResult,{tickData:h,combinedRotation:c,textBaseline:d,textAlign:u}=l,p=y(l,["tickData","combinedRotation","textBaseline","textAlign"]),g=[],{x:v,y1:x,y2:b}=this.getAxisLineCoordinates(),S=new Qs(v+Math.min(r*this.seriesAreaPadding,0),x,this.seriesAreaPadding,b-x);if(g.push(S),this.tick.enabled&&h.ticks.forEach((t=>{const{x1:e,x2:i,y:s}=this.getTickLineCoordinates(t),n=new Qs(e,s,i-e,0);g.push(n)})),this.label.enabled){const t=new Ir;h.ticks.forEach((e=>{const i=this.getTickLabelProps(e,{combinedRotation:c,textAlign:u,textBaseline:d,range:this.scale.range});if(!i.visible)return;t.setProperties(m(f({},i),{translationY:Math.round(e.translationY)}));const s=t.computeTransformedBBox();s&&g.push(s)}))}if(null!=(e=this.title)&&e.enabled){const t=new Jo,e=Qs.merge(g).width;this.setTitleProps(t,{spacing:e});const i=t.node.computeTransformedBBox();i&&g.push(i)}const k=(t=>{const e=new rn,{rotation:i,translationX:s,translationY:n,rotationCenterX:a,rotationCenterY:r}=this.getAxisTransform();return rn.updateTransformMatrix(e,1,1,i,s,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:a,rotationCenterY:r}),e.transformBBox(t)})(Qs.merge(g)),w=this.isAnySeriesActive();return null==(i=this.crossLines)||i.forEach((t=>{var e;t.sideFlag=-r,t.direction=s===-Math.PI/2?"x":"y",t instanceof ho&&(t.label.parallel=null!=(e=t.label.parallel)?e:this.label.parallel),t.parallelFlipRotation=n,t.regularFlipRotation=a,t.calculateLayout(w,this.reverse)})),{primaryTickCount:t=p.primaryTickCount,bbox:k}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}setDomain(t){this.dataDomain=this.normaliseDataDomain(t),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.tick.interval);const{scale:t,nice:e}=this;$a.is(t)&&(t.nice=e,t.update())}calculateRotations(){const t=Gn(this.rotation);return{rotation:t,parallelFlipRotation:Pn(t),regularFlipRotation:Pn(t-Math.PI/2)}}generateTicks(t){let{primaryTickCount:e,parallelFlipRotation:i,regularFlipRotation:s,labelX:n,sideFlag:a}=t;var r;const{scale:o,tick:l,label:{parallel:h,rotation:c,fontFamily:d,fontSize:u,fontStyle:p,fontWeight:g}}=this,y=void 0!==e,{defaultRotation:v,configuredRotation:x,parallelFlipFlag:b,regularFlipFlag:S}=Fr({rotation:c,parallel:h,regularFlipRotation:s,parallelFlipRotation:i}),k=x+v,w=new rn,{maxTickCount:D}=this.estimateTickCount({minSpacing:l.minSpacing,maxSpacing:null!=(r=l.maxSpacing)?r:NaN}),M=!$a.is(o)&&!mr.is(o)||isNaN(D)?10:D;let C=Gr(h,x,0,a,S);const L=function(t,e,i,s){return t&&!e?i*s===-1?"hanging":"bottom":"middle"}(h,x,a,b),R={fontFamily:d,fontSize:u,fontStyle:p,fontWeight:g,textBaseline:L,textAlign:C};let T={rawTicks:[],ticks:[],labelCount:0},A=0,E=0,N=!0,O=!1;for(;N&&A<=M&&!O;){E=0,C=Gr(h,x,0,a,S);const t=this.getTickStrategies({secondaryAxis:y,index:A});for(const i of t){({tickData:T,index:A,autoRotation:E,terminate:O}=i({index:A,tickData:T,textProps:R,labelOverlap:N,terminate:O,primaryTickCount:e}));const t=0!==x||0!==E,s=k+E;C=Gr(h,x,E,a,S),N=this.checkLabelOverlap(s,t,w,T.ticks,n,m(f({},R),{textAlign:C}))}}const I=v+x+E;return!y&&T.rawTicks.length>0&&(e=T.rawTicks.length),{tickData:T,primaryTickCount:e,combinedRotation:I,textBaseline:L,textAlign:C}}getTickStrategies(t){let{index:e,secondaryAxis:i}=t;const{scale:s,label:n,tick:a}=this,r=$a.is(s)||mr.is(s),o=n.enabled&&n.avoidCollisions,l=!r&&0!==e&&o,h=!0===n.autoRotate&&void 0===n.rotation,c=[];let d;d=this.tick.values?3:i?1:l?2:0;if(c.push((t=>{let{index:e,tickData:i,primaryTickCount:s,terminate:n}=t;return this.createTickData(d,e,i,n,s)})),!r&&!isNaN(a.minSpacing)){const t=t=>{let{index:e,tickData:i,primaryTickCount:s,terminate:n}=t;return this.createTickData(2,e,i,n,s)};c.push(t)}if(!o)return c;if(n.autoWrap){const t=t=>{let{index:e,tickData:i,textProps:s}=t;return this.wrapLabels(i,e,s)};c.push(t)}else if(h){const t=t=>{let{index:e,tickData:i,labelOverlap:s,terminate:n}=t;return{index:e,tickData:i,autoRotation:this.getAutoRotation(s),terminate:n}};c.push(t)}return c}createTickData(t,e,i,s,n){var a;const{scale:r,tick:o}=this,{maxTickCount:l,minTickCount:h,defaultTickCount:c}=this.estimateTickCount({minSpacing:o.minSpacing,maxSpacing:null!=(a=o.maxSpacing)?a:NaN}),d=$a.is(r)||mr.is(r),u=!d||isNaN(l)?10:l;let p=d?Math.max(c-e,h):l;const g=void 0===o.interval&&void 0===o.values&&p>h&&(d||2===t);let f=!0;for(;f&&e<=u;){const s=i.rawTicks;p=d?Math.max(c-e,h):l;const{rawTicks:a,ticks:r,labelCount:o}=this.getTicks({tickGenerationType:t,previousTicks:s,tickCount:p,minTickCount:h,maxTickCount:l,primaryTickCount:n});i.rawTicks=a,i.ticks=r,i.labelCount=o,f=!!g&&Wo(a,s),e++}const m=void 0!==o.interval||void 0!==o.values;return s||(s=m),{tickData:i,index:e,autoRotation:0,terminate:s}}checkLabelOverlap(t,e,i,s,n,a){rn.updateTransformMatrix(i,1,1,t,0,0);const r=this.createLabelData(s,n,a,i),o=function(t,e){return isNaN(t)?e?0:10:t}(this.label.minSpacing,e);return function(t,e){const i=[];for(let s=0;s<t.length;s++){const n=t[s],{point:{x:a,y:r},label:{text:o}}=n;let{label:{width:l,height:h}}=n;if(l+=e??0,h+=e??0,i.some((t=>Bo(t,a,r,l,h))))return!0;i.push({index:s,text:o,x:a,y:r,width:l,height:h,datum:n})}return!1}(r,o)}createLabelData(t,e,i,s){const n=[],a=new Pr(i);for(const{tickLabel:r,translationY:o}of t){if(""===r||null==r)continue;const{width:t,height:i}=a.size(r),l=zr(r,new Qs(e,o,t,i),e,o,s);n.push(l)}return n}getAutoRotation(t){var e;return t?Pn(Gn(null!=(e=this.label.autoRotateAngle)?e:0)):0}getTicks(t){let{tickGenerationType:e,previousTicks:i,tickCount:s,minTickCount:n,maxTickCount:a,primaryTickCount:r}=t;var o;const{range:l,scale:h,visibleRange:c}=this;let d;switch(e){case 3:if($a.is(h)){const[t,e]=Vs(h.getDomain().map(Number));d=this.tick.values.filter((i=>i>=t&&i<=e)).sort(((t,e)=>t-e))}else d=this.tick.values;break;case 1:d=$a.is(h)?this.updateSecondaryAxisTicks(r):this.createTicks(s,n,a);break;case 2:d=this.filterTicks(i,s);break;default:d=this.createTicks(s,n,a)}this.fractionDigits=d.fractionDigits>=0?d.fractionDigits:0,this.onLabelFormatChange(d,this.label.format);const u=(null!=(o=h.bandwidth)?o:0)/2,p=[];let g=0;const f=new Map,m=Math.max(0,Math.floor(c[0]*d.length)),y=Math.min(d.length,Math.ceil(c[1]*d.length));for(let v=m;v<y;v++){const t=d[v],e=h.convert(t)+u;if(l.length>0&&!this.inRange(e,0,.001))continue;const i=this.formatTick(t,v);let s=i;if(f.has(s)){const t=f.get(s);f.set(s,t+1),s=`${s}_${t}`}else f.set(s,1);p.push({tick:t,tickId:s,tickLabel:i,translationY:Math.floor(e)}),""!==i&&null!=i&&g++}return{rawTicks:d,ticks:p,labelCount:g}}filterTicks(t,e){var i;const s=isNaN(this.tick.minSpacing)&&isNaN(null!=(i=this.tick.maxSpacing)?i:NaN)?2:Math.ceil(t.length/e);return t.filter(((t,e)=>e%s===0))}createTicks(t,e,i){var s,n,a;return this.setTickCount(t,e,i),null!=(a=null==(n=(s=this.scale).ticks)?void 0:n.call(s))?a:[]}estimateTickCount(t){let{minSpacing:e,maxSpacing:i}=t;const{minRect:s}=this,n=this.calculateRangeWithBleed(),a=Math.max(this.defaultTickMinSpacing,n/$a.defaultMaxTickCount);let r=!isNaN(i);isNaN(e)&&(e=a),isNaN(i)&&(i=n),e>i&&(e===a?e=i:i=e);let o=1;s&&(o="x"===this.direction?s.width:s.height),r&&(r=o<a);const l=zs(1,Math.floor(n/e),r?Math.floor(n/o):1/0),h=Math.min(l,Math.ceil(n/i));return{minTickCount:h,maxTickCount:l,defaultTickCount:zs(h,$a.defaultTickCount,l)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines(t){let{rotation:e,parallelFlipRotation:i,regularFlipRotation:s}=t;var n;const a=this.label.getSideFlag(),r=this.isAnySeriesActive();null==(n=this.crossLines)||n.forEach((t=>{var n;t.sideFlag=-a,t.direction=e===-Math.PI/2?"x":"y",t instanceof ho&&(t.label.parallel=null!=(n=t.label.parallel)?n:this.label.parallel),t.parallelFlipRotation=i,t.regularFlipRotation=s,t.update(r)}))}updateTickLines(){const{tick:t,label:e}=this,i=e.getSideFlag();this.tickLineGroupSelection.each((e=>{e.strokeWidth=t.width,e.stroke=t.color,e.x1=i*this.getTickSize(),e.x2=0}))}calculateAvailableRange(){return Ks(this.range)}calculateRangeWithBleed(){const t=1/Ks(this.visibleRange);return Us(this.calculateAvailableRange()*t,2)}calculateDomain(){const t=this.boundSeries.filter((t=>this.includeInvisibleDomains||t.isEnabled())).flatMap((t=>t.getDomain(this.direction)));this.setDomain(t)}getAxisTransform(){return{rotation:Gn(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineGroup:t,axisGroup:e,gridGroup:i,translation:s,gridLineGroupSelection:n,gridPadding:a,gridLength:r}=this,{rotation:o}=this.calculateRotations(),l=this.label.getSideFlag(),h=Math.floor(s.x),c=Math.floor(s.y);t.setProperties({rotation:o,translationX:h,translationY:c}),i.setProperties({rotation:o,translationX:h,translationY:c}),e.datum=this.getAxisTransform(),n.each((t=>{t.x1=a,t.x2=-l*r+a}))}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,e,i){this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?e:[],(t=>t.append(new Io)),(t=>t.tickId)),this.tickLineGroupSelection.update(e,(t=>t.appendChild(new Io)),(t=>t.tickId)),this.tickLabelGroupSelection.update(e.map((t=>this.getTickLabelProps(t,i))),(t=>t.appendChild(new Ir)),(t=>t.tickId))}updateAxisLine(){const{line:t}=this,e=t.enabled?t.width:0;this.lineNode.setProperties({stroke:t.color,strokeWidth:e})}updateGridLines(t){const{gridLine:{style:e,width:i},gridPadding:s,gridLength:n}=this;0===n||0===e.length||this.gridLineGroupSelection.each(((a,r,o)=>{const{stroke:l,lineDash:h}=e[o%e.length];a.setProperties({x1:s,x2:-t*n+s,fill:void 0,stroke:l,strokeWidth:i,lineDash:h})}))}updateLabels(){const{label:t}=this;t.enabled&&this.tickLabelGroupSelection.each(((t,e)=>{t.setProperties(e,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])}))}wrapLabels(t,e,i){const{parallel:s,maxWidth:n,maxHeight:a}=this.label;let r=this.maxThickness,o=Math.round(this.calculateAvailableRange()/t.labelCount);return s&&([r,o]=[o,r]),t.ticks.forEach((t=>{const{text:e}=Ir.wrap(t.tickLabel,n??r,a??o,i,"hyphenate");t.tickLabel=e})),{tickData:t,index:e,autoRotation:0,terminate:!0}}updateTitle(t){const{rotation:e,title:i,_titleCaption:s,lineNode:n,tickLineGroup:a,tickLabelGroup:r}=this;if(!i)return void(s.enabled=!1);let o=0;if(i.enabled&&t.anyTickVisible){const t=Sr.computeBBox([a,r,n]);o+=(0===e?t.width:t.height)+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(s,{spacing:o})}formatTick(t,e){var i,s;const{label:n,labelFormatter:a,fractionDigits:r,moduleCtx:{callbackCache:o}}=this;if(n.formatter){const s=r>0?t:String(t);return null!=(i=o.call(n.formatter,{value:s,index:e,fractionDigits:r,formatter:a}))?i:s}return a&&null!=(s=o.call(a,t))?s:String(t)}formatDatum(t){return this.formatTick(t,0)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some((t=>this.includeInvisibleDomains||t.isEnabled()))}clipTickLines(t,e,i,s){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new Qs(t,e,i,s))}clipGrid(t,e,i,s){this.gridGroup.setClipRectInGroupCoordinateSpace(new Qs(t,e,i,s))}calculatePadding(t,e,i){const s=.01*Math.abs(i?e:t);return[s,s]}getTitleFormatterParams(){var t;const e=this.boundSeries.reduce(((t,e)=>{const i=e.getKeys(this.direction),s=e.getNames(this.direction);for(let n=0;n<i.length;n++)t.push({key:i[n],name:s[n]});return t}),[]);return{direction:this.direction,boundSeries:e,defaultValue:null==(t=this.title)?void 0:t.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return f({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){return null!=this.axisContext||(this.axisContext=this.createAxisContext()),m(f({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:$a.is(this.scale),keys:()=>this.boundSeries.flatMap((t=>t.getKeys(this.direction))),seriesKeyProperties:()=>this.boundSeries.reduce(((t,e)=>(e.getKeyProperties(this.direction).forEach((e=>{t.indexOf(e)<0&&t.push(e)})),t)),[]),scaleValueFormatter:t=>{var e,i;return null==(i=(e=this.scale).tickFormat)?void 0:i.call(e,{specifier:t})},scaleBandwidth:()=>{var t;return null!=(t=this.scale.bandwidth)?t:0},scaleConvert:t=>this.scale.convert(t),scaleInvert:t=>{var e,i;return null==(i=(e=this.scale).invert)?void 0:i.call(e,t)}}}animateReadyUpdate(t){const{animationManager:e}=this.moduleCtx,i=dl(ll(this));En(this.id,"axis-group",e,[this.axisGroup],i.group),En(this.id,"line",e,[this.lineNode],i.line),En(this.id,"line-paths",e,[this.gridLineGroupSelection,this.tickLineGroupSelection],i.tick,((t,e)=>e.tickId),t),En(this.id,"tick-labels",e,[this.tickLabelGroupSelection],i.label,((t,e)=>e.tickId),t)}resetSelectionNodes(){const{gridLineGroupSelection:t,tickLineGroupSelection:e,tickLabelGroupSelection:i,lineNode:s}=this,n=ll(this);po([this.axisGroup],((t,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY}))),po([t,e],pl(n)),po([i],((t,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX}))),po([s],fl())}calculateUpdateDiff(t,e){const i=new Set,s=new Set,n=Math.max(t.length,e.ticks.length);for(let a=0;a<n;a++){const n=e.ticks[a],r=t[a],o=null==n?void 0:n.tickId;r!==o&&(s.has(o)?s.delete(o):o&&i.add(o),i.has(r)?i.delete(r):r&&s.add(r))}return{changed:i.size>0||s.size>0,added:i,removed:s}}isReversed(){return this.reverse}};ml.defaultTickMinSpacing=50,x([Yn(qn)],ml.prototype,"nice",2),x([Yn(qn)],ml.prototype,"reverse",2),x([Yn(ya)],ml.prototype,"keys",2),x([Yn(Hn,{optional:!0})],ml.prototype,"title",2),x([Uo(((t,e,i)=>t.onGridLengthChange(e,i)))],ml.prototype,"gridLength",2);var yl=ml,vl=class extends sl{constructor(){super(...arguments),this.autoRotateAngle=335}};x([Yn(qn,{optional:!0})],vl.prototype,"autoRotate",2),x([Yn(sa)],vl.prototype,"autoRotateAngle",2);var xl=class t extends yl{constructor(){super(...arguments),this.thickness=0,this.position="left"}static is(e){return e instanceof t}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t,e){return this.updateDirection(),super.update(t,e)}calculateLayout(t){return this.updateDirection(),super.calculateLayout(t)}createAxisContext(){return m(f({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(t){Ka(t,ho)}createLabel(){return new vl}};x([Yn(ea)],xl.prototype,"thickness",2),x([Yn(wa)],xl.prototype,"position",2);var bl=xl,Sl=class extends bl{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Kn),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(t){this._paddingOverrideEnabled=!0,this.scale.paddingInner=t}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(t){this.scale.paddingOuter=t}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(t){const e=[],i=new Set;for(const s of t){const t=s instanceof Date?s.getTime():s;i.has(t)||(i.add(t),e.push(s))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const t=this.boundSeries.map((t=>{var e;return null==(e=t.getBandScalePadding)?void 0:e.call(t)})).filter((t=>null!=t));t.length>0&&(this.scale.paddingInner=Math.min(...t.map((t=>t.inner))),this.scale.paddingOuter=Math.max(...t.map((t=>t.outer))))}return super.calculateDomain()}};Sl.className="CategoryAxis",Sl.type="category",x([Yn(ia)],Sl.prototype,"groupPaddingInner",2);var kl=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=t,this.parent=e,this.depth=e?e.depth+1:0,this.number=i}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter(((t,e)=>e!==this.number)):[]}};function wl(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=new kl;let s=0;return e&&t.forEach((t=>s=Math.max(s,t.labels.length))),t.forEach((t=>{if(e)for(;t.labels.length<s;)t.labels.unshift("");!function(t,e){const i=e.labels.slice().reverse(),s=i.length-1;i.forEach(((e,i)=>{const n=t.children,a=n.find((t=>t.label===e)),r=i!==s;if(a&&r)t=a;else{const i=new kl(e,t);i.number=n.length,n.push(i),r&&(t=i)}}))}(i,t)})),i}function Dl(t,e,i){const s=i/(e.number-t.number);e.change-=s,e.shift+=i,t.change+=s,e.prelim+=i,e.mod+=i}function Ml(t,e,i){return e.getSiblings().indexOf(t.ancestor)>=0?t.ancestor:i}function Cl(t,e){const i=t.children;if(i.length){let s=i[0];i.forEach((t=>{Cl(t,e),s=function(t,e,i){const s=t.getLeftSibling();if(s){let n=t,a=t,r=s,o=a.getLeftmostSibling(),l=a.mod,h=n.mod,c=r.mod,d=o.mod;for(;r.nextRight()&&a.nextLeft();){r=r.nextRight(),a=a.nextLeft(),o=o.nextLeft(),n=n.nextRight(),n.ancestor=t;const s=r.prelim+c-(a.prelim+l)+i;s>0&&(Dl(Ml(r,t,e),t,s),l+=s,h+=s),c+=r.mod,l+=a.mod,d+=o.mod,h+=n.mod}r.nextRight()&&!n.nextRight()?(n.thread=r.nextRight(),n.mod+=c-h):(a.nextLeft()&&!o.nextLeft()&&(o.thread=a.nextLeft(),o.mod+=l-d),e=t)}return e}(t,s,e)})),function(t){const e=t.children;if(e){let t=0,i=0;for(let s=e.length-1;s>=0;s--){const n=e[s];n.prelim+=t,n.mod+=t,i+=n.change,t+=n.shift+i}}}(t);const n=(i[0].prelim+i.at(-1).prelim)/2,a=t.getLeftSibling();a?(t.prelim=a.prelim+e,t.mod=t.prelim-n):t.prelim=n}else{const i=t.getLeftSibling();t.prelim=i?i.prelim+e:0}}var Ll=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(t,e){const{x:i,y:s}=e(t);i>this.right&&(this.right=i),i<this.left&&(this.left=i),s>this.bottom&&(this.bottom=s),s<this.top&&(this.top=s)}};function Rl(t,e,i){t.x=t.prelim+e,t.y=t.depth,i.update(t),t.children.forEach((s=>Rl(s,e+t.mod,i)))}function Tl(t){const e=t.children;let i=0;e.forEach((t=>{Tl(t),t.children.length?i+=t.leafCount:i++})),t.leafCount=i,e.length?(t.subtreeLeft=e[0].subtreeLeft,t.subtreeRight=e[t.children.length-1].subtreeRight,t.x=(t.subtreeLeft+t.subtreeRight)/2):(t.subtreeLeft=t.x,t.subtreeRight=t.x)}function Al(t){const e=new El;return Cl(t,1),Rl(t,-t.prelim,e),Tl(t),e}var El=class{constructor(){this.dimensions=new Ll,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(t){this.dimensions.update(t,(t=>({x:t.x,y:t.y}))),t.children.length?this.nonLeafNodes.push(t):(this.leafCount++,this.leafNodes.push(t)),t.depth>this.depth&&(this.depth=t.depth),this.nodes.push(t)}resize(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=this.leafCount-1,r=this.depth,o=this.dimensions;let l=1,h=1;if(t>0&&a){const e=(o.right-o.left)/a;l=t/a/e,n&&(l=-l)}if(e>0&&r){const t=(o.bottom-o.top)/r;h=e/r/t}const c=new Ll;this.nodes.forEach((t=>{t.screenX=t.x*l,t.screenY=t.y*h,c.update(t,(t=>({x:t.screenX,y:t.screenY})))}));const d=-c.left,u=-c.top;this.nodes.forEach((t=>{t.screenX+=d+i,t.screenY+=u+s}))}},Nl=class extends sl{constructor(){super(...arguments),this.grid=!1}};x([Yn(qn)],Nl.prototype,"grid",2);var Ol=class extends bl{constructor(t){super(t,new Kn),this.tickScale=new Kn,this.line=new nl,this.label=new Nl,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:i,gridLineGroup:s,tickScale:n,scale:a}=this;a.paddingOuter=.1,a.paddingInner=2*a.paddingOuter,this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=Oo.select(s,Io),this.axisLineSelection=Oo.select(e,Io),this.separatorSelection=Oo.select(e,Io),this.labelSelection=Oo.select(i,Ir)}updateRange(){const{range:t,visibleRange:e,scale:i}=this,s=(t[1]-t[0])/(e[1]-e[0]),n=s*e[0],a=t[0]-n;this.tickScale.range=i.range=[a,a+s],this.resizeTickTree()}resizeTickTree(){var t;const e=this.scale,i=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,s=this.tickTreeLayout,n=this.lineHeight;s&&s.resize(Math.abs(i[1]-i[0]),s.depth*n,(Math.min(i[0],i[1])||0)+(null!=(t=e.bandwidth)?t:0)/2,-s.depth*n,i[1]-i[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}calculateDomain(){var t;const{direction:e}=this;let i=null;const s=this.boundSeries.filter((t=>t.visible)).flatMap((t=>{if("y"===e||i)return t.getDomain(e);if(null===i){const s=t.getDomain(e);return i=Vt(s[0]),s}return[]}));this.setDomain(null!=(t=hs(s))?t:gs(s));const{domain:n}=this.dataDomain;this.tickTreeLayout=Al(wl(n)),this.tickScale.domain=n.concat(""),this.resizeTickTree()}update(){this.computedLayout&&(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:t}=this;t.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:t}=this.computedLayout;this.labelSelection.update(t).each(((t,e)=>{t.setProperties(e)}))}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:t}=this.computedLayout,{range:e}=this;this.separatorSelection.update(t).each(((t,i)=>{t.x1=i.x1,t.x2=i.x2,t.y1=i.y,t.y2=i.y,t.visible=i.y>=e[0]-1e-7&&i.y<=e[1]+1e-7,t.stroke=this.tick.color,t.fill=void 0,t.strokeWidth=1}))}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:t}=this.computedLayout;this.axisLineSelection.update(t).each(((t,e)=>{t.setProperties(m(f({},e),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=e.x,t.x2=e.x,t.y1=e.y1,t.y2=e.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color}))}updateCategoryGridLines(){const{gridLength:t,gridLine:e,label:i,range:s,tickScale:n}=this,a=n.ticks(),r=i.getSideFlag(),o=this.gridLineSelection.update(t?a:[]);if(t){const{width:i,style:a}=e,l=a.length;o.each(((e,o,h)=>{const c=Math.round(n.convert(o));e.x1=0,e.x2=-r*t,e.y1=c,e.y2=c,e.visible=c>=s[0]&&c<=s[1];const{stroke:d,lineDash:u}=a[h%l];e.stroke=d,e.strokeWidth=i,e.lineDash=u,e.fill=void 0}))}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:t,label:e,label:{parallel:i},moduleCtx:{callbackCache:s},range:n,title:a,title:{formatter:r=t=>t.defaultValue}={}}=this,o=t.range[0],l=t.range[1],h=Math.abs(l-o)/t.domain.length||0,c=Math.ceil(e.fontSize/h),d=Gn(this.rotation),u=Math.abs(Math.cos(d))<1e-8,p=e.getSideFlag(),g=this.lineHeight,y=this.tickTreeLayout,v=t.ticks(),x=y?y.nodes:[],b=!!y&&y.depth>1,{defaultRotation:S,configuredRotation:k,parallelFlipFlag:w}=Fr({rotation:e.rotation,parallel:i,regularFlipRotation:Pn(d-Math.PI/2),parallelFlipRotation:Pn(d)}),D=[],M=new Map;let C=0;const L=new Ir,R=(t,i)=>{var o;if(L.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===w?"bottom":"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX}),0===i){if(!((null==a?void 0:a.enabled)&&v.length>0))return!1;const i=s.call(r,this.getTitleFormatterParams());L.setProperties({fill:a.color,fontFamily:a.fontFamily,fontSize:a.fontSize,fontStyle:a.fontStyle,fontWeight:a.fontWeight,text:i,textBaseline:"hanging",translationX:t.screenY-.25*e.fontSize,translationY:t.screenX})}else{if(i%c!==0)return!1;if(!(t.screenX>=n[0]&&t.screenX<=n[1]))return!1;e.formatter?L.text=null!=(o=s.call(e.formatter,{value:String(t.label),index:i}))?o:String(t.label):L.text=String(t.label)}return!0};x.forEach(((t,e)=>{if(!R(t,e))return;const i=L.computeTransformedBBox();i&&(M.set(e,i),!t.children.length&&i.width>C&&(C=i.width))}));const T=p*e.padding,A=this.label.grid,E=[];x.forEach(((t,e)=>{let i=R(t,e);const s=e;L.x=T,L.rotationCenterX=T;const n=!t.children.length;if(n)L.rotation=k,L.textAlign="end",L.textBaseline="middle";else{L.translationX-=C-g+this.label.padding;const e=t.leafCount*h,n=M.get(s);n&&n.width>e?(i=!1,M.delete(s)):L.rotation=u?S:-Math.PI/2}if(t.parent&&b){const e=n?t.screenX-h/2:t.screenX-t.leafCount*h/2;if(n)(t.number!==t.children.length-1||A)&&E.push({y:e,x1:0,x2:-C-2*this.label.padding});else{const i=-C-2*this.label.padding+t.screenY;E.push({y:e,x1:i+g,x2:i})}}let a;if(i){const t=L.computeTransformedBBox();t&&M.set(e,t),a=m(f({},(t=>({fill:t.fill,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStyle:t.fontStyle,fontWeight:t.fontWeight,rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,text:t.text,textAlign:t.textAlign,textBaseline:t.textBaseline,translationX:t.translationX,translationY:t.translationY,visible:t.visible,x:t.x,y:t.y}))(L)),{visible:i})}else M.delete(e),a={visible:i};D.push(a)}));let N=0;E.forEach((t=>N=Math.min(N,t.x2))),E.push({y:Math.max(o,l),x1:0,x2:N});const O=[],I=[];E.forEach((t=>{if(t.y>=n[0]-1e-7&&t.y<=n[1]+1e-7){const{x1:e,x2:i,y:s}=t,n=new Qs(Math.min(e,i),s,Math.abs(e-i),0);I.push(n),O.push({x1:e,x2:i,y:s})}}));const P=[],B=[],_=y?y.depth+1:1;for(let f=0;f<_;f++){const t=v.length>0&&(0===f||A&&b),e=f>0?-C-2*this.label.padding-(f-1)*g:0,i=new Qs(e,Math.min(...n),0,Math.abs(n[1]-n[0]));B.push(i),P.push({x:e,y1:n[0],y2:n[1],visible:t})}return{bbox:(t=>{const e=new rn,{rotation:i,translationX:s,translationY:n,rotationCenterX:a,rotationCenterY:r}=this.getAxisTransform();return rn.updateTransformMatrix(e,1,1,i,s,n,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:a,rotationCenterY:r}),e.transformBBox(t)})(Qs.merge([...M.values(),...I,...B])),tickLabelLayout:D,separatorLayout:O,axisLineLayout:P}}calculateLayout(){const{axisLineLayout:t,separatorLayout:e,tickLabelLayout:i,bbox:s}=this.computeLayout();return this.computedLayout={axisLineLayout:t,separatorLayout:e,tickLabelLayout:i},{bbox:s,primaryTickCount:void 0}}};function Il(){if(typeof navigator>"u")return!1;const t=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(null==t)return!1;const[e,i]=t[1].split("_").map(Number);return e<16||16===e&&i<6}Ol.className="GroupedCategoryAxis",Ol.type="grouped-category",x([Yn(pa,{optional:!0})],Ol.prototype,"labelColor",2);var Pl=class t{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:i,height:s,pixelRatio:n}=e;this.pixelRatio=Il()?1:n??Ss("devicePixelRatio"),this.element=ks("canvas"),this.element.width=Math.round((i??this.width)*this.pixelRatio),this.element.height=Math.round((s??this.height)*this.pixelRatio),this.context=this.element.getContext("2d"),this.onEnabledChange(),this.resize(i??0,s??0),t.debugContext(this.context)}static is(e){return e instanceof t}drawImage(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.drawImage(this.context.canvas,e,i)}toDataURL(t){return this.element.toDataURL(t)}resize(t,e){if(!(t>0&&e>0))return;const{element:i,context:s,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),s.setTransform(n,0,0,n,0,0),i.style.width=t+"px",i.style.height=e+"px",this.width=t,this.height=e}snapshot(){}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onContainerChange(t,e){var i,s;t!==e&&(null==(i=this.element.parentNode)||i.removeChild(this.element),null==(s=this.container)||s.appendChild(this.element))}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"block":"none")}static debugContext(t){if(Rs.check("canvas")){const e=t.save.bind(t),i=t.restore.bind(t);let s=0;Object.assign(t,{save(){e(),s++},restore(){if(0===s)throw new Error("AG Charts - Unable to restore() past depth 0");i(),s--},verifyDepthZero(){if(0!==s)throw new Error(`AG Charts - Save/restore depth is non-zero: ${s}`)}})}}};x([Uo((t=>t.onEnabledChange()))],Pl.prototype,"enabled",2),x([Uo(((t,e,i)=>t.onContainerChange(e,i)))],Pl.prototype,"container",2);var Bl=Pl,_l=class{constructor(t){let{width:e=600,height:i=300,pixelRatio:s}=t;this.enabled=!0,this.width=0,this.height=0,this.canvas=new OffscreenCanvas(e,i),this.context=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.pixelRatio=Il()?1:s??Ss("devicePixelRatio"),this.resize(e,i),Bl.debugContext(this.context)}static isSupported(){return typeof OffscreenCanvas<"u"&&null!=OffscreenCanvas.prototype.transferToImageBitmap}drawImage(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t.drawImage(this.imageSource,e,i)}resize(t,e){if(!(t>0&&e>0))return;const{canvas:i,context:s,pixelRatio:n}=this;i.width=Math.round(t*n),i.height=Math.round(e*n),s.setTransform(n,0,0,n,0,0),this.width=t,this.height=e}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}clear(){this.context.save(),this.context.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}},Fl=class t{constructor(t,e){this.canvas=t,this.markDirty=e,this.debug=Rs.create(!0,"scene"),this.layersMap=new Map,this.nextZIndex=0,this.nextLayerId=0}static sortLayers(t,e){var i,s;return xr([t.zIndex,...null!=(i=t.zIndexSubOrder)?i:[void 0,void 0],t.id],[e.zIndex,...null!=(s=e.zIndexSubOrder)?s:[void 0,void 0],e.id],yr)}get size(){return this.layersMap.size}forEach(e){Array.from(this.layersMap.values()).sort(t.sortLayers).forEach(e)}resize(t,e){this.canvas.resize(t,e),this.layersMap.forEach((i=>{let{canvas:s}=i;return s.resize(t,e)}))}addLayer(t){const{width:e,height:i,pixelRatio:s}=this.canvas,{zIndex:n=this.nextZIndex++,name:a,zIndexSubOrder:r,getComputedOpacity:o,getVisibility:l}=t,h=new(_l.isSupported()?_l:Bl)({width:e,height:i,pixelRatio:s}),c={id:this.nextLayerId++,name:a,canvas:h,zIndex:n,zIndexSubOrder:r,getComputedOpacity:o,getVisibility:l};return n>=this.nextZIndex&&(this.nextZIndex=n+1),this.layersMap.set(h,c),this.debug("Scene.addLayer() - layers",this.layersMap),c.canvas}removeLayer(t){this.layersMap.has(t)&&(this.layersMap.delete(t),t.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}moveLayer(t,e,i){const s=this.layersMap.get(t);s&&(s.zIndex=e,s.zIndexSubOrder=i,this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layersMap))}clear(){this.layersMap.clear()}};function Gl(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!Rs.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:a=0,layersSkipped:r=0,nodesRendered:o=0,nodesSkipped:l=0}=s??{},h=performance.now(),c=e.start;e.end=performance.now();let d=0;const u=Object.entries(e).filter((t=>{let[e]=t;return"end"!==e})).map(((t,e)=>{let[i,s]=t;const n=e>0?Kl(i,d,s):null;return d=s,n})).filter((t=>null!=t)).join(" + "),p=Object.entries(n).map((t=>{let[e,i]=t;return`${e}: ${i}`})).join(" ; "),g=Rs.check("scene:stats:verbose"),f=[`${Kl("\u23f1\ufe0f",c,h)} (${u})`,`${p}`,`Layers: ${g?Vl(a,r):t.size}`,g?`Nodes: ${Vl(o,l)}`:null].filter(Wt),m=new Map(f.map((t=>[t,Ir.getTextSize(t,i.font)]))),y=Math.max(...Array.from(m.values(),(t=>t.width))),v=function(t,e){let i=0;for(const s of t)i+=e(s);return i}(m.values(),(t=>t.height));i.save(),i.fillStyle="white",i.fillRect(0,0,y,v),i.fillStyle="black";let x=0;for(const[b,S]of m.entries())x+=S.height,i.fillText(b,2,x);i.restore()}function zl(t){var e,i;return Rs.check(!0,"scene")?f(f({node:t,name:null!=(e=t instanceof Sr?t.name:null)?e:t.id,dirty:tn[t.dirty]},null!=(i=t.parent)&&i.isVirtual?{virtualParentDirty:tn[t.parent.dirty],virtualParent:t.parent}:{}),t.children.map((t=>zl(t))).reduce(((t,e)=>{let{name:i}=e;const{node:{visible:s,opacity:n,zIndex:a,zIndexSubOrder:r},node:o,virtualParent:l}=e;(!s||n<=0)&&(i=`(${i})`),o instanceof Sr&&o.isLayer()&&(i=`*${i}*`);const h=[`${i??"<unknown>"}`,`z: ${a}`,r&&`zo: ${r.map((t=>"function"==typeof t?`${t()} (fn)`:t)).join(" / ")}`,l&&"(virtual parent)"].filter((t=>!!t)).join(" ");let c=h,d=1;for(;null!=t[c]&&d<100;)c=`${h} (${d++})`;return t[c]=e,t}),{})):{}}function Wl(t){var e;if(0===t.dirty)return{dirtyTree:{},paths:[]};const i=t.children.map((t=>Wl(t))).filter((t=>t.paths.length>0)),s=Sr.is(t)&&null!=(e=t.name)?e:t.id,n=i.length?i.flatMap((t=>t.paths)).map((t=>`${s}.${t}`)):[s];return{dirtyTree:f({name:s,node:t,dirty:tn[t.dirty]},i.map((t=>t.dirtyTree)).filter((t=>null!=t.dirty)).reduce(((t,e)=>{var i;return t[null!=(i=e.name)?i:"<unknown>"]=e,t}),{})),paths:n}}function Vl(t,e){const i=t+e;return`${t} / ${i} (${Math.round(100*t/i)}%)`}function Kl(t,e,i){return`${t}: ${Math.round(100*(i-e))/100}ms`}function Yl(t){return e=>t.test(e.id)||Sr.is(e)&&null!=e.name&&t.test(e.name)}function $l(t){return e=>t===e.id||Sr.is(e)&&null!=e.name&&t===e.name}var Ul=class{constructor(t){let{width:e,height:i,pixelRatio:s}=t;this.debug=Rs.create(!0,"scene"),this.id=_s(this),this.root=null,this.isDirty=!1,this.canvas=new Bl({width:e,height:i,pixelRatio:s}),this.layersManager=new Fl(this.canvas,(()=>{this.isDirty=!0}))}get width(){var t,e;return null!=(e=null==(t=this.pendingSize)?void 0:t[0])?e:this.canvas.width}get height(){var t,e;return null!=(e=null==(t=this.pendingSize)?void 0:t[1])?e:this.canvas.height}setContainer(t){return this.canvas.container=t,this}setRoot(t){var e;return this.root===t||(this.isDirty=!0,null==(e=this.root)||e._setLayerManager(),this.root=t,t&&(t.visible=!0,t._setLayerManager(this.layersManager))),this}attachNode(t){var e;return null==(e=this.root)||e.appendChild(t),()=>this.removeChild(t)}appendChild(t){var e;return null==(e=this.root)||e.appendChild(t),this}removeChild(t){var e;return null==(e=this.root)||e.removeChild(t),this}download(t,e){var i;ws(this.canvas.toDataURL(e),null!=(i=null==t?void 0:t.trim())?i:"image")}getDataURL(t){return this.canvas.toDataURL(t)}resize(t,e){return t=Math.round(t),e=Math.round(e),t>0&&e>0&&(t!==this.width||e!==this.height)&&(this.pendingSize=[t,e],this.isDirty=!0,!0)}render(t){return S(this,null,(function*(){var e,i;const{debugSplitTimes:s={start:performance.now()},extraDebugStats:n}=t??{},{canvas:a,canvas:{context:r}={},root:o,pendingSize:l}=this;if(!r)return;if(l&&(this.layersManager.resize(...l),this.pendingSize=void 0),o&&!o.visible)return void(this.isDirty=!1);if(o&&!this.isDirty)return this.debug.check()&&this.debug("Scene.render() - no-op",{redrawType:tn[o.dirty],tree:zl(o)}),void Gl(this.layersManager,s,r,void 0,n);const h={ctx:r,devicePixelRatio:null!=(e=this.canvas.pixelRatio)?e:1,forceRender:!0,resized:!!l,debugNodes:{}};Rs.check("scene:stats:verbose")&&(h.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let c=!1;if((!o||o.dirty>=1)&&(c=!0,a.clear()),o&&Rs.check("scene:dirtyTree")){const{dirtyTree:t,paths:e}=Wl(o);Rs.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:t,paths:e})}o&&c&&(this.debug("Scene.render() - before",{redrawType:tn[o.dirty],canvasCleared:c,tree:zl(o)}),o.visible&&(r.save(),o.render(h),r.restore())),s["\u270d\ufe0f"]=performance.now(),this.layersManager.size&&c&&(r.save(),r.resetTransform(),this.layersManager.forEach((t=>{t.canvas.enabled&&t.getVisibility()&&(r.globalAlpha=t.getComputedOpacity(),t.canvas.drawImage(r))})),r.restore(),s["\u26d9"]=performance.now()),null==(i=r.verifyDepthZero)||i.call(r),this.isDirty=!1,Gl(this.layersManager,s,r,h.stats,n),function(t,e,i){var s;const n=ps(Ss("agChartsSceneDebug")).flatMap((t=>Wt(t)&&"layout"===t?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:t));for(const a of n){if(Wt(a)&&null!=i[a])continue;const e=Wt(a)?$l(a):Yl(a),n=null==t?void 0:t.findNodes(e);if(null!=n&&n.length)for(const t of n)i[Sr.is(t)&&null!=(s=t.name)?s:t.id]=t;else O.log(`Scene.render() - no debugging node with id [${a}] in scene graph.`)}e.save();for(const[a,r]of Object.entries(i)){const t=r.computeTransformedBBox();t?(e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(t.x,t.y,t.width,t.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(a,t.x,t.y,t.width),e.fillText(a,t.x,t.y,t.width)):O.log(`Scene.render() - no bbox for debugged node [${a}].`)}e.restore()}(this.root,r,h.debugNodes),o&&this.debug.check()&&this.debug("Scene.render() - after",{redrawType:tn[o.dirty],tree:zl(o),canvasCleared:c})}))}strip(){const{context:t,pixelRatio:e}=this.canvas;t.setTransform(e,0,0,e,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.canvas.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};function Xl(t){return new Promise((e=>{setTimeout((()=>e(void 0)),t)}))}Ul.className="Scene";var Hl=class{constructor(){this.cache=new WeakMap}call(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];let n,a=this.cache.get(t);const r=()=>{try{const e=t(...i);return a&&null!=n&&a.set(n,e),e}catch(e){return void O.warnOnce("User callback errored, ignoring",e)}};try{n=JSON.stringify(i)}catch{return r()}return null==a&&(a=new Map,this.cache.set(t,a)),a.has(n)?a.get(n):r()}invalidateCache(){this.cache=new WeakMap}},jl=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(t){return new Promise((e=>{this.acquireQueue.push([t,e]),this.available&&this.dispatchNext().catch((t=>O.errorOnce(t)))}))}acquireImmediately(t){return S(this,null,(function*(){return!!this.available&&(yield this.acquire(t),!0)}))}waitForClearAcquireQueue(){return S(this,null,(function*(){return this.acquire((()=>S(this,null,(function*(){}))))}))}dispatchNext(){return S(this,null,(function*(){var t,e;this.available=!1;let[i,s]=null!=(t=this.acquireQueue.shift())?t:[];for(;i;){try{yield i(),null==s||s()}catch(n){O.error("mutex callback error",n),null==s||s()}[i,s]=null!=(e=this.acquireQueue.shift())?e:[]}this.available=!0}))}},ql=class{constructor(){this.eventListeners=new Map}addEventListener(t,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(t);i?i.add(e):this.eventListeners.set(t,new Set([e]))}removeEventListener(t,e){var i;null==(i=this.eventListeners.get(t))||i.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(t)}hasEventListener(t){return this.eventListeners.has(t)}clearEventListeners(){this.eventListeners.clear()}fireEvent(t){var e;null==(e=this.eventListeners.get(t.type))||e.forEach((e=>e(t)))}},Zl=class extends me{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;super(),this.top=t,this.right=e,this.bottom=i,this.left=s}clear(){this.top=this.right=this.bottom=this.left=0}};function Jl(t,e){let i,s,n=0,a=!1;const r=()=>a,o=()=>{a=!1,null==s||s(),s=void 0,i=void 0,n>0&&t(l)},l=()=>{const t=n;n=0,a=!0;const i=e({count:t});i?i.then(o,o):o()};return{schedule(e){0===n&&!r()&&t(l,e),n++},await(){return S(this,null,(function*(){if(r())for(null==i&&(i=new Promise((t=>{s=t})));r();)yield i}))}}}x([Yn(ea)],Zl.prototype,"top",2),x([Yn(ea)],Zl.prototype,"right",2),x([Yn(ea)],Zl.prototype,"bottom",2),x([Yn(ea)],Zl.prototype,"left",2);var Ql=class{constructor(){var t;if(this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach((t=>{let[e,i]=t;return this.observe(e,i)})),this.queuedObserveRequests=[]},typeof ResizeObserver>"u")for(const[e,i]of this.elements)this.checkClientSize(e,i);else this.resizeObserver=new ResizeObserver((t=>{for(const{target:e,contentRect:i}of t){const{width:t,height:s}=i;this.checkSize(this.elements.get(e),e,t,s)}})),this.documentReady="complete"===bs().readyState,this.documentReady||null==(t=Ss())||t.addEventListener("load",this.onLoad)}destroy(){var t,e;null==(t=Ss())||t.removeEventListener("load",this.onLoad),null==(e=this.resizeObserver)||e.disconnect(),this.resizeObserver=null}checkSize(t,e,i,s){var n,a;t&&(i!==(null==(n=t.size)?void 0:n.width)||s!==(null==(a=t.size)?void 0:a.height))&&(t.size={width:i,height:s},t.cb(t.size,e))}observe(t,e){var i;this.documentReady?(this.elements.has(t)?this.removeFromQueue(t):null==(i=this.resizeObserver)||i.observe(t),this.elements.set(t,{cb:e})):this.queuedObserveRequests.push([t,e])}unobserve(t){var e;null==(e=this.resizeObserver)||e.unobserve(t),this.elements.delete(t),this.removeFromQueue(t),this.elements.size||this.destroy()}removeFromQueue(t){this.queuedObserveRequests=this.queuedObserveRequests.filter((e=>{let[i]=e;return i!==t}))}checkClientSize(t,e){var i,s;const n=null!=(i=t.clientWidth)?i:0,a=null!=(s=t.clientHeight)?s:0;this.checkSize(e,t,n,a)}},th=class extends me{constructor(){super(...arguments),this.range="tooltip"}};x([Yn(Ia(["tooltip","node"],"a range"))],th.prototype,"range",2);var eh=(t=>(t[t.FULL=0]="FULL",t[t.UPDATE_DATA=1]="UPDATE_DATA",t[t.PROCESS_DATA=2]="PROCESS_DATA",t[t.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",t[t.SERIES_UPDATE=4]="SERIES_UPDATE",t[t.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",t[t.SCENE_RENDER=6]="SCENE_RENDER",t[t.NONE=7]="NONE",t))(eh||{}),ih=class t{constructor(){this.domain=new Set}static is(e){return e instanceof t}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},sh=class t{constructor(){this.domain=[1/0,-1/0]}static is(e){return e instanceof t}static extendDomain(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1/0,-1/0];for(const i of t)"number"==typeof i&&(e[0]>i&&(e[0]=i),e[1]<i&&(e[1]=i));return e}extend(t){this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t)}getDomain(){return[...this.domain]}};function nh(t){return t.map((t=>Ft(t)?JSON.stringify(t):t)).join("-")}function ah(t){return Number.isInteger(t)?t:Math.abs(t)>1e4?Math.trunc(t):Math.round(1e4*t)/1e4}function rh(t,e){var i;const s=function(t){if(null==t)return[];let[e,i]=t.map(Number);return 0===e&&0===i?[0,1]:e===1/0&&i===-1/0?[]:(e===1/0?e=0:i===-1/0&&(i=0),Kt(e)&&Kt(i)?[e,i]:[])}(t);if(0===s.length)return s;let[n,a]=s;if(n===a){const[t,s]=null!=(i=null==e?void 0:e.calculatePadding(n,a,e.isReversed()))?i:[1,1];n-=t,a+=s}return[n,a]}function oh(){return new Map([[void 0,0]])}function lh(t,e){var i;return null!=(i=null==e?void 0:e.get(t.id))?i:0}var hh=Symbol("invalid"),ch=class{constructor(t){this.debug=Rs.create(!0,"data-model"),this.scopeCache=new Map;const{props:e,mode:i="standalone"}=t;this.mode=i;let s=!0;for(const r of e){if("key"===r.type&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===r.type&&s&&(s=!1)}this.opts=f({dataVisible:!0},t),this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];const n=t=>{let{matchGroupIds:e=[]}=t;for(const i of e)if(this.values.every((t=>t.groupId!==i)))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${i}).`)},a=t=>{let{matchIds:e}=t;for(const i of e??[])if(!this.values.some((t=>{var e,s;return null==(s=null==(e=t.idsMap)?void 0:e.get(i[0]))?void 0:s.has(i[1])})))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${i}).`)};for(const r of e)switch(r.type){case"key":this.keys.push(m(f({},r),{index:this.keys.length,missing:oh()}));break;case"value":if(null==r.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(r)}`);this.values.push(m(f({},r),{index:this.values.length,missing:oh()}));break;case"aggregate":a(r),n(r),this.aggregates.push(m(f({},r),{index:this.aggregates.length}));break;case"group-value-processor":a(r),n(r),this.groupProcessors.push(m(f({},r),{index:this.groupProcessors.length}));break;case"property-value-processor":this.propertyProcessors.push(m(f({},r),{index:this.propertyProcessors.length}));break;case"reducer":this.reducers.push(m(f({},r),{index:this.reducers.length}));break;case"processor":this.processors.push(m(f({},r),{index:this.processors.length}))}}resolveProcessedDataIndexById(t,e){var i;return null!=(i=this.resolveProcessedDataDefById(t,e))?i:{}}resolveProcessedDataDefById(t,e){const{value:i,done:s}=this.scopeDefs(t,e).next();if(s)throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return i}resolveProcessedDataDefsByIds(t,e){return e.map((e=>[e,this.resolveProcessedDataDefsById(t,e)]))}resolveProcessedDataDefsValues(t,e){let{keys:i,values:s}=e;const n={};for(const[a,[{index:r,def:o}]]of t){const t="key"===o.type?i:s;n[a]=t[r]}return n}resolveProcessedDataDefsById(t,e){const i=Array.from(this.scopeDefs(t,e));if(!i.length)throw new Error(`AG Charts - didn't find property definition for [${e}, ${t.id}]`);return i}*scopeDefs(t,e){var i,s;for(const n of null!=(s=null==(i=this.scopeCache.get(t.id))?void 0:i.get(e))?s:[])yield{index:n.index,def:n}}getDomain(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"value",s=arguments.length>3?arguments[3]:void 0;var n,a;const r=this.getDomainsByType(i,s);if(null==r)return[];const o=this.resolveProcessedDataDefsById(t,e);if(1===o.length)return null!=(n=r[o[0].index])?n:[];{const t=[1/0,-1/0];for(const{index:e}of o)sh.extendDomain(null!=(a=r[e])?a:[],t);return t}}getDomainsByType(t,e){switch(t){case"key":return e.domain.keys;case"value":return e.domain.values;case"aggregate":return e.domain.aggValues;case"group-value-processor":return e.domain.groups;default:return null}}processData(t,e){const{opts:{groupByKeys:i,groupByFn:s},aggregates:n,groupProcessors:a,reducers:r,processors:o,propertyProcessors:l}=this,h=performance.now();if(i&&0===this.keys.length)return;let c=this.extractData(t,e);if(i?c=this.groupData(c):s&&(c=this.groupData(c,s(c))),a.length>0&&this.postProcessGroups(c),n.length>0&&this.aggregateData(c),l.length>0&&this.postProcessProperties(c),r.length>0&&this.reduceData(c),o.length>0&&this.postProcessData(c),t.length>0)for(const u of E(this.keys,this.values))for(const[e,i]of u.missing)if(i>=t.length){const t=null==e?"":` for ${e}`;O.warnOnce(`the key '${u.property}' was not found in any data element${t}.`)}const d=performance.now();c.time=d-h,this.debug.check()&&function(t){var e,i;const s=(t,e)=>{e.length>0&&(O.log(`DataModel.processData() - ${t}`),O.table(e))};if(O.log("DataModel.processData() - processedData",t),s("Key Domains",t.domain.keys),s("Group Domains",null!=(e=t.domain.groups)?e:[]),s("Value Domains",t.domain.values),s("Aggregate Domains",null!=(i=t.domain.aggValues)?i:[]),"grouped"===t.type){const e=t.data.reduce(((t,e)=>{var i,s;const n=null!=(i=e.keys)?i:[],a=null!=(s=e.aggValues)?s:[],r=e.keys.map((()=>{})),o=null==a?void 0:a.map((()=>{}));return t.push(...e.values.map(((t,e)=>[...0===e?n:r,...t??[],...0==e?a:o]))),t}),[]);s("Values",e)}else{const e=t.data.reduce(((t,e)=>{var i;const s=null!=(i=e.aggValues)?i:[];return t.push([...e.keys,...e.values,...s]),t}),[]);s("Values",e)}}(c),this.scopeCache.clear();for(const u of E(this.keys,this.values,this.aggregates,this.groupProcessors,this.reducers))if(u.idsMap)for(const[t,e]of u.idsMap)for(const i of e)this.scopeCache.has(t)?this.scopeCache.get(t).has(i)?this.scopeCache.get(t).get(i).add(u):this.scopeCache.get(t).set(i,new Set([u])):this.scopeCache.set(t,new Map([[i,new Set([u])]]));return c}hasMatchingDef(t,e){var i;for(const[s,n]of t)if(null!=(i=e.get(s))&&i.has(n))return!0;return!1}valueGroupIdxLookup(t){let{matchGroupIds:e,matchIds:i}=t;const s=[];for(const[n,a]of this.values.entries())e&&(null==a.groupId||!e.includes(a.groupId))||i&&(null==a.idsMap||!this.hasMatchingDef(i,a.idsMap))||s.push(n);return s}valueIdxLookup(t,e){const i=null==t||0===t.length,s="string"==typeof e?e:e.id,n=this.values.findIndex((e=>(null==e.scopes||i&&!e.scopes.length||e.scopes.some((e=>null==t?void 0:t.includes(e))))&&(e.property===s||e.id===s||(e=>{if(e.idsMap)for(const[i,n]of e.idsMap)if(null!=t&&t.includes(i)&&n.has(s))return!0;return!1})(e))));if(-1===n)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(t)}`);return n}extractData(t,e){var i,s,n,a;const{keys:r,values:o,opts:{dataVisible:l}}=this,{dataDomain:h,processValue:c,scopes:d,allScopesHaveSameDefs:u}=this.initDataDomainProcessor(),p=new Array(l?t.length:0);let g=0,m=0;for(const[v,x]of t.entries()){const t={},h=d.size>0?new Set(d):void 0,y=l?new Array(r.length):void 0;let b,S=0;for(const e of r){if(b=c(e,x,b),b===hh)break;y&&(y[S++]=b)}if(b===hh)continue;const k=l&&o.length>0?new Array(o.length):void 0;let w;const D={};for(const i of e??[])D[i.id]=i;for(const[e,r]of o.entries()){for(const a of null!=(i=r.scopes)?i:d){const i=D[a];if(w=c(r,null!=(s=null==i?void 0:i.data[v])?s:x,w,a),w!==hh&&k){if(void 0!==i&&!1!==r.includeProperty){const e=r.includeProperty&&null!=r.id?r.id:r.property;null!=t[n=i.id]||(t[n]={}),t[i.id][e]=w}r.useScopedValues?(null!=k[e]||(k[e]={}),k[e][a]=w):k[e]=w}}if(w===hh){if(u)break;for(const t of null!=(a=r.scopes)?a:d)null==h||h.delete(t);if(0===(null==h?void 0:h.size))break}}if((w!==hh||!u)&&0!==(null==h?void 0:h.size)&&l){const e={datum:f(f({},x),t),keys:y,values:k};!u&&h&&h.size<d.size&&(m++,e.validScopes=new Set(h)),p[g++]=e}}p.length=g;const y=t=>{const e=h.get(t),i=e.getDomain();return sh.is(e)&&i[0]>i[1]?[]:i};return{type:"ungrouped",input:{count:t.length},data:p,domain:{keys:r.map(y),values:o.map(y)},defs:{allScopesHaveSameDefs:u,keys:r,values:o},partialValidDataCount:m,time:0}}groupData(t,e){const i=new Map;for(const r of t.data){const{keys:t,values:s,datum:n,validScopes:a}=r,o=e?e(r):t,l=nh(o);if(i.has(l)){const t=i.get(l);if(t.values.push(s),t.datum.push(n),null!=a&&null!=t.validScopes)for(const e of t.validScopes)a.has(e)||t.validScopes.delete(e)}else i.set(l,{keys:o,values:[s],datum:[n],validScopes:a})}const s=new Array(i.size),n=new Array(i.size);let a=0;for(const[,{keys:r,values:o,datum:l,validScopes:h}]of i.entries())0!==(null==h?void 0:h.size)&&(n[a]=r,s[a++]={keys:r,values:o,datum:l,validScopes:h});return m(f({},t),{type:"grouped",data:s,domain:m(f({},t.domain),{groups:n})})}aggregateData(t){var e,i,s,n,a,r,o;const l="ungrouped"===t.type;t.domain.aggValues=[];for(const[h,c]of this.aggregates.entries()){const d=this.valueGroupIdxLookup(c),u=[1/0,-1/0];for(const p of t.data){const t=!p.validScopes||(null==(e=c.matchScopes)?void 0:e.some((t=>{var e;return null==(e=p.validScopes)?void 0:e.has(t)})));if(null!=p.aggValues||(p.aggValues=new Array(this.aggregates.length)),!t)continue;const g=l?[p.values]:p.values;let f=null!=(s=null==(i=c.groupAggregateFunction)?void 0:i.call(c))?s:[1/0,-1/0];for(const e of g){const t=d.map((t=>e[t])),i=c.aggregateFunction(t,p.keys);i&&(f=null!=(a=null==(n=c.groupAggregateFunction)?void 0:n.call(c,i,f))?a:sh.extendDomain(i,f))}const m=(null!=(o=null==(r=c.finalFunction)?void 0:r.call(c,f))?o:f).map((t=>ah(t)));p.aggValues[h]=m,sh.extendDomain(m,u)}t.domain.aggValues.push(u)}}postProcessGroups(t){var e,i,s;const{groupProcessors:n}=this,a=new Set,r=new Map,o=new Map,l=new Map;for(const c of n){const t=this.valueGroupIdxLookup(c);o.set(c,t),l.set(c,c.adjust());for(const e of t){const t="category"===this.values[e].valueType;a.add(e),r.set(e,t?new ih:new sh)}}const h=t=>{var e;for(const i of a)null==(e=r.get(i))||e.extend(t[i])};for(const c of t.data){for(const a of n){if(c.validScopes&&!(null==(e=a.matchScopes)?void 0:e.some((t=>{var e;return null==(e=c.validScopes)?void 0:e.has(t)}))))continue;const n=null!=(i=o.get(a))?i:[],r=null==(s=l.get(a))?void 0:s();if(r)if("grouped"===t.type)for(const t of c.values)t&&r(t,n);else c.values&&r(c.values,n)}if("grouped"===t.type)for(const t of c.values)h(t);else h(c.values)}for(const[c,d]of r)t.domain.values[c]=d.getDomain()}postProcessProperties(t){for(const{adjust:e,property:i,scopes:s}of this.propertyProcessors)e()(t,this.valueIdxLookup(s,i))}reduceData(t){var e;null!=t.reduced||(t.reduced={});for(const i of this.reducers){const s=i.reducer();let n=i.initialValue;for(const a of t.data)(!a.validScopes||null!=(e=i.scopes)&&e.some((t=>{var e;return null==(e=a.validScopes)?void 0:e.has(t)})))&&(n=s(n,a));t.reduced[i.property]=n}}postProcessData(t){null!=t.reduced||(t.reduced={});for(const e of this.processors)t.reduced[e.property]=e.calculate(t)}initDataDomainProcessor(){const{keys:t,values:e}=this,i=new Set;for(const l of e)if(l.scopes)for(const t of l.scopes)i.add(t);const s=new Map,n=new Map;let a=!0;const r=()=>{var n;for(const r of E(t,e))"category"===r.valueType?s.set(r,new ih):(s.set(r,new sh),a&&(a=(null!=(n=r.scopes)?n:[]).length===i.size))};r();const o=this.buildAccessors(E(t,e));return{dataDomain:s,processValue:(t,e,i,a)=>{var l,h,c,d,u;let p,g;if(o.has(t.property)){try{g=o.get(t.property)(e)}catch{}p=null!=g}else p=t.property in e,g=p?e[t.property]:t.missingValue;null!=t.forceValue&&(g=p&&$s(g)?-1*t.forceValue:t.forceValue,p=!0);if(!p&&!("missingValue"in t)){const e=null!=(l=t.missing.get(a))?l:0;t.missing.set(a,e+1)}if(s.has(t)||r(),p&&null!=(c=null==(h=t.validation)?void 0:h.call(t,g,e))&&!c){if(!("invalidValue"in t))return"integrated"!==this.mode&&O.warnOnce(`invalid value of type [${typeof g}] ignored:`,`[${g}]`),hh;g=t.invalidValue}return t.processor&&(n.has(t)||n.set(t,t.processor()),g=null==(d=n.get(t))?void 0:d(g,i===hh?void 0:i)),null==(u=s.get(t))||u.extend(g),g},initDataDomain:r,scopes:i,allScopesHaveSameDefs:a}}buildAccessors(t){const e=new Map;if("integrated"===this.mode)return e;for(const i of t){if(!i.property.includes(".")&&!i.property.includes("["))continue;let t;t=i.property.startsWith("[")?`return datum${i.property};`:`return datum.${i.property};`,e.set(i.property,new Function("datum",t))}return e}};var dh=class t{constructor(t){this.mode=t,this.debug=Rs.create(!0,"data-model"),this.requested=[],this.status="setup"}request(t,e,i){return S(this,null,(function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise(((s,n)=>{this.requested.push({id:t,opts:i,data:e,resultCb:s,reject:n})}))}))}execute(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const t=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",t);const e=this.mergeRequested(t);this.debug("DataController.execute() - merged",e),this.debug.check()&&(Ss().processedData=[]);const i=this.hasMultipleDataSources(t),s=this.requested.map((t=>{let{id:e}=t;return e}));for(const{opts:a,data:r,resultCbs:o,rejects:l,ids:h}of e){const e=i||a.props.some((t=>("key"===t.type||"value"===t.type)&&t.useScopedValues));try{const i=new ch(m(f({},a),{mode:this.mode})),n=i.processData(r,t);this.debug.check()&&Ss("processedData").push(n),0===(null==n?void 0:n.partialValidDataCount)?o.forEach(((t,a)=>t({dataModel:i,processedData:this.processScopedData(h[a],n,s,e)}))):n?this.splitResult(i,n,h,o):l.forEach((t=>t(new Error("AG Charts - no processed data generated"))))}catch(n){l.forEach((t=>t(n)))}}}hasMultipleDataSources(t){if(t.length){const[{data:e},...i]=t;return i.some((t=>e!==t.data))}return!1}processScopedData(t,e,i,s){const n=e=>{if(Array.isArray(e))return e.map(n);const a=s?f(f({},e),e[t]):e;for(const t of i)delete a[t];return a},a=e=>{var i;return Array.isArray(e)?e.map(a):null!=(i=null==e?void 0:e[t])?i:e};return m(f({},e),{data:e.data.map((t=>{var e;return m(f({},t),{datum:n(t.datum),values:s?null==(e=t.values)?void 0:e.map(a):t.values})}))})}validateRequests(t){const e=[];for(const[i,s]of t.entries())i>0&&s.data.length!==t[0].data.length&&!1===s.opts.groupByData?s.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):e.push(s);return e}mergeRequested(e){const i=[];for(const s of e){const e=i.find(t.groupMatch(s));e?e.push(s):i.push([s])}return i.map(t.mergeRequests)}splitResult(t,e,i,s){for(let n=0;n<i.length;n++){const a=i[n];(0,s[n])({dataModel:t,processedData:m(f({},e),{data:e.data.filter((t=>{let{validScopes:e}=t;var i;return null==(i=null==e?void 0:e.has(a))||i}))})})}}static groupMatch(t){let{opts:e,data:i}=t;function s(t){return t.filter((t=>"key"===t.type)).map((t=>t.property)).join(";")}return t=>{let[n]=t;return(!1===e.groupByData||n.data===i)&&n.opts.groupByKeys===e.groupByKeys&&n.opts.dataVisible===e.dataVisible&&n.opts.groupByFn===e.groupByFn&&s(n.opts.props)===s(e.props)}}static mergeRequests(e){function i(t){var e;("key"===t.type||"value"===t.type)&&(t.useScopedValues=gs(null!=(e=t.scopes)?e:[]).length>1)}return e.reduce(((e,s)=>{var n,a,{id:r,data:o,resultCb:l,reject:h,opts:c}=s,d=c,{props:u}=d,p=y(d,["props"]);e.ids.push(r),e.rejects.push(h),e.resultCbs.push(l),null!=e.data||(e.data=o),null!=e.opts||(e.opts=m(f({},p),{props:[]}));for(const g of u){i(g),t.createIdsMap(g);const s=e.opts.props.find((e=>e.type===g.type&&t.deepEqual(e,g)));s?(null!=s.scopes||(s.scopes=[]),s.scopes.push(...null!=(n=g.scopes)?n:[]),("key"===s.type||"value"===s.type)&&null!=(a=g.idsMap)&&a.size&&t.mergeIdsMap(g.idsMap,s.idsMap)):e.opts.props.push(g)}return e}),{ids:[],rejects:[],resultCbs:[],data:null,opts:null})}static mergeIdsMap(t,e){for(const[i,s]of t)if(e.has(i))for(const t of s)e.get(i).add(t);else e.set(i,new Set(s))}static createIdsMap(t){if(null!=t.id&&(null!=t.idsMap||(t.idsMap=new Map),null!=t.scopes))for(const e of t.scopes)t.idsMap.has(e)?t.idsMap.get(e).add(t.id):t.idsMap.set(e,new Set([t.id]))}static deepEqual(e,i){if(e===i)return!0;if(e&&i&&"object"==typeof e&&"object"==typeof i){if(e.constructor!==i.constructor)return!1;let s,n;if(Array.isArray(e)){if(n=e.length,n!==i.length)return!1;for(s=n-1;s>=0;s--)if(!t.deepEqual(e[s],i[s]))return!1;return!0}const a=Object.keys(e);if(n=a.length,n!==Object.keys(i).length)return!1;for(s=n-1;s>=0;s--){const n=a[s];if(!t.skipKeys.has(n)&&(!Object.hasOwn(i,n)||!t.deepEqual(e[n],i[n])))return!1}return!0}return!1}};dh.skipKeys=new Set(["id","idsMap","type","scopes","useScopedValues"]);var uh=dh,ph=class{constructor(){this.registeredListeners=new Map}addListener(t,e){const i={symbol:Symbol(t),handler:e};return this.registeredListeners.has(t)?this.registeredListeners.get(t).push(i):this.registeredListeners.set(t,[i]),()=>this.removeListener(i.symbol)}removeListener(t){for(const[e,i]of this.registeredListeners.entries()){const s=i.findIndex((e=>e.symbol===t));if(s>=0){i.splice(s,1),0===i.length&&this.registeredListeners.delete(e);break}}}dispatch(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];for(const a of this.getListenersByType(t))try{a.handler(...i)}catch(n){O.errorOnce(n)}}dispatchWrapHandlers(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];for(const r of this.getListenersByType(t))try{e(r.handler,...s)}catch(a){O.errorOnce(a)}}getListenersByType(t){var e;return null!=(e=this.registeredListeners.get(t))?e:[]}destroy(){this.registeredListeners.clear()}},gh=class extends ph{constructor(t){super(),this.animationManager=t,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=Rs.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(t){"function"==typeof t&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=t,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(t){this.isLoadingData=!0,this.throttledFetch(t)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(t){return N((t=>this.fetch(t)),t,{leading:!1,trailing:!0})}createThrottledDispatch(t){return N(((t,e)=>{this.debug(`DataService - dispatching 'data-load' | ${t}`),this.dispatch("data-load",{type:"data-load",data:e})}),t,{leading:!0,trailing:!0})}fetch(t){return S(this,null,(function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),i=this.requestCounter++;let s;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);try{s=yield this.dataSourceCallback(t),this.debug(`DataService - response | ${performance.now()-e}ms | ${i}`)}catch(a){this.debug(`DataService - request failed | ${i}`),O.errorOnce(`DataService - request failed | [${a}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex((t=>t===i));-1===n||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1?this.debug(`DataService - discarding stale request | ${i}`):(this.freshRequests=this.freshRequests.slice(n+1),0===this.freshRequests.length&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error"))}))}};x([$o({newValue(t){this.throttledDispatch=this.createThrottledDispatch(t)}})],gh.prototype,"dispatchThrottle",2),x([$o({newValue(t){this.throttledFetch=this.createThrottledFetch(t)}})],gh.prototype,"requestThrottle",2);var fh=class{constructor(t){this.maxAnimationTime=t,this.debug=Rs.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Mn.map((t=>[t,[]]))),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}isActive(){return this.controllers.size>0}getActiveControllers(){var t;return null!=(t=this.phases.get(Mn[this.currentPhase]))?t:[]}checkOverlappingId(t){null!=t&&this.controllers.has(t)&&(this.controllers.get(t).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${t}`),this.skip())}addAnimation(t){var e;if(!t.isComplete)return Mn.indexOf(t.phase)<this.currentPhase?(this.debug("Skipping animation due to being for an earlier phase",t.id),void t.stop()):(this.controllers.set(t.id,t),void(null==(e=this.phases.get(t.phase))||e.push(t)))}removeAnimation(t){this.controllers.delete(t.id);const e=this.phases.get(t.phase),i=null==e?void 0:e.indexOf(t);null!=i&&i>=0&&(null==e||e.splice(i,1))}progress(t){if(!this.isReady)return;let e=0===t?.01:t;const i=()=>{const t=Mn[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:t,phaseMeta:Cn[t]}};let{phase:s,phaseControllers:n,phaseMeta:a}=i();const r=()=>null==Mn[this.currentPhase],o=()=>{for(({phase:s,phaseControllers:n,phaseMeta:a}=i());!r()&&0===n.length;)this.currentPhase++,({phase:s,phaseControllers:n,phaseMeta:a}=i()),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:e},n)},l=this.controllers.size;this.debug(`AnimationBatch - ${t}ms; phase ${s} with ${null==n?void 0:n.length} of ${l}`);do{const t=e,i=a.skipIfNoEarlierAnimations&&0===this.animationTimeConsumed;let s=0;for(const a of n)i?a.stop():e=Math.min(a.update(t),e),a.isComplete&&(s++,this.removeAnimation(a));this.animationTimeConsumed+=t-e,this.debug(`AnimationBatch - updated ${n.length} controllers; ${s} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),o()}while(e>0&&!r());this.animationTimeConsumed>this.maxAnimationTime&&(O.warnOnce("Animation batch exceeded max animation time, skipping.",new Map(this.controllers.entries())),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let t=!0;for(const[,e]of this.controllers)if(e.duration>0&&!0!==Cn[e.phase].skipIfNoEarlierAnimations){t=!1;break}if(!t)for(const[,e]of this.controllers)e.autoplay&&e.play(!0)}skip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===this.skipAnimations&&!0===t){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=t}play(){for(const t of this.controllers.values())t.play()}pause(){for(const t of this.controllers.values())t.pause()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){O.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(t){if(null!=t&&this.controllers.has(t)){const e=this.controllers.get(t);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(t){for(const e of this.controllers.values())e.groupId===t&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach((t=>t())),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}},mh=class{constructor(){this.listeners=new ph}addListener(t,e){return this.listeners.addListener(t,e)}removeListener(t){this.listeners.removeListener(t)}destroy(){this.listeners.destroy()}},yh=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","enter","page-left","wheel"],vh=["pagehide","mousemove","mouseup"],xh=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"],bh=(t=>(t[t.Default=8]="Default",t[t.ZoomDrag=4]="ZoomDrag",t[t.ContextMenu=2]="ContextMenu",t[t.Animation=1]="Animation",t[t.All=15]="All",t))(bh||{}),Sh=class t extends mh{constructor(t){super(),this.debug=Rs.create(!0,"interaction"),this.eventHandler=t=>this.processEvent(t),this.mouseDown=!1,this.touchDown=!1,this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=8,this.rootElement=bs().body,this.element=t;for(const e of xh)e.startsWith("touch")?t.addEventListener(e,this.eventHandler,{passive:!0}):"wheel"===e?t.addEventListener(e,this.eventHandler,{passive:!1}):t.addEventListener(e,this.eventHandler);for(const e of vh)Ss().addEventListener(e,this.eventHandler);Ds("\n.ag-chart-wrapper {\n    touch-action: none;\n}\n","interactionManager")}destroy(){super.destroy();for(const t of vh)Ss().removeEventListener(t,this.eventHandler);for(const t of xh)this.element.removeEventListener(t,this.eventHandler)}addListener(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;return super.addListener(t,(t=>{this.getState()&i&&e(t)}))}pushState(t){this.stateQueue|=t}popState(t){this.stateQueue&=~t}getState(){return this.stateQueue&-this.stateQueue}processEvent(t){const e=this.decideInteractionEventTypes(t);e.length>0&&this.dispatchEvent(t,e).catch((t=>O.errorOnce(t)))}dispatchEvent(t,e){return S(this,null,(function*(){const i=this.calculateCoordinates(t);if(null!=i)for(const s of e)this.listeners.dispatchWrapHandlers(s,((t,e)=>{e.consumed||t(e)}),this.buildEvent(f({type:s,event:t},i)))}))}recordDown(t){t instanceof MouseEvent&&(ee(["offsetX","offsetY"],this.clickHistory[0],t),ee(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),ee(["offsetX","offsetY"],this.dblclickHistory[0],t)),this.dragStartElement=t.target}recordUp(t){t instanceof MouseEvent&&ee(["offsetX","offsetY"],this.dblclickHistory[1],t),this.dragStartElement=void 0}decideInteractionEventTypes(t){const e="drag-start";switch(t.type){case"click":case"dblclick":case"contextmenu":case"wheel":return[t.type];case"mousedown":return this.mouseDown=!0,this.recordDown(t),[e];case"touchstart":return this.touchDown=!0,this.recordDown(t),[e];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(t)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(t)?(this.mouseDown=!1,this.recordUp(t),["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(t)?(this.touchDown=!1,this.recordUp(t),["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const i=t instanceof MouseEvent&&1===(1&t.buttons);return this.mouseDown!==i?(this.mouseDown=i,[i?e:"drag-end"]):["enter"];case"pagehide":return["page-left"]}return[]}isEventOverElement(t){var e;return t.target===this.element||(null==(e=t.target)?void 0:e.parentElement)===this.element}calculateCoordinates(e){var i;if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if(typeof TouchEvent<"u"&&e instanceof TouchEvent){const s=null!=(i=e.touches[0])?i:e.changedTouches[0],{clientX:n,clientY:a,pageX:r,pageY:o}=s;return m(f({},t.NULL_COORDS),{clientX:n,clientY:a,pageX:r,pageY:o})}return e instanceof PageTransitionEvent?e.persisted?void 0:t.NULL_COORDS:void 0}getMouseEventCoords(t){const{clientX:e,clientY:i,pageX:s,pageY:n}=t;let{offsetX:a,offsetY:r}=t;const o=t=>{let e=0,i=0;for(;t;)e+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;return{x:e,y:i}};if(null!=this.dragStartElement&&t.target!==this.dragStartElement){const e=o(this.dragStartElement),i=o(t.target);a-=e.x-i.x,r-=e.y-i.y}return{clientX:e,clientY:i,pageX:s,pageY:n,offsetX:a,offsetY:r}}isWheelEvent(t){return"wheel"===t.type}buildEvent(t){const{type:e,event:i,clientX:s,clientY:n}=t;let{offsetX:a,offsetY:r,pageX:o,pageY:l}=t;if(!Kt(a)||!Kt(r)){const t=this.element.getBoundingClientRect();a=s-t.left,r=n-t.top}if(!Kt(o)||!Kt(l)){const t=this.rootElement.getBoundingClientRect();o=s-t.left,l=n-t.top}let[h,c]=[NaN,NaN];if(this.isWheelEvent(i)){const t=0===i.deltaMode?.01:1;h=i.deltaX*t,c=i.deltaY*t}let d=[];"click"===i.type?d=this.clickHistory:"dblclick"===i.type&&(d=this.dblclickHistory);const u={type:e,offsetX:a,offsetY:r,pageX:o,pageY:l,deltaX:h,deltaY:c,pointerHistory:d,sourceEvent:i,consumed:!1,consume(){u.consumed=!0}};return this.debug("InteractionManager - builtEvent: ",u),u}};Sh.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var kh=Sh;function wh(t){return null==t||!isNaN(t)&&t>=0&&t<=2}var Dh=class extends mh{constructor(t,e){super(),this.interactionManager=t,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new fh(1.5*this.defaultDuration),this.debug=Rs.create(!0,"animation"),this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(t){var e,i=y(t,[]);const s=this.batch;try{s.checkOverlappingId(i.id)}catch(h){return void this.failsafeOnError(h)}const n=null!=(e=i.id)?e:Math.random().toString(),a=this.isSkipped()||"none"===i.phase;a&&this.debug("AnimationManager - skipping animation");const{delay:r,duration:o}=i;if(!wh(r))throw new Error(`Animation delay of ${r} is unsupported (${n})`);if(!wh(o))throw new Error(`Animation duration of ${o} is unsupported (${n})`);const l=new Tn(m(f({},i),{id:n,skip:a,autoplay:!!this.isPlaying&&i.autoplay,phase:i.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(l,this.defaultDuration))return this.batch.addAnimation(l),l}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch($n){this.failsafeOnError($n)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch($n){this.failsafeOnError($n)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(t){try{this.batch.stopByAnimationId(t)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(t){try{this.batch.stopByAnimationGroupId(t)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.skipAnimations=t}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(t){this.requestId=requestAnimationFrame(t)}forceTimeJump(t,e){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||null!==this.requestId)return;let t;const e=i=>S(this,null,(function*(){const s=()=>S(this,null,(function*(){const e=i-(t??i);t=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:e}),this.interactionManager.pushState(1);try{this.batch.progress(e)}catch(s){this.failsafeOnError(s)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:e})}));this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(s):yield this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(e):this.batch.stop()}));this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O.error("Error during animation, skipping animations",t),e&&this.cancelAnimation()}startBatch(t){this.debug(`AnimationManager - startBatch() with skipAnimations=${t}.`),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new fh(1.5*this.defaultDuration),!0===t&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(1),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(t){this.batch.stoppedCbs.add(t)}},Mh=class extends mh{legendItemClick(t,e,i,s){const n={type:"legend-item-click",series:t,itemId:e,enabled:i,legendItemName:s};this.listeners.dispatch("legend-item-click",n)}legendItemDoubleClick(t,e,i,s,n){const a={type:"legend-item-double-click",series:t,itemId:e,enabled:i,legendItemName:n,numVisibleItems:s};this.listeners.dispatch("legend-item-double-click",a)}axisHover(t,e){const i={type:"axis-hover",axisId:t,direction:e};this.listeners.dispatch("axis-hover",i)}},Ch=class{constructor(){this.defaultActions=[],this.disabledActions=new Set}copyDefaultActions(){return[...this.defaultActions]}registerDefaultAction(t){t.id&&this.defaultActions.find((e=>{let{id:i}=e;return i===t.id}))||this.defaultActions.push(t)}enableAction(t){this.disabledActions.delete(t)}disableAction(t){this.disabledActions.add(t)}isDisabled(t){return this.disabledActions.has(t)}},Lh=class extends Map{constructor(t,e){super(),this.defaultValue=t,this.defaultState=e}set(t,e){return this.delete(t),typeof e<"u"&&super.set(t,e),this}stateId(){var t;return null!=(t=Array.from(this.keys()).pop())?t:this.defaultState}stateValue(){var t;return null!=(t=Array.from(this.values()).pop())?t:this.defaultValue}},Rh=class{constructor(t){this.element=t,this.stateTracker=new Lh("default")}updateCursor(t,e){this.stateTracker.set(t,e),this.element.style.cursor=this.stateTracker.stateValue()}getCursor(){return this.element.style.cursor}};function Th(t,e){return Math.sqrt(function(t,e){const i=t.screenX-e.screenX,s=t.screenY-e.screenY;return i*i+s*s}(t,e))}var Ah=class extends mh{constructor(t){super(),this.touchstart=t=>this.onTouchStart(t),this.touchmove=t=>this.onTouchMove(t),this.touchend=t=>this.onTouchEnd(t),this.touchcancel=t=>this.onTouchCancel(t),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.element=t,t.addEventListener("touchstart",this.touchstart,{passive:!0}),t.addEventListener("touchmove",this.touchmove,{passive:!0}),t.addEventListener("touchend",this.touchend),t.addEventListener("touchcancel",this.touchcancel)}destroy(){const{element:t}=this;t.removeEventListener("touchstart",this.touchstart),t.removeEventListener("touchmove",this.touchmove),t.removeEventListener("touchend",this.touchend),t.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(t){const{touches:e}=t,{finger1:i,finger2:s}=this.pinch;if(0!==this.pinch.status&&2===e.length){if(e[0].identifier===i.identifier&&e[1].identifier===s.identifier)return[e[0],e[1]];if(e[0].identifier===s.identifier&&e[1].identifier===i.identifier)return[e[1],e[0]]}}copyTouchData(t){const e=["identifier","screenX","screenY"];ee(e,this.pinch.finger1,t.touches[0]),ee(e,this.pinch.finger2,t.touches[1]),this.pinch.distance=Th(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(t,e){const{finger1:i,finger2:s,origin:n}=this.pinch,a={type:t,finger1:i,finger2:s,deltaDistance:e,origin:n};this.listeners.dispatch(t,a)}onTouchStart(t){this.stopPinchTracking();const{pinch:e}=this;2===t.touches.length&&(e.status=1,this.copyTouchData(t),e.origin.x=(t.touches[0].clientX+t.touches[1].clientX)/2,e.origin.y=(t.touches[0].clientY+t.touches[1].clientY)/2)}onTouchMove(t){const e=this.findPinchTouches(t);if(void 0!==e){const[i,s]=e,{pinch:n}=this,a=Th(i,s),r=a-n.distance;1===n.status?Math.abs(r)>1&&(n.status=2,this.copyTouchData(t),this.dispatchPinchEvent("pinch-start",0)):2===n.status?(n.distance=a,this.copyTouchData(t),this.dispatchPinchEvent("pinch-move",r)):O.error(`unexpected pinch.status: ${n.status}`)}}onTouchEnd(t){this.stopPinchTracking()}onTouchCancel(t){this.stopPinchTracking()}stopPinchTracking(){const{pinch:t}=this;2===t.status&&this.dispatchPinchEvent("pinch-end",0),this.pinch.status=0}},Eh=class extends mh{constructor(){super(...arguments),this.highlightStates=new Lh,this.pickedStates=new Lh}updateHighlight(t,e){const{activeHighlight:i}=this;this.highlightStates.set(t,e),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i})}getActiveHighlight(){return this.activeHighlight}updatePicked(t,e){this.pickedStates.set(t,e),this.activePicked=this.pickedStates.stateValue()}getActivePicked(){return this.activePicked}isEqual(t,e){return t===e||(null==t?void 0:t.series)===(null==e?void 0:e.series)&&(null==t?void 0:t.itemId)===(null==e?void 0:e.itemId)&&(null==t?void 0:t.datum)===(null==e?void 0:e.datum)}};function Nh(t){const{width:e,height:i}=t.getter.getCachedBBox();return e*i}var Oh=class{constructor(){this.elems=[]}add(t,e){e.forEach((e=>this.elems.push({value:t,getter:e})))}find(t,e){return this.elems.filter((i=>function(t,e,i){return t.getter.getCachedBBox().containsPoint(e,i)}(i,t,e))).sort(((t,e)=>Nh(t)-Nh(e))).map((t=>t.value))}*[Symbol.iterator](){for(const{value:t}of Object.values(this.elems))yield t}clear(){this.elems.length=0}},Ih=class extends ph{},Ph=class{constructor(t){this.interactionManager=t,this.isDragging=!1,this.leftCanvas=!1,this.eventHandler=t=>this.processEvent(t),this.regions=new Oh,this.destroyFns=[],this.destroyFns.push(...yh.map((e=>t.addListener(e,this.eventHandler,15))))}destroy(){this.destroyFns.forEach((t=>t())),this.currentRegion=void 0;for(const t of this.regions)t.listeners.destroy();this.regions.clear()}pushRegion(t,e){const i={name:t,listeners:new Ih};return this.regions.add(i,e),i}addRegion(t,e){for(var i=arguments.length,s=new Array(i>2?i-2:0),n=2;n<i;n++)s[n-2]=arguments[n];return this.makeObserver(this.pushRegion(t,[e,...s]))}getRegion(t){return this.makeObserver(this.findByName(t))}findByName(t){for(const e of this.regions)if(e.name===t)return e;O.errorOnce(`unable '${t}' region found`)}makeObserver(t){const{interactionManager:e}=this;return new class{addListener(i,s){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;var a;return null!=(a=null==t?void 0:t.listeners.addListener(i,(t=>{t.consumed||e.getState()&n&&s(t)})))?a:()=>{}}}}checkPointerHistory(t,e){for(const i of e.pointerHistory){const e=this.pickRegion(i.offsetX,i.offsetY);if(t.name!==(null==e?void 0:e.name))return!1}return!0}dispatch(t,e){null==t||t.listeners.dispatch(e.type,e)}handleDragging(t){const{currentRegion:e}=this;switch(t.type){case"drag-start":this.isDragging=!0,this.leftCanvas=!1;break;case"leave":return this.leftCanvas=!0,this.isDragging;case"enter":return this.leftCanvas=!1,this.isDragging;case"drag":if(this.isDragging)return this.dispatch(e,t),!0;break;case"drag-end":if(this.isDragging)return this.isDragging=!1,this.dispatch(e,t),this.leftCanvas&&this.dispatch(e,m(f({},t),{type:"leave"})),!0}return!1}processEvent(t){if(this.handleDragging(t))return;const{currentRegion:e}=this,i=this.pickRegion(t.offsetX,t.offsetY);void 0!==e&&(null==i?void 0:i.name)!==e.name&&this.dispatch(e,m(f({},t),{type:"leave"})),void 0!==i&&i.name!==(null==e?void 0:e.name)&&this.dispatch(i,m(f({},t),{type:"enter"})),void 0!==i&&this.checkPointerHistory(i,t)&&this.dispatch(i,t),this.currentRegion=i}pickRegion(t,e){const i=this.regions.find(t,e);return i.length>0?i[0]:void 0}},Bh=class t extends mh{constructor(t){super(),this.chart=t}subscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_GROUP,i=this.get(e);return i||(i=new Set,t.chartsGroups.set(e,i)),i.add(this.chart),this}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_GROUP;var i;return null==(i=this.get(e))||i.delete(this.chart),this}getChart(){return this.chart}getGroup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_GROUP;const i=this.get(e);return i?Array.from(i):[]}getGroupSiblings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.DEFAULT_GROUP;return this.getGroup(e).filter((t=>t!==this.chart))}get(e){return t.chartsGroups.get(e)}};Bh.chartsGroups=new Map,Bh.DEFAULT_GROUP=Symbol("sync-group-default");var _h=Bh,Fh=class extends mh{constructor(){super(...arguments),this.visible=new Lh(!1)}toggleVisibility(t,e){const i=this.visible.stateValue();this.visible.set(t,e);const s=this.visible.stateValue();s!==i&&this.listeners.dispatch("visibility",{type:"visibility",visible:s??!1})}addButton(t,e){this.listeners.dispatch("button-added",{type:"button-added",id:t,options:e})}removeButton(t){this.listeners.dispatch("button-removed",{type:"button-removed",id:t})}pressButton(t){this.listeners.dispatch("button-pressed",{type:"button-pressed",id:t})}},Gh=`\n.${Ho} {\n    transition: transform 0.1s ease;\n    max-width: 100%;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.${Ho}-wrap-always {\n    overflow-wrap: break-word;\n    word-break: break-word;\n    hyphens: none;\n}\n\n.${Ho}-wrap-hyphenate {\n    overflow-wrap: break-word;\n    word-break: break-word;\n    hyphens: auto;\n}\n\n.${Ho}-wrap-on-space {\n    overflow-wrap: normal;\n    word-break: normal;\n}\n\n.${Ho}-wrap-never {\n    white-space: pre;\n    text-overflow: ellipsis;\n}\n\n.${Ho}-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.${Ho}-no-animation {\n    transition: none !important;\n}\n\n.${Ho}-hidden {\n    visibility: hidden;\n}\n\n.${Ho}-title {\n    overflow: hidden;\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n    text-overflow: inherit;\n}\n\n.${Ho}-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.${Ho}-content {\n    overflow: hidden;\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n    text-overflow: inherit;\n}\n\n.${Ho}-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${Ho}-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n`,zh=class{constructor(t,e){if(this.canvasElement=t,this.tooltip=e,this.stateTracker=new Lh,this.appliedState=null,typeof IntersectionObserver<"u"){const t=new IntersectionObserver((t=>{for(const e of t)e.target===this.canvasElement&&0===e.intersectionRatio&&this.tooltip.toggle(!1)}),{root:this.tooltip.root});t.observe(this.canvasElement),this.observer=t}Ds(Gh,"tooltip")}updateTooltip(t,e,i){var s;this.tooltip.enabled&&(i??(i=null==(s=this.stateTracker.get(t))?void 0:s.content),this.stateTracker.set(t,{content:i,meta:e}),this.applyStates())}removeTooltip(t){this.tooltip.enabled&&(this.stateTracker.delete(t),this.applyStates())}getTooltipMeta(t){var e;return null==(e=this.stateTracker.get(t))?void 0:e.meta}destroy(){var t;null==(t=this.observer)||t.unobserve(this.canvasElement)}applyStates(){var t;const e=this.stateTracker.stateId(),i=e?this.stateTracker.get(e):null;if(null==(null==i?void 0:i.meta)||null==(null==i?void 0:i.content))return this.appliedState=null,void this.tooltip.toggle(!1);const s=this.canvasElement.getBoundingClientRect();if((null==(t=this.appliedState)?void 0:t.content)===(null==i?void 0:i.content)){const t=this.tooltip.isVisible();this.tooltip.show(s,null==i?void 0:i.meta,null,t)}else this.tooltip.show(s,null==i?void 0:i.meta,null==i?void 0:i.content);this.appliedState=i}static makeTooltipMeta(t,e){var i,s,n,a,r,o,l;const{offsetX:h,offsetY:c}=t,{tooltip:d}=e.series.properties,u={offsetX:h,offsetY:c,enableInteraction:null!=(s=null==(i=d.interaction)?void 0:i.enabled)&&s,lastPointerEvent:{offsetX:h,offsetY:c},showArrow:d.showArrow,position:{type:d.position.type,xOffset:d.position.xOffset,yOffset:d.position.yOffset}},p=null!=(l=null!=(a=null==(n=e.yBar)?void 0:n.upperPoint)?a:e.midPoint)?l:null==(o=(r=e.series).datumMidPoint)?void 0:o.call(r,e);if("node"===d.position.type&&p){const{x:t,y:i}=p,s=e.series.contentGroup.inverseTransformPoint(t,i);return m(f({},u),{offsetX:Math.round(s.x),offsetY:Math.round(s.y)})}return u}},Wh=class extends mh{constructor(){super(...arguments),this.axisZoomManagers=new Map,this.state=new Lh(void 0,"initial"),this.rejectCallbacks=new Map}updateAxes(t){var e;const i=new Map(t.map((t=>[t.id,this.axisZoomManagers.get(t.id)])));this.axisZoomManagers.clear();for(const s of t)this.axisZoomManagers.set(s.id,null!=(e=i.get(s.id))?e:new Vh(s));this.state.size>0&&t.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}updateZoom(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0;var n;if(s&&this.rejectCallbacks.set(t,s),0!==this.axisZoomManagers.size)this.state.set(t,e),this.axisZoomManagers.forEach((i=>{i.updateZoom(t,null==e?void 0:e[i.getDirection()])})),this.applyChanges();else{const a=this.state.stateId();"initial"===a||a===t||i?(this.state.set(t,e),a!==t&&(null==(n=this.rejectCallbacks.get(a))||n(t))):null==s||s(a)}}updateAxisZoom(t,e,i){var s;null==(s=this.axisZoomManagers.get(e))||s.updateZoom(t,i),this.applyChanges()}fireZoomPanStartEvent(){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start"})}getZoom(){let t,e;if(this.axisZoomManagers.forEach((i=>{"x"===i.getDirection()?t??(t=i.getZoom()):"y"===i.getDirection()&&(e??(e=i.getZoom()))})),t||e)return{x:t,y:e}}getAxisZoom(t){var e,i;return null!=(i=null==(e=this.axisZoomManagers.get(t))?void 0:e.getZoom())?i:{min:0,max:1}}getAxisZooms(){const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]={direction:i.getDirection(),zoom:i.getZoom()};return t}applyChanges(){if(!Array.from(this.axisZoomManagers.values(),(t=>t.applyChanges())).some(Boolean))return;const t={};for(const[e,i]of this.axisZoomManagers.entries())t[e]=i.getZoom();this.listeners.dispatch("zoom-change",m(f({type:"zoom-change"},this.getZoom()),{axes:t}))}},Vh=class{constructor(t){this.axis=t;const[e=0,i=1]=t.visibleRange;this.state=new Lh({min:e,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(t,e){this.state.set(t,e)}getZoom(){return Se(this.state.stateValue())}applyChanges(){const t=this.currentZoom;return this.currentZoom=this.state.stateValue(),t.min!==this.currentZoom.min||t.max!==this.currentZoom.max}},Kh=class extends ph{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(t,e){if(this.isLayoutStage(t)||this.isLayoutComplete(t))return super.addListener(t,e);throw new Error(`AG Charts - unsupported listener type: ${t}`)}dispatchPerformLayout(t,e){return this.isLayoutStage(t)?this.getListenersByType(t).reduce(((t,e)=>{try{return e.handler(t)}catch(i){return O.errorOnce(i),t}}),e):e}dispatchLayoutComplete(t){this.dispatch(this.layoutComplete,t)}isLayoutStage(t){return t!==this.layoutComplete}isLayoutComplete(t){return t===this.layoutComplete}},Yh=["top","right","bottom","left"],$h=["category","grouped-category","number","log","time"];var Uh=class{constructor(){this.result=[],this.valid=[],this.invalid=[]}push(t,e){const{result:i,valid:s,invalid:n}=this;(function(t){return $h.includes(t.type)})(e)&&(function(t){return"string"==typeof t&&Yh.includes(t)}(e.position)?s.push(t):n.push(t)),i.push(t)}guessInvalidPositions(){const t=this.valid.filter((t=>function(t){return $h.includes(t.type)}(t))).map((t=>t.position)).filter((t=>void 0!==t)),e=["top","right","bottom","left"];for(const i of this.invalid){let s=e.pop();for(;t.includes(s)&&void 0!==s;)s=e.pop();if(void 0===s)break;i.position=s}return this.result}},Xh=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo","stacked","grouped","stackGroup"];var Hh=class extends co{applyOptions(t){for(const e of this.moduleMap.values())e.module.optionsKey in t&&ve(e.moduleInstance)&&e.moduleInstance.set(t[e.module.optionsKey])}*legends(){for(const{module:t,moduleInstance:e}of this.moduleMap.values())"legend"===t.type&&(yield{legendType:t.identifier,legend:e})}},jh="ag-chart-overlay",qh="ag-chart-dark-overlay",Zh=class extends me{constructor(t,e){super(),this.className=t,this.defaultText=e,this.darkTheme=!1}getText(){var t;return null!=(t=this.text)?t:this.defaultText}getElement(t,e){null!=this.element||(this.element=ks("div")),this.element.classList.add(this.className,jh),this.element.classList.toggle(qh,this.darkTheme);const i=this.element;if(i.style.position="absolute",i.style.left=`${e.x}px`,i.style.top=`${e.y}px`,i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,this.renderer){const t=this.renderer();t instanceof HTMLElement?i.replaceChildren(t):i.innerHTML=t}else{const e=ks("div");Object.assign(e.style,{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"}),e.innerText=this.getText(),i.replaceChildren(e),null==t||t.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(t){i.style.opacity=String(t)},onStop(){i.style.opacity="1"}})}return this.element}removeElement(t){if(this.element){if(t){const{element:e}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(t){e.style.opacity=String(t)},onStop(){e.remove()}})}else this.element.remove();this.element=void 0}}};x([Yn(Jn,{optional:!0})],Zh.prototype,"text",2),x([Yn(Zn,{optional:!0})],Zh.prototype,"renderer",2),x([Yn(qn)],Zh.prototype,"darkTheme",2);var Jh=class extends me{constructor(){super(...arguments),this.loading=new Zh("ag-chart-loading-overlay","Loading data..."),this.noData=new Zh("ag-chart-no-data-overlay","No data to display"),this.noVisibleSeries=new Zh("ag-chart-no-visible-series","No visible series")}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement()}};x([Yn(Hn)],Jh.prototype,"loading",2),x([Yn(Hn)],Jh.prototype,"noData",2),x([Yn(Hn)],Jh.prototype,"noVisibleSeries",2);var Qh=`\n.${jh} {\n    color: #181d1f;\n}\n\n.${jh}.${qh} {\n    color: #ffffff;\n}\n\n.${jh}--loading {\n    color: rgb(140, 140, 140); /* DEFAULT_MUTED_LABEL_COLOUR */\n}\n\n.${jh}__loading-background {\n    background: white; /* DEFAULT_BACKGROUND_FILL */\n}\n\n.${jh}.${qh} .${jh}__loading-background {\n    background: #192232; /* DEFAULT_DARK_BACKGROUND_FILL */\n}\n`;function tc(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];for(const i of t)"number"==typeof i&&(i<0&&(e[0]+=i),i>0&&(e[1]+=i));return e}function ec(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:[i],type:"aggregate",aggregateFunction:t=>tc(t)}}function ic(t,e,i){return{id:e,scopes:[t.id],type:"aggregate",matchGroupIds:i?[i]:void 0,aggregateFunction:t=>tc(t),groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,s;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(s=null==t?void 0:t[1])?s:0,e}}}function sc(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:[i],type:"aggregate",aggregateFunction:t=>sh.extendDomain(t)}}function nc(t,e){return{id:e,scopes:[t.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0];var i,s;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(s=null==t?void 0:t[1])?s:0,e}}}function ac(t,e,i){return{id:e,scopes:[t.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:t=>tc(t),groupAggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,-1];var i,s;return e[0]+=null!=(i=null==t?void 0:t[0])?i:0,e[1]+=null!=(s=null==t?void 0:t[1])?s:0,e[2]++,e},finalFunction:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];const e=t[0]+t[1];return e>=0?[0,e/t[2]]:[e/t[2],0]}}}function rc(t,e,i,s){const n={id:e,scopes:[t.id],matchGroupIds:s?[s]:void 0,type:"aggregate",aggregateFunction:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const s=e[1]-e[0];return i.aggregateFunction(t).map((t=>t/s))}};return i.groupAggregateFunction&&(n.groupAggregateFunction=i.groupAggregateFunction),n}function oc(t){return()=>{let e=0;return i=>Kt(i)?(e+=t?Math.max(0,i):i,e):i}}function lc(){return()=>{let t=0;return e=>{if(!Kt(e))return e;const i=t;return t+=e,i}}}var hc={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let t=NaN;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1/0;const i=(arguments.length>1?arguments[1]:void 0).keys[0],s=Math.abs(i-t);return t=i,!isNaN(s)&&s>0&&s<e?s:e}}},cc={type:"processor",property:"aggValuesExtent",calculate:t=>{var e,i,s,n;const a=[...null!=(i=null==(e=t.domain.aggValues)?void 0:e[0])?i:[0,0]];for(const[r,o]of null!=(n=null==(s=t.domain.aggValues)?void 0:s.slice(1))?n:[])r<a[0]&&(a[0]=r),o>a[1]&&(a[1]=o);return a}},dc={type:"processor",property:"sortedGroupDomain",calculate:t=>{let{domain:{groups:e}}=t;return null==e?void 0:e.slice().sort(((t,e)=>{for(let i=0;i<t.length;i++){const s=t[i]-e[i];if(0!==s)return s}return 0}))}};function uc(t){let{normaliseTo:e,mode:i}=t;const s=(t,i)=>{const s=t*e/i;return s>=0?Math.min(e,s):Math.max(-e,s)};return()=>()=>(t,e)=>{const n=[0,0];for(const s of e){const e=t[s],a=e<0?0:1;"sum"===i?n[a]+=e:n[a]=0===a?Math.min(n[a],e):Math.max(n[a],e)}const a=Math.max(Math.abs(n[0]),n[1]);for(const i of e)t[i]=s(t[i],a)}}function pc(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sum";return{scopes:[t.id],type:"group-value-processor",matchGroupIds:e,adjust:Ar({normaliseTo:i,mode:s},uc)}}function gc(t){let{normaliseTo:e,zeroDomain:i,rangeMin:s,rangeMax:n}=t;const a=e[1]-e[0],r=(t,s,n)=>{const r=e[0]+(t-s)/n*a;return 0===n?i:r>=e[1]?e[1]:r<e[0]?e[0]:r};return()=>(t,i)=>{let[a,o]=t.domain.values[i];null!=s&&(a=s),null!=n&&(o=n);const l=o-a;t.domain.values[i]=[e[0],e[1]];for(const e of t.data){let s=e.values;"ungrouped"===t.type&&(s=[s]);for(const t of s)t[i]=r(t[i],a,l)}}}function fc(t,e,i,s,n,a){return{scopes:[t.id],type:"property-value-processor",property:e,adjust:Ar({normaliseTo:i,rangeMin:n,rangeMax:a,zeroDomain:s},gc)}}function mc(t,e){return{type:"processor",scopes:[t.id],property:"animationValidation",calculate(i){var s;const{keys:n,values:a}=i.defs,{input:r,data:o}=i;let l=!0,h=!0;const c=[];for(let u=0;u<a.length;u++)null!=(s=a[u].scopes)&&s.includes(t.id)&&null!=e&&e.includes(a[u].id)&&c.push([u,a[u]]);const d=(t,e,s)=>{var n;if("category"===e.valueType){const e=i.domain[s][t];return void(l&&(l=e.length===r.count))}let a=null==(n=o[0])?void 0:n[s][t];for(let i=1;(l||h)&&i<o.length;i++){const e=o[i][s][t];h&&(h=a<=e),l&&(l=a!==e),a=e}};for(let t=0;(l||h)&&t<n.length;t++)d(t,n[t],"keys");for(let t=0;(l||h)&&t<c.length;t++){const[e,i]=c[t];d(e,i,"values")}return{uniqueKeys:l,orderedKeys:h}}}}function yc(t){let{mode:e,separateNegative:i}=t;return()=>()=>(t,s)=>{const n=[0,0];for(const a of s){const s=t[a],r=$s(s)&&i?0:1;Kt(s)&&("normal"===e&&(n[r]+=s),t[a]=n[r],"trailing"===e&&(n[r]+=s))}}}function vc(t){let{mode:e,sum:i}=t;return()=>{const t=[];let s=!0;return()=>(n,a)=>{let r=0;for(const o of a){const a=n[o],l=s&&"current"===i?0:t[o];t[o]=a;const h="current"===i?a:l;Kt(a)&&Kt(l)?("normal"===e&&(r+=h),n[o]=r,"trailing"===e&&(r+=h)):n[o]=r}s=!1}}}function xc(t,e,i,s){let n,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(i.startsWith("window")){n=Ar({mode:i.endsWith("-trailing")?"trailing":"normal",sum:s},vc)}else n=Ar({mode:i,separateNegative:a},yc);return{scopes:[t.id],type:"group-value-processor",matchGroupIds:[e],adjust:n}}function bc(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:"processor",property:"diff",calculate:i=>{const s=new Map,n=new Map,a=new Map,r=new Map,o=Math.max(t.data.length,i.data.length);for(let l=0;l<o;l++){const o=t.data[l],h=i.data[l],c=o?Sc(o.keys):"",d=h?Sc(h.keys):"";h&&o&&c===d?us(o.values,h.values)||a.set(d,h):(r.has(d)?((e||!us(r.get(d).values,h.values))&&(a.set(d,h),s.set(d,h)),r.delete(d)):h&&n.set(d,h),n.has(c)?((e||!us(n.get(c).values,o.values))&&(a.set(c,o),s.set(c,o)),n.delete(c)):o&&(a.delete(c),r.set(c,o)))}return{changed:n.size>0||a.size>0||r.size>0,added:n,updated:a,removed:r,moved:s}}}}function Sc(t){return Nt(t)?t.map((t=>$r(t))).join("___"):$r(t)}var kc=(t=>(t[t.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",t[t.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",t[t.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",t[t.NEAREST_NODE=3]="NEAREST_NODE",t))(kc||{});function wc(t){return null!=Yr(t,!0)}function Dc(t){return null!=Yr(t,!1)}function Mc(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return f({scopes:[t.id],property:e,type:"key",valueType:i?"range":"category",validation:i?wc:Dc},s)}function Cc(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return f({scopes:[t.id],property:e,type:"value",valueType:i?"range":"category",validation:i?wc:Dc},s)}function Lc(t,e){const i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{min:s=-1/0,max:n=1/0}=i,a=y(i,["min","max"]);return f({scopes:[t.id],type:"value",property:e,valueType:"range",validation:wc,processor:()=>t=>Kt(t)?zs(s,t,n):t},a)}function Rc(t,e,i){return m(f({},Cc(t,e,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})),{processor:()=>{let t=0;return e=>{const i=t;return t=e,i}}})}function Tc(){return()=>{let t=0;return e=>{const i=t;return t=e,i}}}function Ac(t,e,i){const s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{onlyPositive:n}=s,a=y(s,["onlyPositive"]);return m(f({},Cc(t,e,i,a)),{processor:oc(n)})}function Ec(t,e,i){return m(f({},Cc(t,e,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})),{processor:lc()})}function Nc(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"current",a=arguments.length>5?arguments[5]:void 0;return[Cc(t,e,i,a),xc(t,a.groupId,s,n,a.separateNegative),...null!=a.rangeId?[sc(t,a.rangeId,a.groupId)]:[]]}var Oc=class{constructor(t,e,i,s){let{datum:n}=i;this.type=t,this.event=e,this.datum=n,this.seriesId=s.id}},Ic=class{constructor(t,e,i){this.series=t,this.seriesGrouping=e,this.oldGrouping=i,this.type="groupingChanged"}},Pc=class extends ql{constructor(t){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeEvent=Oc,this.internalId=_s(this),this.rootGroup=new Sr({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new co,this._declarationOrder=-1,this.seriesListeners=new ph;const{moduleCtx:e,useLabelLayer:i=!1,pickModes:s=[1],directionKeys:n={},directionNames:a={},contentGroupVirtual:r=!0,canHaveAxes:o=!1}=t;this.ctx=e,this.directionKeys=n,this.directionNames=a,this.canHaveAxes=o,this.contentGroup=this.rootGroup.appendChild(new Sr({name:`${this.internalId}-content`,layer:!r,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new Sr({name:`${this.internalId}-highlight`,layer:!r,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new Sr({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new Sr({name:"highlightLabel",zIndex:10})),this.pickModes=s,this.labelGroup=this.rootGroup.appendChild(new Sr({name:`${this.internalId}-series-labels`,layer:i,zIndex:7})),this.annotationGroup=new Sr({name:`${this.id}-annotation`,layer:!r,isVirtual:r,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var t,e;return null!=(e=null==(t=this.properties)?void 0:t.id)?e:this.internalId}get type(){var t;return null!=(t=this.constructor.type)?t:""}get data(){var t;return null!=(t=this._data)?t:this._chartData}set visible(t){this.properties.visible=t,this.visibleChanged()}get visible(){return this.properties.visible}get hasData(){return null!=this.data&&this.data.length>0}get tooltipEnabled(){var t,e;return null!=(e=null==(t=this.properties.tooltip)?void 0:t.enabled)&&e}onDataChange(){this.nodeDataRefresh=!0}setOptionsData(t){this._data=t,this.onDataChange()}setChartData(t){this._chartData=t,this.data===t&&this.onDataChange()}onSeriesGroupingChange(t,e){const{internalId:i,type:s,visible:n}=this;t&&this.ctx.seriesStateManager.deregisterSeries({id:i,type:s}),e&&this.ctx.seriesStateManager.registerSeries({id:i,type:s,visible:n,seriesGrouping:e}),this.fireEvent(new Ic(this,e,t))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;switch(t){case"data":case"paths":break;case"labels":i+=2e4;break;case"marker":i+=1e4;break;case"highlight":e+=15e3;break;case"annotation":i+=15e3}return[()=>this._declarationOrder+i,e]}addListener(t,e){return this.seriesListeners.addListener(t,e)}dispatch(t,e){this.seriesListeners.dispatch(t,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach((t=>t())),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(t,e){const i=this.resolveKeyDirection(t),s=null==e?void 0:e[i],n=[];if(!s)return n;const a=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const s of e)Array.isArray(s)?a(...s):"object"==typeof s?a(...Object.values(s)):n.push(s)};return a(...s.map((t=>this.properties[t]))),n}getKeys(t){return this.getDirectionValues(t,this.directionKeys)}getKeyProperties(t){var e;return null!=(e=this.directionKeys[this.resolveKeyDirection(t)])?e:[]}getNames(t){return this.getDirectionValues(t,this.directionNames)}resolveKeyDirection(t){return t}getDomain(t){const e=this.getSeriesDomain(t),i=this.moduleMap.mapModules((e=>e.getDomain(t)));return e.concat(i.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:e=!0}=this.properties.highlightStyle.series;if(!e||1===t)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;default:return t}}getStrokeWidth(t){const{strokeWidth:e,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||void 0===e)return t;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return t}}isItemIdHighlighted(){var t,e;const i=null==(e=null==(t=this.ctx.highlightManager)?void 0:t.getActiveHighlight())?void 0:e.series;return null==i?0:i!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules((t=>t.getTooltipParams())).reduce(((t,e)=>f(f({},e),t)),{})}pickNode(t,e){const{pickModes:i,visible:s,rootGroup:n}=this;if(s&&n.visible)for(const a of i){if(e&&!e.includes(a))continue;let i;switch(a){case 0:i=this.pickNodeExactShape(t);break;case 1:case 2:i=this.pickNodeMainAxisFirst(t,2===a);break;case 3:i=this.pickNodeClosestDatum(t)}if(i)return{pickMode:a,match:i.datum,distance:i.distance}}}pickNodeExactShape(t){const e=this.contentGroup.pickNode(t.x,t.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(t){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(t,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeClick",t,e,this))}fireNodeDoubleClickEvent(t,e){this.fireEvent(new this.NodeEvent("nodeDoubleClick",t,e,this))}createNodeContextMenuActionEvent(t,e){return new this.NodeEvent("nodeContextMenuAction",t,e,this)}toggleSeriesItem(t,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:t,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return m(f({},this.ctx),{series:this})}getLabelText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:String;var s;return t.formatter&&null!=(s=this.ctx.callbackCache.call(t.formatter,f({seriesId:this.id},e)))?s:i(e.value)}getMarkerStyle(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.getStyle();var s,n;const a=jt({size:null!=(n=null==(s=e.datum.point)?void 0:s.size)?n:0},i);if(t.formatter){return jt(this.ctx.callbackCache.call(t.formatter,m(f(f({seriesId:this.id},a),e),{datum:e.datum.datum})),a)}return a}updateMarkerStyle(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getStyle(),{applyTranslation:n=!0}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const{point:a}=i.datum,r=this.getMarkerStyle(e,i,s),o=this.visible&&r.size>0&&a&&!isNaN(a.x)&&!isNaN(a.y);n?t.setProperties(m(f({visible:o},r),{translationX:null==a?void 0:a.x,translationY:null==a?void 0:a.y})):t.setProperties(f({visible:o},r)),"function"==typeof e.shape&&!t.dirtyPath&&(t.path.clear({trackChanges:!0}),t.updatePath(),t.checkPathDirty())}getMinRects(t,e){}get nodeDataDependencies(){var t;return null!=(t=this._nodeDataDependencies)?t:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(t){const{width:e,height:i}=t??{width:NaN,height:NaN},s=t?{seriesRectWidth:e,seriesRectHeight:i}:void 0,n=null!=be(this.nodeDataDependencies,s);return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}};Pc.highlightedZIndex=1e12,x([$o({changeValue:function(t,e){this.onSeriesGroupingChange(e,t)}})],Pc.prototype,"seriesGrouping",2);var Bc=class{constructor(t){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=t}setSeriesCount(t){this.expectedSeriesCount=t}requestGroup(t){var e,i,s;const{internalId:n,type:a,rootGroup:r,highlightGroup:o,annotationGroup:l,seriesGrouping:h}=t,{groupIndex:c=n}=h??{};if(null!=this.series[n])throw new Error(`AG Charts - series already has an allocated layer: ${this.series[n]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!=(e=this.groups)[a]||(e[a]={});const d=this.lookupIdx(c);let u=this.groups[a][d];return u||(u=null!=(s=(i=this.groups[a])[d])?s:i[d]={seriesIds:[],group:this.rootGroup.appendChild(new Sr({name:`${a}-content`,layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new Sr({name:`${a}-highlight`,layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new Sr({name:`${a}-annotation`,layer:!0,zIndex:4,zIndexSubOrder:t.getGroupZIndexSubOrder("annotation")}))}),this.series[n]={layerState:u,seriesConfig:t},u.seriesIds.push(n),u.group.appendChild(r),u.highlight.appendChild(o),u.annotation.appendChild(l),u.group}changeGroup(t){var e,i;const{internalId:s,seriesGrouping:n,type:a,rootGroup:r,highlightGroup:o,annotationGroup:l,oldGrouping:h}=t,{groupIndex:c=s}=n??{};null!=(i=null==(e=this.groups[a])?void 0:e[c])&&i.seriesIds.includes(s)||(null!=this.series[s]&&this.releaseGroup({internalId:s,seriesGrouping:h,type:a,rootGroup:r,highlightGroup:o,annotationGroup:l}),this.requestGroup(t))}releaseGroup(t){var e,i,s,n,a;const{internalId:r,seriesGrouping:o,rootGroup:l,highlightGroup:h,annotationGroup:c,type:d}=t,{groupIndex:u=r}=o??{};if(null==this.series[r])throw new Error(`AG Charts - series doesn't have an allocated layer: ${r}`);const p=this.lookupIdx(u),g=null!=(s=null==(e=this.groups[d])?void 0:e[p])?s:null==(i=this.series[r])?void 0:i.layerState;if(g&&(g.seriesIds=g.seriesIds.filter((t=>t!==r)),g.group.removeChild(l),g.highlight.removeChild(h),g.annotation.removeChild(c)),0===(null==g?void 0:g.seriesIds.length))this.rootGroup.removeChild(g.group),this.rootGroup.removeChild(g.highlight),this.rootGroup.removeChild(g.annotation),delete this.groups[d][p],delete this.groups[d][r];else if((null==g?void 0:g.seriesIds.length)>0){const t=null==(a=this.series[null==(n=null==g?void 0:g.seriesIds)?void 0:n[0]])?void 0:a.seriesConfig;g.group.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("data"),g.highlight.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("highlight"),g.annotation.zIndexSubOrder=null==t?void 0:t.getGroupZIndexSubOrder("annotation")}delete this.series[r]}lookupIdx(t){return"normal"===this.mode?t:"string"!=typeof t||(t=Number(t.split("-").slice(-1)[0]))?Math.floor(30*zs(0,t/this.expectedSeriesCount,1)):0}destroy(){for(const t of Object.values(this.groups))for(const e of Object.values(t))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}},_c=class{constructor(){this.groups={}}registerSeries(t){let{id:e,seriesGrouping:i,visible:s,type:n}=t;var a;i&&(null!=(a=this.groups)[n]||(a[n]={}),this.groups[n][e]={grouping:i,visible:s})}deregisterSeries(t){let{id:e,type:i}=t;this.groups[i]&&delete this.groups[i][e],this.groups[i]&&0===Object.keys(this.groups[i]).length&&delete this.groups[i]}getVisiblePeerGroupIndex(t){let{type:e,seriesGrouping:i,visible:s}=t;var n;if(!i)return{visibleGroupCount:s?1:0,visibleSameStackCount:s?1:0,index:0};const a=new Set,r=new Set;for(const l of Object.values(null!=(n=this.groups[e])?n:{}))l.visible&&(a.add(l.grouping.groupIndex),l.grouping.groupIndex===i.groupIndex&&r.add(l.grouping.stackIndex));const o=Array.from(a);return o.sort(((t,e)=>t-e)),{visibleGroupCount:o.length,visibleSameStackCount:r.size,index:o.indexOf(i.groupIndex)}}},Fc=class{constructor(t,e){this.chartLike=t,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",(t=>this.layoutComplete(t))),this.layoutService.addListener("start-layout",(t=>this.positionPadding(t.shrinkRect))),this.layoutService.addListener("start-layout",(t=>this.positionCaptions(t.shrinkRect))))}destroy(){this.destroyFns.forEach((t=>t()))}layoutComplete(t){let{clipSeries:e,series:{paddedRect:i}}=t;const{seriesArea:s,seriesRoot:n}=this.chartLike;s.clip||e?n.setClipRectInGroupCoordinateSpace(i):n.setClipRectInGroupCoordinateSpace()}positionPadding(t){const{padding:e}=this.chartLike;return t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),{shrinkRect:t}}positionCaptions(t){var e,i;const{title:s,subtitle:n,footnote:a}=this.chartLike,r=t.clone(),o=e=>{var i;const s=t.height/10,n=null!=(i=e.lineHeight)?i:e.fontSize*Ir.defaultLineHeightRatio,a=t.width,r=Math.max(n,s);e.computeTextWrap(a,r)},l=t=>"left"===t?r.x:"right"===t?r.x+r.width:("center"!==t&&O.error(`invalid textAlign value: ${t}`),r.x+r.width/2),h=(t,e)=>{const i=r.y;t.node.x=l(t.textAlign),t.node.y=i,t.node.textBaseline="top",o(t);const s=t.node.computeBBox(),n=Math.ceil(s.y-i+s.height+e);r.shrink(n,"top")};if(s.node.visible=s.enabled,n.node.visible=n.enabled,a.node.visible=a.enabled,s.enabled){const{spacing:t=(n.enabled?Jo.SMALL_PADDING:Jo.LARGE_PADDING)}=s;h(s,t)}return n.enabled&&h(n,null!=(e=n.spacing)?e:0),a.enabled&&((t,e)=>{const i=r.y+r.height;t.node.x=l(t.textAlign),t.node.y=i,t.node.textBaseline="bottom",o(t);const s=t.node.computeBBox(),n=Math.ceil(i-s.y+e);r.shrink(n,"bottom")})(a,null!=(i=a.spacing)?i:0),{shrinkRect:r}}},Gc=class{constructor(t,e,i,s){this.chart=t,this.dataService=e,this.updateService=i,this.zoomManager=s,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",(()=>this.onDataSourceChange())),this.dataService.addListener("data-load",(()=>this.onDataLoad())),this.dataService.addListener("data-error",(()=>this.onDataError())),this.updateService.addListener("update-complete",(()=>this.onUpdateComplete())),this.zoomManager.addListener("zoom-change",(()=>this.onZoomChange())))}destroy(){this.destroyFns.forEach((t=>t()))}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow().catch((t=>O.errorOnce(t)))}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return S(this,null,(function*(){if(!this.dataService.isLazy())return;const t=this.getValidAxis();let e,i=!0;if(t){const s=this.zoomManager.getAxisZoom(t.id);e=this.getAxisWindow(t,s),i=this.shouldRefresh(t,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:null==e?void 0:e.min,windowEnd:null==e?void 0:e.max})}))}getValidAxis(){return this.chart.axes.find((t=>"time"===t.type))}shouldRefresh(t,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(t.id);return(!i||e.min!==i.min||e.max!==i.max)&&(this.lastAxisZooms.set(t.id,e),!0)}getAxisWindow(t,e){var i,s;const n=null==(s=(i=t.scale).getDomain)?void 0:s.call(i);if(!e||!n||0===n.length||isNaN(Number(n[0])))return;const a=Number(n[1])-Number(n[0]);return{min:new Date(Number(n[0])+a*e.min),max:new Date(Number(n[0])+a*e.max)}}},zc=class{constructor(t,e,i,s,n){this.chartLike=t,this.overlays=e,this.dataService=i,this.layoutService=s,this.animationManager=n,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",(t=>this.onLayoutComplete(t))))}destroy(){this.destroyFns.forEach((t=>t()))}onLayoutComplete(t){let{series:{rect:e}}=t;const i=this.dataService.isLoading(),s=this.chartLike.series.some((t=>t.hasData)),n=this.chartLike.series.some((t=>t.visible));this.toggleOverlay(this.overlays.loading,e,i),this.toggleOverlay(this.overlays.noData,e,!i&&!s),this.toggleOverlay(this.overlays.noVisibleSeries,e,s&&!n)}toggleOverlay(t,e,i){if(i){const i=t.getElement(this.animationManager,e);this.chartLike.element.append(i)}else t.removeElement(this.animationManager)}},Wc=class extends ph{constructor(t){super(),this.updateCallback=t}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;this.updateCallback(t,e)}dispatchUpdateComplete(t){this.dispatch("update-complete",{type:"update-complete",minRect:null==t?void 0:t.minRect,minVisibleRect:null==t?void 0:t.minVisibleRect})}},Vc=Rs.create(!0,"opts"),Kc=class extends me{constructor(){super(...arguments),this.padding=new Zl(0)}};x([Yn(qn,{optional:!0})],Kc.prototype,"clip",2),x([Yn(Hn)],Kc.prototype,"padding",2);var Yc=class t extends ql{constructor(t,e){var i,s,n;super(),i=this,this.id=_s(this),this.seriesRoot=new Sr({name:`${this.id}-Series-root`}),this.debug=Rs.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new Zl(20),this.seriesArea=new Kc,this.title=new Jo,this.subtitle=new Jo,this.footnote=new Jo,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.highlightManager=new Eh,this.modulesManager=new Hh,this.syncManager=new _h(this),this.zoomManager=new Wh,this.processors=[],this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new jl,this.updateRequestors={},this.performUpdateTrigger=function(t){return Jl((function(t){return setTimeout(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}),t)}((t=>S(this,[t],(function(t){var e=this;let{count:i}=t;return function*(){e.destroyed||e.updateMutex.acquire((()=>S(e,null,(function*(){try{yield this.performUpdate(i)}catch(t){O.error("update error",t)}})))).catch((t=>O.errorOnce(t)))}()})))),this.axes=[],this.series=[],this.pointerScheduler=function(t){return Jl(((t,e)=>requestAnimationFrame(t)),t)}((()=>{if(this.lastInteractionEvent){if(this.performUpdateType<=4)return void this.pointerScheduler.schedule();this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0}})),this.onSeriesNodeClick=t=>{const e=m(f({},t),{type:"seriesNodeClick"});Object.defineProperty(e,"series",{enumerable:!1,get:()=>t.series}),this.fireEvent(e)},this.onSeriesNodeDoubleClick=t=>{const e=m(f({},t),{type:"seriesNodeDoubleClick"});this.fireEvent(e)},this.seriesGroupingChanged=t=>{if(!(t instanceof Ic))return;const{series:e,seriesGrouping:i,oldGrouping:s}=t;null!=e.rootGroup.parent&&this.seriesLayerManager.changeGroup({internalId:e.internalId,type:e.type,rootGroup:e.rootGroup,highlightGroup:e.highlightGroup,annotationGroup:e.annotationGroup,getGroupZIndexSubOrder:t=>e.getGroupZIndexSubOrder(t),seriesGrouping:i,oldGrouping:s})},this.dataProcessListeners=new Set,this.chartOptions=t;const a=null==e?void 0:e.scene,r=null!=(s=null==e?void 0:e.element)?s:ks("div"),o=null==e?void 0:e.container,l=new Sr({name:"root"});l.visible=!1,l.append(this.seriesRoot),this.axisGridGroup=new Sr({name:"Axes-Grids",layer:!0,zIndex:1}),l.appendChild(this.axisGridGroup),this.axisGroup=new Sr({name:"Axes",layer:!0,zIndex:2}),l.appendChild(this.axisGroup),this.element=r,r.classList.add("ag-chart-wrapper"),r.style.position="relative",r.style.userSelect="none";const h=new Ql;this.sizeMonitor=h,h.observe(this.element,(t=>this.rawResize(t)));const{overrideDevicePixelRatio:c}=t.specialOverrides;this.scene=a??new Ul({pixelRatio:c}),this.scene.setRoot(l).setContainer(r),this.autoSize=!0,this.chartEventManager=new Mh,this.contextMenuRegistry=new Ch,this.cursorManager=new Rh(r),this.highlightManager=new Eh,this.interactionManager=new kh(r),this.regionManager=new Ph(this.interactionManager),this.toolbarManager=new Fh,this.gestureDetector=new Ah(r),this.layoutService=new Kh,this.updateService=new Wc((function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return i.update(t,e)})),this.seriesStateManager=new _c,this.seriesLayerManager=new Bc(this.seriesRoot),this.callbackCache=new Hl,this.animationManager=new Dh(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.dataService=new gh(this.animationManager),this.overlays=new Jh,null!=(n=this.overlays.loading).renderer||(n.renderer=()=>function(t,e){const{animationDuration:i}=Cn.add,s=i*e,n=ks("div");n.className=`${jh}--loading`,n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.flexDirection="column",n.style.height="100%",n.style.boxSizing="border-box",n.style.font="13px Verdana, sans-serif",n.style.userSelect="none",n.style.animation=`ag-charts-loading ${s}ms linear 50ms both`;const a=ks("span");a.style.width="45px",a.style.height="40px",a.style.backgroundImage=["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),a.style.backgroundSize="10px 400%",a.style.backgroundRepeat="no-repeat",a.style.animation="ag-charts-loading-matrix 1s infinite linear";const r=ks("p");r.style.marginTop="1em",r.innerText=t;const o=ks("div");o.className=`${jh}__loading-background`,o.style.position="absolute",o.style.inset="0",o.style.opacity="0.5",o.style.zIndex="-1";const l=ks("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),n.replaceChildren(l,a,r,o),Ds(Qh,"chartOverlays"),n}(this.overlays.loading.getText(),this.animationManager.defaultDuration)),this.processors=[new Fc(this,this.layoutService),new Gc(this,this.dataService,this.updateService,this.zoomManager),new zc(this,this.overlays,this.dataService,this.layoutService,this.animationManager)],this.tooltip=new Zo,this.tooltipManager=new zh(this.scene.canvas.element,this.tooltip),this.highlight=new th,this.container=o;const{All:d}=bh,u=this.getModuleContext(),p=this.regionManager.addRegion("series",this.seriesRoot,this.axisGroup);this.regionManager.addRegion("root",l),this._destroyFns.push(this.dataService.addListener("data-load",(t=>{this.data=t.data})),this.scene.attachNode(this.title.node),this.scene.attachNode(this.subtitle.node),this.scene.attachNode(this.footnote.node),this.title.registerInteraction(u),this.subtitle.registerInteraction(u),this.footnote.registerInteraction(u),this.interactionManager.addListener("click",(t=>this.onClick(t))),this.interactionManager.addListener("dblclick",(t=>this.onDoubleClick(t))),p.addListener("hover",(t=>this.onMouseMove(t))),p.addListener("leave",(t=>this.onLeave(t))),this.interactionManager.addListener("page-left",(()=>this.destroy())),this.interactionManager.addListener("contextmenu",(t=>this.onContextMenu(t)),d),this.animationManager.addListener("animation-frame",(()=>{this.update(6)})),this.highlightManager.addListener("highlight-change",(t=>this.changeHighlightDatum(t))),this.zoomManager.addListener("zoom-pan-start",(()=>this.resetPointer())),this.zoomManager.addListener("zoom-change",(()=>{this.resetPointer(),this.series.map((t=>t.animationState.transition("updateData")));const t="initial"!==this.chartAnimationPhase;this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t})})))}static getInstance(e){return t.chartsInstances.get(e)}onAutoSizeChange(t){const{style:e}=this.element;if(t){if(e.display="block",e.width="100%",e.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else e.display="inline-block",e.width="auto",e.height="auto"}download(t,e){this.scene.download(t,e)}getOptions(){var t;return null!=(t=this.queuedUserOptions.at(-1))?t:this.userOptions}getModuleContext(){return{scene:this.scene,animationManager:this.animationManager,chartEventManager:this.chartEventManager,contextMenuRegistry:this.contextMenuRegistry,cursorManager:this.cursorManager,highlightManager:this.highlightManager,interactionManager:this.interactionManager,regionManager:this.regionManager,tooltipManager:this.tooltipManager,toolbarManager:this.toolbarManager,syncManager:this.syncManager,zoomManager:this.zoomManager,gestureDetector:this.gestureDetector,chartService:this,dataService:this.dataService,layoutService:this.layoutService,updateService:this.updateService,seriesStateManager:this.seriesStateManager,callbackCache:this.callbackCache}}resetAnimations(){this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.animationManager.reset()}skipAnimations(){this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(t){if(this.destroyed)return;const e=null==t?void 0:t.keepTransferableResources;let i;return this.performUpdateType=7,this._destroyFns.forEach((t=>t())),this.processors.forEach((t=>t.destroy())),this.tooltipManager.destroy(),this.tooltip.destroy(),this.overlays.destroy(),this.sizeMonitor.unobserve(this.element),this.modulesManager.destroy(),this.regionManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.zoomManager.destroy(),e?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach((t=>t.destroy())),this.axes=[],this.callbackCache.invalidateCache(),this.animationRect=void 0,this.animationManager.reset(),this.syncManager.destroy(),this.destroyed=!0,Object.freeze(this),i}resetPointer(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire((()=>S(this,null,(function*(){this.destroyed||(yield t(this),!this.destroyed&&this._pendingFactoryUpdatesCount--)})))).catch((t=>O.errorOnce(t))))}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;var i,s;const{forceNodeDataRefresh:n=!1,skipAnimations:a,seriesToUpdate:r=this.series,newAnimationBatch:o}=e??{};n&&this.series.forEach((t=>t.markNodeDataDirty()));for(const l of r)this.seriesToUpdate.add(l);if(a&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),o&&this.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=null!=(i=null==e?void 0:e.skipSync)&&i,this.debug.check()){let e=null!=(s=(new Error).stack)?s:"<unknown>";e=e.replace(/\([^)]*/g,""),this.updateRequestors[e]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.performUpdateTrigger.schedule(null==e?void 0:e.backOffMs))}performUpdate(t){return S(this,null,(function*(){const{performUpdateType:e,extraDebugStats:i}=this,s=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&e<6&&(this.animationManager.startBatch(this._performUpdateSkipAnimations),this.animationManager.onBatchStop((()=>this.chartAnimationPhase="ready"))),this.debug("Chart.performUpdate() - start",eh[e]);const n={start:performance.now()};let a=!1;switch(e){case 0:case 1:yield this.updateData(),n["\u2b07\ufe0f"]=performance.now();case 2:yield this.processData(),this.resetPointer(!0),n["\ud83c\udfed"]=performance.now();case 3:if(this.checkUpdateShortcut(3))break;if(!this.checkFirstAutoSize(s)){a=!0;break}yield this.processLayout(),n["\u2316"]=performance.now();case 4:if(this.checkUpdateShortcut(4))break;const{seriesRect:t}=this;yield Promise.all(s.map((e=>e.update({seriesRect:t})))),n["\ud83e\udd14"]=performance.now();case 5:if(this.checkUpdateShortcut(5))break;const r=this.tooltipManager.getTooltipMeta(this.id);e<=4&&null!=(null==r?void 0:r.lastPointerEvent)&&this.handlePointer(r.lastPointerEvent,!0),n["\u2196"]=performance.now();case 6:if(this.checkUpdateShortcut(6))break;this.animationManager.endBatch(),i.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:n,extraDebugStats:i}),this.extraDebugStats={};case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,this.animationManager.endBatch()}a||this.updateService.dispatchUpdateComplete(this.getMinRects());const r=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(r-n.start))/100,count:t,performUpdateType:eh[e]})}))}checkUpdateShortcut(t){return this.updateShortcutCount>3?(O.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(t){if(this.autoSize&&!this._lastAutoSize){const e=this._performUpdateNoRenderCount++,i=40*p(e+1,2);if(e<8)return this.update(3,{seriesToUpdate:t,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onSeriesChange(t,e){var i,s;const n=null!=(i=null==e?void 0:e.filter((e=>!t.includes(e))))?i:[];this.destroySeries(n),null==(s=this.seriesLayerManager)||s.setSeriesCount(t.length);for(const a of t){if(null!=e&&e.includes(a))continue;null==a.rootGroup.parent&&this.seriesLayerManager.requestGroup(a);const t=this;a.chart={get mode(){return t.mode},get isMiniChart(){return!1},get seriesRect(){return t.seriesRect},placeLabels:()=>t.placeLabels()},a.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(a),a.addChartEventListeners()}}destroySeries(t){null==t||t.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.removeEventListener("groupingChanged",this.seriesGroupingChanged),t.destroy(),this.seriesLayerManager.releaseGroup(t),t.chart=void 0}))}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach((t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(t)}))}assignSeriesToAxes(){this.axes.forEach((t=>{t.boundSeries=this.series.filter((e=>e.axes[t.direction]===t))}))}assignAxesToSeries(){const t=fs(this.axes,(t=>t.direction));this.series.forEach((e=>{e.directions.forEach((i=>{const s=t[i];if(!s)return void O.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const n=e.getKeys(i),a=s.find((t=>!t.keys.length||n.some((e=>t.keys.includes(e)))));a?e.axes[i]=a:O.warnOnce(`no matching axis for direction [${i}] and keys [${n}]; check series and axes configuration.`)}))}))}rawResize(t){var e;let{width:i,height:s}=t;if(i=Math.floor(i),s=Math.floor(s),!this.autoSize||0===i&&0===s)return;const[n=0,a=0]=null!=(e=this._lastAutoSize)?e:[];n===i&&a===s||(this._lastAutoSize=[i,s],this.resize(void 0,void 0,"SizeMonitor"))}resize(t,e,i){var s,n,a,r;if(t??(t=null!=(n=this.width)?n:this.autoSize?null==(s=this._lastAutoSize)?void 0:s[0]:this.scene.canvas.width),e??(e=null!=(r=this.height)?r:this.autoSize?null==(a=this._lastAutoSize)?void 0:a[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${i}`,{width:t,height:e,stack:(new Error).stack}),t&&e&&Kt(t)&&Kt(e)&&this.scene.resize(t,e)){this.resetPointer(),this.animationManager.reset();let t=!0;this.autoSize&&this._firstAutoSize&&(t=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:t})}}updateData(){return S(this,null,(function*(){this.series.forEach((t=>t.setChartData(this.data)));const t=this.modulesManager.mapModules((t=>{var e;return null==(e=t.updateData)?void 0:e.call(t,{data:this.data})}));yield Promise.all(t)}))}processData(){return S(this,null,(function*(){if(this.series.some((t=>t.canHaveAxes))){this.assignAxesToSeries();const t=this.modulesManager.getModule("sync");null!=t&&t.enabled?t.syncAxes(this._skipSync):this.assignSeriesToAxes()}const t=new uh(this.mode),e=this.series.map((e=>e.processData(t))),i=this.modulesManager.mapModules((e=>{var i;return null==(i=e.processData)?void 0:i.call(e,{dataController:t})}));t.execute(),yield Promise.all([...e,...i]);for(const{legendType:s,legend:n}of this.modulesManager.legends())n.data=this.getLegendData(s,"integrated"!==this.mode);this.dataProcessListeners.forEach((t=>t())),this.dataProcessListeners.clear()}))}placeLabels(){const t=[],e=[];for(const l of this.series){if(!l.visible)continue;const i=l.getLabelData();Fo(null==i?void 0:i[0])&&(e.push(i),t.push(l))}const{seriesRect:i}=this,{top:s,right:n,bottom:a,left:r}=this.seriesArea.padding,o=i&&e.length>0?function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;var s,n;const a=[];t=t.map((t=>t.slice().sort(((t,e)=>e.point.size-t.point.size))));for(let r=0;r<t.length;r++){const o=a[r]=[],l=t[r];if(null!=l&&l.length&&l[0].label)for(let r=0,h=l.length;r<h;r++){const h=l[r],{point:c,label:d,marker:u}=h,{text:p,width:g,height:f}=d,m=.5*c.size;let y=0,v=0;if(m>0&&null!=h.placement){const t=Go[h.placement];y=(.5*g+m+i)*t.x,v=(.5*f+m+i)*t.y}const x=c.x-.5*g+y-((null!=(s=null==u?void 0:u.center.x)?s:.5)-.5)*c.size,b=c.y-.5*f+v-((null!=(n=null==u?void 0:u.center.y)?n:.5)-.5)*c.size;e&&!_o(e,x,b,g,f)||t.some((t=>t.some((t=>{var e;return Po(t.point,null==(e=t.marker)?void 0:e.center,x,b,g,f)}))))||a.some((t=>t.some((t=>Bo(t,x,b,g,f)))))||o.push({index:r,text:p,x:x,y:b,width:g,height:f,datum:h})}}return a}(e,{x:-r,y:-s,width:i.width+r+n,height:i.height+s+a}):[];return new Map(o.map(((e,i)=>[t[i],e])))}getLegendData(t,e){var i,s;const n=this.series.filter((t=>t.properties.showInLegend)).flatMap((e=>e.getLegendData(t)));if(e&&n.every((t=>"category"===t.legendType))){const t={},e=new Map(this.series.map((t=>[t.id,t.type])));for(const{seriesId:a,marker:r,label:o}of n){if(null==r.fill)continue;const n=e.get(a),l=null!=(i=t[n])?i:t[n]={};null!=l[s=o.text]||(l[s]=r.fill),l[o.text]!==r.fill&&O.warnOnce(`legend item '${o.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}return n}processLayout(){return S(this,null,(function*(){var t;const e=this.animationRect;yield this.performLayout(),e&&!(null!=(t=this.animationRect)&&t.equals(e))&&this.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}))}performLayout(){return S(this,null,(function*(){const{width:t,height:e}=this.scene;let i={shrinkRect:new Qs(0,0,t,e)};i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i);const s=this.modulesManager.mapModules((t=>S(this,null,(function*(){null!=t.performLayout&&(i=yield t.performLayout(i))}))));return yield Promise.all(s),i.shrinkRect}))}pickSeriesNode(t,e,i){var s,n;const a=performance.now(),r=e?[0]:void 0,o=[...this.series].reverse();let l;for(const h of o){if(!h.visible||!h.rootGroup.visible)continue;const{match:e,distance:n}=null!=(s=h.pickNode(t,r))?s:{};if(e&&null!=n&&((!l||l.distance>n)&&n<=(i??1/0)&&(l={series:h,distance:n,datum:e}),0===n))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!=(n=this.extraDebugStats.pickSeriesNode)?n:0)+(performance.now()-a)),l}onMouseMove(t){this.lastInteractionEvent=t,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=t.offsetX,this.extraDebugStats.mouseY=t.offsetY,this.update(6)}onLeave(t){this.tooltip.pointerLeftOntoTooltip(t)||(this.resetPointer(),this.update(6),this.cursorManager.updateCursor("chart"))}onContextMenu(t){this.tooltipManager.removeTooltip(this.id);const{Default:e,ContextMenu:i}=bh;this.interactionManager.getState()&(e|i)&&this.checkSeriesNodeRange(t,(()=>{this.highlightManager.updateHighlight(this.id)}))}handlePointer(t,e){var i=this;if(8!==this.interactionManager.getState())return;const{lastPick:s,hoverRect:n}=this,{offsetX:a,offsetY:r}=t,o=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s&&i.resetPointer(t)};(e?!this.animationManager.isActive():null!=n&&n.containsPoint(a,r))?(this.handlePointerTooltip(t,o),this.handlePointerNode(t)):o()}handlePointerTooltip(t,e){const{lastPick:i,tooltip:s}=this,{range:n}=s,{offsetX:a,offsetY:r}=t;let o;Kt(n)&&(o=n);const l=this.pickSeriesNode({x:a,y:r},"exact"===n,o);if(!l)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&e(!0));const h="node"===this.highlight.range||!i||i!==l.datum;let c;h&&(c=l.series.getTooltipHtml(l.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,l.datum));const d=null!=o,u=this.tooltip.enabled&&l.series.tooltipEnabled,p="exact"===n&&0===l.distance,g=u&&("nearest"===n||d||p)&&(!h||void 0!==c),f=zh.makeTooltipMeta(t,l.datum);g&&this.tooltipManager.updateTooltip(this.id,f,c)}handlePointerNode(t){this.checkSeriesNodeRange(t,((t,e)=>{(t.hasEventListener("nodeClick")||t.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,e)}))||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(t){this.checkSeriesNodeClick(t)?this.update(4):this.fireEvent({type:"click",event:t.sourceEvent})}onDoubleClick(t){this.checkSeriesNodeDoubleClick(t)?this.update(4):this.fireEvent({type:"doubleClick",event:t.sourceEvent})}checkSeriesNodeClick(t){return this.checkSeriesNodeRange(t,((e,i)=>e.fireNodeClickEvent(t.sourceEvent,i)))}checkSeriesNodeDoubleClick(t){return this.checkSeriesNodeRange(t,((e,i)=>e.fireNodeDoubleClickEvent(t.sourceEvent,i)))}checkSeriesNodeRange(t,e){var i;const s=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1),n=null==s?void 0:s.datum,a=null==n?void 0:n.series.properties.nodeClickRange;let r;Kt(a)&&(r=a);let o=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!0);if(o?this.highlightManager.updatePicked(this.id,o.datum):this.highlightManager.updatePicked(this.id),n&&"nearest"===a)return e(n.series,n),!0;if("exact"!==a&&(o=this.pickSeriesNode({x:t.offsetX,y:t.offsetY},!1,r)),!o)return!1;const l=null!=r,h="exact"===a&&0===o.distance;return!(!l&&!h||void 0!==t.pointerHistory&&!(null==(i=t.pointerHistory)?void 0:i.every((t=>{const e={x:t.offsetX,y:t.offsetY},i=this.pickSeriesNode(e,!1,r);return(null==i?void 0:i.datum)===(null==o?void 0:o.datum)}))))&&(e(o.series,o.datum),!0)}changeHighlightDatum(t){var e,i;const s=new Set,{series:n,datum:a}=null!=(e=t.currentHighlight)?e:{},{series:r,datum:o}=null!=(i=t.previousHighlight)?i:{};r&&s.add(r),n&&s.add(n),null!=r&&r.properties.cursor&&o&&this.cursorManager.updateCursor(r.id),null!=n&&n.properties.cursor&&a&&this.cursorManager.updateCursor(n.id,n.properties.cursor),this.lastPick=t.currentHighlight,null==n||null==r?this.update(4):this.update(4,{seriesToUpdate:s})}waitForUpdate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return S(this,null,(function*(){const i=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());7!==this.performUpdateType;){if(performance.now()-i>t){const i=`Chart.waitForUpdate() timeout of ${t} reached - first chart update taking too long.`;if(e)throw new Error(i);O.warnOnce(i)}yield Xl(50)}yield this.updateMutex.waitForClearAcquireQueue()}))}waitForDataProcess(t){return new Promise((e=>{this.dataProcessListeners.add(e),Vt(t)&&setTimeout((()=>{this.dataProcessListeners.has(e)&&(this.dataProcessListeners.delete(e),e())}),t)}))}getMinRects(){const{width:t,height:e}=this.scene,i=this.series.map((i=>i.getMinRects(t,e))).filter(Et);if(0===i.length)return;let s=0,n=0,a=0,r=0;for(const{minRect:h,minVisibleRect:c}of i)s=Math.max(s,h.width),n=Math.max(n,h.height),a=Math.max(a,c.width),r=Math.max(r,c.height);const o=new Qs(0,0,s,n);let l=o.clone();return a>0&&r>0&&(l=new Qs(0,0,a,r)),{minRect:o,minVisibleRect:l}}filterMiniChartSeries(t){return null==t?void 0:t.filter((t=>!1!==t.showInMiniChart))}applyOptions(t){var e,i,s,n,a;const r=this.processedOptions,o=t.diffOptions(r),l=t.userOptions;if(null==o)return;Vc("AgChartV2.updateDelta() - applying delta",o);const h=jt(o,r),c=this.applyModules(h);o.listeners&&this.registerListeners(this,o.listeners),De(this,o,{skip:["type","data","series","listeners","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","axes","topology"]});let d=!1,u="no-op";null!=(e=o.series)&&e.length&&(u=this.applySeries(this,o.series,null==r?void 0:r.series),d=!0),"replaced"===u&&this.resetAnimations(),this.applyAxes(this,h,r,u)&&(d=!0),o.data&&(this.data=o.data),null!=(i=o.legend)&&i.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,o.legend.listeners),o.listeners&&this.updateAllSeriesListeners(),this.chartOptions=t,this.processedOptions=h,this.userOptions=jt(l,this.userOptions);const p=this.modulesManager.getModule("navigator"),g=this.modulesManager.getModule("zoom");(null==p||!p.enabled)&&(null==g||!g.enabled)&&this.zoomManager.updateZoom("chart");const f=null==p?void 0:p.miniChart,m=null!=(a=null==(n=null==(s=h.navigator)?void 0:s.miniChart)?void 0:n.series)?a:h.series;!0===(null==f?void 0:f.enabled)&&null!=m?this.applyMiniChartOptions(f,m,h,r):!1===(null==f?void 0:f.enabled)&&(f.series=[],f.axes=[]),d||(d=this.shouldForceNodeDataRefresh(o,u));const y=d||c?1:3;this.maybeResetAnimations(u),Vc("AgChartV2.applyChartOptions() - update type",eh[y],{seriesStatus:u,forceNodeDataRefresh:d}),this.update(y,{forceNodeDataRefresh:d,newAnimationBatch:!0})}maybeResetAnimations(t){if("standalone"===this.mode)switch(t){case"series-grouping-change":case"replaced":this.resetAnimations()}}shouldForceNodeDataRefresh(t,e){const i=!!t.data||"data-change"===e||"replaced"===e,s=Re.getKeys(),n=Object.values(s).some((e=>null!=t[e])),a=null!=t.title&&null!=t.subtitle;return i||n||a}applyMiniChartOptions(t,e,i,s){var n,a,r,o,l;const h=null!=(r=null==(a=null==(n=null==s?void 0:s.navigator)?void 0:n.miniChart)?void 0:a.series)?r:null==s?void 0:s.series,c=this.applySeries(t,this.filterMiniChartSeries(e),this.filterMiniChartSeries(h));this.applyAxes(t,i,s,c,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const d=t.axes,u=d.find((t=>"x"===t.direction));for(const p of d)p.gridLine.enabled=!1,p.label.enabled=p===u,p.tick.enabled=!1,p.interactionEnabled=!1;if(null!=u){const t=null==(o=i.navigator)?void 0:o.miniChart,e=null==t?void 0:t.label,s=null==(l=null==t?void 0:t.label)?void 0:l.interval;u.line.enabled=!1,u.label.set(Jt(e,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),u.tick.set(Jt(s,["enabled","width","size","color","interval","step"]));const n=null==s?void 0:s.step;null!=n&&(u.tick.interval=n)}}applyModules(t){var e;const{type:i}=this.constructor;let s=!1;for(const n of kt.byType("root","legend")){const a=null!=t[n.optionsKey]&&n.chartTypes.includes(i);a!==this.modulesManager.isEnabled(n)&&(a?(this.modulesManager.addModule(n,(t=>new t.instanceConstructor(this.getModuleContext()))),"legend"===n.type&&(null==(e=this.modulesManager.getModule(n))||e.attachLegend(this.scene)),this[n.optionsKey]=this.modulesManager.getModule(n)):(this.modulesManager.removeModule(n),delete this[n.optionsKey]),s=!0)}return s}applySeries(t,e,i){var s;if(!e)return"no-change";const n=function(t,e,i){var s,n,a,r;const o=(t,e)=>{const i=[t];for(const s of Xh)s in e&&null!=e[s]&&i.push(`${s}=${e[s]}`);return i.join(";")},l=new Map;let h=0;for(const p of t){const t=o(p.type,p.properties);l.has(t)||l.set(t,[]),null==(s=l.get(t))||s.push([p,h++])}const c=new Map;for(const p of e){const t=o(p.type,p);c.has(t)||c.set(t,[]),null==(n=c.get(t))||n.push(p)}if(![...l.keys()].some((t=>c.has(t))))return{status:"no-overlap",oldKeys:l.keys(),newKeys:c.keys()};const d=[];let u=-1;for(const[p,g]of c.entries())for(const t of g){u++;const e=l.get(p);if(null==e||e.length<1){d.push({opts:t,idx:u,status:"add"}),l.delete(p);continue}const[s,n]=e.shift(),o=be(null!=(a=null==i?void 0:i[n])?a:{},t??{}),{groupIndex:h,stackIndex:c}=null!=(r=null==o?void 0:o.seriesGrouping)?r:{};null!=h||null!=c?d.push({opts:t,series:s,diff:o,idx:n,status:"series-grouping"}):o?d.push({opts:t,series:s,diff:o,idx:n,status:"update"}):d.push({opts:t,series:s,idx:n,status:"no-op"}),0===e.length&&l.delete(p)}for(const p of l.values())for(const[t,e]of p)d.push({series:t,idx:e,status:"remove"});return{status:"overlap",changes:d}}(t.series,e,i);if("no-overlap"===n.status)return Vc(`AgChartV2.applySeries() - creating new series instances, status: ${n.status}`,n),t.series=e.map((t=>this.createSeries(t))),"replaced";Vc("AgChartV2.applySeries() - matchResult",n);const a=[];let r=!1,o=!1,l=!1;for(const h of n.changes)switch(o||(o="series-grouping"===h.status),r||(r=null!=(null==(s=h.diff)?void 0:s.data)),l||(l="no-op"!==h.status),h.status){case"add":const t=this.createSeries(h.opts);a.push(t),Vc("AgChartV2.applySeries() - created new series",t);break;case"remove":Vc(`AgChartV2.applySeries() - removing series at previous idx ${h.idx}`,h.series);break;case"no-op":a.push(h.series),Vc(`AgChartV2.applySeries() - no change to series at previous idx ${h.idx}`,h.series);break;default:const{series:e,diff:i,idx:s}=h;Vc(`AgChartV2.applySeries() - applying series diff previous idx ${s}`,i,e),this.applySeriesValues(e,i),e.markNodeDataDirty(),a.push(e)}for(let h=0;h<a.length;h++)a[h]._declarationOrder=h;return Vc("AgChartV2.applySeries() - final series instances",a),t.series=a,o?"series-grouping-change":r?"data-change":l?"updated":"no-op"}applyAxes(t,e,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];if(!("axes"in e)||!e.axes)return!1;n=["axes[].type",...n];const{axes:a}=e;return"replaced"!==s&&t.axes.length===a.length&&t.axes.every(((t,e)=>t.type===a[e].type))&&de(i)?(t.axes.forEach(((t,e)=>{var s,r;const o=be(null!=(r=null==(s=i.axes)?void 0:s[e])?r:{},a[e]);Vc(`AgChartV2.applyAxes() - applying axis diff idx ${e}`,o);const l=`axes[${e}]`;De(t,o,m(f({},Va),{path:l,skip:n}))})),!0):(Vc(`AgChartV2.applyAxes() - creating new axes instances; seriesStatus: ${s}`),t.axes=this.createAxis(a,n),!0)}createSeries(t){const e=Le.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(e,t),this.applySeriesValues(e,t),e}applySeriesOptionModules(t,e){const i=t.createModuleContext(),s=t.getModuleMap();for(const n of kt.byType("series-option"))n.optionsKey in e&&n.seriesTypes.includes(t.type)&&s.addModule(n,(t=>new t.instanceConstructor(i)))}applySeriesValues(t,e){const i=t.getModuleMap(),s=e,{type:n,data:a,listeners:r,seriesGrouping:o,showInMiniChart:l}=s,h=y(s,["type","data","listeners","seriesGrouping","showInMiniChart"]);for(const c of oe)if("series-option"===c.type&&c.optionsKey in h){const t=i.getModule(c.optionsKey),e=h[c.optionsKey];delete h[c.optionsKey],t.properties.set(e)}t.properties.set(h),"data"in e&&t.setOptionsData(a),r&&this.registerListeners(t,r),"seriesGrouping"in e&&(t.seriesGrouping=null==o?void 0:f(f({},t.seriesGrouping),o))}createAxis(t,e){const i=new Uh,s=this.getModuleContext();for(let n=0;n<t.length;n++){const a=t[n],r=wt.create(a.type,s);this.applyAxisModules(r,a),De(r,a,m(f({},Va),{path:`axes[${n}]`,skip:e})),i.push(r,a)}return i.guessInvalidPositions()}applyAxisModules(t,e){const i=t.createModuleContext(),s=t.getModuleMap();for(const n of kt.byType("axis-option")){const a=null!=e[n.optionsKey];a!==s.isEnabled(n)&&(a?(s.addModule(n,(t=>new t.instanceConstructor(i))),t[n.optionsKey]=s.getModule(n)):(s.removeModule(n),delete t[n.optionsKey]))}}registerListeners(t,e){t.clearEventListeners();for(const[i,s]of Object.entries(e))_t(s)&&t.addEventListener(i,s)}};Yc.chartsInstances=new WeakMap,x([$o({newValue(t){this.destroyed||(t.setAttribute("data-ag-charts",""),t.appendChild(this.element),Yc.chartsInstances.set(t,this))},oldValue(t){t.removeAttribute("data-ag-charts"),t.removeChild(this.element),Yc.chartsInstances.delete(t)}})],Yc.prototype,"container",2),x([$o({newValue(t){this.resize(t,void 0,"width option")}})],Yc.prototype,"width",2),x([$o({newValue(t){this.resize(void 0,t,"height option")}})],Yc.prototype,"height",2),x([$o({newValue(t){this.onAutoSizeChange(t)}}),Yn(qn)],Yc.prototype,"autoSize",2),x([Yn(Hn)],Yc.prototype,"padding",2),x([Yn(Hn)],Yc.prototype,"seriesArea",2),x([Yn(Hn)],Yc.prototype,"title",2),x([Yn(Hn)],Yc.prototype,"subtitle",2),x([Yn(Hn)],Yc.prototype,"footnote",2),x([Yn(Ia(["standalone","integrated"],"a chart mode"))],Yc.prototype,"mode",2),x([$o({changeValue(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(const i of e)t.includes(i)||(i.detachAxis(this.axisGroup,this.axisGridGroup),i.destroy());for(const i of t)null!=e&&e.includes(i)||i.attachAxis(this.axisGroup,this.axisGridGroup);this.zoomManager.updateAxes(t)}})],Yc.prototype,"axes",2),x([$o({changeValue(t,e){this.onSeriesChange(t,e)}})],Yc.prototype,"series",2);var $c=Yc;function Uc(t,e,i,s){if(0===t)return function(t,e,i){if(0===t)return function(t,e){const i=-e/t;return 0!==t&&i>=0&&i<=1?[i]:[]}(e,i);const s=e*e-4*t*i,n=[];if(0===s){const i=-e/(2*t);i>=0&&i<=1&&n.push(i)}else if(s>0){const i=Math.sqrt(s),a=(-e-i)/(2*t),r=(-e+i)/(2*t);a>=0&&a<=1&&n.push(a),r>=0&&r<=1&&n.push(r)}return n}(e,i,s);const n=e/t,a=i/t,r=(3*a-n*n)/9,o=(9*n*a-27*(s/t)-2*n*n*n)/54,l=r*r*r+o*o,h=1/3,c=[];if(l>=0){const t=Math.sqrt(l),e=Math.sign(o+t)*Math.pow(Math.abs(o+t),h),i=Math.sign(o-t)*Math.pow(Math.abs(o-t),h),s=Math.abs(Math.sqrt(3)*(e-i)/2),a=-h*n+(e+i);if(a>=0&&a<=1&&c.push(a),0===s){const t=-h*n-(e+i)/2;t>=0&&t<=1&&c.push(t)}}else{const t=Math.acos(o/Math.sqrt(-r*r*r)),e=h*n,i=2*Math.sqrt(-r),s=i*Math.cos(h*t)-e,a=i*Math.cos(h*(t+2*Math.PI))-e,l=i*Math.cos(h*(t+4*Math.PI))-e;s>=0&&s<=1&&c.push(s),a>=0&&a<=1&&c.push(a),l>=0&&l<=1&&c.push(l)}return c}function Xc(t,e,i,s,n,a,r,o){const l=(i-t)*(o-a)-(s-e)*(r-n);if(0===l)return 0;const h=((r-n)*(e-a)-(t-n)*(o-a))/l,c=((i-t)*(e-a)-(s-e)*(t-n))/l;return h>=0&&h<=1&&c>=0&&c<=1?1:0}function Hc(t,e,i,s,n,a,r,o,l,h,c,d){let u=0;const p=h-d,g=c-l,f=l*(d-h)-h*(c-l),m=jc(t,i,n,r),y=jc(e,s,a,o),v=Uc(p*m[0]+g*y[0],p*m[1]+g*y[1],p*m[2]+g*y[2],p*m[3]+g*y[3]+f);for(const x of v){const t=x*x,e=x*t,i=m[0]*e+m[1]*t+m[2]*x+m[3],s=y[0]*e+y[1]*t+y[2]*x+y[3];let n;n=l===c?(s-h)/(d-h):(i-l)/(c-l),n>=0&&n<=1&&u++}return u}function jc(t,e,i,s){return[3*e-t-3*i+s,3*t-6*e+3*i,-3*t+3*e,t]}function qc(t,e,i,s,n,a,r,o,l,h){if(isNaN(t)||isNaN(e))return 0;a&&([n,s]=[s,n]);const c=(h-o)/(l-r),d=o-c*r,u=Math.pow(c,2)+1,p=2*(c*(d-e)-t),g=Math.pow(t,2)+Math.pow(d-e,2)-Math.pow(i,2),f=Math.pow(p,2)-4*u*g;if(f<0)return 0;const m=(-p+Math.sqrt(f))/2/u,y=(-p-Math.sqrt(f))/2/u;let v=0;return[m,y].forEach((i=>{if(!(i>=Math.min(r,l)&&i<=Math.max(r,l)))return;const a=i-t,o=c*i+d-e;Fn(Math.atan2(o,a),s,n)&&v++})),v}var Zc=class{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let t=0;t<this.commands.length;t++)if(this.commands[t]!==this.previousCommands[t])return!0;for(let t=0;t<this.params.length;t++)if(this.params[t]!==this.previousParams[t])return!0;return!1}draw(t){const e=this.commands,i=this.params;let s=0;t.beginPath();for(const n of e)switch(n){case 0:t.moveTo(i[s++],i[s++]);break;case 1:t.lineTo(i[s++],i[s++]);break;case 3:t.bezierCurveTo(i[s++],i[s++],i[s++],i[s++],i[s++],i[s++]);break;case 2:t.arc(i[s++],i[s++],i[s++],i[s++],i[s++],1===i[s++]);break;case 4:t.closePath()}0===e.length&&t.closePath()}moveTo(t,e){this.xy?(this.xy[0]=t,this.xy[1]=e):this.xy=[t,e],this.commands.push(0),this.params.push(t,e)}lineTo(t,e){this.xy?(this.commands.push(1),this.params.push(t,e),this.xy[0]=t,this.xy[1]=e):this.moveTo(t,e)}rect(t,e,i,s){this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+s),this.lineTo(t,e+s),this.closePath()}roundRect(t,e,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(t,e+n),this.arc(t+n,e+n,n,Math.PI,3*Math.PI/2),this.lineTo(t+n,e),this.lineTo(t+i-n,e),this.arc(t+i-n,e+n,n,3*Math.PI/2,2*Math.PI),this.lineTo(t+i,e+n),this.lineTo(t+i,e+s-n),this.arc(t+i-n,e+s-n,n,0,Math.PI/2),this.lineTo(t+i-n,e+s),this.lineTo(t+n,e+s),this.arc(t+ +n,e+s-n,n,Math.PI/2,Math.PI),this.lineTo(t,e+s-n),this.closePath()}arc(t,e,i,s,n){let a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const r=t+i*Math.cos(n),o=e+i*Math.sin(n);this.xy?(this.xy[0]=r,this.xy[1]=o):this.xy=[r,o],this.commands.push(2),this.params.push(t,e,i,s,n,a?1:0)}cubicCurveTo(t,e,i,s,n,a){this.xy||this.moveTo(t,e),this.commands.push(3),this.params.push(t,e,i,s,n,a),this.xy&&(this.xy[0]=n,this.xy[1]=a)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(4),this._closedPath=!0)}clear(){let{trackChanges:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{trackChanges:!1};t?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(t,e){const i=this.commands,s=this.params,n=i.length,a=-1e4,r=-1e4;let o=NaN,l=NaN,h=0,c=0,d=0;for(let u=0,p=0;u<n;u++)switch(i[u]){case 0:d+=Xc(o,l,h,c,a,r,t,e),h=s[p++],o=h,c=s[p++],l=c;break;case 1:d+=Xc(h,c,s[p++],s[p++],a,r,t,e),h=s[p-2],c=s[p-1];break;case 3:d+=Hc(h,c,s[p++],s[p++],s[p++],s[p++],s[p++],s[p++],a,r,t,e),h=s[p-2],c=s[p-1];break;case 2:const i=s[p++],n=s[p++],u=s[p++],g=s[p++],f=s[p++];if(d+=qc(i,n,u,g,f,!!s[p++],a,r,t,e),!isNaN(o)){d+=Xc(h,c,i+Math.cos(g)*u,n+Math.sin(g)*u,a,r,t,e)}h=i+Math.cos(f)*u,c=n+Math.sin(f)*u;break;case 4:d+=Xc(o,l,h,c,a,r,t,e)}return d%2===1}getPoints(){const{commands:t,params:e}=this,i=[];let s=0;for(let n=0;n<t.length;n++)switch(t[n]){case 0:case 1:i.push({x:e[s++],y:e[s++]});break;case 3:s+=4,i.push({x:e[s++],y:e[s++]});break;case 2:i.push({x:e[s++],y:e[s++]}),s+=4}return i}};function Jc(t){const{redraw:e=3,changeCb:i,convertor:s}=t??{};return sn({redraw:e,type:"path",convertor:s,changeCb:i})}var Qc=class extends Cr{constructor(){super(...arguments),this.path=new Zc,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(t){this._clipX=t,this.dirtyPath=!0}set clipY(t){this._clipY=t,this.dirtyPath=!0}set dirtyPath(t){this._dirtyPath!==t&&(this._dirtyPath=t,t&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var t,e,i,s;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!=(e=null==(t=this.fillShadow)?void 0:t.isDirty())&&e||null!=(s=null==(i=this._clipPath)?void 0:i.isDirty())&&s)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.path.closedPath&&this.path.isPointInPath(i.x,i.y)}isDirtyPath(){return!1}updatePath(){}render(t){var e,i,s,n;const{ctx:a,forceRender:r,stats:o}=t;if(0!==this.dirty||r){if(this.computeTransformMatrix(),this.matrix.toContext(a),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),isNaN(this._clipX)||isNaN(this._clipY)||null==this.clipMode)this.drawPath(a);else{a.save();const t=this.strokeWidth/2;if(null!=this._clipPath||(this._clipPath=new Zc),this._clipPath.clear(),this._clipPath.rect(-t,-t,this._clipX+t,this._clipY+t+t),"normal"===this.clipMode&&(null==(e=this._clipPath)||e.draw(a),a.clip()),this._clipX>0&&this._clipY>0&&this.drawPath(a),"punch-out"===this.clipMode){null==(i=this._clipPath)||i.draw(a),a.clip();const{x:t=-1e4,y:e=-1e4,width:n=2e4,height:r=2e4}=null!=(s=this.computeBBox())?s:{};a.clearRect(t,e,n,r)}a.restore()}null==(n=this.fillShadow)||n.markClean(),super.render(t)}else o&&(o.nodesSkipped+=this.nodeCount.count)}drawPath(t){this.path.draw(t),this.fillStroke(t)}};Qc.className="Path",x([Jc()],Qc.prototype,"clipMode",2),x([Jc()],Qc.prototype,"clipX",1),x([Jc()],Qc.prototype,"clipY",1);var td=class extends Qc{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:t,y:e,size:i}=this,{center:s}=this.constructor;return new Qs(t-i*s.x,e-i*s.y,i,i)}applyPath(t,e){const{path:i}=this;let{x:s,y:n}=this;i.clear();for(const{x:a,y:r,t:o}of e)s+=a*t,n+=r*t,"move"===o?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}};td.center={x:.5,y:.5},x([Jc()],td.prototype,"x",2),x([Jc()],td.prototype,"y",2),x([Jc({convertor:Math.abs})],td.prototype,"size",2);var ed=class extends td{updatePath(){const{x:t,y:e,path:i,size:s}=this,n=s/2;i.clear(),i.arc(t,e,n,0,2*Math.PI),i.closePath()}};ed.className="Circle";var id=class t extends td{updatePath(){const e=this.size/4.2;super.applyPath(e,t.moves)}};id.className="Cross",id.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var sd=id,nd=class t extends td{updatePath(){const e=this.size/2;super.applyPath(e,t.moves)}};nd.className="Diamond",nd.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var ad=nd,rd=class extends td{rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:e,size:i,rad:s}=this,n=i/4,a=this.y+n/2;e.clear(),e.arc(t-n,a-n,n,s(130),s(330)),e.arc(t+n,a-n,n,s(220),s(50)),e.lineTo(t,a+n),e.closePath()}};rd.className="Heart";var od=class extends td{updatePath(){const{path:t,x:e,y:i}=this,s=this.size,n=.5;t.clear(),t.moveTo(e+-.34375*s,i+-.65625*s),t.cubicCurveTo(e+-.34375*s,i+-.848509*s,e+-.192259*s,i+-1*s,e+0*s,i+-1*s),t.cubicCurveTo(e+(.692259-n)*s,i+-1*s,e+.34375*s,i+-.848509*s,e+.34375*s,i+-.65625*s),t.cubicCurveTo(e+.34375*s,i+-.506176*s,e+.284625*s,i+(.600181-1)*s,e+(.716461-n)*s,i+(.695393-1)*s),t.cubicCurveTo(e+.199009*s,i+-.280231*s,e+(.681271-n)*s,i+-.256896*s,e+(.663785-n)*s,i+(.766105-1)*s),t.cubicCurveTo(e+(.611893-n)*s,i+(.834367-1)*s,e+(.562228-n)*s,i+(.899699-1)*s,e+(.528896-n)*s,i+(.980648-1)*s),t.cubicCurveTo(e+(.524075-n)*s,i+(.992358-1)*s,e+(.512663-n)*s,i+0*s,e+0*s,i+0*s),t.cubicCurveTo(e+(.487337-n)*s,i+0*s,e+(.475925-n)*s,i+(.992358-1)*s,e+(.471104-n)*s,i+(.980648-1)*s),t.cubicCurveTo(e+(.487337-n)*s,i+0*s,e+(.475925-n)*s,i+(.992358-1)*s,e+(.471104-n)*s,i+(.980648-1)*s),t.cubicCurveTo(e+(.437772-n)*s,i+(.899699-1)*s,e+(.388107-n)*s,i+(.834367-1)*s,e+(.336215-n)*s,i+(.766105-1)*s),t.cubicCurveTo(e+(.318729-n)*s,i+-.256896*s,e+-.199009*s,i+-.280231*s,e+(.283539-n)*s,i+(.695393-1)*s),t.cubicCurveTo(e+-.284625*s,i+(.600181-1)*s,e+-.34375*s,i+-.506176*s,e+-.34375*s,i+-.65625*s),t.closePath()}};od.className="MapPin",od.center={x:.5,y:1};var ld=class t extends td{updatePath(){const e=this.size/3;super.applyPath(e,t.moves)}};ld.className="Plus",ld.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var hd=ld,cd=class extends td{updatePath(){const{path:t,x:e,y:i}=this,s=this.size/2;t.clear(),t.moveTo(this.align(e-s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i-s)),t.lineTo(this.align(e+s),this.align(i+s)),t.lineTo(this.align(e-s),this.align(i+s)),t.closePath()}};cd.className="Square";var dd=class extends td{updatePath(){const{x:t,y:e,path:i,size:s}=this,n=s/2,a=Math.PI/2;i.clear();for(let r=0;r<10;r++){const o=r%2===0?s:n,l=r*Math.PI/5-a,h=t+Math.cos(l)*o,c=e+Math.sin(l)*o;i.lineTo(h,c)}i.closePath()}};dd.className="Star";var ud=class t extends td{updatePath(){const e=1.1*this.size;super.applyPath(e,t.moves)}};ud.className="Triangle",ud.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var pd=ud,gd={circle:ed,cross:sd,diamond:ad,heart:rd,pin:od,plus:hd,square:cd,star:dd,triangle:pd},fd=Object.keys(gd);function md(t){return"string"==typeof t&&fd.includes(t)}function yd(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:cd;return md(t)?gd[t]:"function"==typeof t?t:cd}var vd=class extends Pc{isContinuous(){var t,e;const i=null==(t=this.axes.x)?void 0:t.scale,s=null==(e=this.axes.y)?void 0:e.scale;return{isContinuousX:$a.is(i)||mr.is(i),isContinuousY:$a.is(s)||mr.is(s)}}getModulePropertyDefinitions(){return this.moduleMap.mapModules((t=>t.getPropertyDefinitions(this.isContinuous()))).flat()}requestDataModel(t,e,i){return S(this,null,(function*(){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=yield t.request(this.id,e??[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}}))}isProcessedDataAnimatable(){var t,e;const i=null==(e=null==(t=this.processedData)?void 0:t.reduced)?void 0:e.animationValidation;if(!i)return!0;const{orderedKeys:s,uniqueKeys:n}=i;return s&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}},xd=class extends me{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};x([Yn(pa,{optional:!0})],xd.prototype,"fill",2),x([Yn(ia,{optional:!0})],xd.prototype,"fillOpacity",2),x([Yn(pa,{optional:!0})],xd.prototype,"stroke",2),x([Yn(ea,{optional:!0})],xd.prototype,"strokeWidth",2),x([Yn(ia,{optional:!0})],xd.prototype,"strokeOpacity",2),x([Yn(ka,{optional:!0})],xd.prototype,"lineDash",2),x([Yn(ea,{optional:!0})],xd.prototype,"lineDashOffset",2);var bd=class extends me{};x([Yn(ea,{optional:!0})],bd.prototype,"strokeWidth",2),x([Yn(ia,{optional:!0})],bd.prototype,"dimOpacity",2),x([Yn(qn,{optional:!0})],bd.prototype,"enabled",2);var Sd=class extends me{constructor(){super(...arguments),this.color="black"}};x([Yn(pa,{optional:!0})],Sd.prototype,"color",2);var kd=class extends me{constructor(){super(...arguments),this.item=new xd,this.series=new bd,this.text=new Sd}};x([Yn(Hn)],kd.prototype,"item",2),x([Yn(Hn)],kd.prototype,"series",2),x([Yn(Hn)],kd.prototype,"text",2);var wd=class extends me{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new kd}};x([Yn(Jn,{optional:!0})],wd.prototype,"id",2),x([Yn(qn)],wd.prototype,"visible",2),x([Yn(qn)],wd.prototype,"showInLegend",2),x([Yn(Jn)],wd.prototype,"cursor",2),x([Yn(Na)],wd.prototype,"nodeClickRange",2),x([Yn(Hn)],wd.prototype,"highlightStyle",2);var Dd={x:["xKey"],y:["yKey"]},Md={x:["xName"],y:["yName"]},Cd=class extends Oc{constructor(t,e,i,s){super(t,e,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},Ld=class extends wd{};x([Yn(Jn,{optional:!0})],Ld.prototype,"legendItemName",2);var Rd=class extends vd{constructor(t){var e=t,{pathsPerSeries:i=1,hasMarkers:s=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:a=[],datumSelectionGarbageCollection:r=!0,markerSelectionGarbageCollection:o=!0,animationAlwaysUpdateSelections:l=!1,animationResetFns:h,directionKeys:c,directionNames:d}=e,u=y(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns","directionKeys","directionNames"]);if(super(f({directionKeys:c,directionNames:d,canHaveAxes:!0},u)),this._contextNodeData=[],this.NodeEvent=Cd,this.highlightSelection=Oo.select(this.highlightNode,(()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory())),this.highlightLabelSelection=Oo.select(this.highlightLabel,Ir),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.minRectsCache={dirtyNodeData:!0},this.debug=Rs.create(),!c||!d)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:i,hasMarkers:s,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:a,directionKeys:c,directionNames:d,animationResetFns:h,animationAlwaysUpdateSelections:l,datumSelectionGarbageCollection:r,markerSelectionGarbageCollection:o},this.animationState=new go("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:t=>this.resetAllAnimation(t),reset:"empty"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}get contextNodeData(){return this._contextNodeData.slice()}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t?this.animationState.transition("skip"):"disabled"===t&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",(t=>this.onLegendItemClick(t))),this.ctx.chartEventManager.addListener("legend-item-double-click",(t=>this.onLegendItemDoubleClick(t))))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update(t){return S(this,arguments,(function(t){var e=this;let{seriesRect:i}=t;return function*(){var t,s;const{visible:n,_contextNodeData:a}=e,r=(null==(s=null==(t=e.ctx.highlightManager)?void 0:t.getActiveHighlight())?void 0:s.series)===e,o=e.checkResize(i),l=yield e.updateHighlightSelection(r);yield e.updateSelections(n),yield e.updateNodes(l,r,n);const h=e.getAnimationData(i,a);o&&e.animationState.transition("resize",h),e.animationState.transition("update",h)}()}))}updateSelections(t){return S(this,null,(function*(){const e=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((t||!e)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData.forEach((e=>{null!=e.animationValid||(e.animationValid=t)})),this.minRectsCache.dirtyNodeData=!0,yield this.updateSeriesGroups();const{dataModel:e,processedData:i}=this;void 0!==e&&void 0!==i&&this.dispatch("data-update",{dataModel:e,processedData:i})}yield Promise.all(this.subGroups.map(((t,e)=>this.updateSeriesGroupSelections(t,e))))}}))}updateSeriesGroupSelections(t,e,i){return S(this,null,(function*(){const{datumSelection:s,labelSelection:n,markerSelection:a,paths:r}=t,o=this._contextNodeData[e],{nodeData:l,labelData:h,itemId:c}=o;yield this.updatePaths({seriesHighlighted:i,itemId:c,contextData:o,paths:r,seriesIdx:e}),t.datumSelection=yield this.updateDatumSelection({nodeData:l,datumSelection:s,seriesIdx:e}),t.labelSelection=yield this.updateLabelSelection({labelData:h,labelSelection:n,seriesIdx:e}),a&&(t.markerSelection=yield this.updateMarkerSelection({nodeData:l,markerSelection:a,seriesIdx:e}))}))}markerFactory(){return new(yd())}updateSeriesGroups(){return S(this,null,(function*(){const{_contextNodeData:t,contentGroup:e,subGroups:i,opts:{pathsPerSeries:s,hasMarkers:n,datumSelectionGarbageCollection:a,markerSelectionGarbageCollection:r}}=this;if(t.length===i.length)return;t.length<i.length&&i.splice(t.length).forEach((t=>{let{dataNodeGroup:i,markerGroup:s,labelGroup:n,paths:a}=t;e.removeChild(i),s&&e.removeChild(s),n&&e.removeChild(n);for(const r of a)e.removeChild(r)}));const o=t.length;for(;o>i.length;){const t=this.subGroupId++,o=new Sr({name:`${this.id}-series-sub${t}-dataNodes`,layer:!1,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data",t)}),l=n?new Sr({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",t)}):void 0,h=new Sr({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:7,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",t)});e.appendChild(o),e.appendChild(h),l&&e.appendChild(l);const c=[];for(let i=0;i<s;i++)c[i]=new Qc,c[i].zIndex=4,c[i].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",i),e.appendChild(c[i]);i.push({paths:c,dataNodeGroup:o,markerGroup:l,labelGroup:h,labelSelection:Oo.select(h,Ir),datumSelection:Oo.select(o,(()=>this.nodeFactory()),a),markerSelection:l?Oo.select(l,(()=>this.markerFactory()),r):void 0})}}))}getGroupZIndexSubOrder(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var i;const s=super.getGroupZIndexSubOrder(t,e);if("paths"===t){const[t]=s,n=null!=(i=this.opts.pathsZIndexSubOrderOffset[e])?i:0;s[0]=_t(t)?()=>Number(t())+n:Number(t)+n}return s}updateNodes(t,e,i){return S(this,null,(function*(){var s;const{highlightSelection:n,highlightLabelSelection:a,opts:{hasMarkers:r,hasHighlightedLabels:o}}=this,l=!this.ctx.animationManager.isSkipped(),h=this.visible&&(null==(s=this._contextNodeData)?void 0:s.length)>0&&i;this.rootGroup.visible=l||h,this.contentGroup.visible=l||h,this.highlightGroup.visible=(l||h)&&e;const c=this.getOpacity();r?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),o&&(yield this.updateLabelNodes({labelSelection:a,seriesIdx:-1})),yield Promise.all(this.subGroups.map(((i,s)=>S(this,null,(function*(){const{dataNodeGroup:n,markerGroup:a,datumSelection:o,labelSelection:d,markerSelection:u,paths:p,labelGroup:g}=i,{itemId:f}=this.contextNodeData[s],m=h;n.opacity=c,n.visible=l||m,g.visible=m,a&&(a.opacity=c,a.zIndex=n.zIndex>=4?n.zIndex:n.zIndex+1,a.visible=m),g&&(g.opacity=c),yield this.updatePathNodes({seriesHighlighted:e,itemId:f,paths:p,seriesIdx:s,opacity:c,visible:m,animationEnabled:l}),n.visible&&(yield this.updateDatumNodes({datumSelection:o,highlightedItems:t,isHighlight:!1,seriesIdx:s}),yield this.updateLabelNodes({labelSelection:d,seriesIdx:s}),r&&u&&(yield this.updateMarkerNodes({markerSelection:u,isHighlight:!1,seriesIdx:s})))})))))}))}getHighlightLabelData(t,e){const i=t.filter((t=>t.datum===e.datum&&t.itemId===e.itemId));return 0===i.length?void 0:i}getHighlightData(t,e){return e?[e]:void 0}updateHighlightSelection(t){return S(this,null,(function*(){var e;const{highlightSelection:i,highlightLabelSelection:s,_contextNodeData:n}=this,a=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight(),r=t&&null!=a&&a.datum?a:void 0;let o,l;if(null!=r){const t=this.isLabelEnabled();for(const{labelData:e,nodeData:i}of n)if(l=this.getHighlightData(i,r),o=t?this.getHighlightLabelData(e,r):void 0,(!t||null!=o)&&null!=l)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:l,highlightSelection:i}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:o,highlightLabelSelection:s}),l}))}pickNodeExactShape(t){var e;const i=super.pickNodeExactShape(t);if(i)return i;const{x:s,y:n}=t,{opts:{hasMarkers:a}}=this;let r;for(const{dataNodeGroup:o,markerGroup:l}of this.subGroups)if(r=o.pickNode(s,n),!r&&a&&(r=null==l?void 0:l.pickNode(s,n)),r)break;if(r)return{datum:r.datum,distance:0};for(const o of this.moduleMap.modules()){const{datum:i}=null!=(e=o.pickNodeExact(t))?e:{};if(void 0!==i)return{datum:i,distance:0}}}pickNodeClosestDatum(t){var e,i;const{x:s,y:n}=t,{axes:a,rootGroup:r,_contextNodeData:o}=this,l=a.x,h=a.y,c=r.transformPoint(s,n);let d,u=1/0;for(const g of o)for(const t of g.nodeData){const{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i)||!(null==l?void 0:l.inRange(e))||!(null==h?void 0:h.inRange(i)))continue;const s=Math.max(p(c.x-e,2)+p(c.y-i,2),0);s<u&&(u=s,d=t)}for(const p of this.moduleMap.modules()){const e=p.pickNodeNearest(t);if(void 0!==e&&e.distanceSquared<u){u=e.distanceSquared,d=e.datum;break}}if(d){return{datum:d,distance:Math.max(Math.sqrt(u)-(null!=(i=null==(e=d.point)?void 0:e.size)?i:0),0)}}}pickNodeMainAxisFirst(t,e){var i,s;const{x:n,y:a}=t,{axes:r,rootGroup:o,_contextNodeData:l}=this,h=r.x,c=r.y,d=[h,c].filter((t=>t instanceof Sl)).map((t=>t.direction));if(e&&0===d.length)return;const[u="x"]=d,g=o.transformPoint(n,a),f="x"===u?[g.x,g.y]:[g.y,g.x],m=[1/0,1/0];let y;for(const p of l)for(const t of p.nodeData){const{point:{x:e=NaN,y:i=NaN}={}}=t;if(isNaN(e)||isNaN(i)||!(null==h?void 0:h.inRange(e))||!(null==c?void 0:c.inRange(i)))continue;const s="x"===u?[e,i]:[i,e];let n=!0;for(let t=0;t<s.length;t++){const e=Math.abs(s[t]-f[t]);if(e>m[t]){n=!1;break}e<m[t]&&(m[t]=e,m.fill(1/0,t+1,m.length))}n&&(y=t)}if(y){let e=Math.max(p(m[0],2)+p(m[1],2)-(null!=(s=null==(i=y.point)?void 0:i.size)?s:0),0);for(const i of this.moduleMap.modules()){const s=i.pickNodeMainAxisFirst(t);if(void 0!==s&&s.distanceSquared<e){y=s.datum,e=s.distanceSquared;break}}return{datum:y,distance:Math.sqrt(e)}}}onLegendItemClick(t){const{legendItemName:e}=this.properties,{enabled:i,itemId:s,series:n}=t,a=null!=e&&e===t.legendItemName;(n.id===this.id||a)&&this.toggleSeriesItem(s,i)}onLegendItemDoubleClick(t){const{enabled:e,itemId:i,series:s,numVisibleItems:n}=t,{legendItemName:a}=this.properties,r=null!=a&&a===t.legendItemName;s.id===this.id||r||e&&1===n?this.toggleSeriesItem(i,!0):this.toggleSeriesItem(i,!1)}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRects(t,e){const{dirtyNodeData:i,sizeCache:s,minRect:n,minVisibleRect:a}=this.minRectsCache,r=JSON.stringify({width:t,height:e});if(r===s&&!i&&n&&a)return{minRect:n,minVisibleRect:a};const o=this.computeMinRects(t,e);return this.minRectsCache={dirtyNodeData:!1,sizeCache:r,minRect:null==o?void 0:o.minRect,minVisibleRect:null==o?void 0:o.minVisibleRect},o}computeMinRects(t,e){var i,s;const[n]=this._contextNodeData;if(null==n||!n.nodeData.length)return;const{nodeData:a}=n,r=Array(a.length),o=Array(a.length);for(const[v,{midPoint:x}]of a.entries())r[v]=null!=(i=null==x?void 0:x.x)?i:0,o[v]=null!=(s=null==x?void 0:x.y)?s:0;r.sort(((t,e)=>t-e)),o.sort(((t,e)=>t-e));let l,h,c,d,u=0,p=0;for(let v=1;v<a.length;v++)r[v]>=0&&(l??(l=v)),r[v]>t&&(h??(h=v)),o[v]>=0&&(c??(c=v)),o[v]>e&&(d??(d=v)),u=Math.max(u,r[v]-r[v-1]),p=Math.max(p,o[v]-o[v-1]);h??(h=a.length),d??(d=a.length);const g=null!=l&&null!=h?r.slice(l,h):[],f=null!=c&&null!=d?o.slice(c,d):[];let m=0,y=0;for(let v=1;v<Math.max(g.length,f.length);v++){const t=g[v],e=g[v-1],i=f[v],s=f[v-1];null!=t&&null!=e&&(m=Math.max(m,t-e)),null!=i&&null!=s&&(y=Math.max(y,i-s))}return{minRect:new Qs(0,0,u,p),minVisibleRect:new Qs(0,0,m,y)}}updateHighlightSelectionItem(t){const{opts:{hasMarkers:e}}=this,{items:i,highlightSelection:s}=t,n=i??[];if(e){const t=s;return this.updateMarkerSelection({nodeData:n,markerSelection:t,seriesIdx:-1})}return this.updateDatumSelection({nodeData:n,datumSelection:s,seriesIdx:-1})}updateHighlightSelectionLabel(t){var e;return this.updateLabelSelection({labelData:null!=(e=t.items)?e:[],labelSelection:t.highlightLabelSelection,seriesIdx:-1})}updateDatumSelection(t){return S(this,null,(function*(){return t.datumSelection}))}updateDatumNodes(t){return S(this,null,(function*(){}))}updateMarkerSelection(t){return S(this,null,(function*(){return t.markerSelection}))}updateMarkerNodes(t){return S(this,null,(function*(){}))}updatePaths(t){return S(this,null,(function*(){t.paths.forEach((t=>t.visible=!1))}))}updatePathNodes(t){return S(this,null,(function*(){const{paths:e,opacity:i,visible:s}=t;for(const t of e)t.opacity=i,t.visible=s}))}resetAllAnimation(t){var e,i;const{path:s,datum:n,label:a,marker:r}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),s&&t.paths.forEach((t=>{po(t,s)})),n&&po(t.datumSelections,n),a&&po(t.labelSelections,a),r&&po(t.markerSelections,r),t.contextData.some((t=>!1===t.animationValid))&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e,i;const{datum:s}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};s&&po([t],s)}animateReadyHighlightMarkers(t){var e,i;const{marker:s}=null!=(i=null==(e=this.opts)?void 0:e.animationResetFns)?i:{};s&&po([t],s)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t,e){return{datumSelections:this.subGroups.map((t=>{let{datumSelection:e}=t;return e})),markerSelections:this.subGroups.filter((t=>{let{markerSelection:e}=t;return void 0!==e})).map((t=>{let{markerSelection:e}=t;return e})),labelSelections:this.subGroups.map((t=>{let{labelSelection:e}=t;return e})),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map((t=>{let{paths:e}=t;return e})),seriesRect:t}}calculateScaling(){const t={},e=e=>{const i=this.axes[e];if(i)if(i.scale instanceof No){const{range:s,domain:n}=i.scale;t[e]={type:"log",convert:t=>i.scale.convert(t),domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale instanceof $a){const{range:s}=i.scale,n=i.scale.getDomain();t[e]={type:"continuous",domain:[n[0],n[1]],range:[s[0],s[1]]}}else if(i.scale){const{domain:s}=i.scale;t[e]={type:"category",domain:s,range:s.map((t=>i.scale.convert(t)))}}};return e("x"),e("y"),t}},Td=["top","right","bottom","left"],Ad=class t extends $c{constructor(t,e){super(t,e),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastClipSeries=!1,this._lastVisibility={crossLines:!0,series:!0}}destroySeries(t){super.destroySeries(t),this.firstSeriesTranslation=!0}performLayout(){return S(this,null,(function*(){const e=yield b(t.prototype,this,"performLayout").call(this),{firstSeriesTranslation:i,seriesRoot:s}=this,{animationRect:n,seriesRect:a,visibility:r,clipSeries:o}=this.updateAxes(e);this.seriesRoot.visible=r.series,this.seriesRect=a,this.animationRect=n;const{x:l,y:h}=a;if(i)s.translationX=Math.floor(l),s.translationY=Math.floor(h),this.firstSeriesTranslation=!1;else{const{translationX:t,translationY:e}=s;Nn(this.id,"seriesRect",this.animationManager,[this.seriesRoot],{translationX:t,translationY:e},{translationX:Math.floor(l),translationY:Math.floor(h)},{phase:"update"})}const c=a.clone().grow(this.seriesArea.padding);this.hoverRect=c,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:o,series:{rect:a,paddedRect:c,visible:r.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map((t=>f({id:t.id},t.getLayoutState())))});const d=this.modulesManager.mapModules((t=>{var e;return null==(e=t.performCartesianLayout)?void 0:e.call(t,{seriesRect:a})}));return yield Promise.all(d),e}))}updateAxes(t){var e;const i=this.axes.flatMap((t=>{var e;return null!=(e=t.crossLines)?e:[]})).map((t=>t.id));let s,n,a;null!=this._lastCrossLineIds&&this._lastCrossLineIds.length===i.length&&this._lastCrossLineIds.every(((t,e)=>i[e]===t))?(s=f({},this._lastAxisWidths),n=this._lastClipSeries,a=f({},this._lastVisibility)):(s={top:0,bottom:0,left:0,right:0},n=!1,a={crossLines:!0,series:!0},this._lastCrossLineIds=i);const r=new Set(this.axes.map((t=>t.position)));for(const f of Object.keys(s))r.has(f)||delete s[f];const o=(t,e,i)=>!Object.keys(t).some((t=>null==s[t]))&&(a.crossLines===i.crossLines&&a.series===i.series&&Object.entries(s).every((e=>{let[i,s]=e;const n=t[i];return null==s&&null==n||s===n}))&&n===e),l=t=>Zt(t,(t=>t&&Math.abs(t)===1/0?0:null!=t?Math.ceil(t):t));let h={},c={},d=!1,u=null==(e=this.seriesRect)?void 0:e.clone(),p=0,g={};do{Object.assign(s,h),n=d,Object.assign(a,c);const e=this.updateAxesPass(s,t.clone(),u);if(h=l(e.axisWidths),c=e.visibility,d=e.clipSeries,u=e.seriesRect,g=e.primaryTickCounts,p++>10){O.warn("unable to find stable axis layout.");break}}while(!o(h,d,c));this.axes.forEach((t=>{t.update(g[t.direction])}));return this.axes.forEach((e=>{if(e.setCrossLinesVisible(a.crossLines),u)switch(e.clipGrid(u.x,u.y,u.width+5,u.height+5),e.position){case"left":case"right":e.clipTickLines(t.x,u.y,t.width+5,u.height+5);break;case"top":case"bottom":e.clipTickLines(u.x,t.y,u.width+5,t.height+5)}})),this._lastAxisWidths=s,this._lastVisibility=a,{seriesRect:u,animationRect:t,visibility:a,clipSeries:n}}updateAxesPass(t,e,i){const s={},n={},a={series:!0,crossLines:!0};let r=!1;const o={},l=this.applySeriesPadding(e),h=i?this.buildCrossLinePadding(t):{},c=this.buildAxisBound(l,t,h,a),d=this.buildSeriesRect(c,t);return this.axes.forEach((e=>{var i,a;const{position:h="left"}=e,{clipSeries:u,axisThickness:p,axisOffset:g}=this.calculateAxisDimensions({axis:e,seriesRect:d,paddedBounds:l,axisWidths:t,newAxisWidths:n,primaryTickCounts:o,clipSeries:r,addInterAxisPadding:(null!=(i=s[h])?i:0)>0});s[h]=(null!=(a=s[h])?a:0)+1,r=r||u,this.positionAxis({axis:e,axisBound:c,axisOffset:g,axisThickness:p,axisWidths:t,primaryTickCounts:o,seriesRect:d})})),{clipSeries:r,seriesRect:d,axisWidths:n,visibility:a,primaryTickCounts:o}}buildCrossLinePadding(t){var e;const i={};this.axes.forEach((t=>{t.crossLines&&t.crossLines.forEach((t=>{var e;null==(e=t.calculatePadding)||e.call(t,i)}))}));for(const[s,n=0]of Object.entries(i))i[s]=Math.max(n-(null!=(e=t[s])?e:0),0);return i}applySeriesPadding(t){const e=t.clone(),i=this.axes.slice().reverse();return Td.forEach((t=>{const s=this.seriesArea.padding[t],n=i.find((e=>e.position===t));n?n.seriesAreaPadding=s:e.shrink(s,t)})),e}buildAxisBound(t,e,i,s){var n,a,r,o;const l=t.clone(),{top:h=0,right:c=0,bottom:d=0,left:u=0}=i,p=u+c,g=h+d,f=(null!=(n=e.left)?n:0)+(null!=(a=e.right)?a:0)+p,m=(null!=(r=e.top)?r:0)+(null!=(o=e.bottom)?o:0)+g;return l.width<=f||l.height<=m?(s.crossLines=!1,s.series=!1,l):(l.x+=u,l.y+=h,l.width-=p,l.height-=g,l)}buildSeriesRect(t,e){const i=t.clone(),{top:s,bottom:n,left:a,right:r}=e;return i.x+=a??0,i.y+=s??0,i.width-=(a??0)+(r??0),i.height-=(s??0)+(n??0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(t,e,i,s){const{x:n,y:a,width:r,height:o}=t,l=[n,a,n+r,a+o][("x"===i?0:1)+(1===s?0:2)];return(1===s?Math.min:Math.max)(e,l)}calculateAxisDimensions(t){var e,i,s;const{axis:n,seriesRect:a,paddedBounds:r,axisWidths:o,newAxisWidths:l,primaryTickCounts:h,addInterAxisPadding:c}=t;let{clipSeries:d}=t;const{position:u="left",direction:p}=n,g=n instanceof Sl||n instanceof Ol,f="left"===u||"right"===u,m=null!=(e=l[u])?e:0,{min:y,max:v}=this.zoomManager.getAxisZoom(n.id);f?(g?(n.range=[0,a.height],n.visibleRange=[1-v,1-y]):(n.range=[a.height,0],n.visibleRange=[y,v]),n.gridLength=a.width):(n.range=[0,a.width],n.visibleRange=[y,v],n.gridLength=a.height);let x=n.nice?h[p]:void 0;const b="y"===p;n.thickness?n.maxThickness=n.thickness:n.maxThickness=.3*(b?r.width:r.height);const S=n.calculateLayout(x);let k;if(x=S.primaryTickCount,null!=h[p]||(h[p]=x),d||(d=n.dataDomain.clipped||n.visibleRange[0]>0||n.visibleRange[1]<1),null!=n.thickness&&n.thickness>0)k=n.thickness;else{const{bbox:t}=S;k=b?t.width:t.height}return c&&(k+=15),k=Math.ceil(k),l[u]=(null!=(i=l[u])?i:0)+k,n.gridPadding=(null!=(s=o[u])?s:0)-l[u],{clipSeries:d,axisThickness:k,axisOffset:m,primaryTickCount:x}}positionAxis(t){var e,i,s,n;const{axis:a,axisBound:r,axisWidths:o,seriesRect:l,axisOffset:h,axisThickness:c}=t,{position:d}=a;switch(d){case"top":a.translation.x=r.x+(null!=(e=o.left)?e:0),a.translation.y=this.clampToOutsideSeriesRect(l,r.y+1+h+c,"y",1);break;case"bottom":a.translation.x=r.x+(null!=(i=o.left)?i:0),a.translation.y=this.clampToOutsideSeriesRect(l,r.y+r.height+1-c-h,"y",-1);break;case"left":a.translation.y=r.y+(null!=(s=o.top)?s:0),a.translation.x=this.clampToOutsideSeriesRect(l,r.x+h+c,"x",1);break;case"right":a.translation.y=r.y+(null!=(n=o.top)?n:0),a.translation.x=this.clampToOutsideSeriesRect(l,r.x+r.width-c-h,"x",-1)}a.updatePosition({rotation:Gn(a.rotation),sideFlag:a.label.getSideFlag()})}shouldFlipXY(){return!this.series.some((t=>!(t instanceof Rd&&t.shouldFlipXY())))}};Ad.className="CartesianChart",Ad.type="cartesian";var Ed=Ad,Nd=class t{static isInstance(e){var i;return e instanceof t||"AgChartInstanceProxy"===(null==(i=e.constructor)?void 0:i.name)&&null!=e.chart||null!=e.chart&&this.validateImplementation(e)}static validateImplementation(t){var e;const i=Object.keys(null!=(e=Object.getPrototypeOf(t))?e:{});return["getOptions","destroy"].every((t=>i.includes(t)))}constructor(t){this.chart=t}getOptions(){return Se(this.chart.getOptions())}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}};Nd.chartInstances=new WeakMap,x([$o({oldValue(t){Nd.chartInstances.delete(t)},newValue(t){Nd.chartInstances.set(t,this)}})],Nd.prototype,"chart",2);var Od=Nd,Id=class extends $a{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(t){return t}ticks(){var t;const e=null!=(t=this.tickCount)?t:$a.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some((t=>!isFinite(t))))return[];this.refresh();const[i,s]=this.getDomain(),{interval:n}=this;if(n){const t=Math.abs(n);if(!ur({start:i,stop:s,interval:t,availableRange:this.getPixelRange()}))return dr(i,s,t)}return lr(i,s,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(t,e){var i,s;const n=null!=(i=this.tickCount)?i:$a.defaultTickCount;return null!=(s=this.interval)?s:cr(t,e,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var t;const e=null!=(t=this.tickCount)?t:$a.defaultTickCount;if(e<1)return void(this.niceDomain=[...this.domain]);let[i,s]=this.domain;if(1===e)[i,s]=function(t,e){const i=Math.abs(e-t),s=Math.floor(Math.log10(i)),n=Math.pow(10,s),a=t>e?Math.ceil:Math.floor,r=e<t?Math.floor:Math.ceil;return hr.map((s=>{const o=s*n,l=a(t/o)*o,h=r(e/o)*o;return{error:1-i/Math.abs(h-l),domain:[l,h]}})).sort(((t,e)=>t.error-e.error))[0].domain}(i,s);else{const t=i>s?Math.ceil:Math.floor,e=s<i?Math.floor:Math.ceil,n=4;for(let a=0;a<n;a++){const n=i,a=s,r=this.getTickStep(i,s),[o,l]=this.domain;if(r>=1)i=t(o/r)*r,s=e(l/r)*r;else{const n=1/r;i=t(o*n)/n,s=e(l*n)/n}if(i===n&&s===a)break}}this.niceDomain=[i,s]}tickFormat(t){let{ticks:e,specifier:i}=t;return Ao(e??this.ticks(),i)}};function Pd(t,e,i){let[s,n]=Vs(t);s=function(t,e,i){const s=Math.abs(e-t)/(i-1),n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return Math.floor(t/a)*a}(Math.floor(s),n,e);const a=function(t,e,i){const s=i-1,n=(e-t)/s;return function(t){const e=Math.floor(Math.log10(t)),i=Math.pow(10,e),s=t/i*10;return s>0&&s<=1?i/10:s>1&&s<=2?2*i/10:s>1&&s<=5?5*i/10:s>5&&s<=10?10*i/10:s>10&&s<=20?20*i/10:s>20&&s<=40?40*i/10:s>40&&s<=50?50*i/10:s>50&&s<=100?100*i/10:s}(n)}(s,n,e);n=s+(e-1)*a;const r=i?[n,s]:[s,n],o=function(t,e,i){const s=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(s):0,a=Math.pow(10,n),r=or(n);for(let o=0;o<i;o++){const i=t+e*o;r[o]=Math.round(i*a)/a}return r}(s,a,e);return[r,o]}var Bd=class extends rl{constructor(){super(...arguments),this.maxSpacing=NaN}};x([Yn(Ba),il(NaN)],Bd.prototype,"maxSpacing",2);var _d=class extends bl{constructor(t){super(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Id),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=ds(t,e,i);return{domain:s,clipped:n}}formatDatum(t){return"number"==typeof t?t.toFixed(2):(O.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(t))}createTick(){return new Bd}updateSecondaryAxisTicks(t){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,i]=Pd(this.dataDomain.domain,t??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),i}};_d.className="NumberAxis",_d.type="number",x([Yn(Un(na,la("max"))),il(NaN)],_d.prototype,"min",2),x([Yn(Un(na,ha("min"))),il(NaN)],_d.prototype,"max",2);var Fd=_a((t=>Vt(t)&&0!==t),"a non-zero number"),Gd=class extends _d{constructor(t){super(t,new No),this.min=NaN,this.max=NaN}normaliseDataDomain(t){const{min:e,max:i}=this,{extent:s,clipped:n}=ds(t,e,i),a=s[0]>s[1],r=s[0]<0&&s[1]>0,o=0===s[0]&&0===s[1];return(a||r||o)&&(r?O.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):o&&O.warn("the data domain has 0 extent, no data is rendered.")),0===s[0]&&(s[0]=1),0===s[1]&&(s[1]=-1),{domain:s,clipped:n}}set base(t){this.scale.base=t}get base(){return this.scale.base}};Gd.className="LogAxis",Gd.type="log",x([Yn(Un(na,Fd,la("max"))),il(NaN)],Gd.prototype,"min",2),x([Yn(Un(na,Fd,ha("min"))),il(NaN)],Gd.prototype,"max",2);var zd=class extends rl{constructor(){super(...arguments),this.maxSpacing=NaN}};x([Yn(Ba),il(NaN)],zd.prototype,"maxSpacing",2);var Wd=class extends bl{constructor(t){super(t,new gr),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(t){var e;let{min:i,max:s}=this,n=!1;return"number"==typeof i&&(i=new Date(i)),"number"==typeof s&&(s=new Date(s)),t.length>2&&(t=(null!=(e=hs(t))?e:[0,1e3]).map((t=>new Date(t)))),i instanceof Date&&(n||(n=i>t[0]),t=[i,t[1]]),s instanceof Date&&(n||(n=s<t[1]),t=[t[0],s]),t[0]>t[1]&&(t=[]),{domain:t,clipped:n}}createTick(){return new zd}onLabelFormatChange(t,e){e?super.onLabelFormatChange(t,e):this.labelFormatter=this.scale.tickFormat({ticks:t})}formatDatum(t){var e;return null!=(e=this.moduleCtx.callbackCache.call(this.datumFormatter,t))?e:String(t)}calculatePadding(t,e,i){return i?[1,0]:[0,1]}};Wd.className="TimeAxis",Wd.type="time",x([Yn(Un(da,la("max")),{optional:!0})],Wd.prototype,"min",2),x([Yn(Un(da,ha("min")),{optional:!0})],Wd.prototype,"max",2);var Vd=1e-6,Kd=(t,e,i,s,n)=>{let a=!1,r=!1,o=s-Math.sqrt(Math.max(p(n,2)-p(i,2),0)),l=0,h=0,c=i-Math.sqrt(Math.max(p(n,2)-p(s,2),0));return o>t?(a=!0,o=t,l=i-Math.sqrt(Math.max(p(n,2)-p(s-t,2)))):o<Vd&&(o=0),c>e?(r=!0,h=s-Math.sqrt(Math.max(p(n,2)-p(i-e,2))),c=e):c<Vd&&(c=0),{leading0:o,leading1:l,trailing0:h,trailing1:c,leadingClipped:a,trailingClipped:r}},Yd=(t,e,i,s)=>{let{x0:n,y0:a,x1:r,y1:o,cx:l,cy:h}=e;if(s&&t.moveTo(n,a),n!==r||a!==o){const e=Math.atan2(a-h,n-l),s=Math.atan2(o-h,r-l);t.arc(l,h,i,e,s)}else t.lineTo(n,a)},$d=(t,e,i,s,n,a,r)=>{let{topLeft:o,topRight:l,bottomRight:h,bottomLeft:c}=a;const d=Math.max(o+c,l+h),u=Math.max(o+l,c+h);if(d<=0&&u<=0)return void t.rect(e,i,s,n);if(null==r&&o===l&&o===h&&o===c)return void t.roundRect(e,i,s,n,o);if(s<0&&(e+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),null!=r){const t=Math.max(e,r.x),a=Math.min(e+s,r.x+r.width),o=Math.max(i,r.y),l=Math.min(i+n,r.y+r.height);e=t,i=o,s=a-t,n=l-o}if(s<=0||n<=0)return;r??(r=new Qs(e,i,s,n));const p=Math.max(d/r.height,u/r.width,1);p>1&&(o/=p,l/=p,h/=p,c/=p);let g,f,m,y,v=!0,x=!0,b=!0,S=!0;if(v){const t=Kd(n,s,Math.max(r.x+o-e,0),Math.max(r.y+o-i,0),o);t.leadingClipped&&(S=!1),t.trailingClipped&&(x=!1);g={x0:Math.max(e+t.leading1,e),y0:Math.max(i+t.leading0,i),x1:Math.max(e+t.trailing1,e),y1:Math.max(i+t.trailing0,i),cx:r.x+o,cy:r.y+o}}if(x){const t=Kd(s,n,Math.max(r.y+l-i,0),Math.max(e+s-(r.x+r.width-l),0),l);t.leadingClipped&&(v=!1),t.trailingClipped&&(b=!1);f={x0:Math.min(e+s-t.leading0,e+s),y0:Math.max(i+t.leading1,i),x1:Math.min(e+s-t.trailing0,e+s),y1:Math.max(i+t.trailing1,i),cx:r.x+r.width-l,cy:r.y+l}}if(b){const t=Kd(n,s,Math.max(e+s-(r.x+r.width-h),0),Math.max(i+n-(r.y+r.height-h),0),h);t.leadingClipped&&(x=!1),t.trailingClipped&&(S=!1);m={x0:Math.min(e+s-t.leading1,e+s),y0:Math.min(i+n-t.leading0,i+n),x1:Math.min(e+s-t.trailing1,e+s),y1:Math.min(i+n-t.trailing0,i+n),cx:r.x+r.width-h,cy:r.y+r.height-h}}if(S){const t=Kd(s,n,Math.max(i+n-(r.y+r.height-c),0),Math.max(r.x+c-e,0),c);t.leadingClipped&&(b=!1),t.trailingClipped&&(v=!1);y={x0:Math.max(e+t.leading0,e),y0:Math.min(i+n-t.leading1,i+n),x1:Math.max(e+t.trailing0,e),y1:Math.min(i+n-t.trailing1,i+n),cx:r.x+c,cy:r.y+r.height-c}}let k=!1;v&&null!=g&&(Yd(t,g,o,!k),k||(k=!0)),x&&null!=f&&(Yd(t,f,l,!k),k||(k=!0)),b&&null!=m&&(Yd(t,m,h,!k),k||(k=!0)),S&&null!=y&&(Yd(t,y,c,!k),k||(k=!0)),t.closePath()},Ud=class extends Qc{constructor(){super(...arguments),this.borderPath=new Zc,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.cornerRadiusBbox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Cr.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Cr.defaultStyles.strokeWidth,this.hittester=super.isPointInPath,this.microPixelEffectOpacity=1}set cornerRadius(t){this.topLeftCornerRadius=t,this.topRightCornerRadius=t,this.bottomRightCornerRadius=t,this.bottomLeftCornerRadius=t}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!(!this.path.isDirty()&&!this.borderPath.isDirty())}updatePath(){var t,e,i;const{path:s,borderPath:n,crisp:a,topLeftCornerRadius:r,topRightCornerRadius:o,bottomRightCornerRadius:l,bottomLeftCornerRadius:h}=this;let{x:c,y:d,width:u,height:p,strokeWidth:g,cornerRadiusBbox:f}=this;const m=1/(null!=(e=null==(t=this.layerManager)?void 0:t.canvas.pixelRatio)?e:1);let y=1;if(s.clear({trackChanges:!0}),n.clear({trackChanges:!0}),a&&(u<=m&&(y*=u/m),p<=m&&(y*=p/m),u=this.align(c,u),p=this.align(d,p),c=this.align(c),d=this.align(d),f=null!=f?new Qs(this.align(f.x),this.align(f.y),this.align(f.x,f.width),this.align(f.y,f.height)):void 0),g)if(u<m){const t=c+m/2;n.moveTo(t,d),n.lineTo(t,d+p),g=m,this.borderClipPath=void 0}else if(p<m){const t=d+m/2;n.moveTo(c,t),n.lineTo(c+u,t),g=m,this.borderClipPath=void 0}else if(g<u&&g<p){const t=g/2;c+=t,d+=t,u-=g,p-=g;const e=null==f?void 0:f.clone().shrink(t),i={topLeft:r>0?r-g:0,topRight:o>0?o-g:0,bottomRight:l>0?l-g:0,bottomLeft:h>0?h-g:0};this.borderClipPath=void 0,$d(s,c,d,u,p,i,e),$d(n,c,d,u,p,i,e)}else this.borderClipPath=null!=(i=this.borderClipPath)?i:new Zc,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(c,d,u,p),n.rect(c,d,u,p);else{const t={topLeft:r,topRight:o,bottomRight:l,bottomLeft:h};this.borderClipPath=void 0,$d(s,c,d,u,p,t,f)}[r,o,l,h].every((t=>0===t))?this.hittester=(t,e)=>{const i=this.transformPoint(t,e);return this.getCachedBBox().containsPoint(i.x,i.y)}:this.hittester=super.isPointInPath,this.effectiveStrokeWidth=g,this.lastUpdatePathStrokeWidth=g,this.microPixelEffectOpacity=y}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new Qs(t,e,i,s)}isPointInPath(t,e){return this.hittester(t,e)}applyFillAlpha(t){const{fillOpacity:e,microPixelEffectOpacity:i,opacity:s}=this,{globalAlpha:n}=t;t.globalAlpha=n*s*e*i}renderStroke(t){const{stroke:e,effectiveStrokeWidth:i,borderPath:s,borderClipPath:n,opacity:a,microPixelEffectOpacity:r}=this;if(e&&i){const{strokeOpacity:o,lineDash:l,lineDashOffset:h,lineCap:c,lineJoin:d}=this;n&&(n.draw(t),t.clip()),s.draw(t);const{globalAlpha:u}=t;t.strokeStyle=e,t.globalAlpha=u*a*o*r,t.lineWidth=i,l&&t.setLineDash(l),h&&(t.lineDashOffset=h),c&&(t.lineCap=c),d&&(t.lineJoin=d),t.stroke(),t.globalAlpha=u}}};Ud.className="Rect",x([Jc()],Ud.prototype,"x",2),x([Jc()],Ud.prototype,"y",2),x([Jc()],Ud.prototype,"width",2),x([Jc()],Ud.prototype,"height",2),x([Jc()],Ud.prototype,"topLeftCornerRadius",2),x([Jc()],Ud.prototype,"topRightCornerRadius",2),x([Jc()],Ud.prototype,"bottomRightCornerRadius",2),x([Jc()],Ud.prototype,"bottomLeftCornerRadius",2),x([Jc()],Ud.prototype,"cornerRadiusBbox",2),x([Jc()],Ud.prototype,"crisp",2);var Xd=class extends St{constructor(t){super(),this.node=new Sr({name:"background",zIndex:0}),this.rectNode=new Ud,this.visible=!0,this.fill="white",this.node.appendChild(this.rectNode),this.destroyFns.push(t.scene.attachNode(this.node),t.layoutService.addListener("layout-complete",(t=>this.onLayoutComplete(t))))}onLayoutComplete(t){const{width:e,height:i}=t.chart;this.rectNode.width=e,this.rectNode.height=i}};x([Yn(qn),Yo("node","visible")],Xd.prototype,"visible",2),x([Yn(pa,{optional:!0}),Yo("rectNode","fill")],Xd.prototype,"fill",2),x([Yn(Hn,{optional:!0})],Xd.prototype,"image",2);var Hd={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:Xd};function jd(t){let{orientation:e,bboxes:i,maxHeight:s,maxWidth:n,itemPaddingY:a=0,itemPaddingX:r=0,forceResult:o=!1}=t;const l="horizontal"===e,h={max:l?n:s,fn:l?t=>t.width:t=>t.height,padding:l?r:a},c={max:l?s:n,fn:l?t=>t.height:t=>t.width,padding:l?a:r};let d=0;const u=[];for(;d<i.length;){const t=qd(i.slice(d),d,h,c,o);if(!t)return;d+=t.processedBBoxCount,u.push(t.pageIndices)}return function(t,e,i,s,n){let a=0,r=0;return{pages:t.map((t=>{"horizontal"===e&&(t=function(t){const e=[];for(const i of t[0])e.push([]);return t.forEach(((t,i)=>{t.forEach(((t,s)=>{e[s][i]=t}))})),e}(t));let o=0;const l=t.map((t=>{const e=t.map((t=>(o=Math.max(t,o),i[t])));let a=0,r=0;return e.forEach((t=>{a+=t.height+s,r=Math.max(r,t.width+n)})),{indices:t,bboxes:e,columnHeight:Math.ceil(a),columnWidth:Math.ceil(r)}}));let h=0,c=0;return l.forEach((t=>{h+=t.columnWidth,c=Math.max(c,t.columnHeight)})),a=Math.max(h,a),r=Math.max(c,r),{columns:l,startIndex:t[0][0],endIndex:o,pageWidth:h,pageHeight:c}})),maxPageWidth:a,maxPageHeight:r}}(u,e,i,a,r)}function qd(t,e,i,s,n){let a=function(t,e){const i=t.length;let s=0;for(let n=0;n<i;n++)if(s+=e.fn(t[n])+e.padding,s>e.max)return i/n<2?Math.ceil(i/2):n;return i}(t,i);if(a<1){if(!n)return;a=1}let r=a;for(;r>=1;){const a=Zd(t,e,r,i,s,n);if(null==a&&r<=1)return;if(null!=a){if("number"!=typeof a)return{processedBBoxCount:a.length*a[0].length,pageIndices:a};if(a<=1)return;r=a<r&&a>1?a:r,r--}else r--}}function Zd(t,e,i,s,n,a){var r;const o=[];let l=0,h=0,c=[];const d=[];for(let u=0;u<t.length;u++){const p=(u+i)%i;0===p&&(l+=h,h=0,c.length>0&&o.push(c),c=[]);const g=s.fn(t[u])+s.padding;d[p]=Math.max(null!=(r=d[p])?r:0,g),h=Math.max(h,n.fn(t[u])+n.padding);const f=l+h,m=!a||o.length>0;if(f>n.max&&m){c=[];break}if(d.reduce(((t,e)=>t+e),0)>s.max&&!a)return d.length<i?d.length:void 0;c.push(u+e)}return c.length>0&&o.push(c),o.length>0?o:void 0}var Jd=class extends Sr{constructor(){super({name:"markerLabelGroup"}),this.label=new Ir,this.line=new Io,this._marker=new cd,this._markerSize=15,this._spacing=8;const{marker:t,label:e,line:i}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=1,this.append([i,t,e]),this.update()}set marker(t){this._marker!==t&&(this.removeChild(this._marker),this._marker=t,this.appendChild(t),this.update())}get marker(){return this._marker}set markerSize(t){this._markerSize!==t&&(this._markerSize=t,this.update())}get markerSize(){return this._markerSize}set spacing(t){this._spacing!==t&&(this._spacing=t,this.update())}get spacing(){return this._spacing}setSeriesStrokeOffset(t){const e=this.marker.size/2+t;this.line.x1=-e,this.line.x2=e,this.line.y1=0,this.line.y2=0,this.line.markDirtyTransform(),this.update()}update(){const{markerSize:t}=this,e=this.marker.constructor.center;this.marker.size=t,this.marker.x=(e.x-.5)*t,this.marker.y=(e.y-.5)*t;const i=this.line.visible?this.line.x2:-1/0,s=t/2;this.label.x=Math.max(i,s)+this.spacing}render(t){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,this.line.opacity=this.opacity,super.render(t)}};Jd.className="MarkerLabel",x([Yo("label")],Jd.prototype,"text",2),x([Yo("label")],Jd.prototype,"fontStyle",2),x([Yo("label")],Jd.prototype,"fontWeight",2),x([Yo("label")],Jd.prototype,"fontSize",2),x([Yo("label")],Jd.prototype,"fontFamily",2),x([Yo("label","fill")],Jd.prototype,"color",2),x([Yo("marker","fill")],Jd.prototype,"markerFill",2),x([Yo("marker","stroke")],Jd.prototype,"markerStroke",2),x([Yo("marker","strokeWidth")],Jd.prototype,"markerStrokeWidth",2),x([Yo("marker","fillOpacity")],Jd.prototype,"markerFillOpacity",2),x([Yo("marker","strokeOpacity")],Jd.prototype,"markerStrokeOpacity",2),x([Yo("marker","visible")],Jd.prototype,"markerVisible",2),x([Yo("line","stroke")],Jd.prototype,"lineStroke",2),x([Yo("line","strokeWidth")],Jd.prototype,"lineStrokeWidth",2),x([Yo("line","strokeOpacity")],Jd.prototype,"lineStrokeOpacity",2),x([Yo("line","lineDash")],Jd.prototype,"lineLineDash",2),x([Yo("line","visible")],Jd.prototype,"lineVisible",2);var Qd=class extends me{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};x([Yn(pa)],Qd.prototype,"color",2),x([Yn(Da,{optional:!0})],Qd.prototype,"fontStyle",2),x([Yn(Ma,{optional:!0})],Qd.prototype,"fontWeight",2),x([Yn(ea)],Qd.prototype,"fontSize",2),x([Yn(Jn)],Qd.prototype,"fontFamily",2);var tu=class extends me{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};x([Yn(ea)],tu.prototype,"size",2),x([Yn(pa,{optional:!0})],tu.prototype,"fill",2),x([Yn(ia,{optional:!0})],tu.prototype,"fillOpacity",2),x([Yn(pa,{optional:!0})],tu.prototype,"stroke",2),x([Yn(ea)],tu.prototype,"strokeWidth",2),x([Yn(ia)],tu.prototype,"strokeOpacity",2);var eu=class extends me{constructor(t){super(),this.parent=t,this.shape=pd,this.size=15,this.padding=8}};x([$o({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],eu.prototype,"shape",2),x([Yn(ea)],eu.prototype,"size",2),x([Yn(ea)],eu.prototype,"padding",2);var iu=class extends me{constructor(t,e,i,s){super(),this.chartUpdateCallback=t,this.pageUpdateCallback=e,this.regionManager=i,this.cursorManager=s,this.id=_s(this),this.marker=new eu(this),this.activeStyle=new tu,this.inactiveStyle=new tu,this.highlightStyle=new tu,this.label=new Qd,this.group=new Sr({name:"pagination"}),this.labelNode=new Ir,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new pd,this._previousButton=new pd,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);const n=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(n.addListener("click",(t=>this.onPaginationClick(t))),n.addListener("hover",(t=>this.onPaginationMouseMove(t)))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach((t=>t()))}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(t){this._enabled=t,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(t){if("horizontal"===(this._orientation=t,t))this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;else this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}get orientation(){return this._orientation}set nextButton(t){this._nextButton!==t&&(this.group.removeChild(this._nextButton),this._nextButton=t,this.group.appendChild(t))}get nextButton(){return this._nextButton}set previousButton(t){this._previousButton!==t&&(this.group.removeChild(this._previousButton),this._previousButton=t,this.group.appendChild(t))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:t,padding:e}=this.marker;this.nextButton.size=t,this.previousButton.size=t,this.labelNode.x=t/2+e}updateNextButtonPosition(){const t=this.labelNode.computeBBox();this.nextButton.translationX=t.x+t.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:t,totalPages:e,labelNode:i,label:{color:s,fontStyle:n,fontWeight:a,fontSize:r,fontFamily:o}}=this;i.text=`${t+1} / ${e}`,i.fill=s,i.fontStyle=n,i.fontWeight=a,i.fontSize=r,i.fontFamily=o}updateMarkers(){const{nextButton:t,previousButton:e,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:a,highlightStyle:r,highlightActive:o}=this,l=(t,e)=>e?a:t===o?r:n;this.updateMarker(t,l("next",i)),this.updateMarker(e,l("previous",s))}updateMarker(t,e){var i;const{size:s}=this.marker;t.size=s,t.fill=e.fill,t.fillOpacity=null!=(i=e.fillOpacity)?i:1,t.stroke=e.stroke,t.strokeWidth=e.strokeWidth,t.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:t,totalPages:e}=this,i=0===e,s=t===e-1,n=0===t;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}nextButtonContainsPoint(t,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(t,e)}previousButtonContainsPoint(t,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(t,e)}onPaginationClick(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.incrementPage(),this.onPaginationChanged(),t.consume()):this.previousButtonContainsPoint(e,i)&&(this.decrementPage(),this.onPaginationChanged(),t.consume())}onPaginationMouseMove(t){const{offsetX:e,offsetY:i}=t;this.nextButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,i)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const t=yd(this.marker.shape||pd);this.previousButton=new t,this.nextButton=new t,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(t){t.append(this.group)}computeBBox(){return this.group.computeBBox()}};iu.className="Pagination",x([Yn(Hn)],iu.prototype,"marker",2),x([Yn(Hn)],iu.prototype,"activeStyle",2),x([Yn(Hn)],iu.prototype,"inactiveStyle",2),x([Yn(Hn)],iu.prototype,"highlightStyle",2),x([Yn(Hn)],iu.prototype,"label",2);var su=class extends me{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}};x([Yn(ea,{optional:!0})],su.prototype,"maxLength",2),x([Yn(pa)],su.prototype,"color",2),x([Yn(Da,{optional:!0})],su.prototype,"fontStyle",2),x([Yn(Ma,{optional:!0})],su.prototype,"fontWeight",2),x([Yn(ea)],su.prototype,"fontSize",2),x([Yn(Jn)],su.prototype,"fontFamily",2),x([Yn(Zn,{optional:!0})],su.prototype,"formatter",2);var nu=class extends me{constructor(){super(...arguments),this.size=15,this.padding=8,this.enabled=!0}};x([Uo((t=>{var e;return null==(e=t.parent)?void 0:e.onMarkerShapeChange()}))],nu.prototype,"shape",2),x([Yn(ea)],nu.prototype,"size",2),x([Yn(ea)],nu.prototype,"padding",2),x([Yn(ea,{optional:!0})],nu.prototype,"strokeWidth",2),x([Yn(qn)],nu.prototype,"enabled",2);var au=class extends me{};x([Yn(ea,{optional:!0})],au.prototype,"strokeWidth",2),x([Yn(ea,{optional:!0})],au.prototype,"length",2);var ru=class extends me{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0,this.showSeriesStroke=!1,this.marker=new nu,this.label=new su,this.line=new au}};x([Yn(ea,{optional:!0})],ru.prototype,"maxWidth",2),x([Yn(ea)],ru.prototype,"paddingX",2),x([Yn(ea)],ru.prototype,"paddingY",2),x([Yn(qn)],ru.prototype,"toggleSeriesVisible",2),x([Yn(qn)],ru.prototype,"showSeriesStroke",2),x([Yn(Hn)],ru.prototype,"marker",2),x([Yn(Hn)],ru.prototype,"label",2),x([Yn(Hn)],ru.prototype,"line",2);var ou=class extends me{};x([Yn(Zn,{optional:!0})],ou.prototype,"legendItemClick",2),x([Yn(Zn,{optional:!0})],ou.prototype,"legendItemDoubleClick",2);var lu=class extends me{constructor(t){super(),this.ctx=t,this.id=_s(this),this.group=new Sr({name:"legend",layer:!0,zIndex:9}),this.itemSelection=Oo.select(this.group,Jd),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.item=new ru,this.listeners=new ou,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new iu((e=>t.updateService.update(e)),(t=>this.updatePageNumber(t)),t.regionManager,t.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const e=t.regionManager.addRegion("legend",this.group);this.destroyFns.push(e.addListener("click",(t=>this.checkLegendClick(t)),9),e.addListener("dblclick",(t=>this.checkLegendDoubleClick(t)),9),e.addListener("hover",(t=>this.handleLegendMouseMove(t))),e.addListener("leave",(t=>this.handleLegendMouseExit(t)),9),e.addListener("enter",(t=>this.handleLegendMouseEnter(t)),9),t.layoutService.addListener("start-layout",(t=>this.positionLegend(t.shrinkRect))),(()=>this.detachLegend()))}set data(t){this._data=t,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.destroyFns.forEach((t=>t())),this.pagination.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(t){const{characterWidths:e}=this;if(e.has(t))return e.get(t);const i={"...":Ir.getTextSize("...",t).width};return e.set(t,i),i}set visible(t){this._visible=t,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(t){t.appendChild(this.group)}detachLegend(){var t;null==(t=this.group.parent)||t.removeChild(this.group)}getItemLabel(t){const{ctx:{callbackCache:e}}=this,{formatter:i}=this.item.label;return i?e.call(i,{itemId:t.itemId,value:t.label.text,seriesId:t.seriesId}):t.label.text}calcLayout(t,e){const{paddingX:i,paddingY:s,label:n,maxWidth:a,marker:{size:r,padding:o,shape:l},label:{maxLength:h=1/0,fontStyle:c,fontWeight:d,fontSize:u,fontFamily:p},line:g,showSeriesStroke:f}=this.item,m=[...this.data];this.reverseOrder&&m.reverse(),this.itemSelection.update(m);const y=[],v=Br(n),x=a??.8*t,b=r+o+i;if(this.itemSelection.each(((t,e)=>{var i,s,n;const a=yd(l??e.marker.shape),m=null!=(i=e.marker.enabled)?i:this.item.marker.enabled;t.marker&&t.marker instanceof a||(t.marker=new a),t.markerSize=r,t.spacing=o,t.fontStyle=c,t.fontWeight=d,t.fontSize=u,t.fontFamily=p;const S=null!=(s=e.itemId)?s:e.id,k=(this.getItemLabel(e)??"<unknown>").replace(/\r?\n/g," ");t.text=this.truncate(k,h,x,b,v,S),f&&void 0!==e.line?(t.lineVisible=!0,t.markerVisible=m,t.setSeriesStrokeOffset(null!=(n=g.length)?n:5)):(t.lineVisible=!1,t.markerVisible=!0),y.push(t.computeBBox())})),t=Math.max(1,t),e=Math.max(1,e),!isFinite(t))return!1;const S=this.size,k=this.oldSize;S[0]=t,S[1]=e,(S[0]!==k[0]||S[1]!==k[1])&&(k[0]=S[0],k[1]=S[1]);const{pages:w,maxPageHeight:D,maxPageWidth:M}=this.updatePagination(y,t,e);this.pages=w,this.maxPageSize=[M-i,D-s];const C=this.pagination.currentPage,L=this.pages[C];this.pages.length<1||!L?this.visible=!1:(this.visible=!0,this.updatePositions(C),this.update())}truncate(t,e,i,s,n,a){const r=t.split("");let o=!1;if(t.length>e&&(t=`${t.substring(0,e)}`,o=!0),Math.floor(s+Ir.getTextSize(t,n).width)>i){let e="";const a=this.getCharacterWidths(n);let l=s+a["..."];for(const t of r){if(a[t]||(a[t]=Ir.getTextSize(t,n).width),l+=a[t],l>i)break;e+=t}t=e,o=!0}return o?(t+="...",this.truncatedItems.add(a)):this.truncatedItems.delete(a),t}updatePagination(t,e,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,t.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:a,maxPageHeight:r,maxPageWidth:o,paginationBBox:l,paginationVertical:h}=this.calculatePagination(t,e,i),c=a.findIndex((t=>t.endIndex>=n));this.pagination.currentPage=zs(0,c,a.length-1);const{paddingX:d,paddingY:u}=this.item,p=o-d,g=r-u;let f=0,m=-l.y-this.item.marker.size/2;return h?m+=g+8:(f+=-l.x+p+8,m+=(g-l.height)/2),this.pagination.translationX=f,this.pagination.translationY=m,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:r,maxPageWidth:o,pages:a}}calculatePagination(t,e,i){var s,n,a;const{paddingX:r,paddingY:o}=this.item,l=this.getOrientation(),h=["left","right"].includes(this.position);let c=this.pagination.computeBBox(),d=new Qs(0,0,0,0),u=[],p=0,g=0,f=0;const m=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(f++>10){O.warn("unable to find stable legend layout.");break}c=d;const y=e-(h?0:c.width),v=jd({orientation:l,bboxes:t,maxHeight:i-(h?c.height:0),maxWidth:y,itemPaddingY:o,itemPaddingX:r,forceResult:m});u=null!=(s=null==v?void 0:v.pages)?s:[],p=null!=(n=null==v?void 0:v.maxPageWidth)?n:0,g=null!=(a=null==v?void 0:v.maxPageHeight)?a:0;const x=u.length;if(this.pagination.visible=x>1,this.pagination.totalPages=x,this.pagination.update(),d=this.pagination.computeBBox(),!this.pagination.visible)break}while((y=d).width!==c.width||y.height!==c.height);var y;return{maxPageWidth:p,maxPageHeight:g,pages:u,paginationBBox:c,paginationVertical:h}}updatePositions(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{item:{paddingY:e},itemSelection:i,pages:s}=this;if(s.length<1||!s[t])return;const{columns:n,startIndex:a,endIndex:r}=s[t];let o=0,l=0;const h=n.length,c=n[0].indices.length,d="horizontal"===this.getOrientation(),u=n[0].bboxes[0].height+e,p=[];i.each(((t,e,i)=>{var s,g;if(i<a||i>r)return void(t.visible=!1);const f=i-a;let m=0,y=0;d?(m=f%h,y=Math.floor(f/h)):(m=Math.floor(f/c),y=f%c),t.visible=!0;const v=n[m];v&&(l=u*y,o=null!=(s=p[y])?s:0,p[y]=(null!=(g=p[y])?g:0)+v.columnWidth,t.translationX=Math.floor(o),t.translationY=Math.floor(l))}))}updatePageNumber(t){const{pages:e}=this,{startIndex:i,endIndex:s}=e[t];0===i?this.paginationTrackingIndex=0:t===e.length-1?this.paginationTrackingIndex=s:this.paginationTrackingIndex=Math.floor((i+s)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(t),this.ctx.updateService.update(6)}update(){const{label:{color:t},marker:e,line:i,showSeriesStroke:s}=this.item;this.itemSelection.each(((n,a)=>{var r,o;const l=a.marker;n.markerFill=l.fill,n.markerStroke=l.stroke,n.markerStrokeWidth=null!=(r=e.strokeWidth)?r:Math.min(2,l.strokeWidth),n.markerFillOpacity=l.fillOpacity,n.markerStrokeOpacity=l.strokeOpacity,n.opacity=a.enabled?1:.5,n.color=t;const{line:h}=a;s&&void 0!==h&&(n.lineStroke=h.stroke,n.lineStrokeOpacity=h.strokeOpacity,n.lineStrokeWidth=null!=(o=i.strokeWidth)?o:Math.min(2,h.strokeWidth),n.lineLineDash=h.lineDash)}))}getDatumForPoint(t,e){const i=[],s={dist:1/0,datum:void 0};for(const n of this.group.children){if(!n.visible||!(n instanceof Jd))continue;const a=n.computeBBox();if(a.grow(this.item.paddingX/2,"horizontal"),a.grow(this.item.paddingY/2,"vertical"),a.containsPoint(t,e))return n.datum;const r=t-a.x-this.item.paddingX/2,o=e-a.y-this.item.paddingY/2,l=p(r,2)+p(o,2);r>=0&&o>=0&&l<s.dist&&(s.dist=l,s.datum=n.datum),i.push(a)}if(Qs.merge(i).containsPoint(t,e))return s.datum}computePagedBBox(){const t=this.group.computeBBox();if(this.pages.length<=1)return t;const[e,i]=this.maxPageSize;return t.height=Math.max(i,t.height),t.width=Math.max(e,t.width),t}checkLegendClick(t){const{listeners:{legendItemClick:e},ctx:{chartService:i,highlightManager:s},item:{toggleSeriesVisible:n},preventHidingAll:a}=this,r=this.getDatumForPoint(t.offsetX,t.offsetY);if(!r)return;const{id:o,itemId:l,enabled:h}=r,c=i.series.find((t=>t.id===o));if(!c)return;t.consume();let d=h;n&&(d=!h,a&&!d&&i.series.flatMap((t=>t.getLegendData("category"))).filter((t=>t.enabled)).length<2&&(d=!0),this.ctx.chartEventManager.legendItemClick(c,l,d,r.legendItemName)),d?s.updateHighlight(this.id,{series:c,itemId:l,datum:void 0}):s.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),null==e||e({type:"click",enabled:d,itemId:l,seriesId:c.id})}checkLegendDoubleClick(t){var e;const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},item:{toggleSeriesVisible:n}}=this;if("integrated"===s.mode)return;const a=this.getDatumForPoint(t.offsetX,t.offsetY);if(!a)return;const{id:r,itemId:o,seriesId:l}=a,h=s.series.find((t=>t.id===r));if(h){if(t.consume(),n){const t=s.series.flatMap((t=>t.getLegendData("category"))),i=t.filter((t=>t.enabled)).length,n=t.find((t=>t.itemId===o&&t.seriesId===l));this.ctx.chartEventManager.legendItemDoubleClick(h,o,null!=(e=null==n?void 0:n.enabled)&&e,i,null==n?void 0:n.legendItemName)}this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),null==i||i({type:"dblclick",enabled:!0,itemId:o,seriesId:h.id})}}handleLegendMouseMove(t){var e;const{enabled:i,item:{toggleSeriesVisible:s},listeners:n}=this;if(!i)return;const{offsetX:a,offsetY:r}=t;t.consume();const o=this.getDatumForPoint(a,r);if(void 0===o)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const l=o?this.ctx.chartService.series.find((t=>t.id===(null==o?void 0:o.id))):void 0;o&&this.truncatedItems.has(null!=(e=o.itemId)?e:o.id)?this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:a,offsetY:r,lastPointerEvent:t,showArrow:!1},jo({content:this.getItemLabel(o)})):this.ctx.tooltipManager.removeTooltip(this.id),(s||null!=n.legendItemClick||null!=n.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),null!=o&&o.enabled&&l?this.ctx.highlightManager.updateHighlight(this.id,{series:l,itemId:null==o?void 0:o.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(t){this.ctx.cursorManager.updateCursor(this.id),this.ctx.tooltipManager.removeTooltip(this.id),8===this.ctx.interactionManager.getState()&&this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseEnter(t){const{enabled:e,item:{toggleSeriesVisible:i},listeners:{legendItemClick:s,legendItemDoubleClick:n}}=this,a=this.getDatumForPoint(t.offsetX,t.offsetY);e&&void 0!==a&&(i||null!=s||null!=n)&&this.ctx.cursorManager.updateCursor(this.id,"pointer")}positionLegend(t){const e=t.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[i,s]=this.calculateLegendDimensions(t);this.group.translationX=0,this.group.translationY=0,this.calcLayout(i,s);const n=this.computePagedBBox(),a=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return t.height-n.height;default:return t.width-n.width}};if(this.visible){let i,s;switch(this.position){case"top":case"bottom":i=(t.width-n.width)/2,s=a(),e.shrink(n.height,this.position);break;default:i=a(),s=(t.height-n.height)/2,e.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+t.x+i),this.group.translationY=Math.floor(-n.y+t.y+s)}if(this.visible&&this.enabled&&this.data.length){const t=this.spacing;e.shrink(t,this.position);const i=n.clone();i.x+=this.group.translationX,i.y+=this.group.translationY}return{shrinkRect:e}}calculateLegendDimensions(t){const{width:e,height:i}=t,s=e/i;let n,a;switch(this.position){case"top":case"bottom":const t=s<1?Math.min(.5,1/s*.2):.2;n=this.maxWidth?Math.min(this.maxWidth,e):e,a=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*t);break;default:const r=s>1?Math.min(.5,.25*s):.25;n=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*r),a=this.maxHeight?Math.min(this.maxHeight,i):i}return[n,a]}};lu.className="Legend",x([Yn(Hn)],lu.prototype,"pagination",2),x([Yn(Hn)],lu.prototype,"item",2),x([Yn(Hn)],lu.prototype,"listeners",2),x([Uo((t=>t.updateGroupVisibility())),Yn(qn)],lu.prototype,"enabled",2),x([Yn(wa)],lu.prototype,"position",2),x([Yn(ea,{optional:!0})],lu.prototype,"maxWidth",2),x([Yn(ea,{optional:!0})],lu.prototype,"maxHeight",2),x([Yn(qn,{optional:!0})],lu.prototype,"reverseOrder",2),x([Yn(Ia(["horizontal","vertical"],"an orientation"),{optional:!0})],lu.prototype,"orientation",2),x([Yn(qn,{optional:!0})],lu.prototype,"preventHidingAll",2),x([Yn(ea)],lu.prototype,"spacing",2);var hu={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology"],instanceConstructor:lu,packageType:"community"},cu=class extends Qc{constructor(){super(...arguments),this.zIndex=3,this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(t){this._centerX!==t&&(this._centerX=t,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(t){this._centerY!==t&&(this._centerY=t,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(t){this._width!==t&&(this._width=t,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(t){this._gripLineGap!==t&&(this._gripLineGap=t,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(t){this._gripLineLength!==t&&(this._gripLineLength=t,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(t){this._height!==t&&(this._height=t,this.dirtyPath=!0)}get height(){return this._height}layout(t,e){this.centerX=t,this.centerY=e}static align(t,e,i,s,n,a,r,o){const l=t.strokeWidth/2,h=t.align(i+n*r)+l,c=h+t.align(i+n*r,n*(o-r))-2*l,d=t.align(s+a/2)+l;t.layout(h,d),e.layout(c,d)}computeBBox(){const{centerX:t,centerY:e,width:i,height:s}=this;return new Qs(t-i/2,e-s/2,i,s)}isPointInPath(t,e){const i=this.transformPoint(t,e);return this.computeBBox().containsPoint(i.x,i.y)}updatePath(){var t,e,i;const{centerX:s,centerY:n,path:a,strokeWidth:r,gripLineGap:o,gripLineLength:l}=this,h=null!=(i=null==(e=null==(t=this.layerManager)?void 0:t.canvas)?void 0:e.pixelRatio)?i:1;a.clear();const c=Math.floor(this.width/2*h)/h,d=Math.floor(this.height/2*h)/h;a.moveTo(s-c,n-d),a.lineTo(s+c,n-d),a.lineTo(s+c,n+d),a.lineTo(s-c,n+d),a.closePath();const u=Math.floor((o+r)/2*h)/h,p=Math.floor(l/2*h)/h;a.moveTo(s-u,n-p),a.lineTo(s-u,n+p),a.moveTo(s+u,n-p),a.lineTo(s+u,n+p)}};cu.className="RangeHandle",x([Yn(pa)],cu.prototype,"_fill",2),x([Yn(pa)],cu.prototype,"_stroke",2),x([Yn(ea)],cu.prototype,"_strokeWidth",2),x([Yn(ba)],cu.prototype,"_lineCap",2),x([Yn(ea)],cu.prototype,"_width",2),x([Yn(ea)],cu.prototype,"_gripLineGap",2),x([Yn(ea)],cu.prototype,"_gripLineLength",2),x([Yn(ea)],cu.prototype,"_height",2);var du=class extends Qc{constructor(){super(...arguments),this.zIndex=2,this.x=0,this.y=0,this.width=200,this.height=30,this.min=0,this.max=1}layout(t,e,i,s){this.x=t,this.y=e,this.width=i,this.height=s,this.dirtyPath=!0}update(t,e){this.min=isNaN(t)?this.min:t,this.max=isNaN(e)?this.max:e,this.dirtyPath=!0}computeBBox(){const{x:t,y:e,width:i,height:s}=this;return new Qs(t,e,i,s)}computeVisibleRangeBBox(){const{x:t,y:e,width:i,height:s,min:n,max:a}=this,r=t+i*n;return new Qs(r,e,t+i*a-r,s)}updatePath(){const{path:t,x:e,y:i,width:s,height:n,min:a,max:r,strokeWidth:o}=this,l=o/2;t.clear();const h=this.align(e)+l,c=this.align(i)+l,d=h+this.align(e,s)-2*l,u=c+this.align(i,n)-2*l;t.moveTo(h,c),t.lineTo(d,c),t.lineTo(d,u),t.lineTo(h,u),t.closePath();const p=this.align(e+s*a)+l,g=p+this.align(e+s*a,s*(r-a))-2*l;t.moveTo(p,c),t.lineTo(p,u),t.lineTo(g,u),t.lineTo(g,c),t.closePath()}};du.className="RangeMask";var uu=class extends Sr{constructor(t){super({name:"rangeSelectorGroup",layer:!0,zIndex:10}),this.x=0,this.y=0,this.width=200,this.height=30,this.lOffset=0,this.rOffset=0,this.isContainerNode=!0,this.background=new Sr({name:"navigator-background"}),this.background.zIndex=1,this.appendChild(this.background),this.append(t)}layout(t,e,i,s,n,a){this.x=t,this.y=e,this.width=i,this.height=s,this.lOffset=n,this.rOffset=a,this.background.translationX=t,this.background.translationY=e}updateBackground(t,e){null!=t&&this.background.removeChild(t),null!=e&&this.background.appendChild(e)}computeBBox(){const{x:t,y:e,width:i,height:s,lOffset:n,rOffset:a}=this;return new Qs(t-n,e,i+(n+a),s)}},pu=class extends St{constructor(t){super(),this.ctx=t,this.miniChart=void 0,this.enabled=!1,this.mask=new du,this.minHandle=new cu,this.maxHandle=new cu,this.height=30,this.margin=10,this.x=0,this.y=0,this.width=0,this.rangeSelector=new uu([this.mask,this.minHandle,this.maxHandle]),this._min=0,this._max=1,this.minRange=.001;const e=t.regionManager.addRegion("navigator",this.rangeSelector);this.destroyFns.push(t.scene.attachNode(this.rangeSelector),e.addListener("hover",(t=>this.onHover(t)),13),e.addListener("drag-start",(t=>this.onDragStart(t)),13),e.addListener("drag",(t=>this.onDrag(t)),13),e.addListener("drag-end",(()=>this.onDragEnd()),13),e.addListener("leave",(t=>this.onLeave(t)),13),t.zoomManager.addListener("zoom-change",(t=>this.onZoomChange(t)))),this.updateGroupVisibility()}updateBackground(t,e){var i;null==(i=this.rangeSelector)||i.updateBackground(t,e)}updateGroupVisibility(){const{enabled:t}=this;null==this.rangeSelector||t===this.rangeSelector.visible||(this.rangeSelector.visible=t,t?this.updateZoom():this.ctx.zoomManager.updateZoom("navigator"))}performLayout(t){return S(this,arguments,(function(t){var e=this;let{shrinkRect:i}=t;return function*(){if(e.enabled){const t=e.height+e.margin;i.shrink(t,"bottom"),e.y=i.y+i.height+e.margin}else e.y=0;return{shrinkRect:i}}()}))}performCartesianLayout(t){return S(this,null,(function*(){const{x:e,width:i}=t.seriesRect;if(this.enabled){const{y:t,height:s}=this;this.layoutNodes(e,t,i,s)}this.x=e,this.width=i}))}onHover(t){if(!this.enabled)return;const{mask:e,minHandle:i,maxHandle:s}=this,{offsetX:n,offsetY:a}=t;i.containsPoint(n,a)||s.containsPoint(n,a)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):e.computeVisibleRangeBBox().containsPoint(n,a)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator")}onDragStart(t){if(!this.enabled)return;const{mask:e,minHandle:i,maxHandle:s,x:n,width:a,_min:r}=this,{offsetX:o,offsetY:l}=t;i.zIndex<s.zIndex?s.containsPoint(o,l)?this.dragging="max":i.containsPoint(o,l)&&(this.dragging="min"):i.containsPoint(o,l)?this.dragging="min":s.containsPoint(o,l)&&(this.dragging="max"),null==this.dragging&&e.computeVisibleRangeBBox().containsPoint(o,l)&&(this.dragging="pan",this.panStart=(o-n)/a-r),null!=this.dragging&&this.ctx.zoomManager.fireZoomPanStartEvent()}onDrag(t){if(!this.enabled||null==this.dragging)return;const{dragging:e,minRange:i,panStart:s,x:n,width:a}=this;let{_min:r,_max:o}=this;const{offsetX:l}=t,h=(l-n)/a;if("min"===e)r=zs(0,h,o-i);else if("max"===e)o=zs(r+i,h,1);else if("pan"===e&&null!=s){const t=o-r;r=zs(0,h-s,1-t),o=r+t}this._min=r,this._max=o,this.updateZoom()}onDragEnd(){this.dragging=void 0}onLeave(t){this.ctx.cursorManager.updateCursor("navigator")}onZoomChange(t){const{x:e}=t;e&&(this._min=e.min,this._max=e.max,this.updateNodes(e.min,e.max))}layoutNodes(t,e,i,s){const{rangeSelector:n,mask:a,minHandle:r,maxHandle:o,_min:l,_max:h}=this;n.layout(t,e,i,s,r.width/2,o.width/2),a.layout(t,e,i,s),cu.align(r,o,t,e,i,s,l,h),l+(h-l)/2<.5?(r.zIndex=3,o.zIndex=4):(r.zIndex=4,o.zIndex=3)}updateNodes(t,e){this.mask.update(t,e)}updateZoom(){if(!this.enabled)return;const{_min:t,_max:e}=this,i=this.ctx.zoomManager.getZoom();if(null==t||null==e)return;return this.ctx.zoomManager.updateZoom("navigator",{x:{min:t,max:e},y:null==i?void 0:i.y},!1,(t=>{null==this.min&&null==this.max||O.warnOnce(`Could not apply [navigator.min] or [navigator.max] as [${t}] has modified the initial zoom state.`)}))}};x([Yn(Hn,{optional:!0})],pu.prototype,"miniChart",2),x([Yn(qn),Uo((t=>t.updateGroupVisibility()))],pu.prototype,"enabled",2),x([Yn(ea)],pu.prototype,"height",2),x([Yn(ea)],pu.prototype,"margin",2),x([$o({newValue(t){this._min=t,this.updateZoom()}}),Yn(Un(ia,la("max")),{optional:!0})],pu.prototype,"min",2),x([$o({newValue(t){this._max=t,this.updateZoom()}}),Yn(Un(ia,ha("min")),{optional:!0})],pu.prototype,"max",2);var gu={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:pu,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:9,height:16,gripLineGap:1,gripLineLength:8}}}},fu=t=>{let{takeColors:e}=t;const{fills:[i],strokes:[s]}=e(1);return{fill:i,stroke:s}},mu=t=>{const{fill:e,stroke:i}=fu(t);return{marker:{fill:e,stroke:i}}};function yu(t,e,i,s,n){const{addPhaseFn:a,updatePhaseFn:r,removePhaseFn:o}=n,l=(s,n,a)=>{i.animate({id:`${t}_${e}_${n.id}_${s}`,groupId:t,from:0,to:1,ease:vn,collapsable:!1,onUpdate(t,e){e&&"removed"!==s||(n.path.clear({trackChanges:!0}),a(t,n),n.checkPathDirty())},onStop(){"added"===s&&(n.path.clear({trackChanges:!0}),a(1,n),n.checkPathDirty())},phase:An[s]})};for(const h of s)i.isSkipped()||(l("removed",h,o),l("updated",h,r)),l("added",h,a)}var vu=null;function xu(t){if(null!=t)return""===t?"":(vu??(vu=ks("div")),vu.textContent=String(t),vu.innerHTML)}function bu(t,e,i,s){let{id:n}=t;Nn(n,e,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function Su(t,e,i,s){let{id:n}=t;Nn(n,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function ku(t){return{opacity:1}}var wu=class extends me{constructor(){super(...arguments),this._dirty=3}markDirty(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._dirty<e&&(this._dirty=e)}markClean(t){this._dirty=0}isDirty(){return this._dirty>0}},Du=class extends wu{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};x([Yn(qn),sn({redraw:3})],Du.prototype,"enabled",2),x([Yn(pa),sn({redraw:3})],Du.prototype,"color",2),x([Yn(Qn),sn({redraw:3})],Du.prototype,"xOffset",2),x([Yn(Qn),sn({redraw:3})],Du.prototype,"yOffset",2),x([Yn(ea),sn({redraw:3})],Du.prototype,"blur",2);var Mu=_a((t=>md(t)||"function"==typeof td&&Object.create(t.prototype)instanceof td),"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Cu=class extends wu{constructor(){super(...arguments),this.enabled=!0,this.shape=ed,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:t,fill:e,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:a}=this;return{size:t,fill:e,fillOpacity:i,stroke:s,strokeWidth:n,strokeOpacity:a}}getDiameter(){return this.size+this.strokeWidth}};x([Yn(qn),sn({redraw:3})],Cu.prototype,"enabled",2),x([Yn(Mu),sn({redraw:3})],Cu.prototype,"shape",2),x([Yn(ea),sn({redraw:3})],Cu.prototype,"size",2),x([Yn(pa,{optional:!0}),sn({redraw:3})],Cu.prototype,"fill",2),x([Yn(ia),sn({redraw:3})],Cu.prototype,"fillOpacity",2),x([Yn(pa,{optional:!0}),sn({redraw:3})],Cu.prototype,"stroke",2),x([Yn(ea),sn({redraw:3})],Cu.prototype,"strokeWidth",2),x([Yn(ia),sn({redraw:3})],Cu.prototype,"strokeOpacity",2),x([Yn(Zn,{optional:!0}),sn({redraw:3})],Cu.prototype,"formatter",2);var Lu=class extends me{constructor(){super(...arguments),this.enabled=!1}};x([Yn(qn)],Lu.prototype,"enabled",2);var Ru=class extends me{constructor(){super(...arguments),this.enabled=!0,this.interaction=new Lu,this.position=new qo}toTooltipHtml(t,e){return this.renderer?jo(this.renderer(e),t):jo(t)}};x([Yn(qn)],Ru.prototype,"enabled",2),x([Yn(qn,{optional:!0})],Ru.prototype,"showArrow",2),x([Yn(Zn,{optional:!0})],Ru.prototype,"renderer",2),x([Yn(Hn)],Ru.prototype,"interaction",2),x([Yn(Hn)],Ru.prototype,"position",2);var Tu=class extends Ld{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new Du,this.marker=new Cu,this.label=new _r,this.tooltip=new Ru,this.connectMissingData=!1}};function Au(t,e,i,s){let{id:n}=t;Nn(n,"markers",e,i,{opacity:0},{opacity:1},{phase:s?An[s]:"trailing"}),i.forEach((t=>t.cleanup()))}function Eu(t,e,i){let{id:s}=t;Nn(s,"markers",e,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach((t=>t.cleanup()))}function Nu(t,e,i){let{id:s,nodeDataDependencies:n}=t;const a=n.seriesRectWidth;En(s,"markers",e,i,{fromFn:(t,e)=>{var i,s;const n=null!=(s=null==(i=e.midPoint)?void 0:i.x)?s:a;let r=zs(0,wn(n/a),1);return isNaN(r)&&(r=0),{scalingX:0,scalingY:0,delay:r,duration:Dn,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function Ou(t){return{opacity:1,scalingX:1,scalingY:1}}function Iu(t,e){var i,s,n,a;return{translationX:null!=(s=null==(i=e.point)?void 0:i.x)?s:NaN,translationY:null!=(a=null==(n=e.point)?void 0:n.y)?a:NaN}}function Pu(t,e){const i=(e,i)=>{const s=t[i][e];return Array.isArray(s)?s[0]:s},s=e=>{const{xValue:s}=e;return t.moved[s]?{point:i(s,"moved"),status:"updated"}:t.removed[s]?{point:i(s,"removed"),status:"removed"}:t.added[s]?{point:i(s,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(t,i)=>{var n,a,r,o,l,h;const{status:c,point:d}=s(i);if("unknown"===c)return{opacity:0};const u={translationX:null!=(a=null==(n=null==d?void 0:d.from)?void 0:n.x)?a:t.translationX,translationY:null!=(o=null==(r=null==d?void 0:d.from)?void 0:r.y)?o:t.translationY,opacity:t.opacity,phase:An[c]};return"added"===e?m(f({},u),{opacity:0,translationX:null==(l=null==d?void 0:d.to)?void 0:l.x,translationY:null==(h=null==d?void 0:d.to)?void 0:h.y,phase:An.added}):("added"===c&&(u.opacity=0),u)},toFn:(t,i)=>{var n,a;const{status:r,point:o}=s(i);if("unknown"===r)return{opacity:0};const l={translationX:i.point.x,translationY:i.point.y,opacity:1,phase:An[r]};return"removed"===r||"removed"===e?m(f({},l),{translationX:null==(n=null==o?void 0:o.to)?void 0:n.x,translationY:null==(a=null==o?void 0:o.to)?void 0:a.y,opacity:0,phase:An.removed}):l}}}function Bu(t){return t.reduce(((t,e)=>{let{min:i,max:s}=t;return(null==i||i.point.x>e.point.x)&&(i=e),(null==s||s.point.x<e.point.x)&&(s=e),{min:i,max:s}}),{})}function _u(t,e,i){const s=(e.y-t.y)/(e.x-t.x);return{x:i,y:(i-t.x)*s+t.y}}function Fu(t,e,i,s){let n=-1,a=0;const r=[];for(;a<t.length;)t[a].change!==e?t[a].change!==i?(r.length>0&&(s(r,n,a),r.length=0),n=a,a++):a++:(r.push(t[a]),a++);r.length>0&&s(r,n,a)}function Gu(t,e){Fu(t,"out","in",((i,s,n)=>{var a,r;-1===s&&t[n]?i.forEach((e=>e.to=t[n].from)):n===t.length&&t[s]?i.forEach((e=>e.to=t[s].from)):"intersect"===e&&null!=(a=t[s])&&a.from&&null!=(r=t[n])&&r.from?i.forEach((e=>e.to=_u(t[s].from,t[n].from,e.from.x))):i.forEach((t=>t.to=t.from))})),Fu(t,"in","out",((i,s,n)=>{var a,r;-1===s&&t[n]?i.forEach((e=>e.from=t[n].to)):n===t.length&&t[s]?i.forEach((e=>e.from=t[s].to)):"intersect"===e&&null!=(a=t[s])&&a.to&&null!=(r=t[n])&&r.to?i.forEach((e=>e.from=_u(t[s].to,t[n].to,e.to.x))):i.forEach((t=>t.from=t.to))}))}function zu(t,e,i){const s=isNaN(t.x)?e.x:t.x,n=isNaN(t.y)?e.y:t.y,a=e.x-t.x,r=e.y-t.y;return{x:s+(isNaN(a)?0:a*i),y:n+(isNaN(r)?0:r*i)}}function Wu(t,e,i){const{path:s}=i;let n;for(const a of t){const{from:t,to:i}=a,r=e[a.change];if(null==r||null==t||null==i)continue;const{x:o,y:l}=zu(t,i,r);if(!1===a.moveTo)s.lineTo(o,l);else if(!0!==a.moveTo&&n){if(n){const t="in"===a.moveTo?r:1-r,{x:e,y:i}=zu(n,{x:o,y:l},t);s.lineTo(e,i),s.moveTo(o,l)}}else s.moveTo(o,l);n={x:o,y:l}}}function Vu(t,e,i){let{id:s,visible:n,nodeDataDependencies:a}=t;const{seriesRectWidth:r,seriesRectHeight:o}=a;Nn(s,"path_properties",e,i,{clipX:0},{clipX:r},{phase:"initial",start:{clipMode:"normal",clipY:o,visible:n},finish:{clipMode:void 0,visible:n}})}function Ku(t,e,i,s){let{id:n}=t;Nn(n,e,i,s,{opacity:0},{opacity:1},{phase:arguments.length>4&&void 0!==arguments[4]?arguments[4]:"add"})}function Yu(t,e,i,s){let{id:n}=t;Nn(n,e,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function $u(t){return e=>({opacity:t.getOpacity(),clipScalingX:1,clipMode:void 0})}function Uu(t,e){let{nodeDataDependencies:i}=t;const s=t=>isFinite(t)?t:0;e.clipX=s(i.seriesRectWidth),e.clipY=s(i.seriesRectHeight)}function Xu(t){return"continuous"===t.type||"log"===t.type}function Hu(t){return"category"===t.type}function ju(t,e){return t.domain.length===e.domain.length&&t.range.length===e.range.length&&t.domain.every(((t,i)=>t===e.domain[i]))&&t.range.every(((t,i)=>t===e.range[i]))}function qu(t,e){return void 0===t||void 0===e?void 0!==t||void 0!==e:Xu(t)&&Xu(e)?t.type===e.type&&ju(t,e):!(!Hu(t)||!Hu(e))&&ju(t,e)}function Zu(t,e){if(!e)return NaN;if(t instanceof Date&&(t=t.getTime()),"continuous"===e.type&&"number"==typeof t)return(t-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if("log"===e.type&&"number"==typeof t)return e.convert(t);const i=e.domain.findIndex((e=>e===t));return i>=0?e.range[i]:NaN}function Ju(t,e){const i=Number(t),s=Number(e);return isNaN(i)||isNaN(s)?t===e:Math.abs(s-i)<.25}function Qu(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?!!t:t?"in":"out"}function tp(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s,n,a,r;const{backfillSplitMode:o="intersect"}=i,l=e=>{var i,s;return{x:Zu(null!=(i=e.xValue)?i:NaN,t.scales.x),y:Zu(null!=(s=e.yValue)?s:NaN,t.scales.y)}},h=t=>{var i,s;return{x:Zu(null!=(i=t.xValue)?i:NaN,e.scales.x),y:Zu(null!=(s=t.yValue)?s:NaN,e.scales.y)}},c=[],d={added:{},moved:{},removed:{}},u=function(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"move";t&&(isNaN(t.point.x)||isNaN(t.point.y))&&(t=e);const n={from:null==t?void 0:t.point,to:null==e?void 0:e.point,moveTo:Qu(null==t?void 0:t.point.moveTo,null==e?void 0:e.point.moveTo),change:s};"move"===s?(d.moved[i]=n,y++,v++):"in"===s?(d.added[i]=n,v++):"out"===s&&(d.removed[i]=n,y++),c.push(n)},{min:p,max:g}=Bu(e.nodeData),{min:f,max:m}=Bu(t.nodeData);let y=0,v=0;for(;y<e.nodeData.length||v<t.nodeData.length;){const i=e.nodeData[y],o=t.nodeData[v],c=i?l(i):void 0,d=o?h(o):void 0,x=void 0;if(c&&Ju(c.x,null==o?void 0:o.point.x))u(i,o,o.xValue,"move");else if(c&&c.x<(null!=(s=null==f?void 0:f.point.x)?s:-1/0))u(i,x,i.xValue,"out");else if(c&&c.x>(null!=(n=null==m?void 0:m.point.x)?n:1/0))u(i,x,i.xValue,"out");else if(d&&d.x<(null!=(a=null==p?void 0:p.point.x)?a:-1/0))u(x,o,o.xValue,"in");else if(d&&d.x>(null!=(r=null==g?void 0:g.point.x)?r:1/0))u(x,o,o.xValue,"in");else if(c&&c.x<(null==o?void 0:o.point.x))u(i,x,i.xValue,"out");else if(d&&d.x<(null==i?void 0:i.point.x))u(x,o,o.xValue,"in");else if(i)u(i,x,i.xValue,"out");else{if(!o)throw new Error("Unable to process points");u(x,o,o.xValue,"in")}}return Gu(c,o),{result:c,resultMap:d}}function ep(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var n,a,r;const{backfillSplitMode:o="intersect",multiDatum:l=!1}=s,h=[],c={added:{},moved:{},removed:{}},d={added:{},moved:{},removed:{}},u={in:"added",move:"moved",out:"removed"};let p,g;const m=(t,e)=>{var i;const s=u[e.change];l?(null!=(i=d[s])[t]||(i[t]=[]),d[s][t].push(e)):c[s][t]=e,p=e,g=$r(t)};let y=0,v=0,x=!1;for(;y<e.nodeData.length||v<t.nodeData.length;){const s=e.nodeData[y],o=t.nodeData[v],c=$r(null==s?void 0:s.xValue),d=$r(null==o?void 0:o.xValue);let u;if(c===d)u={change:"move",moveTo:Qu(null!=(n=s.point.moveTo)&&n,o.point.moveTo),from:s.point,to:o.point},m(null==s?void 0:s.xValue,u),y++,v++;else if(null!=i&&i.removed.has(String(c)))u={change:"out",moveTo:null!=(a=s.point.moveTo)&&a,from:s.point},m(null==s?void 0:s.xValue,u),y++;else if(null!=i&&i.added.has(String(d)))u={change:"in",moveTo:null!=(r=o.point.moveTo)&&r,to:o.point},m(null==o?void 0:o.xValue,u),v++;else if(l&&p&&g===c)u=f({},p),m(null==s?void 0:s.xValue,u),y++;else{if(!l||!p||g!==d){x=!0;break}u=f({},p),m(null==o?void 0:o.xValue,u),v++}h.push(u)}let b=-1/0;return x||(x=h.some((t=>{const{change:e,to:{x:i=-1/0}={}}=t;if("out"===e)return;const s=i<b;return b=i,s}))),x?{result:void 0,resultMap:void 0}:(Gu(h,o),{result:h,resultMap:l?d:c})}function ip(t,e,i){var s,n,a,r;let o="updated";const l=t=>t.visible;if(!l(e)&&l(t))o="added";else if(l(e)&&!l(t))o="removed";else for(let h=0;h<i.length&&"move"===i[h].change&&(null==(s=i[h].from)?void 0:s.x)===(null==(n=i[h].to)?void 0:n.x)&&(null==(a=i[h].from)?void 0:a.y)===(null==(r=i[h].to)?void 0:r.y);h++)if(h===i.length-1)return"no-op";return o}function sp(t,e,i,s,n){const a=ip(t,e,i),r=function(t,e){const i="none"===e?"updated":t,s={fromFn:e=>{let s;return s="removed"===t?{finish:{visible:!1}}:"added"===t?{start:{visible:!0}}:{},f({phase:An[i]},s)},toFn:t=>({phase:An[i]})};return"fade"===e?{fromFn:e=>{const i="added"===t?0:e.opacity;return f({opacity:i},s.fromFn(e))},toFn:e=>f({opacity:"removed"===t?0:1},s.toFn(e))}:s}(a,s);return{status:a,path:{addPhaseFn:(t,e)=>{n(i,{move:1,in:t},e)},updatePhaseFn:(t,e)=>{n(i,{move:t},e)},removePhaseFn:(t,e)=>{n(i,{move:0,out:t},e)}},pathProperties:r}}function np(t,e,i){var s,n,a;const r="category"===(null==(s=t.scales.x)?void 0:s.type);if(r!==("category"===(null==(n=e.scales.x)?void 0:n.type)))return;const{result:o,resultMap:l}=r?ep(t,e,i):tp(t,e);let h="updated";if(e.visible&&!t.visible?h="removed":!e.visible&&t.visible&&(h="added"),void 0===o||void 0===l)return;const c=null==(a=null==i?void 0:i.changed)||a||function(t,e){return!qu(t.scales.x,e.scales.x)||!qu(t.scales.y,e.scales.y)}(t,e)||"updated"!==h,d=sp(t,e,o,"fade",Wu),u=Pu(l,h);return m(f({},d),{marker:u,hasMotion:c})}x([Yn(Jn)],Tu.prototype,"xKey",2),x([Yn(Jn,{optional:!0})],Tu.prototype,"xName",2),x([Yn(Jn)],Tu.prototype,"yKey",2),x([Yn(Jn,{optional:!0})],Tu.prototype,"yName",2),x([Yn(ea,{optional:!0})],Tu.prototype,"normalizedTo",2),x([Yn(pa)],Tu.prototype,"fill",2),x([Yn(ia)],Tu.prototype,"fillOpacity",2),x([Yn(pa)],Tu.prototype,"stroke",2),x([Yn(ea)],Tu.prototype,"strokeWidth",2),x([Yn(ia)],Tu.prototype,"strokeOpacity",2),x([Yn(ka)],Tu.prototype,"lineDash",2),x([Yn(ea)],Tu.prototype,"lineDashOffset",2),x([Yn(Hn)],Tu.prototype,"shadow",2),x([Yn(Hn)],Tu.prototype,"marker",2),x([Yn(Hn)],Tu.prototype,"label",2),x([Yn(Hn)],Tu.prototype,"tooltip",2),x([Yn(qn)],Tu.prototype,"connectMissingData",2);var ap=(t=>(t[t.Fill=0]="Fill",t[t.Stroke=1]="Stroke",t[t.Marker=2]="Marker",t[t.Label=3]="Label",t))(ap||{});function rp(t){const{points:e,phantomPoints:i}=t.fillData;return{top:e,bottom:i}}function op(t,e,i){return{scales:e.scales,nodeData:i[t],visible:e.visible}}function lp(t,e,i){var s,n;const a="category"===(null==(s=t.scales.x)?void 0:s.type),r="category"===(null==(n=e.scales.x)?void 0:n.type);if(a!==r)return;let o="updated";e.visible&&!t.visible?o="removed":!e.visible&&t.visible&&(o="added");const{resultMap:l}=a?ep(t,e,i,{backfillSplitMode:"static",multiDatum:!0}):tp(t,e,{backfillSplitMode:"static"}),{top:h,bottom:c}=a?function(t,e,i){const s=rp(e),n=rp(t),a={multiDatum:!0};return{top:ep(op("top",t,n),op("top",e,s),i,a),bottom:ep(op("bottom",t,n),op("bottom",e,s),i,a)}}(t,e,i):function(t,e){const i=rp(e),s=rp(t);return{top:tp(op("top",t,s),op("top",e,i)),bottom:tp(op("bottom",t,s),op("bottom",e,i))}}(t,e);if(void 0===l||void 0===h.result||void 0===c.result)return;const d=[...h.result,...c.result.reverse()],u=e.stackVisible&&t.stackVisible?"none":"fade",p=sp(t,e,d,u,Wu),g=Pu(l,o);return{status:p.status,fill:p,marker:g}}var hp=class t extends Rd{constructor(t){super({moduleCtx:t,directionKeys:Dd,directionNames:Md,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:$u({getOpacity:()=>this.getOpacity()}),label:ku,marker:(t,e)=>f(f({},{opacity:1,scalingX:1,scalingY:1}),Iu(0,e))}}),this.properties=new Tu}processData(t){return S(this,null,(function*(){var e;if(null==this.data||!this.properties.isValid())return;const{data:i,visible:s,seriesGrouping:{groupIndex:n=this.id,stackCount:a=1}={}}=this,{xKey:r,yKey:o,connectMissingData:l,normalizedTo:h}=this.properties,c=!this.ctx.animationManager.isSkipped(),{isContinuousX:d,isContinuousY:u}=this.isContinuous(),p=null==(e=this.axes.x)?void 0:e.scale,g=$a.is(p)?"range":"category",y=[`area-stack-${n}-yValues`,`area-stack-${n}-yValues-trailing`,`area-stack-${n}-yValues-prev`,`area-stack-${n}-yValues-trailing-prev`,`area-stack-${n}-yValues-marker`],v=[];Et(h)&&(v.push(pc(this,[y[0],y[1],y[4]],h,"range")),v.push(pc(this,[y[2],y[3]],h,"range"))),!d&&c&&this.processedData&&v.push(bc(this.processedData)),c&&v.push(mc(this));const x={invalidValue:null};l&&a>1&&(x.invalidValue=0),s||(x.forceValue=0),yield this.requestDataModel(t,i,{props:[Mc(this,r,d,{id:"xValue",valueType:g}),Cc(this,o,u,f({id:"yValueRaw"},x)),...Nc(this,o,u,"window","current",m(f({id:"yValueEnd"},x),{groupId:y[0]})),...Nc(this,o,u,"window-trailing","current",m(f({id:"yValueStart"},x),{groupId:y[1]})),...Nc(this,o,u,"window","last",m(f({id:"yValuePreviousEnd"},x),{groupId:y[2]})),...Nc(this,o,u,"window-trailing","last",m(f({id:"yValuePreviousStart"},x),{groupId:y[3]})),...Nc(this,o,u,"normal","current",m(f({id:"yValueCumulative"},x),{groupId:y[4]})),...v],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{processedData:e,dataModel:i,axes:s}=this;if(!e||!i||0===e.data.length)return[];const n=s.x,a=s.y,r=i.resolveProcessedDataDefById(this,"xValue"),o=i.getDomain(this,"xValue","key",e),l=i.getDomain(this,"yValueEnd","value",e);if("x"===t)return"key"===(null==r?void 0:r.def.type)&&"category"===r.def.valueType?o:rh(hs(o),n);if(a instanceof Gd||a instanceof Wd)return rh(l,a);return rh([l[0]>0?0:l[0],l[1]<0?0:l[1]],a)}createNodeData(){return S(this,null,(function*(){var e;const{axes:i,data:s,processedData:{data:n}={},dataModel:a}=this,r=i.x,o=i.y;if(!r||!o||!s||!a||!this.properties.isValid())return[];const{yKey:l,xKey:h,marker:c,label:d,fill:u,stroke:p,connectMissingData:g}=this.properties,{scale:v}=r,{scale:x}=o,{isContinuousY:S}=this.isContinuous(),k=(null!=(e=v.bandwidth)?e:0)/2,w=a.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),D=t=>{const e=t,{point:i}=e,s=y(e,["point"]);return m(f({},s),{point:m(f({},i),{moveTo:!0})})},M=(t,e,i)=>{const s=v.convert(t)+k,n=x.convert(e);return[{point:{x:s,y:x.convert(i)},yValue:i,xValue:t},{point:{x:s,y:n},yValue:e,xValue:t}]},C=(t,e,i)=>{let s;return(Et(this.properties.normalizedTo)?S&&Kr(i):!isNaN(i))&&(s=e),{x:v.convert(t)+k,y:x.convert(s),size:c.size}},L=l,R=[],T=[],{visibleSameStackCount:A}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),E={itemId:L,fillData:{itemId:L,points:[],phantomPoints:[]},strokeData:{itemId:L,points:[]},labelData:R,nodeData:T,scales:b(t.prototype,this,"calculateScaling").call(this),visible:this.visible,stackVisible:A>0},N=E.fillData.points,O=E.fillData.phantomPoints,I=E.strokeData.points;let P,B=-1,_=-1/0;return null==n||n.forEach((t=>{const{keys:e,keys:[i],datum:s,values:n}=t;n.forEach(((t,n)=>{var r,o,f;B++;const m=s[n],y=a.resolveProcessedDataDefsValues(w,{keys:e,values:t}),{yValueRaw:v,yValueCumulative:x}=y;let{yValueStart:b,yValueEnd:S,yValuePreviousStart:k,yValuePreviousEnd:A}=y;const E=null!=v,F=C(i,+x,v);if(E&&c&&T.push({index:B,series:this,itemId:L,datum:m,midPoint:{x:F.x,y:F.y},cumulativeValue:S,yValue:v,xValue:i,yKey:l,xKey:h,point:F,fill:null!=(r=c.fill)?r:u,stroke:null!=(o=c.stroke)?o:p,strokeWidth:null!=(f=c.strokeWidth)?f:this.getStrokeWidth(this.properties.strokeWidth)}),E&&d){const t=this.getLabelText(d,{value:v,datum:m,xKey:h,yKey:l,xName:this.properties.xName,yName:this.properties.yName},(t=>Kt(t)?t.toFixed(2):String(t)));R.push({index:B,series:this,itemId:l,datum:m,x:F.x,y:F.y,label:t?{text:t,fontStyle:d.fontStyle,fontWeight:d.fontWeight,fontSize:d.fontSize,fontFamily:d.fontFamily,textAlign:"center",textBaseline:"bottom",fill:d.color}:void 0})}const G=null!=P&&null!=i,z=null!=_&&E;z||(b=b??0,S=b??0,k=k??0,A=k??0);const[W,V]=M(P,k,A),[K,Y]=M(i,b,S);G&&(!g||z)&&(N.push(W,K),O.push(V,Y)),z&&B>0&&I.push(D(W),K),P=i,_=v}))})),I.length>0&&(I[0]=D(I[0])),[E]}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker;return new(yd(t))}updatePathNodes(t){return S(this,null,(function*(){const{opacity:e,visible:i,animationEnabled:s}=t,[n,a]=t.paths,r=this.getStrokeWidth(this.properties.strokeWidth);a.setProperties({tag:1,fill:void 0,lineJoin:a.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:r,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:e,visible:i}),n.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:e,visible:i||s,strokeWidth:r}),Uu(this,a),Uu(this,n)}))}updatePaths(t){return S(this,null,(function*(){this.updateAreaPaths([t.paths],[t.contextData])}))}updateAreaPaths(t,e){this.updateFillPath(t,e),this.updateStrokePath(t,e)}updateFillPath(t,e){e.forEach(((e,i)=>{let{fillData:s}=e;const[n]=t[i],{path:a}=n;let r;a.clear({trackChanges:!0});for(const{point:t}of E(s.points,function*(t){for(let e=t.length-1;e>=0;e--)yield t[e]}(s.phantomPoints)))t.moveTo?a.moveTo(t.x,t.y):(null==r?void 0:r.y)!==t.y&&(r&&a.lineTo(r.x,r.y),a.lineTo(t.x,t.y)),r=t;r&&a.lineTo(r.x,r.y),a.closePath(),n.checkPathDirty()}))}updateStrokePath(t,e){e.forEach(((e,i)=>{let{strokeData:s}=e;const[,n]=t[i],{path:a}=n;a.clear({trackChanges:!0});for(const{point:t}of s.points)t.moveTo?a.moveTo(t.x,t.y):a.lineTo(t.x,t.y);n.checkPathDirty()}))}updateMarkerSelection(t){return S(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}))}updateMarkerNodes(t){return S(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,marker:a,fill:r,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:c,highlightStyle:d}=this.properties,u=jt(i&&d.item,a.getStyle(),{fill:r,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:c});e.each(((t,e)=>{this.updateMarkerStyle(t,a,{datum:e,highlighted:i,xKey:s,yKey:n},u)})),i||this.properties.marker.markClean()}))}updateLabelSelection(t){return S(this,null,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.tag=3}))}))}updateLabelNodes(t){return S(this,null,(function*(){const{labelSelection:e}=t,{enabled:i,fontStyle:s,fontWeight:n,fontSize:a,fontFamily:r,color:o}=this.properties.label;e.each(((t,e)=>{const{x:l,y:h,label:c}=e;c&&i&&this.visible?(t.fontStyle=s,t.fontWeight=n,t.fontSize=a,t.fontFamily=r,t.textAlign=c.textAlign,t.textBaseline=c.textBaseline,t.text=c.text,t.x=l,t.y=h-10,t.fill=o,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){const{id:e,axes:i,dataModel:s}=this,{xKey:n,xName:a,yName:r,tooltip:o,marker:l}=this.properties,{yKey:h,xValue:c,yValue:d,datum:u}=t,p=i.x,g=i.y;if(!this.properties.isValid()||!(p&&g&&Kt(d))||!s)return"";const f=p.formatDatum(c),m=g.formatDatum(d),y=xu(r),v=xu(f+": "+m),x=jt({fill:this.properties.fill},l.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:b}=this.getMarkerStyle(l,{datum:t,xKey:n,yKey:h,highlighted:!1},x);return o.toTooltipHtml({title:y,content:v,backgroundColor:b},{datum:u,xKey:n,xName:a,yKey:h,yName:r,color:b,title:y,seriesId:e})}getLegendData(t){var e,i,s,n;if(null==(e=this.data)||!e.length||!this.properties.isValid()||"category"!==t)return[];const{yKey:a,yName:r,fill:o,stroke:l,fillOpacity:h,strokeOpacity:c,strokeWidth:d,lineDash:u,marker:p,visible:g}=this.properties,f=!p.enabled||void 0===p.fill;return[{legendType:t,id:this.id,itemId:a,seriesId:this.id,enabled:g,label:{text:r??a},marker:{shape:p.shape,fill:f?o:p.fill,fillOpacity:f?h:p.fillOpacity,stroke:null!=(i=p.stroke)?i:l,strokeOpacity:null!=(s=p.strokeOpacity)?s:c,strokeWidth:null!=(n=p.strokeWidth)?n:0,enabled:p.enabled||d<=0},line:{stroke:l,strokeOpacity:c,strokeWidth:d,lineDash:u}}]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,contextData:s,paths:n}=t,{animationManager:a}=this.ctx;this.updateAreaPaths(n,s),Vu(this,a,n.flat()),po(e,Iu),Nu(this,a,e),bu(this,"labels",a,i)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateAreaPaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:s}=this.ctx,{markerSelections:n,labelSelections:a,contextData:r,paths:o,previousContextData:l}=t,[[h,c]=[]]=o;if(null==h&&null==c)return;super.resetAllAnimation(t);const d=()=>{this.updateAreaPaths(o,r),this.updateStrokePath(o,r)};if(0===r.length||0===(null==l?void 0:l.length))return d(),Au(this,s,n,"added"),Ku(this,"fill_path_properties",s,[h]),Ku(this,"stroke",s,[c],"trailing"),void bu(this,"labels",s,a);const[u]=r,[p]=l??[],g=lp(u,p,null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff);if(void 0===g)return s.skipCurrentBatch(),void d();"no-op"!==g.status&&(Au(this,s,n),En(this.id,"fill_path_properties",s,[h],g.fill.pathProperties),yu(this.id,"fill_path_update",s,[h],g.fill.path),this.updateStrokePath(o,r),Ku(this,"stroke",s,[c],"trailing"),bu(this,"labels",s,a))}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Sr}};hp.className="AreaSeries",hp.type="area";var cp={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:hp,stackable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{__extends__:Xe,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:ai,xOffset:3,yOffset:3,blur:5},marker:{__extends__:He,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:qe,color:Ze,formatter:void 0}}},paletteFactory:t=>{const{marker:e}=mu(t);return{fill:e.fill,stroke:e.stroke,marker:e}}},dp=class extends Ld{constructor(){super(...arguments),this.direction="vertical"}};x([Yn(Aa)],dp.prototype,"direction",2);var up=class extends Rd{constructor(){super(...arguments),this.groupScale=new Kn,this.smallestDataInterval=void 0}getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const t=this.getBarDirection();return this.axes[t]}getCategoryAxis(){const t=this.getCategoryDirection();return this.axes[t]}updateGroupScale(t){const{groupScale:e,smallestDataInterval:i,ctx:{seriesStateManager:s}}=this,n=t.scale,a=$a.is(n)?n.calcBandwidth(null==i?void 0:i.x):n.bandwidth,r=[],{index:o,visibleGroupCount:l}=s.getVisiblePeerGroupIndex(this);for(let h=0;h<l;h++)r.push(String(h));return e.domain=r,e.range=[0,a??0],t instanceof Sl?e.paddingInner=t.groupPaddingInner:e.padding=t instanceof Ol?.1:0,e.round=0!==e.padding,{barWidth:e.bandwidth>=1?e.bandwidth:e.rawBandwidth,groupIndex:o}}resolveKeyDirection(t){return"x"===this.getBarDirection()?"x"===t?"y":"x":t}},pp=class extends _r{constructor(){super(...arguments),this.placement="inside"}};x([Yn(Ea)],pp.prototype,"placement",2);var gp=class extends dp{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new Du,this.label=new pp,this.tooltip=new Ru}};function fp(t){let{rect:e,config:i}=t;const{crisp:s=!0,fill:n,stroke:a,strokeWidth:r,fillOpacity:o,strokeOpacity:l,lineDash:h,lineDashOffset:c,fillShadow:d,cornerRadius:u=0,topLeftCornerRadius:p=!0,topRightCornerRadius:g=!0,bottomRightCornerRadius:f=!0,bottomLeftCornerRadius:m=!0,visible:y=!0}=i;e.crisp=s,e.fill=n,e.stroke=a,e.strokeWidth=r,e.fillOpacity=o,e.strokeOpacity=l,e.lineDash=h,e.lineDashOffset=c,e.fillShadow=d,e.topLeftCornerRadius=p?u:0,e.topRightCornerRadius=g?u:0,e.bottomRightCornerRadius=f?u:0,e.bottomLeftCornerRadius=m?u:0,e.visible=y}function mp(t){var e,i,s,n,a,r,o=t,{datum:l,isHighlighted:h,style:c,highlightStyle:d,formatter:u,seriesId:p,ctx:{callbackCache:g}}=o,m=y(o,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:v,fillOpacity:x,stroke:b,strokeWidth:S}=jt(h&&d,c),{strokeOpacity:k,fillShadow:w,lineDash:D,lineDashOffset:M,cornerRadius:C=0,topLeftCornerRadius:L=!0,topRightCornerRadius:R=!0,bottomRightCornerRadius:T=!0,bottomLeftCornerRadius:A=!0}=c;let E;return u&&(E=g.call(u,f({datum:l.datum,xKey:l.xKey,fill:v,stroke:b,strokeWidth:S,cornerRadius:C,highlighted:h,seriesId:p},m))),{fill:null!=(e=null==E?void 0:E.fill)?e:v,stroke:null!=(i=null==E?void 0:E.stroke)?i:b,strokeWidth:null!=(s=null==E?void 0:E.strokeWidth)?s:S,fillOpacity:null!=(n=null==E?void 0:E.fillOpacity)?n:x,strokeOpacity:null!=(a=null==E?void 0:E.strokeOpacity)?a:k,lineDash:D,lineDashOffset:M,fillShadow:w,cornerRadius:null!=(r=null==E?void 0:E.cornerRadius)?r:C,topLeftCornerRadius:L,topRightCornerRadius:R,bottomRightCornerRadius:T,bottomLeftCornerRadius:A}}function yp(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[e,i]=t;return!(0!==e||1!==i)}x([Yn(Jn)],gp.prototype,"xKey",2),x([Yn(Jn,{optional:!0})],gp.prototype,"xName",2),x([Yn(Jn)],gp.prototype,"yKey",2),x([Yn(Jn,{optional:!0})],gp.prototype,"yName",2),x([Yn(Jn,{optional:!0})],gp.prototype,"stackGroup",2),x([Yn(Qn,{optional:!0})],gp.prototype,"normalizedTo",2),x([Yn(pa)],gp.prototype,"fill",2),x([Yn(ia)],gp.prototype,"fillOpacity",2),x([Yn(pa)],gp.prototype,"stroke",2),x([Yn(ea)],gp.prototype,"strokeWidth",2),x([Yn(ia)],gp.prototype,"strokeOpacity",2),x([Yn(ka)],gp.prototype,"lineDash",2),x([Yn(ea)],gp.prototype,"lineDashOffset",2),x([Yn(ea)],gp.prototype,"cornerRadius",2),x([Yn(Zn,{optional:!0})],gp.prototype,"formatter",2),x([Yn(Hn,{optional:!0})],gp.prototype,"shadow",2),x([Yn(Hn)],gp.prototype,"label",2),x([Yn(Hn)],gp.prototype,"tooltip",2);var vp=t=>{var e;return $s(null!=(e=t.yValue)?e:0)};function xp(t,e,i){const{startingX:s,startingY:n}=function(t,e){const i=e[t?"y":"x"];let s=1/0,n=0;return i?(t?n=i.scale.convert($a.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert($a.is(i.scale)?0:Math.min(...i.range)),{startingX:s,startingY:n}):{startingX:s,startingY:n}}(t,e);return{isVertical:t,calculate:(e,i)=>{let a=t?e.x:s,r=t?n:e.y,o=t?e.width:0,l=t?0:e.height;const{opacity:h}=e;let c;return i&&(isNaN(a)||isNaN(r))&&(({x:a,y:r}=i),o=t?i.width:0,l=t?0:i.height,t&&!vp(i)?r+=i.height:!t&&vp(i)&&(a+=i.width)),c=null==e.cornerRadiusBbox?void 0:vp(e)?t?new Qs(a,r-l,o,l):new Qs(a-o,r,o,l):new Qs(a,r,o,l),{x:a,y:r,width:o,height:l,cornerRadiusBbox:c,opacity:h}},mode:i}}function bp(t,e){return{isVertical:t,calculate:e=>({x:t?e.x:e.x+e.width/2,y:t?e.y+e.height/2:e.y,width:t?e.width:0,height:t?0:e.height,cornerRadiusBbox:e.cornerRadiusBbox,opacity:e.opacity}),mode:e}}function Sp(t){const e=t=>null==t||isNaN(t.x)||isNaN(t.y);return{toFn:(i,s,n)=>{let a;return a="removed"===n&&null==i.datum&&"fade"===t.mode?m(f({},kp(i,s)),{opacity:0}):"removed"===n||e(s)?t.calculate(s,i.previousDatum):{x:s.x,y:s.y,width:s.width,height:s.height,cornerRadiusBbox:s.cornerRadiusBbox,opacity:s.opacity},a},fromFn:(i,s,n)=>{let a;"updated"===n&&e(s)?n="removed":"updated"===n&&e(i.previousDatum)&&(n="added"),a="added"===n&&null==i.previousDatum&&"fade"===t.mode?m(f({},kp(i,s)),{opacity:0}):"unknown"===n||"added"===n?t.calculate(s,i.previousDatum):{x:i.x,y:i.y,width:i.width,height:i.height,cornerRadiusBbox:i.cornerRadiusBbox,opacity:i.opacity};const r=An[n];return m(f({},a),{phase:r})}}}function kp(t,e){let{x:i,y:s,width:n,height:a,cornerRadiusBbox:r,opacity:o}=e;return{x:i,y:s,width:n,height:a,cornerRadiusBbox:r,opacity:o}}function wp(t,e,i){if(e.enabled&&i){const{x:s,y:n,text:a,textAlign:r,textBaseline:o}=i,{color:l,fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u}=e;t.setProperties({visible:!0,x:s,y:n,text:a,fill:l,fontStyle:h,fontWeight:c,fontSize:d,fontFamily:u,textAlign:r,textBaseline:o})}else t.visible=!1}function Dp(t){let{isPositive:e,isVertical:i,placement:s,padding:n=0,rect:a}=t,r=a.x+a.width/2,o=a.y+a.height/2,l="center",h="middle";switch(s){case"start":i?(o=e?a.y+a.height+n:a.y-n,h=e?"top":"bottom"):(r=e?a.x-n:a.x+a.width+n,l=e?"start":"end");break;case"outside":case"end":i?(o=e?a.y-n:a.y+a.height+n,h=e?"bottom":"top"):(r=e?a.x+a.width+n:a.x-n,l=e?"start":"end")}return{x:r,y:o,textAlign:l,textBaseline:h}}var Mp=class t extends up{constructor(t){super({moduleCtx:t,directionKeys:Dd,directionNames:Md,pickModes:[0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:kp,label:ku}}),this.properties=new gp}processData(t){return S(this,null,(function*(){var e,i,s,n;if(!this.properties.isValid()||!this.data)return;const{seriesGrouping:{groupIndex:a=this.id}={},data:r=[]}=this,{xKey:o,yKey:l,normalizedTo:h}=this.properties,c=!this.ctx.animationManager.isSkipped(),d=Math.abs(h??NaN),u=null==(e=this.getCategoryAxis())?void 0:e.scale,p=null==(i=this.getValueAxis())?void 0:i.scale,g=$a.is(u)||mr.is(u),m=$a.is(p)||mr.is(p),y=$a.is(u)?"range":"category",v=`bar-stack-${a}-yValues`,x=`${v}-trailing`,b=d&&isFinite(d)?d:void 0,S=[];b&&S.push(pc(this,[v,x],b,"range")),c&&this.processedData&&S.push(bc(this.processedData)),c&&S.push(mc(this));const k=this.visible?{}:{forceValue:0},{processedData:w}=yield this.requestDataModel(t,r,{props:[Mc(this,o,g,{id:"xValue",valueType:y}),Cc(this,l,m,f({id:"yValue-raw",invalidValue:null},k)),...Nc(this,l,m,"normal","current",f({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:v,separateNegative:!0},k)),...Nc(this,l,m,"trailing","current",f({id:"yValue-start",invalidValue:null,missingValue:0,groupId:x,separateNegative:!0},k)),...g?[hc]:[],...S],groupByKeys:!0,groupByData:!1});this.smallestDataInterval={x:null!=(n=null==(s=w.reduced)?void 0:s.smallestKeyInterval)?n:1/0,y:1/0},this.animationState.transition("updateData")}))}getSeriesDomain(t){var e;const{processedData:i,dataModel:s}=this;if(!i||!s||0===i.data.length)return[];const{reduced:{[hc.property]:n}={}}=i,a=this.getCategoryAxis(),r=this.getValueAxis(),o=s.resolveProcessedDataDefById(this,"xValue"),l=s.getDomain(this,"xValue","key",i),h=s.getDomain(this,"yValue-end","value",i);if(t===this.getCategoryDirection()){if("key"===(null==o?void 0:o.def.type)&&"category"===(null==o?void 0:o.def.valueType))return l;const i=null!=n&&isFinite(n)?n:0,s=null!=(e=hs(l))?e:[NaN,NaN],r=null==a?void 0:a.isReversed();if("y"===t){return rh([s[0]+(r?0:-i),s[1]+(r?i:0)],a)}return rh([s[0]+(r?-i:0),s[1]+(r?0:i)],a)}if(this.getValueAxis()instanceof Gd)return rh(h,r);return rh([h[0]>0?0:h[0],h[1]<0?0:h[1]],r)}createNodeData(){return S(this,null,(function*(){const{dataModel:e}=this,i=this.getCategoryAxis(),s=this.getValueAxis();if(!(e&&i&&s&&this.properties.isValid()))return[];const n=i.scale,a=s.scale,{xKey:r,yKey:o,xName:l,yName:h,fill:c,stroke:d,strokeWidth:u,cornerRadius:p,legendItemName:g,label:m}=this.properties,y=s.isReversed(),{barWidth:v,groupIndex:x}=this.updateGroupScale(i),S=e.resolveProcessedDataIndexById(this,"xValue").index,k=e.resolveProcessedDataIndexById(this,"yValue-raw").index,w=e.resolveProcessedDataIndexById(this,"yValue-start").index,D=e.resolveProcessedDataIndexById(this,"yValue-end").index,M=e.resolveProcessedDataDefById(this,"yValue-range").index,C=!this.ctx.animationManager.isSkipped(),L=[],{groupScale:R,processedData:T}=this;return null==T||T.data.forEach((e=>{let{keys:i,datum:s,values:T,aggValues:A}=e;T.forEach(((e,T)=>{var E;null!=L[T]||(L[T]={itemId:o,nodeData:[],labelData:[],scales:b(t.prototype,this,"calculateScaling").call(this),visible:this.visible||C});const N=i[S],O=n.convert(N),I=+e[D],P=+e[w],B=e[k],_=B>=0&&!Object.is(B,-0),F=_!==y,G=null!=(E=null==A?void 0:A[M][_?1:0])?E:0,z=O+R.convert(String(x));if(isNaN(I))return;const W=a.convert(I),V=a.convert(P),K="x"===this.getBarDirection(),Y=a.convert(G),$=a.convert(0),U=new Qs(K?Math.min($,Y):z,K?z:Math.min($,Y),K?Math.abs($-Y):v,K?v:Math.abs($-Y)),X={x:K?Math.min(W,V):z,y:K?z:Math.min(W,V),width:K?Math.abs(V-W):v,height:K?v:Math.abs(V-W),cornerRadiusBbox:U},{fontStyle:H,fontWeight:j,fontSize:q,fontFamily:Z,color:J,placement:Q}=m,tt=this.getLabelText(this.properties.label,{datum:s[T],value:B,xKey:r,yKey:o,xName:l,yName:h,legendItemName:g},(t=>Kt(t)?t.toFixed(2):"")),et=tt?f({text:tt,fill:J,fontStyle:H,fontWeight:j,fontSize:q,fontFamily:Z},Dp({isPositive:_,isVertical:!K,placement:Q,rect:X})):void 0,it=this.shouldFlipXY()?X.height:X.width,st={series:this,itemId:o,datum:s[T],cumulativeValue:I,xValue:N,yValue:B,yKey:o,xKey:r,capDefaults:{lengthRatioMultiplier:it,lengthMax:it},x:X.x,y:X.y,width:X.width,height:X.height,midPoint:{x:X.x+X.width/2,y:X.y+X.height/2},fill:c,stroke:d,opacity:1,strokeWidth:u,cornerRadius:p,topLeftCornerRadius:K!==F,topRightCornerRadius:F,bottomRightCornerRadius:K===F,bottomLeftCornerRadius:!F,cornerRadiusBbox:U,label:et};L[T].nodeData.push(st),L[T].labelData.push(st)}))})),L}))}nodeFactory(){return new Ud}updateDatumSelection(t){return S(this,null,(function*(){return t.datumSelection.update(t.nodeData,(t=>{t.tag=0}),(t=>Sc(t.xValue)))}))}updateDatumNodes(t){return S(this,null,(function*(){if(!this.properties.isValid())return;const{yKey:e,stackGroup:i,fill:s,fillOpacity:n,stroke:a,strokeWidth:r,strokeOpacity:o,lineDash:l,lineDashOffset:h,formatter:c,shadow:d,highlightStyle:{item:u}}=this.properties,p=this.axes.x,g=yp(null==p?void 0:p.visibleRange),f="x"===this.getCategoryDirection();t.datumSelection.each(((p,m)=>{const y={fill:s,stroke:a,fillOpacity:n,strokeOpacity:o,lineDash:l,lineDashOffset:h,fillShadow:d,strokeWidth:this.getStrokeWidth(r),cornerRadius:m.cornerRadius,topLeftCornerRadius:m.topLeftCornerRadius,topRightCornerRadius:m.topRightCornerRadius,bottomRightCornerRadius:m.bottomRightCornerRadius,bottomLeftCornerRadius:m.bottomLeftCornerRadius},v=f?m.width>0:m.height>0,x=mp({datum:m,ctx:this.ctx,seriesId:this.id,isHighlighted:t.isHighlight,highlightStyle:u,yKey:e,style:y,formatter:c,stackGroup:i});x.crisp=g,x.visible=v,fp({rect:p,config:x})}))}))}updateLabelSelection(t){return S(this,null,(function*(){const e=this.isLabelEnabled()?t.labelData:[];return t.labelSelection.update(e,(t=>{t.tag=1,t.pointerEvents=1}))}))}updateLabelNodes(t){return S(this,null,(function*(){t.labelSelection.each(((t,e)=>{wp(t,this.properties.label,e.label)}))}))}getTooltipHtml(t){var e;const{id:i,processedData:s,ctx:{callbackCache:n}}=this,a=this.getCategoryAxis(),r=this.getValueAxis();if(!s||!this.properties.isValid()||!a||!r)return"";const{xKey:o,yKey:l,xName:h,yName:c,fill:d,stroke:u,strokeWidth:p,tooltip:g,formatter:m,stackGroup:y}=this.properties,{xValue:v,yValue:x,datum:b}=t,S=a.formatDatum(v),k=r.formatDatum(x),w=xu(c),D=xu(S+": "+k);let M;m&&(M=n.call(m,{seriesId:i,datum:b,xKey:o,yKey:l,stackGroup:y,fill:d,stroke:u,strokeWidth:this.getStrokeWidth(p),highlighted:!1}));const C=null!=(e=null==M?void 0:M.fill)?e:d;return g.toTooltipHtml({title:w,content:D,backgroundColor:C},f({seriesId:i,datum:b,xKey:o,yKey:l,xName:h,yName:c,stackGroup:y,title:w,color:C},this.getModuleTooltipParams()))}getLegendData(t){var e,i;const{showInLegend:s}=this.properties;if("category"!==t||null==(e=this.data)||!e.length||!this.properties.isValid()||!s)return[];const{yKey:n,yName:a,fill:r,stroke:o,strokeWidth:l,fillOpacity:h,strokeOpacity:c,legendItemName:d,visible:u}=this.properties;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:u,label:{text:null!=(i=d??a)?i:n},marker:{fill:r,fillOpacity:h,stroke:o,strokeWidth:l,strokeOpacity:c},legendItemName:d}]}animateEmptyUpdateReady(t){let{datumSelections:e,labelSelections:i,annotationSelections:s}=t;const n=Sp(xp(this.isVertical(),this.axes,"normal"));En(this.id,"nodes",this.ctx.animationManager,e,n),bu(this,"labels",this.ctx.animationManager,i),bu(this,"annotations",this.ctx.animationManager,s)}animateWaitingUpdateReady(t){var e,i,s;const{datumSelections:n,labelSelections:a,annotationSelections:r,previousContextData:o}=t;this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff,h=0===(null==o?void 0:o.length)?"fade":"normal",c=Sp(xp(this.isVertical(),this.axes,h));En(this.id,"nodes",this.ctx.animationManager,n,c,((t,e)=>Sc(e.xValue)),l),(null==(s=null==l?void 0:l.changed)||s)&&(bu(this,"labels",this.ctx.animationManager,a),bu(this,"annotations",this.ctx.animationManager,r))}isLabelEnabled(){return this.properties.label.enabled}};Mp.className="BarSeries",Mp.type="bar";var Cp={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:Mp,stackable:!0,groupable:!0,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],swapDefaultAxesCondition:t=>"horizontal"===(null==t?void 0:t.direction),themeTemplate:{series:{__extends__:Xe,direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:qe,color:Qe,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:ai,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:fu},Lp=t=>{const e=pn.fromString(t),[i,s,n]=pn.RGBtoOKLCH(e.r,e.g,e.b);return{l:i,c:s,h:n,a:e.a}},Rp=class{constructor(){this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(Lp)}update(){const{domain:t,range:e}=this;t.length<2&&(O.warnOnce("`colorDomain` should have at least 2 values."),0===t.length?t.push(0,1):1===t.length&&t.push(t[0]+1));for(let i=1;i<t.length;i++){if(t[i-1]>=t[i]){O.warnOnce("`colorDomain` values should be supplied in ascending order."),t.sort(((t,e)=>t-e));break}}if(e.length<t.length)for(let i=e.length;i<t.length;i++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(Lp)}convert(t){this.refresh();const{domain:e,range:i,parsedRange:s}=this,n=e[0],a=e.at(-1),r=i[0],o=i[i.length-1];if(t<=n)return r;if(t>=a)return o;let l,h;if(2===e.length){const e=(t-n)/(a-n),s=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(e*(i.length-1)),i.length-2),h=(e-l*s)/s}else{for(l=0;l<e.length-2&&!(t<e[l+1]);l++);const i=e[l];h=(t-i)/(e[l+1]-i)}return((t,e,i)=>{let s,n;if(i=zs(0,i,1),Number.isNaN(t.h)&&Number.isNaN(e.h))s=0,n=0;else if(Number.isNaN(t.h))s=e.h,n=e.c;else if(Number.isNaN(e.h))s=t.h,n=t.c;else{const a=t.h;let r=e.h;const o=e.h-t.h;o>180?r-=360:o<-180&&(r+=360),s=a*(1-i)+r*i,n=t.c*(1-i)+e.c*i}const a=t.l*(1-i)+e.l*i,r=t.a*(1-i)+e.a*i;return pn.fromOKLCH(a,n,s,r)})(s[l],s[l+1],h).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&O.warnOnce("Expected update to not invalidate scale"))}};x([Vn],Rp.prototype,"domain",2),x([Vn],Rp.prototype,"range",2);var Tp=class extends Cu{constructor(){super(...arguments),this.maxSize=30}};x([Yn(ea),sn({redraw:3})],Tp.prototype,"maxSize",2),x([Yn(ma,{optional:!0}),sn({redraw:3})],Tp.prototype,"domain",2);var Ap=class extends _r{constructor(){super(...arguments),this.placement="top"}};x([Yn(Oa)],Ap.prototype,"placement",2);var Ep=class extends Ld{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new Tp,this.label=new Ap,this.tooltip=new Ru}};x([Yn(Jn)],Ep.prototype,"xKey",2),x([Yn(Jn)],Ep.prototype,"yKey",2),x([Yn(Jn)],Ep.prototype,"sizeKey",2),x([Yn(Jn,{optional:!0})],Ep.prototype,"labelKey",2),x([Yn(Jn,{optional:!0})],Ep.prototype,"colorKey",2),x([Yn(Jn,{optional:!0})],Ep.prototype,"xName",2),x([Yn(Jn,{optional:!0})],Ep.prototype,"yName",2),x([Yn(Jn,{optional:!0})],Ep.prototype,"sizeName",2),x([Yn(Jn,{optional:!0})],Ep.prototype,"labelName",2),x([Yn(Jn,{optional:!0})],Ep.prototype,"colorName",2),x([Yn(ma,{optional:!0})],Ep.prototype,"colorDomain",2),x([Yn(ga)],Ep.prototype,"colorRange",2),x([Yn(Jn,{optional:!0})],Ep.prototype,"title",2),x([Yn(Hn)],Ep.prototype,"marker",2),x([Yn(Hn)],Ep.prototype,"label",2),x([Yn(Hn)],Ep.prototype,"tooltip",2);var Np=class extends Cd{constructor(t,e,i,s){super(t,e,i,s),this.sizeKey=s.properties.sizeKey}},Op=class t extends Rd{constructor(t){super({moduleCtx:t,directionKeys:Dd,directionNames:Md,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:ku,marker:Ou}}),this.NodeEvent=Np,this.properties=new Ep,this.sizeScale=new Id,this.colorScale=new Rp}processData(t){return S(this,null,(function*(){var e,i;if(!this.properties.isValid()||null==this.data)return;const{isContinuousX:s,isContinuousY:n}=this.isContinuous(),{xKey:a,yKey:r,sizeKey:o,labelKey:l,colorDomain:h,colorRange:c,colorKey:d,marker:u}=this.properties,{dataModel:p,processedData:g}=yield this.requestDataModel(t,this.data,{props:[Mc(this,a,s,{id:"xKey-raw"}),Mc(this,r,n,{id:"yKey-raw"}),...l?[Mc(this,l,!1,{id:"labelKey-raw"})]:[],Cc(this,a,s,{id:"xValue"}),Cc(this,r,n,{id:"yValue"}),Cc(this,o,!0,{id:"sizeValue"}),...d?[Cc(this,d,!0,{id:"colorValue"})]:[],...l?[Cc(this,l,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),f=p.resolveProcessedDataIndexById(this,"sizeValue").index,m=null!=(e=g.domain.values[f])?e:[];if(this.sizeScale.domain=u.domain?u.domain:m,d){const t=p.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=null!=(i=h??g.domain.values[t])?i:[],this.colorScale.range=c,this.colorScale.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s="x"===t?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,s),a=e.getDomain(this,s,"value",i);if("value"===(null==n?void 0:n.def.type)&&"category"===(null==n?void 0:n.def.valueType))return a;const r=this.axes[t];return rh(hs(a),r)}createNodeData(){return S(this,null,(function*(){var e,i,s;const{axes:n,dataModel:a,processedData:r,colorScale:o,sizeScale:l}=this,{xKey:h,yKey:c,sizeKey:d,labelKey:u,xName:p,yName:g,sizeName:m,labelName:y,label:v,colorKey:x,marker:S,visible:k}=this.properties,w=yd(S.shape),{placement:D}=v,M=n.x,C=n.y;if(!(a&&r&&k&&M&&C))return[];const L=a.resolveProcessedDataIndexById(this,"xValue").index,R=a.resolveProcessedDataIndexById(this,"yValue").index,T=d?a.resolveProcessedDataIndexById(this,"sizeValue").index:-1,A=x?a.resolveProcessedDataIndexById(this,"colorValue").index:-1,E=u?a.resolveProcessedDataIndexById(this,"labelValue").index:-1,N=M.scale,O=C.scale,I=(null!=(e=N.bandwidth)?e:0)/2,P=(null!=(i=O.bandwidth)?i:0)/2,B=[];l.range=[S.size,S.maxSize];const _=v.getFont();for(const{values:t,datum:b}of null!=(s=r.data)?s:[]){const e=t[L],i=t[R],s=N.convert(e)+I,n=O.convert(i)+P,a=this.getLabelText(v,{value:u?t[E]:i,datum:b,xKey:h,yKey:c,sizeKey:d,labelKey:u,xName:p,yName:g,sizeName:m,labelName:y}),r=Ir.getTextSize(String(a),_),k=d?l.convert(t[T]):S.size,M=x?o.convert(t[A]):void 0;B.push({series:this,itemId:c,yKey:c,xKey:h,datum:b,xValue:e,yValue:i,sizeValue:t[T],point:{x:s,y:n,size:k},midPoint:{x:s,y:n},fill:M,label:f({text:a},r),marker:w,placement:D})}return[{itemId:c,nodeData:B,labelData:B,scales:b(t.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t;return null==(t=this.contextNodeData)?void 0:t.reduce(((t,e)=>t.concat(e.labelData)),[])}markerFactory(){const{shape:t}=this.properties.marker;return new(yd(t))}updateMarkerSelection(t){return S(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?e:[];return i.update(s,void 0,(t=>Sc([t.xValue,t.yValue,t.label.text])))}))}updateMarkerNodes(t){return S(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,sizeKey:a,labelKey:r,marker:o}=this.properties,l=jt(i&&this.properties.highlightStyle.item,o.getStyle());this.sizeScale.range=[o.size,o.maxSize],e.each(((t,e)=>{this.updateMarkerStyle(t,o,{datum:e,highlighted:i,xKey:s,yKey:n,sizeKey:a,labelKey:r},l)})),i||this.properties.marker.markClean()}))}updateLabelSelection(t){return S(this,null,(function*(){var e,i;const s=this.properties.label.enabled&&null!=(i=null==(e=this.chart)?void 0:e.placeLabels().get(this))?i:[];return t.labelSelection.update(s.map((t=>m(f({},t.datum),{point:{x:t.x,y:t.y,size:t.datum.point.size}}))))}))}updateLabelNodes(t){return S(this,null,(function*(){const{label:e}=this.properties;t.labelSelection.each(((t,i)=>{var s,n,a,r;t.text=i.label.text,t.fill=e.color,t.x=null!=(n=null==(s=i.point)?void 0:s.x)?n:0,t.y=null!=(r=null==(a=i.point)?void 0:a.y)?r:0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"}))}))}getTooltipHtml(t){var e;const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return"";const{xKey:n,yKey:a,sizeKey:r,labelKey:o,xName:l,yName:h,sizeName:c,labelName:d,marker:u,tooltip:p}=this.properties,g=null!=(e=this.properties.title)?e:h,f=jt({fill:t.fill,strokeWidth:this.getStrokeWidth(u.strokeWidth)},u.getStyle()),{fill:m="gray"}=this.getMarkerStyle(u,{datum:t,highlighted:!1,xKey:n,yKey:a,sizeKey:r,labelKey:o},f),{datum:y,xValue:v,yValue:x,sizeValue:b,label:{text:S}}=t,k=xu(i.formatDatum(v)),w=xu(s.formatDatum(x));let D=`<b>${xu(l??n)}</b>: ${k}<br><b>${xu(h??a)}</b>: ${w}`;return r&&(D+=`<br><b>${xu(c??r)}</b>: ${xu(String(b))}`),o&&(D=`<b>${xu(d??o)}</b>: ${xu(S)}<br>`+D),p.toTooltipHtml({title:g,content:D,backgroundColor:m},{datum:y,xKey:n,xName:l,yKey:a,yName:h,sizeKey:r,sizeName:c,labelKey:o,labelName:d,title:g,color:m,seriesId:this.id})}getLegendData(){var t,e;if(null==(t=this.data)||!t.length||!this.properties.isValid())return[];const{yKey:i,yName:s,title:n,marker:a,visible:r}=this.properties,{shape:o,fill:l,stroke:h,fillOpacity:c,strokeOpacity:d,strokeWidth:u}=a;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:r,label:{text:null!=(e=n??s)?e:i},marker:{shape:o,fill:l??"rgba(0, 0, 0, 0)",stroke:h??"rgba(0, 0, 0, 0)",fillOpacity:c??1,strokeOpacity:d??1,strokeWidth:u??0}}]}animateEmptyUpdateReady(t){let{markerSelections:e,labelSelections:i}=t;Eu(this,this.ctx.animationManager,e),bu(this,"labels",this.ctx.animationManager,i)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Sr}};Op.className="BubbleSeries",Op.type="bubble";var Ip={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:Op,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Xe,tooltip:{position:{type:"node"}},marker:{__extends__:He,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:qe,color:Ze}}},paletteFactory:mu},Pp=class extends Ld{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new Du,this.label=new _r,this.tooltip=new Ru}};x([Yn(Jn)],Pp.prototype,"xKey",2),x([Yn(Jn,{optional:!0})],Pp.prototype,"yKey",2),x([Yn(Jn,{optional:!0})],Pp.prototype,"xName",2),x([Yn(Jn,{optional:!0})],Pp.prototype,"yName",2),x([Yn(pa,{optional:!0})],Pp.prototype,"fill",2),x([Yn(ia)],Pp.prototype,"fillOpacity",2),x([Yn(pa,{optional:!0})],Pp.prototype,"stroke",2),x([Yn(ea)],Pp.prototype,"strokeWidth",2),x([Yn(ia)],Pp.prototype,"strokeOpacity",2),x([Yn(ka)],Pp.prototype,"lineDash",2),x([Yn(ea)],Pp.prototype,"lineDashOffset",2),x([Yn(ea)],Pp.prototype,"cornerRadius",2),x([Yn(qn)],Pp.prototype,"areaPlot",2),x([Yn(aa,{optional:!0})],Pp.prototype,"bins",2),x([Yn(Ia(["count","sum","mean"],"a histogram aggregation"))],Pp.prototype,"aggregation",2),x([Yn(ea,{optional:!0})],Pp.prototype,"binCount",2),x([Yn(Hn)],Pp.prototype,"shadow",2),x([Yn(Hn)],Pp.prototype,"label",2),x([Yn(Hn)],Pp.prototype,"tooltip",2);var Bp=class t extends Rd{constructor(t){super({moduleCtx:t,directionKeys:Dd,directionNames:Md,pickModes:[0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:kp,label:ku}}),this.properties=new Pp,this.calculatedBins=[]}deriveBins(t){const e=lr(t[0],t[1],10),i=cr(t[0],t[1],10),[s]=e;return[[s-i,s],...e.map((t=>[t,t+i]))]}calculateNiceBins(t,e){const i=Math.floor(t[0]),s=t[1],n=e||1,{start:a,binSize:r}=this.calculateNiceStart(i,s,n);return this.getBins(a,s,r,n)}getBins(t,e,i,s){const n=[],a=this.calculatePrecision(i);for(let r=0;r<s;r++){const o=Math.round((t+r*i)*a)/a;let l=Math.round((t+(r+1)*i)*a)/a;r===s-1&&(l=Math.max(l,e)),n[r]=[o,l]}return n}calculatePrecision(t){let e=10;if(isFinite(t)&&t>0)for(;t<1;)e*=10,t*=10;return e}calculateNiceStart(t,e,i){const s=Math.abs(e-t)/i,n=Math.floor(Math.log10(s)),a=Math.pow(10,n);return{start:Math.floor(t/a)*a,binSize:s}}processData(t){return S(this,null,(function*(){var e;const{xKey:i,yKey:s,areaPlot:n,aggregation:a}=this.properties,r=[Mc(this,i,!0),dc];if(s){let t=nc(this,"groupAgg");"count"===a||("sum"===a?t=ic(this,"groupAgg"):"mean"===a&&(t=ac(this,"groupAgg"))),n&&(t=rc(this,"groupAgg",t)),r.push(Cc(this,s,!0,{invalidValue:void 0}),t)}else{let t=nc(this,"groupAgg");n&&(t=rc(this,"groupAgg",t)),r.push(t)}!this.ctx.animationManager.isSkipped()&&this.processedData&&r.push(bc(this.processedData,!1)),yield this.requestDataModel(t,null!=(e=this.data)?e:[],{props:r,dataVisible:this.visible,groupByFn:t=>{var e;const i=rh(t.domain.keys[0]);if(0===i.length)return t.domain.groups=[],()=>[];const s=Vt(this.properties.binCount)?this.calculateNiceBins(i,this.properties.binCount):null!=(e=this.properties.bins)?e:this.deriveBins(i),n=s.length;return this.calculatedBins=[...s],t=>{const e=t.keys[0];for(let i=0;i<n;i++){const t=s[i];if(e>=t[0]&&e<t[1]||i===n-1&&e<=t[1])return t}return[]}}}),this.animationState.transition("updateData")}))}getSeriesDomain(t){var e,i,s,n;const{processedData:a,dataModel:r}=this;if(!a||!r||!this.calculatedBins.length)return[];const o=r.getDomain(this,"groupAgg","aggregate",a),l=null==(e=this.calculatedBins)?void 0:e[0][0],h=null==(n=this.calculatedBins)?void 0:n[(null!=(s=null==(i=this.calculatedBins)?void 0:i.length)?s:0)-1][1];return rh("x"===t?[l,h]:o)}createNodeData(){return S(this,null,(function*(){var e;const{id:i,axes:s,processedData:n,ctx:{callbackCache:a}}=this,r=s.x,o=s.y;if(!this.visible||!r||!o||!n||"grouped"!==n.type)return[];const{scale:l}=r,{scale:h}=o,{xKey:c,yKey:d,xName:u,yName:p,fill:g,stroke:f,strokeWidth:m,cornerRadius:y}=this.properties,{formatter:v=t=>String(t.value),fontStyle:x,fontWeight:S,fontSize:k,fontFamily:w,color:D}=this.properties.label,M=[];return n.data.forEach((t=>{var e;const{aggValues:[[s,n]]=[[0,0]],datum:r,datum:{length:b},keys:C,keys:[L,R]}=t,T=l.convert(L),A=l.convert(R),E=s+n,N=h.convert(0),O=h.convert(E),I=Math.abs(A-T),P=Math.abs(O-N),B=Math.min(T,A),_=Math.min(N,O);let F;0!==E&&(F={text:null!=(e=a.call(v,{value:E,datum:r,seriesId:i,xKey:c,yKey:d,xName:u,yName:p}))?e:String(E),fontStyle:x,fontWeight:S,fontSize:k,fontFamily:w,fill:D,x:B+I/2,y:_+P/2});const G={x:B+I/2,y:_+P/2},z=o.isReversed();M.push({series:this,datum:r,aggregatedValue:E,frequency:b,domain:C,yKey:d,xKey:c,x:B,y:_,xValue:T,yValue:O,width:I,height:P,midPoint:G,fill:g,stroke:f,cornerRadius:y,topLeftCornerRadius:!z,topRightCornerRadius:!z,bottomRightCornerRadius:z,bottomLeftCornerRadius:z,opacity:1,strokeWidth:m,label:F})})),[{itemId:null!=(e=this.properties.yKey)?e:this.id,nodeData:M,labelData:M,scales:b(t.prototype,this,"calculateScaling").call(this),animationValid:!0,visible:this.visible}]}))}nodeFactory(){return new Ud}updateDatumSelection(t){return S(this,null,(function*(){const{nodeData:e,datumSelection:i}=t;return i.update(e,(t=>{t.tag=0,t.crisp=!0}),(t=>t.domain.join("_")))}))}updateDatumNodes(t){return S(this,null,(function*(){const{isHighlight:e}=t,{fillOpacity:i,strokeOpacity:s,lineDash:n,lineDashOffset:a,shadow:r,highlightStyle:{item:{fill:o,fillOpacity:l=i,stroke:h,strokeWidth:c}}}=this.properties;t.datumSelection.each(((t,d,u)=>{var p,g;const{cornerRadius:f,topLeftCornerRadius:m,topRightCornerRadius:y,bottomRightCornerRadius:v,bottomLeftCornerRadius:x}=d,b=e&&void 0!==c?c:d.strokeWidth,S=e?l:i;t.fill=null!=(p=e?o:void 0)?p:d.fill,t.stroke=null!=(g=e?h:void 0)?g:d.stroke,t.fillOpacity=S,t.strokeOpacity=s,t.strokeWidth=b,t.lineDash=n,t.lineDashOffset=a,t.topLeftCornerRadius=m?f:0,t.topRightCornerRadius=y?f:0,t.bottomRightCornerRadius=v?f:0,t.bottomLeftCornerRadius=x?f:0,t.fillShadow=r,t.zIndex=e?Pc.highlightedZIndex:u,t.visible=d.height>0}))}))}updateLabelSelection(t){return S(this,null,(function*(){const{labelData:e,labelSelection:i}=t;return i.update(e,(t=>{t.tag=1,t.pointerEvents=1,t.textAlign="center",t.textBaseline="middle"}))}))}updateLabelNodes(t){return S(this,null,(function*(){const e=this.isLabelEnabled();t.labelSelection.each(((t,i)=>{const s=i.label;s&&e?(t.text=s.text,t.x=s.x,t.y=s.y,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.fontSize=s.fontSize,t.fontFamily=s.fontFamily,t.fill=s.fill,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return"";const{xKey:s,yKey:n,xName:a,yName:r,fill:o,aggregation:l,tooltip:h}=this.properties,{aggregatedValue:c,frequency:d,domain:[u,p]}=t,g=`${xu(a??s)}: ${e.formatDatum(u)} - ${e.formatDatum(p)}`;let f=n?`<b>${xu(r??n)} (${l})</b>: ${i.formatDatum(c)}<br>`:"";f+=`<b>Frequency</b>: ${d}`;const m={title:g,backgroundColor:o,content:f};return h.toTooltipHtml(m,{datum:{data:t.datum,aggregatedValue:t.aggregatedValue,domain:t.domain,frequency:t.frequency},xKey:s,xName:a,yKey:n,yName:r,color:o,title:g,seriesId:this.id})}getLegendData(t){var e,i;if(null==(e=this.data)||!e.length||"category"!==t)return[];const{xKey:s,yName:n,fill:a,fillOpacity:r,stroke:o,strokeWidth:l,strokeOpacity:h,visible:c}=this.properties;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:c,label:{text:null!=(i=n??s)?i:"Frequency"},marker:{fill:a??"rgba(0, 0, 0, 0)",stroke:o??"rgba(0, 0, 0, 0)",fillOpacity:r,strokeOpacity:h,strokeWidth:l}}]}animateEmptyUpdateReady(t){let{datumSelections:e,labelSelections:i}=t;const s=Sp(xp(!0,this.axes,"normal"));En(this.id,"datums",this.ctx.animationManager,e,s),bu(this,"labels",this.ctx.animationManager,i)}animateWaitingUpdateReady(t){var e,i;const s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff,n=Sp(xp(!0,this.axes,"normal"));En(this.id,"datums",this.ctx.animationManager,t.datumSelections,n,((t,e)=>Sc(e.domain)),s),bu(this,"labels",this.ctx.animationManager,t.labelSelections)}isLabelEnabled(){return this.properties.label.enabled}};Bp.className="HistogramSeries",Bp.type="histogram";var _p={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:Bp,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Xe,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:qe,color:Qe,formatter:void 0},shadow:{enabled:!1,color:ai,xOffset:3,yOffset:3,blur:5}}},paletteFactory:t=>{let{takeColors:e}=t;const{fills:[i],strokes:[s]}=e(1);return{fill:i,stroke:s}}},Fp=class extends Ld{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new Cu,this.label=new _r,this.tooltip=new Ru,this.connectMissingData=!1}};x([Yn(Jn)],Fp.prototype,"xKey",2),x([Yn(Jn)],Fp.prototype,"yKey",2),x([Yn(Jn,{optional:!0})],Fp.prototype,"xName",2),x([Yn(Jn,{optional:!0})],Fp.prototype,"yName",2),x([Yn(Jn,{optional:!0})],Fp.prototype,"title",2),x([Yn(pa)],Fp.prototype,"stroke",2),x([Yn(ea)],Fp.prototype,"strokeWidth",2),x([Yn(ia)],Fp.prototype,"strokeOpacity",2),x([Yn(ka)],Fp.prototype,"lineDash",2),x([Yn(ea)],Fp.prototype,"lineDashOffset",2),x([Yn(Hn)],Fp.prototype,"marker",2),x([Yn(Hn)],Fp.prototype,"label",2),x([Yn(Hn)],Fp.prototype,"tooltip",2),x([Yn(qn)],Fp.prototype,"connectMissingData",2);var Gp=class t extends Rd{constructor(t){super({moduleCtx:t,directionKeys:Dd,directionNames:Md,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:$u({getOpacity:()=>this.getOpacity()}),label:ku,marker:(t,e)=>f(f({},{opacity:1,scalingX:1,scalingY:1}),Iu(0,e))}}),this.properties=new Fp}processData(t){return S(this,null,(function*(){var e;if(!this.properties.isValid()||null==this.data)return;const{xKey:i,yKey:s}=this.properties,n=!this.ctx.animationManager.isSkipped(),{isContinuousX:a,isContinuousY:r}=this.isContinuous(),o=[];a||o.push(Mc(this,i,a,{id:"xKey"})),n&&(o.push(mc(this,a?["xValue"]:void 0)),this.processedData&&o.push(bc(this.processedData)));const l=null==(e=this.axes.x)?void 0:e.scale,h=$a.is(l)?"range":"category";o.push(Cc(this,i,a,{id:"xValue",valueType:h}),Cc(this,s,r,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(t,this.data,{props:o}),this.animationState.transition("updateData")}))}getSeriesDomain(t){const{axes:e,dataModel:i,processedData:s}=this;if(!s||!i)return[];const n=e.x,a=e.y,r=i.resolveProcessedDataDefById(this,"xValue");if("x"===t){const t=i.getDomain(this,"xValue","value",s);return"value"===(null==r?void 0:r.def.type)&&"category"===r.def.valueType?t:rh(hs(t),n)}return rh(i.getDomain(this,"yValue","value",s),a)}createNodeData(){return S(this,null,(function*(){var e,i,s;const{processedData:n,dataModel:a,axes:r}=this,o=r.x,l=r.y;if(!n||!a||!o||!l)return[];const{xKey:h,yKey:c,xName:d,yName:u,marker:p,label:g,connectMissingData:f}=this.properties,m=o.scale,y=l.scale,v=(null!=(e=m.bandwidth)?e:0)/2,x=(null!=(i=y.bandwidth)?i:0)/2,S=[],k=p.enabled?p.size:0,w=a.resolveProcessedDataIndexById(this,"xValue").index,D=a.resolveProcessedDataIndexById(this,"yValue").index;let M,C=!0;for(let t=0;t<n.data.length;t++){const{datum:e,values:i}=M??n.data[t],a=i[w],r=i[D];if(void 0===r)C=!f;else{const i=m.convert(a)+v;if(isNaN(i)){C=!f,M=void 0;continue}M=void 0===(null==(s=n.data[t+1])?void 0:s.values[D])?void 0:n.data[t+1];const o=y.convert(r)+x,l=this.getLabelText(g,{value:r,datum:e,xKey:h,yKey:c,xName:d,yName:u},(t=>Kt(t)?t.toFixed(2):String(t)));S.push({series:this,datum:e,yKey:c,xKey:h,point:{x:i,y:o,moveTo:C,size:k},midPoint:{x:i,y:o},yValue:r,xValue:a,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:l?{text:l,fontStyle:g.fontStyle,fontWeight:g.fontWeight,fontSize:g.fontSize,fontFamily:g.fontFamily,textAlign:"center",textBaseline:"bottom",fill:g.color}:void 0}),C=!1}}return[{itemId:c,nodeData:S,labelData:S,scales:b(t.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:t}=this.properties.marker;return new(yd(t))}updatePathNodes(t){return S(this,null,(function*(){const{paths:[e],opacity:i,visible:s,animationEnabled:n}=t;e.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),n||(e.visible=s),Uu(this,e)}))}updateMarkerSelection(t){return S(this,null,(function*(){let{nodeData:e}=t;const{markerSelection:i}=t,{shape:s,enabled:n}=this.properties.marker;return e=s&&n?e:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(e,void 0,(t=>Sc(t.xValue)))}))}updateMarkerNodes(t){return S(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,stroke:a,strokeWidth:r,strokeOpacity:o,marker:l,highlightStyle:h}=this.properties,c=jt(i&&h.item,l.getStyle(),{stroke:a,strokeWidth:r,strokeOpacity:o}),d=this.ctx.animationManager.isSkipped();e.each(((t,e)=>{this.updateMarkerStyle(t,l,{datum:e,highlighted:i,xKey:s,yKey:n},c,{applyTranslation:d})})),i||l.markClean()}))}updateLabelSelection(t){return S(this,null,(function*(){return t.labelSelection.update(this.isLabelEnabled()?t.labelData:[])}))}updateLabelNodes(t){return S(this,null,(function*(){const{enabled:e,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:a,color:r}=this.properties.label;t.labelSelection.each(((t,o)=>{const{point:l,label:h}=o;o&&h&&e?(t.fontStyle=i,t.fontWeight=s,t.fontSize=n,t.fontFamily=a,t.textAlign=h.textAlign,t.textBaseline=h.textBaseline,t.text=h.text,t.x=l.x,t.y=l.y-10,t.fill=r,t.visible=!0):t.visible=!1}))}))}getTooltipHtml(t){var e;const i=this.axes.x,s=this.axes.y;if(!this.properties.isValid()||!i||!s)return"";const{xKey:n,yKey:a,xName:r,yName:o,strokeWidth:l,marker:h,tooltip:c}=this.properties,{datum:d,xValue:u,yValue:p}=t,g=i.formatDatum(u),m=s.formatDatum(p),y=xu(null!=(e=this.properties.title)?e:o),v=xu(g+": "+m),x=jt({fill:h.stroke},h.getStyle(),{strokeWidth:l}),{fill:b}=this.getMarkerStyle(h,{datum:t,xKey:n,yKey:a,highlighted:!1},x);return c.toTooltipHtml({title:y,content:v,backgroundColor:b},f({datum:d,xKey:n,xName:r,yKey:a,yName:o,title:y,color:b,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,s,n,a,r,o,l,h;if(null==(e=this.data)||!e.length||!this.properties.isValid()||"category"!==t)return[];const{yKey:c,yName:d,stroke:u,strokeOpacity:p,strokeWidth:g,lineDash:f,title:m,marker:y,visible:v}=this.properties,x="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:c,seriesId:this.id,enabled:v,label:{text:null!=(i=m??d)?i:c},marker:{shape:y.shape,fill:null!=(s=y.fill)?s:x,stroke:null!=(a=null!=(n=y.stroke)?n:u)?a:x,fillOpacity:null!=(r=y.fillOpacity)?r:1,strokeOpacity:null!=(l=null!=(o=y.strokeOpacity)?o:p)?l:1,strokeWidth:null!=(h=y.strokeWidth)?h:0,enabled:y.enabled},line:{stroke:u??x,strokeOpacity:p,strokeWidth:g,lineDash:f}}]}updatePaths(t){return S(this,null,(function*(){this.updateLinePaths([t.paths],[t.contextData])}))}updateLinePaths(t,e){e.forEach(((e,i)=>{let{nodeData:s}=e;const[n]=t[i],{path:a}=n;a.clear({trackChanges:!0});for(const t of s)t.point.moveTo?a.moveTo(t.point.x,t.point.y):a.lineTo(t.point.x,t.point.y);n.checkPathDirty()}))}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:s,contextData:n,paths:a}=t,{animationManager:r}=this.ctx;this.updateLinePaths(a,n),Vu(this,r,a.flat()),po(e,Iu),Nu(this,r,e),bu(this,"labels",r,i),bu(this,"annotations",r,s)}animateReadyResize(t){const{contextData:e,paths:i}=t;this.updateLinePaths(i,e),super.animateReadyResize(t)}animateWaitingUpdateReady(t){var e,i;const{animationManager:s}=this.ctx,{markerSelections:n,labelSelections:a,annotationSelections:r,contextData:o,paths:l,previousContextData:h}=t,[c]=l;super.resetAllAnimation(t);const d=()=>{this.updateLinePaths(l,o)};if(0===o.length||0===(null==h?void 0:h.length))return d(),Au(this,s,n,"added"),Ku(this,"path_properties",s,c??[]),bu(this,"labels",s,a),void bu(this,"annotations",s,r);const[u]=o,[p]=h??[],g=np(u,p,null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.diff);if(void 0===g)return s.skipCurrentBatch(),void d();"no-op"!==g.status&&(Au(this,s,n),En(this.id,"path_properties",s,c,g.pathProperties),yu(this.id,"path_update",s,c,g.path),g.hasMotion&&(bu(this,"labels",s,a),bu(this,"annotations",s,r)))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new Sr}};Gp.className="LineSeries",Gp.type="line";var zp={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:Gp,defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{__extends__:Xe,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:He,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:qe,color:Ze,formatter:void 0}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:t=>{const{marker:e}=mu(t);return{stroke:e.fill,marker:e}}},Wp=class extends _r{constructor(){super(...arguments),this.placement="top"}};x([Yn(Oa)],Wp.prototype,"placement",2);var Vp=class extends Ld{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new Cu,this.label=new Wp,this.tooltip=new Ru}};x([Yn(Jn)],Vp.prototype,"xKey",2),x([Yn(Jn)],Vp.prototype,"yKey",2),x([Yn(Jn,{optional:!0})],Vp.prototype,"labelKey",2),x([Yn(Jn,{optional:!0})],Vp.prototype,"colorKey",2),x([Yn(Jn,{optional:!0})],Vp.prototype,"xName",2),x([Yn(Jn,{optional:!0})],Vp.prototype,"yName",2),x([Yn(Jn,{optional:!0})],Vp.prototype,"labelName",2),x([Yn(Jn,{optional:!0})],Vp.prototype,"colorName",2),x([Yn(ma,{optional:!0})],Vp.prototype,"colorDomain",2),x([Yn(ga)],Vp.prototype,"colorRange",2),x([Yn(Jn,{optional:!0})],Vp.prototype,"title",2),x([Yn(Hn)],Vp.prototype,"marker",2),x([Yn(Hn)],Vp.prototype,"label",2),x([Yn(Hn)],Vp.prototype,"tooltip",2);var Kp=class t extends Rd{constructor(t){super({moduleCtx:t,directionKeys:Dd,directionNames:Md,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Ou,label:ku}}),this.properties=new Vp,this.colorScale=new Rp}processData(t){return S(this,null,(function*(){var e;if(!this.properties.isValid()||null==this.data)return;const{isContinuousX:i,isContinuousY:s}=this.isContinuous(),{xKey:n,yKey:a,labelKey:r,colorKey:o,colorDomain:l,colorRange:h}=this.properties,{dataModel:c,processedData:d}=yield this.requestDataModel(t,this.data,{props:[Mc(this,n,i,{id:"xKey-raw"}),Mc(this,a,s,{id:"yKey-raw"}),...r?[Mc(this,r,!1,{id:"labelKey-raw"})]:[],Cc(this,n,i,{id:"xValue"}),Cc(this,a,s,{id:"yValue"}),...o?[Cc(this,o,!0,{id:"colorValue"})]:[],...r?[Cc(this,r,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(o){const t=c.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=null!=(e=l??d.domain.values[t])?e:[],this.colorScale.range=h,this.colorScale.update()}this.animationState.transition("updateData")}))}getSeriesDomain(t){const{dataModel:e,processedData:i}=this;if(!i||!e)return[];const s="x"===t?"xValue":"yValue",n=e.resolveProcessedDataDefById(this,s),a=e.getDomain(this,s,"value",i);if("value"===(null==n?void 0:n.def.type)&&"category"===(null==n?void 0:n.def.valueType))return a;const r=this.axes[t];return rh(hs(a),r)}createNodeData(){return S(this,null,(function*(){var e,i,s;const{axes:n,dataModel:a,processedData:r,colorScale:o}=this,{xKey:l,yKey:h,labelKey:c,colorKey:d,xName:u,yName:p,labelName:g,marker:m,label:y,visible:v}=this.properties,{placement:x}=y,S=yd(m.shape),k=n.x,w=n.y;if(!(a&&r&&v&&k&&w))return[];const D=a.resolveProcessedDataIndexById(this,"xValue").index,M=a.resolveProcessedDataIndexById(this,"yValue").index,C=d?a.resolveProcessedDataIndexById(this,"colorValue").index:-1,L=c?a.resolveProcessedDataIndexById(this,"labelValue").index:-1,R=k.scale,T=w.scale,A=(null!=(e=R.bandwidth)?e:0)/2,E=(null!=(i=T.bandwidth)?i:0)/2,N=[],O=y.getFont();for(const{values:t,datum:b}of null!=(s=r.data)?s:[]){const e=t[D],i=t[M],s=R.convert(e)+A,n=T.convert(i)+E,a=this.getLabelText(y,{value:c?t[L]:i,datum:b,xKey:l,yKey:h,labelKey:c,xName:u,yName:p,labelName:g}),r=Ir.getTextSize(a,O),v=d?o.convert(t[C]):void 0;N.push({series:this,itemId:h,yKey:h,xKey:l,datum:b,xValue:e,yValue:i,capDefaults:{lengthRatioMultiplier:m.getDiameter(),lengthMax:1/0},point:{x:s,y:n,size:m.size},midPoint:{x:s,y:n},fill:v,label:f({text:a},r),marker:S,placement:x})}return[{itemId:h,nodeData:N,labelData:N,scales:b(t.prototype,this,"calculateScaling").call(this),visible:this.visible}]}))}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var t;return null==(t=this.contextNodeData)?void 0:t.reduce(((t,e)=>t.concat(e.labelData)),[])}markerFactory(){const{shape:t}=this.properties.marker;return new(yd(t))}updateMarkerSelection(t){return S(this,null,(function*(){const{nodeData:e,markerSelection:i}=t;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?e:[])}))}updateMarkerNodes(t){return S(this,null,(function*(){const{markerSelection:e,isHighlight:i}=t,{xKey:s,yKey:n,labelKey:a,marker:r,highlightStyle:o}=this.properties,l=jt(i&&o.item,r.getStyle());e.each(((t,e)=>{this.updateMarkerStyle(t,r,{datum:e,highlighted:i,xKey:s,yKey:n,labelKey:a},l)})),i||r.markClean()}))}updateLabelSelection(t){return S(this,null,(function*(){var e,i;const s=this.isLabelEnabled()&&null!=(i=null==(e=this.chart)?void 0:e.placeLabels().get(this))?i:[];return t.labelSelection.update(s.map((t=>{let{datum:e,x:i,y:s}=t;return m(f({},e),{point:{x:i,y:s,size:e.point.size},placement:"top"})})),(t=>{t.pointerEvents=1}))}))}updateLabelNodes(t){return S(this,null,(function*(){const{label:e}=this.properties;t.labelSelection.each(((t,i)=>{var s,n,a,r;t.text=i.label.text,t.fill=e.color,t.x=null!=(n=null==(s=i.point)?void 0:s.x)?n:0,t.y=null!=(r=null==(a=i.point)?void 0:a.y)?r:0,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.fontSize=e.fontSize,t.fontFamily=e.fontFamily,t.textAlign="left",t.textBaseline="top"}))}))}getTooltipHtml(t){const e=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!e||!i)return"";const{xKey:s,yKey:n,labelKey:a,xName:r,yName:o,labelName:l,title:h=o,marker:c,tooltip:d}=this.properties,{datum:u,xValue:p,yValue:g,label:m}=t,y=jt({fill:t.fill,strokeWidth:this.getStrokeWidth(c.strokeWidth)},c.getStyle()),{fill:v="gray"}=this.getMarkerStyle(c,{datum:t,highlighted:!1,xKey:s,yKey:n,labelKey:a},y),x=xu(e.formatDatum(p)),b=xu(i.formatDatum(g));let S=`<b>${xu(r??s)}</b>: ${x}<br><b>${xu(o??n)}</b>: ${b}`;return a&&(S=`<b>${xu(l??a)}</b>: ${xu(m.text)}<br>`+S),d.toTooltipHtml({title:h,content:S,backgroundColor:v},f({datum:u,xKey:s,xName:r,yKey:n,yName:o,labelKey:a,labelName:l,title:h,color:v,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(t){var e,i,s,n,a,r;const{yKey:o,yName:l,title:h,marker:c,visible:d}=this.properties,{fill:u,stroke:p,fillOpacity:g,strokeOpacity:f,strokeWidth:m}=c;return null!=(e=this.data)&&e.length&&this.properties.isValid()&&"category"===t?[{legendType:"category",id:this.id,itemId:o,seriesId:this.id,enabled:d,label:{text:null!=(i=h??l)?i:o},marker:{shape:c.shape,fill:null!=(n=null!=(s=c.fill)?s:u)?n:"rgba(0, 0, 0, 0)",stroke:null!=(r=null!=(a=c.stroke)?a:p)?r:"rgba(0, 0, 0, 0)",fillOpacity:g??1,strokeOpacity:f??1,strokeWidth:m??0}}]:[]}animateEmptyUpdateReady(t){const{markerSelections:e,labelSelections:i,annotationSelections:s}=t;Eu(this,this.ctx.animationManager,e),bu(this,"labels",this.ctx.animationManager,i),bu(this,"annotations",this.ctx.animationManager,s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new Sr}};Kp.className="ScatterSeries",Kp.type="scatter";var Yp={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:Kp,defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{__extends__:Xe,tooltip:{position:{type:"node"}},marker:{__extends__:He,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:qe,color:Ze}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:mu};function $p(t,e,i){const s=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:a}=i;if(i.startAngle===i.endAngle||s<Math.min(n,a)||s>Math.max(n,a))return!1;const r=_n(i.startAngle),o=_n(i.endAngle),l=Math.atan2(e,t);return r<o?l<=o&&l>=r:l<=o&&l>=-Math.PI||l>=r&&l<=Math.PI}function Up(t,e){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:a}=e,r={x:a*Math.cos(i),y:a*Math.sin(i)},o={x:a*Math.cos(s),y:a*Math.sin(s)},l=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},h=0===n?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return Xc(t.start.x,t.start.y,t.end.x,t.end.y,r.x,r.y,l.x,l.y)||Xc(t.start.x,t.start.y,t.end.x,t.end.y,o.x,o.y,h.x,h.y)||qc(0,0,a,i,s,!0,t.start.x,t.start.y,t.end.x,t.end.y)}function Xp(t,e){const i={x:t.x,y:t.y},s={x:t.x+t.width,y:t.y},n={x:t.x,y:t.y+t.height},a={x:t.x+t.width,y:t.y+t.height};return Up({start:i,end:s},e)||Up({start:n,end:a},e)}var Hp=class extends Qc{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const t=this.outerRadius;return new Qs(this.centerX-t,this.centerY-t,2*t,2*t)}updatePath(){const t=this.path,{angleOffset:e,inset:i}=this,s=this.startAngle+e,n=this.endAngle+e,a=s<=n?n-s:2*Math.PI-(s-n),r=Math.max(Math.min(this.innerRadius,this.outerRadius)+i,0),o=Math.max(Math.max(this.innerRadius,this.outerRadius)-i,0),l=a>=2*Math.PI,h=this.centerX,c=this.centerY;if(t.clear(),l)t.arc(h,c,o,s,n),r>i&&(t.moveTo(h+r*Math.cos(n),c+r*Math.sin(n)),t.arc(h,c,r,n,s,!0));else{const e=r>0?i/r:0,l=o>0?i/o:0;if(a<2*l)return;const d=r<=i||a<2*e;if(d){const e=a<.5*Math.PI?i*(1+Math.cos(a))/Math.sin(a):NaN;let n;n=e>0&&e<o?Math.max(Math.hypot(i,e),r):r;const l=s+.5*a;t.moveTo(h+n*Math.cos(l),c+n*Math.sin(l))}else t.moveTo(h+r*Math.cos(s+e),c+r*Math.sin(s+e));t.arc(h,c,o,s+l,n-l),d||(r>0?t.arc(h,c,r,n-e,s+e,!0):t.lineTo(h,c))}t.closePath(),this.dirtyPath=!1}isPointInPath(t,e){const{angleOffset:i}=this,s=this.startAngle+i,n=this.endAngle+i,a=Math.min(this.innerRadius,this.outerRadius),r=Math.max(this.innerRadius,this.outerRadius),o=this.transformPoint(t,e);return $p(o.x,o.y,{startAngle:s,endAngle:n,innerRadius:a,outerRadius:r})}};Hp.className="Sector",x([Jc()],Hp.prototype,"centerX",2),x([Jc()],Hp.prototype,"centerY",2),x([Jc()],Hp.prototype,"innerRadius",2),x([Jc()],Hp.prototype,"outerRadius",2),x([Jc()],Hp.prototype,"startAngle",2),x([Jc()],Hp.prototype,"endAngle",2),x([Jc()],Hp.prototype,"angleOffset",2),x([Jc()],Hp.prototype,"inset",2);var jp=class extends Jo{constructor(){super(...arguments),this.showInLegend=!1}};x([Yn(qn)],jp.prototype,"showInLegend",2);var qp=class extends _r{constructor(){super(...arguments),this.margin=2}set(t,e){return super.set(t)}};x([Yn(Jn)],qp.prototype,"text",2),x([Yn(Qn)],qp.prototype,"margin",2);var Zp=class extends me{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};x([Yn(pa)],Zp.prototype,"fill",2),x([Yn(ia)],Zp.prototype,"fillOpacity",2);var Jp=class extends _r{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};x([Yn(ea)],Jp.prototype,"offset",2),x([Yn(sa)],Jp.prototype,"minAngle",2),x([Yn(ea)],Jp.prototype,"minSpacing",2),x([Yn(ea)],Jp.prototype,"maxCollisionOffset",2),x([Yn(qn)],Jp.prototype,"avoidCollisions",2);var Qp=class extends _r{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};x([Yn(Qn)],Qp.prototype,"positionOffset",2),x([Yn(ia)],Qp.prototype,"positionRatio",2);var tg=class extends me{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};x([Yn(ga,{optional:!0})],tg.prototype,"colors",2),x([Yn(ea)],tg.prototype,"length",2),x([Yn(ea)],tg.prototype,"strokeWidth",2);var eg=class extends wd{constructor(){super(...arguments),this.fills=Object.values(Pe),this.strokes=Object.values(Be),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new ye(qp),this.title=new jp,this.innerCircle=new Zp,this.shadow=new Du,this.calloutLabel=new Jp,this.sectorLabel=new Qp,this.calloutLine=new tg,this.tooltip=new Ru,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}isValid(){const t=super.isValid();return null==this.innerRadiusRatio&&null==this.innerRadiusOffset?(O.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):t}};function ig(t,e,i,s){const n=[i.convert(0),i.convert(1)],a=[s.convert(0),s.convert(1)],r=Math.PI/-2+Gn(e);return{nodes:{toFn:(t,e,i,s)=>{let{prevLive:a}=s;var o,l;let{startAngle:h,endAngle:c,innerRadius:d,outerRadius:u}=e;const{stroke:p,fill:g}=e.sectorFormat;if("removed"===i&&a?(h=null==(o=a.datum)?void 0:o.endAngle,c=null==(l=a.datum)?void 0:l.endAngle):"removed"===i&&!a&&(h=r,c=r),"removed"===i){const t=(t=>{let{radius:e}=t;return{innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*e}})(e);d=t.innerRadius,u=t.outerRadius}return{startAngle:h,endAngle:c,outerRadius:u,innerRadius:d,stroke:p,fill:g}},fromFn:(e,i,s,n)=>{let{prevFromProps:o}=n;var l,h,c,d,u,p;let{startAngle:g,endAngle:f,innerRadius:m,outerRadius:y}=e,{fill:v,stroke:x}=i.sectorFormat;if("unknown"===s||"added"===s&&!o?(g=r,f=r,m=i.innerRadius,y=i.outerRadius):"added"===s&&o&&(g=null!=(l=o.endAngle)?l:r,f=null!=(h=o.endAngle)?h:r,m=null!=(c=o.innerRadius)?c:i.innerRadius,y=null!=(d=o.outerRadius)?d:i.outerRadius),"added"===s&&!t){const t=(t=>{let{radius:e}=t;return{innerRadius:a[0],outerRadius:a[0]+(a[1]-a[0])*e}})(i);m=t.innerRadius,y=t.outerRadius}return"updated"===s&&(v=null!=(u=e.fill)?u:v,x=null!=(p=e.stroke)?p:x),{startAngle:g,endAngle:f,innerRadius:m,outerRadius:y,fill:v,stroke:x,phase:"initial"}}},innerCircle:{fromFn:(t,e)=>{var i,s,n;return{size:null!=(n=null!=(s=null==(i=t.previousDatum)?void 0:i.radius)?s:t.size)?n:0,phase:"initial"}},toFn:(t,e)=>{var i;return{size:null!=(i=e.radius)?i:0}}}}}function sg(t,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}x([Yn(Jn)],eg.prototype,"angleKey",2),x([Yn(Jn,{optional:!0})],eg.prototype,"angleName",2),x([Yn(Jn,{optional:!0})],eg.prototype,"radiusKey",2),x([Yn(Jn,{optional:!0})],eg.prototype,"radiusName",2),x([Yn(ea,{optional:!0})],eg.prototype,"radiusMin",2),x([Yn(ea,{optional:!0})],eg.prototype,"radiusMax",2),x([Yn(Jn,{optional:!0})],eg.prototype,"calloutLabelKey",2),x([Yn(Jn,{optional:!0})],eg.prototype,"calloutLabelName",2),x([Yn(Jn,{optional:!0})],eg.prototype,"sectorLabelKey",2),x([Yn(Jn,{optional:!0})],eg.prototype,"sectorLabelName",2),x([Yn(Jn,{optional:!0})],eg.prototype,"legendItemKey",2),x([Yn(ga)],eg.prototype,"fills",2),x([Yn(ga)],eg.prototype,"strokes",2),x([Yn(ia)],eg.prototype,"fillOpacity",2),x([Yn(ia)],eg.prototype,"strokeOpacity",2),x([Yn(ka)],eg.prototype,"lineDash",2),x([Yn(ea)],eg.prototype,"lineDashOffset",2),x([Yn(Zn,{optional:!0})],eg.prototype,"formatter",2),x([Yn(sa)],eg.prototype,"rotation",2),x([Yn(Qn)],eg.prototype,"outerRadiusOffset",2),x([Yn(ia)],eg.prototype,"outerRadiusRatio",2),x([Yn(Qn,{optional:!0})],eg.prototype,"innerRadiusOffset",2),x([Yn(ia,{optional:!0})],eg.prototype,"innerRadiusRatio",2),x([Yn(ea)],eg.prototype,"strokeWidth",2),x([Yn(ea,{optional:!0})],eg.prototype,"sectorSpacing",2),x([Yn(xa)],eg.prototype,"innerLabels",2),x([Yn(Hn)],eg.prototype,"title",2),x([Yn(Hn)],eg.prototype,"innerCircle",2),x([Yn(Hn)],eg.prototype,"shadow",2),x([Yn(Hn)],eg.prototype,"calloutLabel",2),x([Yn(Hn)],eg.prototype,"sectorLabel",2),x([Yn(Hn)],eg.prototype,"calloutLine",2),x([Yn(Hn)],eg.prototype,"tooltip",2),x([Yn(Jn,{optional:!0})],eg.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var ng=class extends vd{constructor(t){var e=t,{useLabelLayer:i=!1,pickModes:s=[0],canHaveAxes:n=!1,animationResetFns:a}=e,r=y(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(m(f({},r),{useLabelLayer:i,pickModes:s,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:n})),this.itemGroup=this.contentGroup.appendChild(new Sr),this.itemSelection=Oo.select(this.itemGroup,(()=>this.nodeFactory()),!1),this.labelSelection=Oo.select(this.labelGroup,Ir,!1),this.highlightSelection=Oo.select(this.highlightGroup,(()=>this.nodeFactory())),this.centerX=0,this.centerY=0,this.radius=0,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=a,this.animationState=new go("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),highlightMarkers:t=>this.animateReadyHighlightMarkers(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}getLabelData(){return[]}computeLabelsBBox(t,e){return null}resetAllAnimation(){var t;const{item:e,label:i}=null!=(t=this.animationResetFns)?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&po([this.itemSelection,this.highlightSelection],e),i&&po([this.labelSelection],i),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(t){var e;const{item:i}=null!=(e=this.animationResetFns)?e:{};i&&po([this.highlightSelection],i)}animateReadyHighlightMarkers(t){}animateReadyResize(t){this.resetAllAnimation()}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(t){return{seriesRect:t}}},ag=class extends Oc{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},rg=class extends ng{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:sg,label:ku}}),this.properties=new eg,this.previousRadiusScale=new Id,this.radiusScale=new Id,this.backgroundGroup=this.rootGroup.appendChild(new Sr({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Sr({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new ed),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new ed),this.innerCircleGroup=this.backgroundGroup.appendChild(new Sr({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=ag,this.angleScale=new Id,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((t=>t+Math.PI/2));const e=new Sr({name:"pieCalloutLabels"}),i=new Sr({name:"pieSectorLabels"}),s=new Sr({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=Oo.select(e,Sr),this.sectorLabelSelection=Oo.select(i,Ir),this.innerLabelsSelection=Oo.select(s,Ir),this.innerCircleSelection=Oo.select(this.innerCircleGroup,ed)}addChartEventListeners(){var t;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",(t=>this.onLegendItemClick(t))))}get visible(){return super.visible&&(0===this.seriesItemEnabled.length||this.seriesItemEnabled.some((t=>t)))}nodeFactory(){return new Hp}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}processData(t){return S(this,null,(function*(){var e,i,s,n,a;if(null==this.data||!this.properties.isValid())return;let{data:r}=this;const{visible:o,seriesItemEnabled:l}=this,{angleKey:h,radiusKey:c,calloutLabelKey:d,sectorLabelKey:u,legendItemKey:p}=this.properties,g=!this.ctx.animationManager.isSkipped(),y=[],v=[];p?y.push(Mc(this,p,!1,{id:"legendItemKey"})):d?y.push(Mc(this,d,!1,{id:"calloutLabelKey"})):u&&y.push(Mc(this,u,!1,{id:"sectorLabelKey"})),c&&v.push(Lc(this,c,{id:"radiusValue",min:null!=(e=this.properties.radiusMin)?e:0,max:this.properties.radiusMax}),Cc(this,c,!0,{id:"radiusRaw"}),fc(this,{id:"radiusValue"},[0,1],1,null!=(i=this.properties.radiusMin)?i:0,this.properties.radiusMax)),d&&v.push(Cc(this,d,!1,{id:"calloutLabelValue"})),u&&v.push(Cc(this,u,!1,{id:"sectorLabelValue"})),p&&v.push(Cc(this,p,!1,{id:"legendItemValue"})),g&&this.processedData&&y.length>0&&v.push(bc(this.processedData)),v.push(mc(this)),r=r.map(((t,e)=>o&&l[e]?t:m(f({},t),{[h]:0}))),yield this.requestDataModel(t,r,{props:[...y,Ac(this,h,!0,{id:"angleValue",onlyPositive:!0}),Cc(this,h,!0,{id:"angleRaw"}),fc(this,{id:"angleValue"},[0,1],0,0),...v]});for(const t of null!=(a=null==(n=null==(s=this.processedData)?void 0:s.defs)?void 0:n.values)?a:[]){const{id:e,missing:i,property:s}=t,n=lh(this,i);"angleRaw"!==e&&n>0&&O.warnOnce(`no value was found for the key '${String(s)}' on ${n} data element${n>1?"s":""}`)}this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return S(this,null,(function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return S(this,null,(function*(){const{id:t,processedData:e,dataModel:i,angleScale:s}=this,{rotation:n,innerRadiusRatio:a}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,[{itemId:t,nodeData:[],labelData:[]}];if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:r,radiusIdx:o,calloutLabelIdx:l,sectorLabelIdx:h,legendItemIdx:c}=this.getProcessedDataIndexes(i);let d=0,u=0;const p=e.data.map(((t,e)=>{var i;const{datum:a,values:p}=t,g=p[r],m=s.convert(d)+Gn(n);d=g,u+=g;const y=s.convert(d)+Gn(n),v=Math.abs(y-m),x=m+v/2,b=p[r+1],S=o>=0&&null!=(i=p[o])?i:1,k=o>=0?p[o+1]:void 0,w=c>=0?p[c]:void 0,D=this.getLabels(a,x,v,!0,p[l],p[h],w),M=this.getSectorFormat(a,e,!1);return f({itemId:e,series:this,datum:a,index:e,angleValue:b,midAngle:x,midCos:Math.cos(x),midSin:Math.sin(x),startAngle:m,endAngle:y,sectorFormat:M,radiusValue:k,radius:S,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(S),0),legendItemValue:w},D)}));return this.zerosumOuterRing.visible=0===u,this.zerosumInnerRing.visible=0===u&&null!=a&&1!==a&&a>0,[{itemId:t,nodeData:p,labelData:p}]}))}getLabels(t,e,i,s,n,a,r){const{calloutLabel:o,sectorLabel:l,legendItemKey:h}=this.properties,c=!s||o.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!c&&!d&&!h)return{};const u={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return c&&i>Gn(o.minAngle)&&(p.calloutLabel=m(f({},this.getTextAlignment(e)),{text:this.getLabelText(o,m(f({},u),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),d&&(p.sectorLabel={text:this.getLabelText(l,m(f({},u),{value:a}))}),null!=h&&null!=r&&(p.legendItem={key:h,text:r}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=_n(t)- -3*Math.PI/4;return e[Hs(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var s,n,a,r,o;const{callbackCache:l,highlightManager:h}=this.ctx,{angleKey:c,radiusKey:d,fills:u,strokes:p,formatter:g,sectorSpacing:f,__BACKGROUND_COLOR_DO_NOT_USE:m}=this.properties,y=h.getActiveHighlight(),v=i&&(null==y?void 0:y.series)===this&&e===y.itemId;let x=p[e%p.length];null==f&&null==x&&(x=m);const{fill:b,fillOpacity:S,stroke:k,strokeWidth:w,strokeOpacity:D}=jt(v&&this.properties.highlightStyle.item,{fill:u.length>0?u[e%u.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:x,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let M;return g&&(M=l.call(g,{datum:t,angleKey:c,radiusKey:d,fill:b,stroke:k,fills:u,strokes:p,strokeWidth:w,highlighted:v,seriesId:this.id})),{fill:null!=(s=null==M?void 0:M.fill)?s:b,fillOpacity:null!=(n=null==M?void 0:M.fillOpacity)?n:S,stroke:null!=(a=null==M?void 0:M.stroke)?a:k,strokeWidth:null!=(r=null==M?void 0:M.strokeWidth)?r:w,strokeOpacity:null!=(o=null==M?void 0:M.strokeOpacity)?o:D}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:t,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*t+e,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map((t=>{var e=t,{radius:i}=e,s=y(e,["radius"]);return m(f({},s),{radius:i,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(i),0)})}))}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!=(e=null==(t=this.properties.title)?void 0:t.spacing)?e:0))-Math.max(0,-i)}update(t){return S(this,arguments,(function(t){var e=this;let{seriesRect:i}=t;return function*(){const{title:t}=e.properties,s={seriesRectWidth:null==i?void 0:i.width,seriesRectHeight:null==i?void 0:i.height},n=null!=be(e.nodeDataDependencies,s);if(n&&(e._nodeDataDependencies=s),yield e.maybeRefreshNodeData(),e.updateTitleNodes(),e.updateRadiusScale(n),e.contentGroup.translationX=e.centerX,e.contentGroup.translationY=e.centerY,e.highlightGroup.translationX=e.centerX,e.highlightGroup.translationY=e.centerY,e.backgroundGroup.translationX=e.centerX,e.backgroundGroup.translationY=e.centerY,e.labelGroup&&(e.labelGroup.translationX=e.centerX,e.labelGroup.translationY=e.centerY),t){const i=e.getTitleTranslationY(),s=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(i)&&!e.bboxIntersectsSurroundingSeries(s,0,i),t.node.translationY=isFinite(i)?i:0}for(const i of[e.zerosumInnerRing,e.zerosumOuterRing])i.fillOpacity=0,i.stroke=e.properties.calloutLabel.color,i.strokeWidth=1,i.strokeOpacity=1;e.updateNodeMidPoint(),yield e.updateSelections(),yield e.updateNodes(i)}()}))}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&(null==(t=this.labelGroup)||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach((t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}}))}updateSelections(){return S(this,null,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return S(this,null,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,a=(t,e)=>{let i=this.nodeData;e&&(i=i.map((t=>m(f({},t),{sectorFormat:f({},t.sectorFormat)})))),t.update(i,void 0,(t=>this.getDatumId(t))),this.ctx.animationManager.isSkipped()&&t.cleanup()};a(t,!1),a(e,!0),i.update(this.nodeData,(t=>{const e=new Io;e.tag=0,e.pointerEvents=1,t.appendChild(e);const i=new Ir;i.tag=1,i.pointerEvents=1,t.appendChild(i)})),s.update(this.nodeData,(t=>{t.pointerEvents=1})),n.update(this.properties.innerLabels,(t=>{t.pointerEvents=1}))}))}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius());e=Math.ceil(2*t+1)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){return S(this,null,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((t,e)=>{let{radius:i}=e;var s,n;t.setProperties({fill:null==(s=this.properties.innerCircle)?void 0:s.fill,opacity:null==(n=this.properties.innerCircle)?void 0:n.fillOpacity,size:i})}));const s=(t,e,i,s)=>{const n=this.getSectorFormat(e.datum,e.itemId,s);e.sectorFormat.fill=n.fill,e.sectorFormat.stroke=n.stroke;const a=this.ctx.animationManager.isSkipped();a&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(s||a)&&(t.fill=n.fill,t.stroke=n.stroke),t.strokeWidth=n.strokeWidth,t.fillOpacity=n.fillOpacity,t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.fillShadow=this.properties.shadow,t.inset=null!=this.properties.sectorSpacing?(this.properties.sectorSpacing+(null!=n.stroke?n.strokeWidth:0))/2:0,t.lineJoin=null!=this.properties.sectorSpacing?"miter":"round"};this.itemSelection.each(((t,e,i)=>s(t,e,0,!1))),this.highlightSelection.each(((t,i,n)=>{const a=(null==e?void 0:e.series)===this&&t.datum.itemId===e.itemId;s(t,i,0,!0),t.visible=a})),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,s=e.strokeWidth,n=null!=(t=e.colors)?t:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((t,e)=>{var r;const o=t.datum,{calloutLabel:l,outerRadius:h}=o;if(null!=l&&l.text&&!l.hidden&&0!==h){t.visible=!0,t.strokeWidth=s,t.stroke=n[e%n.length],t.fill=void 0;const c=o.midCos*h,d=o.midSin*h;let u=o.midCos*(h+i),p=o.midSin*(h+i);if((null!=(r=l.collisionTextAlign)?r:0!==l.collisionOffsetY)&&null!=l.box){const t=l.box;let e=u,i=p;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),p<t.y?i=t.y:p>t.y+t.height&&(i=t.y+t.height);const s=e-u,n=i-p,r=Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),o=r-a;o>0&&(u+=s*o/r,p+=n*o/r)}t.x1=c,t.y1=d,t.x2=u,t.y2=p}else t.visible=!1}))}getLabelOverflow(t,e,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,a=i.y-this.centerY,r=i.y+i.height-this.centerY;let o=1;e.x+1<s?o=(e.x+e.width-s)/e.width:e.x+e.width-1>n&&(o=(n-e.x)/e.width);const l=e.y+1<a||e.y+e.height-1>r;return{textLength:1===o?t.length:Math.floor(t.length*o)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{surroundingRadius:s}=this;if(null==s)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=p(s,2);return n.some((t=>p(t.x,2)+p(t.y,2)>a))}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),r=this.nodeData,o=this.nodeData.filter((t=>!(t=>!t.calloutLabel||0===t.outerRadius)(t)));if(o.forEach((t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),o.length<=1)return;const l=o.filter((t=>t.midCos<0)).sort(((t,e)=>t.midSin-e.midSin)),h=o.filter((t=>t.midCos>=0)).sort(((t,e)=>t.midSin-e.midSin)),c=o.filter((t=>{var e;return t.midSin<0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),d=o.filter((t=>{var e;return t.midSin>=0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),u=new Ir,p=t=>{var e;const n=t.calloutLabel;if(null==n)return new Qs(0,0,0,0);const a=t.outerRadius+i.length+s,r=t.midCos*a,o=t.midSin*a+n.collisionOffsetY;return u.text=n.text,u.x=r,u.y=o,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:null!=(e=n.collisionTextAlign)?e:n.textAlign,textBaseline:n.textBaseline}),u.computeBBox()},g=(t,e,i)=>{const s=p(t).grow(n/2),a=p(e).grow(n/2);if(s.x<a.x+a.width&&s.x+s.width>a.x&&("to-top"===i?s.y<a.y+a.height:s.y+s.height>a.y)){const t="to-top"===i?s.y-a.y-a.height:s.y+s.height-a.y;e.calloutLabel.collisionOffsetY=t}},f=t=>{const e=t.slice().sort(((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin)))[0],i=t.indexOf(e);for(let s=i-1;s>=0;s--){const e=t[s+1],i=t[s];g(e,i,"to-top")}for(let s=i+1;s<t.length;s++){const e=t[s-1],i=t[s];g(e,i,"to-bottom")}},m=t=>{const e=o.some((t=>0!==t.calloutLabel.collisionOffsetY)),i=t.map((t=>p(t))),s=i.map((t=>t.clone().grow(n/2)));let l=!1;for(let n=0;n<s.length&&!l;n++){const e=s[n];for(let i=n+1;i<t.length;i++){const t=s[i];if(e.collidesBBox(t)){l=!0;break}}}const h=r.map((t=>{const{startAngle:e,endAngle:i,outerRadius:s}=t;return{startAngle:e,endAngle:i,innerRadius:a,outerRadius:s}})),c=i.some((t=>h.some((e=>Xp(t,e)))));!l&&!e&&!c||t.filter((t=>"center"===t.calloutLabel.textAlign)).forEach((t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};f(l),f(h),m(c),m(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:r}=i,o=new Ir;this.calloutLabelSelection.selectByTag(1).forEach((s=>{var l;const{datum:h}=s,c=h.calloutLabel,d=e.convert(h.radius),u=Math.max(0,d);if(null==c||!c.text||0===u||c.hidden)return void(s.visible=!1);const p=u+n+a,g=h.midCos*p,f=h.midSin*p+c.collisionOffsetY,m={textAlign:null!=(l=c.collisionTextAlign)?l:c.textAlign,textBaseline:c.textBaseline};o.text=c.text,o.x=g,o.y=f,o.setFont(this.properties.calloutLabel),o.setAlign(m);const y=o.computeBBox();let v=c.text,x=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,y,t);v=c.text.length===e?c.text:`${c.text.substring(0,e)}\u2026`,x=!i}s.text=v,s.x=g,s.y=f,s.setFont(this.properties.calloutLabel),s.setAlign(m),s.fill=r,s.visible=x}))}computeLabelsBBox(t,e){return S(this,null,(function*(){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:r,minSpacing:o}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],h=new Ir;let c;const{title:d}=this.properties;if(null!=d&&d.text&&d.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(h.text=d.text,h.x=0,h.y=t,h.setFont(d),h.setAlign({textBaseline:"bottom",textAlign:"center"}),c=h.computeBBox(),l.push(c))}return this.nodeData.forEach((i=>{var s;const d=i.calloutLabel;if(!d||0===i.outerRadius)return null;const u=i.outerRadius+n+a,p=i.midCos*u,g=i.midSin*u+d.collisionOffsetY;h.text=d.text,h.x=p,h.y=g,h.setFont(this.properties.calloutLabel),h.setAlign({textAlign:null!=(s=d.collisionTextAlign)?s:d.textAlign,textBaseline:d.textBaseline});const f=h.computeBBox();if(d.box=f,Math.abs(d.collisionOffsetY)>r)d.hidden=!0;else{if(c){const t=e.y-this.centerY,i=new Qs(c.x-o,t,c.width+2*o,c.y+c.height+o-t);if(f.collidesBBox(i))return void(d.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:s}=this.getLabelOverflow(d.text,f,e),n=d.text.length>2&&t<2;if(i||n||s)return void(d.hidden=!0)}d.hidden=!1,l.push(f)}})),0===l.length?null:Qs.merge(l)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:r,positionRatio:o,color:l}=this.properties.sectorLabel;this.sectorLabelSelection.each(((t,h)=>{const{sectorLabel:c,outerRadius:d}=h;let u=!1;if(c&&0!==d){const p=e*(1-o)+d*o+r;t.fill=l,t.fontStyle=s,t.fontWeight=n,t.fontSize=i,t.fontFamily=a,t.text=c.text,t.x=h.midCos*p,t.y=h.midSin*p,t.textAlign="center",t.textBaseline="middle";const g=t.computeBBox(),f=[[g.x,g.y],[g.x+g.width,g.y],[g.x+g.width,g.y+g.height],[g.x,g.y+g.height]],{startAngle:m,endAngle:y}=h,v={startAngle:m,endAngle:y,innerRadius:e,outerRadius:d};f.every((t=>{let[e,i]=t;return $p(e,i,v)}))&&(u=!0)}t.visible=u}))}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each(((i,s)=>{const{fontStyle:n,fontWeight:a,fontSize:r,fontFamily:o,color:l}=s;i.fontStyle=n,i.fontWeight=a,i.fontSize=r,i.fontFamily=o,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(s.margin)}));const i=t=>0===t?0:e[t],s=t=>t===e.length-1?0:e[t],n=t.reduce(((t,e,n)=>t+e.height+i(n)+s(n)),0),a=Math.max(...t.map((t=>t.width))),r=this.getInnerRadius(),o=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(r>0?r:this.getOuterRadius()),l=[];for(let h=0,c=-n/2;h<t.length;h++){const e=t[h].height+c+i(h);l.push(e),c=e+s(h)}this.innerLabelsSelection.each(((t,e,i)=>{t.y=l[i],t.visible=o}))}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:a,calloutLabel:r,legendItem:o}=t;return n&&void 0!==o?o.text:i&&i!==e&&void 0!==(null==r?void 0:r.text)?r.text:s&&s!==e&&void 0!==(null==a?void 0:a.text)?a.text:void 0}getTooltipHtml(t){var e;if(!this.properties.isValid())return"";const{datum:i,angleValue:s,sectorFormat:{fill:n}}=t,a=xu(null==(e=this.properties.title)?void 0:e.text),r=Kt(s)?Xs(s):String(s),o=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:a??o,content:a&&o?`${o}: ${r}`:r,backgroundColor:n},{datum:i,title:a,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(t){var e,i,s,n,a;const{visible:r,processedData:o,dataModel:l}=this;if(!l||null==o||!o.data.length||!this.properties.isValid()||"category"!==t)return[];const{angleKey:h,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:u}=this.properties;if(!u&&(!c||c===h)&&(!d||d===h))return[];const{calloutLabelIdx:p,sectorLabelIdx:g,legendItemIdx:f}=this.getProcessedDataIndexes(l),m=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,y=[];for(let v=0;v<o.data.length;v++){const{datum:t,values:e}=o.data[v],l=[];m&&l.push(m);const x=this.getLabels(t,2*Math.PI,2*Math.PI,!1,e[p],e[g],e[f]);if(u&&void 0!==x.legendItem?l.push(x.legendItem.text):c&&c!==h&&void 0!==(null==(i=x.calloutLabel)?void 0:i.text)?l.push(null==(s=x.calloutLabel)?void 0:s.text):d&&d!==h&&void 0!==(null==(n=x.sectorLabel)?void 0:n.text)&&l.push(null==(a=x.sectorLabel)?void 0:a.text),0===l.length)continue;const b=this.getSectorFormat(t,v,!1);y.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:r&&this.seriesItemEnabled[v],label:{text:l.join(" - ")},marker:{fill:b.fill,stroke:b.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:null!=u?t[u]:void 0})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendItemName:n}=t;s.id===this.id?this.toggleSeriesItem(i,e):null!=n&&this.toggleOtherSeriesItems(n,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;null==(i=this.processedData)||i.data.forEach(((i,n)=>{let{values:a}=i;a[s]===t&&this.toggleSeriesItem(n,e)}))}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=ig(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);En(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),En(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),bu(this,"callout",e,[this.calloutLabelSelection]),bu(this,"sector",e,[this.sectorLabelSelection]),bu(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s,n,a;const{itemSelection:r,highlightSelection:o,processedData:l,radiusScale:h,previousRadiusScale:c}=this,{animationManager:d}=this.ctx,u=null==(t=null==l?void 0:l.reduced)?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!=(e=null==u?void 0:u.moved.size)?e:0),g=(null!=(i=null==l?void 0:l.defs.keys.length)?i:0)>0,f=null==(a=null==(n=null==(s=null==l?void 0:l.reduced)?void 0:s.animationValidation)?void 0:n.uniqueKeys)||a;(!p||!g||!f)&&this.ctx.animationManager.skipCurrentBatch();const m=ig(!1,this.properties.rotation,h,c);En(this.id,"nodes",d,[r,o],m.nodes,((t,e)=>this.getDatumId(e)),u),En(this.id,"innerCircle",d,[this.innerCircleSelection],m.innerCircle),bu(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),bu(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),bu(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,a=ig(!1,this.properties.rotation,i,s);En(this.id,"nodes",n,[t,e],a.nodes),En(this.id,"innerCircle",n,[this.innerCircleSelection],a.innerCircle),Su(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Su(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Su(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,s;const{calloutLabelKey:n,sectorLabelKey:a,legendItemKey:r}=this.properties;if(null!=(s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.animationValidation)&&s.uniqueKeys){if(r)return t[r];if(n)return t[n];if(a)return t[a]}}getDatumId(t){const{index:e}=t,i=this.getDatumIdFromData(t.datum);return null!=i?String(i):`${e}`}onDataChange(){var t;const{data:e,seriesItemEnabled:i}=this;this.seriesItemEnabled=null!=(t=null==e?void 0:e.map(((t,e)=>{var s;return null==(s=i[e])||s})))?t:[]}};rg.className="DonutSeries",rg.type="donut";var og={series:{__extends__:Xe,title:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:14,fontFamily:qe,color:ti,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:qe,color:Ze,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:qe,color:Qe,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,shadow:{enabled:!1,color:ai,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:qe,color:Ze,margin:2},__BACKGROUND_COLOR_DO_NOT_USE:ni}},lg=t=>{let{takeColors:e,colorsCount:i,userPalette:s}=t;const{fills:n,strokes:a}=e(i);return{fills:n,strokes:s?a:[],calloutLine:{colors:a}}},hg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:rg,themeTemplate:og,paletteFactory:lg},cg=class extends Jo{constructor(){super(...arguments),this.showInLegend=!1}};x([Yn(qn)],cg.prototype,"showInLegend",2);var dg=class extends _r{set(t,e){return super.set(t)}};x([Ns("Use a Donut Series instead"),Yn(Jn,{optional:!0})],dg.prototype,"text",2),x([Ns("Use a Donut Series instead"),Yn(Qn,{optional:!0})],dg.prototype,"margin",2);var ug=class extends me{};x([Ns("Use a Donut Series instead"),Yn(pa,{optional:!0})],ug.prototype,"fill",2),x([Ns("Use a Donut Series instead"),Yn(ia,{optional:!0})],ug.prototype,"fillOpacity",2);var pg=class extends _r{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};x([Yn(ea)],pg.prototype,"offset",2),x([Yn(sa)],pg.prototype,"minAngle",2),x([Yn(ea)],pg.prototype,"minSpacing",2),x([Yn(ea)],pg.prototype,"maxCollisionOffset",2),x([Yn(qn)],pg.prototype,"avoidCollisions",2);var gg=class extends _r{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};x([Yn(Qn)],gg.prototype,"positionOffset",2),x([Yn(ia)],gg.prototype,"positionRatio",2);var fg=class extends me{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};x([Yn(ga,{optional:!0})],fg.prototype,"colors",2),x([Yn(ea)],fg.prototype,"length",2),x([Yn(ea)],fg.prototype,"strokeWidth",2);var mg=class extends wd{constructor(){super(...arguments),this.fills=Object.values(Pe),this.strokes=Object.values(Be),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new ye(dg),this.title=new cg,this.innerCircle=new ug,this.shadow=new Du,this.calloutLabel=new pg,this.sectorLabel=new gg,this.calloutLine=new fg,this.tooltip=new Ru,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}};x([Yn(Jn)],mg.prototype,"angleKey",2),x([Yn(Jn,{optional:!0})],mg.prototype,"angleName",2),x([Yn(Jn,{optional:!0})],mg.prototype,"radiusKey",2),x([Yn(Jn,{optional:!0})],mg.prototype,"radiusName",2),x([Yn(ea,{optional:!0})],mg.prototype,"radiusMin",2),x([Yn(ea,{optional:!0})],mg.prototype,"radiusMax",2),x([Yn(Jn,{optional:!0})],mg.prototype,"calloutLabelKey",2),x([Yn(Jn,{optional:!0})],mg.prototype,"calloutLabelName",2),x([Yn(Jn,{optional:!0})],mg.prototype,"sectorLabelKey",2),x([Yn(Jn,{optional:!0})],mg.prototype,"sectorLabelName",2),x([Yn(Jn,{optional:!0})],mg.prototype,"legendItemKey",2),x([Yn(ga)],mg.prototype,"fills",2),x([Yn(ga)],mg.prototype,"strokes",2),x([Yn(ia)],mg.prototype,"fillOpacity",2),x([Yn(ia)],mg.prototype,"strokeOpacity",2),x([Yn(ka)],mg.prototype,"lineDash",2),x([Yn(ea)],mg.prototype,"lineDashOffset",2),x([Yn(Zn,{optional:!0})],mg.prototype,"formatter",2),x([Yn(sa)],mg.prototype,"rotation",2),x([Yn(Qn)],mg.prototype,"outerRadiusOffset",2),x([Yn(ia)],mg.prototype,"outerRadiusRatio",2),x([Ns("Use a Donut Series instead"),Yn(Qn,{optional:!0})],mg.prototype,"innerRadiusOffset",2),x([Ns("Use a Donut Series instead"),Yn(ia,{optional:!0})],mg.prototype,"innerRadiusRatio",2),x([Yn(ea)],mg.prototype,"strokeWidth",2),x([Yn(ea,{optional:!0})],mg.prototype,"sectorSpacing",2),x([Yn(xa)],mg.prototype,"innerLabels",2),x([Yn(Hn)],mg.prototype,"title",2),x([Yn(Hn)],mg.prototype,"innerCircle",2),x([Yn(Hn)],mg.prototype,"shadow",2),x([Yn(Hn)],mg.prototype,"calloutLabel",2),x([Yn(Hn)],mg.prototype,"sectorLabel",2),x([Yn(Hn)],mg.prototype,"calloutLine",2),x([Yn(Hn)],mg.prototype,"tooltip",2),x([Yn(Jn,{optional:!0})],mg.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var yg=class extends Oc{constructor(t,e,i,s){super(t,e,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},vg=class extends ng{constructor(t){super({moduleCtx:t,useLabelLayer:!0,animationResetFns:{item:sg,label:ku}}),this.properties=new mg,this.previousRadiusScale=new Id,this.radiusScale=new Id,this.backgroundGroup=this.rootGroup.appendChild(new Sr({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new Sr({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new ed),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new ed),this.innerCircleGroup=this.backgroundGroup.appendChild(new Sr({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeEvent=yg,this.angleScale=new Id,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map((t=>t+Math.PI/2));const e=new Sr({name:"pieCalloutLabels"}),i=new Sr({name:"pieSectorLabels"}),s=new Sr({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(i),this.labelGroup.append(s),this.calloutLabelSelection=Oo.select(e,Sr),this.sectorLabelSelection=Oo.select(i,Ir),this.innerLabelsSelection=Oo.select(s,Ir),this.innerCircleSelection=Oo.select(this.innerCircleGroup,ed)}addChartEventListeners(){var t;this.destroyFns.push(null==(t=this.ctx.chartEventManager)?void 0:t.addListener("legend-item-click",(t=>this.onLegendItemClick(t))))}get visible(){return super.visible&&(0===this.seriesItemEnabled.length||this.seriesItemEnabled.some((t=>t)))}nodeFactory(){return new Hp}getSeriesDomain(t){return"x"===t?this.angleScale.domain:this.radiusScale.domain}processData(t){return S(this,null,(function*(){var e,i,s,n,a;if(null==this.data||!this.properties.isValid())return;let{data:r}=this;const{visible:o,seriesItemEnabled:l}=this,{angleKey:h,radiusKey:c,calloutLabelKey:d,sectorLabelKey:u,legendItemKey:p}=this.properties,g=!this.ctx.animationManager.isSkipped(),y=[],v=[];p?y.push(Mc(this,p,!1,{id:"legendItemKey"})):d?y.push(Mc(this,d,!1,{id:"calloutLabelKey"})):u&&y.push(Mc(this,u,!1,{id:"sectorLabelKey"})),c&&v.push(Lc(this,c,{id:"radiusValue",min:null!=(e=this.properties.radiusMin)?e:0,max:this.properties.radiusMax}),Cc(this,c,!0,{id:"radiusRaw"}),fc(this,{id:"radiusValue"},[0,1],1,null!=(i=this.properties.radiusMin)?i:0,this.properties.radiusMax)),d&&v.push(Cc(this,d,!1,{id:"calloutLabelValue"})),u&&v.push(Cc(this,u,!1,{id:"sectorLabelValue"})),p&&v.push(Cc(this,p,!1,{id:"legendItemValue"})),g&&this.processedData&&y.length>0&&v.push(bc(this.processedData)),v.push(mc(this)),r=r.map(((t,e)=>o&&l[e]?t:m(f({},t),{[h]:0}))),yield this.requestDataModel(t,r,{props:[...y,Ac(this,h,!0,{id:"angleValue",onlyPositive:!0}),Cc(this,h,!0,{id:"angleRaw"}),fc(this,{id:"angleValue"},[0,1],0,0),...v]});for(const t of null!=(a=null==(n=null==(s=this.processedData)?void 0:s.defs)?void 0:n.values)?a:[]){const{id:e,missing:i,property:s}=t,n=lh(this,i);"angleRaw"!==e&&n>0&&O.warnOnce(`no value was found for the key '${String(s)}' on ${n} data element${n>1?"s":""}`)}this.animationState.transition("updateData")}))}maybeRefreshNodeData(){return S(this,null,(function*(){if(!this.nodeDataRefresh)return;const[{nodeData:t=[]}={}]=yield this.createNodeData();this.nodeData=t,this.nodeDataRefresh=!1}))}getProcessedDataIndexes(t){return{angleIdx:t.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.properties.radiusKey?t.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.properties.calloutLabelKey?t.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.properties.sectorLabelKey?t.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.properties.legendItemKey?t.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return S(this,null,(function*(){const{id:t,processedData:e,dataModel:i,angleScale:s}=this,{rotation:n}=this.properties;if(!e||!i||"ungrouped"!==e.type)return[];const{angleIdx:a,radiusIdx:r,calloutLabelIdx:o,sectorLabelIdx:l,legendItemIdx:h}=this.getProcessedDataIndexes(i);let c=0,d=0;const u=e.data.map(((t,e)=>{var i;const{datum:u,values:p}=t,g=p[a],m=s.convert(c)+Gn(n);c=g,d+=g;const y=s.convert(c)+Gn(n),v=Math.abs(y-m),x=m+v/2,b=p[a+1],S=r>=0&&null!=(i=p[r])?i:1,k=r>=0?p[r+1]:void 0,w=h>=0?p[h]:void 0,D=this.getLabels(u,x,v,!0,p[o],p[l],w),M=this.getSectorFormat(u,e,!1);return f({itemId:e,series:this,datum:u,index:e,angleValue:b,midAngle:x,midCos:Math.cos(x),midSin:Math.sin(x),startAngle:m,endAngle:y,sectorFormat:M,radiusValue:k,radius:S,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(S),0),legendItemValue:w},D)}));this.zerosumOuterRing.visible=0===d;const{innerRadiusRatio:p=1}=this.properties;return this.zerosumInnerRing.visible=0===d&&1!==p&&p>0,[{itemId:t,nodeData:u,labelData:u}]}))}getLabels(t,e,i,s,n,a,r){const{calloutLabel:o,sectorLabel:l,legendItemKey:h}=this.properties,c=!s||o.enabled?this.properties.calloutLabelKey:void 0,d=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!c&&!d&&!h)return{};const u={datum:t,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},p={};return c&&i>Gn(o.minAngle)&&(p.calloutLabel=m(f({},this.getTextAlignment(e)),{text:this.getLabelText(o,m(f({},u),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),d&&(p.sectorLabel={text:this.getLabelText(l,m(f({},u),{value:a}))}),null!=h&&null!=r&&(p.legendItem={key:h,text:r}),p}getTextAlignment(t){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=_n(t)- -3*Math.PI/4;return e[Hs(Math.floor(i/(Math.PI/2)),e.length)]}getSectorFormat(t,e,i){var s,n,a,r,o;const{callbackCache:l,highlightManager:h}=this.ctx,{angleKey:c,radiusKey:d,fills:u,strokes:p,formatter:g,sectorSpacing:f,__BACKGROUND_COLOR_DO_NOT_USE:m}=this.properties,y=h.getActiveHighlight(),v=i&&(null==y?void 0:y.series)===this&&e===y.itemId;let x=p[e%p.length];null!=f&&(x??(x=m));const{fill:b,fillOpacity:S,stroke:k,strokeWidth:w,strokeOpacity:D}=jt(v&&this.properties.highlightStyle.item,{fill:u.length>0?u[e%u.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:x,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let M;return g&&(M=l.call(g,{datum:t,angleKey:c,radiusKey:d,fill:b,stroke:k,fills:u,strokes:p,strokeWidth:w,highlighted:v,seriesId:this.id})),{fill:null!=(s=null==M?void 0:M.fill)?s:b,fillOpacity:null!=(n=null==M?void 0:M.fillOpacity)?n:S,stroke:null!=(a=null==M?void 0:M.stroke)?a:k,strokeWidth:null!=(r=null==M?void 0:M.strokeWidth)?r:w,strokeOpacity:null!=(o=null==M?void 0:M.strokeOpacity)?o:D}}getInnerRadius(){const{radius:t}=this,{innerRadiusRatio:e=1,innerRadiusOffset:i=0}=this.properties,s=t*e+i;return s===t||s<0?0:s}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(t){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,t&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map((t=>{var e=t,{radius:i}=e,s=y(e,["radius"]);return m(f({},s),{radius:i,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(i),0)})}))}getTitleTranslationY(){var t,e;const i=Math.max(0,this.radiusScale.range[1]);if(0===i)return NaN;return-i-(2+(null!=(e=null==(t=this.properties.title)?void 0:t.spacing)?e:0))-Math.max(0,-i)}update(t){return S(this,arguments,(function(t){var e=this;let{seriesRect:i}=t;return function*(){const{title:t}=e.properties,s={seriesRectWidth:null==i?void 0:i.width,seriesRectHeight:null==i?void 0:i.height},n=null!=be(e.nodeDataDependencies,s);if(n&&(e._nodeDataDependencies=s),yield e.maybeRefreshNodeData(),e.updateTitleNodes(),e.updateRadiusScale(n),e.contentGroup.translationX=e.centerX,e.contentGroup.translationY=e.centerY,e.highlightGroup.translationX=e.centerX,e.highlightGroup.translationY=e.centerY,e.backgroundGroup.translationX=e.centerX,e.backgroundGroup.translationY=e.centerY,e.labelGroup&&(e.labelGroup.translationX=e.centerX,e.labelGroup.translationY=e.centerY),t){const i=e.getTitleTranslationY(),s=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(i)&&!e.bboxIntersectsSurroundingSeries(s,0,i),t.node.translationY=isFinite(i)?i:0}for(const i of[e.zerosumInnerRing,e.zerosumOuterRing])i.fillOpacity=0,i.stroke=e.properties.calloutLabel.color,i.strokeWidth=1,i.strokeOpacity=1;e.updateNodeMidPoint(),yield e.updateSelections(),yield e.updateNodes(i)}()}))}updateTitleNodes(){var t,e;const{oldTitle:i}=this,{title:s}=this.properties;i!==s&&(i&&(null==(t=this.labelGroup)||t.removeChild(i.node)),s&&(s.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(s.node)),this.oldTitle=s)}updateNodeMidPoint(){this.nodeData.forEach((t=>{const e=t.innerRadius+(t.outerRadius-t.innerRadius)/2;t.midPoint={x:t.midCos*Math.max(0,e),y:t.midSin*Math.max(0,e)}}))}updateSelections(){return S(this,null,(function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()}))}updateGroupSelection(){return S(this,null,(function*(){const{itemSelection:t,highlightSelection:e,calloutLabelSelection:i,sectorLabelSelection:s,innerLabelsSelection:n}=this,a=(t,e)=>{let i=this.nodeData;e&&(i=i.map((t=>m(f({},t),{sectorFormat:f({},t.sectorFormat)})))),t.update(i,void 0,(t=>this.getDatumId(t))),this.ctx.animationManager.isSkipped()&&t.cleanup()};a(t,!1),a(e,!0),i.update(this.nodeData,(t=>{const e=new Io;e.tag=0,e.pointerEvents=1,t.appendChild(e);const i=new Ir;i.tag=1,i.pointerEvents=1,t.appendChild(i)})),s.update(this.nodeData,(t=>{t.pointerEvents=1})),n.update(this.properties.innerLabels,(t=>{t.pointerEvents=1}))}))}updateInnerCircleSelection(){const{innerCircle:t}=this.properties;let e=0;const i=this.getInnerRadius();if(i>0){const t=Math.min(i,this.getOuterRadius());e=Math.ceil(2*t+1)}const s=t?[{radius:e}]:[];this.innerCircleSelection.update(s)}updateNodes(t){return S(this,null,(function*(){const e=this.ctx.highlightManager.getActiveHighlight(),i=this.visible&&this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=i,this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(null==e?void 0:e.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each(((t,e)=>{let{radius:i}=e;var s,n;t.setProperties({fill:null==(s=this.properties.innerCircle)?void 0:s.fill,opacity:null==(n=this.properties.innerCircle)?void 0:n.fillOpacity,size:i})}));const s=(t,e,i,s)=>{const n=this.getSectorFormat(e.datum,e.itemId,s);e.sectorFormat.fill=n.fill,e.sectorFormat.stroke=n.stroke;const a=this.ctx.animationManager.isSkipped();a&&(t.startAngle=e.startAngle,t.endAngle=e.endAngle,t.innerRadius=e.innerRadius,t.outerRadius=e.outerRadius),(s||a)&&(t.fill=n.fill,t.stroke=n.stroke),t.strokeWidth=n.strokeWidth,t.fillOpacity=n.fillOpacity,t.strokeOpacity=this.properties.strokeOpacity,t.lineDash=this.properties.lineDash,t.lineDashOffset=this.properties.lineDashOffset,t.fillShadow=this.properties.shadow,t.inset=null!=this.properties.sectorSpacing?(this.properties.sectorSpacing+(null!=n.stroke?n.strokeWidth:0))/2:0,t.lineJoin=null!=this.properties.sectorSpacing?"miter":"round"};this.itemSelection.each(((t,e,i)=>s(t,e,0,!1))),this.highlightSelection.each(((t,i,n)=>{const a=(null==e?void 0:e.series)===this&&t.datum.itemId===e.itemId;s(t,i,0,!0),t.visible=a})),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(t),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}))}updateCalloutLineNodes(){var t;const{calloutLine:e}=this.properties,i=e.length,s=e.strokeWidth,n=null!=(t=e.colors)?t:this.properties.strokes,{offset:a}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach(((t,e)=>{var r;const o=t.datum,{calloutLabel:l,outerRadius:h}=o;if(null!=l&&l.text&&!l.hidden&&0!==h){t.visible=!0,t.strokeWidth=s,t.stroke=n[e%n.length],t.fill=void 0;const c=o.midCos*h,d=o.midSin*h;let u=o.midCos*(h+i),p=o.midSin*(h+i);if((null!=(r=l.collisionTextAlign)?r:0!==l.collisionOffsetY)&&null!=l.box){const t=l.box;let e=u,i=p;u<t.x?e=t.x:u>t.x+t.width&&(e=t.x+t.width),p<t.y?i=t.y:p>t.y+t.height&&(i=t.y+t.height);const s=e-u,n=i-p,r=Math.sqrt(Math.pow(s,2)+Math.pow(n,2)),o=r-a;o>0&&(u+=s*o/r,p+=n*o/r)}t.x1=c,t.y1=d,t.x2=u,t.y2=p}else t.visible=!1}))}getLabelOverflow(t,e,i){const s=i.x-this.centerX,n=i.x+i.width-this.centerX,a=i.y-this.centerY,r=i.y+i.height-this.centerY;let o=1;e.x+1<s?o=(e.x+e.width-s)/e.width:e.x+e.width-1>n&&(o=(n-e.x)/e.width);const l=e.y+1<a||e.y+e.height-1>r;return{textLength:1===o?t.length:Math.floor(t.length*o)-1,hasVerticalOverflow:l,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const{surroundingRadius:s}=this;if(null==s)return!1;const n=[{x:t.x+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+i},{x:t.x+t.width+e,y:t.y+t.height+i},{x:t.x+e,y:t.y+t.height+i}],a=p(s,2);return n.some((t=>p(t.x,2)+p(t.y,2)>a))}computeCalloutLabelCollisionOffsets(){const{radiusScale:t}=this,{calloutLabel:e,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=e,a=t.convert(0),r=this.nodeData,o=this.nodeData.filter((t=>!(t=>!t.calloutLabel||0===t.outerRadius)(t)));if(o.forEach((t=>{const e=t.calloutLabel;null!=e&&(e.hidden=!1,e.collisionTextAlign=void 0,e.collisionOffsetY=0)})),o.length<=1)return;const l=o.filter((t=>t.midCos<0)).sort(((t,e)=>t.midSin-e.midSin)),h=o.filter((t=>t.midCos>=0)).sort(((t,e)=>t.midSin-e.midSin)),c=o.filter((t=>{var e;return t.midSin<0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),d=o.filter((t=>{var e;return t.midSin>=0&&"center"===(null==(e=t.calloutLabel)?void 0:e.textAlign)})).sort(((t,e)=>t.midCos-e.midCos)),u=new Ir,p=t=>{var e;const n=t.calloutLabel;if(null==n)return new Qs(0,0,0,0);const a=t.outerRadius+i.length+s,r=t.midCos*a,o=t.midSin*a+n.collisionOffsetY;return u.text=n.text,u.x=r,u.y=o,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:null!=(e=n.collisionTextAlign)?e:n.textAlign,textBaseline:n.textBaseline}),u.computeBBox()},g=(t,e,i)=>{const s=p(t).grow(n/2),a=p(e).grow(n/2);if(s.x<a.x+a.width&&s.x+s.width>a.x&&("to-top"===i?s.y<a.y+a.height:s.y+s.height>a.y)){const t="to-top"===i?s.y-a.y-a.height:s.y+s.height-a.y;e.calloutLabel.collisionOffsetY=t}},f=t=>{const e=t.slice().sort(((t,e)=>Math.abs(t.midSin)-Math.abs(e.midSin)))[0],i=t.indexOf(e);for(let s=i-1;s>=0;s--){const e=t[s+1],i=t[s];g(e,i,"to-top")}for(let s=i+1;s<t.length;s++){const e=t[s-1],i=t[s];g(e,i,"to-bottom")}},m=t=>{const e=o.some((t=>0!==t.calloutLabel.collisionOffsetY)),i=t.map((t=>p(t))),s=i.map((t=>t.clone().grow(n/2)));let l=!1;for(let n=0;n<s.length&&!l;n++){const e=s[n];for(let i=n+1;i<t.length;i++){const t=s[i];if(e.collidesBBox(t)){l=!0;break}}}const h=r.map((t=>{const{startAngle:e,endAngle:i,outerRadius:s}=t;return{startAngle:e,endAngle:i,innerRadius:a,outerRadius:s}})),c=i.some((t=>h.some((e=>Xp(t,e)))));!l&&!e&&!c||t.filter((t=>"center"===t.calloutLabel.textAlign)).forEach((t=>{const e=t.calloutLabel;t.midCos<0?e.collisionTextAlign="right":t.midCos>0?e.collisionTextAlign="left":e.collisionTextAlign="center"}))};f(l),f(h),m(c),m(d)}updateCalloutLabelNodes(t){const{radiusScale:e}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,color:r}=i,o=new Ir;this.calloutLabelSelection.selectByTag(1).forEach((s=>{var l;const{datum:h}=s,c=h.calloutLabel,d=e.convert(h.radius),u=Math.max(0,d);if(null==c||!c.text||0===u||c.hidden)return void(s.visible=!1);const p=u+n+a,g=h.midCos*p,f=h.midSin*p+c.collisionOffsetY,m={textAlign:null!=(l=c.collisionTextAlign)?l:c.textAlign,textBaseline:c.textBaseline};o.text=c.text,o.x=g,o.y=f,o.setFont(this.properties.calloutLabel),o.setAlign(m);const y=o.computeBBox();let v=c.text,x=!0;if(i.avoidCollisions){const{textLength:e,hasVerticalOverflow:i}=this.getLabelOverflow(c.text,y,t);v=c.text.length===e?c.text:`${c.text.substring(0,e)}\u2026`,x=!i}s.text=v,s.x=g,s.y=f,s.setFont(this.properties.calloutLabel),s.setAlign(m),s.fill=r,s.visible=x}))}computeLabelsBBox(t,e){return S(this,null,(function*(){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:a,maxCollisionOffset:r,minSpacing:o}=i;if(!i.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],h=new Ir;let c;const{title:d}=this.properties;if(null!=d&&d.text&&d.enabled){const t=this.getTitleTranslationY();isFinite(t)&&(h.text=d.text,h.x=0,h.y=t,h.setFont(d),h.setAlign({textBaseline:"bottom",textAlign:"center"}),c=h.computeBBox(),l.push(c))}return this.nodeData.forEach((i=>{var s;const d=i.calloutLabel;if(!d||0===i.outerRadius)return null;const u=i.outerRadius+n+a,p=i.midCos*u,g=i.midSin*u+d.collisionOffsetY;h.text=d.text,h.x=p,h.y=g,h.setFont(this.properties.calloutLabel),h.setAlign({textAlign:null!=(s=d.collisionTextAlign)?s:d.textAlign,textBaseline:d.textBaseline});const f=h.computeBBox();if(d.box=f,Math.abs(d.collisionOffsetY)>r)d.hidden=!0;else{if(c){const t=e.y-this.centerY,i=new Qs(c.x-o,t,c.width+2*o,c.y+c.height+o-t);if(f.collidesBBox(i))return void(d.hidden=!0)}if(t.hideWhenNecessary){const{textLength:t,hasVerticalOverflow:i,hasSurroundingSeriesOverflow:s}=this.getLabelOverflow(d.text,f,e),n=d.text.length>2&&t<2;if(i||n||s)return void(d.hidden=!0)}d.hidden=!1,l.push(f)}})),0===l.length?null:Qs.merge(l)}))}updateSectorLabelNodes(){const{radiusScale:t}=this,e=t.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:a,positionOffset:r,positionRatio:o,color:l}=this.properties.sectorLabel,h=e>0,c=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each(((t,d)=>{const{sectorLabel:u,outerRadius:p}=d;let g=!1;if(u&&0!==p){const f=e*(1-o)+p*o+r;t.fill=l,t.fontStyle=s,t.fontWeight=n,t.fontSize=i,t.fontFamily=a,t.text=u.text,!h&&c?(t.x=0,t.y=0):(t.x=d.midCos*f,t.y=d.midSin*f),t.textAlign="center",t.textBaseline="middle";const m=t.computeBBox(),y=[[m.x,m.y],[m.x+m.width,m.y],[m.x+m.width,m.y+m.height],[m.x,m.y+m.height]],{startAngle:v,endAngle:x}=d,b={startAngle:v,endAngle:x,innerRadius:e,outerRadius:p};y.every((t=>{let[e,i]=t;return $p(e,i,b)}))&&(g=!0)}t.visible=g}))}updateInnerLabelNodes(){const t=[],e=[];this.innerLabelsSelection.each(((i,s)=>{const{fontStyle:n,fontWeight:a,fontSize:r,fontFamily:o,color:l,margin:h=2}=s;i.fontStyle=n,i.fontWeight=a,i.fontSize=r,i.fontFamily=o,i.text=s.text,i.x=0,i.y=0,i.fill=l,i.textAlign="center",i.textBaseline="alphabetic",t.push(i.computeBBox()),e.push(h)}));const i=t=>0===t?0:e[t],s=t=>t===e.length-1?0:e[t],n=t.reduce(((t,e,n)=>t+e.height+i(n)+s(n)),0),a=Math.max(...t.map((t=>t.width))),r=this.getInnerRadius(),o=Math.sqrt(Math.pow(a/2,2)+Math.pow(n/2,2))<=(r>0?r:this.getOuterRadius()),l=[];for(let h=0,c=-n/2;h<t.length;h++){const e=t[h].height+c+i(h);l.push(e),c=e+s(h)}this.innerLabelsSelection.each(((t,e,i)=>{t.y=l[i],t.visible=o}))}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(t){const{angleKey:e,calloutLabelKey:i,sectorLabelKey:s,legendItemKey:n}=this.properties,{sectorLabel:a,calloutLabel:r,legendItem:o}=t;return n&&void 0!==o?o.text:i&&i!==e&&void 0!==(null==r?void 0:r.text)?r.text:s&&s!==e&&void 0!==(null==a?void 0:a.text)?a.text:void 0}getTooltipHtml(t){var e;if(!this.properties.isValid())return"";const{datum:i,angleValue:s,sectorFormat:{fill:n}}=t,a=xu(null==(e=this.properties.title)?void 0:e.text),r=Kt(s)?Xs(s):String(s),o=this.getDatumLegendName(t);return this.properties.tooltip.toTooltipHtml({title:a??o,content:a&&o?`${o}: ${r}`:r,backgroundColor:n},{datum:i,title:a,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(t){var e,i,s,n,a;const{visible:r,processedData:o,dataModel:l}=this;if(!l||null==o||!o.data.length||"category"!==t)return[];const{angleKey:h,calloutLabelKey:c,sectorLabelKey:d,legendItemKey:u}=this.properties;if(!u&&(!c||c===h)&&(!d||d===h))return[];const{calloutLabelIdx:p,sectorLabelIdx:g,legendItemIdx:f}=this.getProcessedDataIndexes(l),m=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,y=[];for(let v=0;v<o.data.length;v++){const{datum:t,values:e}=o.data[v],l=[];m&&l.push(m);const x=this.getLabels(t,2*Math.PI,2*Math.PI,!1,e[p],e[g],e[f]);if(u&&void 0!==x.legendItem?l.push(x.legendItem.text):c&&c!==h&&void 0!==(null==(i=x.calloutLabel)?void 0:i.text)?l.push(null==(s=x.calloutLabel)?void 0:s.text):d&&d!==h&&void 0!==(null==(n=x.sectorLabel)?void 0:n.text)&&l.push(null==(a=x.sectorLabel)?void 0:a.text),0===l.length)continue;const b=this.getSectorFormat(t,v,!1);y.push({legendType:"category",id:this.id,itemId:v,seriesId:this.id,enabled:r&&this.seriesItemEnabled[v],label:{text:l.join(" - ")},marker:{fill:b.fill,stroke:b.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:null!=u?t[u]:void 0})}return y}onLegendItemClick(t){const{enabled:e,itemId:i,series:s,legendItemName:n}=t;s.id===this.id?this.toggleSeriesItem(i,e):null!=n&&this.toggleOtherSeriesItems(n,e)}toggleSeriesItem(t,e){this.seriesItemEnabled[t]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(t,e){var i;if(!this.properties.legendItemKey||!this.dataModel)return;const s=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;null==(i=this.processedData)||i.data.forEach(((i,n)=>{let{values:a}=i;a[s]===t&&this.toggleSeriesItem(n,e)}))}animateEmptyUpdateReady(t){const{animationManager:e}=this.ctx,i=ig(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);En(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],i.nodes),En(this.id,"innerCircle",e,[this.innerCircleSelection],i.innerCircle),bu(this,"callout",e,[this.calloutLabelSelection]),bu(this,"sector",e,[this.sectorLabelSelection]),bu(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var t,e,i,s,n,a;const{itemSelection:r,highlightSelection:o,processedData:l,radiusScale:h,previousRadiusScale:c}=this,{animationManager:d}=this.ctx,u=null==(t=null==l?void 0:l.reduced)?void 0:t.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const p=0===(null!=(e=null==u?void 0:u.moved.size)?e:0),g=(null!=(i=null==l?void 0:l.defs.keys.length)?i:0)>0,f=null==(a=null==(n=null==(s=null==l?void 0:l.reduced)?void 0:s.animationValidation)?void 0:n.uniqueKeys)||a;(!p||!g||!f)&&this.ctx.animationManager.skipCurrentBatch();const m=ig(!1,this.properties.rotation,h,c);En(this.id,"nodes",d,[r,o],m.nodes,((t,e)=>this.getDatumId(e)),u),En(this.id,"innerCircle",d,[this.innerCircleSelection],m.innerCircle),bu(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),bu(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),bu(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:t,highlightSelection:e,radiusScale:i,previousRadiusScale:s}=this,{animationManager:n}=this.ctx,a=ig(!1,this.properties.rotation,i,s);En(this.id,"nodes",n,[t,e],a.nodes),En(this.id,"innerCircle",n,[this.innerCircleSelection],a.innerCircle),Su(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Su(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Su(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(t){var e,i,s;const{calloutLabelKey:n,sectorLabelKey:a,legendItemKey:r}=this.properties;if(null!=(s=null==(i=null==(e=this.processedData)?void 0:e.reduced)?void 0:i.animationValidation)&&s.uniqueKeys){if(r)return t[r];if(n)return t[n];if(a)return t[a]}}getDatumId(t){const{index:e}=t,i=this.getDatumIdFromData(t.datum);return null!=i?String(i):`${e}`}onDataChange(){var t;const{data:e,seriesItemEnabled:i}=this;this.seriesItemEnabled=null!=(t=null==e?void 0:e.map(((t,e)=>{var s;return null==(s=i[e])||s})))?t:[]}};vg.className="PieSeries",vg.type="pie";var xg={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:vg,themeTemplate:og,paletteFactory:lg},bg=class extends Sr{constructor(t){super({name:"ToolbarButton"}),this.button=new Ud,this.label=new Ir;const{button:e,label:i}=this;i.text=t.label,i.textAlign="center",i.textBaseline="middle",i.fontSize=12,e.width=t.width,e.height=t.height,i.x=t.width/2,i.y=t.height/2,e.fill="#eee",this.append([e,i])}containsPoint(t,e){return this.button.containsPoint(t,e)}},Sg=class extends Sr{constructor(){super({name:"Toolbar"})}},kg={type:"root",optionsKey:"toolbar",packageType:"community",chartTypes:["cartesian"],instanceConstructor:class extends St{constructor(t){super(),this.ctx=t,this.enabled=!0,this.y=0,this.height=30,this.margin=10,this.buttonNodes=new Map,this.buttonOffsetX=0,this.buttonSpacingX=10,this.container=new Sg,this.container.visible=!1;const e=t.regionManager.addRegion("toolbar",this.container);this.destroyFns.push(t.scene.attachNode(this.container),e.addListener("hover",this.onHover.bind(this)),e.addListener("leave",this.onHover.bind(this)),e.addListener("click",this.onClick.bind(this)),t.toolbarManager.addListener("visibility",this.onVisibility.bind(this)),t.toolbarManager.addListener("button-added",this.onButtonAdded.bind(this)),t.toolbarManager.addListener("button-removed",this.onButtonRemoved.bind(this)))}performLayout(t){return S(this,arguments,(function(t){var e=this;let{shrinkRect:i}=t;return function*(){if(e.container.visible){const t=e.height+e.margin;i.shrink(t,"top"),e.y=i.y-e.height-e.margin}else e.y=0;return{shrinkRect:i}}()}))}performCartesianLayout(t){return S(this,null,(function*(){const{x:e,width:i}=t.seriesRect;if(this.container.visible){const{y:t,height:s}=this;this.layoutNodes(e,t,i,s)}}))}onHover(t){let{offsetX:e,offsetY:i}=t;if(this.activeButton=void 0,this.container.visible){for(const t of this.container.children)if(t.containsPoint(e,i)){this.activeButton=this.buttonNodes.get(t.id);break}null==this.activeButton?this.ctx.cursorManager.updateCursor("rangeButtons"):this.ctx.cursorManager.updateCursor("rangeButtons","pointer")}}onClick(){!this.container.visible||null==this.activeButton||this.ctx.toolbarManager.pressButton(this.activeButton)}onVisibility(t){let{visible:e}=t;this.container.visible=e}onButtonAdded(t){let{id:e,options:i}=t;const s=new bg({label:i.label,width:32,height:20});s.translationX=this.buttonOffsetX,this.buttonOffsetX+=s.computeBBox().width+this.buttonSpacingX,this.buttonNodes.set(s.id,e),this.container.append(s)}onButtonRemoved(t){let{id:e}=t;const i=this.container.children.find((t=>this.buttonNodes.get(t.id)===e));i&&(this.buttonOffsetX-=i.getCachedBBox().width+this.buttonSpacingX,this.container.removeChild(i))}layoutNodes(t,e,i,s){this.container.translationX=t,this.container.translationY=e}},themeTemplate:{toolbar:{enabled:!0}}};function wg(){for(const t of kt.modules){if("enterprise"===t.packageType&&!he(t)&&O.errorOnce("Unexpected enterprise module registered: "+t.identifier),"root"===t.type&&t.themeTemplate)for(const e of t.chartTypes)re.set(e,t.themeTemplate);if("series"===t.type){if(t.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${t.identifier}`);Le.register(t.identifier,t)}if("series-option"===t.type&&t.themeTemplate)for(const e of t.seriesTypes)Le.setThemeTemplate(e,t.themeTemplate);if("axis-option"===t.type&&t.themeTemplate)for(const e of t.axisTypes){const i=t.themeTemplate[e],s=f(f({},t.themeTemplate),i);for(const e of t.axisTypes)delete s[e];wt.setThemeTemplate(e,s)}"axis"===t.type&&wt.register(t.identifier,t),"legend"===t.type&&Re.register(t.identifier,t)}if(kt.hasEnterpriseModules()){const t=oe.filter((t=>{let{useCount:e}=t;return null==e||0===e}));t.length>0&&O.errorOnce("Enterprise modules expected but not registered: ",t)}}var Dg=class t extends $c{constructor(t,e){super(t,e)}performLayout(){return S(this,null,(function*(){const e=yield b(t.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s}=this,n=e.clone();return e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e,s.translationX=Math.floor(e.x),s.translationY=Math.floor(e.y),yield Promise.all(this.series.map((t=>S(this,null,(function*(){yield t.update({seriesRect:e})}))))),s.visible=this.series[0].visible,s.setClipRectInGroupCoordinateSpace(new Qs(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:e,visible:!0},axes:[]}),e}))}};Dg.className="HierarchyChart",Dg.type="hierarchy";var Mg=Dg,Cg=class extends yl{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(t,e){return null}};x([Yn(Ia(["polygon","circle"],"a polar axis shape"))],Cg.prototype,"shape",2),x([Yn(ia)],Cg.prototype,"innerRadiusRatio",2);var Lg=class t extends $c{constructor(t,e){super(t,e),this.padding=new Zl(40),this.axisGroup.zIndex=5}performLayout(){return S(this,null,(function*(){const e=yield b(t.prototype,this,"performLayout").call(this),i=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach((t=>t.update())),this.hoverRect=e,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:i,paddedRect:e,visible:!0},axes:[]}),e}))}updateAxes(t,e,i){var s,n;const a=this.axes.find((t=>"x"===t.direction)),r=this.axes.find((t=>"y"===t.direction));if(!(a instanceof Cg)||!(r instanceof Cg))return;const o=a.scale,l=null==(s=o.ticks)?void 0:s.call(o).map((t=>o.convert(t))),h=r.innerRadiusRatio;a.innerRadiusRatio=h,null==(n=a.computeRange)||n.call(a),a.gridLength=i,r.gridAngles=l,r.gridRange=a.range,r.range=[i,i*h],[a,r].forEach((i=>{i.translation.x=t,i.translation.y=e,i.calculateLayout()}))}computeSeriesRect(t){const{seriesArea:{padding:e}}=this;t.shrink(e.left,"left"),t.shrink(e.top,"top"),t.shrink(e.right,"right"),t.shrink(e.bottom,"bottom"),this.seriesRect=t,this.animationRect=t}computeCircle(t){return S(this,null,(function*(){var e=this;const i=this.series.filter((t=>t instanceof ng)),s=this.axes.filter((t=>t instanceof Cg)),n=(t,e,s)=>{this.updateAxes(t,e,s),i.forEach((i=>{i.centerX=t,i.centerY=e,i.radius=s}));const n=i.filter((t=>t instanceof vg||t instanceof rg));if(n.length>1){const t=n.map((t=>{const e=t.getInnerRadius();return{series:t,innerRadius:e}})).sort(((t,e)=>t.innerRadius-e.innerRadius));t.at(-1).series.surroundingRadius=void 0;for(let e=0;e<t.length-1;e++)t[e].series.surroundingRadius=t[e+1].innerRadius}},a=t.x+t.width/2,r=t.y+t.height/2,o=Math.max(0,Math.min(t.width,t.height)/2);let l=o;n(a,r,l);const h=function(){for(var h=arguments.length,c=new Array(h),d=0;d<h;d++)c[d]=arguments[d];return S(e,[...c],(function(){var e=this;let{hideWhenNecessary:h=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function*(){const c=[];for(const e of[...s,...i]){const i=yield e.computeLabelsBBox({hideWhenNecessary:h},t);i&&c.push(i)}if(0===c.length)return void n(a,r,o);const d=Qs.merge(c),u=e.refineCircle(d,l,t);n(u.centerX,u.centerY,u.radius),u.radius!==l&&(l=u.radius)}()}))};return yield h(),yield h(),yield h(),yield h({hideWhenNecessary:!0}),yield h({hideWhenNecessary:!0}),{radius:l,centerX:a,centerY:r}}))}refineCircle(t,e,i){const s=-e,n=-e,a=e,r=e;let o=Math.max(0,s-t.x),l=Math.max(0,n-t.y),h=Math.max(0,t.x+t.width-a),c=Math.max(0,t.y+t.height-r);o=h=Math.max(o,h),l=c=Math.max(l,c);const d=i.width-o-h,u=i.height-l-c;let p=Math.min(d,u)/2;const g=.5*i.width/2,f=.5*i.height/2,m=Math.min(g,f);if(p<m){p=m;const t=o+h;if(2*p+(l+c)>i.height){const t=i.height-2*p;2*Math.min(l,c)>t?(l=t/2,c=t/2):l>c?l=t-c:c=t-l}if(2*p+t>i.width){const t=i.width-2*p;2*Math.min(o,h)>t?(o=t/2,h=t/2):o>h?o=t-h:h=t-o}}const y=o+2*p+h,v=l+2*p+c;return{centerX:i.x+(i.width-y)/2+o+p,centerY:i.y+(i.height-v)/2+l+p,radius:p}}};Lg.className="PolarChart",Lg.type="polar";var Rg=Lg,Tg=Math.PI/180,Ag=t=>t*Tg,Eg=t=>-Math.log(Math.tan(.25*Math.PI+t*Tg*.5)),Ng=class t{constructor(t,e){this.domain=t,this.range=e;const[[i,s],[n,a]]=t,[[r,o],[l,h]]=e,c=l-r,d=h-o,u=Math.abs(Ag(n)-Ag(i)),p=Math.abs(Eg(a)-Eg(s)),g=Math.min(c/u,d/p),f=u*g,m=p*g,y=f-Math.max(Ag(i),Ag(n))*g,v=m-Math.max(Eg(s),Eg(a))*g;this.scale=g,this.originX=-(r+y+(c-f)/2),this.originY=-(o+v+(d-m)/2)}static fixedScale(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const i=Object.create(t.prototype);return i.scale=e,i.originX=0,i.originY=0,i}convert(t){let[e,i]=t;const{scale:s,originX:n,originY:a}=this;return[Ag(e)*s-n,Eg(i)*s-a]}};function Og(t){return"map-shape"===t.type||"map-line"===t.type||"map-marker"===t.type||"map-shape-background"===t.type||"map-line-background"===t.type}var Ig=class t extends $c{constructor(t,e){super(t,e),this.firstSeriesTranslation=!0}updateData(){return S(this,null,(function*(){yield b(t.prototype,this,"updateData").call(this);const{topology:e}=this.getOptions();this.series.forEach((t=>{Og(t)&&t.setChartTopology(e)}))}))}performLayout(){return S(this,null,(function*(){const e=yield b(t.prototype,this,"performLayout").call(this),{seriesArea:{padding:i},seriesRoot:s}=this,n=e.clone();e.shrink(i.left,"left"),e.shrink(i.top,"top"),e.shrink(i.right,"right"),e.shrink(i.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e;const a=this.series.filter(Og),r=a.reduce(((t,e)=>{if(!e.visible)return t;const i=e.topologyBounds;return null==i?t:null==t?i:(t.merge(i),t)}),void 0);let o;if(null!=r){const{lon0:t,lat0:i,lon1:s,lat1:n}=r,{width:a,height:l}=e;o=new Ng([[t,i],[s,n]],[[0,0],[a,l]])}a.forEach((t=>{t.scale=o}));const l=this.series.some((t=>t.visible));return s.visible=l,this.firstSeriesTranslation&&(s.translationX=Math.floor(e.x),s.translationY=Math.floor(e.y),s.setClipRectInGroupCoordinateSpace(new Qs(e.x,e.y,e.width,e.height)),this.firstSeriesTranslation=!1),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:e,visible:l},axes:[]}),e}))}};Ig.className="TopologyChart",Ig.type="topology";var Pg=Ig,Bg=Rs.create(!0,"opts");function _g(t){if(de(t))return"cartesian";if(ue(t))return"polar";if(pe(t))return"hierarchy";if(ge(t))return"topology";throw new Error(`AG Chart - unknown type of chart for options with type: ${t.type}`)}var Fg=class t{static licenseCheck(t){var e,i,s,n;this.licenseChecked||(this.licenseManager=null==(i=(e=bt).licenseManager)?void 0:i.call(e,t),null==(s=this.licenseManager)||s.setLicenseKey(this.licenseKey,this.gridContext),null==(n=this.licenseManager)||n.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(t){this.licenseKey=t}static setGridContext(t){this.gridContext=t}static getLicenseDetails(t){var e,i;return null==(i=(e=bt).licenseManager)?void 0:i.call(e,{}).getLicenseDetails(t)}static getInstance(t){return Vg.getInstance(t)}static create(t){var e,i,s;this.licenseCheck(t);const n=Vg.createOrUpdate(t);return null!=(e=this.licenseManager)&&e.isDisplayWatermark()&&(null==(s=(i=bt).injectWatermark)||s.call(i,n.chart.element,this.licenseManager.getWatermarkMessage())),n}static update(e,i){if(!Od.isInstance(e))throw new Error(t.INVALID_CHART_REF_MESSAGE);Vg.createOrUpdate(i,e)}static updateDelta(e,i){if(!Od.isInstance(e))throw new Error(t.INVALID_CHART_REF_MESSAGE);Vg.updateUserDelta(e,i)}static download(e,i){if(!(e instanceof Od))throw new Error(t.INVALID_CHART_REF_MESSAGE);Vg.download(e,i).catch((t=>O.errorOnce(t)))}static getImageDataURL(e,i){if(!(e instanceof Od))throw new Error(t.INVALID_CHART_REF_MESSAGE);return Vg.getImageDataURL(e,i)}};Fg.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",Fg.licenseChecked=!1,Fg.gridContext=!1;var Gg=Fg,zg=class{static warnDeprecated(t){Es()(`AgChart.${t}`,`Use AgCharts.${t} instead`)}static create(t){return this.warnDeprecated("create"),Gg.create(t)}static update(t,e){return this.warnDeprecated("update"),Gg.update(t,e)}static updateDelta(t,e){return this.warnDeprecated("updateDelta"),Gg.updateDelta(t,e)}static download(t,e){return this.warnDeprecated("download"),Gg.download(t,e)}static getImageDataURL(t,e){return this.warnDeprecated("getImageDataURL"),Gg.getImageDataURL(t,e)}},Wg=class t{static getInstance(t){const e=$c.getInstance(t);return e?Od.chartInstances.get(e):void 0}static initialiseModules(){t.initialised||(function(){kt.register(Hd,hu,gu,kg,cp,Cp,Ip,zp,Yp,hg,xg,_p);for(const t of[_d,Sl,Wd,Ol,Gd])wt.register(t.type,{instanceConstructor:t,hidden:t===Ol})}(),wg(),t.initialised=!0)}static createOrUpdate(e,i){t.initialiseModules(),Bg(">>> AgChartV2.createOrUpdate() user options",e);const s=e,{overrideDevicePixelRatio:n,document:a,window:r}=s,o=y(s,["overrideDevicePixelRatio","document","window"]),l=new As(o,{overrideDevicePixelRatio:n,document:a,window:r});let h=null==i?void 0:i.chart;return(null==h||_g(o)!==_g(h.processedOptions))&&(h=t.createChartInstance(l,h)),null==i?i=new Od(h):i.chart=h,Bg.check()&&typeof window<"u"&&(null!=window.agChartInstances||(window.agChartInstances={}),window.agChartInstances[h.id]=h),h.queuedUserOptions.push(o),h.requestFactoryUpdate((t=>{t.applyOptions(l),t.queuedUserOptions.splice(0,t.queuedUserOptions.indexOf(o))})),i}static updateUserDelta(e,i){we(i=Se(i,{shallow:["data"]}),(t=>{if("object"==typeof t)for(const[e,i]of Object.entries(t))typeof i>"u"&&Object.assign(t,{[e]:Symbol("UNSET")})}),{skip:["data"]});const{chart:s}=e,n=s.getOptions(),a=jt(i,n);Bg(">>> AgChartV2.updateUserDelta() user delta",i),Bg("AgChartV2.updateUserDelta() - base options",n),t.createOrUpdate(a,e)}static download(e,i){return S(this,null,(function*(){try{const s=yield t.prepareResizedChart(e,i);s.chart.scene.download(null==i?void 0:i.fileName,null==i?void 0:i.fileFormat),s.destroy()}catch(s){O.errorOnce(s)}}))}static getImageDataURL(e,i){return S(this,null,(function*(){const s=yield t.prepareResizedChart(e,i),n=s.chart.scene.getDataURL(null==i?void 0:i.fileFormat);return s.destroy(),n}))}static prepareResizedChart(e){return S(this,arguments,(function(e){let{chart:i}=e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){var e,n,a,r;const o=null!=(n=null!=(e=s.width)?e:i.width)?n:i.scene.canvas.width,l=null!=(r=null!=(a=s.height)?a:i.height)?r:i.scene.canvas.height,h=jt({container:document.createElement("div"),overrideDevicePixelRatio:1,autoSize:!1,width:o,height:l},kt.hasEnterpriseModules()&&{animation:{enabled:!1}},i.userOptions),c=t.createOrUpdate(h);return c.chart.zoomManager.updateZoom("agChartV2",i.zoomManager.getZoom()),i.series.forEach(((t,e)=>{t.visible||(c.chart.series[e].visible=!1)})),i.update(0,{forceNodeDataRefresh:!0}),yield c.chart.waitForUpdate(),c}()}))}static createChartInstance(e,i){const s=null==i?void 0:i.destroy({keepTransferableResources:!0});return new(t.getChartByOptions(e.processedOptions))(e,s)}static getChartByOptions(t){if(de(t))return Ed;if(pe(t))return Mg;if(ue(t))return Rg;if(ge(t))return Pg;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};Wg.initialised=!1;var Vg=Wg,Kg="9.2.0",Yg={};v(Yg,{Arc:()=>$g,BBox:()=>Qs,BandScale:()=>Kn,Caption:()=>Jo,ChangeDetectableProperties:()=>wu,Circle:()=>ed,ContinuousScale:()=>$a,Diamond:()=>ad,DropShadow:()=>Du,Group:()=>Sr,HdpiCanvas:()=>Bl,Image:()=>qg,Label:()=>_r,Line:()=>Io,LinearGradientFill:()=>Ug,LinearScale:()=>Id,Marker:()=>td,Node:()=>hn,OrdinalTimeScale:()=>mr,Path:()=>Qc,Path2D:()=>Zc,PointerEvents:()=>on,RadialColumnShape:()=>Hg,Rect:()=>Ud,RedrawType:()=>tn,Scene:()=>Ul,SceneChangeDetection:()=>sn,ScenePathChangeDetection:()=>Jc,Sector:()=>Hp,Selection:()=>Oo,Shape:()=>Cr,Square:()=>cd,Text:()=>Ir,Tooltip:()=>Zo,Triangle:()=>pd,easing:()=>fn,getFont:()=>Br,getMarker:()=>yd,getRadialColumnWidth:()=>jg,motion:()=>Zg,nearestSquared:()=>qs,nearestSquaredInContainer:()=>Zs,toRadians:()=>Gn,toTooltipHtml:()=>jo});var $g=class extends Qc{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return Ys(Pn(this.startAngle),Pn(this.endAngle))}updatePath(){const t=this.path;t.clear(),t.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?t.closePath():2===this.type&&!this.fullPie&&(t.lineTo(this.centerX,this.centerY),t.closePath())}computeBBox(){return new Qs(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(t,e){const i=this.transformPoint(t,e),s=this.computeBBox();return 0!==this.type&&s.containsPoint(i.x,i.y)&&this.path.isPointInPath(i.x,i.y)}};$g.className="Arc",$g.defaultStyles=Object.assign({},Cr.defaultStyles,{lineWidth:1,fillStyle:null}),x([Jc()],$g.prototype,"centerX",2),x([Jc()],$g.prototype,"centerY",2),x([Jc()],$g.prototype,"radius",2),x([Jc()],$g.prototype,"startAngle",2),x([Jc()],$g.prototype,"endAngle",2),x([Jc()],$g.prototype,"counterClockwise",2),x([Jc()],$g.prototype,"type",2);var Ug=class extends Cr{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(t){null!=this._mask&&this.removeChild(this._mask),null!=t&&this.appendChild(t),this._mask=t}isPointInPath(t,e){var i,s;return null!=(s=null==(i=this.mask)?void 0:i.isPointInPath(t,e))&&s}computeBBox(){var t;return null==(t=this.mask)?void 0:t.computeBBox()}render(t){const{mask:e,stops:i}=this,{ctx:s,devicePixelRatio:n}=t,a=1/n,r=null==e?void 0:e.computeTransformedBBox();if(null==e||null==i||null==r)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),s.save(),s.beginPath(),e.path.draw(s),s.clip(),s.setTransform(n,0,0,n,0,0);const o=Math.floor(r.x),l=Math.ceil(r.x+r.width),h=Math.floor(r.y),c=Math.ceil(r.y+r.height),d=new Rp,[u,p]="to-right"===this.direction?[o,l]:[h,c];if(d.domain=i.map(((t,e)=>u+(p-u)*e/(i.length-1))),d.range=i,d.update(),"to-right"===this.direction){const t=c-h;for(let e=o;e<=l;e+=a)s.fillStyle=d.convert(e),s.fillRect(e,h,a,t)}else{const t=l-o;for(let e=h;e<=c;e+=a)s.fillStyle=d.convert(e),s.fillRect(o,e,t,a)}s.restore()}};function Xg(t,e,i){const s=Math.sqrt(p(t,2)+p(e,2)),n=Math.atan2(e,t)+i;return{x:Math.cos(n)*s,y:Math.sin(n)*s}}x([sn({redraw:3})],Ug.prototype,"direction",2),x([sn({redraw:3})],Ug.prototype,"stops",2),x([sn({redraw:3})],Ug.prototype,"_mask",2);var Hg=class extends Qc{constructor(){super(...arguments),this.borderPath=new Zc,this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}getRotation(){const{startAngle:t,endAngle:e}=this;return Pn(t+Wn(t,e)/2+Math.PI/2)}updatePath(){const{isBeveled:t}=this;t?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:t,innerRadius:e,outerRadius:i,path:s}=this,n=-t/2,a=t/2,r=-i,o=-e,l=this.getRotation(),h=[[n,o],[n,r],[a,r],[a,o],[n,o]].map((t=>{let[e,i]=t;return Xg(e,i,l)}));s.clear({trackChanges:!0}),s.moveTo(h[0].x,h[0].y),s.lineTo(h[1].x,h[1].y),s.lineTo(h[2].x,h[2].y),s.lineTo(h[3].x,h[3].y),s.lineTo(h[0].x,h[0].y),s.closePath()}updateBeveledPath(){const{columnWidth:t,path:e,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:a,isRadiusAxisReversed:r}=this,o=Ys(s,n),l=Math.asin(t/2/s),h=this.getRotation(),c=(t,e)=>Xg(t,e,h),d=(t,e)=>Math.sqrt(p(t,2)+p(e,2)),u=(t,e)=>e>t?0:Math.sqrt(p(t,2)-p(e,2)),g=(t,e,i)=>i?t<e:t>e,f=o&&!isNaN(l)&&l<Math.PI/6;let m=-t/2,y=t/2;const v=-i,x=-s*(f?Math.cos(l):1),b=g(a,d(s,t/2),!r);if(b){const t=u(a,s);m=-t,y=t}e.clear({trackChanges:!0});const S=c(m,x);e.moveTo(S.x,S.y);const k=Ys(s,i),w=g(a,d(i,t/2),!r);if(k&&f)e.arc(0,0,s,Pn(-l-Math.PI/2)+h,Pn(l-Math.PI/2)+h,!1);else if(w){const s=-u(a,t/2),n=u(a,i);if(!b){const t=c(m,s);e.lineTo(t.x,t.y)}if(e.arc(0,0,a,Math.atan2(s,m)+h,Math.atan2(v,-n)+h,!1),!Ys(n,0)){const t=c(n,v);e.lineTo(t.x,t.y)}e.arc(0,0,a,Math.atan2(v,n)+h,Math.atan2(s,y)+h,!1)}else{const t=c(m,v),i=c(y,v);e.lineTo(t.x,t.y),e.lineTo(i.x,i.y)}const D=c(y,x);if(e.lineTo(D.x,D.y),f)e.arc(0,0,s,Pn(l-Math.PI/2)+h,Pn(-l-Math.PI/2)+h,!0);else{const t=c(m,x);e.lineTo(t.x,t.y)}e.closePath()}};function jg(t,e,i,s,n){const a=Wn(t,e),r=a*(1-s)/2;if(t+=r,e-=r,a<.001)return 2*i*n;if(a>=2*Math.PI){const i=t+a/2;t=i-Math.PI,e=i+Math.PI}const o=i*Math.cos(t),l=i*Math.sin(t),h=i*Math.cos(e),c=i*Math.sin(e),d=Math.floor(Math.sqrt(p(o-h,2)+p(l-c,2))),u=2*i*n;return Math.max(1,Math.min(u,d))}Hg.className="RadialColumnShape",x([Jc()],Hg.prototype,"isBeveled",2),x([Jc()],Hg.prototype,"columnWidth",2),x([Jc()],Hg.prototype,"startAngle",2),x([Jc()],Hg.prototype,"endAngle",2),x([Jc()],Hg.prototype,"outerRadius",2),x([Jc()],Hg.prototype,"innerRadius",2),x([Jc()],Hg.prototype,"axisInnerRadius",2),x([Jc()],Hg.prototype,"axisOuterRadius",2),x([Jc()],Hg.prototype,"isRadiusAxisReversed",2);var qg=class extends hn{constructor(t){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=t}render(t){const{ctx:e,forceRender:i,stats:s}=t;if(0===this.dirty&&!i)return void(s&&s.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const n=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(t)}};x([sn({redraw:3})],qg.prototype,"x",2),x([sn({redraw:3})],qg.prototype,"y",2),x([sn({redraw:3})],qg.prototype,"width",2),x([sn({redraw:3})],qg.prototype,"height",2),x([sn({redraw:3})],qg.prototype,"opacity",2);var Zg=f(f({},Is),uo),Jg={};v(Jg,{CARTESIAN_AXIS_TYPE:()=>Ne,ChartTheme:()=>xi,DEFAULT_AXIS_GRID_COLOUR:()=>ei,DEFAULT_AXIS_LINE_COLOUR:()=>ii,DEFAULT_BACKGROUND_COLOUR:()=>ni,DEFAULT_CROSS_LINES_COLOUR:()=>si,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>di,DEFAULT_FONT_FAMILY:()=>qe,DEFAULT_HIERARCHY_FILLS:()=>ui,DEFAULT_HIERARCHY_STROKES:()=>pi,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>Qe,DEFAULT_INVERTED_LABEL_COLOUR:()=>Je,DEFAULT_LABEL_COLOUR:()=>Ze,DEFAULT_MUTED_LABEL_COLOUR:()=>ti,DEFAULT_POLAR_SERIES_STROKE:()=>ci,DEFAULT_SHADOW_COLOUR:()=>ai,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:()=>hi,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:()=>oi,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:()=>ri,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:()=>li,EXTENDS_AXES_DEFAULTS:()=>Ve,EXTENDS_AXES_GRID_LINE_DEFAULTS:()=>Ue,EXTENDS_AXES_LABEL_DEFAULTS:()=>Ke,EXTENDS_AXES_LINE_DEFAULTS:()=>Ye,EXTENDS_AXES_TICK_DEFAULTS:()=>$e,EXTENDS_CARTESIAN_MARKER_DEFAULTS:()=>He,EXTENDS_CHART_DEFAULTS:()=>Fe,EXTENDS_LEGEND_DEFAULTS:()=>Ge,EXTENDS_LEGEND_ITEM_DEFAULTS:()=>ze,EXTENDS_LEGEND_ITEM_MARKER_DEFAULTS:()=>We,EXTENDS_SERIES_DEFAULTS:()=>Xe,FONT_SIZE:()=>Te,FONT_WEIGHT:()=>Ae,IS_DARK_THEME:()=>_e,OVERRIDE_SERIES_LABEL_DEFAULTS:()=>je,POLAR_AXIS_SHAPE:()=>Ie,POLAR_AXIS_TYPE:()=>Oe,POSITION:()=>Ee,getChartTheme:()=>ls,markerPaletteFactory:()=>mu,singleSeriesPaletteFactory:()=>fu,themes:()=>Qg});var Qg=Zt(rs,(t=>null==t?void 0:t())),tf={};v(tf,{BandScale:()=>Kn,ColorScale:()=>Rp,ContinuousScale:()=>$a,Invalidating:()=>Vn,LinearScale:()=>Id,OrdinalTimeScale:()=>mr,TimeScale:()=>gr});var ef={};function sf(t,e){const i={};if(Array.isArray(e))for(let s=0;s<t.length;s++)i[`${t[s]}`]=e[s];else for(let s=0;s<t.length;s++)i[`${t[s]}`]=e;return i}v(ef,{Color:()=>pn,Logger:()=>O,Padding:()=>Zl,angleBetween:()=>Wn,areArrayItemsStrictlyEqual:()=>zo,areArrayNumbersEqual:()=>Wo,bifurcate:()=>ys,checkDatum:()=>Yr,clamp:()=>zs,clampArray:()=>Ws,countFractionDigits:()=>js,createId:()=>_s,deepClone:()=>Se,extent:()=>hs,findMinMax:()=>Vs,findRangeExtent:()=>Ks,isBetweenAngles:()=>Fn,isContinuous:()=>Kr,isDate:()=>Pt,isDenseInterval:()=>ur,isEqual:()=>Ys,isNegative:()=>$s,isNumber:()=>Kt,isNumberEqual:()=>Ys,isString:()=>Wt,isStringObject:()=>Vr,jsonApply:()=>De,jsonDiff:()=>be,jsonWalk:()=>we,mod:()=>Hs,normalisedExtent:()=>cs,normalisedExtentWithMetadata:()=>ds,normalizeAngle180:()=>_n,normalizeAngle360:()=>Pn,normalizeAngle360Inclusive:()=>Bn,range:()=>dr,resetIds:()=>Bs,round:()=>Us,sanitizeHtml:()=>xu,shallowClone:()=>ke,tickFormat:()=>Ao,tickStep:()=>cr,ticks:()=>lr,toDegrees:()=>zn,toFixed:()=>Xs,toRadians:()=>Gn,transformIntegratedCategoryValue:()=>$r,zipObject:()=>sf});var nf={};function af(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(const s of e)if(s instanceof Ud){const{x:t,y:e,width:i,height:n}=s;s.setProperties({x:e,y:t,width:n,height:i})}else if(s instanceof Io){const{x1:t,y1:e,x2:i,y2:n}=s;s.setProperties({x1:e,y1:t,x2:n,y2:i})}}function rf(t){let{defs:e,values:i,xAxis:s,yAxis:n}=t;if(!s||!n)throw new Error("Axes must be defined");const a={};for(const[r,[{def:o}]]of e)if(Object.hasOwn(i,r)){const{scale:t}="key"===o.type?s:n;a[r]=Math.round(t.convert(i[r]))}return a}v(nf,{AGG_VALUES_EXTENT:()=>cc,AND:()=>Un,ARRAY:()=>aa,ARRAY_OF:()=>ra,AbstractBarSeries:()=>up,AbstractBarSeriesProperties:()=>dp,ActionOnSet:()=>$o,Animation:()=>Tn,AnimationManager:()=>Dh,AreaSeriesTag:()=>ap,Axis:()=>yl,AxisLabel:()=>sl,AxisTick:()=>rl,BOOLEAN:()=>qn,BOOLEAN_ARRAY:()=>fa,Background:()=>Xd,BackgroundModule:()=>Hd,BaseModuleInstance:()=>St,BaseProperties:()=>me,COLOR_STRING:()=>pa,COLOR_STRING_ARRAY:()=>ga,CartesianAxis:()=>bl,CartesianSeries:()=>Rd,CartesianSeriesNodeEvent:()=>Cd,CartesianSeriesProperties:()=>Ld,CategoryAxis:()=>Sl,ChartAxisDirection:()=>Wa,ChartEventManager:()=>Mh,ChartOptions:()=>As,ChartUpdateType:()=>eh,ContextMenuRegistry:()=>Ch,CursorManager:()=>Rh,DATE:()=>ca,DATE_ARRAY:()=>va,DATE_OR_DATETIME_MS:()=>da,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Dd,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>Md,DEGREE:()=>sa,DIRECTION:()=>Aa,DataController:()=>uh,DataModel:()=>ch,DataModelSeries:()=>vd,DataService:()=>gh,Default:()=>il,DefaultTimeFormats:()=>tr,Deprecated:()=>Ns,DeprecatedAndRenamedTo:()=>Os,FONT_STYLE:()=>Da,FONT_WEIGHT:()=>Ma,FUNCTION:()=>Zn,GREATER_THAN:()=>ha,GestureDetector:()=>Ah,GroupedCategoryAxis:()=>Ol,HierarchyNode:()=>lf,HierarchySeries:()=>hf,HierarchySeriesProperties:()=>cf,HighlightManager:()=>Eh,HighlightStyle:()=>kd,INTERACTION_RANGE:()=>Na,INTERACTION_TYPES:()=>yh,InteractionManager:()=>kh,InteractionState:()=>bh,LABEL_PLACEMENT:()=>Oa,LESS_THAN:()=>la,LINE_CAP:()=>ba,LINE_DASH:()=>ka,LINE_JOIN:()=>Sa,Layers:()=>Wr,LayoutService:()=>Kh,LonLatBBox:()=>df,MARKER_SHAPE:()=>Mu,MATCHING_CROSSLINE_TYPE:()=>Ur,MAX_SPACING:()=>Ba,MIN_SPACING:()=>Pa,MercatorScale:()=>Ng,Motion:()=>fn,NAN:()=>ta,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>An,NUMBER:()=>Qn,NUMBER_ARRAY:()=>ma,NUMBER_OR_NAN:()=>na,Navigator:()=>pu,NavigatorModule:()=>gu,OBJECT:()=>Hn,OBJECT_ARRAY:()=>xa,OR:()=>Xn,OVERFLOW_STRATEGY:()=>Ta,ObserveChanges:()=>Uo,PHASE_METADATA:()=>Cn,PHASE_ORDER:()=>Mn,PLACEMENT:()=>Ea,PLAIN_OBJECT:()=>jn,POSITION:()=>wa,POSITIVE_NUMBER:()=>ea,PolarAxis:()=>Cg,PolarSeries:()=>ng,PropertiesArray:()=>ye,ProxyOnWrite:()=>Ko,ProxyProperty:()=>Vo,ProxyPropertyOnWrite:()=>Yo,QUICK_TRANSITION:()=>Dn,RATIO:()=>ia,RepeatType:()=>Ln,SMALLEST_KEY_INTERVAL:()=>hc,SORT_DOMAIN_GROUPS:()=>dc,STRING:()=>Jn,STRING_ARRAY:()=>ya,Series:()=>Pc,SeriesGroupingChangedEvent:()=>Ic,SeriesItemHighlightStyle:()=>xd,SeriesMarker:()=>Cu,SeriesNodeEvent:()=>Oc,SeriesNodePickMode:()=>kc,SeriesProperties:()=>wd,SeriesTooltip:()=>Ru,StateMachine:()=>go,TEXT_ALIGN:()=>La,TEXT_WRAP:()=>Ca,TIME_FORMAT_STRINGS:()=>er,ToolbarManager:()=>Fh,TooltipManager:()=>zh,UNION:()=>Ia,UpdateService:()=>Wc,VERTICAL_ALIGN:()=>Ra,Validate:()=>Yn,ZoomManager:()=>Wh,__FORCE_MODULE_DETECTION:()=>uf,accumulateGroup:()=>xc,accumulatedValue:()=>oc,accumulativeValueProperty:()=>Ac,adjustLabelPlacement:()=>Dp,animationValidation:()=>mc,area:()=>rc,arraysEqual:()=>us,assignJsonApplyConstructedArray:()=>Ka,backfillPathPointData:()=>Gu,bifurcate:()=>ys,buildFormatter:()=>Qa,buildResetPathFn:()=>$u,calculateDefaultTimeTickFormat:()=>nr,calculatePlacement:()=>Xo,checkCrisp:()=>yp,circularSliceArray:()=>ms,clamp:()=>zs,clampArray:()=>Ws,collapsedStartingBarPosition:()=>xp,convertValuesToScaleByDefs:()=>rf,countFractionDigits:()=>js,createDatumId:()=>Sc,createDeprecationWarning:()=>Es,createElement:()=>ks,dateToNumber:()=>ir,deconstructSelectionsOrNodes:()=>Rn,deepClone:()=>Se,deepMerge:()=>Ht,defaultTimeTickFormat:()=>sr,determinePathStatus:()=>ip,diff:()=>bc,downloadUrl:()=>ws,enterpriseModule:()=>bt,extent:()=>hs,extractDecoratedProperties:()=>At,findMinMax:()=>Vs,findRangeExtent:()=>Ks,fixNumericExtent:()=>rh,formatStringBuilder:()=>rr,fromToMotion:()=>En,getDocument:()=>bs,getLowestGranularityFormat:()=>ar,getMissCount:()=>lh,getPath:()=>Qt,getRectConfig:()=>mp,getWindow:()=>Ss,groupAccumulativeValueProperty:()=>Nc,groupAverage:()=>ac,groupBy:()=>fs,groupCount:()=>nc,groupSum:()=>ic,injectStyle:()=>Ds,invertShapeDirection:()=>af,isArray:()=>Nt,isBoolean:()=>Ot,isDate:()=>It,isDecoratedObject:()=>Rt,isDefined:()=>Et,isEnumKey:()=>$t,isEnumValue:()=>Ut,isEqual:()=>Ys,isFiniteNumber:()=>Kt,isFunction:()=>_t,isHtmlElement:()=>Yt,isNegative:()=>$s,isNumber:()=>Vt,isObject:()=>Ft,isObjectLike:()=>Gt,isPlainObject:()=>zt,isProperties:()=>ve,isRegExp:()=>Bt,isString:()=>Wt,isSymbol:()=>Xt,isValidDate:()=>Pt,jsonApply:()=>De,jsonDiff:()=>be,jsonWalk:()=>we,keyProperty:()=>Mc,listDecoratedProperties:()=>Tt,mapValues:()=>Zt,markerFadeInAnimation:()=>Au,markerPaletteFactory:()=>mu,markerScaleInAnimation:()=>Eu,markerSwipeScaleInAnimation:()=>Nu,mergeArrayDefaults:()=>qt,mergeDefaults:()=>jt,midpointStartingBarPosition:()=>bp,minMax:()=>Bu,mod:()=>Hs,moduleRegistry:()=>kt,normaliseGroupTo:()=>pc,normalisePropertyTo:()=>fc,normalisedExtent:()=>cs,normalisedExtentWithMetadata:()=>ds,pairCategoryData:()=>ep,pairContinuousData:()=>tp,partialAssign:()=>ee,pathFadeInAnimation:()=>Ku,pathFadeOutAnimation:()=>Yu,pathSwipeInAnimation:()=>Vu,predicateWithMessage:()=>_a,prepareAreaPathAnimation:()=>lp,prepareAxisAnimationContext:()=>ll,prepareAxisAnimationFunctions:()=>dl,prepareBarAnimationFunctions:()=>Sp,prepareLinePathAnimation:()=>np,prepareLinePathAnimationFns:()=>sp,prepareMarkerAnimation:()=>Pu,range:()=>sc,rangedValueProperty:()=>Lc,renderPartialPath:()=>Wu,resetAxisGroupFn:()=>ul,resetAxisLabelSelectionFn:()=>gl,resetAxisLineSelectionFn:()=>fl,resetAxisSelectionFn:()=>pl,resetBarSelectionsFn:()=>kp,resetIds:()=>Bs,resetLabelFn:()=>ku,resetMarkerFn:()=>Ou,resetMarkerPositionFn:()=>Iu,resetMotion:()=>po,round:()=>Us,seriesLabelFadeInAnimation:()=>bu,seriesLabelFadeOutAnimation:()=>Su,setDocument:()=>Ms,setPath:()=>te,setWindow:()=>Cs,shallowClone:()=>ke,singleSeriesPaletteFactory:()=>fu,staticFromToMotion:()=>Nn,stringify:()=>za,sum:()=>ec,toArray:()=>ps,toFixed:()=>Xs,trailingAccumulatedValue:()=>lc,trailingAccumulatedValueProperty:()=>Ec,trailingValue:()=>Tc,trailingValueProperty:()=>Rc,unique:()=>gs,updateClipPath:()=>Uu,updateLabelNode:()=>wp,updateRect:()=>fp,validateCrossLineValues:()=>Xr,valueProperty:()=>Cc,without:()=>Jt});var of=class t{constructor(t,e,i,s,n,a,r,o,l,h,c){this.series=t,this.index=e,this.datum=i,this.size=s,this.colorValue=n,this.fill=a,this.stroke=r,this.sumSize=o,this.depth=l,this.parent=h,this.children=c,this.midPoint={x:0,y:0}}contains(t){let e=t;for(;null!=e&&e.index>=this.index;){if(e===this)return!0;e=e.parent}return!1}walk(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.Walk.PreOrder;i===t.Walk.PreOrder&&e(this),this.children.forEach((t=>{t.walk(e,i)})),i===t.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*w(t)}};of.Walk={PreOrder:0,PostOrder:1};var lf=of,hf=class extends Pc{constructor(t){super({moduleCtx:t,pickModes:[0],contentGroupVirtual:!1}),this.rootNode=new lf(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new go("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},(()=>this.checkProcessedDataAnimatable()))}resetAnimation(t){"initial"===t?this.animationState.transition("reset"):"ready"===t&&this.animationState.transition("skip")}processData(){return S(this,null,(function*(){var t,e;const{childrenKey:i,sizeKey:s,colorKey:n,fills:a,strokes:r,colorRange:o}=this.properties;let l=0;let h=0,c=1/0,d=-1/0;const u=new Array((null!=(e=null==(t=this.data)?void 0:t.length)?e:0)+1).fill(void 0),p=(t,e)=>{const a=(l+=1,l),r=null!=e.depth?e.depth+1:0,o=null!=i?t[i]:void 0,p=null==o||0===o.length;let f=null!=s?t[s]:void 0;f=Number.isFinite(f)?Math.max(f,0):p?1:0;const m=f;h=Math.max(h,r);const y=null!=n?t[n]:void 0;return"number"==typeof y&&(u[a]=y,c=Math.min(c,y),d=Math.max(d,y)),g(new lf(this,a,t,f,y,void 0,void 0,m,r,e,[]),o)},g=(t,e)=>(null==e||e.forEach((e=>{const i=p(e,t);t.children.push(i),t.sumSize+=i.sumSize})),t),f=g(new lf(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),m=[c,d];let y;null!=o&&Number.isFinite(c)&&Number.isFinite(d)&&(y=new Rp,y.domain=m,y.range=o,y.update()),f.children.forEach(((t,e)=>{t.walk((t=>{let i;const s=u[t.index];null!=s&&(i=null==y?void 0:y.convert(s)),i??(i=null==a?void 0:a[e%a.length]),t.fill=i,t.stroke=null==y?null==r?void 0:r[e%r.length]:"rgba(0, 0, 0, 0.2)"}))})),this.rootNode=f,this.maxDepth=h,this.colorDomain=m}))}update(t){return S(this,arguments,(function(t){var e=this;let{seriesRect:i}=t;return function*(){yield e.updateSelections(),yield e.updateNodes();const t=e.getAnimationData();e.checkResize(i)&&e.animationState.transition("resize",t),e.animationState.transition("update",t)}()}))}resetAllAnimation(t){var e;const i=null==(e=this.animationResetFns)?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=i&&po(t.datumSelections,i)}animateEmptyUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateWaitingUpdateReady(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animateReadyHighlight(t){var e;const i=null==(e=this.animationResetFns)?void 0:e.datum;null!=i&&po([t],i)}animateReadyResize(t){this.resetAllAnimation(t)}animateClearingUpdateEmpty(t){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(t)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(t){const{colorKey:e,colorName:i,colorRange:s,visible:n}=this.properties;return"gradient"===t&&null!=e&&null!=s?[{legendType:"gradient",enabled:n,seriesId:this.id,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(t){return`${t.index}`}getDatumId(t){return this.getDatumIdFromData(t)}},cf=class extends wd{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(Pe),this.strokes=Object.values(Be)}};x([Yn(Jn)],cf.prototype,"childrenKey",2),x([Yn(Jn,{optional:!0})],cf.prototype,"sizeKey",2),x([Yn(Jn,{optional:!0})],cf.prototype,"colorKey",2),x([Yn(Jn,{optional:!0})],cf.prototype,"colorName",2),x([Yn(ga)],cf.prototype,"fills",2),x([Yn(ga)],cf.prototype,"strokes",2),x([Yn(ga,{optional:!0})],cf.prototype,"colorRange",2);var df=class{constructor(t,e,i,s){this.lon0=t,this.lat0=e,this.lon1=i,this.lat1=s}merge(t){this.lon0=Math.min(this.lon0,t.lon0),this.lat0=Math.min(this.lat0,t.lat0),this.lon1=Math.max(this.lon1,t.lon1),this.lat1=Math.max(this.lat1,t.lat1)}},uf=0;const pf=Object.freeze(Object.defineProperty({__proto__:null,AgChart:zg,AgCharts:Gg,AgErrorBarSupportedSeriesTypes:D,AgTooltipPositionType:M,Marker:td,VERSION:Kg,_ModuleSupport:nf,_Scale:tf,_Scene:Yg,_Theme:Jg,_Util:ef,__FORCE_MODULE_DETECTION:C,time:L},Symbol.toStringTag,{value:"Module"}))}}]);